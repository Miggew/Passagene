import{c as la,A as da,l as ma,r as A,s as h,j as a,h as q,g as fa}from"./index-CvlUDCD-.js";import{T as ua,S as ha,a as pa,b as ga,c as xa,d as _a}from"./sheet-Bfcmzecc.js";import{u as oa,C as $,c as B,a as F,b as U}from"./use-toast-BhbfqK05.js";import{B as ea}from"./baby-OCGQJO6t.js";import{C as J,D as va}from"./DatePickerBR-gAx3gAQT.js";import{M as ja}from"./map-pin-CAPZ6-1g.js";import{U as ba}from"./user-plus-Co7haBoe.js";import{S as ia}from"./StatusBadge-Dl4aSm-D.js";import{B as G}from"./badge-C6XBkHcG.js";import{T as Na,a as Ea,b as sa,c as X,d as Aa,e as Q}from"./table-BAfLAU-a.js";import{E as Ca}from"./EmptyState-DFkj0E0i.js";import{D as Da,b as Ra,c as wa,d as Ta,e as Sa,f as ya}from"./dialog-DSJKtNd7.js";import{L as za}from"./label-BIMTC7_j.js";import"./x-DpiajgWI.js";import"./popover-D6dVxm31.js";import"./index-BYe3zTS0.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=la("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),_=t=>{if(!t||/^\d{4}-\d{2}-\d{2}$/.test(t))return t;const u=t.match(/^(\d{4}-\d{2}-\d{2})/);if(u)return u[1];try{const i=new Date(t);if(isNaN(i.getTime()))return t;const r=i.getUTCFullYear(),n=String(i.getUTCMonth()+1).padStart(2,"0"),d=String(i.getUTCDate()).padStart(2,"0");return`${r}-${n}-${d}`}catch{return t}},ra=t=>{try{return new Date(t+"T12:00:00").toLocaleDateString("pt-BR")}catch{return t}},na={CADASTRO:{icon:ba,className:"w-4 h-4 text-indigo-600"},MUDANCA_FAZENDA:{icon:ja,className:"w-4 h-4 text-orange-600"},PROTOCOLO:{icon:J,className:"w-4 h-4 text-blue-600"},TE:{icon:ma,className:"w-4 h-4 text-green-600"},DG:{icon:da,className:"w-4 h-4 text-purple-600"},SEXAGEM:{icon:ea,className:"w-4 h-4 text-pink-600"},PARICAO:{icon:ea,className:"w-4 h-4 text-teal-600"},CIO_LIVRE:{icon:ua,className:"w-4 h-4 text-amber-600"}},ca={CADASTRO:{label:"Cadastro",className:"bg-indigo-50 text-indigo-700 border-indigo-200"},MUDANCA_FAZENDA:{label:"Fazenda",className:"bg-orange-50 text-orange-700 border-orange-200"},PROTOCOLO:{label:"Protocolo",className:"bg-blue-50 text-blue-700 border-blue-200"},TE:{label:"TE",className:"bg-green-50 text-green-700 border-green-200"},DG:{label:"DG",className:"bg-purple-50 text-purple-700 border-purple-200"},SEXAGEM:{label:"Sexagem",className:"bg-pink-50 text-pink-700 border-pink-200"},PARICAO:{label:"Parição",className:"bg-teal-50 text-teal-700 border-teal-200"},CIO_LIVRE:{label:"Cio Livre",className:"bg-amber-50 text-amber-700 border-amber-200"}},ta={CONFIRMADA:{label:"Confirmada",className:"bg-emerald-50 text-emerald-700 border-emerald-200"},REJEITADA:{label:"Rejeitada",className:"bg-rose-50 text-rose-700 border-rose-200"},SUBSTITUIDA:{label:"Substituída",className:"bg-slate-50 text-slate-700 border-slate-200"},PENDENTE:{label:"Pendente",className:"bg-amber-50 text-amber-700 border-amber-200"}},La=t=>ta[t||"PENDENTE"]||ta.PENDENTE;function Pa(){const{toast:t}=oa(),[u,i]=A.useState(!0),[r,n]=A.useState(null),[d,w]=A.useState([]),[D,T]=A.useState([]),[E,S]=A.useState({totalCiclos:0,totalGestacoes:0,ciclosDesdeUltimaGestacao:0}),g=A.useCallback(async x=>{const c=[],v=[],{data:z,error:P}=await h.from("receptoras").select("*").eq("id",x).single();if(P){if((P==null?void 0:P.code)==="PGRST116")return{receptoraData:null,items:[],itemsAdmin:[],stats:{totalCiclos:0,totalGestacoes:0,ciclosDesdeUltimaGestacao:0}};throw P}const{data:O}=await h.from("receptora_fazenda_historico").select("id, fazenda_id, data_inicio").eq("receptora_id",x).order("data_inicio",{ascending:!0});if(O&&O.length>0){const e=O[0],{data:s}=await h.from("fazendas").select("nome").eq("id",e.fazenda_id).single();v.push({data:_(e.data_inicio),tipo:"CADASTRO",resumo:`Cadastro na fazenda ${(s==null?void 0:s.nome)||"desconhecida"}`});for(let o=1;o<O.length;o++){const l=O[o],j=O[o-1],{data:m}=await h.from("fazendas").select("id, nome").in("id",[j.fazenda_id,l.fazenda_id].filter(Boolean)),b=new Map((m==null?void 0:m.map(f=>[f.id,f.nome]))||[]),p=b.get(j.fazenda_id)||"?",N=b.get(l.fazenda_id)||"?";v.push({data:_(l.data_inicio),tipo:"MUDANCA_FAZENDA",resumo:`${p} → ${N}`})}}const{data:I}=await h.from("protocolo_receptoras").select(`
        id,
        data_inclusao,
        status,
        motivo_inapta,
        protocolos_sincronizacao (
          id,
          data_inicio,
          passo2_data
        )
      `).eq("receptora_id",x).order("data_inclusao",{ascending:!1}),{data:y}=await h.from("diagnosticos_gestacao").select("*").eq("receptora_id",x).eq("tipo_diagnostico","DG").order("data_diagnostico",{ascending:!1}),{data:k}=await h.from("animais").select("id, data_nascimento, sexo").eq("receptora_id",x);if(k&&k.length>0&&k.forEach(e=>{e.data_nascimento&&c.push({data:_(e.data_nascimento),tipo:"PARICAO",resumo:"Parição registrada",detalhes:`Animal ${e.id.substring(0,8)} • Sexo: ${e.sexo||"—"}`})}),I)for(const e of I){const s=Array.isArray(e.protocolos_sincronizacao)?e.protocolos_sincronizacao[0]:e.protocolos_sincronizacao;if(!s||!s.data_inicio)continue;const o=_(s.data_inicio);let l="1º Passo";if(s.passo2_data){const j=_(s.passo2_data);e.status==="APTA"?l="1º Passo • 2º Passo: APTA":e.status==="INAPTA"?(l="1º Passo • 2º Passo: DESCARTADA",e.motivo_inapta&&(l+=` (${e.motivo_inapta})`)):l="1º Passo • 2º Passo",c.push({data:j,tipo:"PROTOCOLO",resumo:l})}else c.push({data:o,tipo:"PROTOCOLO",resumo:l})}const{data:H}=await h.from("transferencias_embrioes").select(`
        id,
        embriao_id,
        data_te,
        status_te,
        embrioes (
          id,
          identificacao,
          classificacao,
          lote_fiv_acasalamento_id
        )
      `).eq("receptora_id",x).order("data_te",{ascending:!1}),V=new Set;H&&H.forEach(e=>{const s=Array.isArray(e.embrioes)?e.embrioes[0]:e.embrioes;s!=null&&s.lote_fiv_acasalamento_id&&V.add(s.lote_fiv_acasalamento_id)});const Y=new Map;if(V.size>0){const e=Array.from(V).filter(Boolean);if(e.length>0){const{data:s,error:o}=await h.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",e);if(!o&&s){const l=s.map(p=>p.aspiracao_doadora_id).filter(Boolean),j=s.map(p=>p.dose_semen_id).filter(Boolean),m=new Map;if(l.length>0){const{data:p}=await h.from("aspiracoes_doadoras").select("id, doadora_id").in("id",l);if(p){const N=p.map(f=>f.doadora_id).filter(Boolean);if(N.length>0){const{data:f}=await h.from("doadoras").select("id, registro").in("id",N);if(f){const Z=new Map(f.map(R=>[R.id,R.registro]));p.forEach(R=>{const M=Z.get(R.doadora_id);M&&m.set(R.id,M)})}}}}const b=new Map;if(j.length>0){const{data:p}=await h.from("doses_semen").select("id, touro_id, touro:touros(id, nome, registro, raca)").in("id",j);p&&p.forEach(N=>{const f=N.touro;b.set(N.id,(f==null?void 0:f.nome)||"Touro desconhecido")})}s.forEach(p=>{const N=m.get(p.aspiracao_doadora_id)||"?",f=b.get(p.dose_semen_id)||"?";Y.set(p.id,{doadora:N,touro:f})})}}}const K=new Map;if(H){const e=new Map;H.forEach(s=>{const o=s.data_te;e.has(o)||e.set(o,[]),e.get(o).push(s)}),e.forEach((s,o)=>{const l=s.filter(m=>m.status_te==="REALIZADA"),j=s.filter(m=>m.status_te==="DESCARTADA");if(l.length>0){const m=[],b=[];l.forEach(N=>{const f=Array.isArray(N.embrioes)?N.embrioes[0]:N.embrioes,Z=(f==null?void 0:f.identificacao)||"Embrião";if(m.push(Z),f!=null&&f.lote_fiv_acasalamento_id){const R=Y.get(f.lote_fiv_acasalamento_id);if(R){const M=`${R.doadora} × ${R.touro}`;b.includes(M)||b.push(M)}}});let p=`${l.length} embrião(ões): ${m.join(", ")}`;b.length>0&&(p+=` | ${b.join("; ")}`),c.push({data:_(o),tipo:"TE",resumo:p}),K.set(o,b)}else j.length>0&&c.push({data:_(o),tipo:"TE",resumo:"Descartada para TE"})})}if(y)for(const e of y){let s=e.resultado==="PRENHE"?"PRENHE":e.resultado==="RETOQUE"?"PRENHE (RETOQUE)":"VAZIA";if(e.numero_gestacoes&&e.numero_gestacoes>0&&e.resultado!=="VAZIA"&&(s+=` (${e.numero_gestacoes} gestação${e.numero_gestacoes>1?"ões":""})`),(e.resultado==="PRENHE"||e.resultado==="RETOQUE")&&e.data_te){const o=K.get(e.data_te);o&&o.length>0&&(s+=` | ${o.join("; ")}`)}c.push({data:_(e.data_diagnostico),tipo:"DG",resumo:s})}const{data:W}=await h.from("diagnosticos_gestacao").select("*").eq("receptora_id",x).eq("tipo_diagnostico","SEXAGEM").order("data_diagnostico",{ascending:!1});if(W)for(const e of W){let s="Sexagem: ",o=[];if(e.observacoes){const l=e.observacoes.match(/SEXAGENS:([^|]+)/);l&&(o=l[1].split(",").map(m=>m.trim()).filter(m=>m).map(m=>({FEMEA:"Fêmea",MACHO:"Macho",SEM_SEXO:"Sem Sexo",VAZIA:"Vazia"})[m]||m))}if(o.length===0&&e.sexagem){const l={FEMEA:"Fêmea",MACHO:"Macho"};o.push(l[e.sexagem]||e.sexagem)}o.length>0?(o.length===1?s+=o[0]:o.length===2?o[0]===o[1]?s+=`2 ${o[0]}s`:s+=`${o[0]} e ${o[1]}`:s+=o.join(", "),e.numero_gestacoes&&e.numero_gestacoes>1&&(s+=` (${e.numero_gestacoes} gestações)`)):e.resultado==="PRENHE"?s+="PRENHE":e.resultado==="VAZIA"?s+="VAZIA":s+="Resultado não disponível",c.push({data:_(e.data_diagnostico),tipo:"SEXAGEM",resumo:s})}const{data:aa}=await h.from("receptoras_cio_livre").select("data_cio, observacoes, ativa").eq("receptora_id",x).order("data_cio",{ascending:!1});if(aa&&(z==null?void 0:z.status_cio_livre)==="CONFIRMADA"){const e=aa[0];e!=null&&e.data_cio&&c.push({data:_(e.data_cio),tipo:"CIO_LIVRE",resumo:"Cio livre"})}const L={totalCiclos:0,totalGestacoes:0,ciclosDesdeUltimaGestacao:0};if(I){L.totalCiclos=I.length;let e=null;if(y&&y.length>0){const o=[...y].sort((l,j)=>{const m=_(l.data_diagnostico);return _(j.data_diagnostico).localeCompare(m)}).find(l=>l.resultado==="PRENHE"||l.resultado==="RETOQUE");o&&(e=_(o.data_diagnostico))}if(e)for(const s of I){const o=Array.isArray(s.protocolos_sincronizacao)?s.protocolos_sincronizacao[0]:s.protocolos_sincronizacao;if(!o)continue;const l=o.passo2_data||o.data_inicio;if(!l)continue;_(l)>e&&L.ciclosDesdeUltimaGestacao++}else L.ciclosDesdeUltimaGestacao=L.totalCiclos}if(y){const e=new Set;y.forEach(s=>{if(s.resultado==="PRENHE"||s.resultado==="RETOQUE"){const o=s.data_te||s.data_diagnostico;e.add(o)}}),L.totalGestacoes=e.size}return c.sort((e,s)=>s.data.localeCompare(e.data)),v.sort((e,s)=>s.data.localeCompare(e.data)),{receptoraData:z,items:c,itemsAdmin:v,stats:L}},[]),C=A.useCallback(async x=>{try{i(!0);const c=await g(x);n(c.receptoraData),w(c.items),T(c.itemsAdmin),S(c.stats)}catch(c){t({title:"Erro ao carregar histórico",description:c instanceof Error?c.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},[g,t]);return{loading:u,receptora:r,historico:d,historicoAdmin:D,estatisticas:E,loadData:C,setReceptora:n}}function Ia({receptora:t,onSuccess:u}){const{toast:i}=oa(),[r,n]=A.useState(!1),[d,w]=A.useState(!1),[D,T]=A.useState({data_cio:new Date().toISOString().split("T")[0]});return{submitting:r,showCioLivreDialog:d,setShowCioLivreDialog:w,cioLivreForm:D,setCioLivreForm:T,handleRegistrarCioLivre:async()=>{var C,x;if(!t){i({title:"Receptora não carregada",description:"Abra novamente o histórico para registrar o cio livre.",variant:"destructive"});return}let g=t.fazenda_atual_id;if(!g){const{data:c,error:v}=await h.from("vw_receptoras_fazenda_atual").select("fazenda_id_atual").eq("receptora_id",t.id).limit(1);!v&&c&&c.length>0&&(g=((C=c[0])==null?void 0:C.fazenda_id_atual)||void 0)}if(!g){const{data:c,error:v}=await h.from("receptora_fazenda_historico").select("fazenda_id, data_inicio").eq("receptora_id",t.id).order("data_inicio",{ascending:!1}).limit(1);!v&&c&&c.length>0&&(g=((x=c[0])==null?void 0:x.fazenda_id)||void 0)}if(!g){i({title:"Fazenda não encontrada",description:"A receptora não possui fazenda atual vinculada.",variant:"destructive"});return}if(!D.data_cio){i({title:"Data do cio não informada",description:"Informe a data do cio livre.",variant:"destructive"});return}try{n(!0);const{error:c}=await h.from("receptoras").update({is_cio_livre:!0,status_cio_livre:"PENDENTE"}).eq("id",t.id);if(c)throw c;const{error:v}=await h.from("receptoras_cio_livre").insert([{receptora_id:t.id,fazenda_id:g,data_cio:D.data_cio,observacoes:null,ativa:!0}]);if(v)throw v;i({title:"Cio livre registrado",description:"Receptora liberada para TE. Confirmação automática após a transferência."}),w(!1),T({data_cio:new Date().toISOString().split("T")[0]}),await u()}catch(c){i({title:"Erro ao registrar cio livre",description:c instanceof Error?c.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},handleRejeitarCioLivre:async()=>{if(!(!t||!t.is_cio_livre)&&confirm("Rejeitar este cio livre? A receptora não ficará disponível para TE."))try{n(!0);const{error:g}=await h.from("receptoras").update({is_cio_livre:!1,status_cio_livre:"REJEITADA"}).eq("id",t.id);if(g)throw g;const{error:C}=await h.from("receptoras_cio_livre").update({ativa:!1}).eq("receptora_id",t.id).eq("ativa",!0);if(C)throw C;i({title:"Cio livre rejeitado",description:"O cio livre foi marcado como rejeitado."}),await u()}catch(g){i({title:"Erro ao rejeitar cio livre",description:g instanceof Error?g.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}}}}function Ma({receptora:t}){return a.jsx($,{children:a.jsx(B,{className:"pt-6",children:a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"Brinco"}),a.jsx("p",{className:"font-medium",children:t.identificacao})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"Nome"}),a.jsx("p",{className:"font-medium",children:t.nome||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"Status Atual"}),a.jsx(ia,{status:t.status_reprodutivo||"VAZIA"})]})]})})})}function Ga({estatisticas:t}){return a.jsxs($,{children:[a.jsx(F,{children:a.jsx(U,{className:"text-base",children:"Estatísticas Reprodutivas"})}),a.jsx(B,{children:a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsx("p",{className:"text-2xl font-bold text-blue-700",children:t.totalCiclos}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Ciclos Realizados"})]}),a.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg border border-green-200",children:[a.jsx("p",{className:"text-2xl font-bold text-green-700",children:t.totalGestacoes}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Gestações"})]}),a.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg border border-orange-200",children:[a.jsx("p",{className:"text-2xl font-bold text-orange-700",children:t.ciclosDesdeUltimaGestacao}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Ciclos desde Última Gestação"})]})]})})]})}function $a({receptora:t,submitting:u,onRejeitar:i}){const r=La(t.status_cio_livre);return a.jsxs($,{children:[a.jsx(F,{children:a.jsx(U,{className:"text-base",children:"Cio Livre"})}),a.jsxs(B,{children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-slate-500",children:"Status"}),a.jsx(G,{variant:"outline",className:r.className,children:r.label})]}),t.status_cio_livre==="PENDENTE"&&a.jsx("div",{className:"mt-4 flex items-center gap-2",children:a.jsxs(q,{type:"button",variant:"outline",onClick:i,disabled:u,children:[a.jsx(Oa,{className:"w-4 h-4 mr-2"}),"Rejeitar Cio Livre"]})})]})]})}function Ba({historicoAdmin:t}){if(t.length===0)return null;const u=r=>{const n=na[r];if(!n)return a.jsx(J,{className:"w-4 h-4"});const d=n.icon;return a.jsx(d,{className:n.className})},i=r=>{const n=ca[r];return n?a.jsx(G,{variant:"outline",className:n.className,children:n.label}):a.jsx(G,{variant:"outline",children:r})};return a.jsxs($,{children:[a.jsx(F,{children:a.jsx(U,{className:"text-base",children:"Histórico Administrativo"})}),a.jsx(B,{children:a.jsx("div",{className:"space-y-3",children:t.map((r,n)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-2 min-w-[100px]",children:[u(r.tipo),i(r.tipo)]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900",children:r.resumo}),a.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:ra(r.data)})]})]},n))})})]})}function Ha({historico:t}){const u=r=>{const n=na[r];if(!n)return a.jsx(J,{className:"w-4 h-4"});const d=n.icon;return a.jsx(d,{className:n.className})},i=r=>{const n=ca[r];return n?a.jsx(G,{variant:"outline",className:n.className,children:n.label}):a.jsx(G,{variant:"outline",children:r})};return a.jsxs($,{children:[a.jsx(F,{children:a.jsxs(U,{className:"text-base",children:["Linha do Tempo Reprodutiva (",t.length," eventos)"]})}),a.jsx(B,{children:t.length===0?a.jsx(Ca,{title:"Nenhum evento registrado",description:"Quando houver eventos, eles aparecerão aqui."}):a.jsxs(Na,{children:[a.jsx(Ea,{children:a.jsxs(sa,{children:[a.jsx(X,{className:"w-[100px]",children:"Data"}),a.jsx(X,{className:"w-[120px]",children:"Tipo"}),a.jsx(X,{children:"Resumo"})]})}),a.jsx(Aa,{children:t.map((r,n)=>a.jsxs(sa,{className:"hover:bg-slate-50",children:[a.jsx(Q,{className:"font-medium text-sm",children:ra(r.data)}),a.jsx(Q,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[u(r.tipo),i(r.tipo)]})}),a.jsx(Q,{children:a.jsx("span",{className:"text-sm",children:r.resumo})})]},n))})]})})]})}function qa({open:t,onOpenChange:u,receptora:i,cioLivreForm:r,setCioLivreForm:n,submitting:d,onSubmit:w}){const D=(i==null?void 0:i.status_reprodutivo)||"VAZIA",T=E=>{u(E),E&&n({data_cio:new Date().toISOString().split("T")[0]})};return a.jsx(Da,{open:t,onOpenChange:T,children:a.jsxs(Ra,{className:"max-w-lg",children:[a.jsxs(wa,{children:[a.jsx(Ta,{children:"Registrar Cio Livre"}),a.jsx(Sa,{children:"Registre a data do cio livre. A confirmação ocorrerá automaticamente após a TE."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"rounded-md border border-slate-200 bg-slate-50 p-3 text-sm",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{children:"Receptora"}),a.jsxs("span",{className:"font-medium",children:[i==null?void 0:i.identificacao," ",i!=null&&i.nome?`- ${i.nome}`:""]})]}),a.jsxs("div",{className:"mt-2 flex items-center justify-between gap-2",children:[a.jsx("span",{children:"Status atual"}),a.jsx(ia,{status:D})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(za,{children:"Data do cio *"}),a.jsx(va,{value:r.data_cio,onChange:E=>n(S=>({...S,data_cio:E||""})),required:!0})]})]}),a.jsxs(ya,{children:[a.jsx(q,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancelar"}),a.jsx(q,{type:"button",onClick:w,disabled:d,children:"Registrar Cio Livre"})]})]})})}function ie({receptoraId:t,open:u,onClose:i,onUpdated:r}){const{loading:n,receptora:d,historico:w,historicoAdmin:D,estatisticas:T,loadData:E}=Pa(),{submitting:S,showCioLivreDialog:g,setShowCioLivreDialog:C,cioLivreForm:x,setCioLivreForm:c,handleRegistrarCioLivre:v,handleRejeitarCioLivre:z}=Ia({receptora:d,onSuccess:async()=>{await E(t),r==null||r()}});return A.useEffect(()=>{u&&t&&E(t)},[u,t,E]),a.jsxs(ha,{open:u,onOpenChange:i,children:[a.jsxs(pa,{className:"w-full sm:max-w-3xl overflow-y-auto",children:[a.jsxs(ga,{children:[a.jsx(xa,{children:"Histórico da Receptora"}),a.jsx(_a,{children:d?`Brinco ${d.identificacao} ${d.nome?`- ${d.nome}`:""}`:"Carregando..."})]}),d&&!d.is_cio_livre&&a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsx(q,{type:"button",onClick:()=>C(!0),children:"Registrar Cio Livre"})}),n?a.jsx("div",{className:"py-8",children:a.jsx(fa,{})}):a.jsxs("div",{className:"mt-6 space-y-4",children:[d&&a.jsxs(a.Fragment,{children:[a.jsx(Ma,{receptora:d}),d.is_cio_livre&&a.jsx($a,{receptora:d,submitting:S,onRejeitar:z}),a.jsx(Ga,{estatisticas:T})]}),a.jsx(Ba,{historicoAdmin:D}),a.jsx(Ha,{historico:w})]})]}),a.jsx(qa,{open:g,onOpenChange:C,receptora:d,cioLivreForm:x,setCioLivreForm:c,submitting:S,onSubmit:v})]})}export{ie as default};
