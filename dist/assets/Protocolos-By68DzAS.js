import{c as gt,r as t,j as e,P as Me,o as ht,R as ee,p as vt,q as bt,h as K,B as Q,t as jt,s as O,a as Ea,i as la,n as _t}from"./index-BPMeM9-O.js";import{C as pe,a as ye,b as Pe,d as me,c as da}from"./card-8azKTSNJ.js";import{I as ne}from"./input-tqcTRdPv.js";import{T as Ra}from"./textarea-B1aXpqcj.js";import{u as Nt,S as ua,a as pa,b as ma,c as fa,d as xa}from"./select-La4nrp5K.js";import{P as Ct,a as wt,b as yt}from"./popover-D1vF_0kq.js";import{C as Pt,a as St,b as At,c as It,d as Et,e as Rt}from"./command-DZRkJAgr.js";import{D as ga,a as ha,b as va,c as ba,d as ja,e as _a}from"./dialog-CLDnxY7R.js";import{A as $e,a as Le,b as Ve,c as He,d as Ue,e as Be,f as Ze,g as Qe}from"./alert-dialog-CLsWNiMN.js";import{B as Je}from"./badge-CeJDYfYs.js";import{L as fe}from"./label-fluRYl3j.js";import{T as Dt,c as Na}from"./tabs-siaSXH49.js";import{P as zt}from"./PageHeader-DQ4rM2jO.js";import{D as Ca}from"./DatePickerBR-CHtWVvxh.js";import{C as Da,Q as za}from"./QualidadeSemaforo-C5SWzaSF.js";import{c as ka,I as kt,R as Tt}from"./index-DWxJzuQO.js";import{u as We}from"./index-C5PY5DOm.js";import{X as Se}from"./x-BxiwAMrM.js";import{f as wa,t as Ta}from"./dateUtils-eJ5e6apA.js";import{C as Ot}from"./check-Bdb-Yd05.js";import{v as Oa,a as Ft}from"./receptoraStatus-CrpDZcn1.js";import{u as xe}from"./use-toast-BGNwDi9e.js";import{h as ya}from"./error-handler-B0L1mfY3.js";import{P as Gt}from"./plus-Ah0p7ggz.js";import{U as Fa}from"./user-plus-NL-39gGx.js";import{L as Pa}from"./lock-DPdGTaHJ.js";import{C as qt}from"./circle-check-big-KXy1j2Uw.js";import{S as Mt}from"./search-SyV5imYB.js";import"./chevron-right-BkIAhNYS.js";import"./pt-BR-CyDikW87.js";import"./calendar-CuUQg-xw.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=gt("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);var Ga="Toggle",Ye=t.forwardRef((a,r)=>{const{pressed:l,defaultPressed:d,onPressedChange:o,...c}=a,[x,p]=We({prop:l,onChange:o,defaultProp:d??!1,caller:Ga});return e.jsx(Me.button,{type:"button","aria-pressed":x,"data-state":x?"on":"off","data-disabled":a.disabled?"":void 0,...c,ref:r,onClick:ht(a.onClick,()=>{a.disabled||p(!x)})})});Ye.displayName=Ga;var qa=Ye,ae="ToggleGroup",[Ma,Gs]=vt(ae,[ka]),$a=ka(),Xe=ee.forwardRef((a,r)=>{const{type:l,...d}=a;if(l==="single"){const o=d;return e.jsx(Lt,{...o,ref:r})}if(l==="multiple"){const o=d;return e.jsx(Vt,{...o,ref:r})}throw new Error(`Missing prop \`type\` expected on \`${ae}\``)});Xe.displayName=ae;var[La,Va]=Ma(ae),Lt=ee.forwardRef((a,r)=>{const{value:l,defaultValue:d,onValueChange:o=()=>{},...c}=a,[x,p]=We({prop:l,defaultProp:d??"",onChange:o,caller:ae});return e.jsx(La,{scope:a.__scopeToggleGroup,type:"single",value:ee.useMemo(()=>x?[x]:[],[x]),onItemActivate:p,onItemDeactivate:ee.useCallback(()=>p(""),[p]),children:e.jsx(Ha,{...c,ref:r})})}),Vt=ee.forwardRef((a,r)=>{const{value:l,defaultValue:d,onValueChange:o=()=>{},...c}=a,[x,p]=We({prop:l,defaultProp:d??[],onChange:o,caller:ae}),i=ee.useCallback(u=>p((E=[])=>[...E,u]),[p]),S=ee.useCallback(u=>p((E=[])=>E.filter(q=>q!==u)),[p]);return e.jsx(La,{scope:a.__scopeToggleGroup,type:"multiple",value:x,onItemActivate:i,onItemDeactivate:S,children:e.jsx(Ha,{...c,ref:r})})});Xe.displayName=ae;var[Ht,Ut]=Ma(ae),Ha=ee.forwardRef((a,r)=>{const{__scopeToggleGroup:l,disabled:d=!1,rovingFocus:o=!0,orientation:c,dir:x,loop:p=!0,...i}=a,S=$a(l),u=Nt(x),E={role:"group",dir:u,...i};return e.jsx(Ht,{scope:l,rovingFocus:o,disabled:d,children:o?e.jsx(Tt,{asChild:!0,...S,orientation:c,dir:u,loop:p,children:e.jsx(Me.div,{...E,ref:r})}):e.jsx(Me.div,{...E,ref:r})})}),Ae="ToggleGroupItem",Ua=ee.forwardRef((a,r)=>{const l=Va(Ae,a.__scopeToggleGroup),d=Ut(Ae,a.__scopeToggleGroup),o=$a(a.__scopeToggleGroup),c=l.value.includes(a.value),x=d.disabled||a.disabled,p={...a,pressed:c,disabled:x},i=ee.useRef(null);return d.rovingFocus?e.jsx(kt,{asChild:!0,...o,focusable:!x,active:c,ref:i,children:e.jsx(Sa,{...p,ref:r})}):e.jsx(Sa,{...p,ref:r})});Ua.displayName=Ae;var Sa=ee.forwardRef((a,r)=>{const{__scopeToggleGroup:l,value:d,...o}=a,c=Va(Ae,l),x={role:"radio","aria-checked":a.pressed,"aria-pressed":void 0},p=c.type==="single"?x:void 0;return e.jsx(Ye,{...p,...o,ref:r,onPressedChange:i=>{i?c.onItemActivate(d):c.onItemDeactivate(d)}})}),Ba=Xe,Za=Ua;const Qa=bt("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),Bt=t.forwardRef(({className:a,variant:r,size:l,...d},o)=>e.jsx(qa,{ref:o,className:K(Qa({variant:r,size:l,className:a})),...d}));Bt.displayName=qa.displayName;const Ja=t.createContext({size:"default",variant:"default"}),Ka=t.forwardRef(({className:a,variant:r,size:l,children:d,...o},c)=>e.jsx(Ba,{ref:c,className:K("flex items-center justify-center gap-1",a),...o,children:e.jsx(Ja.Provider,{value:{variant:r,size:l},children:d})}));Ka.displayName=Ba.displayName;const Ke=t.forwardRef(({className:a,children:r,variant:l,size:d,...o},c)=>{const x=t.useContext(Ja);return e.jsx(Za,{ref:c,className:K(Qa({variant:x.variant||l,size:x.size||d}),a),...o,children:r})});Ke.displayName=Za.displayName;function Wa({ciclandoValue:a,qualidadeValue:r,onChangeCiclando:l,onChangeQualidade:d,disabled:o=!1,size:c="sm"}){const x=c==="sm"?"text-xs":"text-sm",p=c==="sm"?"w-4 h-4":"w-5 h-5";return e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:K("text-muted-foreground font-medium",x),children:"Ciclo:"}),e.jsxs(Ka,{type:"single",value:a??"",onValueChange:i=>{o||l(i==="CL"||i==="N"?i:null)},disabled:o,className:"gap-1",children:[e.jsx(Ke,{value:"CL","aria-label":"CL",size:"sm",variant:"outline",className:K("h-7 px-2 text-xs",a==="CL"&&"bg-primary/10 text-primary border-primary/30 data-[state=on]:bg-primary/10",o&&"opacity-60"),children:"CL"}),e.jsx(Ke,{value:"N","aria-label":"N",size:"sm",variant:"outline",className:K("h-7 px-2 text-xs",a==="N"&&"bg-muted text-muted-foreground border-border data-[state=on]:bg-muted",o&&"opacity-60"),children:"N"})]}),a&&!o&&e.jsx(Q,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",onClick:()=>l(null),type:"button",children:e.jsx(Se,{className:"w-3 h-3"})}),!a&&e.jsx("span",{className:K("text-muted-foreground/50",x),children:"—"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:K("text-muted-foreground font-medium",x),children:"Qualidade:"}),e.jsx("div",{className:"flex items-center gap-1.5",children:[1,2,3].map(i=>e.jsx("button",{type:"button",disabled:o,onClick:()=>{o||d(r===i?null:i)},className:K(p,"rounded-full border-2 transition-all",jt(i),r===i?"border-foreground scale-110 ring-2 ring-muted-foreground/30":"border-muted-foreground/30 opacity-50 hover:opacity-75 hover:scale-105",o&&"opacity-40 cursor-not-allowed",!o&&"cursor-pointer"),title:`Qualidade ${i}`},i))}),r&&!o&&e.jsx(Q,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",onClick:()=>d(null),type:"button",children:e.jsx(Se,{className:"w-3 h-3"})}),!r&&e.jsx("span",{className:K("text-muted-foreground/50",x),children:"—"})]})]})}function Aa({fazendaNome:a,dataInicio:r,veterinario:l,tecnico:d,passo2Data:o,passo2Tecnico:c,showPasso2:x=!1}){return e.jsxs(pe,{children:[e.jsx(ye,{className:"pb-3",children:e.jsx(Pe,{className:"text-base",children:"Informações do Protocolo"})}),e.jsx(me,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(ie,{label:"Fazenda",value:a}),e.jsx(ie,{label:"Data Início",value:wa(r)}),l&&e.jsx(ie,{label:"Veterinário",value:l}),d&&e.jsx(ie,{label:"Técnico",value:d}),x&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{label:"Data 2º Passo",value:o?wa(o):"-"}),e.jsx(ie,{label:"Técnico 2º Passo",value:c||"-"})]})]})})]})}function ie({label:a,value:r}){return e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:a}),e.jsx("p",{className:"text-base text-foreground",children:r})]})}function Zt({open:a,onOpenChange:r,onConfirm:l,title:d="Sair sem salvar?",description:o="Se você sair agora, todas as alterações serão perdidas."}){return e.jsx($e,{open:a,onOpenChange:r,children:e.jsxs(Le,{children:[e.jsxs(Ve,{children:[e.jsx(He,{children:d}),e.jsx(Ue,{children:o})]}),e.jsxs(Be,{children:[e.jsx(Ze,{children:"Cancelar"}),e.jsx(Qe,{onClick:l,children:"Sim, sair"})]})]})})}function Qt({receptoras:a,motivosInapta:r,isFinalized:l,onStatusChange:d,onMotivoChange:o,hideCard:c=!1}){const x=i=>{const u={INICIADA:{label:"Pendente",className:"bg-muted text-muted-foreground border-border"},APTA:{label:"Apta",className:"bg-primary/15 text-primary border-primary/30"},INAPTA:{label:"Inapta",className:"bg-destructive/15 text-destructive border-destructive/30"}}[i]||{label:i,className:""};return e.jsx(Je,{variant:"outline",className:u.className,children:u.label})},p=a.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma receptora no protocolo"}):e.jsx("div",{className:"overflow-x-auto rounded-lg border border-border",children:e.jsxs("div",{className:"min-w-[750px] w-full",children:[e.jsxs("div",{className:"grid grid-cols-[minmax(160px,1.5fr)_36px_36px_36px_16px_80px_80px_70px_minmax(120px,1fr)] gap-0 bg-muted text-[10px] font-semibold text-muted-foreground uppercase tracking-wide",children:[e.jsx("div",{className:"px-3 py-2",children:"Receptora"}),e.jsx("div",{className:"px-1 py-2 text-center",title:"Protocolos",children:"P"}),e.jsx("div",{className:"px-1 py-2 text-center",title:"Gestações",children:"G"}),e.jsx("div",{className:"px-1 py-2 text-center",title:"Desde última",children:"D"}),e.jsx("div",{className:"border-r border-border/50"}),e.jsx("div",{className:"px-2 py-2 text-center",children:"Ciclando"}),e.jsx("div",{className:"px-2 py-2 text-center",children:"Qualidade"}),e.jsx("div",{className:"px-2 py-2 text-center",children:"Avaliação"}),e.jsx("div",{className:"px-2 py-2",children:"Motivo"})]}),a.map((i,S)=>{const u=i.historicoStats;return e.jsxs("div",{className:"group grid grid-cols-[minmax(160px,1.5fr)_36px_36px_36px_16px_80px_80px_70px_minmax(120px,1fr)] gap-0 items-center border-t border-border hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5",children:[e.jsx("span",{className:"flex items-center justify-center w-5 h-5 rounded-full bg-primary/10 text-primary text-[10px] font-bold shrink-0",children:S+1}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-medium text-sm text-foreground truncate",children:i.identificacao}),i.nome&&e.jsx("span",{className:"text-[10px] text-muted-foreground truncate",children:i.nome})]})]}),e.jsx("div",{className:"px-1 py-1.5 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-5 text-[10px] font-medium bg-muted text-foreground rounded",children:(u==null?void 0:u.totalProtocolos)??0})}),e.jsx("div",{className:"px-1 py-1.5 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-5 text-[10px] font-medium bg-primary/15 text-primary rounded",children:(u==null?void 0:u.gestacoes)??0})}),e.jsx("div",{className:"px-1 py-1.5 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-5 text-[10px] font-medium bg-amber-500/15 text-amber-600 dark:text-amber-400 rounded",children:(u==null?void 0:u.protocolosDesdeUltimaGestacao)??0})}),e.jsx("div",{className:"border-r border-border/50 h-full"}),e.jsx("div",{className:"px-2 py-1 flex justify-center",children:e.jsx(Da,{value:i.pr_ciclando_classificacao,variant:"display",disabled:!0})}),e.jsx("div",{className:"px-2 py-1 flex justify-center",children:e.jsx(za,{value:i.pr_qualidade_semaforo,variant:"single",disabled:!0})}),e.jsx("div",{className:"px-2 py-1 flex justify-center",children:l?x(i.pr_status):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>d(i.id,i.pr_status==="APTA"?"INICIADA":"APTA"),className:K("w-7 h-7 rounded-md flex items-center justify-center transition-all",i.pr_status==="APTA"?"bg-primary text-primary-foreground shadow-sm":"bg-muted hover:bg-primary/20 text-muted-foreground hover:text-primary"),title:"Confirmar (Apta)",children:e.jsx(Ot,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>d(i.id,i.pr_status==="INAPTA"?"INICIADA":"INAPTA"),className:K("w-6 h-6 rounded-md flex items-center justify-center transition-all",i.pr_status==="INAPTA"?"bg-destructive text-destructive-foreground shadow-sm":"bg-muted hover:bg-destructive/20 text-muted-foreground hover:text-destructive"),title:"Rejeitar (Inapta)",children:e.jsx(Se,{className:"w-3.5 h-3.5"})})]})}),e.jsx("div",{className:"px-2 py-1",children:i.pr_status==="INAPTA"&&!l?e.jsx(ne,{type:"text",placeholder:"Motivo...",value:r[i.id]||i.pr_motivo_inapta||"",onChange:E=>o(i.id,E.target.value),className:"h-6 text-xs px-2"}):e.jsx("span",{className:"text-xs text-muted-foreground truncate block",children:i.pr_motivo_inapta||"-"})})]},i.id)})]})});return c?p:e.jsxs(pe,{children:[e.jsx(ye,{className:"pb-3",children:e.jsxs(Pe,{className:"text-base",children:["Receptoras para Revisão (",a.length,")"]})}),e.jsx(me,{className:"pt-0",children:p})]})}function Jt(){const{toast:a}=xe(),[r,l]=t.useState(!1),[d,o]=t.useState(!1),[c,x]=t.useState([]),[p,i]=t.useState([]),[S,u]=t.useState([]),[E,q]=t.useState({fazenda_id:"",data_inicio:Ta(),veterinario:"",tecnico:"",observacoes:""}),R=t.useCallback(async()=>{try{l(!0);const{data:n,error:m}=await O.from("fazendas").select("*").order("nome",{ascending:!0});if(m)throw m;x(n||[])}catch(n){a({title:"Erro ao carregar fazendas",description:n instanceof Error?n.message:"Erro desconhecido",variant:"destructive"})}finally{l(!1)}},[a]),b=t.useCallback(async n=>{const m=new Map;if(n.length===0)return m;try{const{data:f}=await O.from("protocolo_receptoras").select("receptora_id, created_at").in("receptora_id",n).order("created_at",{ascending:!1}),{data:_}=await O.from("diagnosticos_gestacao").select("receptora_id, data_diagnostico").in("receptora_id",n).in("resultado",["PRENHE","PRENHE_IA"]).order("data_diagnostico",{ascending:!1}),g=new Map;(f||[]).forEach(w=>{const v=g.get(w.receptora_id)||[];v.push(w.created_at),g.set(w.receptora_id,v)});const y=new Map;(_||[]).forEach(w=>{const v=y.get(w.receptora_id)||[];v.push(w.data_diagnostico),y.set(w.receptora_id,v)}),n.forEach(w=>{const v=g.get(w)||[],H=y.get(w)||[],N=v.length,A=H.length;let h=N;if(H.length>0&&v.length>0){const P=new Date(H[0]);h=v.filter(F=>new Date(F)>P).length}m.set(w,{totalProtocolos:N,gestacoes:A,protocolosDesdeUltimaGestacao:h})})}catch(f){console.error("Erro ao carregar histórico stats:",f)}return m},[]),j=t.useCallback(async n=>{try{o(!0);const{data:m,error:f}=await O.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",n);if(f)throw f;const _=(m==null?void 0:m.map(N=>N.receptora_id))||[];if(_.length===0){i([]),u([]);return}const[g,y]=await Promise.all([O.from("receptoras").select("id, identificacao, nome, status_reprodutivo").in("id",_).order("identificacao",{ascending:!0}),b(_)]);if(g.error)throw g.error;const v=(g.data||[]).filter(N=>(N.id?String(N.id).trim():"")!=="").map(N=>{const A=N.id?String(N.id).trim():"",h=N.status_reprodutivo||"VAZIA",P=Oa(h,"ENTRAR_PASSO1");return{...N,status:h,motivoIndisponivel:P.valido?void 0:P.mensagem,historicoStats:y.get(A)}}),H=v.filter(N=>N.status==="VAZIA");i(H),u(v)}catch(m){a({title:"Erro ao carregar receptoras",description:m instanceof Error?m.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},[a,b]),T=t.useCallback(n=>new Set(n.filter(m=>m.id&&m.id.trim()!==""&&m.id!==null&&m.id!==void 0).map(m=>String(m.id).trim())),[]),C=t.useCallback(n=>p.filter(m=>{const f=m.id?String(m.id).trim():"";return f!==""&&!n.has(f)}),[p]),I=t.useCallback((n,m)=>{if(!n.trim())return S.filter(_=>{const g=_.id?String(_.id).trim():"";return g!==""&&!m.has(g)&&_.status==="VAZIA"}).map(_=>({..._,disponivel:!0}));const f=n.toLowerCase().trim();return S.filter(_=>{const g=_.id?String(_.id).trim():"";if(g===""||m.has(g))return!1;const y=(_.identificacao||"").toLowerCase(),w=(_.nome||"").toLowerCase();return y.includes(f)||w.includes(f)}).map(_=>({..._,disponivel:_.status==="VAZIA"}))},[S]),D=t.useCallback(n=>{var m;return((m=c.find(f=>f.id===n))==null?void 0:m.nome)||"-"},[c]);return{loading:r,loadingReceptoras:d,fazendas:c,allReceptoras:p,receptorasComStatus:S,protocoloData:E,setProtocoloData:q,loadFazendas:R,loadAllReceptoras:j,getSelectedIds:T,getAvailableReceptoras:C,getReceptorasFiltradas:I,getFazendaNome:D}}function Kt({fazendaId:a,allReceptoras:r,receptorasComStatus:l,selectedIds:d,onReceptorasReload:o}){const{toast:c}=xe(),[x,p]=t.useState([]),[i,S]=t.useState(!1),[u,E]=t.useState(!1),[q,R]=t.useState(""),[b,j]=t.useState(!1),[T,C]=t.useState({receptora_id:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),[I,D]=t.useState({identificacao:"",nome:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),[n,m]=t.useState(!1),f=t.useCallback(()=>{C({receptora_id:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),R(""),j(!1)},[]),_=t.useCallback(()=>{D({identificacao:"",nome:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null})},[]),g=t.useCallback(async()=>{var J;const N=((J=T.receptora_id)==null?void 0:J.trim())||"";if(!N){c({title:"Erro",description:"Selecione uma receptora",variant:"destructive"});return}const A=r.find($=>($.id?String($.id).trim():"")===N);if(!A||!A.id){c({title:"Erro",description:"Receptora não encontrada ou inválida",variant:"destructive"});return}const h=A.status_reprodutivo||"VAZIA",P=Oa(h,"ENTRAR_PASSO1");if(!P.valido){c({title:"Erro de validação",description:P.mensagem||"A receptora não pode entrar no protocolo no estado atual",variant:"destructive"});return}if(d.has(N)){c({title:"Receptora já adicionada",description:"Esta receptora já está na lista de selecionadas",variant:"destructive"});return}const F=l.find($=>($.id?String($.id).trim():"")===N);p($=>{var U;return $.some(W=>(W.id?String(W.id).trim():"")===N)?$:[...$,{id:A.id,identificacao:A.identificacao,nome:A.nome,observacoes:((U=T.observacoes)==null?void 0:U.trim())||void 0,ciclando_classificacao:T.ciclando_classificacao||null,qualidade_semaforo:T.qualidade_semaforo||null,historicoStats:F==null?void 0:F.historicoStats}]}),f(),S(!1)},[T,r,d,c,f]),y=t.useCallback(async()=>{if(!I.identificacao.trim()){c({title:"Erro de validação",description:"Identificação (brinco) é obrigatória",variant:"destructive"});return}try{m(!0);const{data:N,error:A}=await O.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",a);if(A)throw A;const h=(N==null?void 0:N.map(k=>k.receptora_id))||[];if(h.length>0){const{data:k,error:U}=await O.from("receptoras").select("id, identificacao, nome").in("id",h).ilike("identificacao",I.identificacao.trim());if(U)throw U;if(k&&k.length>0){const W=k[0].nome?`"${k[0].nome}"`:"sem nome";throw new Error(`Já existe uma receptora com o brinco "${I.identificacao.trim()}" nesta fazenda (Nome: ${W}).`)}}if(I.nome.trim()&&h.length>0){const{data:k,error:U}=await O.from("receptoras").select("id, identificacao").in("id",h).ilike("nome",I.nome.trim());if(U)throw U;if(k&&k.length>0)throw new Error(`Já existe uma receptora com o nome "${I.nome.trim()}" nesta fazenda (Brinco: ${k[0].identificacao}).`)}const P={identificacao:I.identificacao};I.nome.trim()&&(P.nome=I.nome);const{data:F,error:J}=await O.from("receptoras").insert([P]).select().single();if(J)throw J.code==="23505"?new Error("Já existe uma receptora com esse brinco nesta fazenda."):J;const{error:$}=await O.from("receptora_fazenda_historico").insert([{receptora_id:F.id,fazenda_id:a,data_inicio:Ta(),data_fim:null}]);p(k=>[...k,{id:F.id,identificacao:F.identificacao,nome:F.nome,observacoes:I.observacoes||void 0,ciclando_classificacao:I.ciclando_classificacao||null,qualidade_semaforo:I.qualidade_semaforo||null,isNew:!0}]),_(),E(!1),await o()}catch(N){c({title:"Erro ao criar receptora",description:N instanceof Error?N.message:"Erro desconhecido",variant:"destructive"})}finally{m(!1)}},[I,a,c,_,o]),w=t.useCallback(N=>{p(A=>A.filter((h,P)=>P!==N))},[]),v=t.useCallback((N,A)=>{p(h=>h.map((P,F)=>F===N?{...P,ciclando_classificacao:A}:P))},[]),H=t.useCallback((N,A)=>{p(h=>h.map((P,F)=>F===N?{...P,qualidade_semaforo:A}:P))},[]);return{receptorasLocais:x,setReceptorasLocais:p,showAddReceptora:i,setShowAddReceptora:S,showCreateReceptora:u,setShowCreateReceptora:E,buscaReceptora:q,setBuscaReceptora:R,popoverAberto:b,setPopoverAberto:j,addReceptoraForm:T,setAddReceptoraForm:C,createReceptoraForm:I,setCreateReceptoraForm:D,submitting:n,handleAddReceptora:g,handleCreateReceptora:y,handleRemoveReceptora:w,handleUpdateCiclando:v,handleUpdateQualidade:H,resetAddForm:f,resetCreateForm:_}}function Wt({protocoloData:a,receptorasLocais:r,onSuccess:l}){const d=Ea(),{toast:o}=xe(),[c,x]=t.useState(!1),[p,i]=t.useState(!1),S=t.useRef(!1),u=t.useCallback(()=>!a.fazenda_id||!a.data_inicio||!a.veterinario.trim()?(o({title:"Erro de validação",description:"Fazenda, data de início e veterinário são obrigatórios",variant:"destructive"}),!1):!0,[a,o]),E=t.useCallback(async()=>{var n,m,f,_;if(S.current||c)return;if(r.length===0){o({title:"Erro de validação",description:"Adicione pelo menos 1 receptora antes de finalizar o 1º passo",variant:"destructive"});return}if(r.filter(g=>!g.id||g.id===""||g.id===null||g.id===void 0).length>0){o({title:"Erro de validação",description:"Seleção de receptora inválida. Refaça a seleção.",variant:"destructive"});return}const b=r.filter(g=>g.id&&g.id!==""&&g.id!==null&&g.id!==void 0);if(b.length!==r.length||b.length===0){o({title:"Erro de validação",description:"Seleção de receptora inválida. Refaça a seleção.",variant:"destructive"});return}const j=b.map(g=>g.id);if(new Set(j).size!==j.length){o({title:"Erro de validação",description:"Existem receptoras duplicadas na seleção. Remova as duplicatas.",variant:"destructive"});return}const C=b.map(g=>g.observacoes||null),I=b.map(g=>g.ciclando_classificacao||null),D=b.map(g=>g.qualidade_semaforo||null);try{S.current=!0,x(!0);const g=a.tecnico.trim(),y=g?`VET: ${a.veterinario.trim()} | TEC: ${g}`:`VET: ${a.veterinario.trim()}`,{data:w,error:v}=await O.rpc("criar_protocolo_passo1_atomico",{p_fazenda_id:a.fazenda_id,p_data_inicio:a.data_inicio,p_responsavel_inicio:y,p_receptoras_ids:j,p_data_inclusao:a.data_inicio,p_observacoes:a.observacoes.trim()||null,p_receptoras_observacoes:C});if(v)throw console.error("=== ERRO RPC criar_protocolo_passo1_atomico ==="),console.error("Code:",v.code),console.error("Message:",v.message),console.error("Details:",v.details),console.error("Hint:",v.hint),console.error("Full error:",JSON.stringify(v,null,2)),console.error("Receptoras enviadas:",j),v.code==="23505"||(n=v.message)!=null&&n.includes("duplicate")||(m=v.message)!=null&&m.includes("unique")?new Error("Uma ou mais receptoras já estão em um protocolo ativo. Verifique a seleção."):v.code==="23503"||(f=v.message)!=null&&f.includes("foreign key")?new Error("Receptora ou fazenda inválida. Recarregue a página e tente novamente."):v.code==="PGRST202"||(_=v.message)!=null&&_.includes("Could not find")?new Error("Função do banco de dados não encontrada. Contate o suporte."):new Error(v.message||`Erro ao criar protocolo (código: ${v.code})`);if(!w)throw new Error("Protocolo criado mas ID não retornado");const{data:H,error:N}=await O.from("protocolo_receptoras").select("id, receptora_id").eq("protocolo_id",w).in("receptora_id",j);if(!N&&H&&H.length>0){const P=new Map(j.map((k,U)=>[k,U])),F=H.map(async k=>{const U=P.get(k.receptora_id);if(U===void 0)return{success:!0};const W=I[U],se=D[U],{error:M}=await O.from("protocolo_receptoras").update({ciclando_classificacao:W,qualidade_semaforo:se}).eq("id",k.id);return{success:!M,error:M}}),$=(await Promise.allSettled(F)).filter(k=>k.status==="rejected"||k.status==="fulfilled"&&k.value&&!k.value.success);$.length>0&&o({title:"Aviso",description:`Protocolo criado, mas ${$.length} classificação(ões) não foram salvas. Edite o protocolo para corrigir.`,variant:"destructive"})}if((await Promise.all(j.map(P=>Ft(P,"EM_SINCRONIZACAO")))).map((P,F)=>({result:P,receptoraId:j[F]})).filter(({result:P})=>P.error).length>0)throw new Error("Erro ao atualizar status das receptoras. Tente novamente.");o({title:"1º passo concluído",description:`${r.length} receptora(s) em protocolo`}),l==null||l()}catch(g){const y=g instanceof Error?g.message:"Erro desconhecido ao finalizar protocolo";o({title:"Erro ao finalizar protocolo",description:y,variant:"destructive"})}finally{x(!1),S.current=!1}},[a,r,o,d,c]),q=t.useCallback(()=>{i(!1),d("/protocolos")},[d]);return{submitting:c,showConfirmExit:p,setShowConfirmExit:i,handleFinalizarPasso1:E,handleConfirmExit:q,validateProtocoloForm:u}}const Ya="protocolos_filtros",Ne=50,Yt=()=>{try{const a=localStorage.getItem(Ya);return a?JSON.parse(a):{}}catch{return{}}};function Xt(){const a=Yt(),[r,l]=t.useState(!0),[d,o]=t.useState(!1),[c,x]=t.useState([]),[p,i]=t.useState([]),[S,u]=t.useState(0),[E,q]=t.useState({finalizadas:0,utilizadas:0,sincronizadas:0}),[R,b]=t.useState(a.filtroStatus||"all"),[j,T]=t.useState(a.fazendaFilter??""),[C,I]=t.useState(a.filtroDataInicio??""),[D,n]=t.useState(a.filtroDataFim??""),[m,f]=t.useState(a.filtroDataTipo??"data_inicio"),[_,g]=t.useState(a.protocolosPage??1);t.useEffect(()=>{const A={filtroStatus:R,fazendaFilter:j,filtroDataInicio:C,filtroDataFim:D,filtroDataTipo:m,protocolosPage:_};localStorage.setItem(Ya,JSON.stringify(A))},[R,j,C,D,m,_]);const y=t.useCallback(async()=>{const{data:A,error:h}=await O.from("fazendas").select("*").order("nome",{ascending:!0});if(h)throw h;i(A||[])},[]),w=t.useCallback(async(A,h)=>{try{o(!0);const P=(h==null?void 0:h.fazendaFilter)!==void 0?h.fazendaFilter:j,F=(h==null?void 0:h.filtroDataInicio)!==void 0?h.filtroDataInicio:C,J=(h==null?void 0:h.filtroDataFim)!==void 0?h.filtroDataFim:D,$=(h==null?void 0:h.filtroStatus)!==void 0?h.filtroStatus:R,k=(h==null?void 0:h.filtroDataTipo)!==void 0?h.filtroDataTipo:m,W=((A!==void 0?A:_)-1)*Ne,se=W+Ne*2-1;let M=O.from("protocolos_sincronizacao").select("*",{count:"exact"});P&&P!=="all"&&(M=M.eq("fazenda_id",P));const ge=k==="passo2_data"?"passo2_data":"data_inicio";F&&(M=M.gte(ge,F)),J&&(M=M.lte(ge,J)),$==="aguardando_2_passo"?M=M.eq("status","PASSO1_FECHADO"):$==="sincronizado"?M=M.eq("status","SINCRONIZADO"):$==="fechado"&&(M=M.in("status",["FECHADO","EM_TE"])),M=M.order("data_inicio",{ascending:!1}).range(W,se);const{data:ce,error:he,count:Ie}=await M;if(he)throw he;const Ee=(ce||[]).map(G=>G.id),Re=[...new Set((ce||[]).map(G=>G.fazenda_id))],{data:ve}=await O.from("protocolo_receptoras").select("protocolo_id, status").in("protocolo_id",Ee),De=(ve||[]).reduce((G,L)=>(G[L.protocolo_id]=(G[L.protocolo_id]||0)+1,G),{}),ze=(ve||[]).reduce((G,L)=>((L.status==="APTA"||L.status==="INAPTA"||L.status==="UTILIZADA")&&G.finalizadas++,L.status==="UTILIZADA"&&G.utilizadas++,L.status==="APTA"&&G.sincronizadas++,G),{finalizadas:0,utilizadas:0,sincronizadas:0}),{data:ke}=await O.from("fazendas").select("id, nome").in("id",Re),Te=(ke||[]).reduce((G,L)=>(G[L.id]=L.nome,G),{}),Oe=(ce||[]).map(G=>{const L=De[G.id]||0;return L===0?null:{...G,fazenda_nome:Te[G.fazenda_id]||"N/A",receptoras_count:L}}).filter(G=>G!==null).slice(0,Ne);x(Oe),u(Ie||0),q(ze)}catch(P){ya(P,"Erro ao carregar protocolos"),x([]),q({finalizadas:0,utilizadas:0,sincronizadas:0})}finally{o(!1)}},[j,C,D,m,R,_]),v=t.useCallback(async()=>{try{l(!0),await y(),await w()}catch(A){ya(A,"Erro ao carregar dados")}finally{l(!1)}},[y,w]),H=t.useCallback(()=>{T(""),I(""),n(""),f("data_inicio"),b("all"),g(1)},[]),N=t.useCallback(A=>{const h=new Date,P=new Date(h);P.setDate(h.getDate()-A),I(P.toISOString().split("T")[0]),n(h.toISOString().split("T")[0])},[]);return{loading:r,loadingProtocolos:d,protocolos:c,fazendas:p,protocolosTotalCount:S,statsAproveitamento:E,filtroStatus:R,setFiltroStatus:b,fazendaFilter:j,setFazendaFilter:T,filtroDataInicio:C,setFiltroDataInicio:I,filtroDataFim:D,setFiltroDataFim:n,filtroDataTipo:m,setFiltroDataTipo:f,protocolosPage:_,setProtocolosPage:g,pageSize:Ne,loadData:v,loadProtocolos:w,limparFiltros:H,aplicarAtalhoData:N}}function es(){const a=Ea(),{toast:r}=xe(),[l,d]=t.useState(!1),[o,c]=t.useState(null),[x,p]=t.useState(""),[i,S]=t.useState([]),u=t.useCallback(async R=>{const b=new Map;if(R.length===0)return b;try{const{data:j}=await O.from("protocolo_receptoras").select("receptora_id, created_at").in("receptora_id",R).order("created_at",{ascending:!1}),{data:T}=await O.from("diagnosticos_gestacao").select("receptora_id, data_diagnostico").in("receptora_id",R).in("resultado",["PRENHE","PRENHE_IA"]).order("data_diagnostico",{ascending:!1}),C=new Map;(j||[]).forEach(D=>{const n=C.get(D.receptora_id)||[];n.push(D.created_at),C.set(D.receptora_id,n)});const I=new Map;(T||[]).forEach(D=>{const n=I.get(D.receptora_id)||[];n.push(D.data_diagnostico),I.set(D.receptora_id,n)}),R.forEach(D=>{const n=C.get(D)||[],m=I.get(D)||[],f=n.length,_=m.length;let g=f;if(m.length>0&&n.length>0){const y=new Date(m[0]);g=n.filter(w=>new Date(w)>y).length}b.set(D,{totalProtocolos:f,gestacoes:_,protocolosDesdeUltimaGestacao:g})})}catch(j){console.error("Erro ao carregar histórico stats:",j)}return b},[]),E=t.useCallback(async R=>{try{const{data:b,error:j}=await O.from("protocolo_receptoras").select("*").eq("protocolo_id",R);if(j){r({title:"Erro ao carregar receptoras",description:j.message,variant:"destructive"}),S([]);return}if(!b||b.length===0){r({title:"Erro: Protocolo inconsistente",description:"Este protocolo não possui receptoras vinculadas.",variant:"destructive"}),S([]);return}const T=b.map(f=>f.receptora_id),[C,I]=await Promise.all([O.from("receptoras").select("*").in("id",T),u(T)]);if(C.error){r({title:"Erro ao carregar dados das receptoras",description:C.error.message,variant:"destructive"}),S([]);return}const D=C.data||[],n=new Map(D.map(f=>[f.id,f])),m=[];for(const f of b){const _=n.get(f.receptora_id);_&&m.push({..._,pr_id:f.id,pr_status:f.status,pr_motivo_inapta:f.motivo_inapta,pr_observacoes:f.observacoes,pr_ciclando_classificacao:"ciclando_classificacao"in f&&(f.ciclando_classificacao==="CL"||f.ciclando_classificacao==="N")?f.ciclando_classificacao:null,pr_qualidade_semaforo:"qualidade_semaforo"in f&&typeof f.qualidade_semaforo=="number"&&f.qualidade_semaforo>=1&&f.qualidade_semaforo<=3?f.qualidade_semaforo:null,historicoStats:I.get(f.receptora_id)})}S(m)}catch(b){r({title:"Erro ao carregar receptoras",description:b instanceof Error?b.message:"Erro desconhecido",variant:"destructive"})}},[r,u]),q=t.useCallback(async R=>{try{d(!0);const{data:b,error:j}=await O.from("protocolos_sincronizacao").select("*").eq("id",R).single();if(j)throw j;if(b.status!=="PASSO1_FECHADO"&&b.status!=="SINCRONIZADO"){r({title:"Erro",description:"Este protocolo não está aguardando o 2º passo",variant:"destructive"}),a("/protocolos");return}c(b);const{data:T,error:C}=await O.from("fazendas").select("nome").eq("id",b.fazenda_id).single();if(C)throw C;p(T.nome),await E(R)}catch(b){r({title:"Erro ao carregar dados",description:b instanceof Error?b.message:"Erro desconhecido",variant:"destructive"})}finally{d(!1)}},[a,r,E]);return{loading:l,protocolo:o,setProtocolo:c,fazendaNome:x,receptoras:i,setReceptoras:S,loadData:q,loadReceptoras:E}}function as({protocoloId:a,protocolo:r,receptoras:l,setReceptoras:d,setProtocolo:o,passo2Form:c,motivosInapta:x,onSuccess:p}){const{toast:i}=xe(),[S,u]=t.useState(!1),E=t.useCallback((b,j)=>{d(T=>T.map(C=>C.id===b?{...C,pr_status:j,pr_motivo_inapta:j==="APTA"||j==="INICIADA"?void 0:C.pr_motivo_inapta}:C))},[d]),q=t.useCallback((b,j)=>{d(T=>T.map(C=>C.id===b?{...C,pr_motivo_inapta:j.trim()||void 0}:C))},[d]),R=t.useCallback(async()=>{if(S)return;if(!c.data||!c.tecnico.trim()){i({title:"Erro de validação",description:"Data e técnico responsável são obrigatórios",variant:"destructive"});return}const b=l.filter(j=>j.pr_status==="INICIADA");if(b.length>0){i({title:"Erro",description:`Ainda há ${b.length} receptora(s) pendente(s) de revisão`,variant:"destructive"});return}if(l.length===0){i({title:"Erro",description:"Não é possível finalizar protocolo sem receptoras",variant:"destructive"});return}try{u(!0);const j=new Date,T=`${j.getFullYear()}-${String(j.getMonth()+1).padStart(2,"0")}-${String(j.getDate()).padStart(2,"0")}`,C=l.filter(y=>y.pr_status==="APTA"),I=l.filter(y=>y.pr_status==="INAPTA"),n=C.length>0?"SINCRONIZADO":"FECHADO",m=[...C.map(async y=>{const{error:w}=await O.from("protocolo_receptoras").update({status:"APTA",motivo_inapta:null}).eq("protocolo_id",a).eq("receptora_id",y.id);if(w)throw w}),...I.map(async y=>{const w=x[y.id]||y.pr_motivo_inapta||null,{error:v}=await O.from("protocolo_receptoras").update({status:"INAPTA",motivo_inapta:w}).eq("protocolo_id",a).eq("receptora_id",y.id);if(v)throw v})];await Promise.all(m);const{error:f}=await O.from("protocolos_sincronizacao").update({status:n,passo2_data:c.data,passo2_tecnico_responsavel:c.tecnico.trim(),data_retirada:T,responsavel_retirada:(r==null?void 0:r.responsavel_inicio)||null}).eq("id",a);if(f)throw f;o({...r,status:n,passo2_data:c.data,passo2_tecnico_responsavel:c.tecnico.trim(),data_retirada:T,responsavel_retirada:(r==null?void 0:r.responsavel_inicio)||null});const _=[...C.map(async y=>{const{error:w}=await O.from("receptoras").update({status_reprodutivo:"SINCRONIZADA"}).eq("id",y.id);if(w)throw w}),...I.map(async y=>{const{error:w}=await O.from("receptoras").update({status_reprodutivo:"VAZIA"}).eq("id",y.id);if(w)throw w})];await Promise.all(_);const g=l.filter(y=>y.pr_status==="APTA").length;i({title:"2º passo concluído",description:`${g} receptora(s) confirmadas para TE`}),p==null||p()}catch(j){i({title:"Erro ao finalizar 2º passo",description:j instanceof Error?j.message:"Erro desconhecido",variant:"destructive"})}finally{u(!1)}},[S,c,l,a,r,x,o,i]);return{submitting:S,handleStatusChange:E,handleMotivoChange:q,handleFinalizarPasso2:R}}const Ce="passagene_protocolo_passo1_rascunho",we="passagene_protocolo_passo2_rascunho",Ia=24;function qs(){const[a,r]=t.useState("passo1"),[l,d]=t.useState(!1),[o,c]=t.useState(!1),[x,p]=t.useState(null),i=t.useRef(null),{loading:S,protocolos:u,loadData:E,loadProtocolos:q}=Xt(),[R,b]=t.useState("form"),{loading:j,loadingReceptoras:T,fazendas:C,allReceptoras:I,receptorasComStatus:D,protocoloData:n,setProtocoloData:m,loadFazendas:f,loadAllReceptoras:_,getSelectedIds:g,getReceptorasFiltradas:y,getFazendaNome:w}=Jt(),{receptorasLocais:v,setReceptorasLocais:H,showAddReceptora:N,setShowAddReceptora:A,showCreateReceptora:h,setShowCreateReceptora:P,buscaReceptora:F,setBuscaReceptora:J,popoverAberto:$,setPopoverAberto:k,addReceptoraForm:U,setAddReceptoraForm:W,createReceptoraForm:se,setCreateReceptoraForm:M,submitting:ge,handleAddReceptora:ce,handleCreateReceptora:he,handleRemoveReceptora:Ie,handleUpdateCiclando:Ee,handleUpdateQualidade:Re,resetAddForm:ve,resetCreateForm:De}=Kt({fazendaId:n.fazenda_id,allReceptoras:I,receptorasComStatus:D,selectedIds:g([]),onReceptorasReload:()=>_(n.fazenda_id)}),{submitting:ze,showConfirmExit:ke,setShowConfirmExit:Te,handleFinalizarPasso1:ea,handleConfirmExit:Oe,validateProtocoloForm:G}=Wt({protocoloData:n,receptorasLocais:v,onSuccess:()=>{pt(),_e(),q(1)}}),L=ge||ze,[Y,aa]=t.useState(""),[X,le]=t.useState({data:new Date().toISOString().split("T")[0],tecnico:""}),[de,ue]=t.useState({}),[rs,is]=t.useState(!1),{loading:Xa,protocolo:V,setProtocolo:ta,fazendaNome:et,receptoras:Z,setReceptoras:be,loadData:sa}=es(),{submitting:Fe,handleStatusChange:at,handleMotivoChange:tt,handleFinalizarPasso2:st}=as({protocoloId:Y,protocolo:V,receptoras:Z,setReceptoras:be,setProtocolo:ta,passo2Form:X,motivosInapta:de,onSuccess:()=>{ca(),re(),q(1)}}),oa=t.useMemo(()=>g(v),[g,v]),ot=t.useMemo(()=>y(F,oa),[y,F,oa]),Ge=t.useMemo(()=>u.filter(s=>s.status==="PASSO1_FECHADO"),[u]),oe=t.useMemo(()=>({pendentes:Z.filter(s=>s.pr_status==="INICIADA").length,confirmadas:Z.filter(s=>s.pr_status==="APTA").length,descartadas:Z.filter(s=>s.pr_status==="INAPTA").length}),[Z]),qe=(V==null?void 0:V.status)==="SINCRONIZADO",rt=oe.pendentes===0&&X.data&&X.tecnico.trim(),je=t.useCallback(()=>{try{const s=localStorage.getItem(Ce);if(!s)return null;const z=JSON.parse(s);return(Date.now()-z.timestamp)/(1e3*60*60)>Ia?(localStorage.removeItem(Ce),null):z}catch{return null}},[]),ra=t.useCallback(()=>{const s={protocoloData:n,receptorasLocais:v,currentStep:R,timestamp:Date.now()};localStorage.setItem(Ce,JSON.stringify(s))},[n,v,R]),_e=t.useCallback(()=>{localStorage.removeItem(Ce)},[]),it=t.useCallback(()=>{const s=je();s&&(m(s.protocoloData),H(s.receptorasLocais),b(s.currentStep)),d(!1)},[je,m,H]),nt=t.useCallback(()=>{_e(),d(!1)},[_e]),ia=t.useCallback(()=>{try{const s=localStorage.getItem(we);if(!s)return null;const z=JSON.parse(s);return(Date.now()-z.timestamp)/(1e3*60*60)>Ia?(localStorage.removeItem(we),null):z}catch{return null}},[]),na=t.useCallback(()=>{if(!Y)return;const s={};Z.forEach(B=>{B.pr_status&&(s[B.id]=B.pr_status)});const z={protocoloSelecionadoId:Y,passo2Form:X,motivosInapta:de,statusAlterados:s,timestamp:Date.now()};localStorage.setItem(we,JSON.stringify(z))},[Y,X,de,Z]),re=t.useCallback(()=>{localStorage.removeItem(we)},[]),ct=t.useCallback(s=>{le(s.passo2Form),ue(s.motivosInapta),Object.keys(s.statusAlterados).length>0&&be(z=>z.map(B=>({...B,pr_status:s.statusAlterados[B.id]||B.pr_status}))),re(),p(null),c(!1)},[be,re]),lt=t.useCallback(()=>{re(),p(null),c(!1)},[re]);t.useEffect(()=>{E(),f()},[E,f]),t.useEffect(()=>{R==="receptoras"&&n.fazenda_id&&_(n.fazenda_id)},[R,n.fazenda_id,_]),t.useEffect(()=>{Y&&sa(Y)},[Y,sa]),t.useEffect(()=>{V&&(V.passo2_data||V.passo2_tecnico_responsavel)&&le({data:V.passo2_data||new Date().toISOString().split("T")[0],tecnico:V.passo2_tecnico_responsavel||""})},[V]),t.useEffect(()=>{if(Z.length>0){const s={};Z.filter(z=>z.pr_status==="INAPTA"&&z.pr_motivo_inapta).forEach(z=>{s[z.id]=z.pr_motivo_inapta||""}),ue(s)}},[Z]),t.useEffect(()=>{if(V&&Z.length>0&&i.current!==V.id){i.current=V.id;const s=ia();s&&s.protocoloSelecionadoId===V.id&&(p(s),c(!0))}},[V,Z.length,ia]),t.useEffect(()=>{const s=je();s&&(s.receptorasLocais.length>0||s.currentStep==="receptoras")&&d(!0)},[je]),t.useEffect(()=>{if(R==="receptoras"||v.length>0){const s=setTimeout(()=>{ra()},1e3);return()=>clearTimeout(s)}},[n,v,R,ra]),t.useEffect(()=>{if(Y&&Z.length>0){const s=setTimeout(()=>{na()},1e3);return()=>clearTimeout(s)}},[Y,X,de,Z,na]);const dt=()=>{G()&&b("receptoras")},ut=()=>{R==="receptoras"&&b("form")},pt=()=>{b("form"),m({fazenda_id:"",data_inicio:new Date().toISOString().split("T")[0],veterinario:"",tecnico:"",observacoes:""}),H([]),_e()},mt=(s,z)=>{at(s,z),(z==="APTA"||z==="INICIADA")&&ue(B=>{const te={...B};return delete te[s],te})},ft=(s,z)=>{tt(s,z),ue(B=>({...B,[s]:z.trim()}))},ca=()=>{aa(""),ta(null),be([]),le({data:new Date().toISOString().split("T")[0],tecnico:""}),ue({}),re()},xt=s=>{if(!s)return"-";const[z,B,te]=s.split("-");return`${te}/${B}/${z}`};return S?e.jsx(la,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(zt,{title:"Protocolos de Sincronização",description:"Gerenciar protocolos em 2 passos"}),e.jsx("div",{className:"mt-4",children:e.jsxs(Dt,{value:a,onValueChange:s=>r(s),className:"w-full",children:[e.jsx("div",{className:"rounded-xl border border-border bg-card p-1.5 mb-4",children:e.jsx("div",{className:"flex gap-1",children:[{value:"passo1",label:"1º Passo",icon:_t,count:0},{value:"passo2",label:"2º Passo",icon:$t,count:Ge.length}].map(({value:s,label:z,icon:B,count:te})=>e.jsxs("button",{type:"button",onClick:()=>r(s),className:`
                      relative flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg
                      text-sm font-medium transition-all duration-200
                      ${a===s?"bg-muted/80 text-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-muted/40"}
                    `,children:[a===s&&e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-10 h-0.5 bg-primary rounded-full"}),e.jsx("div",{className:`
                      flex items-center justify-center w-7 h-7 rounded-md transition-colors
                      ${a===s?"bg-primary/15":"bg-muted/50"}
                    `,children:e.jsx(B,{className:`w-4 h-4 ${a===s?"text-primary":"text-muted-foreground"}`})}),e.jsx("span",{children:z}),te>0&&e.jsx("span",{className:`inline-flex items-center justify-center min-w-5 h-5 px-1.5 text-[10px] font-bold rounded-full ${a===s?"bg-primary/15 text-primary":"bg-muted text-muted-foreground"}`,children:te})]},s))})}),e.jsx(Na,{value:"passo1",children:R==="form"?e.jsx(e.Fragment,{children:e.jsx("div",{className:"rounded-xl border border-border bg-card overflow-hidden mb-4",children:e.jsxs("div",{className:"flex flex-wrap items-stretch",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-r border-border bg-gradient-to-b from-primary/5 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded-full bg-primary/40"}),e.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground uppercase tracking-wider",children:"Responsáveis"})]}),e.jsx(ne,{placeholder:"Veterinário *",value:n.veterinario,onChange:s=>m({...n,veterinario:s.target.value}),className:"h-9 w-[160px] bg-background/80 border-primary/20 focus:border-primary/40"}),e.jsx(ne,{placeholder:"Técnico",value:n.tecnico,onChange:s=>m({...n,tecnico:s.target.value}),className:"h-9 w-[160px] bg-background"})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-r border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded-full bg-primary/40"}),e.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground uppercase tracking-wider",children:"Local"})]}),e.jsxs(ua,{value:n.fazenda_id,onValueChange:s=>m({...n,fazenda_id:s}),disabled:!n.veterinario,children:[e.jsx(pa,{className:"h-9 w-[180px] bg-background",children:e.jsx(ma,{placeholder:"Fazenda *"})}),e.jsx(fa,{children:C.map(s=>e.jsx(xa,{value:s.id,children:s.nome},s.id))})]}),e.jsx(Ca,{value:n.data_inicio,onChange:s=>m({...n,data_inicio:s||""}),className:"h-9 w-[130px] bg-background"})]}),e.jsx("div",{className:"flex items-center gap-2 px-4 py-3 ml-auto bg-gradient-to-b from-muted/50 to-transparent",children:e.jsx(Q,{onClick:dt,disabled:j||!n.fazenda_id||!n.veterinario||!n.data_inicio,className:"h-9 px-6 bg-primary hover:bg-primary-dark shadow-sm shadow-primary/25",children:"Continuar"})})]})})}):e.jsxs(e.Fragment,{children:[e.jsx(Aa,{fazendaNome:w(n.fazenda_id),dataInicio:n.data_inicio,veterinario:n.veterinario,tecnico:n.tecnico}),e.jsxs(pe,{className:"mt-4",children:[e.jsx(ye,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Pe,{className:"text-base",children:["Receptoras do Protocolo (",v.length,")"]}),e.jsx(da,{children:"Adicione as receptoras para este protocolo"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ga,{open:N,onOpenChange:s=>{A(s),s||ve()},children:[e.jsx(ha,{asChild:!0,children:e.jsxs(Q,{size:"sm",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Adicionar"]})}),e.jsxs(va,{className:"max-w-lg",children:[e.jsxs(ba,{children:[e.jsx(ja,{children:"Adicionar Receptora"}),e.jsx(_a,{children:"Busque por identificação ou nome."})]}),e.jsx(ts,{addReceptoraForm:U,setAddReceptoraForm:W,buscaReceptora:F,setBuscaReceptora:J,popoverAberto:$,setPopoverAberto:k,receptorasFiltradas:ot,receptorasComStatus:D,loadingReceptoras:T,onAdd:ce})]})]}),e.jsxs(ga,{open:h,onOpenChange:s=>{P(s),s||De()},children:[e.jsx(ha,{asChild:!0,children:e.jsxs(Q,{variant:"outline",size:"sm",children:[e.jsx(Fa,{className:"w-4 h-4 mr-2"}),"Nova"]})}),e.jsxs(va,{children:[e.jsxs(ba,{children:[e.jsx(ja,{children:"Cadastrar Nova Receptora"}),e.jsx(_a,{children:"Preencha os dados da nova receptora."})]}),e.jsx(ss,{createReceptoraForm:se,setCreateReceptoraForm:M,submitting:L,onCreate:he})]})]})]})]})}),e.jsx(me,{className:"pt-0",children:v.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma receptora adicionada. Adicione pelo menos uma antes de finalizar."}):e.jsx(os,{receptorasLocais:v,onRemove:Ie,onUpdateCiclando:Ee,onUpdateQualidade:Re})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx(Q,{variant:"outline",onClick:ut,disabled:L,children:"Voltar"}),e.jsxs(Q,{onClick:ea,disabled:v.length===0||L,className:"bg-primary hover:bg-primary-dark",children:[e.jsx(Pa,{className:"w-4 h-4 mr-2"}),L?"Finalizando...":"Finalizar 1º Passo"]})]}),e.jsx(Zt,{open:ke,onOpenChange:Te,onConfirm:Oe,title:"Sair sem finalizar?",description:"Se você sair agora, nenhum protocolo será criado."})]})}),e.jsx(Na,{value:"passo2",children:Y?Xa?e.jsx(pe,{children:e.jsx(me,{className:"py-8",children:e.jsx(la,{})})}):V?e.jsxs(e.Fragment,{children:[e.jsx(Aa,{fazendaNome:et,dataInicio:V.data_inicio,veterinario:V.responsavel_inicio||"-",tecnico:V.tecnico_responsavel||"-",passo2Data:X.data,passo2Tecnico:X.tecnico,showPasso2:!0}),e.jsxs(pe,{className:"mt-4",children:[e.jsx(ye,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Pe,{className:"text-base",children:["Receptoras para Avaliação (",Z.length,")"]}),e.jsx(da,{children:qe?"Protocolo já finalizado":oe.pendentes>0?`${oe.pendentes} receptora(s) aguardando avaliação`:"Todas as receptoras foram avaliadas"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Je,{variant:"outline",className:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/30",children:[e.jsx(qt,{className:"w-3 h-3 mr-1"}),oe.confirmadas," aptas"]}),oe.descartadas>0&&e.jsxs(Je,{variant:"outline",className:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/30",children:[oe.descartadas," inaptas"]})]})]})}),e.jsx(me,{className:"pt-0",children:e.jsx(Qt,{receptoras:Z,motivosInapta:de,isFinalized:qe,onStatusChange:mt,onMotivoChange:ft,hideCard:!0})})]}),!qe&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx(Q,{variant:"outline",onClick:ca,disabled:Fe,children:"Voltar"}),e.jsxs(Q,{onClick:st,disabled:!rt||Fe,className:"bg-primary hover:bg-primary-dark",children:[e.jsx(Pa,{className:"w-4 h-4 mr-2"}),Fe?"Finalizando...":"Finalizar 2º Passo"]})]})]}):null:e.jsx("div",{className:"rounded-xl border border-border bg-card overflow-hidden mb-4",children:e.jsxs("div",{className:"flex flex-wrap items-stretch",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-r border-border bg-gradient-to-b from-primary/5 to-transparent",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded-full bg-primary/40"}),e.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground uppercase tracking-wider",children:"Responsável"})]}),e.jsx(ne,{placeholder:"Nome do responsável *",value:X.tecnico,onChange:s=>le(z=>({...z,tecnico:s.target.value})),className:"h-9 w-[180px] bg-background/80 border-primary/20 focus:border-primary/40"})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-r border-border flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 rounded-full bg-primary/40"}),e.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground uppercase tracking-wider",children:"Protocolo"})]}),e.jsxs(ua,{value:Y,onValueChange:s=>{aa(s)},disabled:!X.tecnico.trim(),children:[e.jsx(pa,{className:"h-9 min-w-[280px] bg-background",children:e.jsx(ma,{placeholder:"Selecione um protocolo *"})}),e.jsx(fa,{children:Ge.length===0?e.jsx("div",{className:"p-2 text-sm text-muted-foreground text-center",children:"Nenhum protocolo aguardando"}):Ge.map(s=>e.jsxs(xa,{value:s.id,children:[s.fazenda_nome," • ",xt(s.data_inicio)," • ",s.receptoras_count," rec."]},s.id))})]}),e.jsx(Ca,{value:X.data,onChange:s=>le(z=>({...z,data:s||""})),className:"h-9 w-[130px] bg-background"})]})]})})})]})}),e.jsx($e,{open:l,onOpenChange:d,children:e.jsxs(Le,{children:[e.jsxs(Ve,{children:[e.jsx(He,{children:"Retomar trabalho anterior?"}),e.jsx(Ue,{children:"Foi encontrado um rascunho do 1º Passo não finalizado. Deseja continuar de onde parou?"})]}),e.jsxs(Be,{children:[e.jsx(Ze,{onClick:nt,children:"Descartar"}),e.jsx(Qe,{onClick:it,className:"bg-primary hover:bg-primary-dark",children:"Continuar"})]})]})}),e.jsx($e,{open:o,onOpenChange:c,children:e.jsxs(Le,{children:[e.jsxs(Ve,{children:[e.jsx(He,{children:"Retomar avaliação anterior?"}),e.jsx(Ue,{children:"Foi encontrada uma avaliação do 2º Passo não finalizada para este protocolo. Deseja continuar de onde parou?"})]}),e.jsxs(Be,{children:[e.jsx(Ze,{onClick:lt,children:"Descartar"}),e.jsx(Qe,{onClick:()=>x&&ct(x),className:"bg-primary hover:bg-primary-dark",children:"Continuar"})]})]})})]})}function ts({addReceptoraForm:a,setAddReceptoraForm:r,buscaReceptora:l,setBuscaReceptora:d,popoverAberto:o,setPopoverAberto:c,receptorasFiltradas:x,receptorasComStatus:p,loadingReceptoras:i,onAdd:S}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{children:"Receptora *"}),e.jsxs(Ct,{open:o,onOpenChange:c,children:[e.jsx(wt,{asChild:!0,children:e.jsxs(Q,{variant:"outline",role:"combobox","aria-expanded":o,className:"w-full justify-between",children:[a.receptora_id?(()=>{const u=p.find(E=>String(E.id).trim()===a.receptora_id.trim());return u?`${u.identificacao}${u.nome?` - ${u.nome}`:""}`:"Selecione uma receptora"})():"Buscar receptora...",e.jsx(Mt,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(yt,{className:"w-[400px] p-0",align:"start",children:e.jsxs(Pt,{shouldFilter:!1,children:[e.jsx(St,{placeholder:"Buscar por identificação ou nome...",value:l,onValueChange:d}),e.jsx(At,{children:i?e.jsx("div",{className:"p-4 text-sm text-center text-muted-foreground",children:"Carregando..."}):x.length===0?e.jsx(It,{children:l.trim()?"Nenhuma encontrada":"Nenhuma disponível"}):e.jsx(Et,{children:x.map(u=>{const E=u.id?String(u.id).trim():"";if(!E)return null;const q=u.historicoStats;return e.jsx(Rt,{value:`${u.identificacao} ${u.nome||""} ${E}`,onSelect:()=>{u.disponivel&&(r({...a,receptora_id:E}),d(""),c(!1))},disabled:!u.disponivel,className:`group ${u.disponivel?"":"opacity-60 cursor-not-allowed"}`,children:e.jsx("div",{className:"flex items-center justify-between w-full gap-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium group-data-[selected=true]:text-accent-foreground",children:u.identificacao}),u.nome&&e.jsx("span",{className:"text-xs text-muted-foreground group-data-[selected=true]:text-accent-foreground/70",children:u.nome})]}),q&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-xs bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200 px-1.5 py-0.5 rounded font-medium",children:[q.totalProtocolos,"P"]}),e.jsxs("span",{className:"text-xs bg-emerald-200 dark:bg-emerald-800 text-emerald-700 dark:text-emerald-200 px-1.5 py-0.5 rounded font-medium",children:[q.gestacoes,"G"]}),e.jsxs("span",{className:"text-xs bg-amber-200 dark:bg-amber-800 text-amber-700 dark:text-amber-200 px-1.5 py-0.5 rounded font-medium",children:[q.protocolosDesdeUltimaGestacao,"D"]})]})]})})},u.id)})})})]})})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsx(Wa,{ciclandoValue:a.ciclando_classificacao,qualidadeValue:a.qualidade_semaforo,onChangeCiclando:u=>r({...a,ciclando_classificacao:u}),onChangeQualidade:u=>r({...a,qualidade_semaforo:u}),size:"sm"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{children:"Observações"}),e.jsx(Ra,{value:a.observacoes,onChange:u=>r({...a,observacoes:u.target.value}),placeholder:"Observações",rows:2})]}),e.jsx(Q,{onClick:S,className:"w-full",disabled:i||!a.receptora_id,children:"Adicionar"})]})}function ss({createReceptoraForm:a,setCreateReceptoraForm:r,submitting:l,onCreate:d}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{children:"Identificação (Brinco) *"}),e.jsx(ne,{value:a.identificacao,onChange:o=>r({...a,identificacao:o.target.value}),placeholder:"Número do brinco"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{children:"Nome"}),e.jsx(ne,{value:a.nome,onChange:o=>r({...a,nome:o.target.value}),placeholder:"Nome da receptora (opcional)"})]}),e.jsx("div",{className:"space-y-2",children:e.jsx(Wa,{ciclandoValue:a.ciclando_classificacao||null,qualidadeValue:a.qualidade_semaforo||null,onChangeCiclando:o=>r({...a,ciclando_classificacao:o}),onChangeQualidade:o=>r({...a,qualidade_semaforo:o}),size:"sm"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{children:"Observações"}),e.jsx(Ra,{value:a.observacoes,onChange:o=>r({...a,observacoes:o.target.value}),placeholder:"Observações",rows:2})]}),e.jsxs(Q,{onClick:d,className:"w-full",disabled:l,children:[e.jsx(Fa,{className:"w-4 h-4 mr-2"}),l?"Criando...":"Criar e Adicionar"]})]})}function os({receptorasLocais:a,onRemove:r,onUpdateCiclando:l,onUpdateQualidade:d}){return e.jsx("div",{className:"overflow-x-auto rounded-lg border border-border",children:e.jsxs("div",{className:"min-w-[700px] w-full",children:[e.jsxs("div",{className:"grid grid-cols-[minmax(160px,1.5fr)_36px_36px_36px_16px_90px_90px_minmax(100px,1fr)_40px] gap-0 bg-muted text-[10px] font-semibold text-muted-foreground uppercase tracking-wide",children:[e.jsx("div",{className:"px-3 py-2",children:"Receptora"}),e.jsx("div",{className:"px-1 py-2 text-center",title:"Protocolos",children:"P"}),e.jsx("div",{className:"px-1 py-2 text-center",title:"Gestações",children:"G"}),e.jsx("div",{className:"px-1 py-2 text-center",title:"Desde última",children:"D"}),e.jsx("div",{className:"border-r border-border/50"}),e.jsx("div",{className:"px-2 py-2 text-center",children:"Ciclando"}),e.jsx("div",{className:"px-2 py-2 text-center",children:"Qualidade"}),e.jsx("div",{className:"px-2 py-2",children:"Obs."}),e.jsx("div",{className:"px-2 py-2"})]}),a.map((o,c)=>{const x=o.id&&o.id.trim()!==""?o.id:`new-${c}`,p=o.historicoStats;return e.jsxs("div",{className:"group grid grid-cols-[minmax(160px,1.5fr)_36px_36px_36px_16px_90px_90px_minmax(100px,1fr)_40px] gap-0 items-center border-t border-border hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5",children:[e.jsx("span",{className:"flex items-center justify-center w-5 h-5 rounded-full bg-primary/10 text-primary text-[10px] font-bold shrink-0",children:c+1}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-medium text-sm text-foreground truncate",children:o.identificacao}),o.nome&&e.jsx("span",{className:"text-[10px] text-muted-foreground truncate",children:o.nome})]})]}),e.jsx("div",{className:"px-1 py-1.5 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-5 text-[10px] font-medium bg-muted text-foreground rounded",children:(p==null?void 0:p.totalProtocolos)??0})}),e.jsx("div",{className:"px-1 py-1.5 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-5 text-[10px] font-medium bg-primary/15 text-primary rounded",children:(p==null?void 0:p.gestacoes)??0})}),e.jsx("div",{className:"px-1 py-1.5 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-5 text-[10px] font-medium bg-orange-500/15 text-orange-600 dark:text-orange-400 rounded",children:(p==null?void 0:p.protocolosDesdeUltimaGestacao)??0})}),e.jsx("div",{className:"border-r border-border/50 h-full"}),e.jsx("div",{className:"px-2 py-1 flex justify-center",children:e.jsx(Da,{value:o.ciclando_classificacao,onChange:i=>l(c,i),variant:"editable"})}),e.jsx("div",{className:"px-2 py-1 flex justify-center",children:e.jsx(za,{value:o.qualidade_semaforo,onChange:i=>d(c,i),variant:"row"})}),e.jsx("div",{className:"px-2 py-1.5 text-xs text-muted-foreground truncate",children:o.observacoes||"-"}),e.jsx("div",{className:"px-1 py-1 flex justify-center",children:e.jsx(Q,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>r(c),children:e.jsx(Se,{className:"w-4 h-4 text-muted-foreground hover:text-destructive"})})})]},x)})]})})}export{qs as default};
