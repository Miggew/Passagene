import{r as l,j as e,k as Se,o as Re,P as X,p as he,i as oe,q as ye,m as re,e as Te,f as qe,s as w,a as Oe,B as S,g as V}from"./index-DM5u2d-F.js";import{C as T,a as q,b as O,d as z}from"./card-B_EQ6x91.js";import{T as ze,a as Be,b as Q,c as L,d as Fe,e as B}from"./table-CEKyj1ed.js";import{D as ne,b as ie,c as ce,d as de,e as le}from"./dialog-2y4jBKyr.js";import{L as Z}from"./label-Bhhf9ayq.js";import{I as pe}from"./input-CtUEWea1.js";import{B as Le}from"./badge-D_AVhbx8.js";import{u as Me}from"./index-CWb7Yp_3.js";import{u as $e}from"./index-BEVMOrkK.js";import{C as He}from"./check-Y5eEMkO8.js";import{P as ue}from"./PageHeader-JgO8x5IE.js";import{E as Ve}from"./EmptyState-ChaxWsz8.js";import{u as Ze}from"./use-toast-BOUGyrIz.js";import{C as Ue,Q as Ke}from"./QualidadeSemaforo-CtCykpmc.js";import{D as Qe}from"./DatePickerBR-BEWFLeoy.js";import{A as me}from"./arrow-left-CH9vqVt5.js";import{L as Ge}from"./lock-C7PcKBaO.js";import{C as Xe}from"./circle-check-big-DGOUcNX6.js";import"./index-sCsFC1oc.js";import"./x-DsJYRTDR.js";import"./popover-CNdtTvFz.js";import"./calendar-B_KmJ-VL.js";var U="Checkbox",[Je,Cs]=Se(U),[We,J]=Je(U);function Ye(o){const{__scopeCheckbox:m,checked:p,children:b,defaultChecked:v,disabled:n,form:_,name:t,onCheckedChange:j,required:N,value:A="on",internal_do_not_use_render:c}=o,[h,y]=Me({prop:p,defaultProp:v??!1,onChange:j,caller:U}),[C,E]=l.useState(null),[P,x]=l.useState(null),f=l.useRef(!1),d=C?!!_||!!C.closest("form"):!0,D={checked:h,disabled:n,setChecked:y,control:C,setControl:E,name:t,form:_,value:A,hasConsumerStoppedPropagationRef:f,required:N,defaultChecked:R(v)?!1:v,isFormControl:d,bubbleInput:P,setBubbleInput:x};return e.jsx(We,{scope:m,...D,children:es(c)?c(D):b})}var xe="CheckboxTrigger",fe=l.forwardRef(({__scopeCheckbox:o,onKeyDown:m,onClick:p,...b},v)=>{const{control:n,value:_,disabled:t,checked:j,required:N,setControl:A,setChecked:c,hasConsumerStoppedPropagationRef:h,isFormControl:y,bubbleInput:C}=J(xe,o),E=he(v,A),P=l.useRef(j);return l.useEffect(()=>{const x=n==null?void 0:n.form;if(x){const f=()=>c(P.current);return x.addEventListener("reset",f),()=>x.removeEventListener("reset",f)}},[n,c]),e.jsx(X.button,{type:"button",role:"checkbox","aria-checked":R(j)?"mixed":j,"aria-required":N,"data-state":Ne(j),"data-disabled":t?"":void 0,disabled:t,value:_,...b,ref:E,onKeyDown:oe(m,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:oe(p,x=>{c(f=>R(f)?!0:!f),C&&y&&(h.current=x.isPropagationStopped(),h.current||x.stopPropagation())})})});fe.displayName=xe;var W=l.forwardRef((o,m)=>{const{__scopeCheckbox:p,name:b,checked:v,defaultChecked:n,required:_,disabled:t,value:j,onCheckedChange:N,form:A,...c}=o;return e.jsx(Ye,{__scopeCheckbox:p,checked:v,defaultChecked:n,disabled:t,required:_,onCheckedChange:N,name:b,form:A,value:j,internal_do_not_use_render:({isFormControl:h})=>e.jsxs(e.Fragment,{children:[e.jsx(fe,{...c,ref:m,__scopeCheckbox:p}),h&&e.jsx(be,{__scopeCheckbox:p})]})})});W.displayName=U;var ve="CheckboxIndicator",je=l.forwardRef((o,m)=>{const{__scopeCheckbox:p,forceMount:b,...v}=o,n=J(ve,p);return e.jsx(Re,{present:b||R(n.checked)||n.checked===!0,children:e.jsx(X.span,{"data-state":Ne(n.checked),"data-disabled":n.disabled?"":void 0,...v,ref:m,style:{pointerEvents:"none",...o.style}})})});je.displayName=ve;var ge="CheckboxBubbleInput",be=l.forwardRef(({__scopeCheckbox:o,...m},p)=>{const{control:b,hasConsumerStoppedPropagationRef:v,checked:n,defaultChecked:_,required:t,disabled:j,name:N,value:A,form:c,bubbleInput:h,setBubbleInput:y}=J(ge,o),C=he(p,y),E=$e(n),P=ye(b);l.useEffect(()=>{const f=h;if(!f)return;const d=window.HTMLInputElement.prototype,M=Object.getOwnPropertyDescriptor(d,"checked").set,F=!v.current;if(E!==n&&M){const I=new Event("click",{bubbles:F});f.indeterminate=R(n),M.call(f,R(n)?!1:n),f.dispatchEvent(I)}},[h,E,n,v]);const x=l.useRef(R(n)?!1:n);return e.jsx(X.input,{type:"checkbox","aria-hidden":!0,defaultChecked:_??x.current,required:t,disabled:j,name:N,value:A,form:c,...m,tabIndex:-1,ref:C,style:{...m.style,...P,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});be.displayName=ge;function es(o){return typeof o=="function"}function R(o){return o==="indeterminate"}function Ne(o){return R(o)?"indeterminate":o?"checked":"unchecked"}const G=l.forwardRef(({className:o,...m},p)=>e.jsx(W,{ref:p,className:re("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",o),...m,children:e.jsx(je,{className:re("flex items-center justify-center text-current"),children:e.jsx(He,{className:"h-4 w-4"})})}));G.displayName=W.displayName;function Ps(){const{id:o}=Te(),m=qe(),{toast:p}=Ze(),[b,v]=l.useState(!0),[n,_]=l.useState(!1),[t,j]=l.useState(null),[N,A]=l.useState(""),[c,h]=l.useState([]),[y,C]=l.useState(!1),[E,P]=l.useState(!1),[x,f]=l.useState(!1),[d,D]=l.useState({data:"",tecnico:""}),[M,F]=l.useState({});l.useEffect(()=>{o&&_e()},[o]),l.useEffect(()=>{const s=c.filter(i=>i.pr_status==="INICIADA"),r=d.data&&d.tecnico.trim(),u=s.length>0||!r;f(u&&(t==null?void 0:t.status)!=="SINCRONIZADO")},[c,t,d]);const I=l.useRef(!1);l.useEffect(()=>{if(!x){I.current=!1;return}I.current=!0;const s=u=>(u.preventDefault(),u.returnValue="Você tem receptoras pendentes de revisão. Tem certeza que deseja sair?",u.returnValue),r=u=>{x&&(u.preventDefault(),window.history.pushState(null,"",window.location.href),P(!0))};return window.history.pushState(null,"",window.location.href),window.addEventListener("beforeunload",s),window.addEventListener("popstate",r),()=>{window.removeEventListener("beforeunload",s),window.removeEventListener("popstate",r)}},[x]);const _e=async()=>{try{v(!0);const{data:s,error:r}=await w.from("protocolos_sincronizacao").select("*").eq("id",o).single();if(r)throw r;if(s.status!=="PASSO1_FECHADO"&&s.status!=="PRIMEIRO_PASSO_FECHADO"&&s.status!=="SINCRONIZADO"){p({title:"Erro",description:"Este protocolo não está aguardando o 2º passo",variant:"destructive"}),m("/protocolos");return}j(s),s.passo2_data||s.passo2_tecnico_responsavel?D({data:s.passo2_data||new Date().toISOString().split("T")[0],tecnico:s.passo2_tecnico_responsavel||""}):D({data:new Date().toISOString().split("T")[0],tecnico:""});const{data:u,error:i}=await w.from("fazendas").select("nome").eq("id",s.fazenda_id).single();if(i)throw i;A(u.nome),await Ce()}catch(s){p({title:"Erro ao carregar dados",description:s instanceof Error?s.message:"Erro desconhecido",variant:"destructive"})}finally{v(!1)}},Ce=async()=>{try{if(!o){p({title:"Erro",description:"ID do protocolo não encontrado",variant:"destructive"});return}const{data:s,error:r}=await w.from("protocolo_receptoras").select("*").eq("protocolo_id",o);if(r){p({title:"Erro ao carregar receptoras",description:r.message||"Erro desconhecido ao carregar receptoras do protocolo",variant:"destructive"}),h([]);return}if(!s||s.length===0){p({title:"Erro: Protocolo inconsistente",description:`Este protocolo não possui receptoras vinculadas (ID: ${o}). Verifique no banco de dados se há receptoras vinculadas a este protocolo.`,variant:"destructive"}),h([]);return}const u=[];for(const a of s){const{data:se,error:H}=await w.from("receptoras").select("*").eq("id",a.receptora_id).single();H||u.push({...se,pr_id:a.id,pr_status:a.status,pr_motivo_inapta:a.motivo_inapta,pr_observacoes:a.observacoes,pr_ciclando_classificacao:"ciclando_classificacao"in a&&(a.ciclando_classificacao==="CL"||a.ciclando_classificacao==="N")?a.ciclando_classificacao:null,pr_qualidade_semaforo:"qualidade_semaforo"in a&&typeof a.qualidade_semaforo=="number"&&a.qualidade_semaforo>=1&&a.qualidade_semaforo<=3?a.qualidade_semaforo:null})}h(u);const i={};u.filter(a=>a.pr_status==="INAPTA"&&a.pr_motivo_inapta).forEach(a=>{i[a.id]=a.pr_motivo_inapta||""}),F(i)}catch(s){p({title:"Erro ao carregar receptoras",description:s instanceof Error?s.message:"Erro desconhecido",variant:"destructive"})}},Pe=(s,r)=>{F(u=>({...u,[s]:r.trim()})),h(u=>u.map(i=>i.id===s?{...i,pr_motivo_inapta:r.trim()||void 0}:i))},ke=async()=>{if(n)return;if(!d.data||!d.tecnico.trim()){p({title:"Erro de validação",description:"Data de realização do 2º passo e técnico responsável são obrigatórios",variant:"destructive"});return}const s=c.filter(r=>r.pr_status==="INICIADA");if(s.length>0){p({title:"Erro",description:`Ainda há ${s.length} receptora(s) pendente(s) de revisão`,variant:"destructive"});return}if(c.length===0){p({title:"Erro",description:"Não é possível finalizar protocolo sem receptoras vinculadas",variant:"destructive"});return}try{_(!0);const r=new Date,u=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,i=c.filter(g=>g.pr_status==="APTA"),a=c.filter(g=>g.pr_status==="INAPTA"),H=i.length>0?"SINCRONIZADO":"FECHADO",Ee=[...i.map(async g=>{const{error:k}=await w.from("protocolo_receptoras").update({status:"APTA",motivo_inapta:null}).eq("protocolo_id",o).eq("receptora_id",g.id);if(k)throw k}),...a.map(async g=>{const k=M[g.id]||g.pr_motivo_inapta||null,{error:te}=await w.from("protocolo_receptoras").update({status:"INAPTA",motivo_inapta:k||null}).eq("protocolo_id",o).eq("receptora_id",g.id);if(te)throw te})];await Promise.all(Ee);const{error:ae}=await w.from("protocolos_sincronizacao").update({status:H,passo2_data:d.data,passo2_tecnico_responsavel:d.tecnico.trim(),data_retirada:u,responsavel_retirada:(t==null?void 0:t.responsavel_inicio)||null}).eq("id",o);if(ae)throw ae;j({...t,status:H,passo2_data:d.data,passo2_tecnico_responsavel:d.tecnico.trim(),data_retirada:u,responsavel_retirada:(t==null?void 0:t.responsavel_inicio)||null});const De=[...i.map(async g=>{const{error:k}=await w.from("receptoras").update({status_reprodutivo:"SINCRONIZADA"}).eq("id",g.id);if(k)throw k}),...a.map(async g=>{const{error:k}=await w.from("receptoras").update({status_reprodutivo:"VAZIA"}).eq("id",g.id);if(k)throw k})];await Promise.all(De),f(!1),I.current=!1,C(!0)}catch(r){p({title:"Erro ao finalizar 2º passo",description:r instanceof Error?r.message:"Erro desconhecido",variant:"destructive"})}finally{_(!1)}},Ae=()=>{C(!1),p({title:"2º passo concluído com sucesso",description:`${c.filter(s=>s.pr_status==="APTA").length} receptoras confirmadas para TE`}),m("/protocolos")},Ie=()=>{P(!1),f(!1),I.current=!1,m("/protocolos")},Y=()=>{x?P(!0):(I.current=!1,m("/protocolos"))},we=s=>{const u={INICIADA:{label:"Aguardando Revisão",variant:"secondary"},APTA:{label:"Confirmada",variant:"default"},INAPTA:{label:"Descartada",variant:"destructive"}}[s]||{label:s,variant:"outline"};return e.jsx(Le,{variant:u.variant,children:u.label})};if(b)return e.jsx(Oe,{});if(!t)return e.jsx("div",{className:"space-y-6",children:e.jsx(Ve,{title:"Protocolo não encontrado",description:"Volte para a lista e selecione outro protocolo.",action:e.jsx(S,{onClick:()=>m("/protocolos"),variant:"outline",children:"Voltar para Protocolos"})})});if(c.length===0&&!b)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ue,{title:`2º Passo - ${N}`,description:"Revisar e confirmar receptoras",actions:e.jsx(S,{variant:"outline",size:"icon",onClick:Y,children:e.jsx(me,{className:"w-4 h-4"})})}),e.jsxs(T,{className:"border-red-200 bg-red-50",children:[e.jsx(q,{children:e.jsx(O,{className:"text-red-700",children:"⚠️ Protocolo Inconsistente"})}),e.jsxs(z,{className:"space-y-4",children:[e.jsx("p",{className:"text-red-800",children:"Este protocolo não possui receptoras vinculadas. Não é possível prosseguir com o 2º passo."}),e.jsx("p",{className:"text-sm text-red-700",children:"Isso pode ter ocorrido devido a um erro durante a criação do protocolo ou exclusão acidental de dados."}),e.jsx(S,{onClick:()=>m("/protocolos"),variant:"outline",className:"mt-4",children:"Voltar para Protocolos"})]})]})]});const $=c.filter(s=>s.pr_status==="INICIADA"),K=c.filter(s=>s.pr_status==="APTA"),ee=c.filter(s=>s.pr_status==="INAPTA");return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ue,{title:`2º Passo - ${N}`,description:"Revisar e confirmar receptoras",actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{variant:"outline",size:"icon",onClick:Y,children:e.jsx(me,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs(S,{onClick:ke,disabled:$.length>0||!d.data||!d.tecnico.trim()||n,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),n?"Finalizando...":"Finalizar 2º Passo"]}),($.length>0||!d.data||!d.tecnico.trim())&&e.jsx("p",{className:"text-xs text-slate-500 text-right",children:!d.data||!d.tecnico.trim()?"Preencha a data e o técnico responsável":$.length>0?`${$.length} receptora(s) aguardando avaliação`:""})]})]})}),t&&t.status!=="SINCRONIZADO"&&e.jsxs(T,{children:[e.jsx(q,{children:e.jsx(O,{children:"Dados do 2º Passo"})}),e.jsxs(z,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"passo2_data",children:"Data de Realização do 2º Passo *"}),e.jsx(Qe,{id:"passo2_data",value:d.data,onChange:s=>D({...d,data:s||""}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"passo2_tecnico",children:"Técnico Responsável *"}),e.jsx(pe,{id:"passo2_tecnico",value:d.tecnico,onChange:s=>D({...d,tecnico:s.target.value}),placeholder:"Nome do técnico responsável",required:!0})]})]})]}),e.jsxs(T,{children:[e.jsx(q,{children:e.jsx(O,{children:"Informações do Protocolo"})}),e.jsxs(z,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),e.jsx("p",{className:"text-base text-slate-900",children:N})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data Início"}),e.jsx("p",{className:"text-base text-slate-900",children:V(t.data_inicio)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data do 2º Passo"}),e.jsx("p",{className:"text-base text-slate-900",children:t.passo2_data?V(t.passo2_data):d.data?V(d.data):"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Técnico 2º Passo"}),e.jsx("p",{className:"text-base text-slate-900",children:t.passo2_tecnico_responsavel||d.tecnico||"-"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(T,{children:[e.jsx(q,{className:"pb-3",children:e.jsx(O,{className:"text-base",children:"Aguardando Revisão"})}),e.jsx(z,{children:e.jsx("p",{className:"text-3xl font-bold text-slate-900",children:$.length})})]}),e.jsxs(T,{children:[e.jsx(q,{className:"pb-3",children:e.jsx(O,{className:"text-base",children:"Confirmadas"})}),e.jsx(z,{children:e.jsx("p",{className:"text-3xl font-bold text-green-600",children:K.length})})]}),e.jsxs(T,{children:[e.jsx(q,{className:"pb-3",children:e.jsx(O,{className:"text-base",children:"Descartadas"})}),e.jsx(z,{children:e.jsx("p",{className:"text-3xl font-bold text-red-600",children:ee.length})})]})]}),e.jsxs(T,{children:[e.jsx(q,{children:e.jsxs(O,{children:["Receptoras para Revisão (",c.length,")"]})}),e.jsx(z,{children:e.jsxs(ze,{children:[e.jsx(Be,{children:e.jsxs(Q,{children:[e.jsx(L,{children:"Brinco"}),e.jsx(L,{children:"Nome"}),e.jsx(L,{children:"Ciclando"}),e.jsx(L,{children:"Qualidade"}),e.jsx(L,{children:"Avaliação"}),e.jsx(L,{children:"Motivo (se INAPTA)"})]})}),e.jsx(Fe,{children:c.length===0?e.jsx(Q,{children:e.jsx(B,{colSpan:6,className:"text-center text-slate-500",children:"Nenhuma receptora no protocolo"})}):c.map(s=>e.jsxs(Q,{children:[e.jsx(B,{className:"font-medium",children:s.identificacao}),e.jsx(B,{children:s.nome||"-"}),e.jsx(B,{children:e.jsx(Ue,{value:s.pr_ciclando_classificacao,variant:"display",disabled:!0})}),e.jsx(B,{children:e.jsx(Ke,{value:s.pr_qualidade_semaforo,variant:"single",disabled:!0})}),e.jsx(B,{children:t&&t.status!=="SINCRONIZADO"?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{id:`apta-${s.id}`,checked:s.pr_status==="APTA",onCheckedChange:r=>{r===!0?(F(i=>{const a={...i};return delete a[s.id],a}),h(i=>i.map(a=>a.id===s.id?{...a,pr_status:"APTA",pr_motivo_inapta:void 0}:a))):h(i=>i.map(a=>a.id===s.id?{...a,pr_status:"INICIADA",pr_motivo_inapta:void 0}:a))},className:"data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600 data-[state=checked]:text-white"}),e.jsx(Z,{htmlFor:`apta-${s.id}`,className:"text-sm font-medium cursor-pointer text-green-700",children:"APTA"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{id:`inapta-${s.id}`,checked:s.pr_status==="INAPTA",onCheckedChange:r=>{r===!0?h(i=>i.map(a=>a.id===s.id?{...a,pr_status:"INAPTA"}:a)):(F(i=>{const a={...i};return delete a[s.id],a}),h(i=>i.map(a=>a.id===s.id?{...a,pr_status:"INICIADA",pr_motivo_inapta:void 0}:a)))},className:"data-[state=checked]:bg-red-600 data-[state=checked]:border-red-600 data-[state=checked]:text-white"}),e.jsx(Z,{htmlFor:`inapta-${s.id}`,className:"text-sm font-medium cursor-pointer text-red-700",children:"INAPTA"})]})]}):we(s.pr_status)}),e.jsx(B,{children:s.pr_status==="INAPTA"&&t&&t.status!=="SINCRONIZADO"?e.jsx(pe,{type:"text",placeholder:"Justificativa (opcional)",value:M[s.id]||s.pr_motivo_inapta||"",onChange:r=>Pe(s.id,r.target.value),className:"w-full"}):e.jsx("span",{className:"text-slate-500",children:s.pr_motivo_inapta||"-"})})]},s.id))})]})})]}),e.jsx(ne,{open:y,onOpenChange:C,children:e.jsxs(ie,{className:"max-w-2xl",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-6 h-6 text-green-600"}),"Resumo do 2º Passo"]}),e.jsx(le,{children:"2º passo concluído com sucesso"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),e.jsx("p",{className:"text-base text-slate-900",children:N})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data do Protocolo"}),e.jsx("p",{className:"text-base text-slate-900",children:t&&V(t.data_inicio)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total de Receptoras"}),e.jsx("p",{className:"text-base text-slate-900 font-bold",children:c.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Confirmadas para TE"}),e.jsx("p",{className:"text-base text-green-600 font-bold",children:K.length})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-green-700 mb-2",children:"Receptoras Confirmadas"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:K.length})]}),e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-700 mb-2",children:"Receptoras Descartadas"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:ee.length})]})]}),e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Protocolo concluído!"})," As receptoras confirmadas (APTA) estão prontas para transferência de embriões."]})}),e.jsx(S,{onClick:Ae,className:"w-full bg-green-600 hover:bg-green-700",children:"OK - Voltar para Protocolos"})]})]})}),e.jsx(ne,{open:E,onOpenChange:s=>{!s&&!n&&(P(!1),I.current=!1)},children:e.jsxs(ie,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Cancelar 2º Passo?"}),e.jsxs(le,{children:["Você tem mudanças pendentes (campos não preenchidos ou receptoras não avaliadas).",e.jsx("br",{}),e.jsx("br",{}),"Ao sair, as alterações não serão salvas e você precisará iniciar o 2º passo novamente."]})]}),e.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[e.jsx(S,{variant:"outline",onClick:()=>{P(!1),I.current=!1},disabled:n,children:"Não, continuar revisão"}),e.jsx(S,{variant:"destructive",onClick:Ie,children:"Sim, sair sem salvar"})]})]})})]})}export{Ps as default};
