var vg=e=>{throw TypeError(e)};var Lf=(e,t,a)=>t.has(e)||vg("Cannot "+a);var W=(e,t,a)=>(Lf(e,t,"read from private field"),a?a.call(e):t.get(e)),pt=(e,t,a)=>t.has(e)?vg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),Ge=(e,t,a,s)=>(Lf(e,t,"write to private field"),s?s.call(e,a):t.set(e,a),a),Ma=(e,t,a)=>(Lf(e,t,"access private method"),a);var Jc=(e,t,a,s)=>({set _(n){Ge(e,t,n,a)},get _(){return W(e,t,s)}});function c1(e,t){for(var a=0;a<t.length;a++){const s=t[a];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in e)){const o=Object.getOwnPropertyDescriptor(s,n);o&&Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();var Ns=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function d1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var a=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var n=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(a,s,n.get?n:{enumerable:!0,get:function(){return e[s]}})}),a}var gy={exports:{}},Lu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u1=Symbol.for("react.transitional.element"),f1=Symbol.for("react.fragment");function xy(e,t,a){var s=null;if(a!==void 0&&(s=""+a),t.key!==void 0&&(s=""+t.key),"key"in t){a={};for(var n in t)n!=="key"&&(a[n]=t[n])}else a=t;return t=a.ref,{$$typeof:u1,type:e,key:s,ref:t!==void 0?t:null,props:a}}Lu.Fragment=f1;Lu.jsx=xy;Lu.jsxs=xy;gy.exports=Lu;var r=gy.exports,yy={exports:{}},Iu={},by={exports:{}},_y={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,Y){var $=R.length;R.push(Y);e:for(;0<$;){var E=$-1>>>1,D=R[E];if(0<n(D,Y))R[E]=Y,R[$]=D,$=E;else break e}}function a(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var Y=R[0],$=R.pop();if($!==Y){R[0]=$;e:for(var E=0,D=R.length,G=D>>>1;E<G;){var M=2*(E+1)-1,K=R[M],H=M+1,ne=R[H];if(0>n(K,$))H<D&&0>n(ne,K)?(R[E]=ne,R[H]=$,E=H):(R[E]=K,R[M]=$,E=M);else if(H<D&&0>n(ne,$))R[E]=ne,R[H]=$,E=H;else break e}}return Y}function n(R,Y){var $=R.sortIndex-Y.sortIndex;return $!==0?$:R.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],f=1,h=null,p=3,m=!1,j=!1,x=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function _(R){for(var Y=a(d);Y!==null;){if(Y.callback===null)s(d);else if(Y.startTime<=R)s(d),Y.sortIndex=Y.expirationTime,t(c,Y);else break;Y=a(d)}}function w(R){if(x=!1,_(R),!j)if(a(c)!==null)j=!0,S||(S=!0,B());else{var Y=a(d);Y!==null&&X(w,Y.startTime-R)}}var S=!1,N=-1,C=5,O=-1;function A(){return g?!0:!(e.unstable_now()-O<C)}function q(){if(g=!1,S){var R=e.unstable_now();O=R;var Y=!0;try{e:{j=!1,x&&(x=!1,v(N),N=-1),m=!0;var $=p;try{t:{for(_(R),h=a(c);h!==null&&!(h.expirationTime>R&&A());){var E=h.callback;if(typeof E=="function"){h.callback=null,p=h.priorityLevel;var D=E(h.expirationTime<=R);if(R=e.unstable_now(),typeof D=="function"){h.callback=D,_(R),Y=!0;break t}h===a(c)&&s(c),_(R)}else s(c);h=a(c)}if(h!==null)Y=!0;else{var G=a(d);G!==null&&X(w,G.startTime-R),Y=!1}}break e}finally{h=null,p=$,m=!1}Y=void 0}}finally{Y?B():S=!1}}}var B;if(typeof y=="function")B=function(){y(q)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,Q=ee.port2;ee.port1.onmessage=q,B=function(){Q.postMessage(null)}}else B=function(){b(q,0)};function X(R,Y){N=b(function(){R(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(R){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var $=p;p=Y;try{return R()}finally{p=$}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(R,Y){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var $=p;p=R;try{return Y()}finally{p=$}},e.unstable_scheduleCallback=function(R,Y,$){var E=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?E+$:E):$=E,R){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=$+D,R={id:f++,callback:Y,priorityLevel:R,startTime:$,expirationTime:D,sortIndex:-1},$>E?(R.sortIndex=$,t(d,R),a(c)===null&&R===a(d)&&(x?(v(N),N=-1):x=!0,X(w,$-E))):(R.sortIndex=D,t(c,R),j||m||(j=!0,S||(S=!0,B()))),R},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(R){var Y=p;return function(){var $=p;p=Y;try{return R.apply(this,arguments)}finally{p=$}}}})(_y);by.exports=_y;var h1=by.exports,jy={exports:{}},rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp=Symbol.for("react.transitional.element"),m1=Symbol.for("react.portal"),p1=Symbol.for("react.fragment"),v1=Symbol.for("react.strict_mode"),g1=Symbol.for("react.profiler"),x1=Symbol.for("react.consumer"),y1=Symbol.for("react.context"),b1=Symbol.for("react.forward_ref"),_1=Symbol.for("react.suspense"),j1=Symbol.for("react.memo"),wy=Symbol.for("react.lazy"),gg=Symbol.iterator;function w1(e){return e===null||typeof e!="object"?null:(e=gg&&e[gg]||e["@@iterator"],typeof e=="function"?e:null)}var Sy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ey=Object.assign,Ny={};function Xi(e,t,a){this.props=e,this.context=t,this.refs=Ny,this.updater=a||Sy}Xi.prototype.isReactComponent={};Xi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Cy(){}Cy.prototype=Xi.prototype;function gp(e,t,a){this.props=e,this.context=t,this.refs=Ny,this.updater=a||Sy}var xp=gp.prototype=new Cy;xp.constructor=gp;Ey(xp,Xi.prototype);xp.isPureReactComponent=!0;var xg=Array.isArray,Jt={H:null,A:null,T:null,S:null,V:null},Ay=Object.prototype.hasOwnProperty;function yp(e,t,a,s,n,o){return a=o.ref,{$$typeof:vp,type:e,key:t,ref:a!==void 0?a:null,props:o}}function S1(e,t){return yp(e.type,t,void 0,void 0,void 0,e.props)}function bp(e){return typeof e=="object"&&e!==null&&e.$$typeof===vp}function E1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return t[a]})}var yg=/\/+/g;function If(e,t){return typeof e=="object"&&e!==null&&e.key!=null?E1(""+e.key):t.toString(36)}function bg(){}function N1(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(bg,bg):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Ko(e,t,a,s,n){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"bigint":case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case vp:case m1:i=!0;break;case wy:return i=e._init,Ko(i(e._payload),t,a,s,n)}}if(i)return n=n(e),i=s===""?"."+If(e,0):s,xg(n)?(a="",i!=null&&(a=i.replace(yg,"$&/")+"/"),Ko(n,t,a,"",function(d){return d})):n!=null&&(bp(n)&&(n=S1(n,a+(n.key==null||e&&e.key===n.key?"":(""+n.key).replace(yg,"$&/")+"/")+i)),t.push(n)),1;i=0;var l=s===""?".":s+":";if(xg(e))for(var c=0;c<e.length;c++)s=e[c],o=l+If(s,c),i+=Ko(s,t,a,o,n);else if(c=w1(e),typeof c=="function")for(e=c.call(e),c=0;!(s=e.next()).done;)s=s.value,o=l+If(s,c++),i+=Ko(s,t,a,o,n);else if(o==="object"){if(typeof e.then=="function")return Ko(N1(e),t,a,s,n);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return i}function Wc(e,t,a){if(e==null)return e;var s=[],n=0;return Ko(e,s,"","",function(o){return t.call(a,o,n++)}),s}function C1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(a){(e._status===0||e._status===-1)&&(e._status=1,e._result=a)},function(a){(e._status===0||e._status===-1)&&(e._status=2,e._result=a)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _g=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function A1(){}rt.Children={map:Wc,forEach:function(e,t,a){Wc(e,function(){t.apply(this,arguments)},a)},count:function(e){var t=0;return Wc(e,function(){t++}),t},toArray:function(e){return Wc(e,function(t){return t})||[]},only:function(e){if(!bp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};rt.Component=Xi;rt.Fragment=p1;rt.Profiler=g1;rt.PureComponent=gp;rt.StrictMode=v1;rt.Suspense=_1;rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Jt;rt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Jt.H.useMemoCache(e)}};rt.cache=function(e){return function(){return e.apply(null,arguments)}};rt.cloneElement=function(e,t,a){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var s=Ey({},e.props),n=e.key,o=void 0;if(t!=null)for(i in t.ref!==void 0&&(o=void 0),t.key!==void 0&&(n=""+t.key),t)!Ay.call(t,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&t.ref===void 0||(s[i]=t[i]);var i=arguments.length-2;if(i===1)s.children=a;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];s.children=l}return yp(e.type,n,void 0,void 0,o,s)};rt.createContext=function(e){return e={$$typeof:y1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:x1,_context:e},e};rt.createElement=function(e,t,a){var s,n={},o=null;if(t!=null)for(s in t.key!==void 0&&(o=""+t.key),t)Ay.call(t,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(n[s]=t[s]);var i=arguments.length-2;if(i===1)n.children=a;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];n.children=l}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)n[s]===void 0&&(n[s]=i[s]);return yp(e,o,void 0,void 0,null,n)};rt.createRef=function(){return{current:null}};rt.forwardRef=function(e){return{$$typeof:b1,render:e}};rt.isValidElement=bp;rt.lazy=function(e){return{$$typeof:wy,_payload:{_status:-1,_result:e},_init:C1}};rt.memo=function(e,t){return{$$typeof:j1,type:e,compare:t===void 0?null:t}};rt.startTransition=function(e){var t=Jt.T,a={};Jt.T=a;try{var s=e(),n=Jt.S;n!==null&&n(a,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(A1,_g)}catch(o){_g(o)}finally{Jt.T=t}};rt.unstable_useCacheRefresh=function(){return Jt.H.useCacheRefresh()};rt.use=function(e){return Jt.H.use(e)};rt.useActionState=function(e,t,a){return Jt.H.useActionState(e,t,a)};rt.useCallback=function(e,t){return Jt.H.useCallback(e,t)};rt.useContext=function(e){return Jt.H.useContext(e)};rt.useDebugValue=function(){};rt.useDeferredValue=function(e,t){return Jt.H.useDeferredValue(e,t)};rt.useEffect=function(e,t,a){var s=Jt.H;if(typeof a=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(e,t)};rt.useId=function(){return Jt.H.useId()};rt.useImperativeHandle=function(e,t,a){return Jt.H.useImperativeHandle(e,t,a)};rt.useInsertionEffect=function(e,t){return Jt.H.useInsertionEffect(e,t)};rt.useLayoutEffect=function(e,t){return Jt.H.useLayoutEffect(e,t)};rt.useMemo=function(e,t){return Jt.H.useMemo(e,t)};rt.useOptimistic=function(e,t){return Jt.H.useOptimistic(e,t)};rt.useReducer=function(e,t,a){return Jt.H.useReducer(e,t,a)};rt.useRef=function(e){return Jt.H.useRef(e)};rt.useState=function(e){return Jt.H.useState(e)};rt.useSyncExternalStore=function(e,t,a){return Jt.H.useSyncExternalStore(e,t,a)};rt.useTransition=function(){return Jt.H.useTransition()};rt.version="19.1.1";jy.exports=rt;var u=jy.exports;const le=vy(u),_p=c1({__proto__:null,default:le},[u]);var Ty={exports:{}},Va={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1=u;function Ry(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Gr(){}var Ha={d:{f:Gr,r:function(){throw Error(Ry(522))},D:Gr,C:Gr,L:Gr,m:Gr,X:Gr,S:Gr,M:Gr},p:0,findDOMNode:null},R1=Symbol.for("react.portal");function D1(e,t,a){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R1,key:s==null?null:""+s,children:e,containerInfo:t,implementation:a}}var Dl=T1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Fu(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Va.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ha;Va.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Ry(299));return D1(e,t,null,a)};Va.flushSync=function(e){var t=Dl.T,a=Ha.p;try{if(Dl.T=null,Ha.p=2,e)return e()}finally{Dl.T=t,Ha.p=a,Ha.d.f()}};Va.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Ha.d.C(e,t))};Va.prefetchDNS=function(e){typeof e=="string"&&Ha.d.D(e)};Va.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var a=t.as,s=Fu(a,t.crossOrigin),n=typeof t.integrity=="string"?t.integrity:void 0,o=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;a==="style"?Ha.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:s,integrity:n,fetchPriority:o}):a==="script"&&Ha.d.X(e,{crossOrigin:s,integrity:n,fetchPriority:o,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Va.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var a=Fu(t.as,t.crossOrigin);Ha.d.M(e,{crossOrigin:a,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Ha.d.M(e)};Va.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var a=t.as,s=Fu(a,t.crossOrigin);Ha.d.L(e,a,{crossOrigin:s,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Va.preloadModule=function(e,t){if(typeof e=="string")if(t){var a=Fu(t.as,t.crossOrigin);Ha.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:a,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Ha.d.m(e)};Va.requestFormReset=function(e){Ha.d.r(e)};Va.unstable_batchedUpdates=function(e,t){return e(t)};Va.useFormState=function(e,t,a){return Dl.H.useFormState(e,t,a)};Va.useFormStatus=function(){return Dl.H.useHostTransitionStatus()};Va.version="19.1.1";function Dy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dy)}catch(e){console.error(e)}}Dy(),Ty.exports=Va;var Ro=Ty.exports;const Oy=vy(Ro);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ba=h1,zy=u,O1=Ro;function ae(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function My(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _c(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function ky(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function jg(e){if(_c(e)!==e)throw Error(ae(188))}function z1(e){var t=e.alternate;if(!t){if(t=_c(e),t===null)throw Error(ae(188));return t!==e?null:e}for(var a=e,s=t;;){var n=a.return;if(n===null)break;var o=n.alternate;if(o===null){if(s=n.return,s!==null){a=s;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===a)return jg(n),e;if(o===s)return jg(n),t;o=o.sibling}throw Error(ae(188))}if(a.return!==s.return)a=n,s=o;else{for(var i=!1,l=n.child;l;){if(l===a){i=!0,a=n,s=o;break}if(l===s){i=!0,s=n,a=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===a){i=!0,a=o,s=n;break}if(l===s){i=!0,s=o,a=n;break}l=l.sibling}if(!i)throw Error(ae(189))}}if(a.alternate!==s)throw Error(ae(190))}if(a.tag!==3)throw Error(ae(188));return a.stateNode.current===a?e:t}function Py(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Py(e),t!==null)return t;e=e.sibling}return null}var Xt=Object.assign,M1=Symbol.for("react.element"),ed=Symbol.for("react.transitional.element"),Sl=Symbol.for("react.portal"),ti=Symbol.for("react.fragment"),Ly=Symbol.for("react.strict_mode"),Bh=Symbol.for("react.profiler"),k1=Symbol.for("react.provider"),Iy=Symbol.for("react.consumer"),Sr=Symbol.for("react.context"),jp=Symbol.for("react.forward_ref"),$h=Symbol.for("react.suspense"),Hh=Symbol.for("react.suspense_list"),wp=Symbol.for("react.memo"),an=Symbol.for("react.lazy"),Vh=Symbol.for("react.activity"),P1=Symbol.for("react.memo_cache_sentinel"),wg=Symbol.iterator;function hl(e){return e===null||typeof e!="object"?null:(e=wg&&e[wg]||e["@@iterator"],typeof e=="function"?e:null)}var L1=Symbol.for("react.client.reference");function Gh(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===L1?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ti:return"Fragment";case Bh:return"Profiler";case Ly:return"StrictMode";case $h:return"Suspense";case Hh:return"SuspenseList";case Vh:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Sl:return"Portal";case Sr:return(e.displayName||"Context")+".Provider";case Iy:return(e._context.displayName||"Context")+".Consumer";case jp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wp:return t=e.displayName||null,t!==null?t:Gh(e.type)||"Memo";case an:t=e._payload,e=e._init;try{return Gh(e(t))}catch{}}return null}var El=Array.isArray,Ue=zy.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xt=O1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,no={pending:!1,data:null,method:null,action:null},Yh=[],ai=-1;function dr(e){return{current:e}}function Ca(e){0>ai||(e.current=Yh[ai],Yh[ai]=null,ai--)}function Wt(e,t){ai++,Yh[ai]=e.current,e.current=t}var nr=dr(null),Kl=dr(null),_n=dr(null),Gd=dr(null);function Yd(e,t){switch(Wt(_n,t),Wt(Kl,e),Wt(nr,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Ax(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Ax(t),e=tj(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ca(nr),Wt(nr,e)}function zi(){Ca(nr),Ca(Kl),Ca(_n)}function Qh(e){e.memoizedState!==null&&Wt(Gd,e);var t=nr.current,a=tj(t,e.type);t!==a&&(Wt(Kl,e),Wt(nr,a))}function Qd(e){Kl.current===e&&(Ca(nr),Ca(Kl)),Gd.current===e&&(Ca(Gd),nc._currentValue=no)}var Kh=Object.prototype.hasOwnProperty,Sp=ba.unstable_scheduleCallback,Ff=ba.unstable_cancelCallback,I1=ba.unstable_shouldYield,F1=ba.unstable_requestPaint,or=ba.unstable_now,q1=ba.unstable_getCurrentPriorityLevel,Fy=ba.unstable_ImmediatePriority,qy=ba.unstable_UserBlockingPriority,Kd=ba.unstable_NormalPriority,U1=ba.unstable_LowPriority,Uy=ba.unstable_IdlePriority,B1=ba.log,$1=ba.unstable_setDisableYieldValue,jc=null,us=null;function vn(e){if(typeof B1=="function"&&$1(e),us&&typeof us.setStrictMode=="function")try{us.setStrictMode(jc,e)}catch{}}var fs=Math.clz32?Math.clz32:G1,H1=Math.log,V1=Math.LN2;function G1(e){return e>>>=0,e===0?32:31-(H1(e)/V1|0)|0}var td=256,ad=4194304;function Qn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function qu(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var n=0,o=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var l=s&134217727;return l!==0?(s=l&~o,s!==0?n=Qn(s):(i&=l,i!==0?n=Qn(i):a||(a=l&~e,a!==0&&(n=Qn(a))))):(l=s&~o,l!==0?n=Qn(l):i!==0?n=Qn(i):a||(a=s&~e,a!==0&&(n=Qn(a)))),n===0?0:t!==0&&t!==n&&!(t&o)&&(o=n&-n,a=t&-t,o>=a||o===32&&(a&4194048)!==0)?t:n}function wc(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Y1(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function By(){var e=td;return td<<=1,!(td&4194048)&&(td=256),e}function $y(){var e=ad;return ad<<=1,!(ad&62914560)&&(ad=4194304),e}function qf(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Sc(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Q1(e,t,a,s,n,o){var i=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var l=e.entanglements,c=e.expirationTimes,d=e.hiddenUpdates;for(a=i&~a;0<a;){var f=31-fs(a),h=1<<f;l[f]=0,c[f]=-1;var p=d[f];if(p!==null)for(d[f]=null,f=0;f<p.length;f++){var m=p[f];m!==null&&(m.lane&=-536870913)}a&=~h}s!==0&&Hy(e,s,0),o!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=o&~(i&~t))}function Hy(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-fs(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&4194090}function Vy(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-fs(a),n=1<<s;n&t|e[s]&t&&(e[s]|=t),a&=~n}}function Ep(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Np(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Gy(){var e=xt.p;return e!==0?e:(e=window.event,e===void 0?32:uj(e.type))}function K1(e,t){var a=xt.p;try{return xt.p=e,t()}finally{xt.p=a}}var kn=Math.random().toString(36).slice(2),La="__reactFiber$"+kn,Wa="__reactProps$"+kn,Zi="__reactContainer$"+kn,Xh="__reactEvents$"+kn,X1="__reactListeners$"+kn,Z1="__reactHandles$"+kn,Sg="__reactResources$"+kn,Ec="__reactMarker$"+kn;function Cp(e){delete e[La],delete e[Wa],delete e[Xh],delete e[X1],delete e[Z1]}function si(e){var t=e[La];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Zi]||a[La]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Dx(e);e!==null;){if(a=e[La])return a;e=Dx(e)}return t}e=a,a=e.parentNode}return null}function Ji(e){if(e=e[La]||e[Zi]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Nl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(ae(33))}function hi(e){var t=e[Sg];return t||(t=e[Sg]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ea(e){e[Ec]=!0}var Yy=new Set,Qy={};function Do(e,t){Mi(e,t),Mi(e+"Capture",t)}function Mi(e,t){for(Qy[e]=t,e=0;e<t.length;e++)Yy.add(t[e])}var J1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Eg={},Ng={};function W1(e){return Kh.call(Ng,e)?!0:Kh.call(Eg,e)?!1:J1.test(e)?Ng[e]=!0:(Eg[e]=!0,!1)}function Nd(e,t,a){if(W1(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function sd(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function pr(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}var Uf,Cg;function Xo(e){if(Uf===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Uf=t&&t[1]||"",Cg=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Uf+e+Cg}var Bf=!1;function $f(e,t){if(!e||Bf)return"";Bf=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(m){var p=m}Reflect.construct(e,[],h)}else{try{h.call()}catch(m){p=m}e.call(h.prototype)}}else{try{throw Error()}catch(m){p=m}(h=e())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(m){if(m&&p&&typeof m.stack=="string")return[m.stack,p.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=s.DetermineComponentFrameRoot(),i=o[0],l=o[1];if(i&&l){var c=i.split(`
`),d=l.split(`
`);for(n=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;n<d.length&&!d[n].includes("DetermineComponentFrameRoot");)n++;if(s===c.length||n===d.length)for(s=c.length-1,n=d.length-1;1<=s&&0<=n&&c[s]!==d[n];)n--;for(;1<=s&&0<=n;s--,n--)if(c[s]!==d[n]){if(s!==1||n!==1)do if(s--,n--,0>n||c[s]!==d[n]){var f=`
`+c[s].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=s&&0<=n);break}}}finally{Bf=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Xo(a):""}function eC(e){switch(e.tag){case 26:case 27:case 5:return Xo(e.type);case 16:return Xo("Lazy");case 13:return Xo("Suspense");case 19:return Xo("SuspenseList");case 0:case 15:return $f(e.type,!1);case 11:return $f(e.type.render,!1);case 1:return $f(e.type,!0);case 31:return Xo("Activity");default:return""}}function Ag(e){try{var t="";do t+=eC(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function bs(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ky(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tC(e){var t=Ky(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,o=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xd(e){e._valueTracker||(e._valueTracker=tC(e))}function Xy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=Ky(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function Zd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var aC=/[\n"\\]/g;function ws(e){return e.replace(aC,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Zh(e,t,a,s,n,o,i,l){e.name="",i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.type=i:e.removeAttribute("type"),t!=null?i==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+bs(t)):e.value!==""+bs(t)&&(e.value=""+bs(t)):i!=="submit"&&i!=="reset"||e.removeAttribute("value"),t!=null?Jh(e,i,bs(t)):a!=null?Jh(e,i,bs(a)):s!=null&&e.removeAttribute("value"),n==null&&o!=null&&(e.defaultChecked=!!o),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+bs(l):e.removeAttribute("name")}function Zy(e,t,a,s,n,o,i,l){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||a!=null){if(!(o!=="submit"&&o!=="reset"||t!=null))return;a=a!=null?""+bs(a):"",t=t!=null?""+bs(t):a,l||t===e.value||(e.value=t),e.defaultValue=t}s=s??n,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=l?e.checked:!!s,e.defaultChecked=!!s,i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.name=i)}function Jh(e,t,a){t==="number"&&Zd(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function mi(e,t,a,s){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&s&&(e[a].defaultSelected=!0)}else{for(a=""+bs(a),t=null,n=0;n<e.length;n++){if(e[n].value===a){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Jy(e,t,a){if(t!=null&&(t=""+bs(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+bs(a):""}function Wy(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(ae(92));if(El(s)){if(1<s.length)throw Error(ae(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=bs(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s)}function ki(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var sC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tg(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||sC.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function eb(e,t,a){if(t!=null&&typeof t!="object")throw Error(ae(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var n in t)s=t[n],t.hasOwnProperty(n)&&a[n]!==s&&Tg(e,n,s)}else for(var o in t)t.hasOwnProperty(o)&&Tg(e,o,t[o])}function Ap(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cd(e){return nC.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Wh=null;function Tp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ri=null,pi=null;function Rg(e){var t=Ji(e);if(t&&(e=t.stateNode)){var a=e[Wa]||null;e:switch(e=t.stateNode,t.type){case"input":if(Zh(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ws(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var n=s[Wa]||null;if(!n)throw Error(ae(90));Zh(s,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&Xy(s)}break e;case"textarea":Jy(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&mi(e,!!a.multiple,t,!1)}}}var Hf=!1;function tb(e,t,a){if(Hf)return e(t,a);Hf=!0;try{var s=e(t);return s}finally{if(Hf=!1,(ri!==null||pi!==null)&&(Xu(),ri&&(t=ri,e=pi,pi=ri=null,Rg(t),e)))for(t=0;t<e.length;t++)Rg(e[t])}}function Xl(e,t){var a=e.stateNode;if(a===null)return null;var s=a[Wa]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(ae(231,t,typeof a));return a}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),em=!1;if(Or)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){em=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{em=!1}var gn=null,Rp=null,Ad=null;function ab(){if(Ad)return Ad;var e,t=Rp,a=t.length,s,n="value"in gn?gn.value:gn.textContent,o=n.length;for(e=0;e<a&&t[e]===n[e];e++);var i=a-e;for(s=1;s<=i&&t[a-s]===n[o-s];s++);return Ad=n.slice(e,1<s?1-s:void 0)}function Td(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function rd(){return!0}function Dg(){return!1}function as(e){function t(a,s,n,o,i){this._reactName=a,this._targetInst=n,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(a=e[l],this[l]=a?a(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?rd:Dg,this.isPropagationStopped=Dg,this}return Xt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=rd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=rd)},persist:function(){},isPersistent:rd}),t}var Oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uu=as(Oo),Nc=Xt({},Oo,{view:0,detail:0}),oC=as(Nc),Vf,Gf,pl,Bu=Xt({},Nc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pl&&(pl&&e.type==="mousemove"?(Vf=e.screenX-pl.screenX,Gf=e.screenY-pl.screenY):Gf=Vf=0,pl=e),Vf)},movementY:function(e){return"movementY"in e?e.movementY:Gf}}),Og=as(Bu),iC=Xt({},Bu,{dataTransfer:0}),lC=as(iC),cC=Xt({},Nc,{relatedTarget:0}),Yf=as(cC),dC=Xt({},Oo,{animationName:0,elapsedTime:0,pseudoElement:0}),uC=as(dC),fC=Xt({},Oo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hC=as(fC),mC=Xt({},Oo,{data:0}),zg=as(mC),pC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gC[e])?!!t[e]:!1}function Dp(){return xC}var yC=Xt({},Nc,{key:function(e){if(e.key){var t=pC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Td(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dp,charCode:function(e){return e.type==="keypress"?Td(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Td(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bC=as(yC),_C=Xt({},Bu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mg=as(_C),jC=Xt({},Nc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dp}),wC=as(jC),SC=Xt({},Oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),EC=as(SC),NC=Xt({},Bu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),CC=as(NC),AC=Xt({},Oo,{newState:0,oldState:0}),TC=as(AC),RC=[9,13,27,32],Op=Or&&"CompositionEvent"in window,Ol=null;Or&&"documentMode"in document&&(Ol=document.documentMode);var DC=Or&&"TextEvent"in window&&!Ol,sb=Or&&(!Op||Ol&&8<Ol&&11>=Ol),kg=" ",Pg=!1;function rb(e,t){switch(e){case"keyup":return RC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nb(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ni=!1;function OC(e,t){switch(e){case"compositionend":return nb(t);case"keypress":return t.which!==32?null:(Pg=!0,kg);case"textInput":return e=t.data,e===kg&&Pg?null:e;default:return null}}function zC(e,t){if(ni)return e==="compositionend"||!Op&&rb(e,t)?(e=ab(),Ad=Rp=gn=null,ni=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sb&&t.locale!=="ko"?null:t.data;default:return null}}var MC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!MC[e.type]:t==="textarea"}function ob(e,t,a,s){ri?pi?pi.push(s):pi=[s]:ri=s,t=pu(t,"onChange"),0<t.length&&(a=new Uu("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var zl=null,Zl=null;function kC(e){J_(e,0)}function $u(e){var t=Nl(e);if(Xy(t))return e}function Ig(e,t){if(e==="change")return t}var ib=!1;if(Or){var Qf;if(Or){var Kf="oninput"in document;if(!Kf){var Fg=document.createElement("div");Fg.setAttribute("oninput","return;"),Kf=typeof Fg.oninput=="function"}Qf=Kf}else Qf=!1;ib=Qf&&(!document.documentMode||9<document.documentMode)}function qg(){zl&&(zl.detachEvent("onpropertychange",lb),Zl=zl=null)}function lb(e){if(e.propertyName==="value"&&$u(Zl)){var t=[];ob(t,Zl,e,Tp(e)),tb(kC,t)}}function PC(e,t,a){e==="focusin"?(qg(),zl=t,Zl=a,zl.attachEvent("onpropertychange",lb)):e==="focusout"&&qg()}function LC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $u(Zl)}function IC(e,t){if(e==="click")return $u(t)}function FC(e,t){if(e==="input"||e==="change")return $u(t)}function qC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vs=typeof Object.is=="function"?Object.is:qC;function Jl(e,t){if(vs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var n=a[s];if(!Kh.call(t,n)||!vs(e[n],t[n]))return!1}return!0}function Ug(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bg(e,t){var a=Ug(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ug(a)}}function cb(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?cb(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function db(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Zd(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Zd(e.document)}return t}function zp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var UC=Or&&"documentMode"in document&&11>=document.documentMode,oi=null,tm=null,Ml=null,am=!1;function $g(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;am||oi==null||oi!==Zd(s)||(s=oi,"selectionStart"in s&&zp(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ml&&Jl(Ml,s)||(Ml=s,s=pu(tm,"onSelect"),0<s.length&&(t=new Uu("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=oi)))}function Vn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var ii={animationend:Vn("Animation","AnimationEnd"),animationiteration:Vn("Animation","AnimationIteration"),animationstart:Vn("Animation","AnimationStart"),transitionrun:Vn("Transition","TransitionRun"),transitionstart:Vn("Transition","TransitionStart"),transitioncancel:Vn("Transition","TransitionCancel"),transitionend:Vn("Transition","TransitionEnd")},Xf={},ub={};Or&&(ub=document.createElement("div").style,"AnimationEvent"in window||(delete ii.animationend.animation,delete ii.animationiteration.animation,delete ii.animationstart.animation),"TransitionEvent"in window||delete ii.transitionend.transition);function zo(e){if(Xf[e])return Xf[e];if(!ii[e])return e;var t=ii[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in ub)return Xf[e]=t[a];return e}var fb=zo("animationend"),hb=zo("animationiteration"),mb=zo("animationstart"),BC=zo("transitionrun"),$C=zo("transitionstart"),HC=zo("transitioncancel"),pb=zo("transitionend"),vb=new Map,sm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sm.push("scrollEnd");function Gs(e,t){vb.set(e,t),Do(t,[e])}var Hg=new WeakMap;function Ss(e,t){if(typeof e=="object"&&e!==null){var a=Hg.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Ag(t)},Hg.set(e,t),t)}return{value:e,source:t,stack:Ag(t)}}var ys=[],li=0,Mp=0;function Hu(){for(var e=li,t=Mp=li=0;t<e;){var a=ys[t];ys[t++]=null;var s=ys[t];ys[t++]=null;var n=ys[t];ys[t++]=null;var o=ys[t];if(ys[t++]=null,s!==null&&n!==null){var i=s.pending;i===null?n.next=n:(n.next=i.next,i.next=n),s.pending=n}o!==0&&gb(a,n,o)}}function Vu(e,t,a,s){ys[li++]=e,ys[li++]=t,ys[li++]=a,ys[li++]=s,Mp|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function kp(e,t,a,s){return Vu(e,t,a,s),Jd(e)}function Wi(e,t){return Vu(e,null,null,t),Jd(e)}function gb(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var n=!1,o=e.return;o!==null;)o.childLanes|=a,s=o.alternate,s!==null&&(s.childLanes|=a),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(n=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,n&&t!==null&&(n=31-fs(a),e=o.hiddenUpdates,s=e[n],s===null?e[n]=[t]:s.push(t),t.lane=a|536870912),o):null}function Jd(e){if(50<Hl)throw Hl=0,Sm=null,Error(ae(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ci={};function VC(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(e,t,a,s){return new VC(e,t,a,s)}function Pp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tr(e,t){var a=e.alternate;return a===null?(a=ds(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function xb(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Rd(e,t,a,s,n,o){var i=0;if(s=e,typeof e=="function")Pp(e)&&(i=1);else if(typeof e=="string")i=YA(e,a,nr.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Vh:return e=ds(31,a,t,n),e.elementType=Vh,e.lanes=o,e;case ti:return oo(a.children,n,o,t);case Ly:i=8,n|=24;break;case Bh:return e=ds(12,a,t,n|2),e.elementType=Bh,e.lanes=o,e;case $h:return e=ds(13,a,t,n),e.elementType=$h,e.lanes=o,e;case Hh:return e=ds(19,a,t,n),e.elementType=Hh,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k1:case Sr:i=10;break e;case Iy:i=9;break e;case jp:i=11;break e;case wp:i=14;break e;case an:i=16,s=null;break e}i=29,a=Error(ae(130,e===null?"null":typeof e,"")),s=null}return t=ds(i,a,t,n),t.elementType=e,t.type=s,t.lanes=o,t}function oo(e,t,a,s){return e=ds(7,e,s,t),e.lanes=a,e}function Zf(e,t,a){return e=ds(6,e,null,t),e.lanes=a,e}function Jf(e,t,a){return t=ds(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var di=[],ui=0,Wd=null,eu=0,_s=[],js=0,io=null,Er=1,Nr="";function Kn(e,t){di[ui++]=eu,di[ui++]=Wd,Wd=e,eu=t}function yb(e,t,a){_s[js++]=Er,_s[js++]=Nr,_s[js++]=io,io=e;var s=Er;e=Nr;var n=32-fs(s)-1;s&=~(1<<n),a+=1;var o=32-fs(t)+n;if(30<o){var i=n-n%5;o=(s&(1<<i)-1).toString(32),s>>=i,n-=i,Er=1<<32-fs(t)+n|a<<n|s,Nr=o+e}else Er=1<<o|a<<n|s,Nr=e}function Lp(e){e.return!==null&&(Kn(e,1),yb(e,1,0))}function Ip(e){for(;e===Wd;)Wd=di[--ui],di[ui]=null,eu=di[--ui],di[ui]=null;for(;e===io;)io=_s[--js],_s[js]=null,Nr=_s[--js],_s[js]=null,Er=_s[--js],_s[js]=null}var $a=null,ia=null,gt=!1,lo=null,tr=!1,rm=Error(ae(519));function mo(e){var t=Error(ae(418,""));throw Wl(Ss(t,e)),rm}function Vg(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[La]=e,t[Wa]=s,a){case"dialog":lt("cancel",t),lt("close",t);break;case"iframe":case"object":case"embed":lt("load",t);break;case"video":case"audio":for(a=0;a<ac.length;a++)lt(ac[a],t);break;case"source":lt("error",t);break;case"img":case"image":case"link":lt("error",t),lt("load",t);break;case"details":lt("toggle",t);break;case"input":lt("invalid",t),Zy(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),Xd(t);break;case"select":lt("invalid",t);break;case"textarea":lt("invalid",t),Wy(t,s.value,s.defaultValue,s.children),Xd(t)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||ej(t.textContent,a)?(s.popover!=null&&(lt("beforetoggle",t),lt("toggle",t)),s.onScroll!=null&&lt("scroll",t),s.onScrollEnd!=null&&lt("scrollend",t),s.onClick!=null&&(t.onclick=Wu),t=!0):t=!1,t||mo(e)}function Gg(e){for($a=e.return;$a;)switch($a.tag){case 5:case 13:tr=!1;return;case 27:case 3:tr=!0;return;default:$a=$a.return}}function vl(e){if(e!==$a)return!1;if(!gt)return Gg(e),gt=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Rm(e.type,e.memoizedProps)),a=!a),a&&ia&&mo(e),Gg(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){ia=Bs(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}ia=null}}else t===27?(t=ia,Pn(e.type)?(e=zm,zm=null,ia=e):ia=t):ia=$a?Bs(e.stateNode.nextSibling):null;return!0}function Cc(){ia=$a=null,gt=!1}function Yg(){var e=lo;return e!==null&&(Xa===null?Xa=e:Xa.push.apply(Xa,e),lo=null),e}function Wl(e){lo===null?lo=[e]:lo.push(e)}var nm=dr(null),Mo=null,Cr=null;function nn(e,t,a){Wt(nm,t._currentValue),t._currentValue=a}function Rr(e){e._currentValue=nm.current,Ca(nm)}function om(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function im(e,t,a,s){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var o=n.dependencies;if(o!==null){var i=n.child;o=o.firstContext;e:for(;o!==null;){var l=o;o=n;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=a,l=o.alternate,l!==null&&(l.lanes|=a),om(o.return,a,e),s||(i=null);break e}o=l.next}}else if(n.tag===18){if(i=n.return,i===null)throw Error(ae(341));i.lanes|=a,o=i.alternate,o!==null&&(o.lanes|=a),om(i,a,e),i=null}else i=n.child;if(i!==null)i.return=n;else for(i=n;i!==null;){if(i===e){i=null;break}if(n=i.sibling,n!==null){n.return=i.return,i=n;break}i=i.return}n=i}}function Ac(e,t,a,s){e=null;for(var n=t,o=!1;n!==null;){if(!o){if(n.flags&524288)o=!0;else if(n.flags&262144)break}if(n.tag===10){var i=n.alternate;if(i===null)throw Error(ae(387));if(i=i.memoizedProps,i!==null){var l=n.type;vs(n.pendingProps.value,i.value)||(e!==null?e.push(l):e=[l])}}else if(n===Gd.current){if(i=n.alternate,i===null)throw Error(ae(387));i.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(nc):e=[nc])}n=n.return}e!==null&&im(t,e,a,s),t.flags|=262144}function tu(e){for(e=e.firstContext;e!==null;){if(!vs(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function po(e){Mo=e,Cr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ia(e){return bb(Mo,e)}function nd(e,t){return Mo===null&&po(e),bb(e,t)}function bb(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Cr===null){if(e===null)throw Error(ae(308));Cr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Cr=Cr.next=t;return a}var GC=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},YC=ba.unstable_scheduleCallback,QC=ba.unstable_NormalPriority,xa={$$typeof:Sr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fp(){return{controller:new GC,data:new Map,refCount:0}}function Tc(e){e.refCount--,e.refCount===0&&YC(QC,function(){e.controller.abort()})}var kl=null,lm=0,Pi=0,vi=null;function KC(e,t){if(kl===null){var a=kl=[];lm=0,Pi=lv(),vi={status:"pending",value:void 0,then:function(s){a.push(s)}}}return lm++,t.then(Qg,Qg),t}function Qg(){if(--lm===0&&kl!==null){vi!==null&&(vi.status="fulfilled");var e=kl;kl=null,Pi=0,vi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function XC(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(n){a.push(n)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var n=0;n<a.length;n++)(0,a[n])(t)},function(n){for(s.status="rejected",s.reason=n,n=0;n<a.length;n++)(0,a[n])(void 0)}),s}var Kg=Ue.S;Ue.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&KC(e,t),Kg!==null&&Kg(e,t)};var co=dr(null);function qp(){var e=co.current;return e!==null?e:Vt.pooledCache}function Dd(e,t){t===null?Wt(co,co.current):Wt(co,t.pool)}function _b(){var e=qp();return e===null?null:{parent:xa._currentValue,pool:e}}var Rc=Error(ae(460)),jb=Error(ae(474)),Gu=Error(ae(542)),cm={then:function(){}};function Xg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function od(){}function wb(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(od,od),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Jg(e),e;default:if(typeof t.status=="string")t.then(od,od);else{if(e=Vt,e!==null&&100<e.shellSuspendCounter)throw Error(ae(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=s}},function(s){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Jg(e),e}throw Pl=t,Rc}}var Pl=null;function Zg(){if(Pl===null)throw Error(ae(459));var e=Pl;return Pl=null,e}function Jg(e){if(e===Rc||e===Gu)throw Error(ae(483))}var sn=!1;function Up(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function jn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wn(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Ct&2){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,t=Jd(e),gb(e,null,a),t}return Vu(e,s,t,a),Jd(e)}function Ll(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Vy(e,a)}}function Wf(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var n=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var i={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};o===null?n=o=i:o=o.next=i,a=a.next}while(a!==null);o===null?n=o=t:o=o.next=t}else n=o=t;a={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var um=!1;function Il(){if(um){var e=vi;if(e!==null)throw e}}function Fl(e,t,a,s){um=!1;var n=e.updateQueue;sn=!1;var o=n.firstBaseUpdate,i=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==i&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(o!==null){var h=n.baseState;i=0,f=d=c=null,l=o;do{var p=l.lane&-536870913,m=p!==l.lane;if(m?(ut&p)===p:(s&p)===p){p!==0&&p===Pi&&(um=!0),f!==null&&(f=f.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var j=e,x=l;p=t;var g=a;switch(x.tag){case 1:if(j=x.payload,typeof j=="function"){h=j.call(g,h,p);break e}h=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=x.payload,p=typeof j=="function"?j.call(g,h,p):j,p==null)break e;h=Xt({},h,p);break e;case 2:sn=!0}}p=l.callback,p!==null&&(e.flags|=64,m&&(e.flags|=8192),m=n.callbacks,m===null?n.callbacks=[p]:m.push(p))}else m={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=m,c=h):f=f.next=m,i|=p;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;m=l,l=m.next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}while(!0);f===null&&(c=h),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=f,o===null&&(n.shared.lanes=0),On|=i,e.lanes=i,e.memoizedState=h}}function Sb(e,t){if(typeof e!="function")throw Error(ae(191,e));e.call(t)}function Eb(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Sb(a[e],t)}var Li=dr(null),au=dr(0);function Wg(e,t){e=kr,Wt(au,e),Wt(Li,t),kr=e|t.baseLanes}function fm(){Wt(au,kr),Wt(Li,Li.current)}function Bp(){kr=au.current,Ca(Li),Ca(au)}var Rn=0,nt=null,Lt=null,ha=null,su=!1,gi=!1,vo=!1,ru=0,ec=0,xi=null,ZC=0;function da(){throw Error(ae(321))}function $p(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!vs(e[a],t[a]))return!1;return!0}function Hp(e,t,a,s,n,o){return Rn=o,nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ue.H=e===null||e.memoizedState===null?a_:s_,vo=!1,o=a(s,n),vo=!1,gi&&(o=Cb(t,a,s,n)),Nb(e),o}function Nb(e){Ue.H=nu;var t=Lt!==null&&Lt.next!==null;if(Rn=0,ha=Lt=nt=null,su=!1,ec=0,xi=null,t)throw Error(ae(300));e===null||Na||(e=e.dependencies,e!==null&&tu(e)&&(Na=!0))}function Cb(e,t,a,s){nt=e;var n=0;do{if(gi&&(xi=null),ec=0,gi=!1,25<=n)throw Error(ae(301));if(n+=1,ha=Lt=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}Ue.H=rA,o=t(a,s)}while(gi);return o}function JC(){var e=Ue.H,t=e.useState()[0];return t=typeof t.then=="function"?Dc(t):t,e=e.useState()[0],(Lt!==null?Lt.memoizedState:null)!==e&&(nt.flags|=1024),t}function Vp(){var e=ru!==0;return ru=0,e}function Gp(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Yp(e){if(su){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}su=!1}Rn=0,ha=Lt=nt=null,gi=!1,ec=ru=0,xi=null}function Qa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ha===null?nt.memoizedState=ha=e:ha=ha.next=e,ha}function ma(){if(Lt===null){var e=nt.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var t=ha===null?nt.memoizedState:ha.next;if(t!==null)ha=t,Lt=e;else{if(e===null)throw nt.alternate===null?Error(ae(467)):Error(ae(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},ha===null?nt.memoizedState=ha=e:ha=ha.next=e}return ha}function Qp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dc(e){var t=ec;return ec+=1,xi===null&&(xi=[]),e=wb(xi,e,t),t=nt,(ha===null?t.memoizedState:ha.next)===null&&(t=t.alternate,Ue.H=t===null||t.memoizedState===null?a_:s_),e}function Yu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Dc(e);if(e.$$typeof===Sr)return Ia(e)}throw Error(ae(438,String(e)))}function Kp(e){var t=null,a=nt.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=nt.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Qp(),nt.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=P1;return t.index++,a}function zr(e,t){return typeof t=="function"?t(e):t}function Od(e){var t=ma();return Xp(t,Lt,e)}function Xp(e,t,a){var s=e.queue;if(s===null)throw Error(ae(311));s.lastRenderedReducer=a;var n=e.baseQueue,o=s.pending;if(o!==null){if(n!==null){var i=n.next;n.next=o.next,o.next=i}t.baseQueue=n=o,s.pending=null}if(o=e.baseState,n===null)e.memoizedState=o;else{t=n.next;var l=i=null,c=null,d=t,f=!1;do{var h=d.lane&-536870913;if(h!==d.lane?(ut&h)===h:(Rn&h)===h){var p=d.revertLane;if(p===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Pi&&(f=!0);else if((Rn&p)===p){d=d.next,p===Pi&&(f=!0);continue}else h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=h,i=o):c=c.next=h,nt.lanes|=p,On|=p;h=d.action,vo&&a(o,h),o=d.hasEagerState?d.eagerState:a(o,h)}else p={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=p,i=o):c=c.next=p,nt.lanes|=h,On|=h;d=d.next}while(d!==null&&d!==t);if(c===null?i=o:c.next=l,!vs(o,e.memoizedState)&&(Na=!0,f&&(a=vi,a!==null)))throw a;e.memoizedState=o,e.baseState=i,e.baseQueue=c,s.lastRenderedState=o}return n===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function eh(e){var t=ma(),a=t.queue;if(a===null)throw Error(ae(311));a.lastRenderedReducer=e;var s=a.dispatch,n=a.pending,o=t.memoizedState;if(n!==null){a.pending=null;var i=n=n.next;do o=e(o,i.action),i=i.next;while(i!==n);vs(o,t.memoizedState)||(Na=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),a.lastRenderedState=o}return[o,s]}function Ab(e,t,a){var s=nt,n=ma(),o=gt;if(o){if(a===void 0)throw Error(ae(407));a=a()}else a=t();var i=!vs((Lt||n).memoizedState,a);i&&(n.memoizedState=a,Na=!0),n=n.queue;var l=Db.bind(null,s,n,e);if(Oc(2048,8,l,[e]),n.getSnapshot!==t||i||ha!==null&&ha.memoizedState.tag&1){if(s.flags|=2048,Ii(9,Qu(),Rb.bind(null,s,n,a,t),null),Vt===null)throw Error(ae(349));o||Rn&124||Tb(s,t,a)}return a}function Tb(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=nt.updateQueue,t===null?(t=Qp(),nt.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Rb(e,t,a,s){t.value=a,t.getSnapshot=s,Ob(t)&&zb(e)}function Db(e,t,a){return a(function(){Ob(t)&&zb(e)})}function Ob(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!vs(e,a)}catch{return!0}}function zb(e){var t=Wi(e,2);t!==null&&ms(t,e,2)}function hm(e){var t=Qa();if(typeof e=="function"){var a=e;if(e=a(),vo){vn(!0);try{a()}finally{vn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:e},t}function Mb(e,t,a,s){return e.baseState=a,Xp(e,Lt,typeof s=="function"?s:zr)}function WC(e,t,a,s,n){if(Ku(e))throw Error(ae(485));if(e=t.action,e!==null){var o={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(i){o.listeners.push(i)}};Ue.T!==null?a(!0):o.isTransition=!1,s(o),a=t.pending,a===null?(o.next=t.pending=o,kb(t,o)):(o.next=a.next,t.pending=a.next=o)}}function kb(e,t){var a=t.action,s=t.payload,n=e.state;if(t.isTransition){var o=Ue.T,i={};Ue.T=i;try{var l=a(n,s),c=Ue.S;c!==null&&c(i,l),ex(e,t,l)}catch(d){mm(e,t,d)}finally{Ue.T=o}}else try{o=a(n,s),ex(e,t,o)}catch(d){mm(e,t,d)}}function ex(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){tx(e,t,s)},function(s){return mm(e,t,s)}):tx(e,t,a)}function tx(e,t,a){t.status="fulfilled",t.value=a,Pb(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,kb(e,a)))}function mm(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,Pb(t),t=t.next;while(t!==s)}e.action=null}function Pb(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Lb(e,t){return t}function ax(e,t){if(gt){var a=Vt.formState;if(a!==null){e:{var s=nt;if(gt){if(ia){t:{for(var n=ia,o=tr;n.nodeType!==8;){if(!o){n=null;break t}if(n=Bs(n.nextSibling),n===null){n=null;break t}}o=n.data,n=o==="F!"||o==="F"?n:null}if(n){ia=Bs(n.nextSibling),s=n.data==="F!";break e}}mo(s)}s=!1}s&&(t=a[0])}}return a=Qa(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lb,lastRenderedState:t},a.queue=s,a=Wb.bind(null,nt,s),s.dispatch=a,s=hm(!1),o=ev.bind(null,nt,!1,s.queue),s=Qa(),n={state:t,dispatch:null,action:e,pending:null},s.queue=n,a=WC.bind(null,nt,n,o,a),n.dispatch=a,s.memoizedState=e,[t,a,!1]}function sx(e){var t=ma();return Ib(t,Lt,e)}function Ib(e,t,a){if(t=Xp(e,t,Lb)[0],e=Od(zr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Dc(t)}catch(i){throw i===Rc?Gu:i}else s=t;t=ma();var n=t.queue,o=n.dispatch;return a!==t.memoizedState&&(nt.flags|=2048,Ii(9,Qu(),eA.bind(null,n,a),null)),[s,o,e]}function eA(e,t){e.action=t}function rx(e){var t=ma(),a=Lt;if(a!==null)return Ib(t,a,e);ma(),t=t.memoizedState,a=ma();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Ii(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=nt.updateQueue,t===null&&(t=Qp(),nt.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Qu(){return{destroy:void 0,resource:void 0}}function Fb(){return ma().memoizedState}function zd(e,t,a,s){var n=Qa();s=s===void 0?null:s,nt.flags|=e,n.memoizedState=Ii(1|t,Qu(),a,s)}function Oc(e,t,a,s){var n=ma();s=s===void 0?null:s;var o=n.memoizedState.inst;Lt!==null&&s!==null&&$p(s,Lt.memoizedState.deps)?n.memoizedState=Ii(t,o,a,s):(nt.flags|=e,n.memoizedState=Ii(1|t,o,a,s))}function nx(e,t){zd(8390656,8,e,t)}function qb(e,t){Oc(2048,8,e,t)}function Ub(e,t){return Oc(4,2,e,t)}function Bb(e,t){return Oc(4,4,e,t)}function $b(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Hb(e,t,a){a=a!=null?a.concat([e]):null,Oc(4,4,$b.bind(null,t,e),a)}function Zp(){}function Vb(e,t){var a=ma();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&$p(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function Gb(e,t){var a=ma();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&$p(t,s[1]))return s[0];if(s=e(),vo){vn(!0);try{e()}finally{vn(!1)}}return a.memoizedState=[s,t],s}function Jp(e,t,a){return a===void 0||Rn&1073741824?e.memoizedState=t:(e.memoizedState=a,e=P_(),nt.lanes|=e,On|=e,a)}function Yb(e,t,a,s){return vs(a,t)?a:Li.current!==null?(e=Jp(e,a,s),vs(e,t)||(Na=!0),e):Rn&42?(e=P_(),nt.lanes|=e,On|=e,t):(Na=!0,e.memoizedState=a)}function Qb(e,t,a,s,n){var o=xt.p;xt.p=o!==0&&8>o?o:8;var i=Ue.T,l={};Ue.T=l,ev(e,!1,t,a);try{var c=n(),d=Ue.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=XC(c,s);ql(e,t,f,hs(e))}else ql(e,t,s,hs(e))}catch(h){ql(e,t,{then:function(){},status:"rejected",reason:h},hs())}finally{xt.p=o,Ue.T=i}}function tA(){}function pm(e,t,a,s){if(e.tag!==5)throw Error(ae(476));var n=Kb(e).queue;Qb(e,n,t,no,a===null?tA:function(){return Xb(e),a(s)})}function Kb(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:no,baseState:no,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:no},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Xb(e){var t=Kb(e).next.queue;ql(e,t,{},hs())}function Wp(){return Ia(nc)}function Zb(){return ma().memoizedState}function Jb(){return ma().memoizedState}function aA(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=hs();e=jn(a);var s=wn(t,e,a);s!==null&&(ms(s,t,a),Ll(s,t,a)),t={cache:Fp()},e.payload=t;return}t=t.return}}function sA(e,t,a){var s=hs();a={lane:s,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ku(e)?e_(t,a):(a=kp(e,t,a,s),a!==null&&(ms(a,e,s),t_(a,t,s)))}function Wb(e,t,a){var s=hs();ql(e,t,a,s)}function ql(e,t,a,s){var n={lane:s,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ku(e))e_(t,n);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,a);if(n.hasEagerState=!0,n.eagerState=l,vs(l,i))return Vu(e,t,n,0),Vt===null&&Hu(),!1}catch{}finally{}if(a=kp(e,t,n,s),a!==null)return ms(a,e,s),t_(a,t,s),!0}return!1}function ev(e,t,a,s){if(s={lane:2,revertLane:lv(),action:s,hasEagerState:!1,eagerState:null,next:null},Ku(e)){if(t)throw Error(ae(479))}else t=kp(e,a,s,2),t!==null&&ms(t,e,2)}function Ku(e){var t=e.alternate;return e===nt||t!==null&&t===nt}function e_(e,t){gi=su=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function t_(e,t,a){if(a&4194048){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Vy(e,a)}}var nu={readContext:Ia,use:Yu,useCallback:da,useContext:da,useEffect:da,useImperativeHandle:da,useLayoutEffect:da,useInsertionEffect:da,useMemo:da,useReducer:da,useRef:da,useState:da,useDebugValue:da,useDeferredValue:da,useTransition:da,useSyncExternalStore:da,useId:da,useHostTransitionStatus:da,useFormState:da,useActionState:da,useOptimistic:da,useMemoCache:da,useCacheRefresh:da},a_={readContext:Ia,use:Yu,useCallback:function(e,t){return Qa().memoizedState=[e,t===void 0?null:t],e},useContext:Ia,useEffect:nx,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,zd(4194308,4,$b.bind(null,t,e),a)},useLayoutEffect:function(e,t){return zd(4194308,4,e,t)},useInsertionEffect:function(e,t){zd(4,2,e,t)},useMemo:function(e,t){var a=Qa();t=t===void 0?null:t;var s=e();if(vo){vn(!0);try{e()}finally{vn(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=Qa();if(a!==void 0){var n=a(t);if(vo){vn(!0);try{a(t)}finally{vn(!1)}}}else n=t;return s.memoizedState=s.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=sA.bind(null,nt,e),[s.memoizedState,e]},useRef:function(e){var t=Qa();return e={current:e},t.memoizedState=e},useState:function(e){e=hm(e);var t=e.queue,a=Wb.bind(null,nt,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Zp,useDeferredValue:function(e,t){var a=Qa();return Jp(a,e,t)},useTransition:function(){var e=hm(!1);return e=Qb.bind(null,nt,e.queue,!0,!1),Qa().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=nt,n=Qa();if(gt){if(a===void 0)throw Error(ae(407));a=a()}else{if(a=t(),Vt===null)throw Error(ae(349));ut&124||Tb(s,t,a)}n.memoizedState=a;var o={value:a,getSnapshot:t};return n.queue=o,nx(Db.bind(null,s,o,e),[e]),s.flags|=2048,Ii(9,Qu(),Rb.bind(null,s,o,a,t),null),a},useId:function(){var e=Qa(),t=Vt.identifierPrefix;if(gt){var a=Nr,s=Er;a=(s&~(1<<32-fs(s)-1)).toString(32)+a,t=""+t+"R"+a,a=ru++,0<a&&(t+="H"+a.toString(32)),t+=""}else a=ZC++,t=""+t+"r"+a.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Wp,useFormState:ax,useActionState:ax,useOptimistic:function(e){var t=Qa();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=ev.bind(null,nt,!0,a),a.dispatch=t,[e,t]},useMemoCache:Kp,useCacheRefresh:function(){return Qa().memoizedState=aA.bind(null,nt)}},s_={readContext:Ia,use:Yu,useCallback:Vb,useContext:Ia,useEffect:qb,useImperativeHandle:Hb,useInsertionEffect:Ub,useLayoutEffect:Bb,useMemo:Gb,useReducer:Od,useRef:Fb,useState:function(){return Od(zr)},useDebugValue:Zp,useDeferredValue:function(e,t){var a=ma();return Yb(a,Lt.memoizedState,e,t)},useTransition:function(){var e=Od(zr)[0],t=ma().memoizedState;return[typeof e=="boolean"?e:Dc(e),t]},useSyncExternalStore:Ab,useId:Zb,useHostTransitionStatus:Wp,useFormState:sx,useActionState:sx,useOptimistic:function(e,t){var a=ma();return Mb(a,Lt,e,t)},useMemoCache:Kp,useCacheRefresh:Jb},rA={readContext:Ia,use:Yu,useCallback:Vb,useContext:Ia,useEffect:qb,useImperativeHandle:Hb,useInsertionEffect:Ub,useLayoutEffect:Bb,useMemo:Gb,useReducer:eh,useRef:Fb,useState:function(){return eh(zr)},useDebugValue:Zp,useDeferredValue:function(e,t){var a=ma();return Lt===null?Jp(a,e,t):Yb(a,Lt.memoizedState,e,t)},useTransition:function(){var e=eh(zr)[0],t=ma().memoizedState;return[typeof e=="boolean"?e:Dc(e),t]},useSyncExternalStore:Ab,useId:Zb,useHostTransitionStatus:Wp,useFormState:rx,useActionState:rx,useOptimistic:function(e,t){var a=ma();return Lt!==null?Mb(a,Lt,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Kp,useCacheRefresh:Jb},yi=null,tc=0;function id(e){var t=tc;return tc+=1,yi===null&&(yi=[]),wb(yi,e,t)}function gl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ld(e,t){throw t.$$typeof===M1?Error(ae(525)):(e=Object.prototype.toString.call(t),Error(ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ox(e){var t=e._init;return t(e._payload)}function r_(e){function t(b,v){if(e){var y=b.deletions;y===null?(b.deletions=[v],b.flags|=16):y.push(v)}}function a(b,v){if(!e)return null;for(;v!==null;)t(b,v),v=v.sibling;return null}function s(b){for(var v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function n(b,v){return b=Tr(b,v),b.index=0,b.sibling=null,b}function o(b,v,y){return b.index=y,e?(y=b.alternate,y!==null?(y=y.index,y<v?(b.flags|=67108866,v):y):(b.flags|=67108866,v)):(b.flags|=1048576,v)}function i(b){return e&&b.alternate===null&&(b.flags|=67108866),b}function l(b,v,y,_){return v===null||v.tag!==6?(v=Zf(y,b.mode,_),v.return=b,v):(v=n(v,y),v.return=b,v)}function c(b,v,y,_){var w=y.type;return w===ti?f(b,v,y.props.children,_,y.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===an&&ox(w)===v.type)?(v=n(v,y.props),gl(v,y),v.return=b,v):(v=Rd(y.type,y.key,y.props,null,b.mode,_),gl(v,y),v.return=b,v)}function d(b,v,y,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=Jf(y,b.mode,_),v.return=b,v):(v=n(v,y.children||[]),v.return=b,v)}function f(b,v,y,_,w){return v===null||v.tag!==7?(v=oo(y,b.mode,_,w),v.return=b,v):(v=n(v,y),v.return=b,v)}function h(b,v,y){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=Zf(""+v,b.mode,y),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ed:return y=Rd(v.type,v.key,v.props,null,b.mode,y),gl(y,v),y.return=b,y;case Sl:return v=Jf(v,b.mode,y),v.return=b,v;case an:var _=v._init;return v=_(v._payload),h(b,v,y)}if(El(v)||hl(v))return v=oo(v,b.mode,y,null),v.return=b,v;if(typeof v.then=="function")return h(b,id(v),y);if(v.$$typeof===Sr)return h(b,nd(b,v),y);ld(b,v)}return null}function p(b,v,y,_){var w=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return w!==null?null:l(b,v,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ed:return y.key===w?c(b,v,y,_):null;case Sl:return y.key===w?d(b,v,y,_):null;case an:return w=y._init,y=w(y._payload),p(b,v,y,_)}if(El(y)||hl(y))return w!==null?null:f(b,v,y,_,null);if(typeof y.then=="function")return p(b,v,id(y),_);if(y.$$typeof===Sr)return p(b,v,nd(b,y),_);ld(b,y)}return null}function m(b,v,y,_,w){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return b=b.get(y)||null,l(v,b,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ed:return b=b.get(_.key===null?y:_.key)||null,c(v,b,_,w);case Sl:return b=b.get(_.key===null?y:_.key)||null,d(v,b,_,w);case an:var S=_._init;return _=S(_._payload),m(b,v,y,_,w)}if(El(_)||hl(_))return b=b.get(y)||null,f(v,b,_,w,null);if(typeof _.then=="function")return m(b,v,y,id(_),w);if(_.$$typeof===Sr)return m(b,v,y,nd(v,_),w);ld(v,_)}return null}function j(b,v,y,_){for(var w=null,S=null,N=v,C=v=0,O=null;N!==null&&C<y.length;C++){N.index>C?(O=N,N=null):O=N.sibling;var A=p(b,N,y[C],_);if(A===null){N===null&&(N=O);break}e&&N&&A.alternate===null&&t(b,N),v=o(A,v,C),S===null?w=A:S.sibling=A,S=A,N=O}if(C===y.length)return a(b,N),gt&&Kn(b,C),w;if(N===null){for(;C<y.length;C++)N=h(b,y[C],_),N!==null&&(v=o(N,v,C),S===null?w=N:S.sibling=N,S=N);return gt&&Kn(b,C),w}for(N=s(N);C<y.length;C++)O=m(N,b,C,y[C],_),O!==null&&(e&&O.alternate!==null&&N.delete(O.key===null?C:O.key),v=o(O,v,C),S===null?w=O:S.sibling=O,S=O);return e&&N.forEach(function(q){return t(b,q)}),gt&&Kn(b,C),w}function x(b,v,y,_){if(y==null)throw Error(ae(151));for(var w=null,S=null,N=v,C=v=0,O=null,A=y.next();N!==null&&!A.done;C++,A=y.next()){N.index>C?(O=N,N=null):O=N.sibling;var q=p(b,N,A.value,_);if(q===null){N===null&&(N=O);break}e&&N&&q.alternate===null&&t(b,N),v=o(q,v,C),S===null?w=q:S.sibling=q,S=q,N=O}if(A.done)return a(b,N),gt&&Kn(b,C),w;if(N===null){for(;!A.done;C++,A=y.next())A=h(b,A.value,_),A!==null&&(v=o(A,v,C),S===null?w=A:S.sibling=A,S=A);return gt&&Kn(b,C),w}for(N=s(N);!A.done;C++,A=y.next())A=m(N,b,C,A.value,_),A!==null&&(e&&A.alternate!==null&&N.delete(A.key===null?C:A.key),v=o(A,v,C),S===null?w=A:S.sibling=A,S=A);return e&&N.forEach(function(B){return t(b,B)}),gt&&Kn(b,C),w}function g(b,v,y,_){if(typeof y=="object"&&y!==null&&y.type===ti&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ed:e:{for(var w=y.key;v!==null;){if(v.key===w){if(w=y.type,w===ti){if(v.tag===7){a(b,v.sibling),_=n(v,y.props.children),_.return=b,b=_;break e}}else if(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===an&&ox(w)===v.type){a(b,v.sibling),_=n(v,y.props),gl(_,y),_.return=b,b=_;break e}a(b,v);break}else t(b,v);v=v.sibling}y.type===ti?(_=oo(y.props.children,b.mode,_,y.key),_.return=b,b=_):(_=Rd(y.type,y.key,y.props,null,b.mode,_),gl(_,y),_.return=b,b=_)}return i(b);case Sl:e:{for(w=y.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){a(b,v.sibling),_=n(v,y.children||[]),_.return=b,b=_;break e}else{a(b,v);break}else t(b,v);v=v.sibling}_=Jf(y,b.mode,_),_.return=b,b=_}return i(b);case an:return w=y._init,y=w(y._payload),g(b,v,y,_)}if(El(y))return j(b,v,y,_);if(hl(y)){if(w=hl(y),typeof w!="function")throw Error(ae(150));return y=w.call(y),x(b,v,y,_)}if(typeof y.then=="function")return g(b,v,id(y),_);if(y.$$typeof===Sr)return g(b,v,nd(b,y),_);ld(b,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,v!==null&&v.tag===6?(a(b,v.sibling),_=n(v,y),_.return=b,b=_):(a(b,v),_=Zf(y,b.mode,_),_.return=b,b=_),i(b)):a(b,v)}return function(b,v,y,_){try{tc=0;var w=g(b,v,y,_);return yi=null,w}catch(N){if(N===Rc||N===Gu)throw N;var S=ds(29,N,null,b.mode);return S.lanes=_,S.return=b,S}finally{}}}var Fi=r_(!0),n_=r_(!1),Cs=dr(null),ir=null;function on(e){var t=e.alternate;Wt(ya,ya.current&1),Wt(Cs,e),ir===null&&(t===null||Li.current!==null||t.memoizedState!==null)&&(ir=e)}function o_(e){if(e.tag===22){if(Wt(ya,ya.current),Wt(Cs,e),ir===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(ir=e)}}else ln()}function ln(){Wt(ya,ya.current),Wt(Cs,Cs.current)}function Ar(e){Ca(Cs),ir===e&&(ir=null),Ca(ya)}var ya=dr(0);function ou(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Om(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function th(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:Xt({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var vm={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=hs(),n=jn(s);n.payload=t,a!=null&&(n.callback=a),t=wn(e,n,s),t!==null&&(ms(t,e,s),Ll(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=hs(),n=jn(s);n.tag=1,n.payload=t,a!=null&&(n.callback=a),t=wn(e,n,s),t!==null&&(ms(t,e,s),Ll(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=hs(),s=jn(a);s.tag=2,t!=null&&(s.callback=t),t=wn(e,s,a),t!==null&&(ms(t,e,a),Ll(t,e,a))}};function ix(e,t,a,s,n,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,i):t.prototype&&t.prototype.isPureReactComponent?!Jl(a,s)||!Jl(n,o):!0}function lx(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&vm.enqueueReplaceState(t,t.state,null)}function go(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=Xt({},a));for(var n in e)a[n]===void 0&&(a[n]=e[n])}return a}var iu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function i_(e){iu(e)}function l_(e){console.error(e)}function c_(e){iu(e)}function lu(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function cx(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function gm(e,t,a){return a=jn(a),a.tag=3,a.payload={element:null},a.callback=function(){lu(e,t)},a}function d_(e){return e=jn(e),e.tag=3,e}function u_(e,t,a,s){var n=a.type.getDerivedStateFromError;if(typeof n=="function"){var o=s.value;e.payload=function(){return n(o)},e.callback=function(){cx(t,a,s)}}var i=a.stateNode;i!==null&&typeof i.componentDidCatch=="function"&&(e.callback=function(){cx(t,a,s),typeof n!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function nA(e,t,a,s,n){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&Ac(t,a,n,!0),a=Cs.current,a!==null){switch(a.tag){case 13:return ir===null?Em():a.alternate===null&&la===0&&(la=3),a.flags&=-257,a.flags|=65536,a.lanes=n,s===cm?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),fh(e,s,n)),!1;case 22:return a.flags|=65536,s===cm?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),fh(e,s,n)),!1}throw Error(ae(435,a.tag))}return fh(e,s,n),Em(),!1}if(gt)return t=Cs.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=n,s!==rm&&(e=Error(ae(422),{cause:s}),Wl(Ss(e,a)))):(s!==rm&&(t=Error(ae(423),{cause:s}),Wl(Ss(t,a))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,s=Ss(s,a),n=gm(e.stateNode,s,n),Wf(e,n),la!==4&&(la=2)),!1;var o=Error(ae(520),{cause:s});if(o=Ss(o,a),$l===null?$l=[o]:$l.push(o),la!==4&&(la=2),t===null)return!0;s=Ss(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=n&-n,a.lanes|=e,e=gm(a.stateNode,s,e),Wf(a,e),!1;case 1:if(t=a.type,o=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(Sn===null||!Sn.has(o))))return a.flags|=65536,n&=-n,a.lanes|=n,n=d_(n),u_(n,e,a,s),Wf(a,n),!1}a=a.return}while(a!==null);return!1}var f_=Error(ae(461)),Na=!1;function Ta(e,t,a,s){t.child=e===null?n_(t,null,a,s):Fi(t,e.child,a,s)}function dx(e,t,a,s,n){a=a.render;var o=t.ref;if("ref"in s){var i={};for(var l in s)l!=="ref"&&(i[l]=s[l])}else i=s;return po(t),s=Hp(e,t,a,i,o,n),l=Vp(),e!==null&&!Na?(Gp(e,t,n),Mr(e,t,n)):(gt&&l&&Lp(t),t.flags|=1,Ta(e,t,s,n),t.child)}function ux(e,t,a,s,n){if(e===null){var o=a.type;return typeof o=="function"&&!Pp(o)&&o.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=o,h_(e,t,o,s,n)):(e=Rd(a.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!tv(e,n)){var i=o.memoizedProps;if(a=a.compare,a=a!==null?a:Jl,a(i,s)&&e.ref===t.ref)return Mr(e,t,n)}return t.flags|=1,e=Tr(o,s),e.ref=t.ref,e.return=t,t.child=e}function h_(e,t,a,s,n){if(e!==null){var o=e.memoizedProps;if(Jl(o,s)&&e.ref===t.ref)if(Na=!1,t.pendingProps=s=o,tv(e,n))e.flags&131072&&(Na=!0);else return t.lanes=e.lanes,Mr(e,t,n)}return xm(e,t,a,s,n)}function m_(e,t,a){var s=t.pendingProps,n=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if(t.flags&128){if(s=o!==null?o.baseLanes|a:a,e!==null){for(n=t.child=e.child,o=0;n!==null;)o=o|n.lanes|n.childLanes,n=n.sibling;t.childLanes=o&~s}else t.childLanes=0,t.child=null;return fx(e,t,s,a)}if(a&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Dd(t,o!==null?o.cachePool:null),o!==null?Wg(t,o):fm(),o_(t);else return t.lanes=t.childLanes=536870912,fx(e,t,o!==null?o.baseLanes|a:a,a)}else o!==null?(Dd(t,o.cachePool),Wg(t,o),ln(),t.memoizedState=null):(e!==null&&Dd(t,null),fm(),ln());return Ta(e,t,n,a),t.child}function fx(e,t,a,s){var n=qp();return n=n===null?null:{parent:xa._currentValue,pool:n},t.memoizedState={baseLanes:a,cachePool:n},e!==null&&Dd(t,null),fm(),o_(t),e!==null&&Ac(e,t,s,!0),null}function Md(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(ae(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function xm(e,t,a,s,n){return po(t),a=Hp(e,t,a,s,void 0,n),s=Vp(),e!==null&&!Na?(Gp(e,t,n),Mr(e,t,n)):(gt&&s&&Lp(t),t.flags|=1,Ta(e,t,a,n),t.child)}function hx(e,t,a,s,n,o){return po(t),t.updateQueue=null,a=Cb(t,s,a,n),Nb(e),s=Vp(),e!==null&&!Na?(Gp(e,t,o),Mr(e,t,o)):(gt&&s&&Lp(t),t.flags|=1,Ta(e,t,a,o),t.child)}function mx(e,t,a,s,n){if(po(t),t.stateNode===null){var o=ci,i=a.contextType;typeof i=="object"&&i!==null&&(o=Ia(i)),o=new a(s,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=vm,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=s,o.state=t.memoizedState,o.refs={},Up(t),i=a.contextType,o.context=typeof i=="object"&&i!==null?Ia(i):ci,o.state=t.memoizedState,i=a.getDerivedStateFromProps,typeof i=="function"&&(th(t,a,i,s),o.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(i=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),i!==o.state&&vm.enqueueReplaceState(o,o.state,null),Fl(t,s,o,n),Il(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){o=t.stateNode;var l=t.memoizedProps,c=go(a,l);o.props=c;var d=o.context,f=a.contextType;i=ci,typeof f=="object"&&f!==null&&(i=Ia(f));var h=a.getDerivedStateFromProps;f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l||d!==i)&&lx(t,o,s,i),sn=!1;var p=t.memoizedState;o.state=p,Fl(t,s,o,n),Il(),d=t.memoizedState,l||p!==d||sn?(typeof h=="function"&&(th(t,a,h,s),d=t.memoizedState),(c=sn||ix(t,a,c,s,p,d,i))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=d),o.props=s,o.state=d,o.context=i,s=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,dm(e,t),i=t.memoizedProps,f=go(a,i),o.props=f,h=t.pendingProps,p=o.context,d=a.contextType,c=ci,typeof d=="object"&&d!==null&&(c=Ia(d)),l=a.getDerivedStateFromProps,(d=typeof l=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==h||p!==c)&&lx(t,o,s,c),sn=!1,p=t.memoizedState,o.state=p,Fl(t,s,o,n),Il();var m=t.memoizedState;i!==h||p!==m||sn||e!==null&&e.dependencies!==null&&tu(e.dependencies)?(typeof l=="function"&&(th(t,a,l,s),m=t.memoizedState),(f=sn||ix(t,a,f,s,p,m,c)||e!==null&&e.dependencies!==null&&tu(e.dependencies))?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=m),o.props=s,o.state=m,o.context=c,s=f):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),s=!1)}return o=s,Md(e,t),s=(t.flags&128)!==0,o||s?(o=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&s?(t.child=Fi(t,e.child,null,n),t.child=Fi(t,null,a,n)):Ta(e,t,a,n),t.memoizedState=o.state,e=t.child):e=Mr(e,t,n),e}function px(e,t,a,s){return Cc(),t.flags|=256,Ta(e,t,a,s),t.child}var ah={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sh(e){return{baseLanes:e,cachePool:_b()}}function rh(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Es),e}function p_(e,t,a){var s=t.pendingProps,n=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(ya.current&2)!==0),i&&(n=!0,t.flags&=-129),i=(t.flags&32)!==0,t.flags&=-33,e===null){if(gt){if(n?on(t):ln(),gt){var l=ia,c;if(c=l){e:{for(c=l,l=tr;c.nodeType!==8;){if(!l){l=null;break e}if(c=Bs(c.nextSibling),c===null){l=null;break e}}l=c}l!==null?(t.memoizedState={dehydrated:l,treeContext:io!==null?{id:Er,overflow:Nr}:null,retryLane:536870912,hydrationErrors:null},c=ds(18,null,null,0),c.stateNode=l,c.return=t,t.child=c,$a=t,ia=null,c=!0):c=!1}c||mo(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return Om(l)?t.lanes=32:t.lanes=536870912,null;Ar(t)}return l=s.children,s=s.fallback,n?(ln(),n=t.mode,l=cu({mode:"hidden",children:l},n),s=oo(s,n,a,null),l.return=t,s.return=t,l.sibling=s,t.child=l,n=t.child,n.memoizedState=sh(a),n.childLanes=rh(e,i,a),t.memoizedState=ah,s):(on(t),ym(t,l))}if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null)){if(o)t.flags&256?(on(t),t.flags&=-257,t=nh(e,t,a)):t.memoizedState!==null?(ln(),t.child=e.child,t.flags|=128,t=null):(ln(),n=s.fallback,l=t.mode,s=cu({mode:"visible",children:s.children},l),n=oo(n,l,a,null),n.flags|=2,s.return=t,n.return=t,s.sibling=n,t.child=s,Fi(t,e.child,null,a),s=t.child,s.memoizedState=sh(a),s.childLanes=rh(e,i,a),t.memoizedState=ah,t=n);else if(on(t),Om(l)){if(i=l.nextSibling&&l.nextSibling.dataset,i)var d=i.dgst;i=d,s=Error(ae(419)),s.stack="",s.digest=i,Wl({value:s,source:null,stack:null}),t=nh(e,t,a)}else if(Na||Ac(e,t,a,!1),i=(a&e.childLanes)!==0,Na||i){if(i=Vt,i!==null&&(s=a&-a,s=s&42?1:Ep(s),s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==c.retryLane))throw c.retryLane=s,Wi(e,s),ms(i,e,s),f_;l.data==="$?"||Em(),t=nh(e,t,a)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ia=Bs(l.nextSibling),$a=t,gt=!0,lo=null,tr=!1,e!==null&&(_s[js++]=Er,_s[js++]=Nr,_s[js++]=io,Er=e.id,Nr=e.overflow,io=t),t=ym(t,s.children),t.flags|=4096);return t}return n?(ln(),n=s.fallback,l=t.mode,c=e.child,d=c.sibling,s=Tr(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,d!==null?n=Tr(d,n):(n=oo(n,l,a,null),n.flags|=2),n.return=t,s.return=t,s.sibling=n,t.child=s,s=n,n=t.child,l=e.child.memoizedState,l===null?l=sh(a):(c=l.cachePool,c!==null?(d=xa._currentValue,c=c.parent!==d?{parent:d,pool:d}:c):c=_b(),l={baseLanes:l.baseLanes|a,cachePool:c}),n.memoizedState=l,n.childLanes=rh(e,i,a),t.memoizedState=ah,s):(on(t),a=e.child,e=a.sibling,a=Tr(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a)}function ym(e,t){return t=cu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function cu(e,t){return e=ds(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function nh(e,t,a){return Fi(t,e.child,null,a),e=ym(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vx(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),om(e.return,t,a)}function oh(e,t,a,s,n){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=a,o.tailMode=n)}function v_(e,t,a){var s=t.pendingProps,n=s.revealOrder,o=s.tail;if(Ta(e,t,s.children,a),s=ya.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vx(e,a,t);else if(e.tag===19)vx(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(Wt(ya,s),n){case"forwards":for(a=t.child,n=null;a!==null;)e=a.alternate,e!==null&&ou(e)===null&&(n=a),a=a.sibling;a=n,a===null?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),oh(t,!1,n,a,o);break;case"backwards":for(a=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&ou(e)===null){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}oh(t,!0,a,null,o);break;case"together":oh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mr(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),On|=t.lanes,!(a&t.childLanes))if(e!==null){if(Ac(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(ae(153));if(t.child!==null){for(e=t.child,a=Tr(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Tr(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function tv(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&tu(e)))}function oA(e,t,a){switch(t.tag){case 3:Yd(t,t.stateNode.containerInfo),nn(t,xa,e.memoizedState.cache),Cc();break;case 27:case 5:Qh(t);break;case 4:Yd(t,t.stateNode.containerInfo);break;case 10:nn(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(on(t),t.flags|=128,null):a&t.child.childLanes?p_(e,t,a):(on(t),e=Mr(e,t,a),e!==null?e.sibling:null);on(t);break;case 19:var n=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(Ac(e,t,a,!1),s=(a&t.childLanes)!==0),n){if(s)return v_(e,t,a);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Wt(ya,ya.current),s)break;return null;case 22:case 23:return t.lanes=0,m_(e,t,a);case 24:nn(t,xa,e.memoizedState.cache)}return Mr(e,t,a)}function g_(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Na=!0;else{if(!tv(e,a)&&!(t.flags&128))return Na=!1,oA(e,t,a);Na=!!(e.flags&131072)}else Na=!1,gt&&t.flags&1048576&&yb(t,eu,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,n=s._init;if(s=n(s._payload),t.type=s,typeof s=="function")Pp(s)?(e=go(s,e),t.tag=1,t=mx(null,t,s,e,a)):(t.tag=0,t=xm(null,t,s,e,a));else{if(s!=null){if(n=s.$$typeof,n===jp){t.tag=11,t=dx(null,t,s,e,a);break e}else if(n===wp){t.tag=14,t=ux(null,t,s,e,a);break e}}throw t=Gh(s)||s,Error(ae(306,t,""))}}return t;case 0:return xm(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,n=go(s,t.pendingProps),mx(e,t,s,n,a);case 3:e:{if(Yd(t,t.stateNode.containerInfo),e===null)throw Error(ae(387));s=t.pendingProps;var o=t.memoizedState;n=o.element,dm(e,t),Fl(t,s,null,a);var i=t.memoizedState;if(s=i.cache,nn(t,xa,s),s!==o.cache&&im(t,[xa],a,!0),Il(),s=i.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=px(e,t,s,a);break e}else if(s!==n){n=Ss(Error(ae(424)),t),Wl(n),t=px(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ia=Bs(e.firstChild),$a=t,gt=!0,lo=null,tr=!0,a=n_(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Cc(),s===n){t=Mr(e,t,a);break e}Ta(e,t,s,a)}t=t.child}return t;case 26:return Md(e,t),e===null?(a=zx(t.type,null,t.pendingProps,null))?t.memoizedState=a:gt||(a=t.type,e=t.pendingProps,s=vu(_n.current).createElement(a),s[La]=t,s[Wa]=e,Da(s,a,e),Ea(s),t.stateNode=s):t.memoizedState=zx(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Qh(t),e===null&&gt&&(s=t.stateNode=sj(t.type,t.pendingProps,_n.current),$a=t,tr=!0,n=ia,Pn(t.type)?(zm=n,ia=Bs(s.firstChild)):ia=n),Ta(e,t,t.pendingProps.children,a),Md(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&gt&&((n=s=ia)&&(s=MA(s,t.type,t.pendingProps,tr),s!==null?(t.stateNode=s,$a=t,ia=Bs(s.firstChild),tr=!1,n=!0):n=!1),n||mo(t)),Qh(t),n=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,Rm(n,o)?s=null:i!==null&&Rm(n,i)&&(t.flags|=32),t.memoizedState!==null&&(n=Hp(e,t,JC,null,null,a),nc._currentValue=n),Md(e,t),Ta(e,t,s,a),t.child;case 6:return e===null&&gt&&((e=a=ia)&&(a=kA(a,t.pendingProps,tr),a!==null?(t.stateNode=a,$a=t,ia=null,e=!0):e=!1),e||mo(t)),null;case 13:return p_(e,t,a);case 4:return Yd(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Fi(t,null,s,a):Ta(e,t,s,a),t.child;case 11:return dx(e,t,t.type,t.pendingProps,a);case 7:return Ta(e,t,t.pendingProps,a),t.child;case 8:return Ta(e,t,t.pendingProps.children,a),t.child;case 12:return Ta(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,nn(t,t.type,s.value),Ta(e,t,s.children,a),t.child;case 9:return n=t.type._context,s=t.pendingProps.children,po(t),n=Ia(n),s=s(n),t.flags|=1,Ta(e,t,s,a),t.child;case 14:return ux(e,t,t.type,t.pendingProps,a);case 15:return h_(e,t,t.type,t.pendingProps,a);case 19:return v_(e,t,a);case 31:return s=t.pendingProps,a=t.mode,s={mode:s.mode,children:s.children},e===null?(a=cu(s,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=Tr(e.child,s),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return m_(e,t,a);case 24:return po(t),s=Ia(xa),e===null?(n=qp(),n===null&&(n=Vt,o=Fp(),n.pooledCache=o,o.refCount++,o!==null&&(n.pooledCacheLanes|=a),n=o),t.memoizedState={parent:s,cache:n},Up(t),nn(t,xa,n)):(e.lanes&a&&(dm(e,t),Fl(t,null,null,a),Il()),n=e.memoizedState,o=t.memoizedState,n.parent!==s?(n={parent:s,cache:s},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),nn(t,xa,s)):(s=o.cache,nn(t,xa,s),s!==n.cache&&im(t,[xa],a,!0))),Ta(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(ae(156,t.tag))}function vr(e){e.flags|=4}function gx(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!oj(t)){if(t=Cs.current,t!==null&&((ut&4194048)===ut?ir!==null:(ut&62914560)!==ut&&!(ut&536870912)||t!==ir))throw Pl=cm,jb;e.flags|=8192}}function cd(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?$y():536870912,e.lanes|=t,qi|=t)}function xl(e,t){if(!gt)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function sa(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var n=e.child;n!==null;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags&65011712,s|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function iA(e,t,a){var s=t.pendingProps;switch(Ip(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sa(t),null;case 1:return sa(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Rr(xa),zi(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(vl(t)?vr(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Yg())),sa(t),null;case 26:return a=t.memoizedState,e===null?(vr(t),a!==null?(sa(t),gx(t,a)):(sa(t),t.flags&=-16777217)):a?a!==e.memoizedState?(vr(t),sa(t),gx(t,a)):(sa(t),t.flags&=-16777217):(e.memoizedProps!==s&&vr(t),sa(t),t.flags&=-16777217),null;case 27:Qd(t),a=_n.current;var n=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&vr(t);else{if(!s){if(t.stateNode===null)throw Error(ae(166));return sa(t),null}e=nr.current,vl(t)?Vg(t):(e=sj(n,s,a),t.stateNode=e,vr(t))}return sa(t),null;case 5:if(Qd(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&vr(t);else{if(!s){if(t.stateNode===null)throw Error(ae(166));return sa(t),null}if(e=nr.current,vl(t))Vg(t);else{switch(n=vu(_n.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?n.createElement("select",{is:s.is}):n.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?n.createElement(a,{is:s.is}):n.createElement(a)}}e[La]=t,e[Wa]=s;e:for(n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.tag!==27&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}t.stateNode=e;e:switch(Da(e,a,s),a){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&vr(t)}}return sa(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&vr(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(ae(166));if(e=_n.current,vl(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,n=$a,n!==null)switch(n.tag){case 27:case 5:s=n.memoizedProps}e[La]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||ej(e.nodeValue,a)),e||mo(t)}else e=vu(e).createTextNode(s),e[La]=t,t.stateNode=e}return sa(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=vl(t),s!==null&&s.dehydrated!==null){if(e===null){if(!n)throw Error(ae(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ae(317));n[La]=t}else Cc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;sa(t),n=!1}else n=Yg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(Ar(t),t):(Ar(t),null)}if(Ar(t),t.flags&128)return t.lanes=a,t;if(a=s!==null,e=e!==null&&e.memoizedState!==null,a){s=t.child,n=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(n=s.alternate.memoizedState.cachePool.pool);var o=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==n&&(s.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),cd(t,t.updateQueue),sa(t),null;case 4:return zi(),e===null&&cv(t.stateNode.containerInfo),sa(t),null;case 10:return Rr(t.type),sa(t),null;case 19:if(Ca(ya),n=t.memoizedState,n===null)return sa(t),null;if(s=(t.flags&128)!==0,o=n.rendering,o===null)if(s)xl(n,!1);else{if(la!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ou(e),o!==null){for(t.flags|=128,xl(n,!1),e=o.updateQueue,t.updateQueue=e,cd(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)xb(a,e),a=a.sibling;return Wt(ya,ya.current&1|2),t.child}e=e.sibling}n.tail!==null&&or()>uu&&(t.flags|=128,s=!0,xl(n,!1),t.lanes=4194304)}else{if(!s)if(e=ou(o),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,cd(t,e),xl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!gt)return sa(t),null}else 2*or()-n.renderingStartTime>uu&&a!==536870912&&(t.flags|=128,s=!0,xl(n,!1),t.lanes=4194304);n.isBackwards?(o.sibling=t.child,t.child=o):(e=n.last,e!==null?e.sibling=o:t.child=o,n.last=o)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=or(),t.sibling=null,e=ya.current,Wt(ya,s?e&1|2:e&1),t):(sa(t),null);case 22:case 23:return Ar(t),Bp(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?a&536870912&&!(t.flags&128)&&(sa(t),t.subtreeFlags&6&&(t.flags|=8192)):sa(t),a=t.updateQueue,a!==null&&cd(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&Ca(co),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Rr(xa),sa(t),null;case 25:return null;case 30:return null}throw Error(ae(156,t.tag))}function lA(e,t){switch(Ip(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rr(xa),zi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Qd(t),null;case 13:if(Ar(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ae(340));Cc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ca(ya),null;case 4:return zi(),null;case 10:return Rr(t.type),null;case 22:case 23:return Ar(t),Bp(),e!==null&&Ca(co),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Rr(xa),null;case 25:return null;default:return null}}function x_(e,t){switch(Ip(t),t.tag){case 3:Rr(xa),zi();break;case 26:case 27:case 5:Qd(t);break;case 4:zi();break;case 13:Ar(t);break;case 19:Ca(ya);break;case 10:Rr(t.type);break;case 22:case 23:Ar(t),Bp(),e!==null&&Ca(co);break;case 24:Rr(xa)}}function zc(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var n=s.next;a=n;do{if((a.tag&e)===e){s=void 0;var o=a.create,i=a.inst;s=o(),i.destroy=s}a=a.next}while(a!==n)}}catch(l){Bt(t,t.return,l)}}function Dn(e,t,a){try{var s=t.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var o=n.next;s=o;do{if((s.tag&e)===e){var i=s.inst,l=i.destroy;if(l!==void 0){i.destroy=void 0,n=t;var c=a,d=l;try{d()}catch(f){Bt(n,c,f)}}}s=s.next}while(s!==o)}}catch(f){Bt(t,t.return,f)}}function y_(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Eb(t,a)}catch(s){Bt(e,e.return,s)}}}function b_(e,t,a){a.props=go(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){Bt(e,t,s)}}function Ul(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(n){Bt(e,t,n)}}function sr(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(n){Bt(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(n){Bt(e,t,n)}else a.current=null}function __(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(n){Bt(e,e.return,n)}}function ih(e,t,a){try{var s=e.stateNode;TA(s,e.type,a,t),s[Wa]=t}catch(n){Bt(e,e.return,n)}}function j_(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Pn(e.type)||e.tag===4}function lh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||j_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Pn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bm(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Wu));else if(s!==4&&(s===27&&Pn(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(bm(e,t,a),e=e.sibling;e!==null;)bm(e,t,a),e=e.sibling}function du(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&Pn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(du(e,t,a),e=e.sibling;e!==null;)du(e,t,a),e=e.sibling}function w_(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Da(t,s,a),t[La]=e,t[Wa]=a}catch(o){Bt(e,e.return,o)}}var wr=!1,ua=!1,ch=!1,xx=typeof WeakSet=="function"?WeakSet:Set,Sa=null;function cA(e,t){if(e=e.containerInfo,Am=bu,e=db(e),zp(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var n=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var i=0,l=-1,c=-1,d=0,f=0,h=e,p=null;t:for(;;){for(var m;h!==a||n!==0&&h.nodeType!==3||(l=i+n),h!==o||s!==0&&h.nodeType!==3||(c=i+s),h.nodeType===3&&(i+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===e)break t;if(p===a&&++d===n&&(l=i),p===o&&++f===s&&(c=i),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}a=l===-1||c===-1?null:{start:l,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(Tm={focusedElem:e,selectionRange:a},bu=!1,Sa=t;Sa!==null;)if(t=Sa,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Sa=e;else for(;Sa!==null;){switch(t=Sa,o=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,a=t,n=o.memoizedProps,o=o.memoizedState,s=a.stateNode;try{var j=go(a.type,n,a.elementType===a.type);e=s.getSnapshotBeforeUpdate(j,o),s.__reactInternalSnapshotBeforeUpdate=e}catch(x){Bt(a,a.return,x)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Dm(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Dm(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(ae(163))}if(e=t.sibling,e!==null){e.return=t.return,Sa=e;break}Sa=t.return}}function S_(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:Yr(e,a),s&4&&zc(5,a);break;case 1:if(Yr(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(i){Bt(a,a.return,i)}else{var n=go(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){Bt(a,a.return,i)}}s&64&&y_(a),s&512&&Ul(a,a.return);break;case 3:if(Yr(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Eb(e,t)}catch(i){Bt(a,a.return,i)}}break;case 27:t===null&&s&4&&w_(a);case 26:case 5:Yr(e,a),t===null&&s&4&&__(a),s&512&&Ul(a,a.return);break;case 12:Yr(e,a);break;case 13:Yr(e,a),s&4&&C_(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=xA.bind(null,a),PA(e,a))));break;case 22:if(s=a.memoizedState!==null||wr,!s){t=t!==null&&t.memoizedState!==null||ua,n=wr;var o=ua;wr=s,(ua=t)&&!o?Jr(e,a,(a.subtreeFlags&8772)!==0):Yr(e,a),wr=n,ua=o}break;case 30:break;default:Yr(e,a)}}function E_(e){var t=e.alternate;t!==null&&(e.alternate=null,E_(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Cp(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Zt=null,Ka=!1;function gr(e,t,a){for(a=a.child;a!==null;)N_(e,t,a),a=a.sibling}function N_(e,t,a){if(us&&typeof us.onCommitFiberUnmount=="function")try{us.onCommitFiberUnmount(jc,a)}catch{}switch(a.tag){case 26:ua||sr(a,t),gr(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ua||sr(a,t);var s=Zt,n=Ka;Pn(a.type)&&(Zt=a.stateNode,Ka=!1),gr(e,t,a),Vl(a.stateNode),Zt=s,Ka=n;break;case 5:ua||sr(a,t);case 6:if(s=Zt,n=Ka,Zt=null,gr(e,t,a),Zt=s,Ka=n,Zt!==null)if(Ka)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(a.stateNode)}catch(o){Bt(a,t,o)}else try{Zt.removeChild(a.stateNode)}catch(o){Bt(a,t,o)}break;case 18:Zt!==null&&(Ka?(e=Zt,Rx(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),lc(e)):Rx(Zt,a.stateNode));break;case 4:s=Zt,n=Ka,Zt=a.stateNode.containerInfo,Ka=!0,gr(e,t,a),Zt=s,Ka=n;break;case 0:case 11:case 14:case 15:ua||Dn(2,a,t),ua||Dn(4,a,t),gr(e,t,a);break;case 1:ua||(sr(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&b_(a,t,s)),gr(e,t,a);break;case 21:gr(e,t,a);break;case 22:ua=(s=ua)||a.memoizedState!==null,gr(e,t,a),ua=s;break;default:gr(e,t,a)}}function C_(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{lc(e)}catch(a){Bt(t,t.return,a)}}function dA(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new xx),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new xx),t;default:throw Error(ae(435,e.tag))}}function dh(e,t){var a=dA(e);t.forEach(function(s){var n=yA.bind(null,e,s);a.has(s)||(a.add(s),s.then(n,n))})}function os(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var n=a[s],o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 27:if(Pn(l.type)){Zt=l.stateNode,Ka=!1;break e}break;case 5:Zt=l.stateNode,Ka=!1;break e;case 3:case 4:Zt=l.stateNode.containerInfo,Ka=!0;break e}l=l.return}if(Zt===null)throw Error(ae(160));N_(o,i,n),Zt=null,Ka=!1,o=n.alternate,o!==null&&(o.return=null),n.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)A_(t,e),t=t.sibling}var qs=null;function A_(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:os(t,e),is(e),s&4&&(Dn(3,e,e.return),zc(3,e),Dn(5,e,e.return));break;case 1:os(t,e),is(e),s&512&&(ua||a===null||sr(a,a.return)),s&64&&wr&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var n=qs;if(os(t,e),is(e),s&512&&(ua||a===null||sr(a,a.return)),s&4){var o=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,n=n.ownerDocument||n;t:switch(s){case"title":o=n.getElementsByTagName("title")[0],(!o||o[Ec]||o[La]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=n.createElement(s),n.head.insertBefore(o,n.querySelector("head > title"))),Da(o,s,a),o[La]=e,Ea(o),s=o;break e;case"link":var i=kx("link","href",n).get(s+(a.href||""));if(i){for(var l=0;l<i.length;l++)if(o=i[l],o.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&o.getAttribute("rel")===(a.rel==null?null:a.rel)&&o.getAttribute("title")===(a.title==null?null:a.title)&&o.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){i.splice(l,1);break t}}o=n.createElement(s),Da(o,s,a),n.head.appendChild(o);break;case"meta":if(i=kx("meta","content",n).get(s+(a.content||""))){for(l=0;l<i.length;l++)if(o=i[l],o.getAttribute("content")===(a.content==null?null:""+a.content)&&o.getAttribute("name")===(a.name==null?null:a.name)&&o.getAttribute("property")===(a.property==null?null:a.property)&&o.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&o.getAttribute("charset")===(a.charSet==null?null:a.charSet)){i.splice(l,1);break t}}o=n.createElement(s),Da(o,s,a),n.head.appendChild(o);break;default:throw Error(ae(468,s))}o[La]=e,Ea(o),s=o}e.stateNode=s}else Px(n,e.type,e.stateNode);else e.stateNode=Mx(n,s,e.memoizedProps);else o!==s?(o===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):o.count--,s===null?Px(n,e.type,e.stateNode):Mx(n,s,e.memoizedProps)):s===null&&e.stateNode!==null&&ih(e,e.memoizedProps,a.memoizedProps)}break;case 27:os(t,e),is(e),s&512&&(ua||a===null||sr(a,a.return)),a!==null&&s&4&&ih(e,e.memoizedProps,a.memoizedProps);break;case 5:if(os(t,e),is(e),s&512&&(ua||a===null||sr(a,a.return)),e.flags&32){n=e.stateNode;try{ki(n,"")}catch(m){Bt(e,e.return,m)}}s&4&&e.stateNode!=null&&(n=e.memoizedProps,ih(e,n,a!==null?a.memoizedProps:n)),s&1024&&(ch=!0);break;case 6:if(os(t,e),is(e),s&4){if(e.stateNode===null)throw Error(ae(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(m){Bt(e,e.return,m)}}break;case 3:if(Ld=null,n=qs,qs=gu(t.containerInfo),os(t,e),qs=n,is(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{lc(t.containerInfo)}catch(m){Bt(e,e.return,m)}ch&&(ch=!1,T_(e));break;case 4:s=qs,qs=gu(e.stateNode.containerInfo),os(t,e),is(e),qs=s;break;case 12:os(t,e),is(e);break;case 13:os(t,e),is(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ov=or()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,dh(e,s)));break;case 22:n=e.memoizedState!==null;var c=a!==null&&a.memoizedState!==null,d=wr,f=ua;if(wr=d||n,ua=f||c,os(t,e),ua=f,wr=d,is(e),s&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(a===null||c||wr||ua||Xn(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){c=a=t;try{if(o=c.stateNode,n)i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=h!=null&&h.hasOwnProperty("display")?h.display:null;l.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(m){Bt(c,c.return,m)}}}else if(t.tag===6){if(a===null){c=t;try{c.stateNode.nodeValue=n?"":c.memoizedProps}catch(m){Bt(c,c.return,m)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,dh(e,a))));break;case 19:os(t,e),is(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,dh(e,s)));break;case 30:break;case 21:break;default:os(t,e),is(e)}}function is(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(j_(s)){a=s;break}s=s.return}if(a==null)throw Error(ae(160));switch(a.tag){case 27:var n=a.stateNode,o=lh(e);du(e,o,n);break;case 5:var i=a.stateNode;a.flags&32&&(ki(i,""),a.flags&=-33);var l=lh(e);du(e,l,i);break;case 3:case 4:var c=a.stateNode.containerInfo,d=lh(e);bm(e,d,c);break;default:throw Error(ae(161))}}catch(f){Bt(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function T_(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;T_(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Yr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)S_(e,t.alternate,t),t=t.sibling}function Xn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Dn(4,t,t.return),Xn(t);break;case 1:sr(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&b_(t,t.return,a),Xn(t);break;case 27:Vl(t.stateNode);case 26:case 5:sr(t,t.return),Xn(t);break;case 22:t.memoizedState===null&&Xn(t);break;case 30:Xn(t);break;default:Xn(t)}e=e.sibling}}function Jr(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,n=e,o=t,i=o.flags;switch(o.tag){case 0:case 11:case 15:Jr(n,o,a),zc(4,o);break;case 1:if(Jr(n,o,a),s=o,n=s.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(d){Bt(s,s.return,d)}if(s=o,n=s.updateQueue,n!==null){var l=s.stateNode;try{var c=n.shared.hiddenCallbacks;if(c!==null)for(n.shared.hiddenCallbacks=null,n=0;n<c.length;n++)Sb(c[n],l)}catch(d){Bt(s,s.return,d)}}a&&i&64&&y_(o),Ul(o,o.return);break;case 27:w_(o);case 26:case 5:Jr(n,o,a),a&&s===null&&i&4&&__(o),Ul(o,o.return);break;case 12:Jr(n,o,a);break;case 13:Jr(n,o,a),a&&i&4&&C_(n,o);break;case 22:o.memoizedState===null&&Jr(n,o,a),Ul(o,o.return);break;case 30:break;default:Jr(n,o,a)}t=t.sibling}}function av(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Tc(a))}function sv(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tc(e))}function Zs(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)R_(e,t,a,s),t=t.sibling}function R_(e,t,a,s){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Zs(e,t,a,s),n&2048&&zc(9,t);break;case 1:Zs(e,t,a,s);break;case 3:Zs(e,t,a,s),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Tc(e)));break;case 12:if(n&2048){Zs(e,t,a,s),e=t.stateNode;try{var o=t.memoizedProps,i=o.id,l=o.onPostCommit;typeof l=="function"&&l(i,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){Bt(t,t.return,c)}}else Zs(e,t,a,s);break;case 13:Zs(e,t,a,s);break;case 23:break;case 22:o=t.stateNode,i=t.alternate,t.memoizedState!==null?o._visibility&2?Zs(e,t,a,s):Bl(e,t):o._visibility&2?Zs(e,t,a,s):(o._visibility|=2,Zo(e,t,a,s,(t.subtreeFlags&10256)!==0)),n&2048&&av(i,t);break;case 24:Zs(e,t,a,s),n&2048&&sv(t.alternate,t);break;default:Zs(e,t,a,s)}}function Zo(e,t,a,s,n){for(n=n&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var o=e,i=t,l=a,c=s,d=i.flags;switch(i.tag){case 0:case 11:case 15:Zo(o,i,l,c,n),zc(8,i);break;case 23:break;case 22:var f=i.stateNode;i.memoizedState!==null?f._visibility&2?Zo(o,i,l,c,n):Bl(o,i):(f._visibility|=2,Zo(o,i,l,c,n)),n&&d&2048&&av(i.alternate,i);break;case 24:Zo(o,i,l,c,n),n&&d&2048&&sv(i.alternate,i);break;default:Zo(o,i,l,c,n)}t=t.sibling}}function Bl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,n=s.flags;switch(s.tag){case 22:Bl(a,s),n&2048&&av(s.alternate,s);break;case 24:Bl(a,s),n&2048&&sv(s.alternate,s);break;default:Bl(a,s)}t=t.sibling}}var Cl=8192;function Io(e){if(e.subtreeFlags&Cl)for(e=e.child;e!==null;)D_(e),e=e.sibling}function D_(e){switch(e.tag){case 26:Io(e),e.flags&Cl&&e.memoizedState!==null&&KA(qs,e.memoizedState,e.memoizedProps);break;case 5:Io(e);break;case 3:case 4:var t=qs;qs=gu(e.stateNode.containerInfo),Io(e),qs=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Cl,Cl=16777216,Io(e),Cl=t):Io(e));break;default:Io(e)}}function O_(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function yl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Sa=s,M_(s,e)}O_(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)z_(e),e=e.sibling}function z_(e){switch(e.tag){case 0:case 11:case 15:yl(e),e.flags&2048&&Dn(9,e,e.return);break;case 3:yl(e);break;case 12:yl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,kd(e)):yl(e);break;default:yl(e)}}function kd(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Sa=s,M_(s,e)}O_(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Dn(8,t,t.return),kd(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,kd(t));break;default:kd(t)}e=e.sibling}}function M_(e,t){for(;Sa!==null;){var a=Sa;switch(a.tag){case 0:case 11:case 15:Dn(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Tc(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,Sa=s;else e:for(a=e;Sa!==null;){s=Sa;var n=s.sibling,o=s.return;if(E_(s),s===a){Sa=null;break e}if(n!==null){n.return=o,Sa=n;break e}Sa=o}}}var uA={getCacheForType:function(e){var t=Ia(xa),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},fA=typeof WeakMap=="function"?WeakMap:Map,Ct=0,Vt=null,ct=null,ut=0,Nt=0,ls=null,xn=!1,el=!1,rv=!1,kr=0,la=0,On=0,uo=0,nv=0,Es=0,qi=0,$l=null,Xa=null,_m=!1,ov=0,uu=1/0,fu=null,Sn=null,Ra=0,En=null,Ui=null,bi=0,jm=0,wm=null,k_=null,Hl=0,Sm=null;function hs(){if(Ct&2&&ut!==0)return ut&-ut;if(Ue.T!==null){var e=Pi;return e!==0?e:lv()}return Gy()}function P_(){Es===0&&(Es=!(ut&536870912)||gt?By():536870912);var e=Cs.current;return e!==null&&(e.flags|=32),Es}function ms(e,t,a){(e===Vt&&(Nt===2||Nt===9)||e.cancelPendingCommit!==null)&&(Bi(e,0),yn(e,ut,Es,!1)),Sc(e,a),(!(Ct&2)||e!==Vt)&&(e===Vt&&(!(Ct&2)&&(uo|=a),la===4&&yn(e,ut,Es,!1)),ur(e))}function L_(e,t,a){if(Ct&6)throw Error(ae(327));var s=!a&&(t&124)===0&&(t&e.expiredLanes)===0||wc(e,t),n=s?pA(e,t):uh(e,t,!0),o=s;do{if(n===0){el&&!s&&yn(e,t,0,!1);break}else{if(a=e.current.alternate,o&&!hA(a)){n=uh(e,t,!1),o=!1;continue}if(n===2){if(o=t,e.errorRecoveryDisabledLanes&o)var i=0;else i=e.pendingLanes&-536870913,i=i!==0?i:i&536870912?536870912:0;if(i!==0){t=i;e:{var l=e;n=$l;var c=l.current.memoizedState.isDehydrated;if(c&&(Bi(l,i).flags|=256),i=uh(l,i,!1),i!==2){if(rv&&!c){l.errorRecoveryDisabledLanes|=o,uo|=o,n=4;break e}o=Xa,Xa=n,o!==null&&(Xa===null?Xa=o:Xa.push.apply(Xa,o))}n=i}if(o=!1,n!==2)continue}}if(n===1){Bi(e,0),yn(e,t,0,!0);break}e:{switch(s=e,o=n,o){case 0:case 1:throw Error(ae(345));case 4:if((t&4194048)!==t)break;case 6:yn(s,t,Es,!xn);break e;case 2:Xa=null;break;case 3:case 5:break;default:throw Error(ae(329))}if((t&62914560)===t&&(n=ov+300-or(),10<n)){if(yn(s,t,Es,!xn),qu(s,0,!0)!==0)break e;s.timeoutHandle=aj(yx.bind(null,s,a,Xa,fu,_m,t,Es,uo,qi,xn,o,2,-0,0),n);break e}yx(s,a,Xa,fu,_m,t,Es,uo,qi,xn,o,0,-0,0)}}break}while(!0);ur(e)}function yx(e,t,a,s,n,o,i,l,c,d,f,h,p,m){if(e.timeoutHandle=-1,h=t.subtreeFlags,(h&8192||(h&16785408)===16785408)&&(rc={stylesheets:null,count:0,unsuspend:QA},D_(t),h=XA(),h!==null)){e.cancelPendingCommit=h(_x.bind(null,e,t,o,a,s,n,i,l,c,f,1,p,m)),yn(e,o,i,!d);return}_x(e,t,o,a,s,n,i,l,c)}function hA(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var n=a[s],o=n.getSnapshot;n=n.value;try{if(!vs(o(),n))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yn(e,t,a,s){t&=~nv,t&=~uo,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var n=t;0<n;){var o=31-fs(n),i=1<<o;s[o]=-1,n&=~i}a!==0&&Hy(e,a,t)}function Xu(){return Ct&6?!0:(Mc(0),!1)}function iv(){if(ct!==null){if(Nt===0)var e=ct.return;else e=ct,Cr=Mo=null,Yp(e),yi=null,tc=0,e=ct;for(;e!==null;)x_(e.alternate,e),e=e.return;ct=null}}function Bi(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,DA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),iv(),Vt=e,ct=a=Tr(e.current,null),ut=t,Nt=0,ls=null,xn=!1,el=wc(e,t),rv=!1,qi=Es=nv=uo=On=la=0,Xa=$l=null,_m=!1,t&8&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var n=31-fs(s),o=1<<n;t|=e[n],s&=~o}return kr=t,Hu(),a}function I_(e,t){nt=null,Ue.H=nu,t===Rc||t===Gu?(t=Zg(),Nt=3):t===jb?(t=Zg(),Nt=4):Nt=t===f_?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ls=t,ct===null&&(la=1,lu(e,Ss(t,e.current)))}function F_(){var e=Ue.H;return Ue.H=nu,e===null?nu:e}function q_(){var e=Ue.A;return Ue.A=uA,e}function Em(){la=4,xn||(ut&4194048)!==ut&&Cs.current!==null||(el=!0),!(On&134217727)&&!(uo&134217727)||Vt===null||yn(Vt,ut,Es,!1)}function uh(e,t,a){var s=Ct;Ct|=2;var n=F_(),o=q_();(Vt!==e||ut!==t)&&(fu=null,Bi(e,t)),t=!1;var i=la;e:do try{if(Nt!==0&&ct!==null){var l=ct,c=ls;switch(Nt){case 8:iv(),i=6;break e;case 3:case 2:case 9:case 6:Cs.current===null&&(t=!0);var d=Nt;if(Nt=0,ls=null,fi(e,l,c,d),a&&el){i=0;break e}break;default:d=Nt,Nt=0,ls=null,fi(e,l,c,d)}}mA(),i=la;break}catch(f){I_(e,f)}while(!0);return t&&e.shellSuspendCounter++,Cr=Mo=null,Ct=s,Ue.H=n,Ue.A=o,ct===null&&(Vt=null,ut=0,Hu()),i}function mA(){for(;ct!==null;)U_(ct)}function pA(e,t){var a=Ct;Ct|=2;var s=F_(),n=q_();Vt!==e||ut!==t?(fu=null,uu=or()+500,Bi(e,t)):el=wc(e,t);e:do try{if(Nt!==0&&ct!==null){t=ct;var o=ls;t:switch(Nt){case 1:Nt=0,ls=null,fi(e,t,o,1);break;case 2:case 9:if(Xg(o)){Nt=0,ls=null,bx(t);break}t=function(){Nt!==2&&Nt!==9||Vt!==e||(Nt=7),ur(e)},o.then(t,t);break e;case 3:Nt=7;break e;case 4:Nt=5;break e;case 7:Xg(o)?(Nt=0,ls=null,bx(t)):(Nt=0,ls=null,fi(e,t,o,7));break;case 5:var i=null;switch(ct.tag){case 26:i=ct.memoizedState;case 5:case 27:var l=ct;if(!i||oj(i)){Nt=0,ls=null;var c=l.sibling;if(c!==null)ct=c;else{var d=l.return;d!==null?(ct=d,Zu(d)):ct=null}break t}}Nt=0,ls=null,fi(e,t,o,5);break;case 6:Nt=0,ls=null,fi(e,t,o,6);break;case 8:iv(),la=6;break e;default:throw Error(ae(462))}}vA();break}catch(f){I_(e,f)}while(!0);return Cr=Mo=null,Ue.H=s,Ue.A=n,Ct=a,ct!==null?0:(Vt=null,ut=0,Hu(),la)}function vA(){for(;ct!==null&&!I1();)U_(ct)}function U_(e){var t=g_(e.alternate,e,kr);e.memoizedProps=e.pendingProps,t===null?Zu(e):ct=t}function bx(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=hx(a,t,t.pendingProps,t.type,void 0,ut);break;case 11:t=hx(a,t,t.pendingProps,t.type.render,t.ref,ut);break;case 5:Yp(t);default:x_(a,t),t=ct=xb(t,kr),t=g_(a,t,kr)}e.memoizedProps=e.pendingProps,t===null?Zu(e):ct=t}function fi(e,t,a,s){Cr=Mo=null,Yp(t),yi=null,tc=0;var n=t.return;try{if(nA(e,n,t,a,ut)){la=1,lu(e,Ss(a,e.current)),ct=null;return}}catch(o){if(n!==null)throw ct=n,o;la=1,lu(e,Ss(a,e.current)),ct=null;return}t.flags&32768?(gt||s===1?e=!0:el||ut&536870912?e=!1:(xn=e=!0,(s===2||s===9||s===3||s===6)&&(s=Cs.current,s!==null&&s.tag===13&&(s.flags|=16384))),B_(t,e)):Zu(t)}function Zu(e){var t=e;do{if(t.flags&32768){B_(t,xn);return}e=t.return;var a=iA(t.alternate,t,kr);if(a!==null){ct=a;return}if(t=t.sibling,t!==null){ct=t;return}ct=t=e}while(t!==null);la===0&&(la=5)}function B_(e,t){do{var a=lA(e.alternate,e);if(a!==null){a.flags&=32767,ct=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ct=e;return}ct=e=a}while(e!==null);la=6,ct=null}function _x(e,t,a,s,n,o,i,l,c){e.cancelPendingCommit=null;do Ju();while(Ra!==0);if(Ct&6)throw Error(ae(327));if(t!==null){if(t===e.current)throw Error(ae(177));if(o=t.lanes|t.childLanes,o|=Mp,Q1(e,a,o,i,l,c),e===Vt&&(ct=Vt=null,ut=0),Ui=t,En=e,bi=a,jm=o,wm=n,k_=s,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,bA(Kd,function(){return Y_(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,t.subtreeFlags&13878||s){s=Ue.T,Ue.T=null,n=xt.p,xt.p=2,i=Ct,Ct|=4;try{cA(e,t,a)}finally{Ct=i,xt.p=n,Ue.T=s}}Ra=1,$_(),H_(),V_()}}function $_(){if(Ra===1){Ra=0;var e=En,t=Ui,a=(t.flags&13878)!==0;if(t.subtreeFlags&13878||a){a=Ue.T,Ue.T=null;var s=xt.p;xt.p=2;var n=Ct;Ct|=4;try{A_(t,e);var o=Tm,i=db(e.containerInfo),l=o.focusedElem,c=o.selectionRange;if(i!==l&&l&&l.ownerDocument&&cb(l.ownerDocument.documentElement,l)){if(c!==null&&zp(l)){var d=c.start,f=c.end;if(f===void 0&&(f=d),"selectionStart"in l)l.selectionStart=d,l.selectionEnd=Math.min(f,l.value.length);else{var h=l.ownerDocument||document,p=h&&h.defaultView||window;if(p.getSelection){var m=p.getSelection(),j=l.textContent.length,x=Math.min(c.start,j),g=c.end===void 0?x:Math.min(c.end,j);!m.extend&&x>g&&(i=g,g=x,x=i);var b=Bg(l,x),v=Bg(l,g);if(b&&v&&(m.rangeCount!==1||m.anchorNode!==b.node||m.anchorOffset!==b.offset||m.focusNode!==v.node||m.focusOffset!==v.offset)){var y=h.createRange();y.setStart(b.node,b.offset),m.removeAllRanges(),x>g?(m.addRange(y),m.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),m.addRange(y))}}}}for(h=[],m=l;m=m.parentNode;)m.nodeType===1&&h.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<h.length;l++){var _=h[l];_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}bu=!!Am,Tm=Am=null}finally{Ct=n,xt.p=s,Ue.T=a}}e.current=t,Ra=2}}function H_(){if(Ra===2){Ra=0;var e=En,t=Ui,a=(t.flags&8772)!==0;if(t.subtreeFlags&8772||a){a=Ue.T,Ue.T=null;var s=xt.p;xt.p=2;var n=Ct;Ct|=4;try{S_(e,t.alternate,t)}finally{Ct=n,xt.p=s,Ue.T=a}}Ra=3}}function V_(){if(Ra===4||Ra===3){Ra=0,F1();var e=En,t=Ui,a=bi,s=k_;t.subtreeFlags&10256||t.flags&10256?Ra=5:(Ra=0,Ui=En=null,G_(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(Sn=null),Np(a),t=t.stateNode,us&&typeof us.onCommitFiberRoot=="function")try{us.onCommitFiberRoot(jc,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=Ue.T,n=xt.p,xt.p=2,Ue.T=null;try{for(var o=e.onRecoverableError,i=0;i<s.length;i++){var l=s[i];o(l.value,{componentStack:l.stack})}}finally{Ue.T=t,xt.p=n}}bi&3&&Ju(),ur(e),n=e.pendingLanes,a&4194090&&n&42?e===Sm?Hl++:(Hl=0,Sm=e):Hl=0,Mc(0)}}function G_(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Tc(t)))}function Ju(e){return $_(),H_(),V_(),Y_()}function Y_(){if(Ra!==5)return!1;var e=En,t=jm;jm=0;var a=Np(bi),s=Ue.T,n=xt.p;try{xt.p=32>a?32:a,Ue.T=null,a=wm,wm=null;var o=En,i=bi;if(Ra=0,Ui=En=null,bi=0,Ct&6)throw Error(ae(331));var l=Ct;if(Ct|=4,z_(o.current),R_(o,o.current,i,a),Ct=l,Mc(0,!1),us&&typeof us.onPostCommitFiberRoot=="function")try{us.onPostCommitFiberRoot(jc,o)}catch{}return!0}finally{xt.p=n,Ue.T=s,G_(e,t)}}function jx(e,t,a){t=Ss(a,t),t=gm(e.stateNode,t,2),e=wn(e,t,2),e!==null&&(Sc(e,2),ur(e))}function Bt(e,t,a){if(e.tag===3)jx(e,e,a);else for(;t!==null;){if(t.tag===3){jx(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Sn===null||!Sn.has(s))){e=Ss(a,e),a=d_(2),s=wn(t,a,2),s!==null&&(u_(a,s,t,e),Sc(s,2),ur(s));break}}t=t.return}}function fh(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new fA;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(a)||(rv=!0,n.add(a),e=gA.bind(null,e,t,a),t.then(e,e))}function gA(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Vt===e&&(ut&a)===a&&(la===4||la===3&&(ut&62914560)===ut&&300>or()-ov?!(Ct&2)&&Bi(e,0):nv|=a,qi===ut&&(qi=0)),ur(e)}function Q_(e,t){t===0&&(t=$y()),e=Wi(e,t),e!==null&&(Sc(e,t),ur(e))}function xA(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Q_(e,a)}function yA(e,t){var a=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(a=n.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(ae(314))}s!==null&&s.delete(t),Q_(e,a)}function bA(e,t){return Sp(e,t)}var hu=null,Jo=null,Nm=!1,mu=!1,hh=!1,fo=0;function ur(e){e!==Jo&&e.next===null&&(Jo===null?hu=Jo=e:Jo=Jo.next=e),mu=!0,Nm||(Nm=!0,jA())}function Mc(e,t){if(!hh&&mu){hh=!0;do for(var a=!1,s=hu;s!==null;){if(e!==0){var n=s.pendingLanes;if(n===0)var o=0;else{var i=s.suspendedLanes,l=s.pingedLanes;o=(1<<31-fs(42|e)+1)-1,o&=n&~(i&~l),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(a=!0,wx(s,o))}else o=ut,o=qu(s,s===Vt?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(o&3)||wc(s,o)||(a=!0,wx(s,o));s=s.next}while(a);hh=!1}}function _A(){K_()}function K_(){mu=Nm=!1;var e=0;fo!==0&&(RA()&&(e=fo),fo=0);for(var t=or(),a=null,s=hu;s!==null;){var n=s.next,o=X_(s,t);o===0?(s.next=null,a===null?hu=n:a.next=n,n===null&&(Jo=a)):(a=s,(e!==0||o&3)&&(mu=!0)),s=n}Mc(e)}function X_(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var i=31-fs(o),l=1<<i,c=n[i];c===-1?(!(l&a)||l&s)&&(n[i]=Y1(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}if(t=Vt,a=ut,a=qu(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(Nt===2||Nt===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Ff(s),e.callbackNode=null,e.callbackPriority=0;if(!(a&3)||wc(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&Ff(s),Np(a)){case 2:case 8:a=qy;break;case 32:a=Kd;break;case 268435456:a=Uy;break;default:a=Kd}return s=Z_.bind(null,e),a=Sp(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&Ff(s),e.callbackPriority=2,e.callbackNode=null,2}function Z_(e,t){if(Ra!==0&&Ra!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ju()&&e.callbackNode!==a)return null;var s=ut;return s=qu(e,e===Vt?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(L_(e,s,t),X_(e,or()),e.callbackNode!=null&&e.callbackNode===a?Z_.bind(null,e):null)}function wx(e,t){if(Ju())return null;L_(e,t,!0)}function jA(){OA(function(){Ct&6?Sp(Fy,_A):K_()})}function lv(){return fo===0&&(fo=By()),fo}function Sx(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Cd(""+e)}function Ex(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function wA(e,t,a,s,n){if(t==="submit"&&a&&a.stateNode===n){var o=Sx((n[Wa]||null).action),i=s.submitter;i&&(t=(t=i[Wa]||null)?Sx(t.formAction):i.getAttribute("formAction"),t!==null&&(o=t,i=null));var l=new Uu("action","action",null,s,n);e.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(fo!==0){var c=i?Ex(n,i):new FormData(n);pm(a,{pending:!0,data:c,method:n.method,action:o},null,c)}}else typeof o=="function"&&(l.preventDefault(),c=i?Ex(n,i):new FormData(n),pm(a,{pending:!0,data:c,method:n.method,action:o},o,c))},currentTarget:n}]})}}for(var mh=0;mh<sm.length;mh++){var ph=sm[mh],SA=ph.toLowerCase(),EA=ph[0].toUpperCase()+ph.slice(1);Gs(SA,"on"+EA)}Gs(fb,"onAnimationEnd");Gs(hb,"onAnimationIteration");Gs(mb,"onAnimationStart");Gs("dblclick","onDoubleClick");Gs("focusin","onFocus");Gs("focusout","onBlur");Gs(BC,"onTransitionRun");Gs($C,"onTransitionStart");Gs(HC,"onTransitionCancel");Gs(pb,"onTransitionEnd");Mi("onMouseEnter",["mouseout","mouseover"]);Mi("onMouseLeave",["mouseout","mouseover"]);Mi("onPointerEnter",["pointerout","pointerover"]);Mi("onPointerLeave",["pointerout","pointerover"]);Do("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Do("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Do("onBeforeInput",["compositionend","keypress","textInput","paste"]);Do("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Do("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Do("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ac));function J_(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],n=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var i=s.length-1;0<=i;i--){var l=s[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&n.isPropagationStopped())break e;o=l,n.currentTarget=d;try{o(n)}catch(f){iu(f)}n.currentTarget=null,o=c}else for(i=0;i<s.length;i++){if(l=s[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&n.isPropagationStopped())break e;o=l,n.currentTarget=d;try{o(n)}catch(f){iu(f)}n.currentTarget=null,o=c}}}}function lt(e,t){var a=t[Xh];a===void 0&&(a=t[Xh]=new Set);var s=e+"__bubble";a.has(s)||(W_(t,e,2,!1),a.add(s))}function vh(e,t,a){var s=0;t&&(s|=4),W_(a,e,s,t)}var dd="_reactListening"+Math.random().toString(36).slice(2);function cv(e){if(!e[dd]){e[dd]=!0,Yy.forEach(function(a){a!=="selectionchange"&&(NA.has(a)||vh(a,!1,e),vh(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[dd]||(t[dd]=!0,vh("selectionchange",!1,t))}}function W_(e,t,a,s){switch(uj(t)){case 2:var n=WA;break;case 8:n=e2;break;default:n=hv}a=n.bind(null,t,a,e),n=void 0,!em||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):n!==void 0?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function gh(e,t,a,s,n){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var l=s.stateNode.containerInfo;if(l===n)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&i.stateNode.containerInfo===n)return;i=i.return}for(;l!==null;){if(i=si(l),i===null)return;if(c=i.tag,c===5||c===6||c===26||c===27){s=o=i;continue e}l=l.parentNode}}s=s.return}tb(function(){var d=o,f=Tp(a),h=[];e:{var p=vb.get(e);if(p!==void 0){var m=Uu,j=e;switch(e){case"keypress":if(Td(a)===0)break e;case"keydown":case"keyup":m=bC;break;case"focusin":j="focus",m=Yf;break;case"focusout":j="blur",m=Yf;break;case"beforeblur":case"afterblur":m=Yf;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Og;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=lC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=wC;break;case fb:case hb:case mb:m=uC;break;case pb:m=EC;break;case"scroll":case"scrollend":m=oC;break;case"wheel":m=CC;break;case"copy":case"cut":case"paste":m=hC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Mg;break;case"toggle":case"beforetoggle":m=TC}var x=(t&4)!==0,g=!x&&(e==="scroll"||e==="scrollend"),b=x?p!==null?p+"Capture":null:p;x=[];for(var v=d,y;v!==null;){var _=v;if(y=_.stateNode,_=_.tag,_!==5&&_!==26&&_!==27||y===null||b===null||(_=Xl(v,b),_!=null&&x.push(sc(v,_,y))),g)break;v=v.return}0<x.length&&(p=new m(p,j,null,a,f),h.push({event:p,listeners:x}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&a!==Wh&&(j=a.relatedTarget||a.fromElement)&&(si(j)||j[Zi]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(j=a.relatedTarget||a.toElement,m=d,j=j?si(j):null,j!==null&&(g=_c(j),x=j.tag,j!==g||x!==5&&x!==27&&x!==6)&&(j=null)):(m=null,j=d),m!==j)){if(x=Og,_="onMouseLeave",b="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(x=Mg,_="onPointerLeave",b="onPointerEnter",v="pointer"),g=m==null?p:Nl(m),y=j==null?p:Nl(j),p=new x(_,v+"leave",m,a,f),p.target=g,p.relatedTarget=y,_=null,si(f)===d&&(x=new x(b,v+"enter",j,a,f),x.target=y,x.relatedTarget=g,_=x),g=_,m&&j)t:{for(x=m,b=j,v=0,y=x;y;y=Fo(y))v++;for(y=0,_=b;_;_=Fo(_))y++;for(;0<v-y;)x=Fo(x),v--;for(;0<y-v;)b=Fo(b),y--;for(;v--;){if(x===b||b!==null&&x===b.alternate)break t;x=Fo(x),b=Fo(b)}x=null}else x=null;m!==null&&Nx(h,p,m,x,!1),j!==null&&g!==null&&Nx(h,g,j,x,!0)}}e:{if(p=d?Nl(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var w=Ig;else if(Lg(p))if(ib)w=FC;else{w=LC;var S=PC}else m=p.nodeName,!m||m.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?d&&Ap(d.elementType)&&(w=Ig):w=IC;if(w&&(w=w(e,d))){ob(h,w,a,f);break e}S&&S(e,p,d),e==="focusout"&&d&&p.type==="number"&&d.memoizedProps.value!=null&&Jh(p,"number",p.value)}switch(S=d?Nl(d):window,e){case"focusin":(Lg(S)||S.contentEditable==="true")&&(oi=S,tm=d,Ml=null);break;case"focusout":Ml=tm=oi=null;break;case"mousedown":am=!0;break;case"contextmenu":case"mouseup":case"dragend":am=!1,$g(h,a,f);break;case"selectionchange":if(UC)break;case"keydown":case"keyup":$g(h,a,f)}var N;if(Op)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ni?rb(e,a)&&(C="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(C="onCompositionStart");C&&(sb&&a.locale!=="ko"&&(ni||C!=="onCompositionStart"?C==="onCompositionEnd"&&ni&&(N=ab()):(gn=f,Rp="value"in gn?gn.value:gn.textContent,ni=!0)),S=pu(d,C),0<S.length&&(C=new zg(C,e,null,a,f),h.push({event:C,listeners:S}),N?C.data=N:(N=nb(a),N!==null&&(C.data=N)))),(N=DC?OC(e,a):zC(e,a))&&(C=pu(d,"onBeforeInput"),0<C.length&&(S=new zg("onBeforeInput","beforeinput",null,a,f),h.push({event:S,listeners:C}),S.data=N)),wA(h,e,d,a,f)}J_(h,t)})}function sc(e,t,a){return{instance:e,listener:t,currentTarget:a}}function pu(e,t){for(var a=t+"Capture",s=[];e!==null;){var n=e,o=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||o===null||(n=Xl(e,a),n!=null&&s.unshift(sc(e,n,o)),n=Xl(e,t),n!=null&&s.push(sc(e,n,o))),e.tag===3)return s;e=e.return}return[]}function Fo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Nx(e,t,a,s,n){for(var o=t._reactName,i=[];a!==null&&a!==s;){var l=a,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||d===null||(c=d,n?(d=Xl(a,o),d!=null&&i.unshift(sc(a,d,c))):n||(d=Xl(a,o),d!=null&&i.push(sc(a,d,c)))),a=a.return}i.length!==0&&e.push({event:t,listeners:i})}var CA=/\r\n?/g,AA=/\u0000|\uFFFD/g;function Cx(e){return(typeof e=="string"?e:""+e).replace(CA,`
`).replace(AA,"")}function ej(e,t){return t=Cx(t),Cx(e)===t}function Wu(){}function Pt(e,t,a,s,n,o){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||ki(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&ki(e,""+s);break;case"className":sd(e,"class",s);break;case"tabIndex":sd(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":sd(e,a,s);break;case"style":eb(e,s,o);break;case"data":if(t!=="object"){sd(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Cd(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(a==="formAction"?(t!=="input"&&Pt(e,t,"name",n.name,n,null),Pt(e,t,"formEncType",n.formEncType,n,null),Pt(e,t,"formMethod",n.formMethod,n,null),Pt(e,t,"formTarget",n.formTarget,n,null)):(Pt(e,t,"encType",n.encType,n,null),Pt(e,t,"method",n.method,n,null),Pt(e,t,"target",n.target,n,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Cd(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=Wu);break;case"onScroll":s!=null&&lt("scroll",e);break;case"onScrollEnd":s!=null&&lt("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(ae(61));if(a=s.__html,a!=null){if(n.children!=null)throw Error(ae(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=Cd(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":lt("beforetoggle",e),lt("toggle",e),Nd(e,"popover",s);break;case"xlinkActuate":pr(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":pr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":pr(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":pr(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":pr(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":pr(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":pr(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":pr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":pr(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Nd(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=rC.get(a)||a,Nd(e,a,s))}}function Cm(e,t,a,s,n,o){switch(a){case"style":eb(e,s,o);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(ae(61));if(a=s.__html,a!=null){if(n.children!=null)throw Error(ae(60));e.innerHTML=a}}break;case"children":typeof s=="string"?ki(e,s):(typeof s=="number"||typeof s=="bigint")&&ki(e,""+s);break;case"onScroll":s!=null&&lt("scroll",e);break;case"onScrollEnd":s!=null&&lt("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Wu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qy.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(n=a.endsWith("Capture"),t=a.slice(2,n?a.length-7:void 0),o=e[Wa]||null,o=o!=null?o[a]:null,typeof o=="function"&&e.removeEventListener(t,o,n),typeof s=="function")){typeof o!="function"&&o!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,n);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):Nd(e,a,s)}}}function Da(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lt("error",e),lt("load",e);var s=!1,n=!1,o;for(o in a)if(a.hasOwnProperty(o)){var i=a[o];if(i!=null)switch(o){case"src":s=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(ae(137,t));default:Pt(e,t,o,i,a,null)}}n&&Pt(e,t,"srcSet",a.srcSet,a,null),s&&Pt(e,t,"src",a.src,a,null);return;case"input":lt("invalid",e);var l=o=i=n=null,c=null,d=null;for(s in a)if(a.hasOwnProperty(s)){var f=a[s];if(f!=null)switch(s){case"name":n=f;break;case"type":i=f;break;case"checked":c=f;break;case"defaultChecked":d=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(ae(137,t));break;default:Pt(e,t,s,f,a,null)}}Zy(e,o,l,c,d,i,n,!1),Xd(e);return;case"select":lt("invalid",e),s=i=o=null;for(n in a)if(a.hasOwnProperty(n)&&(l=a[n],l!=null))switch(n){case"value":o=l;break;case"defaultValue":i=l;break;case"multiple":s=l;default:Pt(e,t,n,l,a,null)}t=o,a=i,e.multiple=!!s,t!=null?mi(e,!!s,t,!1):a!=null&&mi(e,!!s,a,!0);return;case"textarea":lt("invalid",e),o=n=s=null;for(i in a)if(a.hasOwnProperty(i)&&(l=a[i],l!=null))switch(i){case"value":s=l;break;case"defaultValue":n=l;break;case"children":o=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(ae(91));break;default:Pt(e,t,i,l,a,null)}Wy(e,s,n,o),Xd(e);return;case"option":for(c in a)if(a.hasOwnProperty(c)&&(s=a[c],s!=null))switch(c){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Pt(e,t,c,s,a,null)}return;case"dialog":lt("beforetoggle",e),lt("toggle",e),lt("cancel",e),lt("close",e);break;case"iframe":case"object":lt("load",e);break;case"video":case"audio":for(s=0;s<ac.length;s++)lt(ac[s],e);break;case"image":lt("error",e),lt("load",e);break;case"details":lt("toggle",e);break;case"embed":case"source":case"link":lt("error",e),lt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in a)if(a.hasOwnProperty(d)&&(s=a[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(ae(137,t));default:Pt(e,t,d,s,a,null)}return;default:if(Ap(t)){for(f in a)a.hasOwnProperty(f)&&(s=a[f],s!==void 0&&Cm(e,t,f,s,a,void 0));return}}for(l in a)a.hasOwnProperty(l)&&(s=a[l],s!=null&&Pt(e,t,l,s,a,null))}function TA(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,o=null,i=null,l=null,c=null,d=null,f=null;for(m in a){var h=a[m];if(a.hasOwnProperty(m)&&h!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":c=h;default:s.hasOwnProperty(m)||Pt(e,t,m,null,s,h)}}for(var p in s){var m=s[p];if(h=a[p],s.hasOwnProperty(p)&&(m!=null||h!=null))switch(p){case"type":o=m;break;case"name":n=m;break;case"checked":d=m;break;case"defaultChecked":f=m;break;case"value":i=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(ae(137,t));break;default:m!==h&&Pt(e,t,p,m,s,h)}}Zh(e,i,l,c,d,f,o,n);return;case"select":m=i=l=p=null;for(o in a)if(c=a[o],a.hasOwnProperty(o)&&c!=null)switch(o){case"value":break;case"multiple":m=c;default:s.hasOwnProperty(o)||Pt(e,t,o,null,s,c)}for(n in s)if(o=s[n],c=a[n],s.hasOwnProperty(n)&&(o!=null||c!=null))switch(n){case"value":p=o;break;case"defaultValue":l=o;break;case"multiple":i=o;default:o!==c&&Pt(e,t,n,o,s,c)}t=l,a=i,s=m,p!=null?mi(e,!!a,p,!1):!!s!=!!a&&(t!=null?mi(e,!!a,t,!0):mi(e,!!a,a?[]:"",!1));return;case"textarea":m=p=null;for(l in a)if(n=a[l],a.hasOwnProperty(l)&&n!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Pt(e,t,l,null,s,n)}for(i in s)if(n=s[i],o=a[i],s.hasOwnProperty(i)&&(n!=null||o!=null))switch(i){case"value":p=n;break;case"defaultValue":m=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(ae(91));break;default:n!==o&&Pt(e,t,i,n,s,o)}Jy(e,p,m);return;case"option":for(var j in a)if(p=a[j],a.hasOwnProperty(j)&&p!=null&&!s.hasOwnProperty(j))switch(j){case"selected":e.selected=!1;break;default:Pt(e,t,j,null,s,p)}for(c in s)if(p=s[c],m=a[c],s.hasOwnProperty(c)&&p!==m&&(p!=null||m!=null))switch(c){case"selected":e.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Pt(e,t,c,p,s,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var x in a)p=a[x],a.hasOwnProperty(x)&&p!=null&&!s.hasOwnProperty(x)&&Pt(e,t,x,null,s,p);for(d in s)if(p=s[d],m=a[d],s.hasOwnProperty(d)&&p!==m&&(p!=null||m!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(ae(137,t));break;default:Pt(e,t,d,p,s,m)}return;default:if(Ap(t)){for(var g in a)p=a[g],a.hasOwnProperty(g)&&p!==void 0&&!s.hasOwnProperty(g)&&Cm(e,t,g,void 0,s,p);for(f in s)p=s[f],m=a[f],!s.hasOwnProperty(f)||p===m||p===void 0&&m===void 0||Cm(e,t,f,p,s,m);return}}for(var b in a)p=a[b],a.hasOwnProperty(b)&&p!=null&&!s.hasOwnProperty(b)&&Pt(e,t,b,null,s,p);for(h in s)p=s[h],m=a[h],!s.hasOwnProperty(h)||p===m||p==null&&m==null||Pt(e,t,h,p,s,m)}var Am=null,Tm=null;function vu(e){return e.nodeType===9?e:e.ownerDocument}function Ax(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tj(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Rm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xh=null;function RA(){var e=window.event;return e&&e.type==="popstate"?e===xh?!1:(xh=e,!0):(xh=null,!1)}var aj=typeof setTimeout=="function"?setTimeout:void 0,DA=typeof clearTimeout=="function"?clearTimeout:void 0,Tx=typeof Promise=="function"?Promise:void 0,OA=typeof queueMicrotask=="function"?queueMicrotask:typeof Tx<"u"?function(e){return Tx.resolve(null).then(e).catch(zA)}:aj;function zA(e){setTimeout(function(){throw e})}function Pn(e){return e==="head"}function Rx(e,t){var a=t,s=0,n=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(0<s&&8>s){a=s;var i=e.ownerDocument;if(a&1&&Vl(i.documentElement),a&2&&Vl(i.body),a&4)for(a=i.head,Vl(a),i=a.firstChild;i;){var l=i.nextSibling,c=i.nodeName;i[Ec]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&i.rel.toLowerCase()==="stylesheet"||a.removeChild(i),i=l}}if(n===0){e.removeChild(o),lc(t);return}n--}else a==="$"||a==="$?"||a==="$!"?n++:s=a.charCodeAt(0)-48;else s=0;a=o}while(a);lc(t)}function Dm(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Dm(a),Cp(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function MA(e,t,a,s){for(;e.nodeType===1;){var n=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Ec])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=Bs(e.nextSibling),e===null)break}return null}function kA(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Bs(e.nextSibling),e===null))return null;return e}function Om(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function PA(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Bs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var zm=null;function Dx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function sj(e,t,a){switch(t=vu(a),e){case"html":if(e=t.documentElement,!e)throw Error(ae(452));return e;case"head":if(e=t.head,!e)throw Error(ae(453));return e;case"body":if(e=t.body,!e)throw Error(ae(454));return e;default:throw Error(ae(451))}}function Vl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Cp(e)}var As=new Map,Ox=new Set;function gu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var qr=xt.d;xt.d={f:LA,r:IA,D:FA,C:qA,L:UA,m:BA,X:HA,S:$A,M:VA};function LA(){var e=qr.f(),t=Xu();return e||t}function IA(e){var t=Ji(e);t!==null&&t.tag===5&&t.type==="form"?Xb(t):qr.r(e)}var tl=typeof document>"u"?null:document;function rj(e,t,a){var s=tl;if(s&&typeof t=="string"&&t){var n=ws(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof a=="string"&&(n+='[crossorigin="'+a+'"]'),Ox.has(n)||(Ox.add(n),e={rel:e,crossOrigin:a,href:t},s.querySelector(n)===null&&(t=s.createElement("link"),Da(t,"link",e),Ea(t),s.head.appendChild(t)))}}function FA(e){qr.D(e),rj("dns-prefetch",e,null)}function qA(e,t){qr.C(e,t),rj("preconnect",e,t)}function UA(e,t,a){qr.L(e,t,a);var s=tl;if(s&&e&&t){var n='link[rel="preload"][as="'+ws(t)+'"]';t==="image"&&a&&a.imageSrcSet?(n+='[imagesrcset="'+ws(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(n+='[imagesizes="'+ws(a.imageSizes)+'"]')):n+='[href="'+ws(e)+'"]';var o=n;switch(t){case"style":o=$i(e);break;case"script":o=al(e)}As.has(o)||(e=Xt({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),As.set(o,e),s.querySelector(n)!==null||t==="style"&&s.querySelector(kc(o))||t==="script"&&s.querySelector(Pc(o))||(t=s.createElement("link"),Da(t,"link",e),Ea(t),s.head.appendChild(t)))}}function BA(e,t){qr.m(e,t);var a=tl;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+ws(s)+'"][href="'+ws(e)+'"]',o=n;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=al(e)}if(!As.has(o)&&(e=Xt({rel:"modulepreload",href:e},t),As.set(o,e),a.querySelector(n)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Pc(o)))return}s=a.createElement("link"),Da(s,"link",e),Ea(s),a.head.appendChild(s)}}}function $A(e,t,a){qr.S(e,t,a);var s=tl;if(s&&e){var n=hi(s).hoistableStyles,o=$i(e);t=t||"default";var i=n.get(o);if(!i){var l={loading:0,preload:null};if(i=s.querySelector(kc(o)))l.loading=5;else{e=Xt({rel:"stylesheet",href:e,"data-precedence":t},a),(a=As.get(o))&&dv(e,a);var c=i=s.createElement("link");Ea(c),Da(c,"link",e),c._p=new Promise(function(d,f){c.onload=d,c.onerror=f}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Pd(i,t,s)}i={type:"stylesheet",instance:i,count:1,state:l},n.set(o,i)}}}function HA(e,t){qr.X(e,t);var a=tl;if(a&&e){var s=hi(a).hoistableScripts,n=al(e),o=s.get(n);o||(o=a.querySelector(Pc(n)),o||(e=Xt({src:e,async:!0},t),(t=As.get(n))&&uv(e,t),o=a.createElement("script"),Ea(o),Da(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(n,o))}}function VA(e,t){qr.M(e,t);var a=tl;if(a&&e){var s=hi(a).hoistableScripts,n=al(e),o=s.get(n);o||(o=a.querySelector(Pc(n)),o||(e=Xt({src:e,async:!0,type:"module"},t),(t=As.get(n))&&uv(e,t),o=a.createElement("script"),Ea(o),Da(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(n,o))}}function zx(e,t,a,s){var n=(n=_n.current)?gu(n):null;if(!n)throw Error(ae(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=$i(a.href),a=hi(n).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=$i(a.href);var o=hi(n).hoistableStyles,i=o.get(e);if(i||(n=n.ownerDocument||n,i={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,i),(o=n.querySelector(kc(e)))&&!o._p&&(i.instance=o,i.state.loading=5),As.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},As.set(e,a),o||GA(n,e,a,i.state))),t&&s===null)throw Error(ae(528,""));return i}if(t&&s!==null)throw Error(ae(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=al(a),a=hi(n).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(ae(444,e))}}function $i(e){return'href="'+ws(e)+'"'}function kc(e){return'link[rel="stylesheet"]['+e+"]"}function nj(e){return Xt({},e,{"data-precedence":e.precedence,precedence:null})}function GA(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Da(t,"link",a),Ea(t),e.head.appendChild(t))}function al(e){return'[src="'+ws(e)+'"]'}function Pc(e){return"script[async]"+e}function Mx(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+ws(a.href)+'"]');if(s)return t.instance=s,Ea(s),s;var n=Xt({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Ea(s),Da(s,"style",n),Pd(s,a.precedence,e),t.instance=s;case"stylesheet":n=$i(a.href);var o=e.querySelector(kc(n));if(o)return t.state.loading|=4,t.instance=o,Ea(o),o;s=nj(a),(n=As.get(n))&&dv(s,n),o=(e.ownerDocument||e).createElement("link"),Ea(o);var i=o;return i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),Da(o,"link",s),t.state.loading|=4,Pd(o,a.precedence,e),t.instance=o;case"script":return o=al(a.src),(n=e.querySelector(Pc(o)))?(t.instance=n,Ea(n),n):(s=a,(n=As.get(o))&&(s=Xt({},a),uv(s,n)),e=e.ownerDocument||e,n=e.createElement("script"),Ea(n),Da(n,"link",s),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(ae(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(s=t.instance,t.state.loading|=4,Pd(s,a.precedence,e));return t.instance}function Pd(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=s.length?s[s.length-1]:null,o=n,i=0;i<s.length;i++){var l=s[i];if(l.dataset.precedence===t)o=l;else if(o!==n)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function dv(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function uv(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ld=null;function kx(e,t,a){if(Ld===null){var s=new Map,n=Ld=new Map;n.set(a,s)}else n=Ld,s=n.get(a),s||(s=new Map,n.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),n=0;n<a.length;n++){var o=a[n];if(!(o[Ec]||o[La]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var i=o.getAttribute(t)||"";i=e+i;var l=s.get(i);l?l.push(o):s.set(i,[o])}}return s}function Px(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function YA(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function oj(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var rc=null;function QA(){}function KA(e,t,a){if(rc===null)throw Error(ae(475));var s=rc;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var n=$i(a.href),o=e.querySelector(kc(n));if(o){e=o._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=xu.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=o,Ea(o);return}o=e.ownerDocument||e,a=nj(a),(n=As.get(n))&&dv(a,n),o=o.createElement("link"),Ea(o);var i=o;i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),Da(o,"link",a),t.instance=o}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(s.count++,t=xu.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function XA(){if(rc===null)throw Error(ae(475));var e=rc;return e.stylesheets&&e.count===0&&Mm(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&Mm(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function xu(){if(this.count--,this.count===0){if(this.stylesheets)Mm(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var yu=null;function Mm(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,yu=new Map,t.forEach(ZA,e),yu=null,xu.call(e))}function ZA(e,t){if(!(t.state.loading&4)){var a=yu.get(e);if(a)var s=a.get(null);else{a=new Map,yu.set(e,a);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<n.length;o++){var i=n[o];(i.nodeName==="LINK"||i.getAttribute("media")!=="not all")&&(a.set(i.dataset.precedence,i),s=i)}s&&a.set(null,s)}n=t.instance,i=n.getAttribute("data-precedence"),o=a.get(i)||s,o===s&&a.set(null,n),a.set(i,n),this.count++,s=xu.bind(this),n.addEventListener("load",s),n.addEventListener("error",s),o?o.parentNode.insertBefore(n,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var nc={$$typeof:Sr,Provider:null,Consumer:null,_currentValue:no,_currentValue2:no,_threadCount:0};function JA(e,t,a,s,n,o,i,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qf(0),this.hiddenUpdates=qf(null),this.identifierPrefix=s,this.onUncaughtError=n,this.onCaughtError=o,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function ij(e,t,a,s,n,o,i,l,c,d,f,h){return e=new JA(e,t,a,i,l,c,d,h),t=1,o===!0&&(t|=24),o=ds(3,null,null,t),e.current=o,o.stateNode=e,t=Fp(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:s,isDehydrated:a,cache:t},Up(o),e}function lj(e){return e?(e=ci,e):ci}function cj(e,t,a,s,n,o){n=lj(n),s.context===null?s.context=n:s.pendingContext=n,s=jn(t),s.payload={element:a},o=o===void 0?null:o,o!==null&&(s.callback=o),a=wn(e,s,t),a!==null&&(ms(a,e,t),Ll(a,e,t))}function Lx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function fv(e,t){Lx(e,t),(e=e.alternate)&&Lx(e,t)}function dj(e){if(e.tag===13){var t=Wi(e,67108864);t!==null&&ms(t,e,67108864),fv(e,67108864)}}var bu=!0;function WA(e,t,a,s){var n=Ue.T;Ue.T=null;var o=xt.p;try{xt.p=2,hv(e,t,a,s)}finally{xt.p=o,Ue.T=n}}function e2(e,t,a,s){var n=Ue.T;Ue.T=null;var o=xt.p;try{xt.p=8,hv(e,t,a,s)}finally{xt.p=o,Ue.T=n}}function hv(e,t,a,s){if(bu){var n=km(s);if(n===null)gh(e,t,s,_u,a),Ix(e,s);else if(a2(n,e,t,a,s))s.stopPropagation();else if(Ix(e,s),t&4&&-1<t2.indexOf(e)){for(;n!==null;){var o=Ji(n);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var i=Qn(o.pendingLanes);if(i!==0){var l=o;for(l.pendingLanes|=2,l.entangledLanes|=2;i;){var c=1<<31-fs(i);l.entanglements[1]|=c,i&=~c}ur(o),!(Ct&6)&&(uu=or()+500,Mc(0))}}break;case 13:l=Wi(o,2),l!==null&&ms(l,o,2),Xu(),fv(o,2)}if(o=km(s),o===null&&gh(e,t,s,_u,a),o===n)break;n=o}n!==null&&s.stopPropagation()}else gh(e,t,s,null,a)}}function km(e){return e=Tp(e),mv(e)}var _u=null;function mv(e){if(_u=null,e=si(e),e!==null){var t=_c(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=ky(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return _u=e,null}function uj(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(q1()){case Fy:return 2;case qy:return 8;case Kd:case U1:return 32;case Uy:return 268435456;default:return 32}default:return 32}}var Pm=!1,Nn=null,Cn=null,An=null,oc=new Map,ic=new Map,cn=[],t2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ix(e,t){switch(e){case"focusin":case"focusout":Nn=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":oc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ic.delete(t.pointerId)}}function bl(e,t,a,s,n,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:o,targetContainers:[n]},t!==null&&(t=Ji(t),t!==null&&dj(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function a2(e,t,a,s,n){switch(t){case"focusin":return Nn=bl(Nn,e,t,a,s,n),!0;case"dragenter":return Cn=bl(Cn,e,t,a,s,n),!0;case"mouseover":return An=bl(An,e,t,a,s,n),!0;case"pointerover":var o=n.pointerId;return oc.set(o,bl(oc.get(o)||null,e,t,a,s,n)),!0;case"gotpointercapture":return o=n.pointerId,ic.set(o,bl(ic.get(o)||null,e,t,a,s,n)),!0}return!1}function fj(e){var t=si(e.target);if(t!==null){var a=_c(t);if(a!==null){if(t=a.tag,t===13){if(t=ky(a),t!==null){e.blockedOn=t,K1(e.priority,function(){if(a.tag===13){var s=hs();s=Ep(s);var n=Wi(a,s);n!==null&&ms(n,a,s),fv(a,s)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Id(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=km(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);Wh=s,a.target.dispatchEvent(s),Wh=null}else return t=Ji(a),t!==null&&dj(t),e.blockedOn=a,!1;t.shift()}return!0}function Fx(e,t,a){Id(e)&&a.delete(t)}function s2(){Pm=!1,Nn!==null&&Id(Nn)&&(Nn=null),Cn!==null&&Id(Cn)&&(Cn=null),An!==null&&Id(An)&&(An=null),oc.forEach(Fx),ic.forEach(Fx)}function ud(e,t){e.blockedOn===t&&(e.blockedOn=null,Pm||(Pm=!0,ba.unstable_scheduleCallback(ba.unstable_NormalPriority,s2)))}var fd=null;function qx(e){fd!==e&&(fd=e,ba.unstable_scheduleCallback(ba.unstable_NormalPriority,function(){fd===e&&(fd=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],n=e[t+2];if(typeof s!="function"){if(mv(s||a)===null)continue;break}var o=Ji(a);o!==null&&(e.splice(t,3),t-=3,pm(o,{pending:!0,data:n,method:a.method,action:s},s,n))}}))}function lc(e){function t(c){return ud(c,e)}Nn!==null&&ud(Nn,e),Cn!==null&&ud(Cn,e),An!==null&&ud(An,e),oc.forEach(t),ic.forEach(t);for(var a=0;a<cn.length;a++){var s=cn[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<cn.length&&(a=cn[0],a.blockedOn===null);)fj(a),a.blockedOn===null&&cn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var n=a[s],o=a[s+1],i=n[Wa]||null;if(typeof o=="function")i||qx(a);else if(i){var l=null;if(o&&o.hasAttribute("formAction")){if(n=o,i=o[Wa]||null)l=i.formAction;else if(mv(n)!==null)continue}else l=i.action;typeof l=="function"?a[s+1]=l:(a.splice(s,3),s-=3),qx(a)}}}function pv(e){this._internalRoot=e}ef.prototype.render=pv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ae(409));var a=t.current,s=hs();cj(a,s,e,t,null,null)};ef.prototype.unmount=pv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;cj(e.current,2,null,e,null,null),Xu(),t[Zi]=null}};function ef(e){this._internalRoot=e}ef.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gy();e={blockedOn:null,target:e,priority:t};for(var a=0;a<cn.length&&t!==0&&t<cn[a].priority;a++);cn.splice(a,0,e),a===0&&fj(e)}};var Ux=zy.version;if(Ux!=="19.1.1")throw Error(ae(527,Ux,"19.1.1"));xt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ae(188)):(e=Object.keys(e).join(","),Error(ae(268,e)));return e=z1(t),e=e!==null?Py(e):null,e=e===null?null:e.stateNode,e};var r2={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Ue,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{jc=hd.inject(r2),us=hd}catch{}}Iu.createRoot=function(e,t){if(!My(e))throw Error(ae(299));var a=!1,s="",n=i_,o=l_,i=c_,l=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(i=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=ij(e,1,!1,null,null,a,s,n,o,i,l,null),e[Zi]=t.current,cv(e),new pv(t)};Iu.hydrateRoot=function(e,t,a){if(!My(e))throw Error(ae(299));var s=!1,n="",o=i_,i=l_,l=c_,c=null,d=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(i=a.onCaughtError),a.onRecoverableError!==void 0&&(l=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(c=a.unstable_transitionCallbacks),a.formState!==void 0&&(d=a.formState)),t=ij(e,1,!0,t,a??null,s,n,o,i,l,c,d),t.context=lj(null),a=t.current,s=hs(),s=Ep(s),n=jn(s),n.callback=null,wn(a,n,s),a=s,t.current.lanes=a,Sc(t,a),ur(t),e[Zi]=t.current,cv(e),new ef(t)};Iu.version="19.1.1";function hj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hj)}catch(e){console.error(e)}}hj(),yy.exports=Iu;var n2=yy.exports,o2=(e,t,a,s,n,o,i,l)=>{let c=document.documentElement,d=["light","dark"];function f(m){(Array.isArray(e)?e:[e]).forEach(j=>{let x=j==="class",g=x&&o?n.map(b=>o[b]||b):n;x?(c.classList.remove(...g),c.classList.add(o&&o[m]?o[m]:m)):c.setAttribute(j,m)}),h(m)}function h(m){l&&d.includes(m)&&(c.style.colorScheme=m)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)f(s);else try{let m=localStorage.getItem(t)||a,j=i&&m==="system"?p():m;f(j)}catch{}},i2=u.createContext(void 0),l2={setTheme:e=>{},themes:[]},c2=()=>{var e;return(e=u.useContext(i2))!=null?e:l2};u.memo(({forcedTheme:e,storageKey:t,attribute:a,enableSystem:s,enableColorScheme:n,defaultTheme:o,value:i,themes:l,nonce:c,scriptProps:d})=>{let f=JSON.stringify([a,t,o,e,l,i,s,n]).slice(1,-1);return u.createElement("script",{...d,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${o2.toString()})(${f})`}})});var d2=e=>{switch(e){case"success":return h2;case"info":return p2;case"warning":return m2;case"error":return v2;default:return null}},u2=Array(12).fill(0),f2=({visible:e,className:t})=>le.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},le.createElement("div",{className:"sonner-spinner"},u2.map((a,s)=>le.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),h2=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),m2=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),p2=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),v2=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},le.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),g2=le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},le.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),le.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),x2=()=>{let[e,t]=le.useState(document.hidden);return le.useEffect(()=>{let a=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",a),()=>window.removeEventListener("visibilitychange",a)},[]),e},Lm=1,y2=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:a,...s}=e,n=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Lm++,o=this.toasts.find(l=>l.id===n),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),o?this.toasts=this.toasts.map(l=>l.id===n?(this.publish({...l,...e,id:n,title:a}),{...l,...e,id:n,dismissible:i,title:a}):l):this.addToast({title:a,...s,dismissible:i,id:n}),n},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(a=>a({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let a;t.loading!==void 0&&(a=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),n=a!==void 0,o,i=s.then(async c=>{if(o=["resolve",c],le.isValidElement(c))n=!1,this.create({id:a,type:"default",message:c});else if(_2(c)&&!c.ok){n=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,f=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:a,type:"error",message:d,description:f})}else if(t.success!==void 0){n=!1;let d=typeof t.success=="function"?await t.success(c):t.success,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:a,type:"success",message:d,description:f})}}).catch(async c=>{if(o=["reject",c],t.error!==void 0){n=!1;let d=typeof t.error=="function"?await t.error(c):t.error,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:a,type:"error",message:d,description:f})}}).finally(()=>{var c;n&&(this.dismiss(a),a=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>i.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof a!="string"&&typeof a!="number"?{unwrap:l}:Object.assign(a,{unwrap:l})},this.custom=(e,t)=>{let a=(t==null?void 0:t.id)||Lm++;return this.create({jsx:e(a),id:a,...t}),a},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Za=new y2,b2=(e,t)=>{let a=(t==null?void 0:t.id)||Lm++;return Za.addToast({title:e,...t,id:a}),a},_2=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",j2=b2,w2=()=>Za.toasts,S2=()=>Za.getActiveToasts();Object.assign(j2,{success:Za.success,info:Za.info,warning:Za.warning,error:Za.error,custom:Za.custom,message:Za.message,promise:Za.promise,dismiss:Za.dismiss,loading:Za.loading},{getHistory:w2,getToasts:S2});function E2(e,{insertAt:t}={}){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&a.firstChild?a.insertBefore(s,a.firstChild):a.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}E2(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function md(e){return e.label!==void 0}var N2=3,C2="32px",A2="16px",Bx=4e3,T2=356,R2=14,D2=20,O2=200;function Ms(...e){return e.filter(Boolean).join(" ")}function z2(e){let[t,a]=e.split("-"),s=[];return t&&s.push(t),a&&s.push(a),s}var M2=e=>{var t,a,s,n,o,i,l,c,d,f,h;let{invert:p,toast:m,unstyled:j,interacting:x,setHeights:g,visibleToasts:b,heights:v,index:y,toasts:_,expanded:w,removeToast:S,defaultRichColors:N,closeButton:C,style:O,cancelButtonStyle:A,actionButtonStyle:q,className:B="",descriptionClassName:ee="",duration:Q,position:X,gap:R,loadingIcon:Y,expandByDefault:$,classNames:E,icons:D,closeButtonAriaLabel:G="Close toast",pauseWhenPageIsHidden:M}=e,[K,H]=le.useState(null),[ne,pe]=le.useState(null),[k,P]=le.useState(!1),[ce,re]=le.useState(!1),[ie,oe]=le.useState(!1),[he,Te]=le.useState(!1),[Pe,Fe]=le.useState(!1),[J,xe]=le.useState(0),[I,de]=le.useState(0),_e=le.useRef(m.duration||Q||Bx),Se=le.useRef(null),ue=le.useRef(null),z=y===0,Ee=y+1<=b,Le=m.type,He=m.dismissible!==!1,Me=m.className||"",ft=m.descriptionClassName||"",dt=le.useMemo(()=>v.findIndex(qe=>qe.toastId===m.id)||0,[v,m.id]),ht=le.useMemo(()=>{var qe;return(qe=m.closeButton)!=null?qe:C},[m.closeButton,C]),ta=le.useMemo(()=>m.duration||Q||Bx,[m.duration,Q]),fa=le.useRef(0),va=le.useRef(0),yt=le.useRef(0),ra=le.useRef(null),[Gt,gs]=X.split("-"),ss=le.useMemo(()=>v.reduce((qe,fe,Ve)=>Ve>=dt?qe:qe+fe.height,0),[v,dt]),Vr=x2(),Bn=m.invert||p,$n=Le==="loading";va.current=le.useMemo(()=>dt*R+ss,[dt,ss]),le.useEffect(()=>{_e.current=ta},[ta]),le.useEffect(()=>{P(!0)},[]),le.useEffect(()=>{let qe=ue.current;if(qe){let fe=qe.getBoundingClientRect().height;return de(fe),g(Ve=>[{toastId:m.id,height:fe,position:m.position},...Ve]),()=>g(Ve=>Ve.filter(It=>It.toastId!==m.id))}},[g,m.id]),le.useLayoutEffect(()=>{if(!k)return;let qe=ue.current,fe=qe.style.height;qe.style.height="auto";let Ve=qe.getBoundingClientRect().height;qe.style.height=fe,de(Ve),g(It=>It.find(We=>We.toastId===m.id)?It.map(We=>We.toastId===m.id?{...We,height:Ve}:We):[{toastId:m.id,height:Ve,position:m.position},...It])},[k,m.title,m.description,g,m.id]);let Fa=le.useCallback(()=>{re(!0),xe(va.current),g(qe=>qe.filter(fe=>fe.toastId!==m.id)),setTimeout(()=>{S(m)},O2)},[m,S,g,va]);le.useEffect(()=>{if(m.promise&&Le==="loading"||m.duration===1/0||m.type==="loading")return;let qe;return w||x||M&&Vr?(()=>{if(yt.current<fa.current){let fe=new Date().getTime()-fa.current;_e.current=_e.current-fe}yt.current=new Date().getTime()})():_e.current!==1/0&&(fa.current=new Date().getTime(),qe=setTimeout(()=>{var fe;(fe=m.onAutoClose)==null||fe.call(m,m),Fa()},_e.current)),()=>clearTimeout(qe)},[w,x,m,Le,M,Vr,Fa]),le.useEffect(()=>{m.delete&&Fa()},[Fa,m.delete]);function Hn(){var qe,fe,Ve;return D!=null&&D.loading?le.createElement("div",{className:Ms(E==null?void 0:E.loader,(qe=m==null?void 0:m.classNames)==null?void 0:qe.loader,"sonner-loader"),"data-visible":Le==="loading"},D.loading):Y?le.createElement("div",{className:Ms(E==null?void 0:E.loader,(fe=m==null?void 0:m.classNames)==null?void 0:fe.loader,"sonner-loader"),"data-visible":Le==="loading"},Y):le.createElement(f2,{className:Ms(E==null?void 0:E.loader,(Ve=m==null?void 0:m.classNames)==null?void 0:Ve.loader),visible:Le==="loading"})}return le.createElement("li",{tabIndex:0,ref:ue,className:Ms(B,Me,E==null?void 0:E.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,E==null?void 0:E.default,E==null?void 0:E[Le],(a=m==null?void 0:m.classNames)==null?void 0:a[Le]),"data-sonner-toast":"","data-rich-colors":(s=m.richColors)!=null?s:N,"data-styled":!(m.jsx||m.unstyled||j),"data-mounted":k,"data-promise":!!m.promise,"data-swiped":Pe,"data-removed":ce,"data-visible":Ee,"data-y-position":Gt,"data-x-position":gs,"data-index":y,"data-front":z,"data-swiping":ie,"data-dismissible":He,"data-type":Le,"data-invert":Bn,"data-swipe-out":he,"data-swipe-direction":ne,"data-expanded":!!(w||$&&k),style:{"--index":y,"--toasts-before":y,"--z-index":_.length-y,"--offset":`${ce?J:va.current}px`,"--initial-height":$?"auto":`${I}px`,...O,...m.style},onDragEnd:()=>{oe(!1),H(null),ra.current=null},onPointerDown:qe=>{$n||!He||(Se.current=new Date,xe(va.current),qe.target.setPointerCapture(qe.pointerId),qe.target.tagName!=="BUTTON"&&(oe(!0),ra.current={x:qe.clientX,y:qe.clientY}))},onPointerUp:()=>{var qe,fe,Ve,It;if(he||!He)return;ra.current=null;let We=Number(((qe=ue.current)==null?void 0:qe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),St=Number(((fe=ue.current)==null?void 0:fe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Z=new Date().getTime()-((Ve=Se.current)==null?void 0:Ve.getTime()),be=K==="x"?We:St,Ne=Math.abs(be)/Z;if(Math.abs(be)>=D2||Ne>.11){xe(va.current),(It=m.onDismiss)==null||It.call(m,m),pe(K==="x"?We>0?"right":"left":St>0?"down":"up"),Fa(),Te(!0),Fe(!1);return}oe(!1),H(null)},onPointerMove:qe=>{var fe,Ve,It,We;if(!ra.current||!He||((fe=window.getSelection())==null?void 0:fe.toString().length)>0)return;let St=qe.clientY-ra.current.y,Z=qe.clientX-ra.current.x,be=(Ve=e.swipeDirections)!=null?Ve:z2(X);!K&&(Math.abs(Z)>1||Math.abs(St)>1)&&H(Math.abs(Z)>Math.abs(St)?"x":"y");let Ne={x:0,y:0};K==="y"?(be.includes("top")||be.includes("bottom"))&&(be.includes("top")&&St<0||be.includes("bottom")&&St>0)&&(Ne.y=St):K==="x"&&(be.includes("left")||be.includes("right"))&&(be.includes("left")&&Z<0||be.includes("right")&&Z>0)&&(Ne.x=Z),(Math.abs(Ne.x)>0||Math.abs(Ne.y)>0)&&Fe(!0),(It=ue.current)==null||It.style.setProperty("--swipe-amount-x",`${Ne.x}px`),(We=ue.current)==null||We.style.setProperty("--swipe-amount-y",`${Ne.y}px`)}},ht&&!m.jsx?le.createElement("button",{"aria-label":G,"data-disabled":$n,"data-close-button":!0,onClick:$n||!He?()=>{}:()=>{var qe;Fa(),(qe=m.onDismiss)==null||qe.call(m,m)},className:Ms(E==null?void 0:E.closeButton,(n=m==null?void 0:m.classNames)==null?void 0:n.closeButton)},(o=D==null?void 0:D.close)!=null?o:g2):null,m.jsx||u.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:le.createElement(le.Fragment,null,Le||m.icon||m.promise?le.createElement("div",{"data-icon":"",className:Ms(E==null?void 0:E.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Hn():null,m.type!=="loading"?m.icon||(D==null?void 0:D[Le])||d2(Le):null):null,le.createElement("div",{"data-content":"",className:Ms(E==null?void 0:E.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},le.createElement("div",{"data-title":"",className:Ms(E==null?void 0:E.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?le.createElement("div",{"data-description":"",className:Ms(ee,ft,E==null?void 0:E.description,(d=m==null?void 0:m.classNames)==null?void 0:d.description)},typeof m.description=="function"?m.description():m.description):null),u.isValidElement(m.cancel)?m.cancel:m.cancel&&md(m.cancel)?le.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||A,onClick:qe=>{var fe,Ve;md(m.cancel)&&He&&((Ve=(fe=m.cancel).onClick)==null||Ve.call(fe,qe),Fa())},className:Ms(E==null?void 0:E.cancelButton,(f=m==null?void 0:m.classNames)==null?void 0:f.cancelButton)},m.cancel.label):null,u.isValidElement(m.action)?m.action:m.action&&md(m.action)?le.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||q,onClick:qe=>{var fe,Ve;md(m.action)&&((Ve=(fe=m.action).onClick)==null||Ve.call(fe,qe),!qe.defaultPrevented&&Fa())},className:Ms(E==null?void 0:E.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function $x(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function k2(e,t){let a={};return[e,t].forEach((s,n)=>{let o=n===1,i=o?"--mobile-offset":"--offset",l=o?A2:C2;function c(d){["top","right","bottom","left"].forEach(f=>{a[`${i}-${f}`]=typeof d=="number"?`${d}px`:d})}typeof s=="number"||typeof s=="string"?c(s):typeof s=="object"?["top","right","bottom","left"].forEach(d=>{s[d]===void 0?a[`${i}-${d}`]=l:a[`${i}-${d}`]=typeof s[d]=="number"?`${s[d]}px`:s[d]}):c(l)}),a}var P2=u.forwardRef(function(e,t){let{invert:a,position:s="bottom-right",hotkey:n=["altKey","KeyT"],expand:o,closeButton:i,className:l,offset:c,mobileOffset:d,theme:f="light",richColors:h,duration:p,style:m,visibleToasts:j=N2,toastOptions:x,dir:g=$x(),gap:b=R2,loadingIcon:v,icons:y,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:w}=e,[S,N]=le.useState([]),C=le.useMemo(()=>Array.from(new Set([s].concat(S.filter(M=>M.position).map(M=>M.position)))),[S,s]),[O,A]=le.useState([]),[q,B]=le.useState(!1),[ee,Q]=le.useState(!1),[X,R]=le.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Y=le.useRef(null),$=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=le.useRef(null),D=le.useRef(!1),G=le.useCallback(M=>{N(K=>{var H;return(H=K.find(ne=>ne.id===M.id))!=null&&H.delete||Za.dismiss(M.id),K.filter(({id:ne})=>ne!==M.id)})},[]);return le.useEffect(()=>Za.subscribe(M=>{if(M.dismiss){N(K=>K.map(H=>H.id===M.id?{...H,delete:!0}:H));return}setTimeout(()=>{Oy.flushSync(()=>{N(K=>{let H=K.findIndex(ne=>ne.id===M.id);return H!==-1?[...K.slice(0,H),{...K[H],...M},...K.slice(H+1)]:[M,...K]})})})}),[]),le.useEffect(()=>{if(f!=="system"){R(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?R("dark"):R("light")),typeof window>"u")return;let M=window.matchMedia("(prefers-color-scheme: dark)");try{M.addEventListener("change",({matches:K})=>{R(K?"dark":"light")})}catch{M.addListener(({matches:H})=>{try{R(H?"dark":"light")}catch(ne){console.error(ne)}})}},[f]),le.useEffect(()=>{S.length<=1&&B(!1)},[S]),le.useEffect(()=>{let M=K=>{var H,ne;n.every(pe=>K[pe]||K.code===pe)&&(B(!0),(H=Y.current)==null||H.focus()),K.code==="Escape"&&(document.activeElement===Y.current||(ne=Y.current)!=null&&ne.contains(document.activeElement))&&B(!1)};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[n]),le.useEffect(()=>{if(Y.current)return()=>{E.current&&(E.current.focus({preventScroll:!0}),E.current=null,D.current=!1)}},[Y.current]),le.createElement("section",{ref:t,"aria-label":`${_} ${$}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((M,K)=>{var H;let[ne,pe]=M.split("-");return S.length?le.createElement("ol",{key:M,dir:g==="auto"?$x():g,tabIndex:-1,ref:Y,className:l,"data-sonner-toaster":!0,"data-theme":X,"data-y-position":ne,"data-lifted":q&&S.length>1&&!o,"data-x-position":pe,style:{"--front-toast-height":`${((H=O[0])==null?void 0:H.height)||0}px`,"--width":`${T2}px`,"--gap":`${b}px`,...m,...k2(c,d)},onBlur:k=>{D.current&&!k.currentTarget.contains(k.relatedTarget)&&(D.current=!1,E.current&&(E.current.focus({preventScroll:!0}),E.current=null))},onFocus:k=>{k.target instanceof HTMLElement&&k.target.dataset.dismissible==="false"||D.current||(D.current=!0,E.current=k.relatedTarget)},onMouseEnter:()=>B(!0),onMouseMove:()=>B(!0),onMouseLeave:()=>{ee||B(!1)},onDragEnd:()=>B(!1),onPointerDown:k=>{k.target instanceof HTMLElement&&k.target.dataset.dismissible==="false"||Q(!0)},onPointerUp:()=>Q(!1)},S.filter(k=>!k.position&&K===0||k.position===M).map((k,P)=>{var ce,re;return le.createElement(M2,{key:k.id,icons:y,index:P,toast:k,defaultRichColors:h,duration:(ce=x==null?void 0:x.duration)!=null?ce:p,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:a,visibleToasts:j,closeButton:(re=x==null?void 0:x.closeButton)!=null?re:i,interacting:ee,position:M,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,removeToast:G,toasts:S.filter(ie=>ie.position==k.position),heights:O.filter(ie=>ie.position==k.position),setHeights:A,expandByDefault:o,gap:b,loadingIcon:v,expanded:q,pauseWhenPageIsHidden:w,swipeDirections:e.swipeDirections})})):null}))});const L2=({...e})=>{const{theme:t="system"}=c2();return r.jsx(P2,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},I2=1,F2=1e6;let yh=0;function q2(){return yh=(yh+1)%Number.MAX_SAFE_INTEGER,yh.toString()}const bh=new Map,Hx=e=>{if(bh.has(e))return;const t=setTimeout(()=>{bh.delete(e),Gl({type:"REMOVE_TOAST",toastId:e})},F2);bh.set(e,t)},U2=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,I2)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=t;return a?Hx(a):e.toasts.forEach(s=>{Hx(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===a||a===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(a=>a.id!==t.toastId)}}},Fd=[];let qd={toasts:[]};function Gl(e){qd=U2(qd,e),Fd.forEach(t=>{t(qd)})}function B2({...e}){const t=q2(),a=n=>Gl({type:"UPDATE_TOAST",toast:{...n,id:t}}),s=()=>Gl({type:"DISMISS_TOAST",toastId:t});return Gl({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:n=>{n||s()}}}),{id:t,dismiss:s,update:a}}function ea(){const[e,t]=u.useState(qd);return u.useEffect(()=>(Fd.push(t),()=>{const a=Fd.indexOf(t);a>-1&&Fd.splice(a,1)}),[e]),{...e,toast:B2,dismiss:a=>Gl({type:"DISMISS_TOAST",toastId:a})}}function De(e,t,{checkForDefaultPrevented:a=!0}={}){return function(n){if(e==null||e(n),a===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function Vx(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function mj(...e){return t=>{let a=!1;const s=e.map(n=>{const o=Vx(n,t);return!a&&typeof o=="function"&&(a=!0),o});if(a)return()=>{for(let n=0;n<s.length;n++){const o=s[n];typeof o=="function"?o():Vx(e[n],null)}}}}function vt(...e){return u.useCallback(mj(...e),e)}function $2(e,t){const a=u.createContext(t),s=o=>{const{children:i,...l}=o,c=u.useMemo(()=>l,Object.values(l));return r.jsx(a.Provider,{value:c,children:i})};s.displayName=e+"Provider";function n(o){const i=u.useContext(a);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,n]}function Os(e,t=[]){let a=[];function s(o,i){const l=u.createContext(i),c=a.length;a=[...a,i];const d=h=>{var b;const{scope:p,children:m,...j}=h,x=((b=p==null?void 0:p[e])==null?void 0:b[c])||l,g=u.useMemo(()=>j,Object.values(j));return r.jsx(x.Provider,{value:g,children:m})};d.displayName=o+"Provider";function f(h,p){var x;const m=((x=p==null?void 0:p[e])==null?void 0:x[c])||l,j=u.useContext(m);if(j)return j;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[d,f]}const n=()=>{const o=a.map(i=>u.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return u.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return n.scopeName=e,[s,H2(n,...t)]}function H2(...e){const t=e[0];if(e.length===1)return t;const a=()=>{const s=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(o){const i=s.reduce((l,{useScope:c,scopeName:d})=>{const h=c(o)[`__scope${d}`];return{...l,...h}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return a.scopeName=t.scopeName,a}function xo(e){const t=G2(e),a=u.forwardRef((s,n)=>{const{children:o,...i}=s,l=u.Children.toArray(o),c=l.find(Y2);if(c){const d=c.props.children,f=l.map(h=>h===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...i,ref:n,children:u.isValidElement(d)?u.cloneElement(d,void 0,f):null})}return r.jsx(t,{...i,ref:n,children:o})});return a.displayName=`${e}.Slot`,a}var V2=xo("Slot");function G2(e){const t=u.forwardRef((a,s)=>{const{children:n,...o}=a;if(u.isValidElement(n)){const i=K2(n),l=Q2(o,n.props);return n.type!==u.Fragment&&(l.ref=s?mj(s,i):i),u.cloneElement(n,l)}return u.Children.count(n)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var pj=Symbol("radix.slottable");function vj(e){const t=({children:a})=>r.jsx(r.Fragment,{children:a});return t.displayName=`${e}.Slottable`,t.__radixId=pj,t}function Y2(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===pj}function Q2(e,t){const a={...t};for(const s in t){const n=e[s],o=t[s];/^on[A-Z]/.test(s)?n&&o?a[s]=(...l)=>{const c=o(...l);return n(...l),c}:n&&(a[s]=n):s==="style"?a[s]={...n,...o}:s==="className"&&(a[s]=[n,o].filter(Boolean).join(" "))}return{...e,...a}}function K2(e){var s,n;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,a=t&&"isReactWarning"in t&&t.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}function vv(e){const t=e+"CollectionProvider",[a,s]=Os(t),[n,o]=a(t,{collectionRef:{current:null},itemMap:new Map}),i=x=>{const{scope:g,children:b}=x,v=le.useRef(null),y=le.useRef(new Map).current;return r.jsx(n,{scope:g,itemMap:y,collectionRef:v,children:b})};i.displayName=t;const l=e+"CollectionSlot",c=xo(l),d=le.forwardRef((x,g)=>{const{scope:b,children:v}=x,y=o(l,b),_=vt(g,y.collectionRef);return r.jsx(c,{ref:_,children:v})});d.displayName=l;const f=e+"CollectionItemSlot",h="data-radix-collection-item",p=xo(f),m=le.forwardRef((x,g)=>{const{scope:b,children:v,...y}=x,_=le.useRef(null),w=vt(g,_),S=o(f,b);return le.useEffect(()=>(S.itemMap.set(_,{ref:_,...y}),()=>void S.itemMap.delete(_))),r.jsx(p,{[h]:"",ref:w,children:v})});m.displayName=f;function j(x){const g=o(e+"CollectionConsumer",x);return le.useCallback(()=>{const v=g.collectionRef.current;if(!v)return[];const y=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((S,N)=>y.indexOf(S.ref.current)-y.indexOf(N.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:i,Slot:d,ItemSlot:m},j,s]}var X2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Be=X2.reduce((e,t)=>{const a=xo(`Primitive.${t}`),s=u.forwardRef((n,o)=>{const{asChild:i,...l}=n,c=i?a:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function gj(e,t){e&&Ro.flushSync(()=>e.dispatchEvent(t))}function Ts(e){const t=u.useRef(e);return u.useEffect(()=>{t.current=e}),u.useMemo(()=>(...a)=>{var s;return(s=t.current)==null?void 0:s.call(t,...a)},[])}function Z2(e,t=globalThis==null?void 0:globalThis.document){const a=Ts(e);u.useEffect(()=>{const s=n=>{n.key==="Escape"&&a(n)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[a,t])}var J2="DismissableLayer",Im="dismissableLayer.update",W2="dismissableLayer.pointerDownOutside",eT="dismissableLayer.focusOutside",Gx,xj=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sl=u.forwardRef((e,t)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:s,onPointerDownOutside:n,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,d=u.useContext(xj),[f,h]=u.useState(null),p=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=u.useState({}),j=vt(t,N=>h(N)),x=Array.from(d.layers),[g]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=x.indexOf(g),v=f?x.indexOf(f):-1,y=d.layersWithOutsidePointerEventsDisabled.size>0,_=v>=b,w=aT(N=>{const C=N.target,O=[...d.branches].some(A=>A.contains(C));!_||O||(n==null||n(N),i==null||i(N),N.defaultPrevented||l==null||l())},p),S=sT(N=>{const C=N.target;[...d.branches].some(A=>A.contains(C))||(o==null||o(N),i==null||i(N),N.defaultPrevented||l==null||l())},p);return Z2(N=>{v===d.layers.size-1&&(s==null||s(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),u.useEffect(()=>{if(f)return a&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Gx=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),Yx(),()=>{a&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Gx)}},[f,p,a,d]),u.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),Yx())},[f,d]),u.useEffect(()=>{const N=()=>m({});return document.addEventListener(Im,N),()=>document.removeEventListener(Im,N)},[]),r.jsx(Be.div,{...c,ref:j,style:{pointerEvents:y?_?"auto":"none":void 0,...e.style},onFocusCapture:De(e.onFocusCapture,S.onFocusCapture),onBlurCapture:De(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:De(e.onPointerDownCapture,w.onPointerDownCapture)})});sl.displayName=J2;var tT="DismissableLayerBranch",yj=u.forwardRef((e,t)=>{const a=u.useContext(xj),s=u.useRef(null),n=vt(t,s);return u.useEffect(()=>{const o=s.current;if(o)return a.branches.add(o),()=>{a.branches.delete(o)}},[a.branches]),r.jsx(Be.div,{...e,ref:n})});yj.displayName=tT;function aT(e,t=globalThis==null?void 0:globalThis.document){const a=Ts(e),s=u.useRef(!1),n=u.useRef(()=>{});return u.useEffect(()=>{const o=l=>{if(l.target&&!s.current){let c=function(){bj(W2,a,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=c,t.addEventListener("click",n.current,{once:!0})):c()}else t.removeEventListener("click",n.current);s.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",n.current)}},[t,a]),{onPointerDownCapture:()=>s.current=!0}}function sT(e,t=globalThis==null?void 0:globalThis.document){const a=Ts(e),s=u.useRef(!1);return u.useEffect(()=>{const n=o=>{o.target&&!s.current&&bj(eT,a,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,a]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Yx(){const e=new CustomEvent(Im);document.dispatchEvent(e)}function bj(e,t,a,{discrete:s}){const n=a.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:a});t&&n.addEventListener(e,t,{once:!0}),s?gj(n,o):n.dispatchEvent(o)}var rT=sl,nT=yj,Oa=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},oT="Portal",Lc=u.forwardRef((e,t)=>{var l;const{container:a,...s}=e,[n,o]=u.useState(!1);Oa(()=>o(!0),[]);const i=a||n&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?Oy.createPortal(r.jsx(Be.div,{...s,ref:t}),i):null});Lc.displayName=oT;function iT(e,t){return u.useReducer((a,s)=>t[a][s]??a,e)}var Ur=e=>{const{present:t,children:a}=e,s=lT(t),n=typeof a=="function"?a({present:s.isPresent}):u.Children.only(a),o=vt(s.ref,cT(n));return typeof a=="function"||s.isPresent?u.cloneElement(n,{ref:o}):null};Ur.displayName="Presence";function lT(e){const[t,a]=u.useState(),s=u.useRef(null),n=u.useRef(e),o=u.useRef("none"),i=e?"mounted":"unmounted",[l,c]=iT(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const d=pd(s.current);o.current=l==="mounted"?d:"none"},[l]),Oa(()=>{const d=s.current,f=n.current;if(f!==e){const p=o.current,m=pd(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(f&&p!==m?"ANIMATION_OUT":"UNMOUNT"),n.current=e}},[e,c]),Oa(()=>{if(t){let d;const f=t.ownerDocument.defaultView??window,h=m=>{const x=pd(s.current).includes(m.animationName);if(m.target===t&&x&&(c("ANIMATION_END"),!n.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",d=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},p=m=>{m.target===t&&(o.current=pd(s.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:u.useCallback(d=>{s.current=d?getComputedStyle(d):null,a(d)},[])}}function pd(e){return(e==null?void 0:e.animationName)||"none"}function cT(e){var s,n;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,a=t&&"isReactWarning"in t&&t.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}var dT=_p[" useInsertionEffect ".trim().toString()]||Oa;function $s({prop:e,defaultProp:t,onChange:a=()=>{},caller:s}){const[n,o,i]=uT({defaultProp:t,onChange:a}),l=e!==void 0,c=l?e:n;{const f=u.useRef(e!==void 0);u.useEffect(()=>{const h=f.current;h!==l&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,s])}const d=u.useCallback(f=>{var h;if(l){const p=fT(f)?f(e):f;p!==e&&((h=i.current)==null||h.call(i,p))}else o(f)},[l,e,o,i]);return[c,d]}function uT({defaultProp:e,onChange:t}){const[a,s]=u.useState(e),n=u.useRef(a),o=u.useRef(t);return dT(()=>{o.current=t},[t]),u.useEffect(()=>{var i;n.current!==a&&((i=o.current)==null||i.call(o,a),n.current=a)},[a,n]),[a,s,o]}function fT(e){return typeof e=="function"}var _j=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),hT="VisuallyHidden",tf=u.forwardRef((e,t)=>r.jsx(Be.span,{...e,ref:t,style:{..._j,...e.style}}));tf.displayName=hT;var mT=tf,gv="ToastProvider",[xv,pT,vT]=vv("Toast"),[jj,w5]=Os("Toast",[vT]),[gT,af]=jj(gv),wj=e=>{const{__scopeToast:t,label:a="Notification",duration:s=5e3,swipeDirection:n="right",swipeThreshold:o=50,children:i}=e,[l,c]=u.useState(null),[d,f]=u.useState(0),h=u.useRef(!1),p=u.useRef(!1);return a.trim()||console.error(`Invalid prop \`label\` supplied to \`${gv}\`. Expected non-empty \`string\`.`),r.jsx(xv.Provider,{scope:t,children:r.jsx(gT,{scope:t,label:a,duration:s,swipeDirection:n,swipeThreshold:o,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:u.useCallback(()=>f(m=>m+1),[]),onToastRemove:u.useCallback(()=>f(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:i})})};wj.displayName=gv;var Sj="ToastViewport",xT=["F8"],Fm="toast.viewportPause",qm="toast.viewportResume",Ej=u.forwardRef((e,t)=>{const{__scopeToast:a,hotkey:s=xT,label:n="Notifications ({hotkey})",...o}=e,i=af(Sj,a),l=pT(a),c=u.useRef(null),d=u.useRef(null),f=u.useRef(null),h=u.useRef(null),p=vt(t,h,i.onViewportChange),m=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=i.toastCount>0;u.useEffect(()=>{const g=b=>{var y;s.length!==0&&s.every(_=>b[_]||b.code===_)&&((y=h.current)==null||y.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[s]),u.useEffect(()=>{const g=c.current,b=h.current;if(j&&g&&b){const v=()=>{if(!i.isClosePausedRef.current){const S=new CustomEvent(Fm);b.dispatchEvent(S),i.isClosePausedRef.current=!0}},y=()=>{if(i.isClosePausedRef.current){const S=new CustomEvent(qm);b.dispatchEvent(S),i.isClosePausedRef.current=!1}},_=S=>{!g.contains(S.relatedTarget)&&y()},w=()=>{g.contains(document.activeElement)||y()};return g.addEventListener("focusin",v),g.addEventListener("focusout",_),g.addEventListener("pointermove",v),g.addEventListener("pointerleave",w),window.addEventListener("blur",v),window.addEventListener("focus",y),()=>{g.removeEventListener("focusin",v),g.removeEventListener("focusout",_),g.removeEventListener("pointermove",v),g.removeEventListener("pointerleave",w),window.removeEventListener("blur",v),window.removeEventListener("focus",y)}}},[j,i.isClosePausedRef]);const x=u.useCallback(({tabbingDirection:g})=>{const v=l().map(y=>{const _=y.ref.current,w=[_,...DT(_)];return g==="forwards"?w:w.reverse()});return(g==="forwards"?v.reverse():v).flat()},[l]);return u.useEffect(()=>{const g=h.current;if(g){const b=v=>{var w,S,N;const y=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!y){const C=document.activeElement,O=v.shiftKey;if(v.target===g&&O){(w=d.current)==null||w.focus();return}const B=x({tabbingDirection:O?"backwards":"forwards"}),ee=B.findIndex(Q=>Q===C);_h(B.slice(ee+1))?v.preventDefault():O?(S=d.current)==null||S.focus():(N=f.current)==null||N.focus()}};return g.addEventListener("keydown",b),()=>g.removeEventListener("keydown",b)}},[l,x]),r.jsxs(nT,{ref:c,role:"region","aria-label":n.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:j?void 0:"none"},children:[j&&r.jsx(Um,{ref:d,onFocusFromOutsideViewport:()=>{const g=x({tabbingDirection:"forwards"});_h(g)}}),r.jsx(xv.Slot,{scope:a,children:r.jsx(Be.ol,{tabIndex:-1,...o,ref:p})}),j&&r.jsx(Um,{ref:f,onFocusFromOutsideViewport:()=>{const g=x({tabbingDirection:"backwards"});_h(g)}})]})});Ej.displayName=Sj;var Nj="ToastFocusProxy",Um=u.forwardRef((e,t)=>{const{__scopeToast:a,onFocusFromOutsideViewport:s,...n}=e,o=af(Nj,a);return r.jsx(tf,{"aria-hidden":!0,tabIndex:0,...n,ref:t,style:{position:"fixed"},onFocus:i=>{var d;const l=i.relatedTarget;!((d=o.viewport)!=null&&d.contains(l))&&s()}})});Um.displayName=Nj;var Ic="Toast",yT="toast.swipeStart",bT="toast.swipeMove",_T="toast.swipeCancel",jT="toast.swipeEnd",Cj=u.forwardRef((e,t)=>{const{forceMount:a,open:s,defaultOpen:n,onOpenChange:o,...i}=e,[l,c]=$s({prop:s,defaultProp:n??!0,onChange:o,caller:Ic});return r.jsx(Ur,{present:a||l,children:r.jsx(ET,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:Ts(e.onPause),onResume:Ts(e.onResume),onSwipeStart:De(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:De(e.onSwipeMove,d=>{const{x:f,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:De(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:De(e.onSwipeEnd,d=>{const{x:f,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Cj.displayName=Ic;var[wT,ST]=jj(Ic,{onClose(){}}),ET=u.forwardRef((e,t)=>{const{__scopeToast:a,type:s="foreground",duration:n,open:o,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:f,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:m,...j}=e,x=af(Ic,a),[g,b]=u.useState(null),v=vt(t,Q=>b(Q)),y=u.useRef(null),_=u.useRef(null),w=n||x.duration,S=u.useRef(0),N=u.useRef(w),C=u.useRef(0),{onToastAdd:O,onToastRemove:A}=x,q=Ts(()=>{var X;(g==null?void 0:g.contains(document.activeElement))&&((X=x.viewport)==null||X.focus()),i()}),B=u.useCallback(Q=>{!Q||Q===1/0||(window.clearTimeout(C.current),S.current=new Date().getTime(),C.current=window.setTimeout(q,Q))},[q]);u.useEffect(()=>{const Q=x.viewport;if(Q){const X=()=>{B(N.current),d==null||d()},R=()=>{const Y=new Date().getTime()-S.current;N.current=N.current-Y,window.clearTimeout(C.current),c==null||c()};return Q.addEventListener(Fm,R),Q.addEventListener(qm,X),()=>{Q.removeEventListener(Fm,R),Q.removeEventListener(qm,X)}}},[x.viewport,w,c,d,B]),u.useEffect(()=>{o&&!x.isClosePausedRef.current&&B(w)},[o,w,x.isClosePausedRef,B]),u.useEffect(()=>(O(),()=>A()),[O,A]);const ee=u.useMemo(()=>g?Mj(g):null,[g]);return x.viewport?r.jsxs(r.Fragment,{children:[ee&&r.jsx(NT,{__scopeToast:a,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:ee}),r.jsx(wT,{scope:a,onClose:q,children:Ro.createPortal(r.jsx(xv.ItemSlot,{scope:a,children:r.jsx(rT,{asChild:!0,onEscapeKeyDown:De(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||q(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(Be.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":x.swipeDirection,...j,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:De(e.onKeyDown,Q=>{Q.key==="Escape"&&(l==null||l(Q.nativeEvent),Q.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,q()))}),onPointerDown:De(e.onPointerDown,Q=>{Q.button===0&&(y.current={x:Q.clientX,y:Q.clientY})}),onPointerMove:De(e.onPointerMove,Q=>{if(!y.current)return;const X=Q.clientX-y.current.x,R=Q.clientY-y.current.y,Y=!!_.current,$=["left","right"].includes(x.swipeDirection),E=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,D=$?E(0,X):0,G=$?0:E(0,R),M=Q.pointerType==="touch"?10:2,K={x:D,y:G},H={originalEvent:Q,delta:K};Y?(_.current=K,vd(bT,h,H,{discrete:!1})):Qx(K,x.swipeDirection,M)?(_.current=K,vd(yT,f,H,{discrete:!1}),Q.target.setPointerCapture(Q.pointerId)):(Math.abs(X)>M||Math.abs(R)>M)&&(y.current=null)}),onPointerUp:De(e.onPointerUp,Q=>{const X=_.current,R=Q.target;if(R.hasPointerCapture(Q.pointerId)&&R.releasePointerCapture(Q.pointerId),_.current=null,y.current=null,X){const Y=Q.currentTarget,$={originalEvent:Q,delta:X};Qx(X,x.swipeDirection,x.swipeThreshold)?vd(jT,m,$,{discrete:!0}):vd(_T,p,$,{discrete:!0}),Y.addEventListener("click",E=>E.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),NT=e=>{const{__scopeToast:t,children:a,...s}=e,n=af(Ic,t),[o,i]=u.useState(!1),[l,c]=u.useState(!1);return TT(()=>i(!0)),u.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:r.jsx(Lc,{asChild:!0,children:r.jsx(tf,{...s,children:o&&r.jsxs(r.Fragment,{children:[n.label," ",a]})})})},CT="ToastTitle",Aj=u.forwardRef((e,t)=>{const{__scopeToast:a,...s}=e;return r.jsx(Be.div,{...s,ref:t})});Aj.displayName=CT;var AT="ToastDescription",Tj=u.forwardRef((e,t)=>{const{__scopeToast:a,...s}=e;return r.jsx(Be.div,{...s,ref:t})});Tj.displayName=AT;var Rj="ToastAction",Dj=u.forwardRef((e,t)=>{const{altText:a,...s}=e;return a.trim()?r.jsx(zj,{altText:a,asChild:!0,children:r.jsx(yv,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Rj}\`. Expected non-empty \`string\`.`),null)});Dj.displayName=Rj;var Oj="ToastClose",yv=u.forwardRef((e,t)=>{const{__scopeToast:a,...s}=e,n=ST(Oj,a);return r.jsx(zj,{asChild:!0,children:r.jsx(Be.button,{type:"button",...s,ref:t,onClick:De(e.onClick,n.onClose)})})});yv.displayName=Oj;var zj=u.forwardRef((e,t)=>{const{__scopeToast:a,altText:s,...n}=e;return r.jsx(Be.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...n,ref:t})});function Mj(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),RT(s)){const n=s.ariaHidden||s.hidden||s.style.display==="none",o=s.dataset.radixToastAnnounceExclude==="";if(!n)if(o){const i=s.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...Mj(s))}}),t}function vd(e,t,a,{discrete:s}){const n=a.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:a});t&&n.addEventListener(e,t,{once:!0}),s?gj(n,o):n.dispatchEvent(o)}var Qx=(e,t,a=0)=>{const s=Math.abs(e.x),n=Math.abs(e.y),o=s>n;return t==="left"||t==="right"?o&&s>a:!o&&n>a};function TT(e=()=>{}){const t=Ts(e);Oa(()=>{let a=0,s=0;return a=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(a),window.cancelAnimationFrame(s)}},[t])}function RT(e){return e.nodeType===e.ELEMENT_NODE}function DT(e){const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function _h(e){const t=document.activeElement;return e.some(a=>a===t?!0:(a.focus(),document.activeElement!==t))}var OT=wj,kj=Ej,Pj=Cj,Lj=Aj,Ij=Tj,Fj=Dj,qj=yv;function Uj(e){var t,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(a=Uj(e[t]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function Bj(){for(var e,t,a=0,s="",n=arguments.length;a<n;a++)(e=arguments[a])&&(t=Uj(e))&&(s&&(s+=" "),s+=t);return s}const Kx=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Xx=Bj,rl=(e,t)=>a=>{var s;if((t==null?void 0:t.variants)==null)return Xx(e,a==null?void 0:a.class,a==null?void 0:a.className);const{variants:n,defaultVariants:o}=t,i=Object.keys(n).map(d=>{const f=a==null?void 0:a[d],h=o==null?void 0:o[d];if(f===null)return null;const p=Kx(f)||Kx(h);return n[d][p]}),l=a&&Object.entries(a).reduce((d,f)=>{let[h,p]=f;return p===void 0||(d[h]=p),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,f)=>{let{class:h,className:p,...m}=f;return Object.entries(m).every(j=>{let[x,g]=j;return Array.isArray(g)?g.includes({...o,...l}[x]):{...o,...l}[x]===g})?[...d,h,p]:d},[]);return Xx(e,i,c,a==null?void 0:a.class,a==null?void 0:a.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$j=(...e)=>e.filter((t,a,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===a).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:n="",children:o,iconNode:i,...l},c)=>u.createElement("svg",{ref:c,...MT,width:t,height:t,stroke:e,strokeWidth:s?Number(a)*24/Number(t):a,className:$j("lucide",n),...l},[...i.map(([d,f])=>u.createElement(d,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=(e,t)=>{const a=u.forwardRef(({className:s,...n},o)=>u.createElement(kT,{ref:o,iconNode:t,className:$j(`lucide-${zT(e)}`,s),...n}));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=$e("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=$e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=$e("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=$e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=$e("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=$e("Beef",[["circle",{cx:"12.5",cy:"8.5",r:"2.5",key:"9738u8"}],["path",{d:"M12.5 2a6.5 6.5 0 0 0-6.22 4.6c-1.1 3.13-.78 3.9-3.18 6.08A3 3 0 0 0 5 18c4 0 8.4-1.8 11.4-4.3A6.5 6.5 0 0 0 12.5 2Z",key:"o0f6za"}],["path",{d:"m18.5 6 2.19 4.5a6.48 6.48 0 0 1 .31 2 6.49 6.49 0 0 1-2.6 5.2C15.4 20.2 11 22 7 22a3 3 0 0 1-2.68-1.66L2.4 16.5",key:"k7p6i0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=$e("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=$e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=$e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=$e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=$e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=$e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=$e("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=$e("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=$e("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=$e("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=$e("Dna",[["path",{d:"m10 16 1.5 1.5",key:"11lckj"}],["path",{d:"m14 8-1.5-1.5",key:"1ohn8i"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m17 6-2.891-2.891",key:"xu6p2f"}],["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"m20 9 .891.891",key:"3xwk7g"}],["path",{d:"M3.109 14.109 4 15",key:"q76aoh"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m7 18 2.891 2.891",key:"1sisit"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=$e("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=$e("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=$e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=$e("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=$e("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=$e("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=$e("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=$e("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=$e("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=$e("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=$e("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=$e("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=$e("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=$e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=$e("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=$e("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=$e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=$e("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=$e("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=$e("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=$e("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=$e("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=$e("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=$e("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=$e("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=$e("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=$e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=$e("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=$e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=$e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Cv="-",XT=e=>{const t=JT(e),{conflictingClassGroups:a,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:i=>{const l=i.split(Cv);return l[0]===""&&l.length!==1&&l.shift(),Zj(l,t)||ZT(i)},getConflictingClassGroupIds:(i,l)=>{const c=a[i]||[];return l&&s[i]?[...c,...s[i]]:c}}},Zj=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const a=e[0],s=t.nextPart.get(a),n=s?Zj(e.slice(1),s):void 0;if(n)return n;if(t.validators.length===0)return;const o=e.join(Cv);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},t0=/^\[(.+)\]$/,ZT=e=>{if(t0.test(e)){const t=t0.exec(e)[1],a=t==null?void 0:t.substring(0,t.indexOf(":"));if(a)return"arbitrary.."+a}},JT=e=>{const{theme:t,prefix:a}=e,s={nextPart:new Map,validators:[]};return eR(Object.entries(e.classGroups),a).forEach(([o,i])=>{$m(i,s,o,t)}),s},$m=(e,t,a,s)=>{e.forEach(n=>{if(typeof n=="string"){const o=n===""?t:a0(t,n);o.classGroupId=a;return}if(typeof n=="function"){if(WT(n)){$m(n(s),t,a,s);return}t.validators.push({validator:n,classGroupId:a});return}Object.entries(n).forEach(([o,i])=>{$m(i,a0(t,o),a,s)})})},a0=(e,t)=>{let a=e;return t.split(Cv).forEach(s=>{a.nextPart.has(s)||a.nextPart.set(s,{nextPart:new Map,validators:[]}),a=a.nextPart.get(s)}),a},WT=e=>e.isThemeGetter,eR=(e,t)=>t?e.map(([a,s])=>{const n=s.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[t+i,l])):o);return[a,n]}):e,tR=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,a=new Map,s=new Map;const n=(o,i)=>{a.set(o,i),t++,t>e&&(t=0,s=a,a=new Map)};return{get(o){let i=a.get(o);if(i!==void 0)return i;if((i=s.get(o))!==void 0)return n(o,i),i},set(o,i){a.has(o)?a.set(o,i):n(o,i)}}},Jj="!",aR=e=>{const{separator:t,experimentalParseClassName:a}=e,s=t.length===1,n=t[0],o=t.length,i=l=>{const c=[];let d=0,f=0,h;for(let g=0;g<l.length;g++){let b=l[g];if(d===0){if(b===n&&(s||l.slice(g,g+o)===t)){c.push(l.slice(f,g)),f=g+o;continue}if(b==="/"){h=g;continue}}b==="["?d++:b==="]"&&d--}const p=c.length===0?l:l.substring(f),m=p.startsWith(Jj),j=m?p.substring(1):p,x=h&&h>f?h-f:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:j,maybePostfixModifierPosition:x}};return a?l=>a({className:l,parseClassName:i}):i},sR=e=>{if(e.length<=1)return e;const t=[];let a=[];return e.forEach(s=>{s[0]==="["?(t.push(...a.sort(),s),a=[]):a.push(s)}),t.push(...a.sort()),t},rR=e=>({cache:tR(e.cacheSize),parseClassName:aR(e),...XT(e)}),nR=/\s+/,oR=(e,t)=>{const{parseClassName:a,getClassGroupId:s,getConflictingClassGroupIds:n}=t,o=[],i=e.trim().split(nR);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:f,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=a(d);let j=!!m,x=s(j?p.substring(0,m):p);if(!x){if(!j){l=d+(l.length>0?" "+l:l);continue}if(x=s(p),!x){l=d+(l.length>0?" "+l:l);continue}j=!1}const g=sR(f).join(":"),b=h?g+Jj:g,v=b+x;if(o.includes(v))continue;o.push(v);const y=n(x,j);for(let _=0;_<y.length;++_){const w=y[_];o.push(b+w)}l=d+(l.length>0?" "+l:l)}return l};function iR(){let e=0,t,a,s="";for(;e<arguments.length;)(t=arguments[e++])&&(a=Wj(t))&&(s&&(s+=" "),s+=a);return s}const Wj=e=>{if(typeof e=="string")return e;let t,a="";for(let s=0;s<e.length;s++)e[s]&&(t=Wj(e[s]))&&(a&&(a+=" "),a+=t);return a};function lR(e,...t){let a,s,n,o=i;function i(c){const d=t.reduce((f,h)=>h(f),e());return a=rR(d),s=a.cache.get,n=a.cache.set,o=l,l(c)}function l(c){const d=s(c);if(d)return d;const f=oR(c,a);return n(c,f),f}return function(){return o(iR.apply(null,arguments))}}const Qt=e=>{const t=a=>a[e]||[];return t.isThemeGetter=!0,t},ew=/^\[(?:([a-z-]+):)?(.+)\]$/i,cR=/^\d+\/\d+$/,dR=new Set(["px","full","screen"]),uR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,mR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xr=e=>_i(e)||dR.has(e)||cR.test(e),Qr=e=>nl(e,"length",wR),_i=e=>!!e&&!Number.isNaN(Number(e)),jh=e=>nl(e,"number",_i),_l=e=>!!e&&Number.isInteger(Number(e)),vR=e=>e.endsWith("%")&&_i(e.slice(0,-1)),tt=e=>ew.test(e),Kr=e=>uR.test(e),gR=new Set(["length","size","percentage"]),xR=e=>nl(e,gR,tw),yR=e=>nl(e,"position",tw),bR=new Set(["image","url"]),_R=e=>nl(e,bR,ER),jR=e=>nl(e,"",SR),jl=()=>!0,nl=(e,t,a)=>{const s=ew.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):a(s[2]):!1},wR=e=>fR.test(e)&&!hR.test(e),tw=()=>!1,SR=e=>mR.test(e),ER=e=>pR.test(e),NR=()=>{const e=Qt("colors"),t=Qt("spacing"),a=Qt("blur"),s=Qt("brightness"),n=Qt("borderColor"),o=Qt("borderRadius"),i=Qt("borderSpacing"),l=Qt("borderWidth"),c=Qt("contrast"),d=Qt("grayscale"),f=Qt("hueRotate"),h=Qt("invert"),p=Qt("gap"),m=Qt("gradientColorStops"),j=Qt("gradientColorStopPositions"),x=Qt("inset"),g=Qt("margin"),b=Qt("opacity"),v=Qt("padding"),y=Qt("saturate"),_=Qt("scale"),w=Qt("sepia"),S=Qt("skew"),N=Qt("space"),C=Qt("translate"),O=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],q=()=>["auto",tt,t],B=()=>[tt,t],ee=()=>["",xr,Qr],Q=()=>["auto",_i,tt],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],R=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],E=()=>["","0",tt],D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[_i,tt];return{cacheSize:500,separator:":",theme:{colors:[jl],spacing:[xr,Qr],blur:["none","",Kr,tt],brightness:G(),borderColor:[e],borderRadius:["none","","full",Kr,tt],borderSpacing:B(),borderWidth:ee(),contrast:G(),grayscale:E(),hueRotate:G(),invert:E(),gap:B(),gradientColorStops:[e],gradientColorStopPositions:[vR,Qr],inset:q(),margin:q(),opacity:G(),padding:B(),saturate:G(),scale:G(),sepia:E(),skew:G(),space:B(),translate:B()},classGroups:{aspect:[{aspect:["auto","square","video",tt]}],container:["container"],columns:[{columns:[Kr]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),tt]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_l,tt]}],basis:[{basis:q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",tt]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",_l,tt]}],"grid-cols":[{"grid-cols":[jl]}],"col-start-end":[{col:["auto",{span:["full",_l,tt]},tt]}],"col-start":[{"col-start":Q()}],"col-end":[{"col-end":Q()}],"grid-rows":[{"grid-rows":[jl]}],"row-start-end":[{row:["auto",{span:[_l,tt]},tt]}],"row-start":[{"row-start":Q()}],"row-end":[{"row-end":Q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",tt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",tt]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",tt,t]}],"min-w":[{"min-w":[tt,t,"min","max","fit"]}],"max-w":[{"max-w":[tt,t,"none","full","min","max","fit","prose",{screen:[Kr]},Kr]}],h:[{h:[tt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[tt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[tt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[tt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Kr,Qr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",jh]}],"font-family":[{font:[jl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",tt]}],"line-clamp":[{"line-clamp":["none",_i,jh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",xr,tt]}],"list-image":[{"list-image":["none",tt]}],"list-style-type":[{list:["none","disc","decimal",tt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...R(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",xr,Qr]}],"underline-offset":[{"underline-offset":["auto",xr,tt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),yR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",xR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},_R]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...R(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:R()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...R()]}],"outline-offset":[{"outline-offset":[xr,tt]}],"outline-w":[{outline:[xr,Qr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[xr,Qr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Kr,jR]}],"shadow-color":[{shadow:[jl]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[a]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Kr,tt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[h]}],saturate:[{saturate:[y]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[a]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",tt]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",tt]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",tt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[_l,tt]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",tt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[xr,Qr,jh]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},CR=lR(NR);function ye(...e){return CR(Bj(e))}function Kt(e){if(!e)return"-";if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e)){const[a,s,n]=e.split("-");return`${n}/${s}/${a}`}return(typeof e=="string"?new Date(e):e).toLocaleDateString("pt-BR")}const AR=OT,aw=u.forwardRef(({className:e,...t},a)=>r.jsx(kj,{ref:a,className:ye("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));aw.displayName=kj.displayName;const TR=rl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),sw=u.forwardRef(({className:e,variant:t,...a},s)=>r.jsx(Pj,{ref:s,className:ye(TR({variant:t}),e),...a}));sw.displayName=Pj.displayName;const RR=u.forwardRef(({className:e,...t},a)=>r.jsx(Fj,{ref:a,className:ye("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));RR.displayName=Fj.displayName;const rw=u.forwardRef(({className:e,...t},a)=>r.jsx(qj,{ref:a,className:ye("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(Rs,{className:"h-4 w-4"})}));rw.displayName=qj.displayName;const nw=u.forwardRef(({className:e,...t},a)=>r.jsx(Lj,{ref:a,className:ye("text-sm font-semibold",e),...t}));nw.displayName=Lj.displayName;const ow=u.forwardRef(({className:e,...t},a)=>r.jsx(Ij,{ref:a,className:ye("text-sm opacity-90",e),...t}));ow.displayName=Ij.displayName;function DR(){const{toasts:e}=ea();return r.jsxs(AR,{children:[e.map(function({id:t,title:a,description:s,action:n,...o}){return r.jsxs(sw,{...o,children:[r.jsxs("div",{className:"grid gap-1",children:[a&&r.jsx(nw,{children:a}),s&&r.jsx(ow,{children:s})]}),n,r.jsx(rw,{})]},t)}),r.jsx(aw,{})]})}var OR=_p[" useId ".trim().toString()]||(()=>{}),zR=0;function Dr(e){const[t,a]=u.useState(OR());return Oa(()=>{a(s=>s??String(zR++))},[e]),t?`radix-${t}`:""}const MR=["top","right","bottom","left"],zn=Math.min,cs=Math.max,Nu=Math.round,gd=Math.floor,lr=e=>({x:e,y:e}),kR={left:"right",right:"left",bottom:"top",top:"bottom"},PR={start:"end",end:"start"};function Hm(e,t,a){return cs(e,zn(t,a))}function Pr(e,t){return typeof e=="function"?e(t):e}function Lr(e){return e.split("-")[0]}function ol(e){return e.split("-")[1]}function Av(e){return e==="x"?"y":"x"}function Tv(e){return e==="y"?"height":"width"}const LR=new Set(["top","bottom"]);function rr(e){return LR.has(Lr(e))?"y":"x"}function Rv(e){return Av(rr(e))}function IR(e,t,a){a===void 0&&(a=!1);const s=ol(e),n=Rv(e),o=Tv(n);let i=n==="x"?s===(a?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Cu(i)),[i,Cu(i)]}function FR(e){const t=Cu(e);return[Vm(e),t,Vm(t)]}function Vm(e){return e.replace(/start|end/g,t=>PR[t])}const s0=["left","right"],r0=["right","left"],qR=["top","bottom"],UR=["bottom","top"];function BR(e,t,a){switch(e){case"top":case"bottom":return a?t?r0:s0:t?s0:r0;case"left":case"right":return t?qR:UR;default:return[]}}function $R(e,t,a,s){const n=ol(e);let o=BR(Lr(e),a==="start",s);return n&&(o=o.map(i=>i+"-"+n),t&&(o=o.concat(o.map(Vm)))),o}function Cu(e){return e.replace(/left|right|bottom|top/g,t=>kR[t])}function HR(e){return{top:0,right:0,bottom:0,left:0,...e}}function iw(e){return typeof e!="number"?HR(e):{top:e,right:e,bottom:e,left:e}}function Au(e){const{x:t,y:a,width:s,height:n}=e;return{width:s,height:n,top:a,left:t,right:t+s,bottom:a+n,x:t,y:a}}function n0(e,t,a){let{reference:s,floating:n}=e;const o=rr(t),i=Rv(t),l=Tv(i),c=Lr(t),d=o==="y",f=s.x+s.width/2-n.width/2,h=s.y+s.height/2-n.height/2,p=s[l]/2-n[l]/2;let m;switch(c){case"top":m={x:f,y:s.y-n.height};break;case"bottom":m={x:f,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:h};break;case"left":m={x:s.x-n.width,y:h};break;default:m={x:s.x,y:s.y}}switch(ol(t)){case"start":m[i]-=p*(a&&d?-1:1);break;case"end":m[i]+=p*(a&&d?-1:1);break}return m}const VR=async(e,t,a)=>{const{placement:s="bottom",strategy:n="absolute",middleware:o=[],platform:i}=a,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:n}),{x:f,y:h}=n0(d,s,c),p=s,m={},j=0;for(let x=0;x<l.length;x++){const{name:g,fn:b}=l[x],{x:v,y,data:_,reset:w}=await b({x:f,y:h,initialPlacement:s,placement:p,strategy:n,middlewareData:m,rects:d,platform:i,elements:{reference:e,floating:t}});f=v??f,h=y??h,m={...m,[g]:{...m[g],..._}},w&&j<=50&&(j++,typeof w=="object"&&(w.placement&&(p=w.placement),w.rects&&(d=w.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:n}):w.rects),{x:f,y:h}=n0(d,p,c)),x=-1)}return{x:f,y:h,placement:p,strategy:n,middlewareData:m}};async function uc(e,t){var a;t===void 0&&(t={});const{x:s,y:n,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=Pr(t,e),j=iw(m),g=l[p?h==="floating"?"reference":"floating":h],b=Au(await o.getClippingRect({element:(a=await(o.isElement==null?void 0:o.isElement(g)))==null||a?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:c})),v=h==="floating"?{x:s,y:n,width:i.floating.width,height:i.floating.height}:i.reference,y=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),_=await(o.isElement==null?void 0:o.isElement(y))?await(o.getScale==null?void 0:o.getScale(y))||{x:1,y:1}:{x:1,y:1},w=Au(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:y,strategy:c}):v);return{top:(b.top-w.top+j.top)/_.y,bottom:(w.bottom-b.bottom+j.bottom)/_.y,left:(b.left-w.left+j.left)/_.x,right:(w.right-b.right+j.right)/_.x}}const GR=e=>({name:"arrow",options:e,async fn(t){const{x:a,y:s,placement:n,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:f=0}=Pr(e,t)||{};if(d==null)return{};const h=iw(f),p={x:a,y:s},m=Rv(n),j=Tv(m),x=await i.getDimensions(d),g=m==="y",b=g?"top":"left",v=g?"bottom":"right",y=g?"clientHeight":"clientWidth",_=o.reference[j]+o.reference[m]-p[m]-o.floating[j],w=p[m]-o.reference[m],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let N=S?S[y]:0;(!N||!await(i.isElement==null?void 0:i.isElement(S)))&&(N=l.floating[y]||o.floating[j]);const C=_/2-w/2,O=N/2-x[j]/2-1,A=zn(h[b],O),q=zn(h[v],O),B=A,ee=N-x[j]-q,Q=N/2-x[j]/2+C,X=Hm(B,Q,ee),R=!c.arrow&&ol(n)!=null&&Q!==X&&o.reference[j]/2-(Q<B?A:q)-x[j]/2<0,Y=R?Q<B?Q-B:Q-ee:0;return{[m]:p[m]+Y,data:{[m]:X,centerOffset:Q-X-Y,...R&&{alignmentOffset:Y}},reset:R}}}),YR=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var a,s;const{placement:n,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:x=!0,...g}=Pr(e,t);if((a=o.arrow)!=null&&a.alignmentOffset)return{};const b=Lr(n),v=rr(l),y=Lr(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(d.floating)),w=p||(y||!x?[Cu(l)]:FR(l)),S=j!=="none";!p&&S&&w.push(...$R(l,x,j,_));const N=[l,...w],C=await uc(t,g),O=[];let A=((s=o.flip)==null?void 0:s.overflows)||[];if(f&&O.push(C[b]),h){const Q=IR(n,i,_);O.push(C[Q[0]],C[Q[1]])}if(A=[...A,{placement:n,overflows:O}],!O.every(Q=>Q<=0)){var q,B;const Q=(((q=o.flip)==null?void 0:q.index)||0)+1,X=N[Q];if(X&&(!(h==="alignment"?v!==rr(X):!1)||A.every($=>$.overflows[0]>0&&rr($.placement)===v)))return{data:{index:Q,overflows:A},reset:{placement:X}};let R=(B=A.filter(Y=>Y.overflows[0]<=0).sort((Y,$)=>Y.overflows[1]-$.overflows[1])[0])==null?void 0:B.placement;if(!R)switch(m){case"bestFit":{var ee;const Y=(ee=A.filter($=>{if(S){const E=rr($.placement);return E===v||E==="y"}return!0}).map($=>[$.placement,$.overflows.filter(E=>E>0).reduce((E,D)=>E+D,0)]).sort(($,E)=>$[1]-E[1])[0])==null?void 0:ee[0];Y&&(R=Y);break}case"initialPlacement":R=l;break}if(n!==R)return{reset:{placement:R}}}return{}}}};function o0(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function i0(e){return MR.some(t=>e[t]>=0)}const QR=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:a}=t,{strategy:s="referenceHidden",...n}=Pr(e,t);switch(s){case"referenceHidden":{const o=await uc(t,{...n,elementContext:"reference"}),i=o0(o,a.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:i0(i)}}}case"escaped":{const o=await uc(t,{...n,altBoundary:!0}),i=o0(o,a.floating);return{data:{escapedOffsets:i,escaped:i0(i)}}}default:return{}}}}},lw=new Set(["left","top"]);async function KR(e,t){const{placement:a,platform:s,elements:n}=e,o=await(s.isRTL==null?void 0:s.isRTL(n.floating)),i=Lr(a),l=ol(a),c=rr(a)==="y",d=lw.has(i)?-1:1,f=o&&c?-1:1,h=Pr(t,e);let{mainAxis:p,crossAxis:m,alignmentAxis:j}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof j=="number"&&(m=l==="end"?j*-1:j),c?{x:m*f,y:p*d}:{x:p*d,y:m*f}}const XR=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var a,s;const{x:n,y:o,placement:i,middlewareData:l}=t,c=await KR(t,e);return i===((a=l.offset)==null?void 0:a.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:n+c.x,y:o+c.y,data:{...c,placement:i}}}}},ZR=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:a,y:s,placement:n}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:g=>{let{x:b,y:v}=g;return{x:b,y:v}}},...c}=Pr(e,t),d={x:a,y:s},f=await uc(t,c),h=rr(Lr(n)),p=Av(h);let m=d[p],j=d[h];if(o){const g=p==="y"?"top":"left",b=p==="y"?"bottom":"right",v=m+f[g],y=m-f[b];m=Hm(v,m,y)}if(i){const g=h==="y"?"top":"left",b=h==="y"?"bottom":"right",v=j+f[g],y=j-f[b];j=Hm(v,j,y)}const x=l.fn({...t,[p]:m,[h]:j});return{...x,data:{x:x.x-a,y:x.y-s,enabled:{[p]:o,[h]:i}}}}}},JR=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:a,y:s,placement:n,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Pr(e,t),f={x:a,y:s},h=rr(n),p=Av(h);let m=f[p],j=f[h];const x=Pr(l,t),g=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const y=p==="y"?"height":"width",_=o.reference[p]-o.floating[y]+g.mainAxis,w=o.reference[p]+o.reference[y]-g.mainAxis;m<_?m=_:m>w&&(m=w)}if(d){var b,v;const y=p==="y"?"width":"height",_=lw.has(Lr(n)),w=o.reference[h]-o.floating[y]+(_&&((b=i.offset)==null?void 0:b[h])||0)+(_?0:g.crossAxis),S=o.reference[h]+o.reference[y]+(_?0:((v=i.offset)==null?void 0:v[h])||0)-(_?g.crossAxis:0);j<w?j=w:j>S&&(j=S)}return{[p]:m,[h]:j}}}},WR=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var a,s;const{placement:n,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...d}=Pr(e,t),f=await uc(t,d),h=Lr(n),p=ol(n),m=rr(n)==="y",{width:j,height:x}=o.floating;let g,b;h==="top"||h==="bottom"?(g=h,b=p===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(b=h,g=p==="end"?"top":"bottom");const v=x-f.top-f.bottom,y=j-f.left-f.right,_=zn(x-f[g],v),w=zn(j-f[b],y),S=!t.middlewareData.shift;let N=_,C=w;if((a=t.middlewareData.shift)!=null&&a.enabled.x&&(C=y),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(N=v),S&&!p){const A=cs(f.left,0),q=cs(f.right,0),B=cs(f.top,0),ee=cs(f.bottom,0);m?C=j-2*(A!==0||q!==0?A+q:cs(f.left,f.right)):N=x-2*(B!==0||ee!==0?B+ee:cs(f.top,f.bottom))}await c({...t,availableWidth:C,availableHeight:N});const O=await i.getDimensions(l.floating);return j!==O.width||x!==O.height?{reset:{rects:!0}}:{}}}};function nf(){return typeof window<"u"}function il(e){return cw(e)?(e.nodeName||"").toLowerCase():"#document"}function ps(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function fr(e){var t;return(t=(cw(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function cw(e){return nf()?e instanceof Node||e instanceof ps(e).Node:!1}function Hs(e){return nf()?e instanceof Element||e instanceof ps(e).Element:!1}function cr(e){return nf()?e instanceof HTMLElement||e instanceof ps(e).HTMLElement:!1}function l0(e){return!nf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ps(e).ShadowRoot}const eD=new Set(["inline","contents"]);function Fc(e){const{overflow:t,overflowX:a,overflowY:s,display:n}=Vs(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+a)&&!eD.has(n)}const tD=new Set(["table","td","th"]);function aD(e){return tD.has(il(e))}const sD=[":popover-open",":modal"];function of(e){return sD.some(t=>{try{return e.matches(t)}catch{return!1}})}const rD=["transform","translate","scale","rotate","perspective"],nD=["transform","translate","scale","rotate","perspective","filter"],oD=["paint","layout","strict","content"];function Dv(e){const t=Ov(),a=Hs(e)?Vs(e):e;return rD.some(s=>a[s]?a[s]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!t&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!t&&(a.filter?a.filter!=="none":!1)||nD.some(s=>(a.willChange||"").includes(s))||oD.some(s=>(a.contain||"").includes(s))}function iD(e){let t=Mn(e);for(;cr(t)&&!Hi(t);){if(Dv(t))return t;if(of(t))return null;t=Mn(t)}return null}function Ov(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lD=new Set(["html","body","#document"]);function Hi(e){return lD.has(il(e))}function Vs(e){return ps(e).getComputedStyle(e)}function lf(e){return Hs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Mn(e){if(il(e)==="html")return e;const t=e.assignedSlot||e.parentNode||l0(e)&&e.host||fr(e);return l0(t)?t.host:t}function dw(e){const t=Mn(e);return Hi(t)?e.ownerDocument?e.ownerDocument.body:e.body:cr(t)&&Fc(t)?t:dw(t)}function fc(e,t,a){var s;t===void 0&&(t=[]),a===void 0&&(a=!0);const n=dw(e),o=n===((s=e.ownerDocument)==null?void 0:s.body),i=ps(n);if(o){const l=Gm(i);return t.concat(i,i.visualViewport||[],Fc(n)?n:[],l&&a?fc(l):[])}return t.concat(n,fc(n,[],a))}function Gm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function uw(e){const t=Vs(e);let a=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const n=cr(e),o=n?e.offsetWidth:a,i=n?e.offsetHeight:s,l=Nu(a)!==o||Nu(s)!==i;return l&&(a=o,s=i),{width:a,height:s,$:l}}function zv(e){return Hs(e)?e:e.contextElement}function ji(e){const t=zv(e);if(!cr(t))return lr(1);const a=t.getBoundingClientRect(),{width:s,height:n,$:o}=uw(t);let i=(o?Nu(a.width):a.width)/s,l=(o?Nu(a.height):a.height)/n;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const cD=lr(0);function fw(e){const t=ps(e);return!Ov()||!t.visualViewport?cD:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function dD(e,t,a){return t===void 0&&(t=!1),!a||t&&a!==ps(e)?!1:t}function yo(e,t,a,s){t===void 0&&(t=!1),a===void 0&&(a=!1);const n=e.getBoundingClientRect(),o=zv(e);let i=lr(1);t&&(s?Hs(s)&&(i=ji(s)):i=ji(e));const l=dD(o,a,s)?fw(o):lr(0);let c=(n.left+l.x)/i.x,d=(n.top+l.y)/i.y,f=n.width/i.x,h=n.height/i.y;if(o){const p=ps(o),m=s&&Hs(s)?ps(s):s;let j=p,x=Gm(j);for(;x&&s&&m!==j;){const g=ji(x),b=x.getBoundingClientRect(),v=Vs(x),y=b.left+(x.clientLeft+parseFloat(v.paddingLeft))*g.x,_=b.top+(x.clientTop+parseFloat(v.paddingTop))*g.y;c*=g.x,d*=g.y,f*=g.x,h*=g.y,c+=y,d+=_,j=ps(x),x=Gm(j)}}return Au({width:f,height:h,x:c,y:d})}function Mv(e,t){const a=lf(e).scrollLeft;return t?t.left+a:yo(fr(e)).left+a}function hw(e,t,a){a===void 0&&(a=!1);const s=e.getBoundingClientRect(),n=s.left+t.scrollLeft-(a?0:Mv(e,s)),o=s.top+t.scrollTop;return{x:n,y:o}}function uD(e){let{elements:t,rect:a,offsetParent:s,strategy:n}=e;const o=n==="fixed",i=fr(s),l=t?of(t.floating):!1;if(s===i||l&&o)return a;let c={scrollLeft:0,scrollTop:0},d=lr(1);const f=lr(0),h=cr(s);if((h||!h&&!o)&&((il(s)!=="body"||Fc(i))&&(c=lf(s)),cr(s))){const m=yo(s);d=ji(s),f.x=m.x+s.clientLeft,f.y=m.y+s.clientTop}const p=i&&!h&&!o?hw(i,c,!0):lr(0);return{width:a.width*d.x,height:a.height*d.y,x:a.x*d.x-c.scrollLeft*d.x+f.x+p.x,y:a.y*d.y-c.scrollTop*d.y+f.y+p.y}}function fD(e){return Array.from(e.getClientRects())}function hD(e){const t=fr(e),a=lf(e),s=e.ownerDocument.body,n=cs(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),o=cs(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let i=-a.scrollLeft+Mv(e);const l=-a.scrollTop;return Vs(s).direction==="rtl"&&(i+=cs(t.clientWidth,s.clientWidth)-n),{width:n,height:o,x:i,y:l}}function mD(e,t){const a=ps(e),s=fr(e),n=a.visualViewport;let o=s.clientWidth,i=s.clientHeight,l=0,c=0;if(n){o=n.width,i=n.height;const d=Ov();(!d||d&&t==="fixed")&&(l=n.offsetLeft,c=n.offsetTop)}return{width:o,height:i,x:l,y:c}}const pD=new Set(["absolute","fixed"]);function vD(e,t){const a=yo(e,!0,t==="fixed"),s=a.top+e.clientTop,n=a.left+e.clientLeft,o=cr(e)?ji(e):lr(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=n*o.x,d=s*o.y;return{width:i,height:l,x:c,y:d}}function c0(e,t,a){let s;if(t==="viewport")s=mD(e,a);else if(t==="document")s=hD(fr(e));else if(Hs(t))s=vD(t,a);else{const n=fw(e);s={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Au(s)}function mw(e,t){const a=Mn(e);return a===t||!Hs(a)||Hi(a)?!1:Vs(a).position==="fixed"||mw(a,t)}function gD(e,t){const a=t.get(e);if(a)return a;let s=fc(e,[],!1).filter(l=>Hs(l)&&il(l)!=="body"),n=null;const o=Vs(e).position==="fixed";let i=o?Mn(e):e;for(;Hs(i)&&!Hi(i);){const l=Vs(i),c=Dv(i);!c&&l.position==="fixed"&&(n=null),(o?!c&&!n:!c&&l.position==="static"&&!!n&&pD.has(n.position)||Fc(i)&&!c&&mw(e,i))?s=s.filter(f=>f!==i):n=l,i=Mn(i)}return t.set(e,s),s}function xD(e){let{element:t,boundary:a,rootBoundary:s,strategy:n}=e;const i=[...a==="clippingAncestors"?of(t)?[]:gD(t,this._c):[].concat(a),s],l=i[0],c=i.reduce((d,f)=>{const h=c0(t,f,n);return d.top=cs(h.top,d.top),d.right=zn(h.right,d.right),d.bottom=zn(h.bottom,d.bottom),d.left=cs(h.left,d.left),d},c0(t,l,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function yD(e){const{width:t,height:a}=uw(e);return{width:t,height:a}}function bD(e,t,a){const s=cr(t),n=fr(t),o=a==="fixed",i=yo(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=lr(0);function d(){c.x=Mv(n)}if(s||!s&&!o)if((il(t)!=="body"||Fc(n))&&(l=lf(t)),s){const m=yo(t,!0,o,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else n&&d();o&&!s&&n&&d();const f=n&&!s&&!o?hw(n,l):lr(0),h=i.left+l.scrollLeft-c.x-f.x,p=i.top+l.scrollTop-c.y-f.y;return{x:h,y:p,width:i.width,height:i.height}}function wh(e){return Vs(e).position==="static"}function d0(e,t){if(!cr(e)||Vs(e).position==="fixed")return null;if(t)return t(e);let a=e.offsetParent;return fr(e)===a&&(a=a.ownerDocument.body),a}function pw(e,t){const a=ps(e);if(of(e))return a;if(!cr(e)){let n=Mn(e);for(;n&&!Hi(n);){if(Hs(n)&&!wh(n))return n;n=Mn(n)}return a}let s=d0(e,t);for(;s&&aD(s)&&wh(s);)s=d0(s,t);return s&&Hi(s)&&wh(s)&&!Dv(s)?a:s||iD(e)||a}const _D=async function(e){const t=this.getOffsetParent||pw,a=this.getDimensions,s=await a(e.floating);return{reference:bD(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function jD(e){return Vs(e).direction==="rtl"}const wD={convertOffsetParentRelativeRectToViewportRelativeRect:uD,getDocumentElement:fr,getClippingRect:xD,getOffsetParent:pw,getElementRects:_D,getClientRects:fD,getDimensions:yD,getScale:ji,isElement:Hs,isRTL:jD};function vw(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function SD(e,t){let a=null,s;const n=fr(e);function o(){var l;clearTimeout(s),(l=a)==null||l.disconnect(),a=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const d=e.getBoundingClientRect(),{left:f,top:h,width:p,height:m}=d;if(l||t(),!p||!m)return;const j=gd(h),x=gd(n.clientWidth-(f+p)),g=gd(n.clientHeight-(h+m)),b=gd(f),y={rootMargin:-j+"px "+-x+"px "+-g+"px "+-b+"px",threshold:cs(0,zn(1,c))||1};let _=!0;function w(S){const N=S[0].intersectionRatio;if(N!==c){if(!_)return i();N?i(!1,N):s=setTimeout(()=>{i(!1,1e-7)},1e3)}N===1&&!vw(d,e.getBoundingClientRect())&&i(),_=!1}try{a=new IntersectionObserver(w,{...y,root:n.ownerDocument})}catch{a=new IntersectionObserver(w,y)}a.observe(e)}return i(!0),o}function ED(e,t,a,s){s===void 0&&(s={});const{ancestorScroll:n=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=zv(e),f=n||o?[...d?fc(d):[],...fc(t)]:[];f.forEach(b=>{n&&b.addEventListener("scroll",a,{passive:!0}),o&&b.addEventListener("resize",a)});const h=d&&l?SD(d,a):null;let p=-1,m=null;i&&(m=new ResizeObserver(b=>{let[v]=b;v&&v.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var y;(y=m)==null||y.observe(t)})),a()}),d&&!c&&m.observe(d),m.observe(t));let j,x=c?yo(e):null;c&&g();function g(){const b=yo(e);x&&!vw(x,b)&&a(),x=b,j=requestAnimationFrame(g)}return a(),()=>{var b;f.forEach(v=>{n&&v.removeEventListener("scroll",a),o&&v.removeEventListener("resize",a)}),h==null||h(),(b=m)==null||b.disconnect(),m=null,c&&cancelAnimationFrame(j)}}const ND=XR,CD=ZR,AD=YR,TD=WR,RD=QR,u0=GR,DD=JR,OD=(e,t,a)=>{const s=new Map,n={platform:wD,...a},o={...n.platform,_c:s};return VR(e,t,{...n,platform:o})};var zD=typeof document<"u",MD=function(){},Bd=zD?u.useLayoutEffect:MD;function Tu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let a,s,n;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(a=e.length,a!==t.length)return!1;for(s=a;s--!==0;)if(!Tu(e[s],t[s]))return!1;return!0}if(n=Object.keys(e),a=n.length,a!==Object.keys(t).length)return!1;for(s=a;s--!==0;)if(!{}.hasOwnProperty.call(t,n[s]))return!1;for(s=a;s--!==0;){const o=n[s];if(!(o==="_owner"&&e.$$typeof)&&!Tu(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function gw(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function f0(e,t){const a=gw(e);return Math.round(t*a)/a}function Sh(e){const t=u.useRef(e);return Bd(()=>{t.current=e}),t}function kD(e){e===void 0&&(e={});const{placement:t="bottom",strategy:a="absolute",middleware:s=[],platform:n,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[f,h]=u.useState({x:0,y:0,strategy:a,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=u.useState(s);Tu(p,s)||m(s);const[j,x]=u.useState(null),[g,b]=u.useState(null),v=u.useCallback($=>{$!==S.current&&(S.current=$,x($))},[]),y=u.useCallback($=>{$!==N.current&&(N.current=$,b($))},[]),_=o||j,w=i||g,S=u.useRef(null),N=u.useRef(null),C=u.useRef(f),O=c!=null,A=Sh(c),q=Sh(n),B=Sh(d),ee=u.useCallback(()=>{if(!S.current||!N.current)return;const $={placement:t,strategy:a,middleware:p};q.current&&($.platform=q.current),OD(S.current,N.current,$).then(E=>{const D={...E,isPositioned:B.current!==!1};Q.current&&!Tu(C.current,D)&&(C.current=D,Ro.flushSync(()=>{h(D)}))})},[p,t,a,q,B]);Bd(()=>{d===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,h($=>({...$,isPositioned:!1})))},[d]);const Q=u.useRef(!1);Bd(()=>(Q.current=!0,()=>{Q.current=!1}),[]),Bd(()=>{if(_&&(S.current=_),w&&(N.current=w),_&&w){if(A.current)return A.current(_,w,ee);ee()}},[_,w,ee,A,O]);const X=u.useMemo(()=>({reference:S,floating:N,setReference:v,setFloating:y}),[v,y]),R=u.useMemo(()=>({reference:_,floating:w}),[_,w]),Y=u.useMemo(()=>{const $={position:a,left:0,top:0};if(!R.floating)return $;const E=f0(R.floating,f.x),D=f0(R.floating,f.y);return l?{...$,transform:"translate("+E+"px, "+D+"px)",...gw(R.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:E,top:D}},[a,l,R.floating,f.x,f.y]);return u.useMemo(()=>({...f,update:ee,refs:X,elements:R,floatingStyles:Y}),[f,ee,X,R,Y])}const PD=e=>{function t(a){return{}.hasOwnProperty.call(a,"current")}return{name:"arrow",options:e,fn(a){const{element:s,padding:n}=typeof e=="function"?e(a):e;return s&&t(s)?s.current!=null?u0({element:s.current,padding:n}).fn(a):{}:s?u0({element:s,padding:n}).fn(a):{}}}},LD=(e,t)=>({...ND(e),options:[e,t]}),ID=(e,t)=>({...CD(e),options:[e,t]}),FD=(e,t)=>({...DD(e),options:[e,t]}),qD=(e,t)=>({...AD(e),options:[e,t]}),UD=(e,t)=>({...TD(e),options:[e,t]}),BD=(e,t)=>({...RD(e),options:[e,t]}),$D=(e,t)=>({...PD(e),options:[e,t]});var HD="Arrow",xw=u.forwardRef((e,t)=>{const{children:a,width:s=10,height:n=5,...o}=e;return r.jsx(Be.svg,{...o,ref:t,width:s,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?a:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});xw.displayName=HD;var VD=xw;function yw(e){const[t,a]=u.useState(void 0);return Oa(()=>{if(e){a({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const o=n[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;a({width:i,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else a(void 0)},[e]),t}var kv="Popper",[bw,ll]=Os(kv),[GD,_w]=bw(kv),jw=e=>{const{__scopePopper:t,children:a}=e,[s,n]=u.useState(null);return r.jsx(GD,{scope:t,anchor:s,onAnchorChange:n,children:a})};jw.displayName=kv;var ww="PopperAnchor",Sw=u.forwardRef((e,t)=>{const{__scopePopper:a,virtualRef:s,...n}=e,o=_w(ww,a),i=u.useRef(null),l=vt(t,i);return u.useEffect(()=>{o.onAnchorChange((s==null?void 0:s.current)||i.current)}),s?null:r.jsx(Be.div,{...n,ref:l})});Sw.displayName=ww;var Pv="PopperContent",[YD,QD]=bw(Pv),Ew=u.forwardRef((e,t)=>{var k,P,ce,re,ie,oe;const{__scopePopper:a,side:s="bottom",sideOffset:n=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:j,...x}=e,g=_w(Pv,a),[b,v]=u.useState(null),y=vt(t,he=>v(he)),[_,w]=u.useState(null),S=yw(_),N=(S==null?void 0:S.width)??0,C=(S==null?void 0:S.height)??0,O=s+(o!=="center"?"-"+o:""),A=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},q=Array.isArray(d)?d:[d],B=q.length>0,ee={padding:A,boundary:q.filter(XD),altBoundary:B},{refs:Q,floatingStyles:X,placement:R,isPositioned:Y,middlewareData:$}=kD({strategy:"fixed",placement:O,whileElementsMounted:(...he)=>ED(...he,{animationFrame:m==="always"}),elements:{reference:g.anchor},middleware:[LD({mainAxis:n+C,alignmentAxis:i}),c&&ID({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?FD():void 0,...ee}),c&&qD({...ee}),UD({...ee,apply:({elements:he,rects:Te,availableWidth:Pe,availableHeight:Fe})=>{const{width:J,height:xe}=Te.reference,I=he.floating.style;I.setProperty("--radix-popper-available-width",`${Pe}px`),I.setProperty("--radix-popper-available-height",`${Fe}px`),I.setProperty("--radix-popper-anchor-width",`${J}px`),I.setProperty("--radix-popper-anchor-height",`${xe}px`)}}),_&&$D({element:_,padding:l}),ZD({arrowWidth:N,arrowHeight:C}),p&&BD({strategy:"referenceHidden",...ee})]}),[E,D]=Aw(R),G=Ts(j);Oa(()=>{Y&&(G==null||G())},[Y,G]);const M=(k=$.arrow)==null?void 0:k.x,K=(P=$.arrow)==null?void 0:P.y,H=((ce=$.arrow)==null?void 0:ce.centerOffset)!==0,[ne,pe]=u.useState();return Oa(()=>{b&&pe(window.getComputedStyle(b).zIndex)},[b]),r.jsx("div",{ref:Q.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:Y?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ne,"--radix-popper-transform-origin":[(re=$.transformOrigin)==null?void 0:re.x,(ie=$.transformOrigin)==null?void 0:ie.y].join(" "),...((oe=$.hide)==null?void 0:oe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(YD,{scope:a,placedSide:E,onArrowChange:w,arrowX:M,arrowY:K,shouldHideArrow:H,children:r.jsx(Be.div,{"data-side":E,"data-align":D,...x,ref:y,style:{...x.style,animation:Y?void 0:"none"}})})})});Ew.displayName=Pv;var Nw="PopperArrow",KD={top:"bottom",right:"left",bottom:"top",left:"right"},Cw=u.forwardRef(function(t,a){const{__scopePopper:s,...n}=t,o=QD(Nw,s),i=KD[o.placedSide];return r.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:r.jsx(VD,{...n,ref:a,style:{...n.style,display:"block"}})})});Cw.displayName=Nw;function XD(e){return e!==null}var ZD=e=>({name:"transformOrigin",options:e,fn(t){var g,b,v;const{placement:a,rects:s,middlewareData:n}=t,i=((g=n.arrow)==null?void 0:g.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,f]=Aw(a),h={start:"0%",center:"50%",end:"100%"}[f],p=(((b=n.arrow)==null?void 0:b.x)??0)+l/2,m=(((v=n.arrow)==null?void 0:v.y)??0)+c/2;let j="",x="";return d==="bottom"?(j=i?h:`${p}px`,x=`${-c}px`):d==="top"?(j=i?h:`${p}px`,x=`${s.floating.height+c}px`):d==="right"?(j=`${-c}px`,x=i?h:`${m}px`):d==="left"&&(j=`${s.floating.width+c}px`,x=i?h:`${m}px`),{data:{x:j,y:x}}}});function Aw(e){const[t,a="center"]=e.split("-");return[t,a]}var Tw=jw,cf=Sw,Lv=Ew,Iv=Cw,[df,S5]=Os("Tooltip",[ll]),Fv=ll(),Rw="TooltipProvider",JD=700,h0="tooltip.open",[WD,Dw]=df(Rw),Ow=e=>{const{__scopeTooltip:t,delayDuration:a=JD,skipDelayDuration:s=300,disableHoverableContent:n=!1,children:o}=e,i=u.useRef(!0),l=u.useRef(!1),c=u.useRef(0);return u.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(WD,{scope:t,isOpenDelayedRef:i,delayDuration:a,onOpen:u.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:u.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:u.useCallback(d=>{l.current=d},[]),disableHoverableContent:n,children:o})};Ow.displayName=Rw;var zw="Tooltip",[E5,uf]=df(zw),Ym="TooltipTrigger",eO=u.forwardRef((e,t)=>{const{__scopeTooltip:a,...s}=e,n=uf(Ym,a),o=Dw(Ym,a),i=Fv(a),l=u.useRef(null),c=vt(t,l,n.onTriggerChange),d=u.useRef(!1),f=u.useRef(!1),h=u.useCallback(()=>d.current=!1,[]);return u.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),r.jsx(cf,{asChild:!0,...i,children:r.jsx(Be.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...s,ref:c,onPointerMove:De(e.onPointerMove,p=>{p.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(n.onTriggerEnter(),f.current=!0)}),onPointerLeave:De(e.onPointerLeave,()=>{n.onTriggerLeave(),f.current=!1}),onPointerDown:De(e.onPointerDown,()=>{n.open&&n.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:De(e.onFocus,()=>{d.current||n.onOpen()}),onBlur:De(e.onBlur,n.onClose),onClick:De(e.onClick,n.onClose)})})});eO.displayName=Ym;var tO="TooltipPortal",[N5,aO]=df(tO,{forceMount:void 0}),Vi="TooltipContent",Mw=u.forwardRef((e,t)=>{const a=aO(Vi,e.__scopeTooltip),{forceMount:s=a.forceMount,side:n="top",...o}=e,i=uf(Vi,e.__scopeTooltip);return r.jsx(Ur,{present:s||i.open,children:i.disableHoverableContent?r.jsx(kw,{side:n,...o,ref:t}):r.jsx(sO,{side:n,...o,ref:t})})}),sO=u.forwardRef((e,t)=>{const a=uf(Vi,e.__scopeTooltip),s=Dw(Vi,e.__scopeTooltip),n=u.useRef(null),o=vt(t,n),[i,l]=u.useState(null),{trigger:c,onClose:d}=a,f=n.current,{onPointerInTransitChange:h}=s,p=u.useCallback(()=>{l(null),h(!1)},[h]),m=u.useCallback((j,x)=>{const g=j.currentTarget,b={x:j.clientX,y:j.clientY},v=lO(b,g.getBoundingClientRect()),y=cO(b,v),_=dO(x.getBoundingClientRect()),w=fO([...y,..._]);l(w),h(!0)},[h]);return u.useEffect(()=>()=>p(),[p]),u.useEffect(()=>{if(c&&f){const j=g=>m(g,f),x=g=>m(g,c);return c.addEventListener("pointerleave",j),f.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",j),f.removeEventListener("pointerleave",x)}}},[c,f,m,p]),u.useEffect(()=>{if(i){const j=x=>{const g=x.target,b={x:x.clientX,y:x.clientY},v=(c==null?void 0:c.contains(g))||(f==null?void 0:f.contains(g)),y=!uO(b,i);v?p():y&&(p(),d())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[c,f,i,d,p]),r.jsx(kw,{...e,ref:o})}),[rO,nO]=df(zw,{isInside:!1}),oO=vj("TooltipContent"),kw=u.forwardRef((e,t)=>{const{__scopeTooltip:a,children:s,"aria-label":n,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=uf(Vi,a),d=Fv(a),{onClose:f}=c;return u.useEffect(()=>(document.addEventListener(h0,f),()=>document.removeEventListener(h0,f)),[f]),u.useEffect(()=>{if(c.trigger){const h=p=>{const m=p.target;m!=null&&m.contains(c.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,f]),r.jsx(sl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:r.jsxs(Lv,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(oO,{children:s}),r.jsx(rO,{scope:a,isInside:!0,children:r.jsx(mT,{id:c.contentId,role:"tooltip",children:n||s})})]})})});Mw.displayName=Vi;var Pw="TooltipArrow",iO=u.forwardRef((e,t)=>{const{__scopeTooltip:a,...s}=e,n=Fv(a);return nO(Pw,a).isInside?null:r.jsx(Iv,{...n,...s,ref:t})});iO.displayName=Pw;function lO(e,t){const a=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(a,s,n,o)){case o:return"left";case n:return"right";case a:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function cO(e,t,a=5){const s=[];switch(t){case"top":s.push({x:e.x-a,y:e.y+a},{x:e.x+a,y:e.y+a});break;case"bottom":s.push({x:e.x-a,y:e.y-a},{x:e.x+a,y:e.y-a});break;case"left":s.push({x:e.x+a,y:e.y-a},{x:e.x+a,y:e.y+a});break;case"right":s.push({x:e.x-a,y:e.y-a},{x:e.x-a,y:e.y+a});break}return s}function dO(e){const{top:t,right:a,bottom:s,left:n}=e;return[{x:n,y:t},{x:a,y:t},{x:a,y:s},{x:n,y:s}]}function uO(e,t){const{x:a,y:s}=e;let n=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],d=l.x,f=l.y,h=c.x,p=c.y;f>s!=p>s&&a<(h-d)*(s-f)/(p-f)+d&&(n=!n)}return n}function fO(e){const t=e.slice();return t.sort((a,s)=>a.x<s.x?-1:a.x>s.x?1:a.y<s.y?-1:a.y>s.y?1:0),hO(t)}function hO(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const n=e[s];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(n.y-i.y)>=(o.y-i.y)*(n.x-i.x))t.pop();else break}t.push(n)}t.pop();const a=[];for(let s=e.length-1;s>=0;s--){const n=e[s];for(;a.length>=2;){const o=a[a.length-1],i=a[a.length-2];if((o.x-i.x)*(n.y-i.y)>=(o.y-i.y)*(n.x-i.x))a.pop();else break}a.push(n)}return a.pop(),t.length===1&&a.length===1&&t[0].x===a[0].x&&t[0].y===a[0].y?t:t.concat(a)}var mO=Ow,Lw=Mw;const pO=mO,vO=u.forwardRef(({className:e,sideOffset:t=4,...a},s)=>r.jsx(Lw,{ref:s,sideOffset:t,className:ye("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a}));vO.displayName=Lw.displayName;var ff=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hf=typeof window>"u"||"Deno"in globalThis;function Ls(){}function gO(e,t){return typeof e=="function"?e(t):e}function xO(e){return typeof e=="number"&&e>=0&&e!==1/0}function yO(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Qm(e,t){return typeof e=="function"?e(t):e}function bO(e,t){return typeof e=="function"?e(t):e}function m0(e,t){const{type:a="all",exact:s,fetchStatus:n,predicate:o,queryKey:i,stale:l}=e;if(i){if(s){if(t.queryHash!==qv(i,t.options))return!1}else if(!mc(t.queryKey,i))return!1}if(a!=="all"){const c=t.isActive();if(a==="active"&&!c||a==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||n&&n!==t.state.fetchStatus||o&&!o(t))}function p0(e,t){const{exact:a,status:s,predicate:n,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(a){if(hc(t.options.mutationKey)!==hc(o))return!1}else if(!mc(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||n&&!n(t))}function qv(e,t){return((t==null?void 0:t.queryKeyHashFn)||hc)(e)}function hc(e){return JSON.stringify(e,(t,a)=>Km(a)?Object.keys(a).sort().reduce((s,n)=>(s[n]=a[n],s),{}):a)}function mc(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(a=>mc(e[a],t[a])):!1}function Iw(e,t){if(e===t)return e;const a=v0(e)&&v0(t);if(a||Km(e)&&Km(t)){const s=a?e:Object.keys(e),n=s.length,o=a?t:Object.keys(t),i=o.length,l=a?[]:{},c=new Set(s);let d=0;for(let f=0;f<i;f++){const h=a?f:o[f];(!a&&c.has(h)||a)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,d++):(l[h]=Iw(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&d++)}return n===i&&d===n?e:l}return t}function v0(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Km(e){if(!g0(e))return!1;const t=e.constructor;if(t===void 0)return!0;const a=t.prototype;return!(!g0(a)||!a.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function g0(e){return Object.prototype.toString.call(e)==="[object Object]"}function _O(e){return new Promise(t=>{setTimeout(t,e)})}function jO(e,t,a){return typeof a.structuralSharing=="function"?a.structuralSharing(e,t):a.structuralSharing!==!1?Iw(e,t):t}function wO(e,t,a=0){const s=[...e,t];return a&&s.length>a?s.slice(1):s}function SO(e,t,a=0){const s=[t,...e];return a&&s.length>a?s.slice(0,-1):s}var Uv=Symbol();function Fw(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Uv?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Wn,un,Ei,ly,EO=(ly=class extends ff{constructor(){super();pt(this,Wn);pt(this,un);pt(this,Ei);Ge(this,Ei,t=>{if(!hf&&window.addEventListener){const a=()=>t();return window.addEventListener("visibilitychange",a,!1),()=>{window.removeEventListener("visibilitychange",a)}}})}onSubscribe(){W(this,un)||this.setEventListener(W(this,Ei))}onUnsubscribe(){var t;this.hasListeners()||((t=W(this,un))==null||t.call(this),Ge(this,un,void 0))}setEventListener(t){var a;Ge(this,Ei,t),(a=W(this,un))==null||a.call(this),Ge(this,un,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){W(this,Wn)!==t&&(Ge(this,Wn,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(a=>{a(t)})}isFocused(){var t;return typeof W(this,Wn)=="boolean"?W(this,Wn):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Wn=new WeakMap,un=new WeakMap,Ei=new WeakMap,ly),qw=new EO,Ni,fn,Ci,cy,NO=(cy=class extends ff{constructor(){super();pt(this,Ni,!0);pt(this,fn);pt(this,Ci);Ge(this,Ci,t=>{if(!hf&&window.addEventListener){const a=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",a,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",s)}}})}onSubscribe(){W(this,fn)||this.setEventListener(W(this,Ci))}onUnsubscribe(){var t;this.hasListeners()||((t=W(this,fn))==null||t.call(this),Ge(this,fn,void 0))}setEventListener(t){var a;Ge(this,Ci,t),(a=W(this,fn))==null||a.call(this),Ge(this,fn,t(this.setOnline.bind(this)))}setOnline(t){W(this,Ni)!==t&&(Ge(this,Ni,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return W(this,Ni)}},Ni=new WeakMap,fn=new WeakMap,Ci=new WeakMap,cy),Ru=new NO;function CO(){let e,t;const a=new Promise((n,o)=>{e=n,t=o});a.status="pending",a.catch(()=>{});function s(n){Object.assign(a,n),delete a.resolve,delete a.reject}return a.resolve=n=>{s({status:"fulfilled",value:n}),e(n)},a.reject=n=>{s({status:"rejected",reason:n}),t(n)},a}function AO(e){return Math.min(1e3*2**e,3e4)}function Uw(e){return(e??"online")==="online"?Ru.isOnline():!0}var Bw=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Eh(e){return e instanceof Bw}function $w(e){let t=!1,a=0,s=!1,n;const o=CO(),i=x=>{var g;s||(p(new Bw(x)),(g=e.abort)==null||g.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>qw.isFocused()&&(e.networkMode==="always"||Ru.isOnline())&&e.canRun(),f=()=>Uw(e.networkMode)&&e.canRun(),h=x=>{var g;s||(s=!0,(g=e.onSuccess)==null||g.call(e,x),n==null||n(),o.resolve(x))},p=x=>{var g;s||(s=!0,(g=e.onError)==null||g.call(e,x),n==null||n(),o.reject(x))},m=()=>new Promise(x=>{var g;n=b=>{(s||d())&&x(b)},(g=e.onPause)==null||g.call(e)}).then(()=>{var x;n=void 0,s||(x=e.onContinue)==null||x.call(e)}),j=()=>{if(s)return;let x;const g=a===0?e.initialPromise:void 0;try{x=g??e.fn()}catch(b){x=Promise.reject(b)}Promise.resolve(x).then(h).catch(b=>{var S;if(s)return;const v=e.retry??(hf?0:3),y=e.retryDelay??AO,_=typeof y=="function"?y(a,b):y,w=v===!0||typeof v=="number"&&a<v||typeof v=="function"&&v(a,b);if(t||!w){p(b);return}a++,(S=e.onFail)==null||S.call(e,a,b),_O(_).then(()=>d()?void 0:m()).then(()=>{t?p(b):j()})})};return{promise:o,cancel:i,continue:()=>(n==null||n(),o),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?j():m().then(j),o)}}var TO=e=>setTimeout(e,0);function RO(){let e=[],t=0,a=l=>{l()},s=l=>{l()},n=TO;const o=l=>{t?e.push(l):n(()=>{a(l)})},i=()=>{const l=e;e=[],l.length&&n(()=>{s(()=>{l.forEach(c=>{a(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{a=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{n=l}}}var Ba=RO(),eo,dy,Hw=(dy=class{constructor(){pt(this,eo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),xO(this.gcTime)&&Ge(this,eo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(hf?1/0:5*60*1e3))}clearGcTimeout(){W(this,eo)&&(clearTimeout(W(this,eo)),Ge(this,eo,void 0))}},eo=new WeakMap,dy),Ai,to,xs,ao,Pa,yc,so,Is,yr,uy,DO=(uy=class extends Hw{constructor(t){super();pt(this,Is);pt(this,Ai);pt(this,to);pt(this,xs);pt(this,ao);pt(this,Pa);pt(this,yc);pt(this,so);Ge(this,so,!1),Ge(this,yc,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ge(this,ao,t.client),Ge(this,xs,W(this,ao).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ge(this,Ai,zO(this.options)),this.state=t.state??W(this,Ai),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=W(this,Pa))==null?void 0:t.promise}setOptions(t){this.options={...W(this,yc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&W(this,xs).remove(this)}setData(t,a){const s=jO(this.state.data,t,this.options);return Ma(this,Is,yr).call(this,{data:s,type:"success",dataUpdatedAt:a==null?void 0:a.updatedAt,manual:a==null?void 0:a.manual}),s}setState(t,a){Ma(this,Is,yr).call(this,{type:"setState",state:t,setStateOptions:a})}cancel(t){var s,n;const a=(s=W(this,Pa))==null?void 0:s.promise;return(n=W(this,Pa))==null||n.cancel(t),a?a.then(Ls).catch(Ls):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(W(this,Ai))}isActive(){return this.observers.some(t=>bO(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Uv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Qm(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!yO(this.state.dataUpdatedAt,t)}onFocus(){var a;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(a=W(this,Pa))==null||a.continue()}onOnline(){var a;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(a=W(this,Pa))==null||a.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),W(this,xs).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(a=>a!==t),this.observers.length||(W(this,Pa)&&(W(this,so)?W(this,Pa).cancel({revert:!0}):W(this,Pa).cancelRetry()),this.scheduleGc()),W(this,xs).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ma(this,Is,yr).call(this,{type:"invalidate"})}fetch(t,a){var d,f,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(a!=null&&a.cancelRefetch))this.cancel({silent:!0});else if(W(this,Pa))return W(this,Pa).continueRetry(),W(this,Pa).promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(m=>m.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,n=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Ge(this,so,!0),s.signal)})},o=()=>{const p=Fw(this.options,a),j=(()=>{const x={client:W(this,ao),queryKey:this.queryKey,meta:this.meta};return n(x),x})();return Ge(this,so,!1),this.options.persister?this.options.persister(p,j,this):p(j)},l=(()=>{const p={fetchOptions:a,options:this.options,queryKey:this.queryKey,client:W(this,ao),state:this.state,fetchFn:o};return n(p),p})();(d=this.options.behavior)==null||d.onFetch(l,this),Ge(this,to,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&Ma(this,Is,yr).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=p=>{var m,j,x,g;Eh(p)&&p.silent||Ma(this,Is,yr).call(this,{type:"error",error:p}),Eh(p)||((j=(m=W(this,xs).config).onError)==null||j.call(m,p,this),(g=(x=W(this,xs).config).onSettled)==null||g.call(x,this.state.data,p,this)),this.scheduleGc()};return Ge(this,Pa,$w({initialPromise:a==null?void 0:a.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var m,j,x,g;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(b){c(b);return}(j=(m=W(this,xs).config).onSuccess)==null||j.call(m,p,this),(g=(x=W(this,xs).config).onSettled)==null||g.call(x,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,m)=>{Ma(this,Is,yr).call(this,{type:"failed",failureCount:p,error:m})},onPause:()=>{Ma(this,Is,yr).call(this,{type:"pause"})},onContinue:()=>{Ma(this,Is,yr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),W(this,Pa).start()}},Ai=new WeakMap,to=new WeakMap,xs=new WeakMap,ao=new WeakMap,Pa=new WeakMap,yc=new WeakMap,so=new WeakMap,Is=new WeakSet,yr=function(t){const a=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...OO(s.data,this.options),fetchMeta:t.meta??null};case"success":return Ge(this,to,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return Eh(n)&&n.revert&&W(this,to)?{...W(this,to),fetchStatus:"idle"}:{...s,error:n,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=a(this.state),Ba.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),W(this,xs).notify({query:this,type:"updated",action:t})})},uy);function OO(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Uw(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function zO(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,a=t!==void 0,s=a?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:a?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}var Js,fy,MO=(fy=class extends ff{constructor(t={}){super();pt(this,Js);this.config=t,Ge(this,Js,new Map)}build(t,a,s){const n=a.queryKey,o=a.queryHash??qv(n,a);let i=this.get(o);return i||(i=new DO({client:t,queryKey:n,queryHash:o,options:t.defaultQueryOptions(a),state:s,defaultOptions:t.getQueryDefaults(n)}),this.add(i)),i}add(t){W(this,Js).has(t.queryHash)||(W(this,Js).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const a=W(this,Js).get(t.queryHash);a&&(t.destroy(),a===t&&W(this,Js).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ba.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return W(this,Js).get(t)}getAll(){return[...W(this,Js).values()]}find(t){const a={exact:!0,...t};return this.getAll().find(s=>m0(a,s))}findAll(t={}){const a=this.getAll();return Object.keys(t).length>0?a.filter(s=>m0(t,s)):a}notify(t){Ba.batch(()=>{this.listeners.forEach(a=>{a(t)})})}onFocus(){Ba.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ba.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Js=new WeakMap,fy),Ws,Ua,ro,er,Wr,hy,kO=(hy=class extends Hw{constructor(t){super();pt(this,er);pt(this,Ws);pt(this,Ua);pt(this,ro);this.mutationId=t.mutationId,Ge(this,Ua,t.mutationCache),Ge(this,Ws,[]),this.state=t.state||PO(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){W(this,Ws).includes(t)||(W(this,Ws).push(t),this.clearGcTimeout(),W(this,Ua).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ge(this,Ws,W(this,Ws).filter(a=>a!==t)),this.scheduleGc(),W(this,Ua).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){W(this,Ws).length||(this.state.status==="pending"?this.scheduleGc():W(this,Ua).remove(this))}continue(){var t;return((t=W(this,ro))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,i,l,c,d,f,h,p,m,j,x,g,b,v,y,_,w,S,N,C;const a=()=>{Ma(this,er,Wr).call(this,{type:"continue"})};Ge(this,ro,$w({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(O,A)=>{Ma(this,er,Wr).call(this,{type:"failed",failureCount:O,error:A})},onPause:()=>{Ma(this,er,Wr).call(this,{type:"pause"})},onContinue:a,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>W(this,Ua).canRun(this)}));const s=this.state.status==="pending",n=!W(this,ro).canStart();try{if(s)a();else{Ma(this,er,Wr).call(this,{type:"pending",variables:t,isPaused:n}),await((i=(o=W(this,Ua).config).onMutate)==null?void 0:i.call(o,t,this));const A=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));A!==this.state.context&&Ma(this,er,Wr).call(this,{type:"pending",context:A,variables:t,isPaused:n})}const O=await W(this,ro).start();return await((f=(d=W(this,Ua).config).onSuccess)==null?void 0:f.call(d,O,t,this.state.context,this)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,O,t,this.state.context)),await((j=(m=W(this,Ua).config).onSettled)==null?void 0:j.call(m,O,null,this.state.variables,this.state.context,this)),await((g=(x=this.options).onSettled)==null?void 0:g.call(x,O,null,t,this.state.context)),Ma(this,er,Wr).call(this,{type:"success",data:O}),O}catch(O){try{throw await((v=(b=W(this,Ua).config).onError)==null?void 0:v.call(b,O,t,this.state.context,this)),await((_=(y=this.options).onError)==null?void 0:_.call(y,O,t,this.state.context)),await((S=(w=W(this,Ua).config).onSettled)==null?void 0:S.call(w,void 0,O,this.state.variables,this.state.context,this)),await((C=(N=this.options).onSettled)==null?void 0:C.call(N,void 0,O,t,this.state.context)),O}finally{Ma(this,er,Wr).call(this,{type:"error",error:O})}}finally{W(this,Ua).runNext(this)}}},Ws=new WeakMap,Ua=new WeakMap,ro=new WeakMap,er=new WeakSet,Wr=function(t){const a=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=a(this.state),Ba.batch(()=>{W(this,Ws).forEach(s=>{s.onMutationUpdate(t)}),W(this,Ua).notify({mutation:this,type:"updated",action:t})})},hy);function PO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var jr,Fs,bc,my,LO=(my=class extends ff{constructor(t={}){super();pt(this,jr);pt(this,Fs);pt(this,bc);this.config=t,Ge(this,jr,new Set),Ge(this,Fs,new Map),Ge(this,bc,0)}build(t,a,s){const n=new kO({mutationCache:this,mutationId:++Jc(this,bc)._,options:t.defaultMutationOptions(a),state:s});return this.add(n),n}add(t){W(this,jr).add(t);const a=xd(t);if(typeof a=="string"){const s=W(this,Fs).get(a);s?s.push(t):W(this,Fs).set(a,[t])}this.notify({type:"added",mutation:t})}remove(t){if(W(this,jr).delete(t)){const a=xd(t);if(typeof a=="string"){const s=W(this,Fs).get(a);if(s)if(s.length>1){const n=s.indexOf(t);n!==-1&&s.splice(n,1)}else s[0]===t&&W(this,Fs).delete(a)}}this.notify({type:"removed",mutation:t})}canRun(t){const a=xd(t);if(typeof a=="string"){const s=W(this,Fs).get(a),n=s==null?void 0:s.find(o=>o.state.status==="pending");return!n||n===t}else return!0}runNext(t){var s;const a=xd(t);if(typeof a=="string"){const n=(s=W(this,Fs).get(a))==null?void 0:s.find(o=>o!==t&&o.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ba.batch(()=>{W(this,jr).forEach(t=>{this.notify({type:"removed",mutation:t})}),W(this,jr).clear(),W(this,Fs).clear()})}getAll(){return Array.from(W(this,jr))}find(t){const a={exact:!0,...t};return this.getAll().find(s=>p0(a,s))}findAll(t={}){return this.getAll().filter(a=>p0(t,a))}notify(t){Ba.batch(()=>{this.listeners.forEach(a=>{a(t)})})}resumePausedMutations(){const t=this.getAll().filter(a=>a.state.isPaused);return Ba.batch(()=>Promise.all(t.map(a=>a.continue().catch(Ls))))}},jr=new WeakMap,Fs=new WeakMap,bc=new WeakMap,my);function xd(e){var t;return(t=e.options.scope)==null?void 0:t.id}function x0(e){return{onFetch:(t,a)=>{var f,h,p,m,j;const s=t.options,n=(p=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,o=((m=t.state.data)==null?void 0:m.pages)||[],i=((j=t.state.data)==null?void 0:j.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const g=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},b=Fw(t.options,t.fetchOptions),v=async(y,_,w)=>{if(x)return Promise.reject();if(_==null&&y.pages.length)return Promise.resolve(y);const N=(()=>{const q={client:t.client,queryKey:t.queryKey,pageParam:_,direction:w?"backward":"forward",meta:t.options.meta};return g(q),q})(),C=await b(N),{maxPages:O}=t.options,A=w?SO:wO;return{pages:A(y.pages,C,O),pageParams:A(y.pageParams,_,O)}};if(n&&o.length){const y=n==="backward",_=y?IO:y0,w={pages:o,pageParams:i},S=_(s,w);l=await v(w,S,y)}else{const y=e??o.length;do{const _=c===0?i[0]??s.initialPageParam:y0(s,l);if(c>0&&_==null)break;l=await v(l,_),c++}while(c<y)}return l};t.options.persister?t.fetchFn=()=>{var x,g;return(g=(x=t.options).persister)==null?void 0:g.call(x,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},a)}:t.fetchFn=d}}}function y0(e,{pages:t,pageParams:a}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,a[s],a):void 0}function IO(e,{pages:t,pageParams:a}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,a[0],a):void 0}var oa,hn,mn,Ti,Ri,pn,Di,Oi,py,FO=(py=class{constructor(e={}){pt(this,oa);pt(this,hn);pt(this,mn);pt(this,Ti);pt(this,Ri);pt(this,pn);pt(this,Di);pt(this,Oi);Ge(this,oa,e.queryCache||new MO),Ge(this,hn,e.mutationCache||new LO),Ge(this,mn,e.defaultOptions||{}),Ge(this,Ti,new Map),Ge(this,Ri,new Map),Ge(this,pn,0)}mount(){Jc(this,pn)._++,W(this,pn)===1&&(Ge(this,Di,qw.subscribe(async e=>{e&&(await this.resumePausedMutations(),W(this,oa).onFocus())})),Ge(this,Oi,Ru.subscribe(async e=>{e&&(await this.resumePausedMutations(),W(this,oa).onOnline())})))}unmount(){var e,t;Jc(this,pn)._--,W(this,pn)===0&&((e=W(this,Di))==null||e.call(this),Ge(this,Di,void 0),(t=W(this,Oi))==null||t.call(this),Ge(this,Oi,void 0))}isFetching(e){return W(this,oa).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return W(this,hn).findAll({...e,status:"pending"}).length}getQueryData(e){var a;const t=this.defaultQueryOptions({queryKey:e});return(a=W(this,oa).get(t.queryHash))==null?void 0:a.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),a=W(this,oa).build(this,t),s=a.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&a.isStaleByTime(Qm(t.staleTime,a))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return W(this,oa).findAll(e).map(({queryKey:t,state:a})=>{const s=a.data;return[t,s]})}setQueryData(e,t,a){const s=this.defaultQueryOptions({queryKey:e}),n=W(this,oa).get(s.queryHash),o=n==null?void 0:n.state.data,i=gO(t,o);if(i!==void 0)return W(this,oa).build(this,s).setData(i,{...a,manual:!0})}setQueriesData(e,t,a){return Ba.batch(()=>W(this,oa).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,a)]))}getQueryState(e){var a;const t=this.defaultQueryOptions({queryKey:e});return(a=W(this,oa).get(t.queryHash))==null?void 0:a.state}removeQueries(e){const t=W(this,oa);Ba.batch(()=>{t.findAll(e).forEach(a=>{t.remove(a)})})}resetQueries(e,t){const a=W(this,oa);return Ba.batch(()=>(a.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const a={revert:!0,...t},s=Ba.batch(()=>W(this,oa).findAll(e).map(n=>n.cancel(a)));return Promise.all(s).then(Ls).catch(Ls)}invalidateQueries(e,t={}){return Ba.batch(()=>(W(this,oa).findAll(e).forEach(a=>{a.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const a={...t,cancelRefetch:t.cancelRefetch??!0},s=Ba.batch(()=>W(this,oa).findAll(e).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let o=n.fetch(void 0,a);return a.throwOnError||(o=o.catch(Ls)),n.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(Ls)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const a=W(this,oa).build(this,t);return a.isStaleByTime(Qm(t.staleTime,a))?a.fetch(t):Promise.resolve(a.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ls).catch(Ls)}fetchInfiniteQuery(e){return e.behavior=x0(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ls).catch(Ls)}ensureInfiniteQueryData(e){return e.behavior=x0(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ru.isOnline()?W(this,hn).resumePausedMutations():Promise.resolve()}getQueryCache(){return W(this,oa)}getMutationCache(){return W(this,hn)}getDefaultOptions(){return W(this,mn)}setDefaultOptions(e){Ge(this,mn,e)}setQueryDefaults(e,t){W(this,Ti).set(hc(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...W(this,Ti).values()],a={};return t.forEach(s=>{mc(e,s.queryKey)&&Object.assign(a,s.defaultOptions)}),a}setMutationDefaults(e,t){W(this,Ri).set(hc(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...W(this,Ri).values()],a={};return t.forEach(s=>{mc(e,s.mutationKey)&&Object.assign(a,s.defaultOptions)}),a}defaultQueryOptions(e){if(e._defaulted)return e;const t={...W(this,mn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=qv(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Uv&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...W(this,mn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){W(this,oa).clear(),W(this,hn).clear()}},oa=new WeakMap,hn=new WeakMap,mn=new WeakMap,Ti=new WeakMap,Ri=new WeakMap,pn=new WeakMap,Di=new WeakMap,Oi=new WeakMap,py),qO=u.createContext(void 0),UO=({client:e,children:t})=>(u.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(qO.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pc(){return pc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},pc.apply(this,arguments)}var bn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(bn||(bn={}));const b0="popstate";function BO(e){e===void 0&&(e={});function t(n,o){let{pathname:i="/",search:l="",hash:c=""}=ko(n.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),Xm("",{pathname:i,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function a(n,o){let i=n.document.querySelector("base"),l="";if(i&&i.getAttribute("href")){let c=n.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof o=="string"?o:Du(o))}function s(n,o){Bv(n.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return HO(t,a,s,e)}function pa(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Bv(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $O(){return Math.random().toString(36).substr(2,8)}function _0(e,t){return{usr:e.state,key:e.key,idx:t}}function Xm(e,t,a,s){return a===void 0&&(a=null),pc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ko(t):t,{state:a,key:t&&t.key||s||$O()})}function Du(e){let{pathname:t="/",search:a="",hash:s=""}=e;return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function ko(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substr(a),e=e.substr(0,a));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function HO(e,t,a,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:o=!1}=s,i=n.history,l=bn.Pop,c=null,d=f();d==null&&(d=0,i.replaceState(pc({},i.state,{idx:d}),""));function f(){return(i.state||{idx:null}).idx}function h(){l=bn.Pop;let g=f(),b=g==null?null:g-d;d=g,c&&c({action:l,location:x.location,delta:b})}function p(g,b){l=bn.Push;let v=Xm(x.location,g,b);a&&a(v,g),d=f()+1;let y=_0(v,d),_=x.createHref(v);try{i.pushState(y,"",_)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;n.location.assign(_)}o&&c&&c({action:l,location:x.location,delta:1})}function m(g,b){l=bn.Replace;let v=Xm(x.location,g,b);a&&a(v,g),d=f();let y=_0(v,d),_=x.createHref(v);i.replaceState(y,"",_),o&&c&&c({action:l,location:x.location,delta:0})}function j(g){let b=n.location.origin!=="null"?n.location.origin:n.location.href,v=typeof g=="string"?g:Du(g);return v=v.replace(/ $/,"%20"),pa(b,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,b)}let x={get action(){return l},get location(){return e(n,i)},listen(g){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(b0,h),c=g,()=>{n.removeEventListener(b0,h),c=null}},createHref(g){return t(n,g)},createURL:j,encodeLocation(g){let b=j(g);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:m,go(g){return i.go(g)}};return x}var j0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(j0||(j0={}));function VO(e,t,a){return a===void 0&&(a="/"),GO(e,t,a)}function GO(e,t,a,s){let n=typeof t=="string"?ko(t):t,o=$v(n.pathname||"/",a);if(o==null)return null;let i=Vw(e);YO(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=nz(o);l=az(i[c],d)}return l}function Vw(e,t,a,s){t===void 0&&(t=[]),a===void 0&&(a=[]),s===void 0&&(s="");let n=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(pa(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=Tn([s,c.relativePath]),f=a.concat(c);o.children&&o.children.length>0&&(pa(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Vw(o.children,t,f,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:ez(d,o.index),routesMeta:f})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))n(o,i);else for(let c of Gw(o.path))n(o,i,c)}),t}function Gw(e){let t=e.split("/");if(t.length===0)return[];let[a,...s]=t,n=a.endsWith("?"),o=a.replace(/\?$/,"");if(s.length===0)return n?[o,""]:[o];let i=Gw(s.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),n&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function YO(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:tz(t.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}const QO=/^:[\w-]+$/,KO=3,XO=2,ZO=1,JO=10,WO=-2,w0=e=>e==="*";function ez(e,t){let a=e.split("/"),s=a.length;return a.some(w0)&&(s+=WO),t&&(s+=XO),a.filter(n=>!w0(n)).reduce((n,o)=>n+(QO.test(o)?KO:o===""?ZO:JO),s)}function tz(e,t){return e.length===t.length&&e.slice(0,-1).every((s,n)=>s===t[n])?e[e.length-1]-t[t.length-1]:0}function az(e,t,a){let{routesMeta:s}=e,n={},o="/",i=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,f=o==="/"?t:t.slice(o.length)||"/",h=sz({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),p=c.route;if(!h)return null;Object.assign(n,h.params),i.push({params:n,pathname:Tn([o,h.pathname]),pathnameBase:cz(Tn([o,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(o=Tn([o,h.pathnameBase]))}return i}function sz(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,s]=rz(e.path,e.caseSensitive,e.end),n=t.match(a);if(!n)return null;let o=n[0],i=o.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((d,f,h)=>{let{paramName:p,isOptional:m}=f;if(p==="*"){let x=l[h]||"";i=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const j=l[h];return m&&!j?d[p]=void 0:d[p]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:e}}function rz(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!0),Bv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}function nz(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Bv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function $v(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,s=e.charAt(a);return s&&s!=="/"?null:e.slice(a)||"/"}function oz(e,t){t===void 0&&(t="/");let{pathname:a,search:s="",hash:n=""}=typeof e=="string"?ko(e):e;return{pathname:a?a.startsWith("/")?a:iz(a,t):t,search:dz(s),hash:uz(n)}}function iz(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?a.length>1&&a.pop():n!=="."&&a.push(n)}),a.length>1?a.join("/"):"/"}function Nh(e,t,a,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lz(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function Yw(e,t){let a=lz(e);return t?a.map((s,n)=>n===a.length-1?s.pathname:s.pathnameBase):a.map(s=>s.pathnameBase)}function Qw(e,t,a,s){s===void 0&&(s=!1);let n;typeof e=="string"?n=ko(e):(n=pc({},e),pa(!n.pathname||!n.pathname.includes("?"),Nh("?","pathname","search",n)),pa(!n.pathname||!n.pathname.includes("#"),Nh("#","pathname","hash",n)),pa(!n.search||!n.search.includes("#"),Nh("#","search","hash",n)));let o=e===""||n.pathname==="",i=o?"/":n.pathname,l;if(i==null)l=a;else{let h=t.length-1;if(!s&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),h-=1;n.pathname=p.join("/")}l=h>=0?t[h]:"/"}let c=oz(n,l),d=i&&i!=="/"&&i.endsWith("/"),f=(o||i===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const Tn=e=>e.join("/").replace(/\/\/+/g,"/"),cz=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),dz=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,uz=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function fz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Kw=["post","put","patch","delete"];new Set(Kw);const hz=["get",...Kw];new Set(hz);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vc(){return vc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},vc.apply(this,arguments)}const Hv=u.createContext(null),mz=u.createContext(null),Po=u.createContext(null),mf=u.createContext(null),Br=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Xw=u.createContext(null);function pz(e,t){let{relative:a}=t===void 0?{}:t;qc()||pa(!1);let{basename:s,navigator:n}=u.useContext(Po),{hash:o,pathname:i,search:l}=Jw(e,{relative:a}),c=i;return s!=="/"&&(c=i==="/"?s:Tn([s,i])),n.createHref({pathname:c,search:l,hash:o})}function qc(){return u.useContext(mf)!=null}function Uc(){return qc()||pa(!1),u.useContext(mf).location}function Zw(e){u.useContext(Po).static||u.useLayoutEffect(e)}function za(){let{isDataRoute:e}=u.useContext(Br);return e?Rz():vz()}function vz(){qc()||pa(!1);let e=u.useContext(Hv),{basename:t,future:a,navigator:s}=u.useContext(Po),{matches:n}=u.useContext(Br),{pathname:o}=Uc(),i=JSON.stringify(Yw(n,a.v7_relativeSplatPath)),l=u.useRef(!1);return Zw(()=>{l.current=!0}),u.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let h=Qw(d,JSON.parse(i),o,f.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Tn([t,h.pathname])),(f.replace?s.replace:s.push)(h,f.state,f)},[t,s,i,o,e])}const gz=u.createContext(null);function xz(e){let t=u.useContext(Br).outlet;return t&&u.createElement(gz.Provider,{value:e},t)}function $r(){let{matches:e}=u.useContext(Br),t=e[e.length-1];return t?t.params:{}}function Jw(e,t){let{relative:a}=t===void 0?{}:t,{future:s}=u.useContext(Po),{matches:n}=u.useContext(Br),{pathname:o}=Uc(),i=JSON.stringify(Yw(n,s.v7_relativeSplatPath));return u.useMemo(()=>Qw(e,JSON.parse(i),o,a==="path"),[e,i,o,a])}function yz(e,t){return bz(e,t)}function bz(e,t,a,s){qc()||pa(!1);let{navigator:n}=u.useContext(Po),{matches:o}=u.useContext(Br),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Uc(),f;if(t){var h;let g=typeof t=="string"?ko(t):t;c==="/"||(h=g.pathname)!=null&&h.startsWith(c)||pa(!1),f=g}else f=d;let p=f.pathname||"/",m=p;if(c!=="/"){let g=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(g.length).join("/")}let j=VO(e,{pathname:m}),x=Ez(j&&j.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:Tn([c,n.encodeLocation?n.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Tn([c,n.encodeLocation?n.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,a,s);return t&&x?u.createElement(mf.Provider,{value:{location:vc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:bn.Pop}},x):x}function _z(){let e=Tz(),t=fz(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),a?u.createElement("pre",{style:n},a):null,null)}const jz=u.createElement(_z,null);class wz extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?u.createElement(Br.Provider,{value:this.props.routeContext},u.createElement(Xw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Sz(e){let{routeContext:t,match:a,children:s}=e,n=u.useContext(Hv);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),u.createElement(Br.Provider,{value:t},s)}function Ez(e,t,a,s){var n;if(t===void 0&&(t=[]),a===void 0&&(a=null),s===void 0&&(s=null),e==null){var o;if(!a)return null;if(a.errors)e=a.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let i=e,l=(n=a)==null?void 0:n.errors;if(l!=null){let f=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);f>=0||pa(!1),i=i.slice(0,Math.min(i.length,f+1))}let c=!1,d=-1;if(a&&s&&s.v7_partialHydration)for(let f=0;f<i.length;f++){let h=i[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=f),h.route.id){let{loaderData:p,errors:m}=a,j=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||j){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((f,h,p)=>{let m,j=!1,x=null,g=null;a&&(m=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||jz,c&&(d<0&&p===0?(Dz("route-fallback"),j=!0,g=null):d===p&&(j=!0,g=h.route.hydrateFallbackElement||null)));let b=t.concat(i.slice(0,p+1)),v=()=>{let y;return m?y=x:j?y=g:h.route.Component?y=u.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=f,u.createElement(Sz,{match:h,routeContext:{outlet:f,matches:b,isDataRoute:a!=null},children:y})};return a&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?u.createElement(wz,{location:a.location,revalidation:a.revalidation,component:x,error:m,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):v()},null)}var Ww=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ww||{}),eS=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(eS||{});function Nz(e){let t=u.useContext(Hv);return t||pa(!1),t}function Cz(e){let t=u.useContext(mz);return t||pa(!1),t}function Az(e){let t=u.useContext(Br);return t||pa(!1),t}function tS(e){let t=Az(),a=t.matches[t.matches.length-1];return a.route.id||pa(!1),a.route.id}function Tz(){var e;let t=u.useContext(Xw),a=Cz(),s=tS();return t!==void 0?t:(e=a.errors)==null?void 0:e[s]}function Rz(){let{router:e}=Nz(Ww.UseNavigateStable),t=tS(eS.UseNavigateStable),a=u.useRef(!1);return Zw(()=>{a.current=!0}),u.useCallback(function(n,o){o===void 0&&(o={}),a.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,vc({fromRouteId:t},o)))},[e,t])}const S0={};function Dz(e,t,a){S0[e]||(S0[e]=!0)}function Oz(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function zz(e){return xz(e.context)}function Et(e){pa(!1)}function Mz(e){let{basename:t="/",children:a=null,location:s,navigationType:n=bn.Pop,navigator:o,static:i=!1,future:l}=e;qc()&&pa(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:o,static:i,future:vc({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof s=="string"&&(s=ko(s));let{pathname:f="/",search:h="",hash:p="",state:m=null,key:j="default"}=s,x=u.useMemo(()=>{let g=$v(f,c);return g==null?null:{location:{pathname:g,search:h,hash:p,state:m,key:j},navigationType:n}},[c,f,h,p,m,j,n]);return x==null?null:u.createElement(Po.Provider,{value:d},u.createElement(mf.Provider,{children:a,value:x}))}function kz(e){let{children:t,location:a}=e;return yz(Zm(t),a)}new Promise(()=>{});function Zm(e,t){t===void 0&&(t=[]);let a=[];return u.Children.forEach(e,(s,n)=>{if(!u.isValidElement(s))return;let o=[...t,n];if(s.type===u.Fragment){a.push.apply(a,Zm(s.props.children,o));return}s.type!==Et&&pa(!1),!s.props.index||!s.props.children||pa(!1);let i={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=Zm(s.props.children,o)),a.push(i)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jm(){return Jm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Jm.apply(this,arguments)}function Pz(e,t){if(e==null)return{};var a={},s=Object.keys(e),n,o;for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&(a[n]=e[n]);return a}function Lz(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Iz(e,t){return e.button===0&&(!t||t==="_self")&&!Lz(e)}const Fz=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qz="6";try{window.__reactRouterVersion=qz}catch{}const Uz="startTransition",E0=_p[Uz];function Bz(e){let{basename:t,children:a,future:s,window:n}=e,o=u.useRef();o.current==null&&(o.current=BO({window:n,v5Compat:!0}));let i=o.current,[l,c]=u.useState({action:i.action,location:i.location}),{v7_startTransition:d}=s||{},f=u.useCallback(h=>{d&&E0?E0(()=>c(h)):c(h)},[c,d]);return u.useLayoutEffect(()=>i.listen(f),[i,f]),u.useEffect(()=>Oz(s),[s]),u.createElement(Mz,{basename:t,children:a,location:l.location,navigationType:l.action,navigator:i,future:s})}const $z=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Hz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gi=u.forwardRef(function(t,a){let{onClick:s,relative:n,reloadDocument:o,replace:i,state:l,target:c,to:d,preventScrollReset:f,viewTransition:h}=t,p=Pz(t,Fz),{basename:m}=u.useContext(Po),j,x=!1;if(typeof d=="string"&&Hz.test(d)&&(j=d,$z))try{let y=new URL(window.location.href),_=d.startsWith("//")?new URL(y.protocol+d):new URL(d),w=$v(_.pathname,m);_.origin===y.origin&&w!=null?d=w+_.search+_.hash:x=!0}catch{}let g=pz(d,{relative:n}),b=Vz(d,{replace:i,state:l,target:c,preventScrollReset:f,relative:n,viewTransition:h});function v(y){s&&s(y),y.defaultPrevented||b(y)}return u.createElement("a",Jm({},p,{href:j||g,onClick:x||o?s:v,ref:a,target:c}))});var N0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(N0||(N0={}));var C0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(C0||(C0={}));function Vz(e,t){let{target:a,replace:s,state:n,preventScrollReset:o,relative:i,viewTransition:l}=t===void 0?{}:t,c=za(),d=Uc(),f=Jw(e,{relative:i});return u.useCallback(h=>{if(Iz(h,a)){h.preventDefault();let p=s!==void 0?s:Du(d)===Du(f);c(e,{replace:p,state:n,preventScrollReset:o,relative:i,viewTransition:l})}},[d,c,f,s,n,a,e,o,i,l])}const Gz=[{path:"/",label:"Dashboard",icon:HT},{path:"/clientes",label:"Clientes",icon:KT},{path:"/fazendas",label:"Fazendas",icon:Qj},{path:"/doadoras",label:"Doadoras",icon:ho},{path:"/receptoras",label:"Receptoras",icon:Vj},{path:"/protocolos",label:"Protocolos",icon:Nv},{path:"/aspiracoes",label:"Aspiraes",icon:wu},{path:"/doses-semen",label:"Doses de Smen",icon:ho},{path:"/lotes-fiv",label:"Lotes FIV",icon:wu},{path:"/embrioes",label:"Embries/Estoque",icon:ho},{path:"/transferencia",label:"Transferncia (TE)",icon:sf},{path:"/dg",label:"DG",icon:Ev},{path:"/sexagem",label:"Sexagem",icon:bv}];function Yz(){const e=Uc();return r.jsxs("div",{className:"w-64 bg-slate-900 text-white min-h-screen p-4 flex flex-col",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-green-400",children:"FIV/TE Bovina"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Sistema de Controle"})]}),r.jsx("nav",{className:"flex-1 space-y-1",children:Gz.map(t=>{const a=t.icon,s=e.pathname===t.path;return r.jsxs(Gi,{to:t.path,className:ye("flex items-center gap-3 px-3 py-2 rounded-lg transition-colors",s?"bg-green-600 text-white":"text-slate-300 hover:bg-slate-800 hover:text-white"),children:[r.jsx(a,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:t.label})]},t.path)})}),r.jsx("div",{className:"pt-4 border-t border-slate-800",children:r.jsx("p",{className:"text-xs text-slate-500 text-center",children:" 2024 FIV/TE System"})})]})}function Qz(){return r.jsxs("div",{className:"flex min-h-screen bg-slate-50",children:[r.jsx(Yz,{}),r.jsx("main",{className:"flex-1 p-8",children:r.jsx(zz,{})})]})}const je=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:ye("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));je.displayName="Card";const Ce=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:ye("flex flex-col space-y-1.5 p-6",e),...t}));Ce.displayName="CardHeader";const Ae=u.forwardRef(({className:e,...t},a)=>r.jsx("h3",{ref:a,className:ye("text-2xl font-semibold leading-none tracking-tight",e),...t}));Ae.displayName="CardTitle";const Al=u.forwardRef(({className:e,...t},a)=>r.jsx("p",{ref:a,className:ye("text-sm text-muted-foreground",e),...t}));Al.displayName="CardDescription";const we=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:ye("p-6 pt-0",e),...t}));we.displayName="CardContent";const Kz=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:ye("flex items-center p-6 pt-0",e),...t}));Kz.displayName="CardFooter";const Vv=rl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),U=u.forwardRef(({className:e,variant:t,size:a,asChild:s=!1,...n},o)=>{const i=s?V2:"button";return r.jsx(i,{className:ye(Vv({variant:t,size:a,className:e})),ref:o,...n})});U.displayName="Button";const Xz="modulepreload",Zz=function(e){return"/Passagene/"+e},A0={},Bc=function(t,a,s){let n=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(a.map(c=>{if(c=Zz(c),c in A0)return;A0[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Xz,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return n.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},Jz=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...a)=>Bc(async()=>{const{default:s}=await Promise.resolve().then(()=>cl);return{default:s}},void 0).then(({default:s})=>s(...a)):t=fetch,(...a)=>t(...a)};class Gv extends Error{constructor(t,a="FunctionsError",s){super(t),this.name=a,this.context=s}}class Wz extends Gv{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class T0 extends Gv{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class R0 extends Gv{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Wm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Wm||(Wm={}));var e4=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class t4{constructor(t,{headers:a={},customFetch:s,region:n=Wm.Any}={}){this.url=t,this.headers=a,this.region=n,this.fetch=Jz(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,a={}){var s;return e4(this,void 0,void 0,function*(){try{const{headers:n,method:o,body:i}=a;let l={},{region:c}=a;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let f;i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=i):typeof i=="string"?(l["Content-Type"]="text/plain",f=i):typeof FormData<"u"&&i instanceof FormData?f=i:(l["Content-Type"]="application/json",f=JSON.stringify(i)));const h=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:f}).catch(x=>{throw new Wz(x)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new T0(h);if(!h.ok)throw new R0(h);let m=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),j;return m==="application/json"?j=yield h.json():m==="application/octet-stream"?j=yield h.blob():m==="text/event-stream"?j=h:m==="multipart/form-data"?j=yield h.formData():j=yield h.text(),{data:j,error:null,response:h}}catch(n){return{data:null,error:n,response:n instanceof R0||n instanceof T0?n.context:void 0}}})}}var Ja={},Yv={},pf={},$c={},vf={},gf={},a4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Yi=a4();const s4=Yi.fetch,aS=Yi.fetch.bind(Yi),sS=Yi.Headers,r4=Yi.Request,n4=Yi.Response,cl=Object.freeze(Object.defineProperty({__proto__:null,Headers:sS,Request:r4,Response:n4,default:aS,fetch:s4},Symbol.toStringTag,{value:"Module"})),o4=d1(cl);var xf={};Object.defineProperty(xf,"__esModule",{value:!0});let i4=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};xf.default=i4;var rS=Ns&&Ns.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gf,"__esModule",{value:!0});const l4=rS(o4),c4=rS(xf);let d4=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=l4.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,a){return this.headers=Object.assign({},this.headers),this.headers[t]=a,this}then(t,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,l,c;let d=null,f=null,h=null,p=o.status,m=o.statusText;if(o.ok){if(this.method!=="HEAD"){const b=await o.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=b:f=JSON.parse(b))}const x=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),g=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,p=406,m="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const x=await o.text();try{d=JSON.parse(x),Array.isArray(d)&&o.status===404&&(f=[],d=null,p=200,m="OK")}catch{o.status===404&&x===""?(p=204,m="No Content"):d={message:x}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,p=200,m="OK"),d&&this.shouldThrowOnError)throw new c4.default(d)}return{error:d,data:f,count:h,status:p,statusText:m}});return this.shouldThrowOnError||(n=n.catch(o=>{var i,l,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,a)}returns(){return this}overrideTypes(){return this}};gf.default=d4;var u4=Ns&&Ns.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vf,"__esModule",{value:!0});const f4=u4(gf);let h4=class extends f4.default{select(t){let a=!1;const s=(t??"*").split("").map(n=>/\s/.test(n)&&!a?"":(n==='"'&&(a=!a),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:a=!0,nullsFirst:s,foreignTable:n,referencedTable:o=n}={}){const i=o?`${o}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${t}.${a?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:a,referencedTable:s=a}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,a,{foreignTable:s,referencedTable:n=s}={}){const o=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${a-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:a=!1,settings:s=!1,buffers:n=!1,wal:o=!1,format:i="text"}={}){var l;const c=[t?"analyze":null,a?"verbose":null,s?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${d}"; options=${c};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};vf.default=h4;var m4=Ns&&Ns.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($c,"__esModule",{value:!0});const p4=m4(vf);let v4=class extends p4.default{eq(t,a){return this.url.searchParams.append(t,`eq.${a}`),this}neq(t,a){return this.url.searchParams.append(t,`neq.${a}`),this}gt(t,a){return this.url.searchParams.append(t,`gt.${a}`),this}gte(t,a){return this.url.searchParams.append(t,`gte.${a}`),this}lt(t,a){return this.url.searchParams.append(t,`lt.${a}`),this}lte(t,a){return this.url.searchParams.append(t,`lte.${a}`),this}like(t,a){return this.url.searchParams.append(t,`like.${a}`),this}likeAllOf(t,a){return this.url.searchParams.append(t,`like(all).{${a.join(",")}}`),this}likeAnyOf(t,a){return this.url.searchParams.append(t,`like(any).{${a.join(",")}}`),this}ilike(t,a){return this.url.searchParams.append(t,`ilike.${a}`),this}ilikeAllOf(t,a){return this.url.searchParams.append(t,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(t,a){return this.url.searchParams.append(t,`ilike(any).{${a.join(",")}}`),this}is(t,a){return this.url.searchParams.append(t,`is.${a}`),this}in(t,a){const s=Array.from(new Set(a)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cs.{${a.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(a)}`),this}containedBy(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cd.{${a.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(a)}`),this}rangeGt(t,a){return this.url.searchParams.append(t,`sr.${a}`),this}rangeGte(t,a){return this.url.searchParams.append(t,`nxl.${a}`),this}rangeLt(t,a){return this.url.searchParams.append(t,`sl.${a}`),this}rangeLte(t,a){return this.url.searchParams.append(t,`nxr.${a}`),this}rangeAdjacent(t,a){return this.url.searchParams.append(t,`adj.${a}`),this}overlaps(t,a){return typeof a=="string"?this.url.searchParams.append(t,`ov.${a}`):this.url.searchParams.append(t,`ov.{${a.join(",")}}`),this}textSearch(t,a,{config:s,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const i=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${o}fts${i}.${a}`),this}match(t){return Object.entries(t).forEach(([a,s])=>{this.url.searchParams.append(a,`eq.${s}`)}),this}not(t,a,s){return this.url.searchParams.append(t,`not.${a}.${s}`),this}or(t,{foreignTable:a,referencedTable:s=a}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,a,s){return this.url.searchParams.append(t,`${a}.${s}`),this}};$c.default=v4;var g4=Ns&&Ns.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pf,"__esModule",{value:!0});const wl=g4($c);let x4=class{constructor(t,{headers:a={},schema:s,fetch:n}){this.url=t,this.headers=a,this.schema=s,this.fetch=n}select(t,{head:a=!1,count:s}={}){const n=a?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),s&&(this.headers.Prefer=`count=${s}`),new wl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:a,defaultToNull:s=!0}={}){const n="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),a&&o.push(`count=${a}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const i=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new wl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:a,ignoreDuplicates:s=!1,count:n,defaultToNull:o=!0}={}){const i="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new wl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:a}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),a&&n.push(`count=${a}`),this.headers.Prefer=n.join(","),new wl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const a="DELETE",s=[];return t&&s.push(`count=${t}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new wl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};pf.default=x4;var yf={},bf={};Object.defineProperty(bf,"__esModule",{value:!0});bf.version=void 0;bf.version="0.0.0-automated";Object.defineProperty(yf,"__esModule",{value:!0});yf.DEFAULT_HEADERS=void 0;const y4=bf;yf.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${y4.version}`};var nS=Ns&&Ns.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yv,"__esModule",{value:!0});const b4=nS(pf),_4=nS($c),j4=yf;let w4=class oS{constructor(t,{headers:a={},schema:s,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},j4.DEFAULT_HEADERS),a),this.schemaName=s,this.fetch=n}from(t){const a=new URL(`${this.url}/${t}`);return new b4.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new oS(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,a={},{head:s=!1,get:n=!1,count:o}={}){let i;const l=new URL(`${this.url}/rpc/${t}`);let c;s||n?(i=s?"HEAD":"GET",Object.entries(a).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{l.searchParams.append(f,h)})):(i="POST",c=a);const d=Object.assign({},this.headers);return o&&(d.Prefer=`count=${o}`),new _4.default({method:i,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Yv.default=w4;var dl=Ns&&Ns.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.PostgrestError=Ja.PostgrestBuilder=Ja.PostgrestTransformBuilder=Ja.PostgrestFilterBuilder=Ja.PostgrestQueryBuilder=Ja.PostgrestClient=void 0;const iS=dl(Yv);Ja.PostgrestClient=iS.default;const lS=dl(pf);Ja.PostgrestQueryBuilder=lS.default;const cS=dl($c);Ja.PostgrestFilterBuilder=cS.default;const dS=dl(vf);Ja.PostgrestTransformBuilder=dS.default;const uS=dl(gf);Ja.PostgrestBuilder=uS.default;const fS=dl(xf);Ja.PostgrestError=fS.default;var S4=Ja.default={PostgrestClient:iS.default,PostgrestQueryBuilder:lS.default,PostgrestFilterBuilder:cS.default,PostgrestTransformBuilder:dS.default,PostgrestBuilder:uS.default,PostgrestError:fS.default};const{PostgrestClient:E4,PostgrestQueryBuilder:O5,PostgrestFilterBuilder:z5,PostgrestTransformBuilder:M5,PostgrestBuilder:k5,PostgrestError:P5}=S4;function N4(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const C4=N4(),A4="2.11.15",T4=`realtime-js/${A4}`,R4="1.0.0",hS=1e4,D4=1e3;var Yl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Yl||(Yl={}));var ka;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ka||(ka={}));var Us;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Us||(Us={}));var ep;(function(e){e.websocket="websocket"})(ep||(ep={}));var Jn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Jn||(Jn={}));class O4{constructor(){this.HEADER_LENGTH=1}decode(t,a){return t.constructor===ArrayBuffer?a(this._binaryDecode(t)):a(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const a=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,a,s)}_decodeBroadcast(t,a,s){const n=a.getUint8(1),o=a.getUint8(2);let i=this.HEADER_LENGTH+2;const l=s.decode(t.slice(i,i+n));i=i+n;const c=s.decode(t.slice(i,i+o));i=i+o;const d=JSON.parse(s.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class mS{constructor(t,a){this.callback=t,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ht;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ht||(Ht={}));const D0=(e,t,a={})=>{var s;const n=(s=a.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((o,i)=>(o[i]=z4(i,e,t,n),o),{})},z4=(e,t,a,s)=>{const n=t.find(l=>l.name===e),o=n==null?void 0:n.type,i=a[e];return o&&!s.includes(o)?pS(o,i):tp(i)},pS=(e,t)=>{if(e.charAt(0)==="_"){const a=e.slice(1,e.length);return L4(t,a)}switch(e){case Ht.bool:return M4(t);case Ht.float4:case Ht.float8:case Ht.int2:case Ht.int4:case Ht.int8:case Ht.numeric:case Ht.oid:return k4(t);case Ht.json:case Ht.jsonb:return P4(t);case Ht.timestamp:return I4(t);case Ht.abstime:case Ht.date:case Ht.daterange:case Ht.int4range:case Ht.int8range:case Ht.money:case Ht.reltime:case Ht.text:case Ht.time:case Ht.timestamptz:case Ht.timetz:case Ht.tsrange:case Ht.tstzrange:return tp(t);default:return tp(t)}},tp=e=>e,M4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},k4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},P4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},L4=(e,t)=>{if(typeof e!="string")return e;const a=e.length-1,s=e[a];if(e[0]==="{"&&s==="}"){let o;const i=e.slice(1,a);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>pS(t,l))}return e},I4=e=>typeof e=="string"?e.replace(" ","T"):e,vS=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Ch{constructor(t,a,s={},n=hS){this.channel=t,this.event=a,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,a){var s;return this._hasReceived(t)&&a((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:a}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(a))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var O0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(O0||(O0={}));class Ql{constructor(t,a){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ql.syncState(this.state,n,o,i),this.pendingDiffs.forEach(c=>{this.state=Ql.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Ql.syncDiff(this.state,n,o,i),l())}),this.onJoin((n,o,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:o,newPresences:i})}),this.onLeave((n,o,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,a,s,n){const o=this.cloneDeep(t),i=this.transformState(a),l={},c={};return this.map(o,(d,f)=>{i[d]||(c[d]=f)}),this.map(i,(d,f)=>{const h=o[d];if(h){const p=f.map(g=>g.presence_ref),m=h.map(g=>g.presence_ref),j=f.filter(g=>m.indexOf(g.presence_ref)<0),x=h.filter(g=>p.indexOf(g.presence_ref)<0);j.length>0&&(l[d]=j),x.length>0&&(c[d]=x)}else l[d]=f}),this.syncDiff(o,{joins:l,leaves:c},s,n)}static syncDiff(t,a,s,n){const{joins:o,leaves:i}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(o,(l,c)=>{var d;const f=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),f.length>0){const h=t[l].map(m=>m.presence_ref),p=f.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...p)}s(l,f,c)}),this.map(i,(l,c)=>{let d=t[l];if(!d)return;const f=c.map(h=>h.presence_ref);d=d.filter(h=>f.indexOf(h.presence_ref)<0),t[l]=d,n(l,d,c),d.length===0&&delete t[l]}),t}static map(t,a){return Object.getOwnPropertyNames(t).map(s=>a(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((a,s)=>{const n=t[s];return"metas"in n?a[s]=n.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):a[s]=n,a},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var z0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(z0||(z0={}));var M0;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(M0||(M0={}));var _r;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(_r||(_r={}));class Qv{constructor(t,a={config:{}},s){this.topic=t,this.params=a,this.socket=s,this.bindings={},this.state=ka.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new Ch(this,Us.join,this.params,this.timeout),this.rejoinTimer=new mS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ka.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ka.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ka.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ka.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Us.reply,{},(n,o)=>{this._trigger(this._replyEventName(o),n)}),this.presence=new Ql(this),this.broadcastEndpointURL=vS(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,a=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==ka.closed){const{config:{broadcast:o,presence:i,private:l}}=this.params;this._onError(f=>t==null?void 0:t(_r.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(_r.CLOSED));const c={},d={broadcast:o,presence:i,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(f=>f.filter))!==null&&n!==void 0?n:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:f})=>{var h;if(this.socket.setAuth(),f===void 0){t==null||t(_r.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,m=(h=p==null?void 0:p.length)!==null&&h!==void 0?h:0,j=[];for(let x=0;x<m;x++){const g=p[x],{filter:{event:b,schema:v,table:y,filter:_}}=g,w=f&&f[x];if(w&&w.event===b&&w.schema===v&&w.table===y&&w.filter===_)j.push(Object.assign(Object.assign({},g),{id:w.id}));else{this.unsubscribe(),this.state=ka.errored,t==null||t(_r.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(_r.SUBSCRIBED);return}}).receive("error",f=>{this.state=ka.errored,t==null||t(_r.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(_r.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,a={}){return await this.send({type:"presence",event:"track",payload:t},a.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,a,s){return this._on(t,a,s)}async send(t,a={}){var s,n;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=a.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const d=this._push(t.type,t,a.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ka.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Us.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new Ch(this,Us.leave,{},t),s.receive("ok",()=>{a(),n("ok")}).receive("timeout",()=>{a(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,a,s){const n=new AbortController,o=setTimeout(()=>n.abort(),s),i=await this.socket.fetch(t,Object.assign(Object.assign({},a),{signal:n.signal}));return clearTimeout(o),i}_push(t,a,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Ch(this,t,a,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,a,s){return a}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,a,s){var n,o;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:f}=Us;if(s&&[l,c,d,f].indexOf(i)>=0&&s!==this._joinRef())return;let p=this._onMessage(i,a,s);if(a&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(m=>{var j,x,g;return((j=m.filter)===null||j===void 0?void 0:j.event)==="*"||((g=(x=m.filter)===null||x===void 0?void 0:x.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===i}).map(m=>m.callback(p,s)):(o=this.bindings[i])===null||o===void 0||o.filter(m=>{var j,x,g,b,v,y;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const _=m.id,w=(j=m.filter)===null||j===void 0?void 0:j.event;return _&&((x=a.ids)===null||x===void 0?void 0:x.includes(_))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((g=a.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const _=(v=(b=m==null?void 0:m.filter)===null||b===void 0?void 0:b.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return _==="*"||_===((y=a==null?void 0:a.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof p=="object"&&"ids"in p){const j=p.data,{schema:x,table:g,commit_timestamp:b,type:v,errors:y}=j;p=Object.assign(Object.assign({},{schema:x,table:g,commit_timestamp:b,eventType:v,new:{},old:{},errors:y}),this._getPayloadRecords(j))}m.callback(p,s)})}_isClosed(){return this.state===ka.closed}_isJoined(){return this.state===ka.joined}_isJoining(){return this.state===ka.joining}_isLeaving(){return this.state===ka.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,a,s){const n=t.toLocaleLowerCase(),o={type:n,filter:a,callback:s};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(t,a){const s=t.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var o;return!(((o=n.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&Qv.isEqual(n.filter,a))}),this}static isEqual(t,a){if(Object.keys(t).length!==Object.keys(a).length)return!1;for(const s in t)if(t[s]!==a[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Us.close,{},t)}_onError(t){this._on(Us.error,{},a=>t(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ka.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const a={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(a.new=D0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(a.old=D0(t.columns,t.old_record)),a}}const k0=()=>{},F4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class q4{constructor(t,a){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hS,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=k0,this.ref=0,this.logger=k0,this.conn=null,this.sendBuffer=[],this.serializer=new O4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...l)=>Bc(async()=>{const{default:c}=await Promise.resolve().then(()=>cl);return{default:c}},void 0).then(({default:c})=>c(...l)):i=fetch,(...l)=>i(...l)},this.endPoint=`${t}/${ep.websocket}`,this.httpEndpoint=vS(t),a!=null&&a.transport?this.transport=a.transport:this.transport=null,a!=null&&a.params&&(this.params=a.params),a!=null&&a.timeout&&(this.timeout=a.timeout),a!=null&&a.logger&&(this.logger=a.logger),(a!=null&&a.logLevel||a!=null&&a.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),a!=null&&a.heartbeatIntervalMs&&(this.heartbeatIntervalMs=a.heartbeatIntervalMs);const n=(s=a==null?void 0:a.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=a!=null&&a.reconnectAfterMs?a.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=a!=null&&a.encode?a.encode:(o,i)=>i(JSON.stringify(o)),this.decode=a!=null&&a.decode?a.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new mS(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(a==null?void 0:a.fetch),a!=null&&a.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(a==null?void 0:a.worker)||!1,this.workerUrl=a==null?void 0:a.workerUrl}this.accessToken=(a==null?void 0:a.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=C4),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:R4}))}disconnect(t,a){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,a??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(t){const a=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const t=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,a,s){this.logger(t,a,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Yl.connecting:return Jn.Connecting;case Yl.open:return Jn.Open;case Yl.closing:return Jn.Closing;default:return Jn.Closed}}isConnected(){return this.connectionState()===Jn.Open}channel(t,a={config:{}}){const s=`realtime:${t}`,n=this.getChannels().find(o=>o.topic===s);if(n)return n;{const o=new Qv(`realtime:${t}`,a,this);return this.channels.push(o),o}}push(t){const{topic:a,event:s,payload:n,ref:o}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${a} ${s} (${o})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let a=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(s=>{const n={access_token:a,version:T4};a&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(Us.access_token,{access_token:a})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(D4,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let a=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${t}"`),a.unsubscribe())}_remove(t){this.channels=this.channels.filter(a=>a.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,a=>{let{topic:s,event:n,payload:o,ref:i}=a;s==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(a.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${s} ${n} ${i&&"("+i+")"||""}`,o),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,o,i)),this.stateChangeCallbacks.message.forEach(l=>l(a))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(a=>a(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(a=>a(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Us.error))}_appendParams(t,a){if(Object.keys(a).length===0)return t;const s=t.match(/\?/)?"&":"?",n=new URLSearchParams(a);return`${t}${s}${n}`}_workerObjectUrl(t){let a;if(t)a=t;else{const s=new Blob([F4],{type:"application/javascript"});a=URL.createObjectURL(s)}return a}}class Kv extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function wa(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class U4 extends Kv{constructor(t,a){super(t),this.name="StorageApiError",this.status=a}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ap extends Kv{constructor(t,a){super(t),this.name="StorageUnknownError",this.originalError=a}}var B4=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const gS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...a)=>Bc(async()=>{const{default:s}=await Promise.resolve().then(()=>cl);return{default:s}},void 0).then(({default:s})=>s(...a)):t=fetch,(...a)=>t(...a)},$4=()=>B4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Bc(()=>Promise.resolve().then(()=>cl),void 0)).Response:Response}),sp=e=>{if(Array.isArray(e))return e.map(a=>sp(a));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([a,s])=>{const n=a.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[n]=sp(s)}),t};var Lo=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const Ah=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),H4=(e,t,a)=>Lo(void 0,void 0,void 0,function*(){const s=yield $4();e instanceof s&&!(a!=null&&a.noResolveJson)?e.json().then(n=>{t(new U4(Ah(n),e.status||500))}).catch(n=>{t(new ap(Ah(n),n))}):t(new ap(Ah(e),e))}),V4=(e,t,a,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),a))};function Hc(e,t,a,s,n,o){return Lo(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(a,V4(t,s,n,o)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>H4(c,l,s))})})}function Ou(e,t,a,s){return Lo(this,void 0,void 0,function*(){return Hc(e,"GET",t,a,s)})}function rn(e,t,a,s,n){return Lo(this,void 0,void 0,function*(){return Hc(e,"POST",t,s,n,a)})}function G4(e,t,a,s,n){return Lo(this,void 0,void 0,function*(){return Hc(e,"PUT",t,s,n,a)})}function Y4(e,t,a,s){return Lo(this,void 0,void 0,function*(){return Hc(e,"HEAD",t,Object.assign(Object.assign({},a),{noResolveJson:!0}),s)})}function xS(e,t,a,s,n){return Lo(this,void 0,void 0,function*(){return Hc(e,"DELETE",t,s,n,a)})}var Ya=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const Q4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},P0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class K4{constructor(t,a={},s,n){this.url=t,this.headers=a,this.bucketId=s,this.fetch=gS(n)}uploadOrUpdate(t,a,s,n){return Ya(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},P0),n);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=s,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(a),f=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:t,body:o,headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{})),p=yield h.json();return h.ok?{data:{path:d,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(o){if(wa(o))return{data:null,error:o};throw o}})}upload(t,a,s){return Ya(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,a,s)})}uploadToSignedUrl(t,a,s,n){return Ya(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",a);try{let c;const d=Object.assign({upsert:P0.upsert},n),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:f}),p=yield h.json();return h.ok?{data:{path:o,fullPath:p.Key},error:null}:{data:null,error:p}}catch(c){if(wa(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,a){return Ya(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const n=Object.assign({},this.headers);a!=null&&a.upsert&&(n["x-upsert"]="true");const o=yield rn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new Kv("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(s){if(wa(s))return{data:null,error:s};throw s}})}update(t,a,s){return Ya(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,a,s)})}move(t,a,s){return Ya(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(wa(n))return{data:null,error:n};throw n}})}copy(t,a,s){return Ya(this,void 0,void 0,function*(){try{return{data:{path:(yield rn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(wa(n))return{data:null,error:n};throw n}})}createSignedUrl(t,a,s){return Ya(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),o=yield rn(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:a},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(n){if(wa(n))return{data:null,error:n};throw n}})}createSignedUrls(t,a,s){return Ya(this,void 0,void 0,function*(){try{const n=yield rn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:t},{headers:this.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(n){if(wa(n))return{data:null,error:n};throw n}})}download(t,a){return Ya(this,void 0,void 0,function*(){const n=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),i=o?`?${o}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Ou(this.fetch,`${this.url}/${n}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(wa(l))return{data:null,error:l};throw l}})}info(t){return Ya(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{const s=yield Ou(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:sp(s),error:null}}catch(s){if(wa(s))return{data:null,error:s};throw s}})}exists(t){return Ya(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{return yield Y4(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(wa(s)&&s instanceof ap){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,a){const s=this._getFinalPath(t),n=[],o=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";o!==""&&n.push(o);const l=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(t){return Ya(this,void 0,void 0,function*(){try{return{data:yield xS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(a){if(wa(a))return{data:null,error:a};throw a}})}list(t,a,s){return Ya(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Q4),a),{prefix:t||""});return{data:yield rn(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(wa(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const a=[];return t.width&&a.push(`width=${t.width}`),t.height&&a.push(`height=${t.height}`),t.resize&&a.push(`resize=${t.resize}`),t.format&&a.push(`format=${t.format}`),t.quality&&a.push(`quality=${t.quality}`),a.join("&")}}const X4="2.7.1",Z4={"X-Client-Info":`storage-js/${X4}`};var Uo=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class J4{constructor(t,a={},s){this.url=t,this.headers=Object.assign(Object.assign({},Z4),a),this.fetch=gS(s)}listBuckets(){return Uo(this,void 0,void 0,function*(){try{return{data:yield Ou(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(wa(t))return{data:null,error:t};throw t}})}getBucket(t){return Uo(this,void 0,void 0,function*(){try{return{data:yield Ou(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(a){if(wa(a))return{data:null,error:a};throw a}})}createBucket(t,a={public:!1}){return Uo(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(wa(s))return{data:null,error:s};throw s}})}updateBucket(t,a){return Uo(this,void 0,void 0,function*(){try{return{data:yield G4(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(wa(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Uo(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(wa(a))return{data:null,error:a};throw a}})}deleteBucket(t){return Uo(this,void 0,void 0,function*(){try{return{data:yield xS(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(a){if(wa(a))return{data:null,error:a};throw a}})}}class W4 extends J4{constructor(t,a={},s){super(t,a,s)}from(t){return new K4(this.url,this.headers,t,this.fetch)}}const eM="2.52.0";let Tl="";typeof Deno<"u"?Tl="deno":typeof document<"u"?Tl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Tl="react-native":Tl="node";const tM={"X-Client-Info":`supabase-js-${Tl}/${eM}`},aM={headers:tM},sM={schema:"public"},rM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nM={};var oM=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const iM=e=>{let t;return e?t=e:typeof fetch>"u"?t=aS:t=fetch,(...a)=>t(...a)},lM=()=>typeof Headers>"u"?sS:Headers,cM=(e,t,a)=>{const s=iM(a),n=lM();return(o,i)=>oM(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new n(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(o,Object.assign(Object.assign({},i),{headers:d}))})};var dM=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};function uM(e){return e.endsWith("/")?e:e+"/"}function fM(e,t){var a,s;const{db:n,auth:o,realtime:i,global:l}=e,{db:c,auth:d,realtime:f,global:h}=t,p={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},f),i),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(a=h==null?void 0:h.headers)!==null&&a!==void 0?a:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>dM(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const yS="2.71.1",Wo=30*1e3,rp=3,Th=rp*Wo,hM="http://localhost:9999",mM="supabase.auth.token",pM={"X-Client-Info":`gotrue-js/${yS}`},np="X-Supabase-Api-Version",bS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,gM=10*60*1e3;class Xv extends Error{constructor(t,a,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=s}}function Xe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class xM extends Xv{constructor(t,a,s){super(t,a,s),this.name="AuthApiError",this.status=a,this.code=s}}function yM(e){return Xe(e)&&e.name==="AuthApiError"}class _S extends Xv{constructor(t,a){super(t),this.name="AuthUnknownError",this.originalError=a}}class Ln extends Xv{constructor(t,a,s,n){super(t,s,n),this.name=a,this.status=s}}class en extends Ln{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function bM(e){return Xe(e)&&e.name==="AuthSessionMissingError"}class yd extends Ln{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bd extends Ln{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class _d extends Ln{constructor(t,a=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _M(e){return Xe(e)&&e.name==="AuthImplicitGrantRedirectError"}class L0 extends Ln{constructor(t,a=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class op extends Ln{constructor(t,a){super(t,"AuthRetryableFetchError",a,void 0)}}function Rh(e){return Xe(e)&&e.name==="AuthRetryableFetchError"}class I0 extends Ln{constructor(t,a,s){super(t,"AuthWeakPasswordError",a,"weak_password"),this.reasons=s}}class ip extends Ln{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const zu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),F0=` 	
\r=`.split(""),jM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<F0.length;t+=1)e[F0[t].charCodeAt(0)]=-2;for(let t=0;t<zu.length;t+=1)e[zu[t].charCodeAt(0)]=t;return e})();function q0(e,t,a){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;a(zu[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;a(zu[s]),t.queuedBits-=6}}function jS(e,t,a){const s=jM[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)a(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function U0(e){const t=[],a=i=>{t.push(String.fromCodePoint(i))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},o=i=>{EM(i,s,a)};for(let i=0;i<e.length;i+=1)jS(e.charCodeAt(i),n,o);return t.join("")}function wM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function SM(e,t){for(let a=0;a<e.length;a+=1){let s=e.charCodeAt(a);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(e.charCodeAt(a+1)-56320&65535|n)+65536,a+=1}wM(s,t)}}function EM(e,t,a){if(t.utf8seq===0){if(e<=127){a(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&a(t.codepoint)}}function NM(e){const t=[],a={queue:0,queuedBits:0},s=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)jS(e.charCodeAt(n),a,s);return new Uint8Array(t)}function CM(e){const t=[];return SM(e,a=>t.push(a)),new Uint8Array(t)}function AM(e){const t=[],a={queue:0,queuedBits:0},s=n=>{t.push(n)};return e.forEach(n=>q0(n,a,s)),q0(null,a,s),t.join("")}function TM(e){return Math.round(Date.now()/1e3)+e}function RM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ks=()=>typeof window<"u"&&typeof document<"u",Gn={tested:!1,writable:!1},wS=()=>{if(!ks())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Gn.tested)return Gn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Gn.tested=!0,Gn.writable=!0}catch{Gn.tested=!0,Gn.writable=!1}return Gn.writable};function DM(e){const t={},a=new URL(e);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((n,o)=>{t[o]=n})}catch{}return a.searchParams.forEach((s,n)=>{t[n]=s}),t}const SS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...a)=>Bc(async()=>{const{default:s}=await Promise.resolve().then(()=>cl);return{default:s}},void 0).then(({default:s})=>s(...a)):t=fetch,(...a)=>t(...a)},OM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ei=async(e,t,a)=>{await e.setItem(t,JSON.stringify(a))},Yn=async(e,t)=>{const a=await e.getItem(t);if(!a)return null;try{return JSON.parse(a)}catch{return a}},Xr=async(e,t)=>{await e.removeItem(t)};class _f{constructor(){this.promise=new _f.promiseConstructor((t,a)=>{this.resolve=t,this.reject=a})}}_f.promiseConstructor=Promise;function Dh(e){const t=e.split(".");if(t.length!==3)throw new ip("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!vM.test(t[s]))throw new ip("JWT not in base64url format");return{header:JSON.parse(U0(t[0])),payload:JSON.parse(U0(t[1])),signature:NM(t[2]),raw:{header:t[0],payload:t[1]}}}async function zM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function MM(e,t){return new Promise((s,n)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){s(i);return}}catch(i){if(!t(o,i)){n(i);return}}})()})}function kM(e){return("0"+e.toString(16)).substr(-2)}function PM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=a.length;let n="";for(let o=0;o<56;o++)n+=a.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(t),Array.from(t,kM).join("")}async function LM(e){const a=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",a),n=new Uint8Array(s);return Array.from(n).map(o=>String.fromCharCode(o)).join("")}async function IM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const a=await LM(e);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bo(e,t,a=!1){const s=PM();let n=s;a&&(n+="/PASSWORD_RECOVERY"),await ei(e,`${t}-code-verifier`,n);const o=await IM(s);return[o,s===o?"plain":"s256"]}const FM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qM(e){const t=e.headers.get(np);if(!t||!t.match(FM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function UM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function BM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $M=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $o(e){if(!$M.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Oh(){const e={};return new Proxy(e,{get:(t,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const s=a.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function B0(e){return JSON.parse(JSON.stringify(e))}var HM=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]]);return a};const Zn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),VM=[502,503,504];async function $0(e){var t;if(!OM(e))throw new op(Zn(e),0);if(VM.includes(e.status))throw new op(Zn(e),e.status);let a;try{a=await e.json()}catch(o){throw new _S(Zn(o),o)}let s;const n=qM(e);if(n&&n.getTime()>=bS["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?s=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(s=a.error_code),s){if(s==="weak_password")throw new I0(Zn(a),e.status,((t=a.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new en}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new I0(Zn(a),e.status,a.weak_password.reasons);throw new xM(Zn(a),e.status||500,s)}const GM=(e,t,a,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),a))};async function it(e,t,a,s){var n;const o=Object.assign({},s==null?void 0:s.headers);o[np]||(o[np]=bS["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const i=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(i.redirect_to=s.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await YM(e,t,a+l,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function YM(e,t,a,s,n,o){const i=GM(t,s,n,o);let l;try{l=await e(a,Object.assign({},i))}catch(c){throw console.error(c),new op(Zn(c),0)}if(l.ok||await $0(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await $0(c)}}function br(e){var t;let a=null;ZM(e)&&(a=Object.assign({},e),e.expires_at||(a.expires_at=TM(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:a,user:s},error:null}}function H0(e){const t=br(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function dn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function QM(e){return{data:e,error:null}}function KM(e){const{action_link:t,email_otp:a,hashed_token:s,redirect_to:n,verification_type:o}=e,i=HM(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:a,hashed_token:s,redirect_to:n,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function XM(e){return e}function ZM(e){return e.access_token&&e.refresh_token&&e.expires_in}const zh=["global","local","others"];var JM=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]]);return a};class WM{constructor({url:t="",headers:a={},fetch:s}){this.url=t,this.headers=a,this.fetch=SS(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,a=zh[0]){if(zh.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zh.join(", ")}`);try{return await it(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,a={}){try{return await it(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:dn})}catch(s){if(Xe(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:a}=t,s=JM(t,["options"]),n=Object.assign(Object.assign({},s),a);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await it(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:KM,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(Xe(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(t){try{return await it(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:dn})}catch(a){if(Xe(a))return{data:{user:null},error:a};throw a}}async listUsers(t){var a,s,n,o,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},f=await it(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:"",per_page:(o=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:XM});if(f.error)throw f.error;const h=await f.json(),p=(i=f.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(j=>{const x=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(j.split(";")[1].split("=")[1]);d[`${g}Page`]=x}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(Xe(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){$o(t);try{return await it(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:dn})}catch(a){if(Xe(a))return{data:{user:null},error:a};throw a}}async updateUserById(t,a){$o(t);try{return await it(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:a,headers:this.headers,xform:dn})}catch(s){if(Xe(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,a=!1){$o(t);try{return await it(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:a},xform:dn})}catch(s){if(Xe(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){$o(t.userId);try{const{data:a,error:s}=await it(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:a,error:s}}catch(a){if(Xe(a))return{data:null,error:a};throw a}}async _deleteFactor(t){$o(t.userId),$o(t.id);try{return{data:await it(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(a){if(Xe(a))return{data:null,error:a};throw a}}}function V0(e={}){return{getItem:t=>e[t]||null,setItem:(t,a)=>{e[t]=a},removeItem:t=>{delete e[t]}}}function ek(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ho={debug:!!(globalThis&&wS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ES extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class tk extends ES{}async function ak(e,t,a){Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await a()}finally{Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new tk(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ho.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}ek();const sk={url:hM,storageKey:mM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:pM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function G0(e,t,a){return await a()}const Vo={};class gc{constructor(t){var a,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=gc.nextInstanceID,gc.nextInstanceID+=1,this.instanceID>0&&ks()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},sk),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new WM({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=SS(n.fetch),this.lock=n.lock||G0,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ks()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=ak:this.lock=G0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:wS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=V0(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=V0(this.memoryStorage)),ks()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,a;return(a=(t=Vo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(t){Vo[this.storageKey]=Object.assign(Object.assign({},Vo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,a;return(a=(t=Vo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Vo[this.storageKey]=Object.assign(Object.assign({},Vo[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${yS}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const a=DM(window.location.href);let s="none";if(this._isImplicitGrantCallback(a)?s="implicit":await this._isPKCECallback(a)&&(s="pkce"),ks()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:o}=await this._getSessionFromURL(a,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),_M(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return Xe(a)?{error:a}:{error:new _S("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var a,s,n;try{const o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:br}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(Xe(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var a,s,n;try{let o;if("email"in t){const{email:f,password:h,options:p}=t;let m=null,j=null;this.flowType==="pkce"&&([m,j]=await Bo(this.storage,this.storageKey)),o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:f,password:h,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:j},xform:br})}else if("phone"in t){const{phone:f,password:h,options:p}=t;o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:h,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},channel:(n=p==null?void 0:p.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:br})}else throw new bd("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(Xe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let a;if("email"in t){const{email:o,password:i,options:l}=t;a=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:H0})}else if("phone"in t){const{phone:o,password:i,options:l}=t;a=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:H0})}else throw new bd("You must provide either an email or phone number and a password");const{data:s,error:n}=a;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new yd}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(a){if(Xe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(t){var a,s,n,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:a}=t;if(a==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}async signInWithSolana(t){var a,s,n,o,i,l,c,d,f,h,p,m;let j,x;if("message"in t)j=t.message,x=t.signature;else{const{chain:g,wallet:b,statement:v,options:y}=t;let _;if(ks())if(typeof b=="object")_=b;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=b}const w=new URL((a=y==null?void 0:y.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),v?{statement:v}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)j=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),x=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${w.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(n=(s=y==null?void 0:y.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((d=y==null?void 0:y.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(f=y==null?void 0:y.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(j),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=S}}try{const{data:g,error:b}=await it(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:AM(x)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:br});if(b)throw b;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new yd}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:b})}catch(g){if(Xe(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(t){const a=await Yn(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(a??"").split("/");try{const{data:o,error:i}=await it(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:br});if(await Xr(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new yd}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:n??null}),error:i})}catch(o){if(Xe(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:a,provider:s,token:n,access_token:o,nonce:i}=t,l=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:br}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new yd}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(a){if(Xe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(t){var a,s,n,o,i;try{if("email"in t){const{email:l,options:c}=t;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Bo(this.storage,this.storageKey));const{error:h}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:f}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f}}throw new bd("You must provide either an email or phone number.")}catch(l){if(Xe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var a,s;try{let n,o;"options"in t&&(n=(a=t.options)===null||a===void 0?void 0:a.redirectTo,o=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:i,error:l}=await it(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:n,xform:br});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(Xe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var a,s,n;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Bo(this.storage,this.storageKey)),await it(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(a=t.options)===null||a===void 0?void 0:a.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:QM})}catch(o){if(Xe(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:a},error:s}=t;if(s)throw s;if(!a)throw new en;const{error:n}=await it(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(Xe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const a=`${this.url}/resend`;if("email"in t){const{email:s,type:n,options:o}=t,{error:i}=await it(this.fetch,"POST",a,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:s,type:n,options:o}=t,{data:i,error:l}=await it(this.fetch,"POST",a,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new bd("You must provide either an email or phone number and a type")}catch(a){if(Xe(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(t,a){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await a()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=a();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await t(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const a=await Yn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?t=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<Th:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const i=await Yn(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=Oh()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,f)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,f))})}return{data:{session:t},error:null}}const{session:n,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:dn}):await this._useSession(async a=>{var s,n,o;const{data:i,error:l}=a;if(l)throw l;return!(!((s=i.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new en}:await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0,xform:dn})})}catch(a){if(Xe(a))return bM(a)&&(await this._removeSession(),await Xr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(t,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,a))}async _updateUser(t,a={}){try{return await this._useSession(async s=>{const{data:n,error:o}=s;if(o)throw o;if(!n.session)throw new en;const i=n.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Bo(this.storage,this.storageKey));const{data:d,error:f}=await it(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:dn});if(f)throw f;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(s){if(Xe(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new en;const a=Date.now()/1e3;let s=a,n=!0,o=null;const{payload:i}=Dh(t.access_token);if(i.exp&&(s=i.exp,n=s<=a),n){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:s-a,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(a){if(Xe(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async a=>{var s;if(!t){const{data:i,error:l}=a;if(l)throw l;t=(s=i.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new en;const{session:n,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(Xe(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(t,a){try{if(!ks())throw new _d("No browser detected.");if(t.error||t.error_description||t.error_code)throw new _d(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new L0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _d("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new L0("No code detected.");const{data:v,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=t;if(!o||!l||!i||!d)throw new _d("No session defined in URL");const f=Math.round(Date.now()/1e3),h=parseInt(l);let p=f+h;c&&(p=parseInt(c));const m=p-f;m*1e3<=Wo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const j=p-h;f-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,p,f):f-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,p,f);const{data:x,error:g}=await this._getUser(o);if(g)throw g;const b={provider_token:s,provider_refresh_token:n,access_token:o,expires_in:h,expires_at:p,refresh_token:i,token_type:d,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:t.type},error:null}}catch(s){if(Xe(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const a=await Yn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&a)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async a=>{var s;const{data:n,error:o}=a;if(o)return{error:o};const i=(s=n.session)===null||s===void 0?void 0:s.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(yM(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Xr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const a=RM(),s={id:a,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async a=>{var s,n;try{const{data:{session:o},error:i}=a;if(i)throw i;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,a={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Bo(this.storage,this.storageKey,!0));try{return await it(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(o){if(Xe(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:a,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=a.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(a){if(Xe(a))return{data:null,error:a};throw a}}async linkIdentity(t){var a;try{const{data:s,error:n}=await this._useSession(async o=>{var i,l,c,d,f;const{data:h,error:p}=o;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await it(this.fetch,"GET",m,{headers:this.headers,jwt:(f=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(n)throw n;return ks()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(Xe(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async a=>{var s,n;const{data:o,error:i}=a;if(i)throw i;return await it(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(a){if(Xe(a))return{data:null,error:a};throw a}}async _refreshAccessToken(t){const a=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{const s=Date.now();return await MM(async n=>(n>0&&await zM(200*Math.pow(2,n-1)),this._debug(a,"refreshing attempt",n),await it(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:br})),(n,o)=>{const i=200*Math.pow(2,n);return o&&Rh(o)&&Date.now()+i-s<Wo})}catch(s){if(this._debug(a,"error",s),Xe(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(a,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,a){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",a,"url",s),ks()&&!a.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,a;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Yn(this.storage,this.storageKey);if(n&&this.userStorage){let i=await Yn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:n.user},await ei(this.userStorage,this.storageKey+"-user",i)),n.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:Oh()}else if(n&&!n.user&&!n.user){const i=await Yn(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(n.user=i.user,await Xr(this.storage,this.storageKey+"-user"),await ei(this.storage,this.storageKey,n)):n.user=Oh()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const o=((a=n.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<Th;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${Th}s`),o){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Rh(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(n.access_token);!l&&(i!=null&&i.user)?(n.user=i.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(s,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var a,s;if(!t)throw new en;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new _f;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new en;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(n,"error",o),Xe(o)){const i={session:null,error:o};return Rh(o)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(i),i}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,a,s=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",a,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:a});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,a)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const a=Object.assign({},t),s=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&a.user&&await ei(this.userStorage,this.storageKey+"-user",{user:a.user});const n=Object.assign({},a);delete n.user;const o=B0(n);await ei(this.storage,this.storageKey,o)}else{const n=B0(a);await ei(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await Xr(this.storage,this.storageKey),await Xr(this.storage,this.storageKey+"-code-verifier"),await Xr(this.storage,this.storageKey+"-user"),this.userStorage&&await Xr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ks()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Wo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async a=>{const{data:{session:s}}=a;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-t)/Wo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Wo}ms, refresh threshold is ${rp} ticks`),n<=rp&&await this._callRefreshToken(s.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ES)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ks()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const a=`#_onVisibilityChanged(${t})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,a,s){const n=[`provider=${encodeURIComponent(a)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,i]=await Bo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);n.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async a=>{var s;const{data:n,error:o}=a;return o?{data:null,error:o}:await it(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(a){if(Xe(a))return{data:null,error:a};throw a}}async _enroll(t){try{return await this._useSession(async a=>{var s,n;const{data:o,error:i}=a;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await it(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(a){if(Xe(a))return{data:null,error:a};throw a}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var s;const{data:n,error:o}=a;if(o)return{data:null,error:o};const{data:i,error:l}=await it(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(a){if(Xe(a))return{data:null,error:a};throw a}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var s;const{data:n,error:o}=a;return o?{data:null,error:o}:await it(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(a){if(Xe(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(t){const{data:a,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:a.id,code:t.code})}async _listFactors(){const{data:{user:t},error:a}=await this.getUser();if(a)return{data:null,error:a};const s=(t==null?void 0:t.factors)||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=s.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:s,totp:n,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var a,s;const{data:{session:n},error:o}=t;if(o)return{data:null,error:o};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Dh(n.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((s=(a=n.user.factors)===null||a===void 0?void 0:a.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const f=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,a={keys:[]}){let s=a.keys.find(l=>l.kid===t);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+gM>n)return s;const{data:o,error:i}=await it(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=n,s=o.keys.find(l=>l.kid===t),!s)?null:s}async getClaims(t,a={}){try{let s=t;if(!s){const{data:m,error:j}=await this.getSession();if(j||!m.session)return{data:null,error:j};s=m.session.access_token}const{header:n,payload:o,signature:i,raw:{header:l,payload:c}}=Dh(s);a!=null&&a.allowExpired||UM(o.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!d){const{error:m}=await this.getUser(s);if(m)throw m;return{data:{claims:o,header:n,signature:i},error:null}}const f=BM(n.alg),h=await crypto.subtle.importKey("jwk",d,f,!0,["verify"]);if(!await crypto.subtle.verify(f,h,i,CM(`${l}.${c}`)))throw new ip("Invalid JWT signature");return{data:{claims:o,header:n,signature:i},error:null}}catch(s){if(Xe(s))return{data:null,error:s};throw s}}}gc.nextInstanceID=0;const rk=gc;class nk extends rk{constructor(t){super(t)}}var ok=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class ik{constructor(t,a,s){var n,o,i;if(this.supabaseUrl=t,this.supabaseKey=a,!t)throw new Error("supabaseUrl is required.");if(!a)throw new Error("supabaseKey is required.");const l=uM(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:sM,realtime:nM,auth:Object.assign(Object.assign({},rM),{storageKey:d}),global:aM},h=fM(s??{},f);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=h.auth)!==null&&i!==void 0?i:{},this.headers,h.global.fetch),this.fetch=cM(a,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new E4(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new t4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new W4(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,a={},s={}){return this.rest.rpc(t,a,s)}channel(t,a={config:{}}){return this.realtime.channel(t,a)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,a;return ok(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(a=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&a!==void 0?a:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:a,detectSessionInUrl:s,storage:n,storageKey:o,flowType:i,lock:l,debug:c},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new nk({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:t,persistSession:a,detectSessionInUrl:s,storage:n,flowType:i,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new q4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,s)=>{this._handleTokenChanged(a,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,a,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lk=(e,t,a)=>new ik(e,t,a),ck="https://twsnzfzjtjdamwwembzp.supabase.co",dk="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3c256ZnpqdGpkYW13d2VtYnpwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczMDczODEsImV4cCI6MjA4Mjg4MzM4MX0.EFmjLPT_Mnl4cv2qcH5vq5_zmo47fGWFjQdGGwidsNY",T=lk(ck,dk);function zt({className:e,size:t=24}){return r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx(VT,{className:ye("animate-spin text-green-600",e),size:t})})}function uk(){const[e,t]=u.useState({protocolosAbertos:0,receptorasSincronizadas:0,embrioesFrescosDisponiveis:0,embrioesCongeladosEstoque:0}),[a,s]=u.useState(!0);u.useEffect(()=>{n()},[]);const n=async()=>{try{const{count:i}=await T.from("protocolos_sincronizacao").select("*",{count:"exact",head:!0}).is("data_retirada",null),{count:l}=await T.from("protocolo_receptoras").select("*",{count:"exact",head:!0}).in("status",["APTA","SINCRONIZADA"]),{count:c}=await T.from("v_embrioes_disponiveis_te").select("*",{count:"exact",head:!0}).eq("disponivel_fresco_hoje",!0),{count:d}=await T.from("v_embrioes_disponiveis_te").select("*",{count:"exact",head:!0}).eq("disponivel_congelado",!0);t({protocolosAbertos:i||0,receptorasSincronizadas:l||0,embrioesFrescosDisponiveis:c||0,embrioesCongeladosEstoque:d||0})}catch(i){console.error("Erro ao carregar estatsticas:",i)}finally{s(!1)}},o=[{label:"Novo Protocolo",path:"/protocolos/novo",icon:Nv,color:"bg-green-600 hover:bg-green-700"},{label:"Registrar Retirada",path:"/protocolos",icon:UT,color:"bg-blue-600 hover:bg-blue-700"},{label:"Nova Aspirao",path:"/aspiracoes/novo",icon:wu,color:"bg-purple-600 hover:bg-purple-700"},{label:"Criar Lote FIV",path:"/lotes-fiv/novo",icon:wu,color:"bg-indigo-600 hover:bg-indigo-700"},{label:"Gerar Embries",path:"/embrioes/novo",icon:ho,color:"bg-pink-600 hover:bg-pink-700"},{label:"TE do Protocolo",path:"/transferencia",icon:sf,color:"bg-orange-600 hover:bg-orange-700"},{label:"Lanar DG",path:"/dg",icon:Ev,color:"bg-teal-600 hover:bg-teal-700"},{label:"Lanar Sexagem",path:"/sexagem",icon:bv,color:"bg-cyan-600 hover:bg-cyan-700"}];return a?r.jsx(zt,{}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Dashboard"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Viso geral do sistema de FIV/TE"})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Aes Rpidas"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.map(i=>{const l=i.icon;return r.jsx(Gi,{to:i.path,children:r.jsxs(U,{className:`w-full h-24 flex flex-col items-center justify-center gap-2 ${i.color} text-white`,children:[r.jsx(l,{className:"w-6 h-6"}),r.jsx("span",{className:"text-sm font-medium text-center",children:i.label})]})},i.path)})})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Estatsticas"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(je,{children:[r.jsxs(Ce,{children:[r.jsx(Ae,{className:"text-lg",children:"Protocolos Abertos"}),r.jsx(Al,{children:"Em andamento"})]}),r.jsx(we,{children:r.jsx("p",{className:"text-4xl font-bold text-green-600",children:e.protocolosAbertos})})]}),r.jsxs(je,{children:[r.jsxs(Ce,{children:[r.jsx(Ae,{className:"text-lg",children:"Receptoras Sincronizadas"}),r.jsx(Al,{children:"Aptas para TE"})]}),r.jsx(we,{children:r.jsx("p",{className:"text-4xl font-bold text-blue-600",children:e.receptorasSincronizadas})})]}),r.jsxs(je,{children:[r.jsxs(Ce,{children:[r.jsx(Ae,{className:"text-lg",children:"Embries Frescos"}),r.jsx(Al,{children:"Disponveis hoje (D7/D8)"})]}),r.jsx(we,{children:r.jsx("p",{className:"text-4xl font-bold text-purple-600",children:e.embrioesFrescosDisponiveis})})]}),r.jsxs(je,{children:[r.jsxs(Ce,{children:[r.jsx(Ae,{className:"text-lg",children:"Embries Congelados"}),r.jsx(Al,{children:"Em estoque"})]}),r.jsx(we,{children:r.jsx("p",{className:"text-4xl font-bold text-cyan-600",children:e.embrioesCongeladosEstoque})})]})]})]})]})}const At=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:a,className:ye("w-full caption-bottom text-sm",e),...t})}));At.displayName="Table";const Tt=u.forwardRef(({className:e,...t},a)=>r.jsx("thead",{ref:a,className:ye("[&_tr]:border-b",e),...t}));Tt.displayName="TableHeader";const Rt=u.forwardRef(({className:e,...t},a)=>r.jsx("tbody",{ref:a,className:ye("[&_tr:last-child]:border-0",e),...t}));Rt.displayName="TableBody";const fk=u.forwardRef(({className:e,...t},a)=>r.jsx("tfoot",{ref:a,className:ye("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));fk.displayName="TableFooter";const ge=u.forwardRef(({className:e,...t},a)=>r.jsx("tr",{ref:a,className:ye("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));ge.displayName="TableRow";const V=u.forwardRef(({className:e,...t},a)=>r.jsx("th",{ref:a,className:ye("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));V.displayName="TableHead";const L=u.forwardRef(({className:e,...t},a)=>r.jsx("td",{ref:a,className:ye("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));L.displayName="TableCell";const hk=u.forwardRef(({className:e,...t},a)=>r.jsx("caption",{ref:a,className:ye("mt-4 text-sm text-muted-foreground",e),...t}));hk.displayName="TableCaption";function mk(){const[e,t]=u.useState([]),[a,s]=u.useState(!0),{toast:n}=ea();u.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:i,error:l}=await T.from("clientes").select("*").order("nome",{ascending:!0});if(l)throw l;t(i||[])}catch(i){n({title:"Erro ao carregar clientes",description:i instanceof Error?i.message:"Erro desconhecido",variant:"destructive"})}finally{s(!1)}};return a?r.jsx(zt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Clientes"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar clientes do sistema"})]}),r.jsx(Gi,{to:"/clientes/novo",children:r.jsxs(U,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ts,{className:"w-4 h-4 mr-2"}),"Novo Cliente"]})})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Lista de Clientes"})}),r.jsx(we,{children:r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Nome"}),r.jsx(V,{children:"Telefone"}),r.jsx(V,{children:"Endereo"}),r.jsx(V,{children:"Cadastrado em"}),r.jsx(V,{className:"text-right",children:"Aes"})]})}),r.jsx(Rt,{children:e.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:5,className:"text-center text-slate-500",children:"Nenhum cliente cadastrado"})}):e.map(i=>r.jsxs(ge,{children:[r.jsx(L,{className:"font-medium",children:i.nome}),r.jsx(L,{children:i.telefone||"-"}),r.jsx(L,{children:i.endereco||"-"}),r.jsx(L,{children:i.created_at?new Date(i.created_at).toLocaleDateString("pt-BR"):"-"}),r.jsx(L,{className:"text-right",children:r.jsx(Gi,{to:`/clientes/${i.id}`,children:r.jsx(U,{variant:"ghost",size:"sm",children:r.jsx(cc,{className:"w-4 h-4"})})})})]},i.id))})]})})]})]})}const se=u.forwardRef(({className:e,type:t,...a},s)=>r.jsx("input",{type:t,className:ye("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...a}));se.displayName="Input";var pk="Label",NS=u.forwardRef((e,t)=>r.jsx(Be.label,{...e,ref:t,onMouseDown:a=>{var n;a.target.closest("button, input, select, textarea")||((n=e.onMouseDown)==null||n.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));NS.displayName=pk;var CS=NS;const vk=rl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),F=u.forwardRef(({className:e,...t},a)=>r.jsx(CS,{ref:a,className:ye(vk(),e),...t}));F.displayName=CS.displayName;const Aa=u.forwardRef(({className:e,...t},a)=>r.jsx("textarea",{className:ye("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));Aa.displayName="Textarea";function Y0(){const{id:e}=$r(),t=za(),{toast:a}=ea(),[s,n]=u.useState(!1),[o,i]=u.useState({nome:"",telefone:"",endereco:""});u.useEffect(()=>{e&&l()},[e]);const l=async()=>{try{n(!0);const{data:d,error:f}=await T.from("clientes").select("*").eq("id",e).single();if(f)throw f;d&&i({nome:d.nome||"",telefone:d.telefone||"",endereco:d.endereco||""})}catch(d){a({title:"Erro ao carregar cliente",description:d instanceof Error?d.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},c=async d=>{if(d.preventDefault(),!o.nome.trim()){a({title:"Erro de validao",description:"Nome  obrigatrio",variant:"destructive"});return}try{if(n(!0),e){const{error:f}=await T.from("clientes").update(o).eq("id",e);if(f)throw f;a({title:"Cliente atualizado",description:"Cliente atualizado com sucesso"})}else{const{error:f}=await T.from("clientes").insert([o]);if(f)throw f;a({title:"Cliente criado",description:"Cliente criado com sucesso"})}t("/clientes")}catch(f){a({title:"Erro ao salvar cliente",description:f instanceof Error?f.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}};return s&&e?r.jsx(zt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>t("/clientes"),children:r.jsx(es,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:e?"Editar Cliente":"Novo Cliente"}),r.jsx("p",{className:"text-slate-600 mt-1",children:e?"Atualizar informaes do cliente":"Cadastrar novo cliente"})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Informaes do Cliente"})}),r.jsx(we,{children:r.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"nome",children:"Nome *"}),r.jsx(se,{id:"nome",value:o.nome,onChange:d=>i({...o,nome:d.target.value}),placeholder:"Nome do cliente",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"telefone",children:"Telefone"}),r.jsx(se,{id:"telefone",value:o.telefone,onChange:d=>i({...o,telefone:d.target.value}),placeholder:"(00) 00000-0000"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"endereco",children:"Endereo"}),r.jsx(Aa,{id:"endereco",value:o.endereco,onChange:d=>i({...o,endereco:d.target.value}),placeholder:"Endereo completo",rows:3})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx(U,{type:"submit",className:"bg-green-600 hover:bg-green-700",disabled:s,children:s?"Salvando...":"Salvar"}),r.jsx(U,{type:"button",variant:"outline",onClick:()=>t("/clientes"),disabled:s,children:"Cancelar"})]})]})})]})]})}var Mh="focusScope.autoFocusOnMount",kh="focusScope.autoFocusOnUnmount",Q0={bubbles:!1,cancelable:!0},gk="FocusScope",jf=u.forwardRef((e,t)=>{const{loop:a=!1,trapped:s=!1,onMountAutoFocus:n,onUnmountAutoFocus:o,...i}=e,[l,c]=u.useState(null),d=Ts(n),f=Ts(o),h=u.useRef(null),p=vt(t,x=>c(x)),m=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(s){let x=function(y){if(m.paused||!l)return;const _=y.target;l.contains(_)?h.current=_:tn(h.current,{select:!0})},g=function(y){if(m.paused||!l)return;const _=y.relatedTarget;_!==null&&(l.contains(_)||tn(h.current,{select:!0}))},b=function(y){if(document.activeElement===document.body)for(const w of y)w.removedNodes.length>0&&tn(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",g);const v=new MutationObserver(b);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",g),v.disconnect()}}},[s,l,m.paused]),u.useEffect(()=>{if(l){X0.add(m);const x=document.activeElement;if(!l.contains(x)){const b=new CustomEvent(Mh,Q0);l.addEventListener(Mh,d),l.dispatchEvent(b),b.defaultPrevented||(xk(wk(AS(l)),{select:!0}),document.activeElement===x&&tn(l))}return()=>{l.removeEventListener(Mh,d),setTimeout(()=>{const b=new CustomEvent(kh,Q0);l.addEventListener(kh,f),l.dispatchEvent(b),b.defaultPrevented||tn(x??document.body,{select:!0}),l.removeEventListener(kh,f),X0.remove(m)},0)}}},[l,d,f,m]);const j=u.useCallback(x=>{if(!a&&!s||m.paused)return;const g=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,b=document.activeElement;if(g&&b){const v=x.currentTarget,[y,_]=yk(v);y&&_?!x.shiftKey&&b===_?(x.preventDefault(),a&&tn(y,{select:!0})):x.shiftKey&&b===y&&(x.preventDefault(),a&&tn(_,{select:!0})):b===v&&x.preventDefault()}},[a,s,m.paused]);return r.jsx(Be.div,{tabIndex:-1,...i,ref:p,onKeyDown:j})});jf.displayName=gk;function xk(e,{select:t=!1}={}){const a=document.activeElement;for(const s of e)if(tn(s,{select:t}),document.activeElement!==a)return}function yk(e){const t=AS(e),a=K0(t,e),s=K0(t.reverse(),e);return[a,s]}function AS(e){const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function K0(e,t){for(const a of e)if(!bk(a,{upTo:t}))return a}function bk(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function _k(e){return e instanceof HTMLInputElement&&"select"in e}function tn(e,{select:t=!1}={}){if(e&&e.focus){const a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&_k(e)&&t&&e.select()}}var X0=jk();function jk(){let e=[];return{add(t){const a=e[0];t!==a&&(a==null||a.pause()),e=Z0(e,t),e.unshift(t)},remove(t){var a;e=Z0(e,t),(a=e[0])==null||a.resume()}}}function Z0(e,t){const a=[...e],s=a.indexOf(t);return s!==-1&&a.splice(s,1),a}function wk(e){return e.filter(t=>t.tagName!=="A")}var Ph=0;function Zv(){u.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??J0()),document.body.insertAdjacentElement("beforeend",e[1]??J0()),Ph++,()=>{Ph===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Ph--}},[])}function J0(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ar=function(){return ar=Object.assign||function(t){for(var a,s=1,n=arguments.length;s<n;s++){a=arguments[s];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},ar.apply(this,arguments)};function TS(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]]);return a}function Sk(e,t,a){if(a||arguments.length===2)for(var s=0,n=t.length,o;s<n;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var $d="right-scroll-bar-position",Hd="width-before-scroll-bar",Ek="with-scroll-bars-hidden",Nk="--removed-body-scroll-bar-size";function Lh(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Ck(e,t){var a=u.useState(function(){return{value:e,callback:t,facade:{get current(){return a.value},set current(s){var n=a.value;n!==s&&(a.value=s,a.callback(s,n))}}}})[0];return a.callback=t,a.facade}var Ak=typeof window<"u"?u.useLayoutEffect:u.useEffect,W0=new WeakMap;function Tk(e,t){var a=Ck(null,function(s){return e.forEach(function(n){return Lh(n,s)})});return Ak(function(){var s=W0.get(a);if(s){var n=new Set(s),o=new Set(e),i=a.current;n.forEach(function(l){o.has(l)||Lh(l,null)}),o.forEach(function(l){n.has(l)||Lh(l,i)})}W0.set(a,e)},[e]),a}function Rk(e){return e}function Dk(e,t){t===void 0&&(t=Rk);var a=[],s=!1,n={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:e},useMedium:function(o){var i=t(o,s);return a.push(i),function(){a=a.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(s=!0;a.length;){var i=a;a=[],i.forEach(o)}a={push:function(l){return o(l)},filter:function(){return a}}},assignMedium:function(o){s=!0;var i=[];if(a.length){var l=a;a=[],l.forEach(o),i=a}var c=function(){var f=i;i=[],f.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),a={push:function(f){i.push(f),d()},filter:function(f){return i=i.filter(f),a}}}};return n}function Ok(e){e===void 0&&(e={});var t=Dk(null);return t.options=ar({async:!0,ssr:!1},e),t}var RS=function(e){var t=e.sideCar,a=TS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return u.createElement(s,ar({},a))};RS.isSideCarExport=!0;function zk(e,t){return e.useMedium(t),RS}var DS=Ok(),Ih=function(){},wf=u.forwardRef(function(e,t){var a=u.useRef(null),s=u.useState({onScrollCapture:Ih,onWheelCapture:Ih,onTouchMoveCapture:Ih}),n=s[0],o=s[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,f=e.enabled,h=e.shards,p=e.sideCar,m=e.noRelative,j=e.noIsolation,x=e.inert,g=e.allowPinchZoom,b=e.as,v=b===void 0?"div":b,y=e.gapMode,_=TS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,S=Tk([a,t]),N=ar(ar({},_),n);return u.createElement(u.Fragment,null,f&&u.createElement(w,{sideCar:DS,removeScrollBar:d,shards:h,noRelative:m,noIsolation:j,inert:x,setCallbacks:o,allowPinchZoom:!!g,lockRef:a,gapMode:y}),i?u.cloneElement(u.Children.only(l),ar(ar({},N),{ref:S})):u.createElement(v,ar({},N,{className:c,ref:S}),l))});wf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wf.classNames={fullWidth:Hd,zeroRight:$d};var Mk=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function kk(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Mk();return t&&e.setAttribute("nonce",t),e}function Pk(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Lk(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Ik=function(){var e=0,t=null;return{add:function(a){e==0&&(t=kk())&&(Pk(t,a),Lk(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Fk=function(){var e=Ik();return function(t,a){u.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&a])}},OS=function(){var e=Fk(),t=function(a){var s=a.styles,n=a.dynamic;return e(s,n),null};return t},qk={left:0,top:0,right:0,gap:0},Fh=function(e){return parseInt(e||"",10)||0},Uk=function(e){var t=window.getComputedStyle(document.body),a=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],n=t[e==="padding"?"paddingRight":"marginRight"];return[Fh(a),Fh(s),Fh(n)]},Bk=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return qk;var t=Uk(e),a=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-a+t[2]-t[0])}},$k=OS(),wi="data-scroll-locked",Hk=function(e,t,a,s){var n=e.left,o=e.top,i=e.right,l=e.gap;return a===void 0&&(a="margin"),`
  .`.concat(Ek,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(wi,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),a==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),a==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat($d,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Hd,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat($d," .").concat($d,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Hd," .").concat(Hd,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(wi,`] {
    `).concat(Nk,": ").concat(l,`px;
  }
`)},ey=function(){var e=parseInt(document.body.getAttribute(wi)||"0",10);return isFinite(e)?e:0},Vk=function(){u.useEffect(function(){return document.body.setAttribute(wi,(ey()+1).toString()),function(){var e=ey()-1;e<=0?document.body.removeAttribute(wi):document.body.setAttribute(wi,e.toString())}},[])},Gk=function(e){var t=e.noRelative,a=e.noImportant,s=e.gapMode,n=s===void 0?"margin":s;Vk();var o=u.useMemo(function(){return Bk(n)},[n]);return u.createElement($k,{styles:Hk(o,!t,n,a?"":"!important")})},lp=!1;if(typeof window<"u")try{var jd=Object.defineProperty({},"passive",{get:function(){return lp=!0,!0}});window.addEventListener("test",jd,jd),window.removeEventListener("test",jd,jd)}catch{lp=!1}var Go=lp?{passive:!1}:!1,Yk=function(e){return e.tagName==="TEXTAREA"},zS=function(e,t){if(!(e instanceof Element))return!1;var a=window.getComputedStyle(e);return a[t]!=="hidden"&&!(a.overflowY===a.overflowX&&!Yk(e)&&a[t]==="visible")},Qk=function(e){return zS(e,"overflowY")},Kk=function(e){return zS(e,"overflowX")},ty=function(e,t){var a=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var n=MS(e,s);if(n){var o=kS(e,s),i=o[1],l=o[2];if(i>l)return!0}s=s.parentNode}while(s&&s!==a.body);return!1},Xk=function(e){var t=e.scrollTop,a=e.scrollHeight,s=e.clientHeight;return[t,a,s]},Zk=function(e){var t=e.scrollLeft,a=e.scrollWidth,s=e.clientWidth;return[t,a,s]},MS=function(e,t){return e==="v"?Qk(t):Kk(t)},kS=function(e,t){return e==="v"?Xk(t):Zk(t)},Jk=function(e,t){return e==="h"&&t==="rtl"?-1:1},Wk=function(e,t,a,s,n){var o=Jk(e,window.getComputedStyle(t).direction),i=o*s,l=a.target,c=t.contains(l),d=!1,f=i>0,h=0,p=0;do{if(!l)break;var m=kS(e,l),j=m[0],x=m[1],g=m[2],b=x-g-o*j;(j||b)&&MS(e,l)&&(h+=b,p+=j);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&Math.abs(h)<1||!f&&Math.abs(p)<1)&&(d=!0),d},wd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ay=function(e){return[e.deltaX,e.deltaY]},sy=function(e){return e&&"current"in e?e.current:e},eP=function(e,t){return e[0]===t[0]&&e[1]===t[1]},tP=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},aP=0,Yo=[];function sP(e){var t=u.useRef([]),a=u.useRef([0,0]),s=u.useRef(),n=u.useState(aP++)[0],o=u.useState(OS)[0],i=u.useRef(e);u.useEffect(function(){i.current=e},[e]),u.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(n));var x=Sk([e.lockRef.current],(e.shards||[]).map(sy),!0).filter(Boolean);return x.forEach(function(g){return g.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),x.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(n))})}}},[e.inert,e.lockRef.current,e.shards]);var l=u.useCallback(function(x,g){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!i.current.allowPinchZoom;var b=wd(x),v=a.current,y="deltaX"in x?x.deltaX:v[0]-b[0],_="deltaY"in x?x.deltaY:v[1]-b[1],w,S=x.target,N=Math.abs(y)>Math.abs(_)?"h":"v";if("touches"in x&&N==="h"&&S.type==="range")return!1;var C=ty(N,S);if(!C)return!0;if(C?w=N:(w=N==="v"?"h":"v",C=ty(N,S)),!C)return!1;if(!s.current&&"changedTouches"in x&&(y||_)&&(s.current=w),!w)return!0;var O=s.current||w;return Wk(O,g,x,O==="h"?y:_)},[]),c=u.useCallback(function(x){var g=x;if(!(!Yo.length||Yo[Yo.length-1]!==o)){var b="deltaY"in g?ay(g):wd(g),v=t.current.filter(function(w){return w.name===g.type&&(w.target===g.target||g.target===w.shadowParent)&&eP(w.delta,b)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var y=(i.current.shards||[]).map(sy).filter(Boolean).filter(function(w){return w.contains(g.target)}),_=y.length>0?l(g,y[0]):!i.current.noIsolation;_&&g.cancelable&&g.preventDefault()}}},[]),d=u.useCallback(function(x,g,b,v){var y={name:x,delta:g,target:b,should:v,shadowParent:rP(b)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(_){return _!==y})},1)},[]),f=u.useCallback(function(x){a.current=wd(x),s.current=void 0},[]),h=u.useCallback(function(x){d(x.type,ay(x),x.target,l(x,e.lockRef.current))},[]),p=u.useCallback(function(x){d(x.type,wd(x),x.target,l(x,e.lockRef.current))},[]);u.useEffect(function(){return Yo.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Go),document.addEventListener("touchmove",c,Go),document.addEventListener("touchstart",f,Go),function(){Yo=Yo.filter(function(x){return x!==o}),document.removeEventListener("wheel",c,Go),document.removeEventListener("touchmove",c,Go),document.removeEventListener("touchstart",f,Go)}},[]);var m=e.removeScrollBar,j=e.inert;return u.createElement(u.Fragment,null,j?u.createElement(o,{styles:tP(n)}):null,m?u.createElement(Gk,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function rP(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const nP=zk(DS,sP);var Sf=u.forwardRef(function(e,t){return u.createElement(wf,ar({},e,{ref:t,sideCar:nP}))});Sf.classNames=wf.classNames;var oP=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Qo=new WeakMap,Sd=new WeakMap,Ed={},qh=0,PS=function(e){return e&&(e.host||PS(e.parentNode))},iP=function(e,t){return t.map(function(a){if(e.contains(a))return a;var s=PS(a);return s&&e.contains(s)?s:(console.error("aria-hidden",a,"in not contained inside",e,". Doing nothing"),null)}).filter(function(a){return!!a})},lP=function(e,t,a,s){var n=iP(t,Array.isArray(e)?e:[e]);Ed[a]||(Ed[a]=new WeakMap);var o=Ed[a],i=[],l=new Set,c=new Set(n),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};n.forEach(d);var f=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(p){if(l.has(p))f(p);else try{var m=p.getAttribute(s),j=m!==null&&m!=="false",x=(Qo.get(p)||0)+1,g=(o.get(p)||0)+1;Qo.set(p,x),o.set(p,g),i.push(p),x===1&&j&&Sd.set(p,!0),g===1&&p.setAttribute(a,"true"),j||p.setAttribute(s,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return f(t),l.clear(),qh++,function(){i.forEach(function(h){var p=Qo.get(h)-1,m=o.get(h)-1;Qo.set(h,p),o.set(h,m),p||(Sd.has(h)||h.removeAttribute(s),Sd.delete(h)),m||h.removeAttribute(a)}),qh--,qh||(Qo=new WeakMap,Qo=new WeakMap,Sd=new WeakMap,Ed={})}},Jv=function(e,t,a){a===void 0&&(a="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),n=oP(e);return n?(s.push.apply(s,Array.from(n.querySelectorAll("[aria-live], script"))),lP(s,n,a,"aria-hidden")):function(){return null}},Ef="Dialog",[LS,IS]=Os(Ef),[cP,Ys]=LS(Ef),FS=e=>{const{__scopeDialog:t,children:a,open:s,defaultOpen:n,onOpenChange:o,modal:i=!0}=e,l=u.useRef(null),c=u.useRef(null),[d,f]=$s({prop:s,defaultProp:n??!1,onChange:o,caller:Ef});return r.jsx(cP,{scope:t,triggerRef:l,contentRef:c,contentId:Dr(),titleId:Dr(),descriptionId:Dr(),open:d,onOpenChange:f,onOpenToggle:u.useCallback(()=>f(h=>!h),[f]),modal:i,children:a})};FS.displayName=Ef;var qS="DialogTrigger",US=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=Ys(qS,a),o=vt(t,n.triggerRef);return r.jsx(Be.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":tg(n.open),...s,ref:o,onClick:De(e.onClick,n.onOpenToggle)})});US.displayName=qS;var Wv="DialogPortal",[dP,BS]=LS(Wv,{forceMount:void 0}),$S=e=>{const{__scopeDialog:t,forceMount:a,children:s,container:n}=e,o=Ys(Wv,t);return r.jsx(dP,{scope:t,forceMount:a,children:u.Children.map(s,i=>r.jsx(Ur,{present:a||o.open,children:r.jsx(Lc,{asChild:!0,container:n,children:i})}))})};$S.displayName=Wv;var Mu="DialogOverlay",HS=u.forwardRef((e,t)=>{const a=BS(Mu,e.__scopeDialog),{forceMount:s=a.forceMount,...n}=e,o=Ys(Mu,e.__scopeDialog);return o.modal?r.jsx(Ur,{present:s||o.open,children:r.jsx(fP,{...n,ref:t})}):null});HS.displayName=Mu;var uP=xo("DialogOverlay.RemoveScroll"),fP=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=Ys(Mu,a);return r.jsx(Sf,{as:uP,allowPinchZoom:!0,shards:[n.contentRef],children:r.jsx(Be.div,{"data-state":tg(n.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),bo="DialogContent",VS=u.forwardRef((e,t)=>{const a=BS(bo,e.__scopeDialog),{forceMount:s=a.forceMount,...n}=e,o=Ys(bo,e.__scopeDialog);return r.jsx(Ur,{present:s||o.open,children:o.modal?r.jsx(hP,{...n,ref:t}):r.jsx(mP,{...n,ref:t})})});VS.displayName=bo;var hP=u.forwardRef((e,t)=>{const a=Ys(bo,e.__scopeDialog),s=u.useRef(null),n=vt(t,a.contentRef,s);return u.useEffect(()=>{const o=s.current;if(o)return Jv(o)},[]),r.jsx(GS,{...e,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:De(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=a.triggerRef.current)==null||i.focus()}),onPointerDownOutside:De(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:De(e.onFocusOutside,o=>o.preventDefault())})}),mP=u.forwardRef((e,t)=>{const a=Ys(bo,e.__scopeDialog),s=u.useRef(!1),n=u.useRef(!1);return r.jsx(GS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=a.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const i=o.target;((d=a.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&n.current&&o.preventDefault()}})}),GS=u.forwardRef((e,t)=>{const{__scopeDialog:a,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:o,...i}=e,l=Ys(bo,a),c=u.useRef(null),d=vt(t,c);return Zv(),r.jsxs(r.Fragment,{children:[r.jsx(jf,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:o,children:r.jsx(sl,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":tg(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(vP,{titleId:l.titleId}),r.jsx(xP,{contentRef:c,descriptionId:l.descriptionId})]})]})}),eg="DialogTitle",YS=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=Ys(eg,a);return r.jsx(Be.h2,{id:n.titleId,...s,ref:t})});YS.displayName=eg;var QS="DialogDescription",KS=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=Ys(QS,a);return r.jsx(Be.p,{id:n.descriptionId,...s,ref:t})});KS.displayName=QS;var XS="DialogClose",ZS=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=Ys(XS,a);return r.jsx(Be.button,{type:"button",...s,ref:t,onClick:De(e.onClick,()=>n.onOpenChange(!1))})});ZS.displayName=XS;function tg(e){return e?"open":"closed"}var JS="DialogTitleWarning",[pP,WS]=$2(JS,{contentName:bo,titleName:eg,docsSlug:"dialog"}),vP=({titleId:e})=>{const t=WS(JS),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return u.useEffect(()=>{e&&(document.getElementById(e)||console.error(a))},[a,e]),null},gP="DialogDescriptionWarning",xP=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${WS(gP).contentName}}.`;return u.useEffect(()=>{var o;const n=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&n&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},ag=FS,eE=US,sg=$S,Vc=HS,Gc=VS,Yc=YS,Qc=KS,Nf=ZS;const Dt=ag,Ds=eE,yP=sg,tE=u.forwardRef(({className:e,...t},a)=>r.jsx(Vc,{ref:a,className:ye("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));tE.displayName=Vc.displayName;const _t=u.forwardRef(({className:e,children:t,...a},s)=>r.jsxs(yP,{children:[r.jsx(tE,{}),r.jsxs(Gc,{ref:s,className:ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,r.jsxs(Nf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(Rs,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_t.displayName=Gc.displayName;const jt=({className:e,...t})=>r.jsx("div",{className:ye("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});jt.displayName="DialogHeader";const wt=u.forwardRef(({className:e,...t},a)=>r.jsx(Yc,{ref:a,className:ye("text-lg font-semibold leading-none tracking-tight",e),...t}));wt.displayName=Yc.displayName;const Ot=u.forwardRef(({className:e,...t},a)=>r.jsx(Qc,{ref:a,className:ye("text-sm text-muted-foreground",e),...t}));Ot.displayName=Qc.displayName;var bP=u.createContext(void 0);function Cf(e){const t=u.useContext(bP);return e||t||"ltr"}var Uh="rovingFocusGroup.onEntryFocus",_P={bubbles:!1,cancelable:!0},Kc="RovingFocusGroup",[cp,aE,jP]=vv(Kc),[wP,Af]=Os(Kc,[jP]),[SP,EP]=wP(Kc),sE=u.forwardRef((e,t)=>r.jsx(cp.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(cp.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(NP,{...e,ref:t})})}));sE.displayName=Kc;var NP=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,orientation:s,loop:n=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...h}=e,p=u.useRef(null),m=vt(t,p),j=Cf(o),[x,g]=$s({prop:i,defaultProp:l??null,onChange:c,caller:Kc}),[b,v]=u.useState(!1),y=Ts(d),_=aE(a),w=u.useRef(!1),[S,N]=u.useState(0);return u.useEffect(()=>{const C=p.current;if(C)return C.addEventListener(Uh,y),()=>C.removeEventListener(Uh,y)},[y]),r.jsx(SP,{scope:a,orientation:s,dir:j,loop:n,currentTabStopId:x,onItemFocus:u.useCallback(C=>g(C),[g]),onItemShiftTab:u.useCallback(()=>v(!0),[]),onFocusableItemAdd:u.useCallback(()=>N(C=>C+1),[]),onFocusableItemRemove:u.useCallback(()=>N(C=>C-1),[]),children:r.jsx(Be.div,{tabIndex:b||S===0?-1:0,"data-orientation":s,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:De(e.onMouseDown,()=>{w.current=!0}),onFocus:De(e.onFocus,C=>{const O=!w.current;if(C.target===C.currentTarget&&O&&!b){const A=new CustomEvent(Uh,_P);if(C.currentTarget.dispatchEvent(A),!A.defaultPrevented){const q=_().filter(R=>R.focusable),B=q.find(R=>R.active),ee=q.find(R=>R.id===x),X=[B,ee,...q].filter(Boolean).map(R=>R.ref.current);oE(X,f)}}w.current=!1}),onBlur:De(e.onBlur,()=>v(!1))})})}),rE="RovingFocusGroupItem",nE=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,focusable:s=!0,active:n=!1,tabStopId:o,children:i,...l}=e,c=Dr(),d=o||c,f=EP(rE,a),h=f.currentTabStopId===d,p=aE(a),{onFocusableItemAdd:m,onFocusableItemRemove:j,currentTabStopId:x}=f;return u.useEffect(()=>{if(s)return m(),()=>j()},[s,m,j]),r.jsx(cp.ItemSlot,{scope:a,id:d,focusable:s,active:n,children:r.jsx(Be.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:De(e.onMouseDown,g=>{s?f.onItemFocus(d):g.preventDefault()}),onFocus:De(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:De(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){f.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const b=TP(g,f.orientation,f.dir);if(b!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let y=p().filter(_=>_.focusable).map(_=>_.ref.current);if(b==="last")y.reverse();else if(b==="prev"||b==="next"){b==="prev"&&y.reverse();const _=y.indexOf(g.currentTarget);y=f.loop?RP(y,_+1):y.slice(_+1)}setTimeout(()=>oE(y))}}),children:typeof i=="function"?i({isCurrentTabStop:h,hasTabStop:x!=null}):i})})});nE.displayName=rE;var CP={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function AP(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function TP(e,t,a){const s=AP(e.key,a);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return CP[s]}function oE(e,t=!1){const a=document.activeElement;for(const s of e)if(s===a||(s.focus({preventScroll:t}),document.activeElement!==a))return}function RP(e,t){return e.map((a,s)=>e[(t+s)%e.length])}var iE=sE,lE=nE,Tf="Tabs",[DP,L5]=Os(Tf,[Af]),cE=Af(),[OP,rg]=DP(Tf),dE=u.forwardRef((e,t)=>{const{__scopeTabs:a,value:s,onValueChange:n,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...d}=e,f=Cf(l),[h,p]=$s({prop:s,onChange:n,defaultProp:o??"",caller:Tf});return r.jsx(OP,{scope:a,baseId:Dr(),value:h,onValueChange:p,orientation:i,dir:f,activationMode:c,children:r.jsx(Be.div,{dir:f,"data-orientation":i,...d,ref:t})})});dE.displayName=Tf;var uE="TabsList",fE=u.forwardRef((e,t)=>{const{__scopeTabs:a,loop:s=!0,...n}=e,o=rg(uE,a),i=cE(a);return r.jsx(iE,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:s,children:r.jsx(Be.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:t})})});fE.displayName=uE;var hE="TabsTrigger",mE=u.forwardRef((e,t)=>{const{__scopeTabs:a,value:s,disabled:n=!1,...o}=e,i=rg(hE,a),l=cE(a),c=gE(i.baseId,s),d=xE(i.baseId,s),f=s===i.value;return r.jsx(lE,{asChild:!0,...l,focusable:!n,active:f,children:r.jsx(Be.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:c,...o,ref:t,onMouseDown:De(e.onMouseDown,h=>{!n&&h.button===0&&h.ctrlKey===!1?i.onValueChange(s):h.preventDefault()}),onKeyDown:De(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(s)}),onFocus:De(e.onFocus,()=>{const h=i.activationMode!=="manual";!f&&!n&&h&&i.onValueChange(s)})})})});mE.displayName=hE;var pE="TabsContent",vE=u.forwardRef((e,t)=>{const{__scopeTabs:a,value:s,forceMount:n,children:o,...i}=e,l=rg(pE,a),c=gE(l.baseId,s),d=xE(l.baseId,s),f=s===l.value,h=u.useRef(f);return u.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),r.jsx(Ur,{present:n||f,children:({present:p})=>r.jsx(Be.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&o})})});vE.displayName=pE;function gE(e,t){return`${e}-trigger-${t}`}function xE(e,t){return`${e}-content-${t}`}var zP=dE,yE=fE,bE=mE,_E=vE;const Rf=zP,Xc=u.forwardRef(({className:e,...t},a)=>r.jsx(yE,{ref:a,className:ye("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Xc.displayName=yE.displayName;const Ir=u.forwardRef(({className:e,...t},a)=>r.jsx(bE,{ref:a,className:ye("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Ir.displayName=bE.displayName;const Fr=u.forwardRef(({className:e,...t},a)=>r.jsx(_E,{ref:a,className:ye("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Fr.displayName=_E.displayName;function MP(){const{id:e}=$r(),t=za(),{toast:a}=ea(),[s,n]=u.useState(!0),[o,i]=u.useState(null),[l,c]=u.useState([]),[d,f]=u.useState([]),[h,p]=u.useState(!1),[m,j]=u.useState(!1),[x,g]=u.useState({nome:"",localizacao:"",latitude:"",longitude:"",responsavel:"",contato_responsavel:""});u.useEffect(()=>{e&&b()},[e]);const b=async()=>{try{n(!0);const{data:w,error:S}=await T.from("clientes").select("*").eq("id",e).single();if(S)throw S;i(w);const{data:N,error:C}=await T.from("fazendas").select("*").eq("cliente_id",e).order("nome",{ascending:!0});if(C)throw C;c(N||[]);const{data:O,error:A}=await T.from("doses_semen").select("*").eq("cliente_id",e).order("nome",{ascending:!0});if(A)throw A;f(O||[])}catch(w){a({title:"Erro ao carregar dados",description:w instanceof Error?w.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},v=w=>w.latitude&&w.longitude?`https://www.google.com/maps?q=${w.latitude},${w.longitude}`:w.localizacao?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(w.localizacao)}`:null,y=w=>w.latitude&&w.longitude?`https://waze.com/ul?ll=${w.latitude},${w.longitude}&navigate=yes`:w.localizacao?v(w):null,_=async w=>{if(w.preventDefault(),!x.nome.trim()){a({title:"Erro de validao",description:"Nome da fazenda  obrigatrio",variant:"destructive"});return}try{j(!0);const S={cliente_id:e,nome:x.nome,localizacao:x.localizacao.trim()||null,latitude:x.latitude?parseFloat(x.latitude):null,longitude:x.longitude?parseFloat(x.longitude):null,responsavel:x.responsavel.trim()||null,contato_responsavel:x.contato_responsavel.trim()||null},{error:N}=await T.from("fazendas").insert([S]);if(N)throw N;a({title:"Fazenda criada",description:"Fazenda criada com sucesso"}),p(!1),g({nome:"",localizacao:"",latitude:"",longitude:"",responsavel:"",contato_responsavel:""}),b()}catch(S){const N=S instanceof Error?S.message:"Erro desconhecido";a({title:"Erro ao criar fazenda",description:N.includes("RLS")||N.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":N,variant:"destructive"})}finally{j(!1)}};return s?r.jsx(zt,{}):o?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>t("/clientes"),children:r.jsx(es,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:o.nome}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Detalhes do cliente"})]})]}),r.jsx(Gi,{to:`/clientes/${e}/editar`,children:r.jsxs(U,{variant:"outline",children:[r.jsx(dc,{className:"w-4 h-4 mr-2"}),"Editar"]})})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Informaes do Cliente"})}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Nome"}),r.jsx("p",{className:"text-base text-slate-900",children:o.nome})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Telefone"}),r.jsx("p",{className:"text-base text-slate-900",children:o.telefone||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Endereo"}),r.jsx("p",{className:"text-base text-slate-900",children:o.endereco||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Cadastrado em"}),r.jsx("p",{className:"text-base text-slate-900",children:o.created_at?new Date(o.created_at).toLocaleDateString("pt-BR"):"-"})]})]})]}),r.jsxs(Rf,{defaultValue:"fazendas",className:"w-full",children:[r.jsxs(Xc,{children:[r.jsxs(Ir,{value:"fazendas",children:[r.jsx(Qj,{className:"w-4 h-4 mr-2"}),"Fazendas (",l.length,")"]}),r.jsxs(Ir,{value:"doses",children:[r.jsx(ho,{className:"w-4 h-4 mr-2"}),"Doses de Smen (",d.length,")"]})]}),r.jsx(Fr,{value:"fazendas",children:r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ae,{children:"Fazendas do Cliente"}),r.jsxs(Dt,{open:h,onOpenChange:p,children:[r.jsx(Ds,{asChild:!0,children:r.jsxs(U,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ts,{className:"w-4 h-4 mr-2"}),"Nova Fazenda"]})}),r.jsxs(_t,{className:"max-w-md",children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Criar Nova Fazenda"}),r.jsxs(Ot,{children:["Criar fazenda para ",o.nome]})]}),r.jsxs("form",{onSubmit:_,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"nome",children:"Nome da Fazenda *"}),r.jsx(se,{id:"nome",value:x.nome,onChange:w=>g({...x,nome:w.target.value}),placeholder:"Nome da fazenda",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"localizacao",children:"Localizao"}),r.jsx(se,{id:"localizacao",value:x.localizacao,onChange:w=>g({...x,localizacao:w.target.value}),placeholder:"Cidade, Estado"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"latitude",children:"Latitude"}),r.jsx(se,{id:"latitude",type:"number",step:"any",value:x.latitude,onChange:w=>g({...x,latitude:w.target.value}),placeholder:"-23.550520"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"longitude",children:"Longitude"}),r.jsx(se,{id:"longitude",type:"number",step:"any",value:x.longitude,onChange:w=>g({...x,longitude:w.target.value}),placeholder:"-46.633308"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"responsavel",children:"Responsvel"}),r.jsx(se,{id:"responsavel",value:x.responsavel,onChange:w=>g({...x,responsavel:w.target.value}),placeholder:"Nome do responsvel"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"contato_responsavel",children:"Contato do Responsvel"}),r.jsx(se,{id:"contato_responsavel",value:x.contato_responsavel,onChange:w=>g({...x,contato_responsavel:w.target.value}),placeholder:"Telefone ou email"})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(U,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:m,children:m?"Salvando...":"Criar Fazenda"}),r.jsx(U,{type:"button",variant:"outline",onClick:()=>p(!1),disabled:m,children:"Cancelar"})]})]})]})]})]})}),r.jsx(we,{children:r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Nome"}),r.jsx(V,{children:"Localizao"}),r.jsx(V,{children:"Responsvel"}),r.jsx(V,{children:"Contato"}),r.jsx(V,{className:"text-right",children:"Aes"})]})}),r.jsx(Rt,{children:l.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:5,className:"text-center text-slate-500",children:"Nenhuma fazenda cadastrada"})}):l.map(w=>r.jsxs(ge,{children:[r.jsx(L,{className:"font-medium",children:r.jsx(Gi,{to:`/fazendas/${w.id}`,className:"text-green-600 hover:text-green-700 hover:underline",children:w.nome})}),r.jsx(L,{children:w.localizacao||"-"}),r.jsx(L,{children:w.responsavel||"-"}),r.jsx(L,{children:w.contato_responsavel||"-"}),r.jsx(L,{className:"text-right",children:r.jsxs("div",{className:"flex gap-2 justify-end",children:[v(w)&&r.jsxs(U,{variant:"outline",size:"sm",onClick:()=>window.open(v(w),"_blank"),children:[r.jsx(wv,{className:"w-4 h-4 mr-1"}),"Maps"]}),y(w)&&r.jsxs(U,{variant:"outline",size:"sm",onClick:()=>window.open(y(w),"_blank"),children:[r.jsx(Kj,{className:"w-4 h-4 mr-1"}),"Waze"]})]})})]},w.id))})]})})]})}),r.jsx(Fr,{value:"doses",children:r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Doses de Smen"})}),r.jsx(we,{children:r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Nome (Touro)"}),r.jsx(V,{children:"Raa"}),r.jsx(V,{children:"Tipo"}),r.jsx(V,{children:"Quantidade"})]})}),r.jsx(Rt,{children:d.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:4,className:"text-center text-slate-500",children:"Nenhuma dose de smen cadastrada"})}):d.map(w=>r.jsxs(ge,{children:[r.jsx(L,{className:"font-medium",children:w.nome}),r.jsx(L,{children:w.raca||"-"}),r.jsx(L,{children:w.tipo_semen||"-"}),r.jsx(L,{children:w.quantidade??"-"})]},w.id))})]})})]})})]})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Cliente no encontrado"}),r.jsx(U,{onClick:()=>t("/clientes"),className:"mt-4",children:"Voltar para Clientes"})]})}function kP(){const[e,t]=u.useState([]),[a,s]=u.useState(!0),{toast:n}=ea(),o=za();u.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const{data:l,error:c}=await T.from("fazendas").select("*").order("nome",{ascending:!0});if(c)throw c;const d=[...new Set(l==null?void 0:l.map(j=>j.cliente_id))],{data:f,error:h}=await T.from("clientes").select("id, nome").in("id",d);if(h)throw h;const p=new Map(f==null?void 0:f.map(j=>[j.id,j.nome])),m=l==null?void 0:l.map(j=>({...j,cliente_nome:p.get(j.cliente_id)}));t(m||[])}catch(l){n({title:"Erro ao carregar dados",description:l instanceof Error?l.message:"Erro desconhecido",variant:"destructive"})}finally{s(!1)}};return a?r.jsx(zt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Fazendas"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar fazendas do sistema"})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Lista de Fazendas"})}),r.jsx(we,{children:r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Nome"}),r.jsx(V,{children:"Cliente"}),r.jsx(V,{children:"Responsvel"}),r.jsx(V,{children:"Contato"}),r.jsx(V,{children:"Localizao"})]})}),r.jsx(Rt,{children:e.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:5,className:"text-center text-slate-500",children:"Nenhuma fazenda cadastrada"})}):e.map(l=>r.jsxs(ge,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>o(`/fazendas/${l.id}`),children:[r.jsx(L,{className:"font-medium text-green-600",children:l.nome}),r.jsx(L,{children:l.cliente_nome||"-"}),r.jsx(L,{children:l.responsavel||"-"}),r.jsx(L,{children:l.contato_responsavel||"-"}),r.jsx(L,{children:l.localizacao||"-"})]},l.id))})]})})]})]})}const PP=rl("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function st({className:e,variant:t,...a}){return r.jsx("div",{className:ye(PP({variant:t}),e),...a})}function LP(){const{id:e}=$r(),t=za(),{toast:a}=ea(),[s,n]=u.useState(!0),[o,i]=u.useState(null),[l,c]=u.useState(""),[d,f]=u.useState([]),[h,p]=u.useState([]),[m,j]=u.useState([]),[x,g]=u.useState([]),[b,v]=u.useState({total_ultimos_60_dias:0,sem_diagnostico:0});u.useEffect(()=>{e&&y()},[e]);const y=async()=>{try{n(!0);const{data:S,error:N}=await T.from("fazendas").select("*").eq("id",e).single();if(N)throw N;i(S);const{data:C,error:O}=await T.from("clientes").select("nome").eq("id",S.cliente_id).single();if(O)throw O;c(C.nome);const{data:A,error:q}=await T.from("protocolos_sincronizacao").select("id, data_inicio, data_retirada, status").eq("fazenda_id",e).eq("status","ABERTO").order("data_inicio",{ascending:!1});if(q)throw q;f(A||[]);try{const{data:K,error:H}=await T.from("v_protocolo_receptoras_status").select("*").in("protocolo_id",(A==null?void 0:A.map(ne=>ne.id))||[]).eq("fase_ciclo","SINCRONIZADA");!H&&K&&p(K.map(ne=>({brinco:ne.brinco,fase_ciclo:ne.fase_ciclo,status_efetivo:ne.status_efetivo,motivo_efetivo:ne.motivo_efetivo,data_te_prevista:ne.data_te_prevista,data_limite_te:ne.data_limite_te})))}catch{console.log("View v_protocolo_receptoras_status not available")}const{data:B,error:ee}=await T.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",e);if(ee)throw ee;const Q=(B==null?void 0:B.map(K=>K.receptora_id))||[],X=new Date;X.setDate(X.getDate()-60);const{data:R,error:Y}=await T.from("transferencias_embrioes").select("id, receptora_id, data_te").in("receptora_id",Q.length>0?Q:["00000000-0000-0000-0000-000000000000"]).gte("data_te",X.toISOString().split("T")[0]);if(Y)throw Y;const $=(R==null?void 0:R.length)||0;if(R&&R.length>0){const K=R.map(pe=>pe.receptora_id),{data:H,error:ne}=await T.from("diagnosticos_gestacao").select("receptora_id").in("receptora_id",K);if(!ne){const pe=new Set(H==null?void 0:H.map(P=>P.receptora_id)),k=R.filter(P=>!pe.has(P.receptora_id)).length;v({total_ultimos_60_dias:$,sem_diagnostico:k})}}const{data:E,error:D}=await T.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",e);if(!D&&E){const K=E.map(H=>H.receptora_id);if(K.length>0){const{data:H,error:ne}=await T.from("receptoras").select("id, identificacao, nome, status_reprodutivo").in("id",K).order("identificacao",{ascending:!0});ne||j((H==null?void 0:H.map(pe=>({receptora_id:pe.id,brinco:pe.identificacao,nome:pe.nome,status_reprodutivo:pe.status_reprodutivo})))||[])}else j([])}const{data:G,error:M}=await T.from("doadoras").select("*").eq("fazenda_id",e).order("registro",{ascending:!0});if(M)throw M;g(G||[])}catch(S){a({title:"Erro ao carregar dados",description:S instanceof Error?S.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},_=()=>o?o.latitude&&o.longitude?`https://www.google.com/maps?q=${o.latitude},${o.longitude}`:o.localizacao?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(o.localizacao)}`:null:null,w=()=>o?o.latitude&&o.longitude?`https://waze.com/ul?ll=${o.latitude},${o.longitude}&navigate=yes`:o.localizacao?_():null:null;return s?r.jsx(zt,{}):o?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>t("/fazendas"),children:r.jsx(es,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:o.nome}),r.jsxs("p",{className:"text-slate-600 mt-1",children:["Cliente: ",l]})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Informaes da Fazenda"})}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Nome"}),r.jsx("p",{className:"text-base text-slate-900",children:o.nome})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Cliente"}),r.jsx("p",{className:"text-base text-slate-900",children:l})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Localizao"}),r.jsx("p",{className:"text-base text-slate-900",children:o.localizacao||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Coordenadas"}),r.jsx("p",{className:"text-base text-slate-900",children:o.latitude&&o.longitude?`${o.latitude}, ${o.longitude}`:"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Responsvel"}),r.jsx("p",{className:"text-base text-slate-900",children:o.responsavel||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Contato"}),r.jsx("p",{className:"text-base text-slate-900",children:o.contato_responsavel||"-"})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[_()&&r.jsxs(U,{variant:"outline",onClick:()=>window.open(_(),"_blank"),children:[r.jsx(wv,{className:"w-4 h-4 mr-2"}),"Abrir no Google Maps"]}),w()&&r.jsxs(U,{variant:"outline",onClick:()=>window.open(w(),"_blank"),children:[r.jsx(Kj,{className:"w-4 h-4 mr-2"}),"Abrir no Waze"]})]})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Servios Ativos na Fazenda"})}),r.jsxs(we,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[r.jsx(Gj,{className:"w-5 h-5"}),"Protocolos em Andamento (",d.length,")"]}),d.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"Nenhum protocolo ativo"}):r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"ID"}),r.jsx(V,{children:"Data Incio"}),r.jsx(V,{children:"Data Retirada"}),r.jsx(V,{children:"Status"})]})}),r.jsx(Rt,{children:d.map(S=>r.jsxs(ge,{children:[r.jsx(L,{className:"font-mono text-xs",children:S.id.substring(0,8)}),r.jsx(L,{children:new Date(S.data_inicio).toLocaleDateString("pt-BR")}),r.jsx(L,{children:S.data_retirada?new Date(S.data_retirada).toLocaleDateString("pt-BR"):"-"}),r.jsx(L,{children:r.jsx(st,{variant:"default",children:S.status||"ABERTO"})})]},S.id))})]})]}),h.length>0&&r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-3",children:["Receptoras Sincronizadas Aguardando TE (",h.length,")"]}),r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Brinco"}),r.jsx(V,{children:"Fase"}),r.jsx(V,{children:"Status"}),r.jsx(V,{children:"Data TE Prevista"})]})}),r.jsx(Rt,{children:h.map((S,N)=>r.jsxs(ge,{children:[r.jsx(L,{className:"font-medium",children:S.brinco}),r.jsx(L,{children:S.fase_ciclo||"-"}),r.jsx(L,{children:S.status_efetivo||"-"}),r.jsx(L,{children:S.data_te_prevista?new Date(S.data_te_prevista).toLocaleDateString("pt-BR"):"-"})]},N))})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Transferncias Recentes"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(je,{children:r.jsxs(we,{className:"pt-6",children:[r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:b.total_ultimos_60_dias}),r.jsx("p",{className:"text-sm text-slate-500",children:"ltimos 60 dias"})]})}),r.jsx(je,{children:r.jsxs(we,{className:"pt-6",children:[r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:b.sem_diagnostico}),r.jsx("p",{className:"text-sm text-slate-500",children:"Aguardando diagnstico"})]})})]})]})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(Vj,{className:"w-5 h-5"}),"Receptoras da Fazenda (",m.length,")"]})}),r.jsx(we,{children:m.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"Nenhuma receptora vinculada"}):r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Brinco"}),r.jsx(V,{children:"Nome"}),r.jsx(V,{children:"Status Reprodutivo"})]})}),r.jsx(Rt,{children:m.map(S=>r.jsxs(ge,{children:[r.jsx(L,{className:"font-medium",children:S.brinco}),r.jsx(L,{children:S.nome||"-"}),r.jsx(L,{children:S.status_reprodutivo||"-"})]},S.receptora_id))})]})})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(ho,{className:"w-5 h-5"}),"Doadoras da Fazenda (",x.length,")"]})}),r.jsx(we,{children:x.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"Nenhuma doadora cadastrada"}):r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Registro"}),r.jsx(V,{children:"Nome"}),r.jsx(V,{children:"Raa"}),r.jsx(V,{children:"GPTA"}),r.jsx(V,{children:"Controle Leiteiro"}),r.jsx(V,{children:"Beta Casena"})]})}),r.jsx(Rt,{children:x.map(S=>r.jsxs(ge,{children:[r.jsx(L,{className:"font-medium",children:S.registro}),r.jsx(L,{children:S.nome||"-"}),r.jsx(L,{children:S.raca||"-"}),r.jsx(L,{children:S.gpta||"-"}),r.jsx(L,{children:S.controle_leiteiro||"-"}),r.jsx(L,{children:S.beta_caseina||"-"})]},S.id))})]})})]})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Fazenda no encontrada"}),r.jsx(U,{onClick:()=>t("/fazendas"),className:"mt-4",children:"Voltar para Fazendas"})]})}function ry(e,[t,a]){return Math.min(a,Math.max(t,e))}function jE(e){const t=u.useRef({value:e,previous:e});return u.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var IP=[" ","Enter","ArrowUp","ArrowDown"],FP=[" ","Enter"],_o="Select",[Df,Of,qP]=vv(_o),[ul,I5]=Os(_o,[qP,ll]),zf=ll(),[UP,In]=ul(_o),[BP,$P]=ul(_o),wE=e=>{const{__scopeSelect:t,children:a,open:s,defaultOpen:n,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:d,name:f,autoComplete:h,disabled:p,required:m,form:j}=e,x=zf(t),[g,b]=u.useState(null),[v,y]=u.useState(null),[_,w]=u.useState(!1),S=Cf(d),[N,C]=$s({prop:s,defaultProp:n??!1,onChange:o,caller:_o}),[O,A]=$s({prop:i,defaultProp:l,onChange:c,caller:_o}),q=u.useRef(null),B=g?j||!!g.closest("form"):!0,[ee,Q]=u.useState(new Set),X=Array.from(ee).map(R=>R.props.value).join(";");return r.jsx(Tw,{...x,children:r.jsxs(UP,{required:m,scope:t,trigger:g,onTriggerChange:b,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:_,onValueNodeHasChildrenChange:w,contentId:Dr(),value:O,onValueChange:A,open:N,onOpenChange:C,dir:S,triggerPointerDownPosRef:q,disabled:p,children:[r.jsx(Df.Provider,{scope:t,children:r.jsx(BP,{scope:e.__scopeSelect,onNativeOptionAdd:u.useCallback(R=>{Q(Y=>new Set(Y).add(R))},[]),onNativeOptionRemove:u.useCallback(R=>{Q(Y=>{const $=new Set(Y);return $.delete(R),$})},[]),children:a})}),B?r.jsxs(YE,{"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:h,value:O,onChange:R=>A(R.target.value),disabled:p,form:j,children:[O===void 0?r.jsx("option",{value:""}):null,Array.from(ee)]},X):null]})})};wE.displayName=_o;var SE="SelectTrigger",EE=u.forwardRef((e,t)=>{const{__scopeSelect:a,disabled:s=!1,...n}=e,o=zf(a),i=In(SE,a),l=i.disabled||s,c=vt(t,i.onTriggerChange),d=Of(a),f=u.useRef("touch"),[h,p,m]=KE(x=>{const g=d().filter(y=>!y.disabled),b=g.find(y=>y.value===i.value),v=XE(g,x,b);v!==void 0&&i.onValueChange(v.value)}),j=x=>{l||(i.onOpenChange(!0),m()),x&&(i.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return r.jsx(cf,{asChild:!0,...o,children:r.jsx(Be.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":QE(i.value)?"":void 0,...n,ref:c,onClick:De(n.onClick,x=>{x.currentTarget.focus(),f.current!=="mouse"&&j(x)}),onPointerDown:De(n.onPointerDown,x=>{f.current=x.pointerType;const g=x.target;g.hasPointerCapture(x.pointerId)&&g.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(j(x),x.preventDefault())}),onKeyDown:De(n.onKeyDown,x=>{const g=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&p(x.key),!(g&&x.key===" ")&&IP.includes(x.key)&&(j(),x.preventDefault())})})})});EE.displayName=SE;var NE="SelectValue",CE=u.forwardRef((e,t)=>{const{__scopeSelect:a,className:s,style:n,children:o,placeholder:i="",...l}=e,c=In(NE,a),{onValueNodeHasChildrenChange:d}=c,f=o!==void 0,h=vt(t,c.onValueNodeChange);return Oa(()=>{d(f)},[d,f]),r.jsx(Be.span,{...l,ref:h,style:{pointerEvents:"none"},children:QE(c.value)?r.jsx(r.Fragment,{children:i}):o})});CE.displayName=NE;var HP="SelectIcon",AE=u.forwardRef((e,t)=>{const{__scopeSelect:a,children:s,...n}=e;return r.jsx(Be.span,{"aria-hidden":!0,...n,ref:t,children:s||""})});AE.displayName=HP;var VP="SelectPortal",TE=e=>r.jsx(Lc,{asChild:!0,...e});TE.displayName=VP;var jo="SelectContent",RE=u.forwardRef((e,t)=>{const a=In(jo,e.__scopeSelect),[s,n]=u.useState();if(Oa(()=>{n(new DocumentFragment)},[]),!a.open){const o=s;return o?Ro.createPortal(r.jsx(DE,{scope:e.__scopeSelect,children:r.jsx(Df.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),o):null}return r.jsx(OE,{...e,ref:t})});RE.displayName=jo;var Ps=10,[DE,Fn]=ul(jo),GP="SelectContentImpl",YP=xo("SelectContent.RemoveScroll"),OE=u.forwardRef((e,t)=>{const{__scopeSelect:a,position:s="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:j,hideWhenDetached:x,avoidCollisions:g,...b}=e,v=In(jo,a),[y,_]=u.useState(null),[w,S]=u.useState(null),N=vt(t,k=>_(k)),[C,O]=u.useState(null),[A,q]=u.useState(null),B=Of(a),[ee,Q]=u.useState(!1),X=u.useRef(!1);u.useEffect(()=>{if(y)return Jv(y)},[y]),Zv();const R=u.useCallback(k=>{const[P,...ce]=B().map(oe=>oe.ref.current),[re]=ce.slice(-1),ie=document.activeElement;for(const oe of k)if(oe===ie||(oe==null||oe.scrollIntoView({block:"nearest"}),oe===P&&w&&(w.scrollTop=0),oe===re&&w&&(w.scrollTop=w.scrollHeight),oe==null||oe.focus(),document.activeElement!==ie))return},[B,w]),Y=u.useCallback(()=>R([C,y]),[R,C,y]);u.useEffect(()=>{ee&&Y()},[ee,Y]);const{onOpenChange:$,triggerPointerDownPosRef:E}=v;u.useEffect(()=>{if(y){let k={x:0,y:0};const P=re=>{var ie,oe;k={x:Math.abs(Math.round(re.pageX)-(((ie=E.current)==null?void 0:ie.x)??0)),y:Math.abs(Math.round(re.pageY)-(((oe=E.current)==null?void 0:oe.y)??0))}},ce=re=>{k.x<=10&&k.y<=10?re.preventDefault():y.contains(re.target)||$(!1),document.removeEventListener("pointermove",P),E.current=null};return E.current!==null&&(document.addEventListener("pointermove",P),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",ce,{capture:!0})}}},[y,$,E]),u.useEffect(()=>{const k=()=>$(!1);return window.addEventListener("blur",k),window.addEventListener("resize",k),()=>{window.removeEventListener("blur",k),window.removeEventListener("resize",k)}},[$]);const[D,G]=KE(k=>{const P=B().filter(ie=>!ie.disabled),ce=P.find(ie=>ie.ref.current===document.activeElement),re=XE(P,k,ce);re&&setTimeout(()=>re.ref.current.focus())}),M=u.useCallback((k,P,ce)=>{const re=!X.current&&!ce;(v.value!==void 0&&v.value===P||re)&&(O(k),re&&(X.current=!0))},[v.value]),K=u.useCallback(()=>y==null?void 0:y.focus(),[y]),H=u.useCallback((k,P,ce)=>{const re=!X.current&&!ce;(v.value!==void 0&&v.value===P||re)&&q(k)},[v.value]),ne=s==="popper"?dp:zE,pe=ne===dp?{side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:j,hideWhenDetached:x,avoidCollisions:g}:{};return r.jsx(DE,{scope:a,content:y,viewport:w,onViewportChange:S,itemRefCallback:M,selectedItem:C,onItemLeave:K,itemTextRefCallback:H,focusSelectedItem:Y,selectedItemText:A,position:s,isPositioned:ee,searchRef:D,children:r.jsx(Sf,{as:YP,allowPinchZoom:!0,children:r.jsx(jf,{asChild:!0,trapped:v.open,onMountAutoFocus:k=>{k.preventDefault()},onUnmountAutoFocus:De(n,k=>{var P;(P=v.trigger)==null||P.focus({preventScroll:!0}),k.preventDefault()}),children:r.jsx(sl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:k=>k.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:r.jsx(ne,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:k=>k.preventDefault(),...b,...pe,onPlaced:()=>Q(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:De(b.onKeyDown,k=>{const P=k.ctrlKey||k.altKey||k.metaKey;if(k.key==="Tab"&&k.preventDefault(),!P&&k.key.length===1&&G(k.key),["ArrowUp","ArrowDown","Home","End"].includes(k.key)){let re=B().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(k.key)&&(re=re.slice().reverse()),["ArrowUp","ArrowDown"].includes(k.key)){const ie=k.target,oe=re.indexOf(ie);re=re.slice(oe+1)}setTimeout(()=>R(re)),k.preventDefault()}})})})})})})});OE.displayName=GP;var QP="SelectItemAlignedPosition",zE=u.forwardRef((e,t)=>{const{__scopeSelect:a,onPlaced:s,...n}=e,o=In(jo,a),i=Fn(jo,a),[l,c]=u.useState(null),[d,f]=u.useState(null),h=vt(t,N=>f(N)),p=Of(a),m=u.useRef(!1),j=u.useRef(!0),{viewport:x,selectedItem:g,selectedItemText:b,focusSelectedItem:v}=i,y=u.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&x&&g&&b){const N=o.trigger.getBoundingClientRect(),C=d.getBoundingClientRect(),O=o.valueNode.getBoundingClientRect(),A=b.getBoundingClientRect();if(o.dir!=="rtl"){const ie=A.left-C.left,oe=O.left-ie,he=N.left-oe,Te=N.width+he,Pe=Math.max(Te,C.width),Fe=window.innerWidth-Ps,J=ry(oe,[Ps,Math.max(Ps,Fe-Pe)]);l.style.minWidth=Te+"px",l.style.left=J+"px"}else{const ie=C.right-A.right,oe=window.innerWidth-O.right-ie,he=window.innerWidth-N.right-oe,Te=N.width+he,Pe=Math.max(Te,C.width),Fe=window.innerWidth-Ps,J=ry(oe,[Ps,Math.max(Ps,Fe-Pe)]);l.style.minWidth=Te+"px",l.style.right=J+"px"}const q=p(),B=window.innerHeight-Ps*2,ee=x.scrollHeight,Q=window.getComputedStyle(d),X=parseInt(Q.borderTopWidth,10),R=parseInt(Q.paddingTop,10),Y=parseInt(Q.borderBottomWidth,10),$=parseInt(Q.paddingBottom,10),E=X+R+ee+$+Y,D=Math.min(g.offsetHeight*5,E),G=window.getComputedStyle(x),M=parseInt(G.paddingTop,10),K=parseInt(G.paddingBottom,10),H=N.top+N.height/2-Ps,ne=B-H,pe=g.offsetHeight/2,k=g.offsetTop+pe,P=X+R+k,ce=E-P;if(P<=H){const ie=q.length>0&&g===q[q.length-1].ref.current;l.style.bottom="0px";const oe=d.clientHeight-x.offsetTop-x.offsetHeight,he=Math.max(ne,pe+(ie?K:0)+oe+Y),Te=P+he;l.style.height=Te+"px"}else{const ie=q.length>0&&g===q[0].ref.current;l.style.top="0px";const he=Math.max(H,X+x.offsetTop+(ie?M:0)+pe)+ce;l.style.height=he+"px",x.scrollTop=P-H+x.offsetTop}l.style.margin=`${Ps}px 0`,l.style.minHeight=D+"px",l.style.maxHeight=B+"px",s==null||s(),requestAnimationFrame(()=>m.current=!0)}},[p,o.trigger,o.valueNode,l,d,x,g,b,o.dir,s]);Oa(()=>y(),[y]);const[_,w]=u.useState();Oa(()=>{d&&w(window.getComputedStyle(d).zIndex)},[d]);const S=u.useCallback(N=>{N&&j.current===!0&&(y(),v==null||v(),j.current=!1)},[y,v]);return r.jsx(XP,{scope:a,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:r.jsx(Be.div,{...n,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});zE.displayName=QP;var KP="SelectPopperPosition",dp=u.forwardRef((e,t)=>{const{__scopeSelect:a,align:s="start",collisionPadding:n=Ps,...o}=e,i=zf(a);return r.jsx(Lv,{...i,...o,ref:t,align:s,collisionPadding:n,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});dp.displayName=KP;var[XP,ng]=ul(jo,{}),up="SelectViewport",ME=u.forwardRef((e,t)=>{const{__scopeSelect:a,nonce:s,...n}=e,o=Fn(up,a),i=ng(up,a),l=vt(t,o.onViewportChange),c=u.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(Df.Slot,{scope:a,children:r.jsx(Be.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:De(n.onScroll,d=>{const f=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=i;if(p!=null&&p.current&&h){const m=Math.abs(c.current-f.scrollTop);if(m>0){const j=window.innerHeight-Ps*2,x=parseFloat(h.style.minHeight),g=parseFloat(h.style.height),b=Math.max(x,g);if(b<j){const v=b+m,y=Math.min(j,v),_=v-y;h.style.height=y+"px",h.style.bottom==="0px"&&(f.scrollTop=_>0?_:0,h.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});ME.displayName=up;var kE="SelectGroup",[ZP,JP]=ul(kE),WP=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e,n=Dr();return r.jsx(ZP,{scope:a,id:n,children:r.jsx(Be.div,{role:"group","aria-labelledby":n,...s,ref:t})})});WP.displayName=kE;var PE="SelectLabel",LE=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e,n=JP(PE,a);return r.jsx(Be.div,{id:n.id,...s,ref:t})});LE.displayName=PE;var ku="SelectItem",[e6,IE]=ul(ku),FE=u.forwardRef((e,t)=>{const{__scopeSelect:a,value:s,disabled:n=!1,textValue:o,...i}=e,l=In(ku,a),c=Fn(ku,a),d=l.value===s,[f,h]=u.useState(o??""),[p,m]=u.useState(!1),j=vt(t,v=>{var y;return(y=c.itemRefCallback)==null?void 0:y.call(c,v,s,n)}),x=Dr(),g=u.useRef("touch"),b=()=>{n||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(e6,{scope:a,value:s,disabled:n,textId:x,isSelected:d,onItemTextChange:u.useCallback(v=>{h(y=>y||((v==null?void 0:v.textContent)??"").trim())},[]),children:r.jsx(Df.ItemSlot,{scope:a,value:s,disabled:n,textValue:f,children:r.jsx(Be.div,{role:"option","aria-labelledby":x,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...i,ref:j,onFocus:De(i.onFocus,()=>m(!0)),onBlur:De(i.onBlur,()=>m(!1)),onClick:De(i.onClick,()=>{g.current!=="mouse"&&b()}),onPointerUp:De(i.onPointerUp,()=>{g.current==="mouse"&&b()}),onPointerDown:De(i.onPointerDown,v=>{g.current=v.pointerType}),onPointerMove:De(i.onPointerMove,v=>{var y;g.current=v.pointerType,n?(y=c.onItemLeave)==null||y.call(c):g.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:De(i.onPointerLeave,v=>{var y;v.currentTarget===document.activeElement&&((y=c.onItemLeave)==null||y.call(c))}),onKeyDown:De(i.onKeyDown,v=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&v.key===" "||(FP.includes(v.key)&&b(),v.key===" "&&v.preventDefault())})})})})});FE.displayName=ku;var Rl="SelectItemText",qE=u.forwardRef((e,t)=>{const{__scopeSelect:a,className:s,style:n,...o}=e,i=In(Rl,a),l=Fn(Rl,a),c=IE(Rl,a),d=$P(Rl,a),[f,h]=u.useState(null),p=vt(t,b=>h(b),c.onItemTextChange,b=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,b,c.value,c.disabled)}),m=f==null?void 0:f.textContent,j=u.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:x,onNativeOptionRemove:g}=d;return Oa(()=>(x(j),()=>g(j)),[x,g,j]),r.jsxs(r.Fragment,{children:[r.jsx(Be.span,{id:c.textId,...o,ref:p}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Ro.createPortal(o.children,i.valueNode):null]})});qE.displayName=Rl;var UE="SelectItemIndicator",BE=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e;return IE(UE,a).isSelected?r.jsx(Be.span,{"aria-hidden":!0,...s,ref:t}):null});BE.displayName=UE;var fp="SelectScrollUpButton",$E=u.forwardRef((e,t)=>{const a=Fn(fp,e.__scopeSelect),s=ng(fp,e.__scopeSelect),[n,o]=u.useState(!1),i=vt(t,s.onScrollButtonChange);return Oa(()=>{if(a.viewport&&a.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=a.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[a.viewport,a.isPositioned]),n?r.jsx(VE,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=a;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});$E.displayName=fp;var hp="SelectScrollDownButton",HE=u.forwardRef((e,t)=>{const a=Fn(hp,e.__scopeSelect),s=ng(hp,e.__scopeSelect),[n,o]=u.useState(!1),i=vt(t,s.onScrollButtonChange);return Oa(()=>{if(a.viewport&&a.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<d;o(f)};const c=a.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[a.viewport,a.isPositioned]),n?r.jsx(VE,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=a;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});HE.displayName=hp;var VE=u.forwardRef((e,t)=>{const{__scopeSelect:a,onAutoScroll:s,...n}=e,o=Fn("SelectScrollButton",a),i=u.useRef(null),l=Of(a),c=u.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return u.useEffect(()=>()=>c(),[c]),Oa(()=>{var f;const d=l().find(h=>h.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),r.jsx(Be.div,{"aria-hidden":!0,...n,ref:t,style:{flexShrink:0,...n.style},onPointerDown:De(n.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(s,50))}),onPointerMove:De(n.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),i.current===null&&(i.current=window.setInterval(s,50))}),onPointerLeave:De(n.onPointerLeave,()=>{c()})})}),t6="SelectSeparator",GE=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e;return r.jsx(Be.div,{"aria-hidden":!0,...s,ref:t})});GE.displayName=t6;var mp="SelectArrow",a6=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e,n=zf(a),o=In(mp,a),i=Fn(mp,a);return o.open&&i.position==="popper"?r.jsx(Iv,{...n,...s,ref:t}):null});a6.displayName=mp;var s6="SelectBubbleInput",YE=u.forwardRef(({__scopeSelect:e,value:t,...a},s)=>{const n=u.useRef(null),o=vt(s,n),i=jE(t);return u.useEffect(()=>{const l=n.current;if(!l)return;const c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&f){const h=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(h)}},[i,t]),r.jsx(Be.select,{...a,style:{..._j,...a.style},ref:o,defaultValue:t})});YE.displayName=s6;function QE(e){return e===""||e===void 0}function KE(e){const t=Ts(e),a=u.useRef(""),s=u.useRef(0),n=u.useCallback(i=>{const l=a.current+i;t(l),function c(d){a.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=u.useCallback(()=>{a.current="",window.clearTimeout(s.current)},[]);return u.useEffect(()=>()=>window.clearTimeout(s.current),[]),[a,n,o]}function XE(e,t,a){const n=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=a?e.indexOf(a):-1;let i=r6(e,Math.max(o,0));n.length===1&&(i=i.filter(d=>d!==a));const c=i.find(d=>d.textValue.toLowerCase().startsWith(n.toLowerCase()));return c!==a?c:void 0}function r6(e,t){return e.map((a,s)=>e[(t+s)%e.length])}var n6=wE,ZE=EE,o6=CE,i6=AE,l6=TE,JE=RE,c6=ME,WE=LE,eN=FE,d6=qE,u6=BE,tN=$E,aN=HE,sN=GE;const Ze=n6,Je=o6,Ye=u.forwardRef(({className:e,children:t,...a},s)=>r.jsxs(ZE,{ref:s,className:ye("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,r.jsx(i6,{asChild:!0,children:r.jsx(_v,{className:"h-4 w-4 opacity-50"})})]}));Ye.displayName=ZE.displayName;const rN=u.forwardRef(({className:e,...t},a)=>r.jsx(tN,{ref:a,className:ye("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(Yj,{className:"h-4 w-4"})}));rN.displayName=tN.displayName;const nN=u.forwardRef(({className:e,...t},a)=>r.jsx(aN,{ref:a,className:ye("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(_v,{className:"h-4 w-4"})}));nN.displayName=aN.displayName;const Qe=u.forwardRef(({className:e,children:t,position:a="popper",...s},n)=>r.jsx(l6,{children:r.jsxs(JE,{ref:n,className:ye("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...s,children:[r.jsx(rN,{}),r.jsx(c6,{className:ye("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(nN,{})]})}));Qe.displayName=JE.displayName;const f6=u.forwardRef(({className:e,...t},a)=>r.jsx(WE,{ref:a,className:ye("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));f6.displayName=WE.displayName;const ve=u.forwardRef(({className:e,children:t,...a},s)=>r.jsxs(eN,{ref:s,className:ye("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(u6,{children:r.jsx(ju,{className:"h-4 w-4"})})}),r.jsx(d6,{children:t})]}));ve.displayName=eN.displayName;const h6=u.forwardRef(({className:e,...t},a)=>r.jsx(sN,{ref:a,className:ye("-mx-1 my-1 h-px bg-muted",e),...t}));h6.displayName=sN.displayName;function m6({doadoraId:e,doadoraNome:t,open:a,onClose:s}){const[n,o]=u.useState([]),[i,l]=u.useState(!1),{toast:c}=ea();u.useEffect(()=>{a&&e&&d()},[a,e]);const d=async()=>{try{l(!0);const{data:f,error:h}=await T.from("aspiracoes_doadoras").select("*").eq("doadora_id",e).order("data_aspiracao",{ascending:!1});if(h)throw h;o(f||[])}catch(f){c({title:"Erro ao carregar histrico",description:f instanceof Error?f.message:"Erro desconhecido",variant:"destructive"})}finally{l(!1)}};return r.jsx(Dt,{open:a,onOpenChange:s,children:r.jsxs(_t,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Histrico de Aspiraes"}),r.jsx(Ot,{children:t?`Aspiraes da doadora: ${t}`:"Histrico completo de aspiraes"})]}),i?r.jsx("div",{className:"py-8",children:r.jsx(zt,{})}):r.jsx("div",{className:"mt-4",children:n.length===0?r.jsx("p",{className:"text-center text-slate-500 py-8",children:"Nenhuma aspirao registrada para esta doadora"}):r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Data"}),r.jsx(V,{children:"Quantidade de Ocitos"}),r.jsx(V,{children:"Veterinrio"}),r.jsx(V,{children:"Tcnico"})]})}),r.jsx(Rt,{children:n.map(f=>r.jsxs(ge,{children:[r.jsx(L,{children:Kt(f.data_aspiracao)}),r.jsx(L,{className:"font-medium",children:f.total_oocitos??"-"}),r.jsx(L,{children:f.veterinario_responsavel||"-"}),r.jsx(L,{children:f.tecnico_responsavel||"-"})]},f.id))})]})})]})})}function p6(){var Y,$;const e=za(),[t,a]=u.useState([]),[s,n]=u.useState([]),[o,i]=u.useState(null),[l,c]=u.useState([]),[d,f]=u.useState(""),[h,p]=u.useState(""),[m,j]=u.useState(!0),[x,g]=u.useState(!1),[b,v]=u.useState(!1),{toast:y}=ea(),[_,w]=u.useState({registro:"",raca:"",racaCustom:""}),S=["Holandesa","Jersey","Gir","Girolando"],[N,C]=u.useState("");u.useEffect(()=>{A()},[]),u.useEffect(()=>{d?q():(a([]),n([]))},[d]),u.useEffect(()=>{O()},[h,t]);const O=()=>{if(!h.trim()){n(t);return}const E=h.toLowerCase(),D=t.filter(G=>{var M,K,H;return((M=G.nome)==null?void 0:M.toLowerCase().includes(E))||((K=G.registro)==null?void 0:K.toLowerCase().includes(E))||((H=G.raca)==null?void 0:H.toLowerCase().includes(E))});n(D)},A=async()=>{try{j(!0);const{data:E,error:D}=await T.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(D)throw D;c(E||[])}catch(E){y({title:"Erro ao carregar fazendas",description:E instanceof Error?E.message:"Erro desconhecido",variant:"destructive"})}finally{j(!1)}},q=async()=>{try{j(!0);const{data:E,error:D}=await T.from("doadoras").select("*").eq("fazenda_id",d).order("created_at",{ascending:!1});if(D)throw D;const G=await Promise.all((E||[]).map(async M=>{const{data:K,error:H}=await T.from("aspiracoes_doadoras").select("total_oocitos, data_aspiracao").eq("doadora_id",M.id).order("data_aspiracao",{ascending:!1}).limit(1).maybeSingle();return H||!K?{...M,ultima_aspiracao_total_oocitos:void 0,ultima_aspiracao_data:void 0}:{...M,ultima_aspiracao_total_oocitos:K.total_oocitos,ultima_aspiracao_data:K.data_aspiracao}}));a(G),n(G)}catch(E){y({title:"Erro ao carregar doadoras",description:E instanceof Error?E.message:"Erro desconhecido",variant:"destructive"})}finally{j(!1)}},B=E=>{if(!E)return"-";switch(E){case"1_estrela":return r.jsx("div",{className:"flex items-center gap-1",children:r.jsx(qo,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})});case"2_estrelas":return r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(qo,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),r.jsx(qo,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})]});case"3_estrelas":return r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(qo,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),r.jsx(qo,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),r.jsx(qo,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})]});case"diamante":return r.jsx("div",{className:"flex items-center gap-1",children:r.jsx($T,{className:"w-4 h-4 fill-blue-500 text-blue-500"})});default:return"-"}},ee=E=>{if(E.raca==="Gir"){const D=[];return E.gpta&&D.push(`GPTA: ${E.gpta}`),E.controle_leiteiro&&D.push(`Controle Leiteiro: ${E.controle_leiteiro}`),E.beta_caseina&&D.push(`Beta Casena: ${E.beta_caseina}`),E.link_abcz&&D.push("Link ABCZ"),D.length>0?D.join(", "):null}return null},Q=()=>{w({registro:"",raca:"",racaCustom:""}),C("")},X=async E=>{if(E.preventDefault(),!d){y({title:"Erro de validao",description:"Selecione a fazenda primeiro",variant:"destructive"});return}if(!_.registro.trim()){y({title:"Erro de validao",description:"Registro  obrigatrio",variant:"destructive"});return}if(!(N==="Outra"?_.racaCustom.trim():_.raca.trim())){y({title:"Erro de validao",description:"Raa  obrigatria",variant:"destructive"});return}try{v(!0);const G=N==="Outra"?_.racaCustom.trim():_.raca.trim(),M={fazenda_id:d,registro:_.registro.trim(),raca:G},{data:K,error:H}=await T.from("doadoras").insert([M]).select().single();if(H)throw H;y({title:"Doadora criada",description:"Doadora criada com sucesso"}),g(!1),Q(),q(),K!=null&&K.id&&e(`/doadoras/${K.id}`)}catch(G){const M=G instanceof Error?G.message:"Erro desconhecido";y({title:"Erro ao criar doadora",description:M.includes("RLS")||M.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":M,variant:"destructive"})}finally{v(!1)}},R=E=>{g(E),E||Q()};return m&&l.length===0?r.jsx(zt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Doadoras"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar doadoras do sistema"})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Selecione a Fazenda"})}),r.jsx(we,{children:r.jsxs(Ze,{value:d,onValueChange:f,children:[r.jsx(Ye,{className:"w-full",children:r.jsx(Je,{placeholder:"Selecione uma fazenda para visualizar doadoras"})}),r.jsx(Qe,{children:l.map(E=>r.jsx(ve,{value:E.id,children:E.nome},E.id))})]})})]}),d?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-4 flex-1",children:r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Sv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),r.jsx(se,{placeholder:"Buscar por nome ou registro...",value:h,onChange:E=>p(E.target.value),className:"pl-10"})]})}),r.jsxs(Dt,{open:x,onOpenChange:R,children:[r.jsx(Ds,{asChild:!0,children:r.jsxs(U,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ts,{className:"w-4 h-4 mr-2"}),"Nova Doadora"]})}),r.jsxs(_t,{className:"max-w-md",children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Criar Nova Doadora"}),r.jsx(Ot,{children:"Preencha os campos bsicos. As informaes detalhadas podem ser preenchidas aps a criao."})]}),r.jsxs("form",{onSubmit:X,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"registro",children:"Registro *"}),r.jsx(se,{id:"registro",value:_.registro,onChange:E=>w({..._,registro:E.target.value}),placeholder:"Registro da doadora",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"raca",children:"Raa *"}),r.jsxs(Ze,{value:N,onValueChange:E=>{C(E),w(E==="Outra"?{..._,raca:"",racaCustom:""}:{..._,raca:E,racaCustom:""})},children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione a raa"})}),r.jsxs(Qe,{children:[S.map(E=>r.jsx(ve,{value:E,children:E},E)),r.jsx(ve,{value:"Outra",children:"Outra"})]})]}),N==="Outra"&&r.jsx(se,{id:"raca_custom",value:_.racaCustom,onChange:E=>w({..._,racaCustom:E.target.value,raca:E.target.value}),placeholder:"Digite a raa",className:"mt-2",required:!0})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(U,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:b,children:b?"Salvando...":"Criar Doadora"}),r.jsx(U,{type:"button",variant:"outline",onClick:()=>R(!1),disabled:b,children:"Cancelar"})]})]})]})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Lista de Doadoras"})}),r.jsx(we,{children:m?r.jsx("div",{className:"py-8",children:r.jsx(zt,{})}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Registro"}),r.jsx(V,{children:"Nome"}),r.jsx(V,{children:"ltima Aspirao"}),r.jsx(V,{children:"Ocitos"}),r.jsx(V,{children:"Estado"}),r.jsx(V,{children:"Raa (Campos Especiais)"}),r.jsx(V,{children:"Classificao"}),r.jsx(V,{className:"text-right",children:"Aes"})]})}),r.jsx(Rt,{children:s.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:8,className:"text-center text-slate-500",children:h?"Nenhuma doadora encontrada":"Nenhuma doadora cadastrada nesta fazenda"})}):s.map(E=>{const D=ee(E);return r.jsxs(ge,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>e(`/doadoras/${E.id}`),children:[r.jsx(L,{className:"font-medium",children:E.registro}),r.jsx(L,{children:E.nome||"-"}),r.jsx(L,{children:E.ultima_aspiracao_data?Kt(E.ultima_aspiracao_data):"-"}),r.jsx(L,{children:E.ultima_aspiracao_total_oocitos??"-"}),r.jsx(L,{children:r.jsx(st,{variant:E.disponivel_aspiracao?"default":"secondary",children:E.disponivel_aspiracao?"Disponvel":"Indisponvel"})}),r.jsx(L,{children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:E.raca||"-"}),D&&r.jsx("span",{className:"text-xs text-slate-500",children:D})]})}),r.jsx(L,{children:B(E.classificacao_genetica)}),r.jsx(L,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:G=>{G.stopPropagation(),i(E.id)},title:"Ver histrico de aspiraes",children:r.jsx(jv,{className:"w-4 h-4"})}),r.jsx(U,{variant:"ghost",size:"sm",onClick:G=>{G.stopPropagation(),e(`/doadoras/${E.id}`)},title:"Editar doadora",children:r.jsx(GT,{className:"w-4 h-4"})})]})})]},E.id)})})]})})})]}),o&&r.jsx(m6,{doadoraId:o,doadoraNome:((Y=s.find(E=>E.id===o))==null?void 0:Y.nome)||(($=s.find(E=>E.id===o))==null?void 0:$.registro),open:!!o,onClose:()=>i(null)})]}):r.jsx(je,{children:r.jsx(we,{className:"py-12 text-center",children:r.jsx("p",{className:"text-slate-500",children:"Selecione uma fazenda para visualizar e gerenciar doadoras"})})})]})}var Mf="Switch",[v6,F5]=Os(Mf),[g6,x6]=v6(Mf),oN=u.forwardRef((e,t)=>{const{__scopeSwitch:a,name:s,checked:n,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:d,form:f,...h}=e,[p,m]=u.useState(null),j=vt(t,y=>m(y)),x=u.useRef(!1),g=p?f||!!p.closest("form"):!0,[b,v]=$s({prop:n,defaultProp:o??!1,onChange:d,caller:Mf});return r.jsxs(g6,{scope:a,checked:b,disabled:l,children:[r.jsx(Be.button,{type:"button",role:"switch","aria-checked":b,"aria-required":i,"data-state":dN(b),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:j,onClick:De(e.onClick,y=>{v(_=>!_),g&&(x.current=y.isPropagationStopped(),x.current||y.stopPropagation())})}),g&&r.jsx(cN,{control:p,bubbles:!x.current,name:s,value:c,checked:b,required:i,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});oN.displayName=Mf;var iN="SwitchThumb",lN=u.forwardRef((e,t)=>{const{__scopeSwitch:a,...s}=e,n=x6(iN,a);return r.jsx(Be.span,{"data-state":dN(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:t})});lN.displayName=iN;var y6="SwitchBubbleInput",cN=u.forwardRef(({__scopeSwitch:e,control:t,checked:a,bubbles:s=!0,...n},o)=>{const i=u.useRef(null),l=vt(i,o),c=jE(a),d=yw(t);return u.useEffect(()=>{const f=i.current;if(!f)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==a&&m){const j=new Event("click",{bubbles:s});m.call(f,a),f.dispatchEvent(j)}},[c,a,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:l,style:{...n.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});cN.displayName=y6;function dN(e){return e?"checked":"unchecked"}var uN=oN,b6=lN;const fN=u.forwardRef(({className:e,...t},a)=>r.jsx(uN,{className:ye("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:a,children:r.jsx(b6,{className:ye("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));fN.displayName=uN.displayName;function _6({value:e,onChange:t,doadoraNome:a,doadoraRegistro:s}){const n=(o,i,l)=>{t({...e,[o]:{...e[o],[i]:l}})};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Genealogia"}),r.jsx("div",{className:"bg-slate-50 rounded-lg p-6 border border-slate-200",children:r.jsxs("div",{className:"flex flex-col items-center gap-6",children:[r.jsx("div",{className:"flex flex-col items-center",children:r.jsxs("div",{className:"bg-white border-2 border-slate-400 rounded-lg p-4 shadow-sm min-w-[200px] text-center",children:[r.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-1",children:a||"Doadora"}),r.jsx("div",{className:"text-xs text-slate-600",children:s||"REGISTRO"})]})}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-3 shadow-sm min-w-[180px]",children:[r.jsx(F,{className:"text-xs text-blue-700 font-medium mb-2 block",children:"Pai"}),r.jsx(se,{placeholder:"Nome",value:e.pai.nome,onChange:o=>n("pai","nome",o.target.value),className:"mb-2 text-sm"}),r.jsx(se,{placeholder:"Registro",value:e.pai.registro,onChange:o=>n("pai","registro",o.target.value),className:"text-xs"})]}),r.jsxs("div",{className:"bg-white border-2 border-red-500 rounded-lg p-3 shadow-sm min-w-[180px]",children:[r.jsx(F,{className:"text-xs text-red-700 font-medium mb-2 block",children:"Me"}),r.jsx(se,{placeholder:"Nome",value:e.mae.nome,onChange:o=>n("mae","nome",o.target.value),className:"mb-2 text-sm"}),r.jsx(se,{placeholder:"Registro",value:e.mae.registro,onChange:o=>n("mae","registro",o.target.value),className:"text-xs"})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-3 shadow-sm min-w-[160px]",children:[r.jsx(F,{className:"text-xs text-blue-700 font-medium mb-2 block",children:"Av Paterno"}),r.jsx(se,{placeholder:"Nome",value:e.pai_pai.nome,onChange:o=>n("pai_pai","nome",o.target.value),className:"mb-2 text-xs"}),r.jsx(se,{placeholder:"Registro",value:e.pai_pai.registro,onChange:o=>n("pai_pai","registro",o.target.value),className:"text-xs"})]}),r.jsxs("div",{className:"bg-white border-2 border-red-500 rounded-lg p-3 shadow-sm min-w-[160px]",children:[r.jsx(F,{className:"text-xs text-red-700 font-medium mb-2 block",children:"Av Paterna"}),r.jsx(se,{placeholder:"Nome",value:e.pai_mae.nome,onChange:o=>n("pai_mae","nome",o.target.value),className:"mb-2 text-xs"}),r.jsx(se,{placeholder:"Registro",value:e.pai_mae.registro,onChange:o=>n("pai_mae","registro",o.target.value),className:"text-xs"})]}),r.jsxs("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-3 shadow-sm min-w-[160px]",children:[r.jsx(F,{className:"text-xs text-blue-700 font-medium mb-2 block",children:"Av Materno"}),r.jsx(se,{placeholder:"Nome",value:e.mae_pai.nome,onChange:o=>n("mae_pai","nome",o.target.value),className:"mb-2 text-xs"}),r.jsx(se,{placeholder:"Registro",value:e.mae_pai.registro,onChange:o=>n("mae_pai","registro",o.target.value),className:"text-xs"})]}),r.jsxs("div",{className:"bg-white border-2 border-red-500 rounded-lg p-3 shadow-sm min-w-[160px]",children:[r.jsx(F,{className:"text-xs text-red-700 font-medium mb-2 block",children:"Av Materna"}),r.jsx(se,{placeholder:"Nome",value:e.mae_mae.nome,onChange:o=>n("mae_mae","nome",o.target.value),className:"mb-2 text-xs"}),r.jsx(se,{placeholder:"Registro",value:e.mae_mae.registro,onChange:o=>n("mae_mae","registro",o.target.value),className:"text-xs"})]})]})]})})]})}function j6(){const{id:e}=$r(),t=za(),{toast:a}=ea(),[s,n]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(null),h=["Holandesa","Jersey","Gir","Girolando"],[p,m]=u.useState(""),[j,x]=u.useState({registro:"",nome:"",raca:"",racaCustom:"",genealogia_texto:"",foto_url:"",gpta:"",controle_leiteiro:"",beta_caseina:"",link_abcz:"",disponivel_aspiracao:!0,classificacao_genetica:""}),[g,b]=u.useState({pai:{nome:"",registro:""},mae:{nome:"",registro:""},pai_pai:{nome:"",registro:""},pai_mae:{nome:"",registro:""},mae_pai:{nome:"",registro:""},mae_mae:{nome:"",registro:""}});u.useEffect(()=>{e&&v()},[e]);const v=async()=>{var _,w;try{n(!0);const{data:S,error:N}=await T.from("doadoras").select("*").eq("id",e).single();if(N)throw N;if(c(S),S.fazenda_id){const{data:B,error:ee}=await T.from("fazendas").select("*").eq("id",S.fazenda_id).single();if(ee)throw ee;f(B)}const C=S.raca||"",O=h.includes(C);m(O?C:"Outra");let A={pai:{nome:S.pai_nome||"",registro:S.pai_registro||""},mae:{nome:S.mae_nome||"",registro:S.mae_registro||""},pai_pai:{nome:"",registro:""},pai_mae:{nome:"",registro:""},mae_pai:{nome:"",registro:""},mae_mae:{nome:"",registro:""}},q=S.genealogia_texto||"";if(q.includes("[GENEALOGIA_JSON]"))try{const B=q.match(/\[GENEALOGIA_JSON\](.*?)\[\/GENEALOGIA_JSON\]/s);if(B){const ee=JSON.parse(B[1]);A={pai:ee.pai||A.pai,mae:ee.mae||A.mae,pai_pai:ee.pai_pai||A.pai_pai,pai_mae:ee.pai_mae||A.pai_mae,mae_pai:ee.mae_pai||A.mae_pai,mae_mae:ee.mae_mae||A.mae_mae},q=q.replace(/\[GENEALOGIA_JSON\].*?\[\/GENEALOGIA_JSON\]/s,"").trim()}}catch(B){console.warn("Erro ao parsear genealogia JSON:",B)}x({registro:S.registro||"",nome:S.nome||"",raca:O?C:"",racaCustom:O?"":C,genealogia_texto:q,foto_url:S.foto_url||"",gpta:((_=S.gpta)==null?void 0:_.toString())||"",controle_leiteiro:((w=S.controle_leiteiro)==null?void 0:w.toString())||"",beta_caseina:S.beta_caseina||"",link_abcz:S.link_abcz||"",disponivel_aspiracao:S.disponivel_aspiracao??!0,classificacao_genetica:S.classificacao_genetica||""}),b(A)}catch(S){a({title:"Erro ao carregar dados",description:S instanceof Error?S.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},y=async _=>{if(_.preventDefault(),!j.registro.trim()){a({title:"Erro de validao",description:"Registro  obrigatrio",variant:"destructive"});return}if(!(p==="Outra"?j.racaCustom.trim():j.raca.trim())){a({title:"Erro de validao",description:"Raa  obrigatria",variant:"destructive"});return}try{i(!0);const S=p==="Outra"?j.racaCustom.trim():j.raca.trim(),N={registro:j.registro.trim(),nome:j.nome.trim()||null,raca:S,pai_registro:g.pai.registro.trim()||null,pai_nome:g.pai.nome.trim()||null,mae_registro:g.mae.registro.trim()||null,mae_nome:g.mae.nome.trim()||null,foto_url:j.foto_url.trim()||null,gpta:j.gpta?parseFloat(j.gpta):null,controle_leiteiro:j.controle_leiteiro?parseFloat(j.controle_leiteiro):null,beta_caseina:j.beta_caseina.trim()||null,link_abcz:j.link_abcz.trim()||null,disponivel_aspiracao:j.disponivel_aspiracao,classificacao_genetica:j.classificacao_genetica||null},C={pai:g.pai,mae:g.mae,pai_pai:g.pai_pai,pai_mae:g.pai_mae,mae_pai:g.mae_pai,mae_mae:g.mae_mae};if(Object.values(C).some(q=>q.nome.trim()||q.registro.trim())){const q=JSON.stringify(C);N.genealogia_texto=j.genealogia_texto.trim()?`${j.genealogia_texto}

[GENEALOGIA_JSON]${q}[/GENEALOGIA_JSON]`:`[GENEALOGIA_JSON]${q}[/GENEALOGIA_JSON]`}else N.genealogia_texto=j.genealogia_texto.trim()||null;const{error:A}=await T.from("doadoras").update(N).eq("id",e);if(A)throw A;a({title:"Doadora atualizada",description:"Doadora atualizada com sucesso"}),v()}catch(S){const N=S instanceof Error?S.message:"Erro desconhecido";a({title:"Erro ao atualizar doadora",description:N.includes("RLS")||N.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":N,variant:"destructive"})}finally{i(!1)}};return s?r.jsx(zt,{}):l?r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(U,{onClick:()=>t("/doadoras"),variant:"outline",size:"icon",children:r.jsx(es,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-2",children:[r.jsx(ho,{className:"w-8 h-8"}),j.nome||j.registro]}),r.jsxs("p",{className:"text-slate-600 mt-1",children:[j.registro," ",d&&` ${d.nome}`]})]})]})}),r.jsxs("form",{onSubmit:y,className:"space-y-6",children:[r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Informaes Bsicas"})}),r.jsx(we,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"registro",children:"Registro *"}),r.jsx(se,{id:"registro",value:j.registro,onChange:_=>x({...j,registro:_.target.value}),placeholder:"Registro da doadora",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"nome",children:"Nome"}),r.jsx(se,{id:"nome",value:j.nome,onChange:_=>x({...j,nome:_.target.value}),placeholder:"Nome da doadora"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"raca",children:"Raa *"}),r.jsxs(Ze,{value:p,onValueChange:_=>{m(_),x(_==="Outra"?{...j,raca:"",racaCustom:""}:{...j,raca:_,racaCustom:""})},children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione a raa"})}),r.jsxs(Qe,{children:[h.map(_=>r.jsx(ve,{value:_,children:_},_)),r.jsx(ve,{value:"Outra",children:"Outra"})]})]}),p==="Outra"&&r.jsx(se,{id:"raca_custom",value:j.racaCustom,onChange:_=>x({...j,racaCustom:_.target.value,raca:_.target.value}),placeholder:"Digite a raa",className:"mt-2",required:!0}),p&&p!=="Outra"&&r.jsx("div",{className:"mt-2 text-xs text-slate-500"})]})]})})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Genealogia"})}),r.jsxs(we,{children:[r.jsx(_6,{value:g,onChange:b,doadoraNome:j.nome||j.registro,doadoraRegistro:j.registro}),r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsx(F,{htmlFor:"genealogia_texto",children:"Observaes sobre Genealogia"}),r.jsx(Aa,{id:"genealogia_texto",value:j.genealogia_texto,onChange:_=>x({...j,genealogia_texto:_.target.value}),placeholder:"Informaes adicionais sobre genealogia (opcional)",rows:3})]})]})]}),p==="Gir"&&r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Informaes Especficas - Raa Gir"})}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"gpta",children:"GPTA"}),r.jsx(se,{id:"gpta",type:"number",value:j.gpta,onChange:_=>x({...j,gpta:_.target.value}),placeholder:"GPTA"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"controle_leiteiro",children:"Controle Leiteiro"}),r.jsx(se,{id:"controle_leiteiro",type:"number",value:j.controle_leiteiro,onChange:_=>x({...j,controle_leiteiro:_.target.value}),placeholder:"Controle Leiteiro"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"beta_caseina",children:"Beta Casena"}),r.jsx(se,{id:"beta_caseina",value:j.beta_caseina,onChange:_=>x({...j,beta_caseina:_.target.value}),placeholder:"Beta Casena"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"link_abcz",children:"Link ABCZ"}),r.jsx(se,{id:"link_abcz",type:"url",value:j.link_abcz,onChange:_=>x({...j,link_abcz:_.target.value}),placeholder:"URL do link ABCZ"})]})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Informaes Adicionais"})}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(F,{htmlFor:"disponivel_aspiracao",children:"Disponvel para Aspirao"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Indica se a doadora est disponvel para aspirao"})]}),r.jsx(fN,{id:"disponivel_aspiracao",checked:j.disponivel_aspiracao,onCheckedChange:_=>x({...j,disponivel_aspiracao:_})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"classificacao_genetica",children:"Classificao Gentica"}),r.jsxs(Ze,{value:j.classificacao_genetica,onValueChange:_=>x({...j,classificacao_genetica:_}),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione a classificao"})}),r.jsxs(Qe,{children:[r.jsx(ve,{value:"1_estrela",children:"1 Estrela"}),r.jsx(ve,{value:"2_estrelas",children:"2 Estrelas"}),r.jsx(ve,{value:"3_estrelas",children:"3 Estrelas"}),r.jsx(ve,{value:"diamante",children:"Diamante"})]})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"Classificao opcional do preo da gentica"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"foto_url",children:"Foto"}),r.jsx(se,{id:"foto_url",type:"url",value:j.foto_url,onChange:_=>x({...j,foto_url:_.target.value}),placeholder:"URL da foto"})]})]})]}),r.jsxs("div",{className:"flex gap-4 justify-end",children:[r.jsx(U,{type:"button",variant:"outline",onClick:()=>t("/doadoras"),children:"Cancelar"}),r.jsxs(U,{type:"submit",className:"bg-green-600 hover:bg-green-700",disabled:o,children:[r.jsx(QT,{className:"w-4 h-4 mr-2"}),o?"Salvando...":"Salvar Alteraes"]})]})]})]}):r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-500",children:"Doadora no encontrada"}),r.jsxs(U,{onClick:()=>t("/doadoras"),className:"mt-4",variant:"outline",children:[r.jsx(es,{className:"w-4 h-4 mr-2"}),"Voltar para Doadoras"]})]})})}async function Vd(e){try{const{data:t,error:a}=await T.from("v_tentativas_te_status").select("*").eq("receptora_id",e).order("data_te",{ascending:!1}).limit(1);if(a&&console.error("Error fetching v_tentativas_te_status:",a),t&&t.length>0){const o=t[0],i={PRENHE_FEMEA:"PRENHE (FMEA)",PRENHE_MACHO:"PRENHE (MACHO)",PRENHE_SEM_SEXO:"PRENHE (SEM SEXO)",PRENHE:"PRENHE",VAZIA:"VAZIA",RETOQUE:"SERVIDA",SEM_DIAGNOSTICO:"SERVIDA"};if(i[o.status_tentativa])return i[o.status_tentativa]}const{data:s,error:n}=await T.from("protocolo_receptoras").select("status, protocolo_id").eq("receptora_id",e);if(n&&console.error("Error fetching protocolo_receptoras:",n),s&&s.length>0){const o=s.map(h=>h.protocolo_id),{data:i,error:l}=await T.from("protocolos_sincronizacao").select("id, status").in("id",o);l&&console.error("Error fetching protocolos_sincronizacao:",l);const c=new Map((i||[]).map(h=>[h.id,h.status])),d=s.filter(h=>{const p=c.get(h.protocolo_id),m=h.status;return p==="PASSO2_FECHADO"?!1:(m==="APTA"||m==="INICIADA")&&p!=="PASSO2_FECHADO"});if(d.length>0)return d.some(p=>p.status==="APTA")?"SINCRONIZADA":"EM SINCRONIZAO";if(s.filter(h=>c.get(h.protocolo_id)==="PASSO2_FECHADO"&&h.status==="APTA").length>0)return"SINCRONIZADA"}return"VAZIA"}catch(t){return console.error("Error calculating receptora status:",t),"VAZIA"}}async function w6(e){if(e.length===0)return new Map;const t=new Map;try{const{data:a,error:s}=await T.from("v_tentativas_te_status").select("receptora_id, status_tentativa, data_te").in("receptora_id",e).order("data_te",{ascending:!1});s&&console.error("Error fetching v_tentativas_te_status:",s);const{data:n,error:o}=await T.from("protocolo_receptoras").select("receptora_id, status, protocolo_id").in("receptora_id",e);o&&console.error("Error fetching protocolo_receptoras:",o);const i=[...new Set((n==null?void 0:n.map(p=>p.protocolo_id))||[])];let l=[];if(i.length>0){const{data:p,error:m}=await T.from("protocolos_sincronizacao").select("id, status").in("id",i);m?console.error("Error fetching protocolos_sincronizacao:",m):l=p||[]}const c=new Map((l==null?void 0:l.map(p=>[p.id,p.status]))||[]),d=new Map;a==null||a.forEach(p=>{d.has(p.receptora_id)||d.set(p.receptora_id,p)});const f={PRENHE_FEMEA:"PRENHE (FMEA)",PRENHE_MACHO:"PRENHE (MACHO)",PRENHE_SEM_SEXO:"PRENHE (SEM SEXO)",PRENHE:"PRENHE",VAZIA:"VAZIA",RETOQUE:"SERVIDA",SEM_DIAGNOSTICO:"SERVIDA"},h=new Map;n==null||n.forEach(p=>{h.has(p.receptora_id)||h.set(p.receptora_id,[]),h.get(p.receptora_id).push(p)}),e.forEach(p=>{const m=d.get(p);if(m&&f[m.status_tentativa]){t.set(p,f[m.status_tentativa]);return}const j=h.get(p)||[],x=j.filter(b=>c.get(b.protocolo_id)!=="PASSO2_FECHADO"&&(b.status==="APTA"||b.status==="INICIADA"));if(x.length>0){t.set(p,x.some(b=>b.status==="APTA")?"SINCRONIZADA":"EM SINCRONIZAO");return}if(j.filter(b=>c.get(b.protocolo_id)==="PASSO2_FECHADO"&&b.status==="APTA").length>0){t.set(p,"SINCRONIZADA");return}t.set(p,"VAZIA")})}catch(a){console.error("Error calculating receptoras status:",a),e.forEach(s=>t.set(s,"VAZIA"))}return t}const hN=ag,S6=sg,mN=u.forwardRef(({className:e,...t},a)=>r.jsx(Vc,{className:ye("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));mN.displayName=Vc.displayName;const E6=rl("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),og=u.forwardRef(({side:e="right",className:t,children:a,...s},n)=>r.jsxs(S6,{children:[r.jsx(mN,{}),r.jsxs(Gc,{ref:n,className:ye(E6({side:e}),t),...s,children:[a,r.jsxs(Nf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[r.jsx(Rs,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));og.displayName=Gc.displayName;const ig=({className:e,...t})=>r.jsx("div",{className:ye("flex flex-col space-y-2 text-center sm:text-left",e),...t});ig.displayName="SheetHeader";const lg=u.forwardRef(({className:e,...t},a)=>r.jsx(Yc,{ref:a,className:ye("text-lg font-semibold text-foreground",e),...t}));lg.displayName=Yc.displayName;const cg=u.forwardRef(({className:e,...t},a)=>r.jsx(Qc,{ref:a,className:ye("text-sm text-muted-foreground",e),...t}));cg.displayName=Qc.displayName;const Zr=e=>{if(!e||/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=e.match(/^(\d{4}-\d{2}-\d{2})/);if(t)return t[1];try{const a=new Date(e);if(isNaN(a.getTime()))return e;const s=a.getUTCFullYear(),n=String(a.getUTCMonth()+1).padStart(2,"0"),o=String(a.getUTCDate()).padStart(2,"0");return`${s}-${n}-${o}`}catch{return e}};function pN({receptoraId:e,open:t,onClose:a}){const{toast:s}=ea(),[n,o]=u.useState(!0),[i,l]=u.useState(null),[c,d]=u.useState([]);u.useEffect(()=>{t&&e&&f()},[t,e]);const f=async()=>{try{o(!0);const{data:m,error:j}=await T.from("receptoras").select("*").eq("id",e).single();if(j)throw j;l(m);const x=[],{data:g,error:b}=await T.from("receptora_fazenda_historico").select(`
          id,
          fazenda_id,
          data_inicio,
          data_fim,
          observacoes
        `).eq("receptora_id",e).order("data_inicio",{ascending:!1});if(!b&&g&&g.length>0){const w=[...g].sort((A,q)=>new Date(A.data_inicio).getTime()-new Date(q.data_inicio).getTime()),N=w[0].id,C=new Set;for(const A of g)A.fazenda_id&&C.add(A.fazenda_id);const O=new Map;if(C.size>0){const{data:A}=await T.from("fazendas").select("id, nome").in("id",Array.from(C));if(A)for(const q of A)O.set(q.id,q.nome)}for(let A=0;A<w.length;A++){const q=w[A],B=O.get(q.fazenda_id)||"Fazenda desconhecida";if(A===0)x.push({tipo:"CADASTRO",data:Zr(q.data_inicio),descricao:"Cadastro da Receptora",detalhes:`Receptora cadastrada no sistema | Fazenda: ${B}${q.observacoes?` | Observaes: ${q.observacoes}`:""}`});else{const Q=w[A-1],X=O.get(Q.fazenda_id)||"Fazenda desconhecida";x.push({tipo:"MUDANCA_FAZENDA",data:Zr(q.data_inicio),descricao:"Mudana de Fazenda",detalhes:`De: ${X}  Para: ${B}${q.observacoes?` | Observaes: ${q.observacoes}`:""}`})}}}try{const{data:w,error:S}=await T.from("receptora_renomeacoes_historico").select("*").eq("receptora_id",e).order("data_renomeacao",{ascending:!1});if(S&&S.code!=="42P01"&&console.error("Erro ao buscar renomeaes:",S),!S&&w&&w.length>0)for(const N of w){const O={MUDANCA_FAZENDA:"Mudana de Fazenda",EDICAO_MANUAL:"Edio Manual"}[N.motivo]||N.motivo||"Renomeao";x.push({tipo:"RENOMEACAO",data:Zr(N.data_renomeacao),descricao:"Renomeao de Brinco",detalhes:`De: "${N.brinco_anterior}"  Para: "${N.brinco_novo}" | Motivo: ${O}${N.observacoes?` | ${N.observacoes}`:""}`})}}catch{console.warn("Tabela receptora_renomeacoes_historico no encontrada. Execute criar_tabela_historico_renomeacoes.sql")}const{data:v,error:y}=await T.from("protocolo_receptoras").select(`
          id,
          protocolo_id,
          evento_fazenda_id,
          data_inclusao,
          status,
          motivo_inapta,
          ciclando_classificacao,
          qualidade_semaforo,
          protocolos_sincronizacao (
            id,
            data_inicio,
            responsavel_inicio,
            passo2_data,
            passo2_tecnico_responsavel,
            fazenda_id
          )
        `).eq("receptora_id",e).order("data_inclusao",{ascending:!1});if(y)throw console.error("Erro ao buscar protocolos:",y),y;if(v&&v.length>0){const w=C=>{if(!C)return{veterinario:null,tecnico:null};const O=C.match(/VET:\s*(.+?)(?:\s*\||$)/i),A=C.match(/TEC:\s*(.+?)(?:\s*\||$)/i);return{veterinario:O?O[1].trim():null,tecnico:A?A[1].trim():null}},S=new Set;for(const C of v){C.evento_fazenda_id&&S.add(C.evento_fazenda_id);try{const O=Array.isArray(C.protocolos_sincronizacao)?C.protocolos_sincronizacao[0]:C.protocolos_sincronizacao;O&&O.fazenda_id&&S.add(O.fazenda_id)}catch(O){console.warn("Erro ao acessar protocolo:",O)}}const N=new Map;if(S.size>0){const{data:C,error:O}=await T.from("fazendas").select("id, nome").in("id",Array.from(S));if(O)console.error("Erro ao buscar fazendas:",O);else if(C)for(const A of C)N.set(A.id,A.nome)}for(const C of v)try{let O=null;if(Array.isArray(C.protocolos_sincronizacao)?O=C.protocolos_sincronizacao[0]:O=C.protocolos_sincronizacao,!O||!O.id){console.warn("Protocolo no encontrado para protocolo_receptora:",C.id);continue}let A="";C.evento_fazenda_id&&O.fazenda_id&&C.evento_fazenda_id!==O.fazenda_id&&(A=` (Fazenda: ${N.get(C.evento_fazenda_id)||"Fazenda desconhecida"})`);const q=w(O.responsavel_inicio);if(!O.data_inicio){console.warn("Protocolo sem data_inicio:",O.id);continue}const B=Zr(O.data_inicio);let Q=`1 Passo realizado em ${new Date(B+"T12:00:00").toLocaleDateString("pt-BR")}`;if(q.veterinario&&(Q+=` | Veterinrio: ${q.veterinario}`),q.tecnico&&(Q+=` | Tcnico: ${q.tecnico}`),Q+=A,x.push({tipo:"PROTOCOLO",data:B,descricao:"Protocolo de Sincronizao - 1 Passo",detalhes:Q}),O.passo2_data){const X=Zr(O.passo2_data);let Y=`2 Passo realizado em ${new Date(X+"T12:00:00").toLocaleDateString("pt-BR")}`;if(O.passo2_tecnico_responsavel&&(Y+=` | Responsvel: ${O.passo2_tecnico_responsavel}`),C.evento_fazenda_id&&O.fazenda_id&&C.evento_fazenda_id!==O.fazenda_id){const E=N.get(C.evento_fazenda_id)||"Fazenda desconhecida";Y+=` (Fazenda: ${E})`}const $=[];C.ciclando_classificacao&&$.push(`Classificao: ${C.ciclando_classificacao}`),C.qualidade_semaforo&&$.push(`Nota: ${C.qualidade_semaforo}`),$.length>0&&(Y+=` | ${$.join(" | ")}`),C.status&&(C.status==="APTA"?Y+=" | Resultado: APTA para transferncia de embries":C.status==="INAPTA"?(Y+=" | Resultado: DESCARTADA",C.motivo_inapta&&(Y+=` (Motivo: ${C.motivo_inapta})`)):Y+=` | Status: ${C.status}`),x.push({tipo:"PROTOCOLO",data:X,descricao:"Protocolo de Sincronizao - 2 Passo",detalhes:Y})}}catch(O){console.error("Erro ao processar protocolo_receptora:",C.id,O);continue}}const{data:_}=await T.from("v_tentativas_te_status").select("*").eq("receptora_id",e).order("data_te",{ascending:!1});if(_&&_.length>0)for(const w of _){const S=Zr(w.data_te);if(x.push({tipo:"TE",data:S,descricao:"Transferncia de Embrio",detalhes:`Status: ${w.status_tentativa}`}),w.data_dg){const N=Zr(w.data_dg);x.push({tipo:"DG",data:N,descricao:"Diagnstico de Gestao",detalhes:`Resultado: ${w.resultado_dg||"N/A"}`})}if(w.sexagem){const N=w.data_dg?Zr(w.data_dg):S;x.push({tipo:"SEXAGEM",data:N,descricao:"Sexagem",detalhes:`Sexo: ${w.sexagem}`})}}x.sort((w,S)=>S.data>w.data?1:S.data<w.data?-1:0),d(x)}catch(m){s({title:"Erro ao carregar histrico",description:m instanceof Error?m.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},h=m=>({PROTOCOLO:r.jsx(Gj,{className:"w-5 h-5 text-blue-600"}),TE:r.jsx(Nv,{className:"w-5 h-5 text-green-600"}),DG:r.jsx(bv,{className:"w-5 h-5 text-purple-600"}),SEXAGEM:r.jsx(Hj,{className:"w-5 h-5 text-pink-600"}),MUDANCA_FAZENDA:r.jsx(wv,{className:"w-5 h-5 text-orange-600"}),CADASTRO:r.jsx(Eu,{className:"w-5 h-5 text-indigo-600"}),RENOMEACAO:r.jsx(Ud,{className:"w-5 h-5 text-amber-600"})})[m],p=m=>({PROTOCOLO:r.jsx(st,{variant:"default",className:"bg-blue-600",children:"Protocolo"}),TE:r.jsx(st,{variant:"default",className:"bg-green-600",children:"TE"}),DG:r.jsx(st,{variant:"default",className:"bg-purple-600",children:"DG"}),SEXAGEM:r.jsx(st,{variant:"default",className:"bg-pink-600",children:"Sexagem"}),MUDANCA_FAZENDA:r.jsx(st,{variant:"default",className:"bg-orange-600",children:"Mudana de Fazenda"}),CADASTRO:r.jsx(st,{variant:"default",className:"bg-indigo-600",children:"Cadastro"}),RENOMEACAO:r.jsx(st,{variant:"default",className:"bg-amber-600",children:"Renomeao"})})[m]||r.jsx(st,{children:m});return r.jsx(hN,{open:t,onOpenChange:a,children:r.jsxs(og,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[r.jsxs(ig,{children:[r.jsx(lg,{children:"Histrico da Receptora"}),r.jsx(cg,{children:i?`Brinco ${i.identificacao} ${i.nome?`- ${i.nome}`:""}`:"Carregando..."})]}),n?r.jsx("div",{className:"py-8",children:r.jsx(zt,{})}):r.jsxs("div",{className:"mt-6 space-y-6",children:[i&&r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{className:"text-base",children:"Dados da Receptora"})}),r.jsxs(we,{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Brinco"}),r.jsx("p",{className:"text-base text-slate-900",children:i.identificacao})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Nome"}),r.jsx("p",{className:"text-base text-slate-900",children:i.nome||"-"})]})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsxs(Ae,{className:"text-base",children:["Linha do Tempo (",c.length," eventos)"]})}),r.jsx(we,{children:c.length===0?r.jsx("div",{className:"text-center py-8 text-slate-500",children:"Nenhum evento registrado para esta receptora"}):r.jsx("div",{className:"space-y-4",children:c.map((m,j)=>r.jsxs("div",{className:"flex gap-4 pb-4 border-b last:border-b-0",children:[r.jsx("div",{className:"flex-shrink-0 mt-1",children:h(m.tipo)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-start justify-between mb-1",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-900",children:m.descricao}),r.jsx("p",{className:"text-sm text-slate-600",children:new Date(m.data+"T12:00:00").toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"})})]}),p(m.tipo)]}),m.detalhes&&r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:m.detalhes})]})]},j))})})]})]})]})})}function N6(){const[e,t]=u.useState([]),[a,s]=u.useState([]),[n,o]=u.useState([]),[i,l]=u.useState(""),[c,d]=u.useState(""),[f,h]=u.useState("all"),[p,m]=u.useState([]),[j,x]=u.useState(!0),[g,b]=u.useState(!1),[v,y]=u.useState(!1),[_,w]=u.useState(!1),[S,N]=u.useState(!1),[C,O]=u.useState(!1),[A,q]=u.useState(""),[B,ee]=u.useState(!1),[Q,X]=u.useState(!1),[R,Y]=u.useState(null),[$,E]=u.useState(""),[D,G]=u.useState(""),[M,K]=u.useState(!1),{toast:H}=ea(),[ne,pe]=u.useState({identificacao:"",nome:""}),[k,P]=u.useState({identificacao:"",nome:""});u.useEffect(()=>{re()},[]),u.useEffect(()=>{i?ie():(t([]),s([]))},[i]),u.useEffect(()=>{ce()},[c,f,e]);const ce=()=>{let J=e;if(f!=="all"&&(J=J.filter(xe=>xe.status_calculado===f)),c.trim()){const xe=c.toLowerCase();J=J.filter(I=>{var de;return I.identificacao.toLowerCase().includes(xe)||((de=I.nome)==null?void 0:de.toLowerCase().includes(xe))})}s(J)},re=async()=>{try{x(!0);const{data:J,error:xe}=await T.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(xe)throw xe;o(J||[])}catch(J){H({title:"Erro ao carregar fazendas",description:J instanceof Error?J.message:"Erro desconhecido",variant:"destructive"})}finally{x(!1)}},ie=async()=>{try{b(!0);const{data:J,error:xe}=await T.from("vw_receptoras_fazenda_atual").select("receptora_id, fazenda_nome_atual").eq("fazenda_id_atual",i);if(xe)throw xe;const I=(J==null?void 0:J.map(Me=>Me.receptora_id))||[];if(I.length===0){t([]),s([]),m([]);return}const{data:de,error:_e}=await T.from("receptoras").select("*").in("id",I).order("identificacao",{ascending:!0});if(_e)throw _e;const Se=new Map((J==null?void 0:J.map(Me=>[Me.receptora_id,Me.fazenda_nome_atual]))||[]),ue=(de||[]).map(Me=>({...Me,fazenda_nome_atual:Se.get(Me.id)})),z=ue.map(Me=>Me.id),Ee=await w6(z),Le=ue.map(Me=>({...Me,status_calculado:Ee.get(Me.id)||"VAZIA"})),He=Array.from(new Set(Le.map(Me=>Me.status_calculado))).filter(Me=>Me).sort();m(He),t(Le),s(Le),h("all")}catch(J){H({title:"Erro ao carregar receptoras",description:J instanceof Error?J.message:"Erro desconhecido",variant:"destructive"})}finally{b(!1)}},oe=async J=>{if(J.preventDefault(),!ne.identificacao.trim()){H({title:"Erro de validao",description:"Identificao (brinco)  obrigatria",variant:"destructive"});return}if(!i){H({title:"Erro de validao",description:"Selecione uma fazenda primeiro",variant:"destructive"});return}try{ee(!0);const xe={identificacao:ne.identificacao};ne.nome.trim()&&(xe.nome=ne.nome);const{data:I,error:de}=await T.from("receptoras").insert([xe]).select().single();if(de)throw de.code==="23505"?new Error("J existe uma receptora com esse brinco nesta fazenda."):de;const{error:_e}=await T.from("receptora_fazenda_historico").insert([{receptora_id:I.id,fazenda_id:i,data_inicio:new Date().toISOString().split("T")[0],data_fim:null}]);_e&&console.error("Erro ao criar histrico de fazenda:",_e),H({title:"Receptora criada",description:"Receptora criada com sucesso"}),y(!1),pe({identificacao:"",nome:""}),ie()}catch(xe){H({title:"Erro ao criar receptora",description:xe instanceof Error?xe.message:"Erro desconhecido",variant:"destructive"})}finally{ee(!1)}},he=J=>{Y(J),P({identificacao:J.identificacao,nome:J.nome||""}),w(!0)},Te=async J=>{if(J.preventDefault(),!!R){if(!k.identificacao.trim()){H({title:"Erro de validao",description:"Identificao (brinco)  obrigatria",variant:"destructive"});return}try{ee(!0);const xe=R.identificacao,I=k.identificacao.trim(),de=xe!==I,_e={identificacao:I,nome:k.nome.trim()||null},{error:Se}=await T.from("receptoras").update(_e).eq("id",R.id);if(Se)throw Se.code==="23505"?new Error("J existe uma receptora com esse brinco nesta fazenda."):Se;if(de)try{const{error:ue}=await T.from("receptora_renomeacoes_historico").insert([{receptora_id:R.id,brinco_anterior:xe,brinco_novo:I,data_renomeacao:new Date().toISOString(),motivo:"EDICAO_MANUAL",observacoes:null}]);ue&&(ue.code==="42P01"?console.warn("Tabela receptora_renomeacoes_historico no existe. Execute o script criar_tabela_historico_renomeacoes.sql"):console.error("Erro ao registrar renomeao no histrico:",ue))}catch(ue){console.error("Erro ao registrar renomeao no histrico:",ue)}H({title:"Receptora atualizada",description:de?`Receptora atualizada. Brinco alterado de "${xe}" para "${I}".`:"Receptora atualizada com sucesso"}),w(!1),Y(null),ie()}catch(xe){H({title:"Erro ao atualizar receptora",description:xe instanceof Error?xe.message:"Erro desconhecido",variant:"destructive"})}finally{ee(!1)}}};u.useEffect(()=>{(async()=>{if(!R||!$){K(!1),G("");return}try{const{data:xe,error:I}=await T.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",$);if(I){console.error("Erro ao verificar receptoras na fazenda destino:",I);return}const de=(xe==null?void 0:xe.map(ue=>ue.receptora_id))||[];if(de.length===0){K(!1),G("");return}const{data:_e,error:Se}=await T.from("receptoras").select("id, identificacao").in("id",de).eq("identificacao",R.identificacao);if(Se){console.error("Erro ao verificar brinco:",Se);return}if(_e&&_e.length>0){K(!0);const ue=async(z,Ee=0)=>{if(Ee>10)throw new Error("No foi possvel gerar um brinco disponvel aps vrias tentativas");const Le=new Date,He=String(Le.getDate()).padStart(2,"0"),Me=String(Le.getMonth()+1).padStart(2,"0"),ft=Ee===0?`-MOV${He}${Me}`:`-MOV${He}${Me}-${Ee}`,dt=`${z}${ft}`,{data:ht,error:ta}=await T.from("receptoras").select("id, identificacao").in("id",de).eq("identificacao",dt);return ta?(console.error("Erro ao verificar novo brinco:",ta),dt):ht&&ht.length>0?ue(z,Ee+1):dt};try{const z=await ue(R.identificacao);G(z)}catch(z){console.error("Erro ao gerar brinco disponvel:",z);const Ee=new Date,Le=String(Ee.getDate()).padStart(2,"0"),He=String(Ee.getMonth()+1).padStart(2,"0"),Me=`-MOV${Le}${He}`;G(`${R.identificacao}${Me}`)}}else K(!1),G("")}catch(xe){console.error("Erro ao verificar conflito de brinco:",xe)}})()},[R,$]);const Pe=async()=>{if(!R||!$){H({title:"Erro de validao",description:"Selecione uma fazenda de destino",variant:"destructive"});return}try{X(!0);const J=R.identificacao;let xe=J;if(M&&D){const{data:_e,error:Se}=await T.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",$);if(!Se&&_e){const z=_e.map(Ee=>Ee.receptora_id);if(z.length>0){const{data:Ee,error:Le}=await T.from("receptoras").select("id, identificacao").in("id",z).eq("identificacao",D);if(!Le&&Ee&&Ee.length>0){let He=1,Me=D;for(;He<=10;){const ft=new Date,dt=String(ft.getDate()).padStart(2,"0"),ht=String(ft.getMonth()+1).padStart(2,"0"),ta=`-MOV${dt}${ht}-${He}`;Me=`${J}${ta}`;const{data:fa,error:va}=await T.from("receptoras").select("id").in("id",z).eq("identificacao",Me);if(!va&&(!fa||fa.length===0))break;He++}xe=Me}else xe=D}else xe=D}else xe=D;const{error:ue}=await T.from("receptoras").update({identificacao:xe}).eq("id",R.id);if(ue)throw new Error(`Erro ao atualizar brinco: ${ue.message}`);try{const{error:z}=await T.from("receptora_renomeacoes_historico").insert([{receptora_id:R.id,brinco_anterior:J,brinco_novo:xe,data_renomeacao:new Date().toISOString(),motivo:"MUDANCA_FAZENDA",observacoes:"Renomeao automtica devido a conflito de brinco na fazenda destino"}]);z&&(z.code==="42P01"?console.warn("Tabela receptora_renomeacoes_historico no existe. Execute o script criar_tabela_historico_renomeacoes.sql"):console.error("Erro ao registrar renomeao no histrico:",z))}catch(z){console.error("Erro ao registrar renomeao no histrico:",z)}R.identificacao=xe}const{data:I,error:de}=await T.rpc("mover_receptora_fazenda",{p_receptora_id:R.id,p_nova_fazenda_id:$,p_data_mudanca:new Date().toISOString().split("T")[0],p_observacoes:null});if(de){console.error("Erro ao mover receptora:",de),console.error("Receptora ID:",R.id),console.error("Nova Fazenda ID:",$),console.error("Error code:",de.code),console.error("Error message:",de.message),console.error("Error details:",de.details);let _e="Erro ao mover receptora";de.message?_e=de.message:de.details&&(_e=de.details),H({title:"Erro ao mover receptora",description:_e,variant:"destructive"}),X(!1);return}H({title:"Receptora movida",description:M?`Receptora movida com sucesso. Brinco atualizado de "${J}" para "${R.identificacao}" devido a conflito na fazenda destino.`:"Receptora movida para a nova fazenda com sucesso. Protocolos e histrico no foram afetados."}),N(!1),w(!1),Y(null),E(""),K(!1),G(""),ie()}catch(J){console.error("Erro catch ao mover receptora:",J);const xe=J instanceof Error?J.message:"Erro desconhecido ao mover receptora";H({title:"Erro ao mover receptora",description:xe,variant:"destructive"})}finally{X(!1)}},Fe=J=>{const I={VAZIA:{variant:"outline"},"EM SINCRONIZAO":{variant:"secondary"},SINCRONIZADA:{variant:"default"},SERVIDA:{variant:"default",className:"bg-blue-600"},PRENHE:{variant:"default",className:"bg-green-600"},"PRENHE (FMEA)":{variant:"default",className:"bg-pink-600"},"PRENHE (MACHO)":{variant:"default",className:"bg-blue-700"},"PRENHE (SEM SEXO)":{variant:"default",className:"bg-purple-600"}}[J]||{variant:"outline"};return r.jsx(st,{variant:I.variant,className:I.className,children:J})};return j?r.jsx(zt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Receptoras"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar receptoras por fazenda"})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Selecione a Fazenda *"})}),r.jsx(we,{children:r.jsxs(Ze,{value:i,onValueChange:l,children:[r.jsx(Ye,{className:"w-full",children:r.jsx(Je,{placeholder:"Selecione uma fazenda para listar receptoras"})}),r.jsx(Qe,{children:n.map(J=>r.jsx(ve,{value:J.id,children:J.nome},J.id))})]})})]}),i?r.jsxs(r.Fragment,{children:[r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Filtros"})}),r.jsx(we,{children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 max-w-md",children:[r.jsx(F,{htmlFor:"filtro-status",children:"Status"}),r.jsxs(Ze,{value:f,onValueChange:h,children:[r.jsx(Ye,{id:"filtro-status",children:r.jsx(Je,{placeholder:"Todas"})}),r.jsxs(Qe,{children:[r.jsx(ve,{value:"all",children:"Todas"}),p.map(J=>r.jsx(ve,{value:J,children:J},J))]})]})]}),r.jsxs("div",{className:"flex-1 max-w-md",children:[r.jsx(F,{htmlFor:"busca",children:"Buscar por brinco ou nome"}),r.jsxs("div",{className:"relative",children:[r.jsx(Sv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),r.jsx(se,{id:"busca",placeholder:"Buscar por brinco ou nome...",value:c,onChange:J=>d(J.target.value),className:"pl-10"})]})]})]})})]}),r.jsx("div",{className:"flex items-center justify-end",children:r.jsxs(Dt,{open:v,onOpenChange:y,children:[r.jsx(Ds,{asChild:!0,children:r.jsxs(U,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ts,{className:"w-4 h-4 mr-2"}),"Nova Receptora"]})}),r.jsxs(_t,{className:"max-w-md",children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Criar Nova Receptora"}),r.jsx(Ot,{children:"Criar receptora na fazenda selecionada"})]}),r.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"identificacao",children:"Identificao (Brinco) *"}),r.jsx(se,{id:"identificacao",value:ne.identificacao,onChange:J=>pe({...ne,identificacao:J.target.value}),placeholder:"Nmero do brinco",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"nome",children:"Nome"}),r.jsx(se,{id:"nome",value:ne.nome,onChange:J=>pe({...ne,nome:J.target.value}),placeholder:"Nome da receptora (opcional)"})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(U,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:B,children:B?"Salvando...":"Salvar"}),r.jsx(U,{type:"button",variant:"outline",onClick:()=>y(!1),disabled:B,children:"Cancelar"})]})]})]})]})}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsxs(Ae,{children:["Lista de Receptoras (",a.length,")"]})}),r.jsx(we,{children:g?r.jsx("div",{className:"py-8",children:r.jsx(zt,{})}):r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Brinco"}),r.jsx(V,{children:"Nome"}),r.jsx(V,{children:"Status Atual"}),r.jsx(V,{className:"text-right",children:"Aes"})]})}),r.jsx(Rt,{children:a.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:4,className:"text-center text-slate-500",children:c?"Nenhuma receptora encontrada":"Nenhuma receptora cadastrada nesta fazenda"})}):a.map(J=>r.jsxs(ge,{children:[r.jsx(L,{className:"font-medium",children:J.identificacao}),r.jsx(L,{children:J.nome||"-"}),r.jsx(L,{children:Fe(J.status_calculado)}),r.jsx(L,{className:"text-right",children:r.jsxs("div",{className:"flex gap-1 justify-end",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>he(J),title:"Editar",children:r.jsx(dc,{className:"w-4 h-4"})}),r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{q(J.id),O(!0)},title:"Ver histrico",children:r.jsx(jv,{className:"w-4 h-4"})})]})})]},J.id))})]})})]})]}):r.jsx(je,{children:r.jsx(we,{className:"py-12 text-center",children:r.jsx("p",{className:"text-slate-500 text-lg",children:"Selecione uma fazenda para listar receptoras"})})}),r.jsx(Dt,{open:_,onOpenChange:w,children:r.jsxs(_t,{className:"max-w-md",children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Editar Receptora"}),r.jsx(Ot,{children:"Atualizar dados da receptora"})]}),r.jsxs("form",{onSubmit:Te,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"edit_identificacao",children:"Identificao (Brinco) *"}),r.jsx(se,{id:"edit_identificacao",value:k.identificacao,onChange:J=>P({...k,identificacao:J.target.value}),placeholder:"Nmero do brinco",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"edit_nome",children:"Nome"}),r.jsx(se,{id:"edit_nome",value:k.nome,onChange:J=>P({...k,nome:J.target.value}),placeholder:"Nome da receptora (opcional)"})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(U,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:B,children:B?"Salvando...":"Salvar Alteraes"}),r.jsx(U,{type:"button",variant:"outline",onClick:()=>w(!1),disabled:B,children:"Cancelar"})]})]}),r.jsxs("div",{className:"relative my-4",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("span",{className:"w-full border-t"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-white px-2 text-slate-500",children:"Ou"})})]}),r.jsxs(U,{type:"button",variant:"outline",className:"w-full",onClick:()=>{N(!0),E("")},disabled:B,children:[r.jsx(PT,{className:"w-4 h-4 mr-2"}),"Mover para outra fazenda"]})]})}),r.jsx(Dt,{open:S,onOpenChange:J=>{N(J),J||(K(!1),G(""))},children:r.jsxs(_t,{className:"max-w-md",children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Mover Receptora"}),r.jsxs(Ot,{children:["Mover ",R==null?void 0:R.identificacao," para outra fazenda. Protocolos e histrico reprodutivo no sero afetados."]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"nova_fazenda",children:"Nova Fazenda *"}),r.jsxs(Ze,{value:$,onValueChange:E,children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione a fazenda de destino"})}),r.jsx(Qe,{children:n.filter(J=>J.id!==i).map(J=>r.jsx(ve,{value:J.id,children:J.nome},J.id))})]})]}),M&&D&&r.jsxs("div",{className:"space-y-2 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:[r.jsx("div",{className:"flex items-start gap-2",children:r.jsx("div",{className:"text-yellow-800 text-sm font-medium",children:" Conflito de Brinco Detectado"})}),r.jsxs("div",{className:"text-yellow-700 text-sm",children:['J existe uma receptora com o brinco "',R==null?void 0:R.identificacao,'" na fazenda destino.']}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(F,{className:"text-yellow-800 text-sm font-medium",children:"Novo Brinco Proposto:"}),r.jsx("div",{className:"p-2 bg-white border border-yellow-300 rounded text-sm font-mono text-yellow-900",children:D}),r.jsx("div",{className:"text-yellow-600 text-xs",children:"O brinco ser automaticamente atualizado para permitir a movimentao."})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(U,{type:"button",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:Pe,disabled:Q||!$,children:Q?"Movendo...":"Confirmar Movimentao"}),r.jsx(U,{type:"button",variant:"outline",onClick:()=>{N(!1),K(!1),G("")},disabled:Q,children:"Cancelar"})]})]})]})}),r.jsx(pN,{receptoraId:A,open:C,onClose:()=>O(!1)})]})]})}function C6(){const e=za(),{toast:t}=ea(),[a,s]=u.useState(!0),[n,o]=u.useState([]),[i,l]=u.useState([]),[c,d]=u.useState([]),[f,h]=u.useState(""),[p,m]=u.useState(""),[j,x]=u.useState(""),[g,b]=u.useState(""),[v,y]=u.useState(!1),[_,w]=u.useState(1),[S,N]=u.useState(0),C=50,[O,A]=u.useState(!1),[q,B]=u.useState(null),[ee,Q]=u.useState({data:new Date().toISOString().split("T")[0],tecnico:""}),[X,R]=u.useState(!1);u.useEffect(()=>{Y()},[]);const Y=async()=>{try{s(!0),await Promise.all([E(),D()])}catch(M){t({title:"Erro ao carregar dados",description:M instanceof Error?M.message:"Erro desconhecido",variant:"destructive"})}finally{s(!1)}},$=async M=>{if(!p||p==="all"||!j||!g){t({title:"Filtros obrigatrios",description:"Fazenda, data inicial e data final so obrigatrios para buscar no histrico",variant:"destructive"});return}try{y(!0);const H=((M!==void 0?M:_)-1)*C,ne=H+C*2-1;let pe=T.from("protocolos_sincronizacao").select("*",{count:"exact"}).eq("fazenda_id",p).gte("data_inicio",j).lte("data_inicio",g).order("data_inicio",{ascending:!1}).range(H,ne);const{data:k,error:P,count:ce}=await pe;if(P)throw P;const{data:re}=await T.from("fazendas").select("nome").eq("id",p).single(),ie=(re==null?void 0:re.nome)||"N/A",he=(await Promise.all((k||[]).map(async Te=>{const{count:Pe,error:Fe}=await T.from("protocolo_receptoras").select("*",{count:"exact",head:!0}).eq("protocolo_id",Te.id);return Fe?(console.error("Erro ao contar receptoras:",Fe),null):!Pe||Pe===0?null:{...Te,fazenda_nome:ie,receptoras_count:Pe}}))).filter(Te=>Te!==null).slice(0,C);l(he),N(ce||0)}catch(K){console.error("Erro ao carregar histrico:",K),t({title:"Erro ao carregar histrico",description:K instanceof Error?K.message:"Erro desconhecido",variant:"destructive"}),l([])}finally{y(!1)}},E=async()=>{const{data:M,error:K}=await T.from("fazendas").select("*").order("nome",{ascending:!0});if(K)throw K;d(M||[])},D=async()=>{try{const{data:M,error:K}=await T.from("protocolos_sincronizacao").select("*").in("status",["PASSO1_FECHADO","PRIMEIRO_PASSO_FECHADO"]).order("data_inicio",{ascending:!1});if(K)throw K;const H=[];for(const ne of M||[]){const{data:pe}=await T.from("fazendas").select("nome").eq("id",ne.fazenda_id).single(),{count:k}=await T.from("protocolo_receptoras").select("*",{count:"exact",head:!0}).eq("protocolo_id",ne.id).eq("status","INICIADA");H.push({...ne,fazenda_nome:(pe==null?void 0:pe.nome)||"N/A",receptoras_count:k||0})}o(H)}catch(M){console.error("Error loading protocolos passo 2:",M)}},G=f&&f!=="all"?n.filter(M=>M.fazenda_id===f):n;return a?r.jsx(zt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Protocolos de Sincronizao"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar protocolos em 2 passos"})]}),r.jsxs(U,{onClick:()=>e("/protocolos/novo"),className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ts,{className:"w-4 h-4 mr-2"}),"Novo Protocolo (1 Passo)"]})]}),r.jsxs(Rf,{defaultValue:"aguardando",className:"w-full",children:[r.jsxs(Xc,{className:"grid w-full grid-cols-2",children:[r.jsxs(Ir,{value:"aguardando",children:["Aguardando 2 Passo - ",n.length]}),r.jsx(Ir,{value:"historico",children:"Histrico"})]}),r.jsxs(Fr,{value:"aguardando",className:"space-y-4",children:[r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Filtrar por Fazenda"})}),r.jsx(we,{children:r.jsxs(Ze,{value:f||"all",onValueChange:M=>h(M==="all"?"":M),children:[r.jsx(Ye,{className:"w-full md:w-[300px]",children:r.jsx(Je,{placeholder:"Todas as fazendas"})}),r.jsxs(Qe,{children:[r.jsx(ve,{value:"all",children:"Todas as fazendas"}),c.map(M=>r.jsx(ve,{value:M.id,children:M.nome},M.id))]})]})})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Protocolos Aguardando 2 Passo"})}),r.jsx(we,{children:r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Fazenda"}),r.jsx(V,{children:"Data Incio"}),r.jsx(V,{children:"Responsvel"}),r.jsx(V,{children:"Receptoras Pendentes"}),r.jsx(V,{children:"Status"}),r.jsx(V,{className:"text-right",children:"Aes"})]})}),r.jsx(Rt,{children:G.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:6,className:"text-center text-slate-500",children:f?"Nenhum protocolo aguardando 2 passo nesta fazenda":"Nenhum protocolo aguardando 2 passo"})}):G.map(M=>r.jsxs(ge,{children:[r.jsx(L,{className:"font-medium",children:M.fazenda_nome}),r.jsx(L,{children:Kt(M.data_inicio)}),r.jsx(L,{children:M.responsavel_inicio}),r.jsx(L,{children:M.receptoras_count}),r.jsx(L,{children:r.jsx(st,{variant:"secondary",children:"Aguardando 2 Passo"})}),r.jsx(L,{className:"text-right",children:r.jsxs(U,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",onClick:()=>{B(M.id),Q({data:new Date().toISOString().split("T")[0],tecnico:""}),A(!0)},children:[r.jsx(FT,{className:"w-4 h-4 mr-2"}),"INICIAR 2 PASSO"]})})]},M.id))})]})})]})]}),r.jsxs(Fr,{value:"historico",className:"space-y-4",children:[r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Filtros de Busca (Obrigatrios)"})}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Fazenda *"}),r.jsxs(Ze,{value:p||"all",onValueChange:M=>{m(M==="all"?"":M),w(1)},children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione a fazenda"})}),r.jsxs(Qe,{children:[r.jsx(ve,{value:"all",children:"Selecione..."}),c.map(M=>r.jsx(ve,{value:M.id,children:M.nome},M.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Data Incio (de) *"}),r.jsx(se,{type:"date",value:j,onChange:M=>{x(M.target.value),w(1)},placeholder:"Data inicial"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Data Incio (at) *"}),r.jsx(se,{type:"date",value:g,onChange:M=>{b(M.target.value),w(1)},placeholder:"Data final"})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx(F,{className:"w-full text-sm font-medium text-slate-700",children:"Atalhos rpidos:"}),r.jsx(U,{type:"button",variant:"outline",size:"sm",onClick:()=>{const M=new Date,K=new Date(M);K.setDate(M.getDate()-7),x(K.toISOString().split("T")[0]),b(M.toISOString().split("T")[0]),w(1)},children:"ltimos 7 dias"}),r.jsx(U,{type:"button",variant:"outline",size:"sm",onClick:()=>{const M=new Date,K=new Date(M);K.setDate(M.getDate()-30),x(K.toISOString().split("T")[0]),b(M.toISOString().split("T")[0]),w(1)},children:"ltimos 30 dias"}),r.jsx(U,{type:"button",variant:"outline",size:"sm",onClick:()=>{const M=new Date,K=new Date(M);K.setDate(M.getDate()-90),x(K.toISOString().split("T")[0]),b(M.toISOString().split("T")[0]),w(1)},children:"ltimos 90 dias"})]})]}),r.jsxs(U,{onClick:()=>{w(1),$()},className:"w-full md:w-auto",disabled:v||!p||p==="all"||!j||!g,children:[r.jsx(Sv,{className:"w-4 h-4 mr-2"}),v?"Buscando...":"Buscar Protocolos"]})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsxs(Ae,{children:["Histrico de Protocolos (",i.length,")"]})}),r.jsxs(we,{children:[v?r.jsx("div",{className:"py-8",children:r.jsx(zt,{})}):i.length===0?r.jsxs("div",{className:"py-12 text-center text-slate-500",children:[r.jsx("p",{className:"text-lg",children:"Nenhum protocolo encontrado"}),r.jsx("p",{className:"text-sm mt-2",children:'Preencha os filtros obrigatrios e clique em "Buscar Protocolos"'})]}):r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Fazenda"}),r.jsx(V,{children:"Data Incio"}),r.jsx(V,{children:"Data 2 Passo"}),r.jsx(V,{children:"Tcnico 2 Passo"}),r.jsx(V,{children:"Receptoras"}),r.jsx(V,{children:"Status"}),r.jsx(V,{className:"text-right",children:"Aes"})]})}),r.jsx(Rt,{children:i.map(M=>r.jsxs(ge,{children:[r.jsx(L,{className:"font-medium",children:M.fazenda_nome}),r.jsx(L,{children:Kt(M.data_inicio)}),r.jsx(L,{children:M.passo2_data?Kt(M.passo2_data):"-"}),r.jsx(L,{children:M.passo2_tecnico_responsavel||"-"}),r.jsx(L,{children:M.receptoras_count}),r.jsx(L,{children:r.jsx(st,{variant:M.status==="PASSO2_FECHADO"?"secondary":"default",children:M.status==="PASSO2_FECHADO"?"Fechado":M.status||"N/A"})}),r.jsx(L,{className:"text-right",children:M.status==="PASSO2_FECHADO"?r.jsxs(U,{variant:"ghost",size:"sm",onClick:()=>e(`/protocolos/fechados/${M.id}/relatorio`),children:[r.jsx(cc,{className:"w-4 h-4 mr-2"}),"Ver Relatrio"]}):r.jsxs(U,{variant:"ghost",size:"sm",onClick:()=>{M.status==="PASSO1_FECHADO"||M.status==="PRIMEIRO_PASSO_FECHADO"?(B(M.id),Q({data:new Date().toISOString().split("T")[0],tecnico:""}),A(!0)):e(`/protocolos/${M.id}`)},children:[r.jsx(cc,{className:"w-4 h-4 mr-2"}),"Ver Detalhes"]})})]},M.id))})]}),i.length>0&&r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[r.jsxs("div",{className:"text-sm text-slate-600",children:["Pgina ",_," - Mostrando ",i.length," protocolos"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(U,{variant:"outline",size:"sm",onClick:async()=>{const M=Math.max(1,_-1);w(M),await $(M)},disabled:_===1||v,children:[r.jsx(LT,{className:"w-4 h-4"}),"Anterior"]}),r.jsxs(U,{variant:"outline",size:"sm",onClick:async()=>{const M=_+1;w(M),await $(M)},disabled:i.length<C||v,children:["Prxima",r.jsx(IT,{className:"w-4 h-4"})]})]})]})]})]})]})]}),r.jsx(Dt,{open:O,onOpenChange:A,children:r.jsxs(_t,{children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Iniciar 2 Passo"}),r.jsx(Ot,{children:"Informe a data de realizao do 2 passo e o tcnico responsvel"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"passo2_data",children:"Data de Realizao do 2 Passo *"}),r.jsx(se,{id:"passo2_data",type:"date",value:ee.data,onChange:M=>Q({...ee,data:M.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"passo2_tecnico",children:"Tcnico Responsvel *"}),r.jsx(se,{id:"passo2_tecnico",value:ee.tecnico,onChange:M=>Q({...ee,tecnico:M.target.value}),placeholder:"Nome do tcnico responsvel",required:!0})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(U,{onClick:async()=>{if(!ee.data||!ee.tecnico.trim()){t({title:"Erro de validao",description:"Data e tcnico so obrigatrios",variant:"destructive"});return}if(!X)try{R(!0);const{count:M,error:K}=await T.from("protocolo_receptoras").select("*",{count:"exact",head:!0}).eq("protocolo_id",q);if(K)throw console.error("Erro ao verificar receptoras:",K),new Error("Erro ao verificar receptoras vinculadas ao protocolo");if(!M||M===0){t({title:"Erro: Protocolo sem receptoras",description:"Este protocolo no possui receptoras vinculadas. No  possvel iniciar o 2 passo.",variant:"destructive"}),R(!1);return}const{error:H}=await T.from("protocolos_sincronizacao").update({passo2_data:ee.data,passo2_tecnico_responsavel:ee.tecnico.trim()}).eq("id",q);if(H)throw H;t({title:"2 passo iniciado",description:"Dados do 2 passo registrados com sucesso"}),A(!1),e(`/protocolos/${q}/passo2`)}catch(M){console.error("Erro ao iniciar 2 passo:",M),t({title:"Erro ao iniciar 2 passo",description:M instanceof Error?M.message:"Erro desconhecido",variant:"destructive"})}finally{R(!1)}},className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:X,children:X?"Salvando...":"Confirmar e Iniciar"}),r.jsx(U,{variant:"outline",onClick:()=>A(!1),disabled:X,children:"Cancelar"})]})]})]})})]})}var vN="AlertDialog",[A6,q5]=Os(vN,[IS]),Hr=IS(),gN=e=>{const{__scopeAlertDialog:t,...a}=e,s=Hr(t);return r.jsx(ag,{...s,...a,modal:!0})};gN.displayName=vN;var T6="AlertDialogTrigger",xN=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=Hr(a);return r.jsx(eE,{...n,...s,ref:t})});xN.displayName=T6;var R6="AlertDialogPortal",yN=e=>{const{__scopeAlertDialog:t,...a}=e,s=Hr(t);return r.jsx(sg,{...s,...a})};yN.displayName=R6;var D6="AlertDialogOverlay",bN=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=Hr(a);return r.jsx(Vc,{...n,...s,ref:t})});bN.displayName=D6;var Si="AlertDialogContent",[O6,z6]=A6(Si),M6=vj("AlertDialogContent"),_N=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,children:s,...n}=e,o=Hr(a),i=u.useRef(null),l=vt(t,i),c=u.useRef(null);return r.jsx(pP,{contentName:Si,titleName:jN,docsSlug:"alert-dialog",children:r.jsx(O6,{scope:a,cancelRef:c,children:r.jsxs(Gc,{role:"alertdialog",...o,...n,ref:l,onOpenAutoFocus:De(n.onOpenAutoFocus,d=>{var f;d.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(M6,{children:s}),r.jsx(P6,{contentRef:i})]})})})});_N.displayName=Si;var jN="AlertDialogTitle",wN=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=Hr(a);return r.jsx(Yc,{...n,...s,ref:t})});wN.displayName=jN;var SN="AlertDialogDescription",EN=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=Hr(a);return r.jsx(Qc,{...n,...s,ref:t})});EN.displayName=SN;var k6="AlertDialogAction",NN=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=Hr(a);return r.jsx(Nf,{...n,...s,ref:t})});NN.displayName=k6;var CN="AlertDialogCancel",AN=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,{cancelRef:n}=z6(CN,a),o=Hr(a),i=vt(t,n);return r.jsx(Nf,{...o,...s,ref:i})});AN.displayName=CN;var P6=({contentRef:e})=>{const t=`\`${Si}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Si}\` by passing a \`${SN}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Si}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return u.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},L6=gN,I6=xN,F6=yN,TN=bN,RN=_N,DN=NN,ON=AN,zN=wN,MN=EN;const Qi=L6,q6=I6,U6=F6,kN=u.forwardRef(({className:e,...t},a)=>r.jsx(TN,{className:ye("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));kN.displayName=TN.displayName;const wo=u.forwardRef(({className:e,...t},a)=>r.jsxs(U6,{children:[r.jsx(kN,{}),r.jsx(RN,{ref:a,className:ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));wo.displayName=RN.displayName;const So=({className:e,...t})=>r.jsx("div",{className:ye("flex flex-col space-y-2 text-center sm:text-left",e),...t});So.displayName="AlertDialogHeader";const Eo=({className:e,...t})=>r.jsx("div",{className:ye("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Eo.displayName="AlertDialogFooter";const No=u.forwardRef(({className:e,...t},a)=>r.jsx(zN,{ref:a,className:ye("text-lg font-semibold",e),...t}));No.displayName=zN.displayName;const Co=u.forwardRef(({className:e,...t},a)=>r.jsx(MN,{ref:a,className:ye("text-sm text-muted-foreground",e),...t}));Co.displayName=MN.displayName;const Ao=u.forwardRef(({className:e,...t},a)=>r.jsx(DN,{ref:a,className:ye(Vv(),e),...t}));Ao.displayName=DN.displayName;const To=u.forwardRef(({className:e,...t},a)=>r.jsx(ON,{ref:a,className:ye(Vv({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));To.displayName=ON.displayName;var kf="Popover",[PN,U5]=Os(kf,[ll]),Zc=ll(),[B6,qn]=PN(kf),LN=e=>{const{__scopePopover:t,children:a,open:s,defaultOpen:n,onOpenChange:o,modal:i=!1}=e,l=Zc(t),c=u.useRef(null),[d,f]=u.useState(!1),[h,p]=$s({prop:s,defaultProp:n??!1,onChange:o,caller:kf});return r.jsx(Tw,{...l,children:r.jsx(B6,{scope:t,contentId:Dr(),triggerRef:c,open:h,onOpenChange:p,onOpenToggle:u.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:d,onCustomAnchorAdd:u.useCallback(()=>f(!0),[]),onCustomAnchorRemove:u.useCallback(()=>f(!1),[]),modal:i,children:a})})};LN.displayName=kf;var IN="PopoverAnchor",$6=u.forwardRef((e,t)=>{const{__scopePopover:a,...s}=e,n=qn(IN,a),o=Zc(a),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=n;return u.useEffect(()=>(i(),()=>l()),[i,l]),r.jsx(cf,{...o,...s,ref:t})});$6.displayName=IN;var FN="PopoverTrigger",qN=u.forwardRef((e,t)=>{const{__scopePopover:a,...s}=e,n=qn(FN,a),o=Zc(a),i=vt(t,n.triggerRef),l=r.jsx(Be.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":VN(n.open),...s,ref:i,onClick:De(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?l:r.jsx(cf,{asChild:!0,...o,children:l})});qN.displayName=FN;var dg="PopoverPortal",[H6,V6]=PN(dg,{forceMount:void 0}),UN=e=>{const{__scopePopover:t,forceMount:a,children:s,container:n}=e,o=qn(dg,t);return r.jsx(H6,{scope:t,forceMount:a,children:r.jsx(Ur,{present:a||o.open,children:r.jsx(Lc,{asChild:!0,container:n,children:s})})})};UN.displayName=dg;var Ki="PopoverContent",BN=u.forwardRef((e,t)=>{const a=V6(Ki,e.__scopePopover),{forceMount:s=a.forceMount,...n}=e,o=qn(Ki,e.__scopePopover);return r.jsx(Ur,{present:s||o.open,children:o.modal?r.jsx(Y6,{...n,ref:t}):r.jsx(Q6,{...n,ref:t})})});BN.displayName=Ki;var G6=xo("PopoverContent.RemoveScroll"),Y6=u.forwardRef((e,t)=>{const a=qn(Ki,e.__scopePopover),s=u.useRef(null),n=vt(t,s),o=u.useRef(!1);return u.useEffect(()=>{const i=s.current;if(i)return Jv(i)},[]),r.jsx(Sf,{as:G6,allowPinchZoom:!0,children:r.jsx($N,{...e,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:De(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=a.triggerRef.current)==null||l.focus()}),onPointerDownOutside:De(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:De(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Q6=u.forwardRef((e,t)=>{const a=qn(Ki,e.__scopePopover),s=u.useRef(!1),n=u.useRef(!1);return r.jsx($N,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=a.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const i=o.target;((d=a.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&n.current&&o.preventDefault()}})}),$N=u.forwardRef((e,t)=>{const{__scopePopover:a,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:f,...h}=e,p=qn(Ki,a),m=Zc(a);return Zv(),r.jsx(jf,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:o,children:r.jsx(sl,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:r.jsx(Lv,{"data-state":VN(p.open),role:"dialog",id:p.contentId,...m,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),HN="PopoverClose",K6=u.forwardRef((e,t)=>{const{__scopePopover:a,...s}=e,n=qn(HN,a);return r.jsx(Be.button,{type:"button",...s,ref:t,onClick:De(e.onClick,()=>n.onOpenChange(!1))})});K6.displayName=HN;var X6="PopoverArrow",Z6=u.forwardRef((e,t)=>{const{__scopePopover:a,...s}=e,n=Zc(a);return r.jsx(Iv,{...n,...s,ref:t})});Z6.displayName=X6;function VN(e){return e?"open":"closed"}var J6=LN,W6=qN,e5=UN,GN=BN;const YN=J6,QN=W6,ug=u.forwardRef(({className:e,align:t="center",sideOffset:a=4,...s},n)=>r.jsx(e5,{children:r.jsx(GN,{ref:n,align:t,sideOffset:a,className:ye("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));ug.displayName=GN.displayName;function fg({value:e,onChange:t,disabled:a=!1,variant:s="display"}){return s==="editable"&&t&&!a?r.jsxs(YN,{children:[r.jsx(QN,{asChild:!0,children:r.jsxs(U,{variant:"outline",size:"sm",className:"h-7 px-3",disabled:a,children:[e==="N"&&r.jsx(st,{variant:"outline",className:"bg-slate-100 text-slate-700 border-0",children:"N"}),e==="CL"&&r.jsx(st,{variant:"outline",className:"bg-blue-100 text-blue-700 border-0",children:"CL"}),!e&&r.jsx("span",{className:"text-slate-400 text-sm",children:"Selecionar"})]})}),r.jsx(ug,{className:"w-auto p-2",align:"start",children:r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs(U,{variant:e==="N"?"default":"outline",size:"sm",className:"justify-start",onClick:()=>t("N"),children:[r.jsx(st,{variant:"outline",className:"bg-slate-100 text-slate-700 border-0 mr-2",children:"N"}),e==="N"&&r.jsx(ju,{className:"w-4 h-4 ml-auto"})]}),r.jsxs(U,{variant:e==="CL"?"default":"outline",size:"sm",className:"justify-start",onClick:()=>t("CL"),children:[r.jsx(st,{variant:"outline",className:"bg-blue-100 text-blue-700 border-0 mr-2",children:"CL"}),e==="CL"&&r.jsx(ju,{className:"w-4 h-4 ml-auto"})]}),e&&r.jsxs(U,{variant:"ghost",size:"sm",className:"justify-start text-slate-500",onClick:()=>t(null),children:[r.jsx(Rs,{className:"w-4 h-4 mr-2"}),"Limpar"]})]})})]}):e==="N"?r.jsx(st,{variant:"outline",className:"bg-slate-100 text-slate-700 text-xs",children:"N"}):e==="CL"?r.jsx(st,{variant:"outline",className:"bg-blue-100 text-blue-700 text-xs",children:"CL"}):r.jsx("span",{className:"text-slate-300 text-xs",children:""})}function hg({value:e,onChange:t,disabled:a=!1,variant:s="single"}){const n=s==="row"&&t&&!a,o=l=>{switch(l){case 1:return"bg-red-500";case 2:return"bg-yellow-500";case 3:return"bg-green-500"}},i=(l,c)=>r.jsx("div",{className:ye("w-6 h-6 rounded-full border-2 transition-all",o(l),c?"border-slate-900 scale-110":"border-slate-300",n&&!a&&"cursor-pointer hover:scale-125"),onClick:()=>n&&(t==null?void 0:t(l)),title:`Qualidade ${l}`});return s==="single"?e?r.jsx("div",{className:"flex items-center gap-1.5",children:r.jsx("div",{className:ye("w-4 h-4 rounded-full border-2",o(e),"border-slate-300"),title:`Qualidade ${e}`})}):r.jsx("span",{className:"text-slate-300 text-xs",children:""}):r.jsxs(YN,{children:[r.jsx(QN,{asChild:!0,children:r.jsx(U,{variant:"outline",size:"sm",className:"h-7 px-3",disabled:a,children:r.jsx("div",{className:"flex items-center gap-1",children:e?r.jsxs(r.Fragment,{children:[i(e,!1),r.jsx("span",{className:"text-sm text-slate-600 ml-1",children:e})]}):r.jsx("span",{className:"text-slate-400 text-sm",children:"Selecionar"})})})}),r.jsx(ug,{className:"w-auto p-3",align:"start",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx("div",{className:"flex items-center gap-3",children:[1,2,3].map(l=>r.jsxs("button",{type:"button",className:ye("flex items-center gap-2 p-2 rounded-md transition-all","hover:bg-slate-100",e===l&&"bg-slate-100"),onClick:()=>t(l),disabled:a,children:[i(l,e===l),r.jsx("span",{className:"text-sm text-slate-700",children:l}),e===l&&r.jsx(ju,{className:"w-4 h-4 text-green-600"})]},l))}),e&&r.jsxs(U,{variant:"ghost",size:"sm",className:"justify-start text-slate-500",onClick:()=>t(null),disabled:a,children:[r.jsx(Rs,{className:"w-4 h-4 mr-2"}),"Limpar"]})]})})]})}var KN="Toggle",mg=u.forwardRef((e,t)=>{const{pressed:a,defaultPressed:s,onPressedChange:n,...o}=e,[i,l]=$s({prop:a,onChange:n,defaultProp:s??!1,caller:KN});return r.jsx(Be.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...o,ref:t,onClick:De(e.onClick,()=>{e.disabled||l(!i)})})});mg.displayName=KN;var XN=mg,Un="ToggleGroup",[ZN,B5]=Os(Un,[Af]),JN=Af(),pg=le.forwardRef((e,t)=>{const{type:a,...s}=e;if(a==="single"){const n=s;return r.jsx(t5,{...n,ref:t})}if(a==="multiple"){const n=s;return r.jsx(a5,{...n,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Un}\``)});pg.displayName=Un;var[WN,e1]=ZN(Un),t5=le.forwardRef((e,t)=>{const{value:a,defaultValue:s,onValueChange:n=()=>{},...o}=e,[i,l]=$s({prop:a,defaultProp:s??"",onChange:n,caller:Un});return r.jsx(WN,{scope:e.__scopeToggleGroup,type:"single",value:le.useMemo(()=>i?[i]:[],[i]),onItemActivate:l,onItemDeactivate:le.useCallback(()=>l(""),[l]),children:r.jsx(t1,{...o,ref:t})})}),a5=le.forwardRef((e,t)=>{const{value:a,defaultValue:s,onValueChange:n=()=>{},...o}=e,[i,l]=$s({prop:a,defaultProp:s??[],onChange:n,caller:Un}),c=le.useCallback(f=>l((h=[])=>[...h,f]),[l]),d=le.useCallback(f=>l((h=[])=>h.filter(p=>p!==f)),[l]);return r.jsx(WN,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:d,children:r.jsx(t1,{...o,ref:t})})});pg.displayName=Un;var[s5,r5]=ZN(Un),t1=le.forwardRef((e,t)=>{const{__scopeToggleGroup:a,disabled:s=!1,rovingFocus:n=!0,orientation:o,dir:i,loop:l=!0,...c}=e,d=JN(a),f=Cf(i),h={role:"group",dir:f,...c};return r.jsx(s5,{scope:a,rovingFocus:n,disabled:s,children:n?r.jsx(iE,{asChild:!0,...d,orientation:o,dir:f,loop:l,children:r.jsx(Be.div,{...h,ref:t})}):r.jsx(Be.div,{...h,ref:t})})}),Pu="ToggleGroupItem",a1=le.forwardRef((e,t)=>{const a=e1(Pu,e.__scopeToggleGroup),s=r5(Pu,e.__scopeToggleGroup),n=JN(e.__scopeToggleGroup),o=a.value.includes(e.value),i=s.disabled||e.disabled,l={...e,pressed:o,disabled:i},c=le.useRef(null);return s.rovingFocus?r.jsx(lE,{asChild:!0,...n,focusable:!i,active:o,ref:c,children:r.jsx(ny,{...l,ref:t})}):r.jsx(ny,{...l,ref:t})});a1.displayName=Pu;var ny=le.forwardRef((e,t)=>{const{__scopeToggleGroup:a,value:s,...n}=e,o=e1(Pu,a),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=o.type==="single"?i:void 0;return r.jsx(mg,{...l,...n,ref:t,onPressedChange:c=>{c?o.onItemActivate(s):o.onItemDeactivate(s)}})}),s1=pg,r1=a1;const n1=rl("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),n5=u.forwardRef(({className:e,variant:t,size:a,...s},n)=>r.jsx(XN,{ref:n,className:ye(n1({variant:t,size:a,className:e})),...s}));n5.displayName=XN.displayName;const o1=u.createContext({size:"default",variant:"default"}),i1=u.forwardRef(({className:e,variant:t,size:a,children:s,...n},o)=>r.jsx(s1,{ref:o,className:ye("flex items-center justify-center gap-1",e),...n,children:r.jsx(o1.Provider,{value:{variant:t,size:a},children:s})}));i1.displayName=s1.displayName;const pp=u.forwardRef(({className:e,children:t,variant:a,size:s,...n},o)=>{const i=u.useContext(o1);return r.jsx(r1,{ref:o,className:ye(n1({variant:i.variant||a,size:i.size||s}),e),...n,children:t})});pp.displayName=r1.displayName;function oy({ciclandoValue:e,qualidadeValue:t,onChangeCiclando:a,onChangeQualidade:s,disabled:n=!1,size:o="sm"}){const i=o==="sm"?"text-xs":"text-sm",l=o==="sm"?"w-4 h-4":"w-5 h-5",c=d=>{switch(d){case 1:return"bg-red-500";case 2:return"bg-yellow-500";case 3:return"bg-green-500"}};return r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-slate-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:ye("text-slate-500 font-medium",i),children:"Ciclo:"}),r.jsxs(i1,{type:"single",value:e||void 0,onValueChange:d=>{n||a(d==="CL"||d==="N"?d:null)},disabled:n,className:"gap-1",children:[r.jsx(pp,{value:"CL","aria-label":"CL",size:"sm",variant:"outline",className:ye("h-7 px-2 text-xs",e==="CL"&&"bg-blue-100 text-blue-700 border-blue-300 data-[state=on]:bg-blue-100",n&&"opacity-60"),children:"CL"}),r.jsx(pp,{value:"N","aria-label":"N",size:"sm",variant:"outline",className:ye("h-7 px-2 text-xs",e==="N"&&"bg-slate-100 text-slate-700 border-slate-300 data-[state=on]:bg-slate-100",n&&"opacity-60"),children:"N"})]}),e&&!n&&r.jsx(U,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-slate-400 hover:text-slate-600",onClick:()=>a(null),type:"button",children:r.jsx(Rs,{className:"w-3 h-3"})}),!e&&r.jsx("span",{className:ye("text-slate-300",i),children:""})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:ye("text-slate-500 font-medium",i),children:"Qualidade:"}),r.jsx("div",{className:"flex items-center gap-1.5",children:[1,2,3].map(d=>r.jsx("button",{type:"button",disabled:n,onClick:()=>{n||s(t===d?null:d)},className:ye(l,"rounded-full border-2 transition-all",c(d),t===d?"border-slate-900 scale-110 ring-2 ring-slate-300":"border-slate-300 opacity-50 hover:opacity-75 hover:scale-105",n&&"opacity-40 cursor-not-allowed",!n&&"cursor-pointer"),title:`Qualidade ${d}`},d))}),t&&!n&&r.jsx(U,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-slate-400 hover:text-slate-600",onClick:()=>s(null),type:"button",children:r.jsx(Rs,{className:"w-3 h-3"})}),!t&&r.jsx("span",{className:ye("text-slate-300",i),children:""})]})]})}function o5(){var pe;const e=za(),{toast:t}=ea(),[a,s]=u.useState(!1),[n,o]=u.useState(!1),i=u.useRef(!1),[l,c]=u.useState("form"),[d,f]=u.useState([]),[h,p]=u.useState([]),[m,j]=u.useState(!1),[x,g]=u.useState(!1),[b,v]=u.useState(!1),[y,_]=u.useState(!1),[w,S]=u.useState({fazenda_id:"",data_inicio:new Date().toISOString().split("T")[0],veterinario:"",tecnico:"",observacoes:""}),[N,C]=u.useState([]),[O,A]=u.useState({receptora_id:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),[q,B]=u.useState({identificacao:"",nome:"",observacoes:""});u.useEffect(()=>{ee()},[]),u.useEffect(()=>{l==="receptoras"&&w.fazenda_id?Q(w.fazenda_id):l!=="receptoras"&&p([])},[l,w.fazenda_id]);const ee=async()=>{try{const{data:k,error:P}=await T.from("fazendas").select("*").order("nome",{ascending:!0});if(P)throw P;f(k||[])}catch(k){t({title:"Erro ao carregar fazendas",description:k instanceof Error?k.message:"Erro desconhecido",variant:"destructive"})}},Q=async k=>{try{j(!0);const{data:P,error:ce}=await T.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",k);if(ce)throw ce;const re=(P==null?void 0:P.map(J=>J.receptora_id))||[];if(re.length===0){p([]);return}const{data:ie,error:oe}=await T.from("receptoras").select("id, identificacao, nome").in("id",re).order("identificacao",{ascending:!0});if(oe)throw oe;const Te=(ie||[]||[]).filter(J=>(J.id?String(J.id).trim():"")!=="").map(async J=>{const xe=J.id?String(J.id).trim():"";return xe&&await Vd(xe)==="VAZIA"?J:null}),Fe=(await Promise.all(Te)).filter(J=>J!==null);p(Fe)}catch(P){console.error("Error loading receptoras:",P),t({title:"Erro ao carregar receptoras",description:P instanceof Error?P.message:"Erro desconhecido",variant:"destructive"})}finally{j(!1)}},X=u.useMemo(()=>new Set(N.filter(k=>k.id&&k.id.trim()!==""&&k.id!==null&&k.id!==void 0).map(k=>String(k.id).trim())),[N]),R=u.useMemo(()=>h.filter(k=>{const P=k.id?String(k.id).trim():"";return P!==""&&!X.has(P)}),[h,X]),Y=u.useMemo(()=>{const k=Array.from(X).sort();return k.length>0?k.join("|"):"empty"},[N]),$=()=>{if(!w.fazenda_id||!w.data_inicio||!w.veterinario.trim()||!w.tecnico.trim()){t({title:"Erro de validao",description:"Fazenda, data de incio, veterinrio e tcnico so obrigatrios",variant:"destructive"});return}c("receptoras")},E=()=>{var ce;const k=((ce=O.receptora_id)==null?void 0:ce.trim())||"";if(!k){t({title:"Erro",description:"Selecione uma receptora",variant:"destructive"});return}const P=h.find(re=>(re.id?String(re.id).trim():"")===k);if(!P||!P.id){t({title:"Erro",description:"Receptora no encontrada ou invlida",variant:"destructive"});return}if(X.has(k)){t({title:"Receptora j adicionada",description:"Esta receptora j est na lista de selecionadas",variant:"destructive"});return}C(re=>{var oe;return re.some(he=>(he.id?String(he.id).trim():"")===k)?re:[...re,{id:P.id,identificacao:P.identificacao,nome:P.nome,observacoes:((oe=O.observacoes)==null?void 0:oe.trim())||void 0,ciclando_classificacao:O.ciclando_classificacao||null,qualidade_semaforo:O.qualidade_semaforo||null}]}),A({receptora_id:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),v(!1)},D=async()=>{var k;if(!q.identificacao.trim()){t({title:"Erro de validao",description:"Identificao (brinco)  obrigatria",variant:"destructive"});return}try{o(!0);const P={identificacao:q.identificacao};q.nome.trim()&&(P.nome=q.nome);const{data:ce,error:re}=await T.from("receptoras").insert([P]).select().single();if(re)throw re.code==="23505"?new Error("J existe uma receptora com esse brinco nesta fazenda."):re;const{error:ie}=await T.from("receptora_fazenda_historico").insert([{receptora_id:ce.id,fazenda_id:w.fazenda_id,data_inicio:new Date().toISOString().split("T")[0],data_fim:null}]);ie&&((k=ie.message)!=null&&k.includes("brinco")||ie.code==="P0001"||console.error("Erro ao criar histrico de fazenda:",ie)),C([...N,{id:ce.id,identificacao:ce.identificacao,nome:ce.nome,observacoes:q.observacoes||void 0,ciclando_classificacao:q.ciclando_classificacao||null,qualidade_semaforo:q.qualidade_semaforo||null,isNew:!0}]),B({identificacao:"",nome:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),_(!1),Q(w.fazenda_id)}catch(P){t({title:"Erro ao criar receptora",description:P instanceof Error?P.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},G=k=>{C(N.filter((P,ce)=>ce!==k))},M=async()=>{if(i.current||n)return;if(N.length===0){t({title:"Erro de validao",description:"Adicione pelo menos 1 receptora antes de finalizar o 1 passo",variant:"destructive"});return}const k=N.filter(he=>!he.id||he.id===""||he.id===null||he.id===void 0);if(k.length>0){console.error("Receptoras com IDs invlidos:",k),t({title:"Erro de validao",description:"Seleo de receptora invlida. Refaa a seleo.",variant:"destructive"});return}const P=N.filter(he=>he.id&&he.id!==""&&he.id!==null&&he.id!==void 0);if(P.length!==N.length||P.length===0){console.error("Receptoras invlidas ou nenhuma vlida aps validao"),t({title:"Erro de validao",description:"Seleo de receptora invlida. Refaa a seleo.",variant:"destructive"});return}const ce=P.map(he=>he.id),re=P.map(he=>he.observacoes||null),ie=P.map(he=>he.ciclando_classificacao||null),oe=P.map(he=>he.qualidade_semaforo||null);try{i.current=!0,o(!0);const he=`VET: ${w.veterinario.trim()} | TEC: ${w.tecnico.trim()}`,{data:Te,error:Pe}=await T.rpc("criar_protocolo_passo1_atomico",{p_fazenda_id:w.fazenda_id,p_data_inicio:w.data_inicio,p_responsavel_inicio:he,p_receptoras_ids:ce,p_data_inclusao:w.data_inicio,p_observacoes:w.observacoes.trim()||null,p_receptoras_observacoes:re});if(Pe)throw console.error("Erro ao criar protocolo (RPC):",Pe),Pe;if(!Te)throw new Error("Protocolo criado mas ID no retornado");const{data:Fe,error:J}=await T.from("protocolo_receptoras").select("id, receptora_id").eq("protocolo_id",Te).in("receptora_id",ce);if(J)console.error("Erro ao buscar receptoras do protocolo:",J);else if(Fe&&Fe.length>0){const xe=new Map(ce.map((de,_e)=>[de,_e])),I=Fe.map(async de=>{const _e=xe.get(de.receptora_id);if(_e===void 0)return;const Se=ie[_e],ue=oe[_e],{error:z}=await T.from("protocolo_receptoras").update({ciclando_classificacao:Se,qualidade_semaforo:ue}).eq("id",de.id);z&&console.error(`Erro ao atualizar classificaes da receptora ${de.receptora_id}:`,z)});await Promise.allSettled(I)}t({title:"Protocolo criado com sucesso",description:`${N.length} receptoras adicionadas ao protocolo`}),e("/protocolos")}catch(he){console.error("Erro ao finalizar protocolo:",he);const Te=he instanceof Error?he.message:"Erro desconhecido ao finalizar protocolo";t({title:"Erro ao finalizar protocolo",description:Te,variant:"destructive"})}finally{o(!1),i.current=!1}},K=()=>{l==="form"?e("/protocolos"):c("form")},H=()=>{w.fazenda_id||N.length>0?g(!0):e("/protocolos")},ne=()=>{g(!1),e("/protocolos")};return l==="form"?r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:H,children:r.jsx(es,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Novo Protocolo"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Primeira visita - Cadastrar novo protocolo de sincronizao"})]})]})}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Informaes do Protocolo"})}),r.jsx(we,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"fazenda_id",children:"Fazenda *"}),r.jsxs(Ze,{value:w.fazenda_id,onValueChange:k=>S({...w,fazenda_id:k}),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione a fazenda"})}),r.jsx(Qe,{children:d.map(k=>r.jsx(ve,{value:k.id,children:k.nome},k.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"data_inicio",children:"Data de Incio *"}),r.jsx(se,{id:"data_inicio",type:"date",value:w.data_inicio,onChange:k=>S({...w,data_inicio:k.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"veterinario",children:"Veterinrio Responsvel *"}),r.jsx(se,{id:"veterinario",value:w.veterinario,onChange:k=>S({...w,veterinario:k.target.value}),placeholder:"Nome do veterinrio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"tecnico",children:"Tcnico Responsvel *"}),r.jsx(se,{id:"tecnico",value:w.tecnico,onChange:k=>S({...w,tecnico:k.target.value}),placeholder:"Nome do tcnico/funcionrio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Aa,{id:"observacoes",value:w.observacoes,onChange:k=>S({...w,observacoes:k.target.value}),placeholder:"Observaes sobre o protocolo",rows:3})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx(U,{onClick:$,className:"bg-green-600 hover:bg-green-700",disabled:a,children:"Continuar para Receptoras"}),r.jsx(U,{type:"button",variant:"outline",onClick:H,disabled:a,children:"Sair"})]})]})})]}),r.jsx(Qi,{open:x,onOpenChange:g,children:r.jsxs(wo,{children:[r.jsxs(So,{children:[r.jsx(No,{children:"Sair sem finalizar?"}),r.jsx(Co,{children:"Se voc sair agora, nenhum protocolo ser criado. Todos os dados preenchidos sero perdidos."})]}),r.jsxs(Eo,{children:[r.jsx(To,{children:"Cancelar"}),r.jsx(Ao,{onClick:ne,children:"Sim, sair"})]})]})})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:K,children:r.jsx(es,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Adicionar Receptoras"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Selecione as receptoras para este protocolo"})]})]}),r.jsxs(U,{variant:"ghost",onClick:H,children:[r.jsx(Rs,{className:"w-4 h-4 mr-2"}),"Sair"]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Informaes do Protocolo"})}),r.jsxs(we,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:((pe=d.find(k=>k.id===w.fazenda_id))==null?void 0:pe.nome)||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data Incio"}),r.jsx("p",{className:"text-base text-slate-900",children:w.data_inicio})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Veterinrio"}),r.jsx("p",{className:"text-base text-slate-900",children:w.veterinario})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tcnico"}),r.jsx("p",{className:"text-base text-slate-900",children:w.tecnico})]})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Ae,{children:["Receptoras do Protocolo (",N.length,")"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Dt,{open:b,onOpenChange:k=>{v(k),k||A({receptora_id:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null})},children:[r.jsx(Ds,{asChild:!0,children:r.jsxs(U,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ts,{className:"w-4 h-4 mr-2"}),"Adicionar Receptora"]})}),r.jsxs(_t,{className:"max-w-lg",children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Adicionar Receptora ao Protocolo"}),r.jsx(Ot,{children:"Selecione uma receptora VAZIA da fazenda ou cadastre uma nova"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Receptora *"}),r.jsxs(Ze,{value:O.receptora_id||"",onValueChange:k=>{const P=(k==null?void 0:k.trim())||"";A({...O,receptora_id:P})},children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione uma receptora VAZIA"})}),r.jsx(Qe,{children:m?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Carregando receptoras..."}):R.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhuma receptora VAZIA disponvel nesta fazenda"}):R.map(k=>{const P=k.id?String(k.id).trim():"";return P?r.jsxs(ve,{value:P,children:[k.identificacao," ",k.nome?`- ${k.nome}`:""]},k.id):null}).filter(k=>k!==null)},Y)]})]}),r.jsx("div",{className:"space-y-2",children:r.jsx(oy,{ciclandoValue:O.ciclando_classificacao,qualidadeValue:O.qualidade_semaforo,onChangeCiclando:k=>A({...O,ciclando_classificacao:k}),onChangeQualidade:k=>A({...O,qualidade_semaforo:k}),size:"sm"})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Observaes"}),r.jsx(Aa,{value:O.observacoes,onChange:k=>A({...O,observacoes:k.target.value}),placeholder:"Observaes sobre a incluso",rows:2})]}),r.jsx(U,{onClick:E,className:"w-full bg-green-600 hover:bg-green-700",disabled:R.length===0||m||!O.receptora_id,children:"Adicionar"})]})]})]}),r.jsxs(Dt,{open:y,onOpenChange:k=>{_(k),k||B({identificacao:"",nome:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null})},children:[r.jsx(Ds,{asChild:!0,children:r.jsxs(U,{variant:"outline",children:[r.jsx(Eu,{className:"w-4 h-4 mr-2"}),"Cadastrar Nova"]})}),r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsx(wt,{children:"Cadastrar Nova Receptora"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Identificao (Brinco) *"}),r.jsx(se,{value:q.identificacao,onChange:k=>B({...q,identificacao:k.target.value}),placeholder:"Nmero do brinco"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Nome"}),r.jsx(se,{value:q.nome,onChange:k=>B({...q,nome:k.target.value}),placeholder:"Nome da receptora (opcional)"})]}),r.jsx("div",{className:"space-y-2",children:r.jsx(oy,{ciclandoValue:q.ciclando_classificacao,qualidadeValue:q.qualidade_semaforo,onChangeCiclando:k=>B({...q,ciclando_classificacao:k}),onChangeQualidade:k=>B({...q,qualidade_semaforo:k}),size:"sm"})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Observaes"}),r.jsx(Aa,{value:q.observacoes,onChange:k=>B({...q,observacoes:k.target.value}),placeholder:"Observaes sobre a receptora",rows:2})]}),r.jsxs(U,{onClick:D,className:"w-full bg-blue-600 hover:bg-blue-700",disabled:n,children:[r.jsx(Eu,{className:"w-4 h-4 mr-2"}),n?"Criando...":"Criar e Adicionar"]})]})]})]})]})]})}),r.jsx(we,{children:N.length===0?r.jsx("div",{className:"text-center py-8 text-slate-500",children:"Nenhuma receptora adicionada. Adicione pelo menos uma antes de finalizar."}):r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Brinco"}),r.jsx(V,{children:"Nome"}),r.jsx(V,{children:"Ciclando"}),r.jsx(V,{children:"Qualidade"}),r.jsx(V,{children:"Observaes"}),r.jsx(V,{className:"text-right",children:"Aes"})]})}),r.jsx(Rt,{children:N.map((k,P)=>{const ce=k.id&&k.id.trim()!==""?k.id:`new-${P}`,re=oe=>{C(he=>he.map((Te,Pe)=>Pe===P?{...Te,ciclando_classificacao:oe}:Te))},ie=oe=>{C(he=>he.map((Te,Pe)=>Pe===P?{...Te,qualidade_semaforo:oe}:Te))};return r.jsxs(ge,{children:[r.jsx(L,{className:"font-medium",children:k.identificacao}),r.jsx(L,{children:k.nome||"-"}),r.jsx(L,{children:r.jsx(fg,{value:k.ciclando_classificacao,onChange:re,variant:"editable"})}),r.jsx(L,{children:r.jsx(hg,{value:k.qualidade_semaforo,onChange:ie,variant:"row"})}),r.jsx(L,{children:k.observacoes||"-"}),r.jsx(L,{className:"text-right",children:r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>G(P),children:r.jsx(Rs,{className:"w-4 h-4"})})})]},ce)})})]})})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs(U,{onClick:M,disabled:N.length===0||n||i.current,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(rf,{className:"w-4 h-4 mr-2"}),n||i.current?"Finalizando...":"Finalizar 1 Passo"]}),r.jsx(U,{variant:"outline",onClick:K,disabled:n||i.current,children:"Voltar"})]}),r.jsx(Qi,{open:x,onOpenChange:g,children:r.jsxs(wo,{children:[r.jsxs(So,{children:[r.jsx(No,{children:"Sair sem finalizar?"}),r.jsx(Co,{children:"Se voc sair agora, nenhum protocolo ser criado. Todos os dados preenchidos sero perdidos."})]}),r.jsxs(Eo,{children:[r.jsx(To,{children:"Cancelar"}),r.jsx(Ao,{onClick:ne,children:"Sim, sair"})]})]})})]})}function i5(){const{id:e}=$r(),t=za(),{toast:a}=ea(),[s,n]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(""),[h,p]=u.useState([]),[m,j]=u.useState([]),x=u.useRef(!1),[g,b]=u.useState(!1),[v,y]=u.useState(!1),[_,w]=u.useState(!1),[S,N]=u.useState({receptora_id:"",observacoes:""}),[C,O]=u.useState({identificacao:"",nome:"",observacoes:""});u.useEffect(()=>{e&&A()},[e]);const A=async()=>{try{n(!0);const{data:E,error:D}=await T.from("protocolos_sincronizacao").select("*").eq("id",e).single();if(D)throw D;c(E);const{data:G,error:M}=await T.from("fazendas").select("nome").eq("id",E.fazenda_id).single();if(M)throw M;f(G.nome),await q(),await B(E.fazenda_id)}catch(E){a({title:"Erro ao carregar dados",description:E instanceof Error?E.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},q=async()=>{try{const{data:E,error:D}=await T.from("protocolo_receptoras").select("*").eq("protocolo_id",e);if(D)throw D;if(!E||E.length===0){p([]);return}const G=E.map(pe=>pe.receptora_id),{data:M,error:K}=await T.from("receptoras").select("*").in("id",G);if(K)throw K;const H=new Map((M==null?void 0:M.map(pe=>[pe.id,pe]))||[]),ne=E.map(pe=>{const k=H.get(pe.receptora_id);return k?{...k,pr_id:pe.id,pr_status:pe.status,pr_motivo_inapta:pe.motivo_inapta,pr_observacoes:pe.observacoes}:(console.warn(`Receptora ${pe.receptora_id} no encontrada`),null)}).filter(pe=>pe!==null);p(ne)}catch(E){console.error("Error loading receptoras:",E)}},B=async E=>{try{const{data:D,error:G}=await T.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",E);if(G)throw G;const M=(D==null?void 0:D.map(oe=>oe.receptora_id))||[];if(M.length===0){j([]);return}const{data:K,error:H}=await T.from("receptoras").select("id, identificacao, nome").in("id",M).order("identificacao",{ascending:!0});if(H)throw H;const ne=K||[],{data:pe,error:k}=await T.from("protocolo_receptoras").select("receptora_id").eq("protocolo_id",e);if(k)throw k;const P=(pe==null?void 0:pe.map(oe=>oe.receptora_id))||[],ce=(ne||[]).filter(oe=>!P.includes(oe.id)).map(async oe=>await Vd(oe.id)==="VAZIA"?oe:null),ie=(await Promise.all(ce)).filter(oe=>oe!==null);j(ie)}catch(D){console.error("Error loading receptoras disponiveis:",D)}},ee=async()=>{var E,D,G;if(!(o||x.current)){if(!S.receptora_id){a({title:"Erro",description:"Selecione uma receptora",variant:"destructive"});return}try{x.current=!0,i(!0);const{data:M,error:K}=await T.from("receptoras").select("id, identificacao").eq("id",S.receptora_id).single();if(K)throw K;const{data:H,error:ne}=await T.from("protocolo_receptoras").select("receptora_id").eq("protocolo_id",e);if(ne&&console.error("Erro ao verificar receptoras no protocolo:",ne),H&&H.length>0){const oe=H.map(Fe=>Fe.receptora_id);if(oe.includes(S.receptora_id)){a({title:"Receptora j est no protocolo",description:"Essa receptora j est adicionada a este protocolo.",variant:"destructive"}),i(!1),x.current=!1;return}const{data:he,error:Te}=await T.from("receptoras").select("id, identificacao").in("id",oe);if(Te&&console.error("Erro ao buscar receptoras do protocolo:",Te),he==null?void 0:he.find(Fe=>Fe.identificacao===M.identificacao)){a({title:"Brinco j est no protocolo",description:`J existe uma receptora com o brinco "${M.identificacao}" neste protocolo. No  possvel adicionar outra receptora com o mesmo brinco.`,variant:"destructive"}),i(!1),x.current=!1;return}}const{data:pe,error:k}=await T.from("protocolo_receptoras").select(`
          id,
          protocolo_id,
          status,
          motivo_inapta,
          protocolos_sincronizacao!inner (
            id,
            status,
            data_inicio
          )
        `).eq("receptora_id",S.receptora_id).neq("protocolos_sincronizacao.status","PASSO2_FECHADO");if(k&&console.error("Erro ao verificar protocolos ativos:",k),pe&&pe.length>0){const oe=pe.find(Te=>Te.protocolo_id===e);if(oe){a({title:"Receptora j est no protocolo",description:`Esta receptora j foi adicionada a este protocolo anteriormente (Status: ${oe.status}). Recarregue a pgina para ver a lista atualizada.`,variant:"destructive"}),i(!1),x.current=!1,A();return}const he=pe.filter(Te=>{var J;const Pe=(J=Te.protocolos_sincronizacao)==null?void 0:J.status,Fe=Te.status;return Fe==="INAPTA"?!1:(Fe==="APTA"||Fe==="INICIADA")&&Pe!=="PASSO2_FECHADO"});if(he.length>0){const Te=he[0],Pe=Te.protocolos_sincronizacao,Fe=((E=Pe==null?void 0:Pe.id)==null?void 0:E.substring(0,8))||"N/A",J=(Pe==null?void 0:Pe.status)||"N/A",xe=Te.status;a({title:"Receptora em outro protocolo ativo",description:`Esta receptora est vinculada a outro protocolo ativo (ID: ${Fe}, Status do protocolo: ${J}, Status da receptora: ${xe}). Uma receptora s pode estar em um protocolo ativo por vez. Finalize ou feche o protocolo anterior antes de adicionar a um novo.`,variant:"destructive"}),i(!1),x.current=!1;return}}const P=await Vd(S.receptora_id);if(P!=="VAZIA"){a({title:"Receptora no disponvel",description:{"EM SINCRONIZAO":"J est em protocolo em andamento.",SINCRONIZADA:"J est sincronizada aguardando TE.",SERVIDA:"J recebeu embrio e aguarda diagnstico/sexagem.",PRENHE:"Est prenhe.","PRENHE (FMEA)":"Est prenhe.","PRENHE (MACHO)":"Est prenhe.","PRENHE (SEM SEXO)":"Est prenhe."}[P]||"Receptora no est disponvel.",variant:"destructive"}),i(!1),x.current=!1;return}const ce={protocolo_id:e,receptora_id:S.receptora_id,evento_fazenda_id:l==null?void 0:l.fazenda_id,data_inclusao:l==null?void 0:l.data_inicio,status:"INICIADA",observacoes:S.observacoes||null},{error:re,data:ie}=await T.from("protocolo_receptoras").insert([ce]).select();if(re){if(console.error("Erro ao inserir receptora:",re),console.error("Dados tentados:",ce),console.error("Cdigo do erro:",re.code),console.error("Mensagem do erro:",re.message),re.code==="409"||re.code==="23505"||(D=re.message)!=null&&D.includes("duplicate")||(G=re.message)!=null&&G.includes("unique")){const{data:oe,error:he}=await T.from("protocolo_receptoras").select(`
              id,
              protocolo_id,
              receptora_id,
              status,
              data_inclusao,
              protocolos_sincronizacao!inner (
                id,
                status,
                data_inicio,
                fazenda_id
              )
            `).eq("receptora_id",S.receptora_id);he&&console.error("Erro ao buscar protocolos da receptora:",he);const Te=oe==null?void 0:oe.find(Pe=>Pe.protocolo_id===e);if(Te)a({title:"Receptora j est no protocolo",description:`Esta receptora j foi adicionada a este protocolo anteriormente (Status: ${Te.status}). Recarregue a pgina para ver a lista atualizada.`,variant:"destructive"});else{const Pe=(oe==null?void 0:oe.filter(Fe=>Fe.protocolo_id!==e))||[];if(Pe.length>0){const Fe=Pe.map(J=>{var xe,I,de;return`Protocolo ${(I=(xe=J.protocolos_sincronizacao)==null?void 0:xe.id)==null?void 0:I.substring(0,8)} (${((de=J.protocolos_sincronizacao)==null?void 0:de.status)||"N/A"})`}).join(", ");a({title:"Receptora vinculada a outro(s) protocolo(s)",description:`Esta receptora est vinculada a outro(s) protocolo(s): ${Fe}. Ela precisa estar disponvel (sem vnculos ativos) para ser adicionada a um novo protocolo.`,variant:"destructive"})}else a({title:"Erro ao adicionar receptora",description:`No foi possvel adicionar esta receptora. Cdigo de erro: ${re.code||"DESCONHECIDO"}. Verifique o histrico da receptora ou entre em contato com o suporte.`,variant:"destructive"})}i(!1),x.current=!1;return}throw re}a({title:"Receptora adicionada",description:"Receptora adicionada ao protocolo com sucesso"}),b(!1),N({receptora_id:"",observacoes:""}),A()}catch(M){a({title:"Erro ao adicionar receptora",description:M instanceof Error?M.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1),x.current=!1}}},Q=async()=>{var E;if(!C.identificacao.trim()){a({title:"Erro de validao",description:"Identificao (brinco)  obrigatria",variant:"destructive"});return}try{i(!0);const{data:D,error:G}=await T.from("receptoras").select("id, identificacao").eq("identificacao",C.identificacao.trim());if(G&&console.error("Erro ao verificar receptoras com brinco:",G),D&&D.length>0){const ie=D.map(Fe=>Fe.id),{data:oe,error:he}=await T.from("protocolo_receptoras").select("receptora_id, status").eq("protocolo_id",e);if(he&&console.error("Erro ao verificar receptoras no protocolo:",he),oe&&oe.length>0){const Fe=oe.map(Se=>Se.receptora_id),J=oe.find(Se=>ie.includes(Se.receptora_id));if(J){a({title:"Receptora j est no protocolo",description:`Esta receptora j foi adicionada a este protocolo (Status: ${J.status}).`,variant:"destructive"}),i(!1);return}const{data:xe,error:I}=await T.from("receptoras").select("id, identificacao").in("id",Fe);I&&console.error("Erro ao buscar receptoras do protocolo:",I);const de=C.identificacao.trim(),_e=xe==null?void 0:xe.find(Se=>Se.identificacao===de);if(_e){const Se=oe.find(z=>z.receptora_id===_e.id),ue=(Se==null?void 0:Se.status)||"N/A";a({title:"Brinco j est no protocolo",description:`J existe uma receptora com o brinco "${de}" neste protocolo (Status: ${ue}). No  possvel criar ou adicionar outra receptora com o mesmo brinco.`,variant:"destructive"}),i(!1);return}}for(const Fe of D){const J=await Vd(Fe.id);if(J!=="VAZIA"){const I={"EM SINCRONIZAO":"J est em protocolo em andamento.",SINCRONIZADA:"J est sincronizada aguardando TE.",SERVIDA:"J recebeu embrio e aguarda diagnstico/sexagem.",PRENHE:"Est prenhe.","PRENHE (FMEA)":"Est prenhe.","PRENHE (MACHO)":"Est prenhe."}[J]||`Status: ${J}`;a({title:"Receptora no disponvel",description:`J existe uma receptora com esse brinco que est ${I} No  possvel criar uma nova receptora com o mesmo brinco.`,variant:"destructive"}),i(!1);return}}const{data:Te,error:Pe}=await T.from("receptora_fazenda_historico").select("receptora_id, fazenda_id").in("receptora_id",ie).eq("fazenda_id",l.fazenda_id).is("data_fim",null);if(Pe&&console.error("Erro ao verificar histrico de fazendas:",Pe),Te&&Te.length>0){const Fe=Te[0].receptora_id,J=D.find(xe=>xe.id===Fe);if(J){const xe={protocolo_id:e,receptora_id:J.id,evento_fazenda_id:l==null?void 0:l.fazenda_id,data_inclusao:l==null?void 0:l.data_inicio,status:"INICIADA",observacoes:C.observacoes||null},{error:I}=await T.from("protocolo_receptoras").insert([xe]);if(I){if(I.code==="23505"){a({title:"Receptora j est no protocolo",description:"Esta receptora j foi adicionada a este protocolo.",variant:"destructive"}),i(!1),await A();return}throw I}a({title:"Receptora adicionada",description:"Receptora existente foi adicionada ao protocolo com sucesso"}),y(!1),O({identificacao:"",nome:"",observacoes:""}),await A(),i(!1);return}}}const M={identificacao:C.identificacao.trim()};C.nome.trim()&&(M.nome=C.nome.trim());const{data:K,error:H}=await T.from("receptoras").insert([M]).select().single();if(H)throw H.code==="23505"?new Error("J existe uma receptora com esse brinco. Verifique se ela j est na fazenda."):H;const{data:ne,error:pe}=await T.from("receptora_fazenda_historico").select("id").eq("receptora_id",K.id).eq("fazenda_id",l.fazenda_id).is("data_fim",null).maybeSingle();if(pe&&console.error("Erro ao verificar histrico existente:",pe),!ne){const{error:ie}=await T.from("receptora_fazenda_historico").insert([{receptora_id:K.id,fazenda_id:l.fazenda_id,data_inicio:new Date().toISOString().split("T")[0],data_fim:null}]);if(ie){if((E=ie.message)!=null&&E.includes("brinco")||ie.code==="P0001"){await T.from("receptoras").delete().eq("id",K.id);const{data:oe}=await T.from("receptoras").select("id").eq("identificacao",C.identificacao.trim()).neq("id",K.id);if(oe&&oe.length>0){const he=oe[0].id,{data:Te}=await T.from("protocolo_receptoras").select("id, status").eq("protocolo_id",e).eq("receptora_id",he).maybeSingle();if(Te)a({title:"Receptora j est no protocolo",description:`Esta receptora j foi adicionada a este protocolo (Status: ${Te.status}).`});else{const{error:Pe}=await T.from("protocolo_receptoras").insert([{protocolo_id:e,receptora_id:he,evento_fazenda_id:l==null?void 0:l.fazenda_id,data_inclusao:l==null?void 0:l.data_inicio,status:"INICIADA",observacoes:C.observacoes||null}]);if(Pe)throw Pe;a({title:"Receptora adicionada",description:"Receptora existente foi adicionada ao protocolo com sucesso"})}y(!1),O({identificacao:"",nome:"",observacoes:""}),await A(),i(!1);return}throw new Error("J existe uma receptora com esse brinco nesta fazenda.")}throw ie}}const{data:k,error:P}=await T.from("receptora_fazenda_historico").select("id").eq("receptora_id",K.id).eq("fazenda_id",l.fazenda_id).is("data_fim",null).maybeSingle();if(P&&console.error("Erro ao verificar histrico aps criao:",P),!k){await T.from("receptoras").delete().eq("id",K.id),a({title:"Erro ao criar receptora",description:"No foi possvel vincular a receptora  fazenda. Verifique se j existe uma receptora com esse brinco.",variant:"destructive"}),i(!1);return}const ce={protocolo_id:e,receptora_id:K.id,evento_fazenda_id:l==null?void 0:l.fazenda_id,data_inclusao:l==null?void 0:l.data_inicio,status:"INICIADA",observacoes:C.observacoes||null},{error:re}=await T.from("protocolo_receptoras").insert([ce]);if(re){if(await T.from("receptoras").delete().eq("id",K.id),re.code==="23505"){a({title:"Receptora j est no protocolo",description:"Esta receptora j foi adicionada a este protocolo.",variant:"destructive"}),i(!1),await A();return}throw re}a({title:"Receptora criada e adicionada",description:"Receptora criada e adicionada ao protocolo com sucesso"}),y(!1),O({identificacao:"",nome:"",observacoes:""}),await A()}catch(D){a({title:"Erro ao criar receptora",description:D instanceof Error?D.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},X=async()=>{if(!(l!=null&&l.fazenda_id)||!(l!=null&&l.data_inicio)||!(l!=null&&l.responsavel_inicio)){a({title:"Erro de validao",description:"Protocolo incompleto: faltam dados obrigatrios",variant:"destructive"});return}if(h.length===0){a({title:"Erro de validao",description:"Adicione pelo menos 1 receptora antes de finalizar o 1 passo",variant:"destructive"});return}try{i(!0);const{error:E}=await T.from("protocolos_sincronizacao").update({status:"PASSO1_FECHADO"}).eq("id",e);if(E)throw E;await A(),w(!0)}catch(E){a({title:"Erro ao finalizar 1 passo",description:E instanceof Error?E.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},R=async()=>{try{i(!0);const{error:E}=await T.from("protocolo_receptoras").delete().eq("protocolo_id",e);if(E)throw E;const{error:D}=await T.from("protocolos_sincronizacao").delete().eq("id",e);if(D)throw D;a({title:"Protocolo cancelado",description:"Protocolo cancelado com sucesso"}),t("/protocolos")}catch(E){a({title:"Erro ao cancelar protocolo",description:E instanceof Error?E.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},Y=()=>{w(!1),a({title:"1 passo concludo com sucesso",description:`${h.length} receptoras em sincronizao`}),t("/protocolos")};if(s)return r.jsx(zt,{});if(!l)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Protocolo no encontrado"}),r.jsx(U,{onClick:()=>t("/protocolos"),className:"mt-4",children:"Voltar para Protocolos"})]});const $=l.status==="PASSO1_ABERTO"||l.status==="ABERTO";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>t("/protocolos"),children:r.jsx(es,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["Protocolo - ",d]}),r.jsx("p",{className:"text-slate-600 mt-1",children:$?"Gerenciar receptoras do 1 passo":"Protocolo finalizado"})]})]}),r.jsx("div",{className:"flex gap-2",children:$&&r.jsxs(r.Fragment,{children:[r.jsxs(Dt,{open:g,onOpenChange:b,children:[r.jsx(Ds,{asChild:!0,children:r.jsxs(U,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ts,{className:"w-4 h-4 mr-2"}),"Adicionar Receptora"]})}),r.jsxs(_t,{className:"max-w-lg",children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Adicionar Receptora ao Protocolo"}),r.jsxs(Ot,{children:["Selecione uma receptora VAZIA da fazenda ",d," ou cadastre uma nova"]})]}),r.jsxs(Rf,{defaultValue:"existing",className:"w-full",children:[r.jsxs(Xc,{className:"grid w-full grid-cols-2",children:[r.jsx(Ir,{value:"existing",children:"Receptora Existente"}),r.jsx(Ir,{value:"new",children:"Cadastrar Nova"})]}),r.jsxs(Fr,{value:"existing",className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Receptora *"}),r.jsxs(Ze,{value:S.receptora_id,onValueChange:E=>N({...S,receptora_id:E}),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione uma receptora VAZIA"})}),r.jsx(Qe,{children:m.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhuma receptora VAZIA disponvel nesta fazenda"}):m.map(E=>r.jsxs(ve,{value:E.id,children:[E.identificacao," ",E.nome?`- ${E.nome}`:""]},E.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Observaes"}),r.jsx(Aa,{value:S.observacoes,onChange:E=>N({...S,observacoes:E.target.value}),placeholder:"Observaes sobre a incluso",rows:2})]}),r.jsx(U,{onClick:ee,className:"w-full bg-green-600 hover:bg-green-700",disabled:o||m.length===0,children:o?"Adicionando...":"Adicionar"})]}),r.jsxs(Fr,{value:"new",className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Identificao (Brinco) *"}),r.jsx(se,{value:C.identificacao,onChange:E=>O({...C,identificacao:E.target.value}),placeholder:"Nmero do brinco"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Nome"}),r.jsx(se,{value:C.nome,onChange:E=>O({...C,nome:E.target.value}),placeholder:"Nome da receptora (opcional)"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Observaes"}),r.jsx(Aa,{value:C.observacoes,onChange:E=>O({...C,observacoes:E.target.value}),placeholder:"Observaes sobre a receptora",rows:2})]}),r.jsxs(U,{onClick:Q,className:"w-full bg-blue-600 hover:bg-blue-700",disabled:o,children:[r.jsx(Eu,{className:"w-4 h-4 mr-2"}),o?"Criando...":"Criar e Adicionar"]})]})]})]})]}),r.jsxs(U,{onClick:X,disabled:h.length===0||o,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(rf,{className:"w-4 h-4 mr-2"}),o?"Finalizando...":"Finalizar 1 Passo"]}),r.jsxs(Qi,{children:[r.jsx(q6,{asChild:!0,children:r.jsxs(U,{variant:"outline",className:"border-red-600 text-red-600 hover:bg-red-50",children:[r.jsx(Su,{className:"w-4 h-4 mr-2"}),"Cancelar"]})}),r.jsxs(wo,{children:[r.jsxs(So,{children:[r.jsx(No,{children:"Cancelar Protocolo"}),r.jsx(Co,{children:"Tem certeza que deseja cancelar este protocolo? Esta ao no pode ser desfeita. Todas as receptoras vinculadas sero removidas do protocolo."})]}),r.jsxs(Eo,{children:[r.jsx(To,{children:"No, manter protocolo"}),r.jsx(Ao,{onClick:R,className:"bg-red-600 hover:bg-red-700",children:"Sim, cancelar protocolo"})]})]})]})]})})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Informaes do Protocolo"})}),r.jsxs(we,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:d})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data Incio"}),r.jsx("p",{className:"text-base text-slate-900",children:Kt(l.data_inicio)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Responsvel"}),r.jsx("p",{className:"text-base text-slate-900",children:l.responsavel_inicio})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Status"}),r.jsx("div",{className:"text-base text-slate-900",children:$?r.jsx(st,{variant:"default",children:"1 Passo"}):r.jsx(st,{variant:"secondary",children:"1 Passo Concludo"})})]})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsxs(Ae,{children:["Receptoras do Protocolo (",h.length,")"]})}),r.jsx(we,{children:r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Brinco"}),r.jsx(V,{children:"Nome"}),r.jsx(V,{children:"Status"}),r.jsx(V,{children:"Observaes"})]})}),r.jsx(Rt,{children:h.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:4,className:"text-center text-slate-500",children:"Nenhuma receptora adicionada ao protocolo"})}):h.map(E=>r.jsxs(ge,{children:[r.jsx(L,{className:"font-medium",children:E.identificacao}),r.jsx(L,{children:E.nome||"-"}),r.jsx(L,{children:r.jsx(st,{variant:"secondary",children:E.pr_status==="INICIADA"?"Em Sincronizao":E.pr_status})}),r.jsx(L,{className:"max-w-xs truncate",children:E.pr_observacoes||"-"})]},E.id))})]})})]}),r.jsx(Dt,{open:_,onOpenChange:w,children:r.jsxs(_t,{className:"max-w-2xl",children:[r.jsxs(jt,{children:[r.jsxs(wt,{className:"flex items-center gap-2",children:[r.jsx(Bm,{className:"w-6 h-6 text-green-600"}),"Resumo do 1 Passo"]}),r.jsx(Ot,{children:"1 passo concludo com sucesso"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:d})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data do 1 Passo"}),r.jsx("p",{className:"text-base text-slate-900",children:l&&Kt(l.data_inicio)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Responsvel"}),r.jsx("p",{className:"text-base text-slate-900",children:l==null?void 0:l.responsavel_inicio})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total de Receptoras"}),r.jsx("p",{className:"text-base text-slate-900 font-bold",children:h.length})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Receptoras em Sincronizao:"}),r.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-lg",children:r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Brinco"}),r.jsx(V,{children:"Nome"})]})}),r.jsx(Rt,{children:h.map(E=>r.jsxs(ge,{children:[r.jsx(L,{className:"font-medium",children:E.identificacao}),r.jsx(L,{children:E.nome||"-"})]},E.id))})]})})]}),r.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Prximo passo:"}),' Acesse a aba "2 Passo (para confirmar)" na tela de Protocolos e clique em "INICIAR 2 PASSO" para revisar e confirmar as receptoras.']})}),r.jsx(U,{onClick:Y,className:"w-full bg-green-600 hover:bg-green-700",children:"OK - Voltar para Protocolos"})]})]})})]})}function l5(){const{id:e}=$r(),t=za(),{toast:a}=ea(),[s,n]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(""),[h,p]=u.useState([]),[m,j]=u.useState(!1),[x,g]=u.useState(!1),[b,v]=u.useState(!1),[y,_]=u.useState(!1),[w,S]=u.useState(""),[N,C]=u.useState(""),[O,A]=u.useState(!1),[q,B]=u.useState(!1),[ee,Q]=u.useState({motivo_inapta:""});u.useEffect(()=>{e&&R()},[e]),u.useEffect(()=>{const P=h.filter(ce=>ce.pr_status==="INICIADA");B(P.length>0&&(l==null?void 0:l.status)!=="PASSO2_FECHADO")},[h,l]);const X=u.useRef(!1);u.useEffect(()=>{if(!q){X.current=!1;return}X.current=!0;const P=re=>(re.preventDefault(),re.returnValue="Voc tem receptoras pendentes de reviso. Tem certeza que deseja sair?",re.returnValue),ce=re=>{q&&(re.preventDefault(),window.history.pushState(null,"",window.location.href),_(!0))};return window.history.pushState(null,"",window.location.href),window.addEventListener("beforeunload",P),window.addEventListener("popstate",ce),()=>{window.removeEventListener("beforeunload",P),window.removeEventListener("popstate",ce)}},[q]);const R=async()=>{try{n(!0);const{data:P,error:ce}=await T.from("protocolos_sincronizacao").select("*").eq("id",e).single();if(ce)throw ce;if(P.status!=="PASSO1_FECHADO"&&P.status!=="PRIMEIRO_PASSO_FECHADO"&&P.status!=="PASSO2_FECHADO"){a({title:"Erro",description:"Este protocolo no est aguardando o 2 passo",variant:"destructive"}),t("/protocolos");return}c(P);const{data:re,error:ie}=await T.from("fazendas").select("nome").eq("id",P.fazenda_id).single();if(ie)throw ie;f(re.nome),await Y()}catch(P){a({title:"Erro ao carregar dados",description:P instanceof Error?P.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},Y=async()=>{try{if(!e){console.error("ID do protocolo no fornecido"),a({title:"Erro",description:"ID do protocolo no encontrado",variant:"destructive"});return}const{data:P,error:ce}=await T.from("protocolo_receptoras").select("*").eq("protocolo_id",e);if(ce){console.error("Erro ao carregar receptoras do protocolo:",ce),console.error("Protocolo ID:",e),console.error("Cdigo do erro:",ce.code),console.error("Mensagem do erro:",ce.message),console.error("Detalhes:",ce.details),a({title:"Erro ao carregar receptoras",description:ce.message||"Erro desconhecido ao carregar receptoras do protocolo",variant:"destructive"}),p([]);return}if(console.log("=== DEBUG loadReceptoras ==="),console.log("Protocolo ID:",e),console.log("Receptoras retornadas:",(P==null?void 0:P.length)||0),P&&P.length>0?console.log("Primeira receptora:",{id:P[0].id,protocolo_id:P[0].protocolo_id,receptora_id:P[0].receptora_id,status:P[0].status}):console.warn("Nenhuma receptora retornada pela query"),!P||P.length===0){console.error("Protocolo sem receptoras vinculadas - inconsistncia detectada"),console.error("Protocolo ID:",e);const{count:ie,error:oe}=await T.from("protocolo_receptoras").select("*",{count:"exact",head:!0}).eq("protocolo_id",e);console.error("Tentativa de count direto - resultado:",ie),oe&&console.error("Erro ao fazer count:",oe),a({title:"Erro: Protocolo inconsistente",description:`Este protocolo no possui receptoras vinculadas (ID: ${e}). Verifique no banco de dados se h receptoras vinculadas a este protocolo.`,variant:"destructive"}),p([]);return}const re=[];for(const ie of P){const{data:oe,error:he}=await T.from("receptoras").select("*").eq("id",ie.receptora_id).single();if(he){console.error("Error loading receptora:",he);continue}re.push({...oe,pr_id:ie.id,pr_status:ie.status,pr_motivo_inapta:ie.motivo_inapta,pr_observacoes:ie.observacoes,pr_ciclando_classificacao:"ciclando_classificacao"in ie&&(ie.ciclando_classificacao==="CL"||ie.ciclando_classificacao==="N")?ie.ciclando_classificacao:null,pr_qualidade_semaforo:"qualidade_semaforo"in ie&&typeof ie.qualidade_semaforo=="number"&&ie.qualidade_semaforo>=1&&ie.qualidade_semaforo<=3?ie.qualidade_semaforo:null})}p(re)}catch(P){console.error("Error loading receptoras:",P),a({title:"Erro ao carregar receptoras",description:P instanceof Error?P.message:"Erro desconhecido",variant:"destructive"})}},$=async()=>{if(!(O||o))try{A(!0);const{error:P}=await T.from("protocolo_receptoras").update({status:"APTA",motivo_inapta:null}).eq("protocolo_id",e).eq("receptora_id",w);if(P)throw console.error("Erro ao confirmar receptora:",P),P;a({title:"Receptora confirmada",description:`${N} foi confirmada e segue para TE`}),j(!1),S(""),C(""),R()}catch(P){console.error("Erro ao confirmar receptora:",P),a({title:"Erro ao confirmar receptora",description:P instanceof Error?P.message:"Erro desconhecido",variant:"destructive"})}finally{A(!1)}},E=async()=>{if(!o)try{i(!0);const{error:P}=await T.from("protocolo_receptoras").update({status:"INAPTA",motivo_inapta:ee.motivo_inapta.trim()||null}).eq("protocolo_id",e).eq("receptora_id",w);if(P)throw console.error("Erro ao descartar receptora:",P),P;a({title:"Receptora descartada",description:`${N} foi descartada do protocolo`}),g(!1),S(""),C(""),Q({motivo_inapta:""}),R()}catch(P){console.error("Erro ao descartar receptora:",P),a({title:"Erro ao descartar receptora",description:P instanceof Error?P.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},D=async()=>{if(o)return;const P=h.filter(ce=>ce.pr_status==="INICIADA");if(P.length>0){a({title:"Erro",description:`Ainda h ${P.length} receptora(s) pendente(s) de reviso`,variant:"destructive"});return}if(h.length===0){a({title:"Erro",description:"No  possvel finalizar protocolo sem receptoras vinculadas",variant:"destructive"});return}try{i(!0);const ce=new Date,re=`${ce.getFullYear()}-${String(ce.getMonth()+1).padStart(2,"0")}-${String(ce.getDate()).padStart(2,"0")}`,{error:ie}=await T.from("protocolos_sincronizacao").update({status:"PASSO2_FECHADO",data_retirada:re,responsavel_retirada:(l==null?void 0:l.responsavel_inicio)||null}).eq("id",e);if(ie)throw console.error("Erro ao finalizar 2 passo:",ie),ie;c({...l,status:"PASSO2_FECHADO",data_retirada:re,responsavel_retirada:(l==null?void 0:l.responsavel_inicio)||null}),B(!1),X.current=!1,v(!0)}catch(ce){console.error("Erro ao finalizar 2 passo:",ce),a({title:"Erro ao finalizar 2 passo",description:ce instanceof Error?ce.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},G=()=>{v(!1),a({title:"2 passo concludo com sucesso",description:`${h.filter(P=>P.pr_status==="APTA").length} receptoras confirmadas para TE`}),t("/protocolos")},M=async()=>{try{i(!0);const{error:P}=await T.from("protocolos_sincronizacao").update({passo2_data:null,passo2_tecnico_responsavel:null,status:"PASSO1_FECHADO"}).eq("id",e);if(P)throw P;a({title:"2 passo cancelado",description:"O protocolo voltou para o status de aguardando 2 passo"}),_(!1),B(!1),X.current=!1,t("/protocolos")}catch(P){console.error("Erro ao cancelar 2 passo:",P),a({title:"Erro ao cancelar 2 passo",description:P instanceof Error?P.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},K=()=>{q?_(!0):(X.current=!1,t("/protocolos"))},H=P=>{const re={INICIADA:{label:"Aguardando Reviso",variant:"secondary"},APTA:{label:"Confirmada",variant:"default"},INAPTA:{label:"Descartada",variant:"destructive"}}[P]||{label:P,variant:"outline"};return r.jsx(st,{variant:re.variant,children:re.label})};if(s)return r.jsx(zt,{});if(!l)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Protocolo no encontrado"}),r.jsx(U,{onClick:()=>t("/protocolos"),className:"mt-4",children:"Voltar para Protocolos"})]});if(h.length===0&&!s)return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:K,children:r.jsx(es,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["2 Passo - ",d]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Revisar e confirmar receptoras"})]})]})}),r.jsxs(je,{className:"border-red-200 bg-red-50",children:[r.jsx(Ce,{children:r.jsx(Ae,{className:"text-red-700",children:" Protocolo Inconsistente"})}),r.jsxs(we,{className:"space-y-4",children:[r.jsx("p",{className:"text-red-800",children:"Este protocolo no possui receptoras vinculadas. No  possvel prosseguir com o 2 passo."}),r.jsx("p",{className:"text-sm text-red-700",children:"Isso pode ter ocorrido devido a um erro durante a criao do protocolo ou excluso acidental de dados."}),r.jsx(U,{onClick:()=>t("/protocolos"),variant:"outline",className:"mt-4",children:"Voltar para Protocolos"})]})]})]});const ne=h.filter(P=>P.pr_status==="INICIADA"),pe=h.filter(P=>P.pr_status==="APTA"),k=h.filter(P=>P.pr_status==="INAPTA");return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:K,children:r.jsx(es,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["2 Passo - ",d]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Revisar e confirmar receptoras"})]})]}),r.jsxs(U,{onClick:D,disabled:ne.length>0||o,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(rf,{className:"w-4 h-4 mr-2"}),o?"Finalizando...":"Finalizar 2 Passo"]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Informaes do Protocolo"})}),r.jsxs(we,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:d})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data Incio"}),r.jsx("p",{className:"text-base text-slate-900",children:Kt(l.data_inicio)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data do 2 Passo"}),r.jsx("p",{className:"text-base text-slate-900",children:l.passo2_data?Kt(l.passo2_data):"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tcnico 2 Passo"}),r.jsx("p",{className:"text-base text-slate-900",children:l.passo2_tecnico_responsavel||"-"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(je,{children:[r.jsx(Ce,{className:"pb-3",children:r.jsx(Ae,{className:"text-base",children:"Aguardando Reviso"})}),r.jsx(we,{children:r.jsx("p",{className:"text-3xl font-bold text-slate-900",children:ne.length})})]}),r.jsxs(je,{children:[r.jsx(Ce,{className:"pb-3",children:r.jsx(Ae,{className:"text-base",children:"Confirmadas"})}),r.jsx(we,{children:r.jsx("p",{className:"text-3xl font-bold text-green-600",children:pe.length})})]}),r.jsxs(je,{children:[r.jsx(Ce,{className:"pb-3",children:r.jsx(Ae,{className:"text-base",children:"Descartadas"})}),r.jsx(we,{children:r.jsx("p",{className:"text-3xl font-bold text-red-600",children:k.length})})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsxs(Ae,{children:["Receptoras para Reviso (",h.length,")"]})}),r.jsx(we,{children:r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Brinco"}),r.jsx(V,{children:"Nome"}),r.jsx(V,{children:"Ciclando"}),r.jsx(V,{children:"Qualidade"}),r.jsx(V,{children:"Status"}),r.jsx(V,{children:"Motivo"}),r.jsx(V,{className:"text-right",children:"Aes"})]})}),r.jsx(Rt,{children:h.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:7,className:"text-center text-slate-500",children:"Nenhuma receptora no protocolo"})}):h.map(P=>r.jsxs(ge,{children:[r.jsx(L,{className:"font-medium",children:P.identificacao}),r.jsx(L,{children:P.nome||"-"}),r.jsx(L,{children:r.jsx(fg,{value:P.pr_ciclando_classificacao,variant:"display",disabled:!0})}),r.jsx(L,{children:r.jsx(hg,{value:P.pr_qualidade_semaforo,variant:"single",disabled:!0})}),r.jsx(L,{children:H(P.pr_status)}),r.jsx(L,{children:P.pr_motivo_inapta||"-"}),r.jsx(L,{className:"text-right",children:P.pr_status==="INICIADA"&&r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsxs(U,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>{S(P.id),C(P.identificacao),j(!0)},disabled:O||o,children:[r.jsx(Bm,{className:"w-4 h-4 mr-1"}),"Confirmar"]}),r.jsxs(U,{variant:"destructive",size:"sm",onClick:()=>{S(P.id),C(P.identificacao),Q({motivo_inapta:""}),g(!0)},disabled:O||o,children:[r.jsx(qT,{className:"w-4 h-4 mr-1"}),"Descartar"]})]})})]},P.id))})]})})]}),r.jsx(Dt,{open:m,onOpenChange:P=>{!P&&!O&&(j(!1),S(""),C(""))},children:r.jsxs(_t,{children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Confirmar Receptora"}),r.jsxs(Ot,{children:["Tem certeza que deseja confirmar a receptora ",r.jsx("strong",{children:N}),"?"]})]}),r.jsxs("p",{className:"text-sm text-slate-600",children:["A receptora ser marcada como ",r.jsx("strong",{children:"APTA"})," e seguir para Transferncia de Embries."]}),r.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[r.jsx(U,{variant:"outline",onClick:()=>{j(!1),S(""),C("")},disabled:O,children:"Cancelar"}),r.jsx(U,{onClick:$,className:"bg-green-600 hover:bg-green-700 text-white",disabled:O,children:O?"Confirmando...":"Confirmar"})]})]})}),r.jsx(Dt,{open:x,onOpenChange:P=>{!P&&!o&&(g(!1),S(""),C(""),Q({motivo_inapta:""}))},children:r.jsxs(_t,{children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Descartar Receptora"}),r.jsxs(Ot,{children:["Descartar a receptora ",r.jsx("strong",{children:N})," do protocolo?"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Motivo do descarte (opcional)"}),r.jsxs(Ze,{value:ee.motivo_inapta||"none",onValueChange:P=>Q({motivo_inapta:P==="none"?"":P}),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione o motivo (opcional)"})}),r.jsxs(Qe,{children:[r.jsx(ve,{value:"none",children:"Sem motivo"}),r.jsx(ve,{value:"Descartada no 2 passo: Morreu",children:"Morreu"}),r.jsx(ve,{value:"Descartada no 2 passo: Doente",children:"Doente"}),r.jsx(ve,{value:"Descartada no 2 passo: Sumiu",children:"Sumiu"}),r.jsx(ve,{value:"Descartada no 2 passo: Perdeu P4",children:"Perdeu P4"}),r.jsx(ve,{value:"Descartada no 2 passo: No respondeu",children:"No respondeu"}),r.jsx(ve,{value:"Descartada no 2 passo: Outro",children:"Outro"})]})]})]}),r.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[r.jsx(U,{variant:"outline",onClick:()=>{g(!1),S(""),C(""),Q({motivo_inapta:""})},disabled:o,children:"Cancelar"}),r.jsx(U,{onClick:E,variant:"destructive",disabled:o,children:o?"Descartando...":"Descartar"})]})]})]})}),r.jsx(Dt,{open:b,onOpenChange:v,children:r.jsxs(_t,{className:"max-w-2xl",children:[r.jsxs(jt,{children:[r.jsxs(wt,{className:"flex items-center gap-2",children:[r.jsx(Bm,{className:"w-6 h-6 text-green-600"}),"Resumo do 2 Passo"]}),r.jsx(Ot,{children:"2 passo concludo com sucesso"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:d})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data do Protocolo"}),r.jsx("p",{className:"text-base text-slate-900",children:l&&Kt(l.data_inicio)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total de Receptoras"}),r.jsx("p",{className:"text-base text-slate-900 font-bold",children:h.length})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Confirmadas para TE"}),r.jsx("p",{className:"text-base text-green-600 font-bold",children:pe.length})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-green-700 mb-2",children:"Receptoras Confirmadas"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:pe.length})]}),r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-red-700 mb-2",children:"Receptoras Descartadas"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:k.length})]})]}),r.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Protocolo concludo!"})," As receptoras confirmadas (APTA) esto prontas para transferncia de embries."]})}),r.jsx(U,{onClick:G,className:"w-full bg-green-600 hover:bg-green-700",children:"OK - Voltar para Protocolos"})]})]})}),r.jsx(Dt,{open:y,onOpenChange:P=>{!P&&!o&&(_(!1),X.current=!1)},children:r.jsxs(_t,{children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Cancelar 2 Passo?"}),r.jsxs(Ot,{children:["Voc tem ",ne.length," receptora(s) pendente(s) de reviso.",r.jsx("br",{}),r.jsx("br",{}),'Ao cancelar, o protocolo voltar para o status de "Aguardando 2 Passo" e voc precisar iniciar o 2 passo novamente.']})]}),r.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[r.jsx(U,{variant:"outline",onClick:()=>{_(!1),X.current=!1},disabled:o,children:"No, continuar reviso"}),r.jsx(U,{variant:"destructive",onClick:M,disabled:o,children:o?"Cancelando...":"Sim, cancelar 2 passo"})]})]})})]})}function c5(){const{id:e}=$r(),t=za(),[a,s]=u.useState(!0),[n,o]=u.useState(null),[i,l]=u.useState(""),[c,d]=u.useState([]),[f,h]=u.useState({totalIniciaram:0,totalConcluiram:0,totalDescartadas:0,totalConfirmadas:0}),p=async v=>{try{const{data:y}=await T.from("protocolo_receptoras").select("receptora_id").eq("protocolo_id",v.id).limit(1);if(!y||y.length===0)return v.observacoes||"";const _=y[0].receptora_id,{data:w}=await T.from("receptora_fazenda_historico").select(`
          fazenda_id,
          data_inicio
        `).eq("receptora_id",_).order("data_inicio",{ascending:!0});if(!w||w.length<2)return v.observacoes||"";const S=new Set;for(const R of w)R.fazenda_id&&S.add(R.fazenda_id);const{data:N}=await T.from("fazendas").select("id, nome").in("id",Array.from(S)),C=new Map;if(N)for(const R of N)C.set(R.id,R.nome);const O=v.data_inicio.split("T")[0],[A,q,B]=O.split("-").map(Number),ee=new Date(A,q-1,B);let Q=null,X=1/0;for(let R=1;R<w.length;R++){const Y=w[R],$=w[R-1],E=Y.data_inicio.split("T")[0],[D,G,M]=E.split("-").map(Number),K=new Date(D,G-1,M),H=Math.abs((K.getTime()-ee.getTime())/(1e3*60*60*24));H<=1&&H<X&&(X=H,Q={fazendaOrigem:C.get($.fazenda_id)||"Fazenda desconhecida",fazendaDestino:C.get(Y.fazenda_id)||"Fazenda desconhecida",dataMudanca:Y.data_inicio})}if(!Q&&w.length>1)for(let R=w.length-1;R>=1;R--){const Y=w[R],$=w[R-1],E=Y.data_inicio.split("T")[0],[D,G,M]=E.split("-").map(Number),K=new Date(D,G-1,M);if(K<=ee&&(ee.getTime()-K.getTime())/(1e3*60*60*24)<=2){Q={fazendaOrigem:C.get($.fazenda_id)||"Fazenda desconhecida",fazendaDestino:C.get(Y.fazenda_id)||"Fazenda desconhecida",dataMudanca:Y.data_inicio};break}}if(Q){const R=new Date(Q.dataMudanca).toLocaleDateString("pt-BR");return`${v.observacoes} (Mudana: ${Q.fazendaOrigem}  ${Q.fazendaDestino} em ${R})`}return v.observacoes||""}catch(y){return console.error("Erro ao enriquecer observaes:",y),v.observacoes||""}};u.useEffect(()=>{e&&m()},[e]);const m=async()=>{try{s(!0);const{data:v,error:y}=await T.from("protocolos_sincronizacao").select("*").eq("id",e).single();if(y)throw y;if(v.status!=="PASSO2_FECHADO"){t("/protocolos");return}let _=v.observacoes;v.observacoes&&v.observacoes.includes("Protocolo criado automaticamente")&&(_=await p(v)),o({...v,observacoes:_});const{data:w,error:S}=await T.from("fazendas").select("nome").eq("id",v.fazenda_id).single();if(S)throw S;l(w.nome),await j({...v,observacoes:_})}catch(v){console.error("Erro ao carregar dados:",v)}finally{s(!1)}},j=async v=>{try{const{data:y,error:_}=await T.from("protocolo_receptoras").select("*").eq("protocolo_id",v.id).order("data_inclusao",{ascending:!0});if(_)throw _;const w=[];for(const A of y||[]){const{data:q,error:B}=await T.from("receptoras").select("*").eq("id",A.receptora_id).single();if(B){console.error("Erro ao carregar receptora:",B);continue}w.push({...q,pr_id:A.id,pr_status:A.status,pr_motivo_inapta:A.motivo_inapta,pr_data_inclusao:A.data_inclusao,pr_data_retirada:A.data_retirada,pr_ciclando_classificacao:A.ciclando_classificacao,pr_qualidade_semaforo:A.qualidade_semaforo})}d(w);const S=w.length,N=w.filter(A=>A.pr_status==="APTA").length,C=w.filter(A=>A.pr_status==="INAPTA").length;h({totalIniciaram:S,totalConcluiram:N,totalDescartadas:C,totalConfirmadas:N})}catch(y){console.error("Erro ao carregar receptoras:",y)}},x=v=>{if(!v)return{veterinario:null,tecnico:null};const y=v.match(/VET:\s*(.+?)(?:\s*\||$)/i),_=v.match(/TEC:\s*(.+?)(?:\s*\||$)/i);return{veterinario:y?y[1].trim():null,tecnico:_?_[1].trim():null}},g=v=>v==="APTA"?r.jsx(st,{variant:"default",className:"bg-green-600",children:"Confirmada"}):v==="INAPTA"?r.jsx(st,{variant:"destructive",children:"Descartada"}):r.jsx(st,{variant:"secondary",children:v}),b=()=>{window.print()};return a?r.jsx(zt,{}):n?r.jsxs("div",{className:"space-y-6 print:space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between print:hidden",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>t("/protocolos"),children:r.jsx(es,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Relatrio do Protocolo"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Visualizao somente leitura"})]})]}),r.jsxs(U,{onClick:b,variant:"outline",children:[r.jsx(YT,{className:"w-4 h-4 mr-2"}),"Imprimir"]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Informaes do Protocolo"})}),r.jsxs(we,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:i||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data incio"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:n.data_inicio?Kt(n.data_inicio):""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Vet responsvel pelo incio"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:x(n.responsavel_inicio).veterinario||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tec responsvel pelo incio"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:x(n.responsavel_inicio).tecnico||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data segundo passo"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:n.passo2_data?Kt(n.passo2_data):""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Responsvel pelo segundo passo"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:n.passo2_tecnico_responsavel||""})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(je,{children:[r.jsx(Ce,{className:"pb-3",children:r.jsx(Ae,{className:"text-base",children:"Total Iniciaram"})}),r.jsx(we,{children:r.jsx("p",{className:"text-3xl font-bold text-slate-900",children:f.totalIniciaram})})]}),r.jsxs(je,{children:[r.jsx(Ce,{className:"pb-3",children:r.jsx(Ae,{className:"text-base",children:"Confirmadas"})}),r.jsx(we,{children:r.jsx("p",{className:"text-3xl font-bold text-green-600",children:f.totalConfirmadas})})]}),r.jsxs(je,{children:[r.jsx(Ce,{className:"pb-3",children:r.jsx(Ae,{className:"text-base",children:"Descartadas"})}),r.jsx(we,{children:r.jsx("p",{className:"text-3xl font-bold text-red-600",children:f.totalDescartadas})})]}),r.jsxs(je,{children:[r.jsx(Ce,{className:"pb-3",children:r.jsx(Ae,{className:"text-base",children:"Taxa de Sucesso"})}),r.jsx(we,{children:r.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[f.totalIniciaram>0?Math.round(f.totalConfirmadas/f.totalIniciaram*100):0,"%"]})})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Receptoras e Resultado Final"})}),r.jsx(we,{children:c.length===0?r.jsx("p",{className:"text-slate-500 text-center py-4",children:"Nenhuma receptora no protocolo"}):r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Identificao"}),r.jsx(V,{children:"Ciclando"}),r.jsx(V,{children:"Qualidade"}),r.jsx(V,{children:"Resultado Final"}),r.jsx(V,{children:"Motivo do Descarte"})]})}),r.jsx(Rt,{children:c.map(v=>r.jsxs(ge,{children:[r.jsxs(L,{className:"font-medium",children:[v.identificacao,v.nome?` - ${v.nome}`:""]}),r.jsx(L,{children:r.jsx(fg,{value:v.pr_ciclando_classificacao,variant:"display",disabled:!0})}),r.jsx(L,{children:r.jsx(hg,{value:v.pr_qualidade_semaforo,variant:"single",disabled:!0})}),r.jsx(L,{children:g(v.pr_status)}),r.jsx(L,{children:v.pr_motivo_inapta||""})]},v.id))})]})})]}),n.observacoes&&r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Observaes"})}),r.jsx(we,{children:r.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:n.observacoes})})]})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Protocolo no encontrado"}),r.jsx(U,{onClick:()=>t("/protocolos"),className:"mt-4",children:"Voltar para Protocolos"})]})}function d5(){const e=za(),{toast:t}=ea(),[a,s]=u.useState([]),[n,o]=u.useState([]),[i,l]=u.useState([]),[c,d]=u.useState(!1),[f,h]=u.useState(!0),[p,m]=u.useState(!1),[j,x]=u.useState(""),[g,b]=u.useState(""),[v,y]=u.useState("");u.useEffect(()=>{_()},[]);const _=async()=>{try{h(!0);const{data:S,error:N}=await T.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(N)throw N;l(S||[])}catch(S){t({title:"Erro ao carregar fazendas",description:S instanceof Error?S.message:"Erro desconhecido",variant:"destructive"})}finally{h(!1)}},w=async()=>{try{d(!0);const{data:S,error:N}=await T.from("pacotes_aspiracao").select("*").order("data_aspiracao",{ascending:!1}).order("created_at",{ascending:!1});if(N)throw N;const C=new Map(i.map(R=>[R.id,R.nome])),O=(S==null?void 0:S.map(R=>R.id))||[],{data:A,error:q}=await T.from("aspiracoes_doadoras").select("pacote_aspiracao_id").in("pacote_aspiracao_id",O);if(q)throw q;const B=new Map;A==null||A.forEach(R=>{R.pacote_aspiracao_id&&B.set(R.pacote_aspiracao_id,(B.get(R.pacote_aspiracao_id)||0)+1)});const{data:ee}=await T.from("pacotes_aspiracao_fazendas_destino").select("pacote_aspiracao_id, fazenda_destino_id").in("pacote_aspiracao_id",O),Q=new Map;ee==null||ee.forEach(R=>{const Y=Q.get(R.pacote_aspiracao_id)||[],$=C.get(R.fazenda_destino_id);$&&!Y.includes($)&&Y.push($),Q.set(R.pacote_aspiracao_id,Y)});const X=(S||[]).map(R=>{let Y=Q.get(R.id);if(!Y||Y.length===0)if(R.fazenda_destino_id){const $=C.get(R.fazenda_destino_id);Y=$?[$]:[]}else Y=[];return{...R,fazenda_nome:C.get(R.fazenda_id),fazendas_destino_nomes:Y,quantidade_doadoras:B.get(R.id)||0}});s(X),m(!0)}catch(S){t({title:"Erro ao carregar dados",description:S instanceof Error?S.message:"Erro desconhecido",variant:"destructive"})}finally{d(!1)}};return u.useEffect(()=>{if(g&&v){if(g>v){o([]),s([]),m(!1);return}!p&&a.length===0&&w()}else o([]),s([]),m(!1)},[g,v]),u.useEffect(()=>{if(a.length>0&&g&&v){let S=[...a];S=S.filter(N=>{const C=N.data_aspiracao.split("T")[0];return C>=g&&C<=v}),j&&(S=S.filter(N=>N.fazenda_id===j)),o(S)}},[a,j,g,v]),f?r.jsx(zt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Aspiraes"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar aspiraes"})]}),r.jsxs(U,{onClick:()=>e("/aspiracoes/novo"),className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ts,{className:"w-4 h-4 mr-2"}),"Nova Aspirao"]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ae,{children:"Lista de Aspiraes"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zx,{className:"w-4 h-4 text-slate-500"}),r.jsx("span",{className:"text-sm text-slate-500",children:"Filtros"})]})]})}),r.jsxs(we,{children:[r.jsxs("div",{className:"mb-4 flex gap-4 items-end",children:[r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx(F,{children:"Filtrar por Fazenda"}),r.jsxs(Ze,{value:j||void 0,onValueChange:S=>x(S||""),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Todas as fazendas"})}),r.jsx(Qe,{children:i.map(S=>r.jsx(ve,{value:S.id,children:S.nome},S.id))})]})]}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx(F,{children:"Data Inicial *"}),r.jsx(se,{type:"date",value:g,onChange:S=>b(S.target.value),max:v||void 0}),g&&v&&g>v&&r.jsx("p",{className:"text-sm text-red-500",children:"A data inicial deve ser anterior ou igual  data final"})]}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx(F,{children:"Data Final *"}),r.jsx(se,{type:"date",value:v,onChange:S=>y(S.target.value),min:g||void 0})]}),(g||v)&&r.jsxs(U,{variant:"outline",size:"sm",onClick:()=>{x(""),b(""),y("")},children:[r.jsx(Rs,{className:"w-4 h-4 mr-1"}),"Limpar Filtros"]})]}),r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Data"}),r.jsx(V,{children:"Fazenda"}),r.jsx(V,{children:"Fazenda Destino"}),r.jsx(V,{children:"Horrio Incio"}),r.jsx(V,{children:"Doadoras"}),r.jsx(V,{children:"Total Ocitos"}),r.jsx(V,{children:"Veterinrio"}),r.jsx(V,{children:"Status"}),r.jsx(V,{children:"Usado em Lote FIV"}),r.jsx(V,{className:"text-right",children:"Aes"})]})}),r.jsx(Rt,{children:!g||!v?r.jsx(ge,{children:r.jsx(L,{colSpan:11,className:"text-center text-slate-500 py-12",children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(Zx,{className:"w-8 h-8 text-slate-400"}),r.jsx("p",{className:"text-lg font-medium",children:"Aplique filtros para visualizar as aspiraes"}),r.jsx("p",{className:"text-sm",children:"Selecione um intervalo de datas (data inicial e data final) para buscar aspiraes"})]})})}):c?r.jsx(ge,{children:r.jsx(L,{colSpan:11,className:"text-center text-slate-500 py-12",children:r.jsx(zt,{})})}):n.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:11,className:"text-center text-slate-500 py-12",children:"Nenhuma aspirao encontrada com os filtros aplicados"})}):n.map(S=>r.jsxs(ge,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>e(`/aspiracoes/${S.id}`),children:[r.jsx(L,{children:Kt(S.data_aspiracao)}),r.jsx(L,{className:"font-medium",children:S.fazenda_nome||"-"}),r.jsx(L,{children:r.jsx("div",{className:"flex flex-wrap gap-1",children:S.fazendas_destino_nomes&&S.fazendas_destino_nomes.length>0?S.fazendas_destino_nomes.map((N,C)=>r.jsx(st,{variant:"outline",className:"text-xs",children:N},C)):r.jsx("span",{className:"text-slate-400",children:"-"})})}),r.jsx(L,{children:S.horario_inicio||"-"}),r.jsx(L,{children:S.quantidade_doadoras||0}),r.jsx(L,{className:"font-medium",children:S.total_oocitos||0}),r.jsx(L,{children:S.veterinario_responsavel||"-"}),r.jsx(L,{children:r.jsx(st,{variant:S.status==="FINALIZADO"?"default":"secondary",children:S.status==="FINALIZADO"?"FINALIZADO":"EM ANDAMENTO"})}),r.jsx(L,{children:S.usado_em_lote_fiv?r.jsx(st,{variant:"destructive",children:"Usado"}):r.jsx(st,{variant:"outline",children:"Disponvel"})}),r.jsx(L,{className:"text-right",onClick:N=>N.stopPropagation(),children:r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>e(`/aspiracoes/${S.id}`),children:r.jsx(cc,{className:"w-4 h-4"})})})]},S.id))})]})]})]})]})}function u5(){const e=za(),{toast:t}=ea(),[a,s]=u.useState(!0),[n,o]=u.useState(!1),[i,l]=u.useState([]),[c,d]=u.useState({fazenda_id:"",fazendas_destino_ids:[],data_aspiracao:new Date().toISOString().split("T")[0],horario_inicio:"",veterinario_responsavel:"",tecnico_responsavel:"",observacoes:""}),[f,h]=u.useState("");u.useEffect(()=>{p()},[]);const p=async()=>{try{s(!0);const{data:j,error:x}=await T.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(x)throw x;l(j||[])}catch(j){t({title:"Erro ao carregar fazendas",description:j instanceof Error?j.message:"Erro desconhecido",variant:"destructive"})}finally{s(!1)}},m=async j=>{if(j.preventDefault(),!c.fazenda_id||c.fazendas_destino_ids.length===0||!c.data_aspiracao){t({title:"Erro de validao",description:"Fazenda, pelo menos uma fazenda destino e data so obrigatrios",variant:"destructive"});return}if(!c.veterinario_responsavel.trim()){t({title:"Erro de validao",description:"Veterinrio responsvel  obrigatrio",variant:"destructive"});return}if(!c.tecnico_responsavel.trim()){t({title:"Erro de validao",description:"Tcnico responsvel  obrigatrio",variant:"destructive"});return}try{o(!0);const x=c.fazendas_destino_ids[0],g={fazenda_id:c.fazenda_id,fazenda_destino_id:x,data_aspiracao:c.data_aspiracao,horario_inicio:c.horario_inicio||null,veterinario_responsavel:c.veterinario_responsavel.trim(),tecnico_responsavel:c.tecnico_responsavel.trim(),observacoes:c.observacoes.trim()||null,status:"EM_ANDAMENTO"},{data:b,error:v}=await T.from("pacotes_aspiracao").insert([g]).select().single();if(v)throw v;const y=c.fazendas_destino_ids.map(w=>({pacote_aspiracao_id:b.id,fazenda_destino_id:w})),{error:_}=await T.from("pacotes_aspiracao_fazendas_destino").insert(y);if(_)throw _;t({title:"Aspirao criada",description:"Aspirao criada com sucesso"}),e(`/aspiracoes/${b.id}`)}catch(x){t({title:"Erro ao criar aspirao",description:x instanceof Error?x.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}};return a?r.jsx(zt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(U,{onClick:()=>e("/aspiracoes"),variant:"outline",size:"icon",children:r.jsx(es,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Nova Aspirao"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Criar nova aspirao"})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Informaes da Aspirao"})}),r.jsx(we,{children:r.jsxs("form",{onSubmit:m,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"fazenda_id",children:"Fazenda da Aspirao *"}),r.jsxs(Ze,{value:c.fazenda_id,onValueChange:j=>d({...c,fazenda_id:j}),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione a fazenda"})}),r.jsx(Qe,{children:i.map(j=>r.jsx(ve,{value:j.id,children:j.nome},j.id))})]})]}),r.jsxs("div",{className:"space-y-2 col-span-2",children:[r.jsx(F,{children:"Fazendas Destino *"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(se,{placeholder:"Buscar fazenda destino...",value:f,onChange:j=>h(j.target.value),className:"mb-2"}),r.jsxs(Ze,{value:"",onValueChange:j=>{j&&!c.fazendas_destino_ids.includes(j)&&(d({...c,fazendas_destino_ids:[...c.fazendas_destino_ids,j]}),h(""))},children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione uma fazenda destino para adicionar"})}),r.jsx(Qe,{children:i.filter(j=>!c.fazendas_destino_ids.includes(j.id)).filter(j=>f.trim()===""?!0:j.nome.toLowerCase().includes(f.toLowerCase())).map(j=>r.jsx(ve,{value:j.id,children:j.nome},j.id))})]})]}),c.fazendas_destino_ids.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.fazendas_destino_ids.map(j=>{const x=i.find(g=>g.id===j);return x?r.jsxs(st,{variant:"outline",className:"flex items-center gap-1 pr-1",children:[x.nome,r.jsx("button",{type:"button",onClick:g=>{g.preventDefault(),d({...c,fazendas_destino_ids:c.fazendas_destino_ids.filter(b=>b!==j)})},className:"ml-1 hover:bg-slate-200 rounded-full p-0.5",children:r.jsx(Rs,{className:"w-3 h-3"})})]},j):null})}),c.fazendas_destino_ids.length===0&&r.jsx("p",{className:"text-sm text-slate-500",children:"Selecione pelo menos uma fazenda destino"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"data_aspiracao",children:"Data da Aspirao *"}),r.jsx(se,{id:"data_aspiracao",type:"date",value:c.data_aspiracao,onChange:j=>d({...c,data_aspiracao:j.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"horario_inicio",children:"Horrio de Incio"}),r.jsx(se,{id:"horario_inicio",type:"time",value:c.horario_inicio,onChange:j=>d({...c,horario_inicio:j.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"veterinario_responsavel",children:"Veterinrio Responsvel *"}),r.jsx(se,{id:"veterinario_responsavel",value:c.veterinario_responsavel,onChange:j=>d({...c,veterinario_responsavel:j.target.value}),placeholder:"Nome do veterinrio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"tecnico_responsavel",children:"Tcnico Responsvel *"}),r.jsx(se,{id:"tecnico_responsavel",value:c.tecnico_responsavel,onChange:j=>d({...c,tecnico_responsavel:j.target.value}),placeholder:"Nome do tcnico",required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Aa,{id:"observacoes",value:c.observacoes,onChange:j=>d({...c,observacoes:j.target.value}),placeholder:"Observaes sobre a aspirao",rows:3})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx(U,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:n,children:n?"Criando...":"Criar Aspirao"}),r.jsx(U,{type:"button",variant:"outline",onClick:()=>e("/aspiracoes"),disabled:n,children:"Cancelar"})]})]})})]})]})}function f5(){const{id:e}=$r(),t=za(),{toast:a}=ea(),[s,n]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(""),[h,p]=u.useState([]),[m,j]=u.useState([]),[x,g]=u.useState([]),b=u.useRef(!1),[v,y]=u.useState(!1),[_,w]=u.useState(!1),[S,N]=u.useState(!1),[C,O]=u.useState(!1),[A,q]=u.useState(null),[B,ee]=u.useState(!1),[Q,X]=u.useState(null),[R,Y]=u.useState(!1),[$,E]=u.useState({veterinario_responsavel:"",tecnico_responsavel:""}),[D,G]=u.useState({doadora_id:"",horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""}),[M,K]=u.useState({registro:"",raca:"",racaCustom:""}),[H,ne]=u.useState({horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""}),pe=["Holandesa","Jersey","Gir","Girolando"],[k,P]=u.useState("");u.useEffect(()=>{e&&ce()},[e]);const ce=async()=>{try{n(!0);const{data:z,error:Ee}=await T.from("pacotes_aspiracao").select("*").eq("id",e).single();if(Ee)throw Ee;c(z),E({veterinario_responsavel:z.veterinario_responsavel||"",tecnico_responsavel:z.tecnico_responsavel||""});const{data:Le,error:He}=await T.from("fazendas").select("nome").eq("id",z.fazenda_id).single();if(He)throw He;f(Le.nome);const{data:Me,error:ft}=await T.from("pacotes_aspiracao_fazendas_destino").select("fazenda_destino_id").eq("pacote_aspiracao_id",e);if(ft&&console.warn("Erro ao carregar fazendas destino:",ft),!Me||Me.length===0){if(z.fazenda_destino_id){const{data:dt,error:ht}=await T.from("fazendas").select("nome").eq("id",z.fazenda_destino_id).single();!ht&&dt&&p([dt.nome])}}else{const dt=Me.map(fa=>fa.fazenda_destino_id),{data:ht,error:ta}=await T.from("fazendas").select("id, nome").in("id",dt);if(!ta&&ht){const fa=ht.map(va=>va.nome).filter(Boolean);p(fa)}}await re(),z.status==="EM_ANDAMENTO"&&await ie(z.fazenda_id)}catch(z){a({title:"Erro ao carregar dados",description:z instanceof Error?z.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},re=async()=>{try{const{data:z,error:Ee}=await T.from("aspiracoes_doadoras").select("*").eq("pacote_aspiracao_id",e).order("created_at",{ascending:!0});if(Ee)throw Ee;if(!z||z.length===0){j([]);return}const Le=z.map(ht=>ht.doadora_id),{data:He,error:Me}=await T.from("doadoras").select("id, registro, nome").in("id",Le);if(Me)throw Me;const ft=new Map((He==null?void 0:He.map(ht=>[ht.id,ht]))||[]),dt=z.map(ht=>{const ta=ft.get(ht.doadora_id);return{...ht,doadora_nome:ta==null?void 0:ta.nome,doadora_registro:ta==null?void 0:ta.registro}});j(dt)}catch(z){console.error("Error loading aspiracoes:",z)}},ie=async z=>{try{const{data:Ee,error:Le}=await T.from("aspiracoes_doadoras").select("doadora_id").eq("pacote_aspiracao_id",e);Le&&console.error("Error loading aspiracoes for filtering:",Le);const He=new Set((Ee==null?void 0:Ee.map(ht=>ht.doadora_id))||[]),{data:Me,error:ft}=await T.from("doadoras").select("id, registro, nome").eq("fazenda_id",z).order("registro",{ascending:!0});if(ft)throw ft;const dt=(Me||[]).filter(ht=>!He.has(ht.id));g(dt)}catch(Ee){console.error("Error loading doadoras disponiveis:",Ee)}},oe=z=>{const Ee=parseInt(z.atresicos)||0,Le=parseInt(z.degenerados)||0,He=parseInt(z.expandidos)||0,Me=parseInt(z.desnudos)||0,ft=parseInt(z.viaveis)||0;return Ee+Le+He+Me+ft},he=m.reduce((z,Ee)=>z+(Ee.total_oocitos||0),0),Te=(z,Ee)=>{if(!z)return"";const[Le,He]=z.split(":").map(Number),Me=Le*60+He+Ee*60,ft=Math.floor(Me/60)%24,dt=Me%60;return`${String(ft).padStart(2,"0")}:${String(dt).padStart(2,"0")}`};u.useEffect(()=>{if(v&&l)if(ie(l.fazenda_id),m.length>0){const z=m[m.length-1];z.hora_final&&G(Ee=>({...Ee,horario_aspiracao:z.hora_final||"",hora_final:Te(z.hora_final||"",1)}))}else l!=null&&l.horario_inicio&&G(z=>({...z,horario_aspiracao:l.horario_inicio||"",hora_final:Te(l.horario_inicio||"",1)}))},[v,m,l]);const Pe=async()=>{if(o||b.current)return;if(!D.doadora_id){a({title:"Erro",description:"Selecione uma doadora",variant:"destructive"});return}if(!D.hora_final.trim()){a({title:"Erro de validao",description:"Hora final  obrigatria",variant:"destructive"});return}if(!(l!=null&&l.veterinario_responsavel)||!(l!=null&&l.tecnico_responsavel)){a({title:"Erro de validao",description:"A aspirao deve ter veterinrio e tcnico responsveis preenchidos. Por favor, edite a aspirao primeiro.",variant:"destructive"});return}if(m.find(Le=>Le.doadora_id===D.doadora_id)){a({title:"Erro",description:"Esta doadora j foi aspirada nesta aspirao",variant:"destructive"});return}if(oe(D)===0){X("add"),ee(!0);return}await Fe()},Fe=async()=>{if(!(o||b.current))try{b.current=!0,i(!0);const z=oe(D),Ee={pacote_aspiracao_id:e,doadora_id:D.doadora_id,fazenda_id:l.fazenda_id,data_aspiracao:l.data_aspiracao,horario_aspiracao:D.horario_aspiracao||null,hora_final:D.hora_final,atresicos:parseInt(D.atresicos)||0,degenerados:parseInt(D.degenerados)||0,expandidos:parseInt(D.expandidos)||0,desnudos:parseInt(D.desnudos)||0,viaveis:parseInt(D.viaveis)||0,total_oocitos:z,veterinario_responsavel:l.veterinario_responsavel,tecnico_responsavel:l.tecnico_responsavel,recomendacao_touro:D.recomendacao_touro.trim()||null,observacoes:D.observacoes.trim()||null},{error:Le}=await T.from("aspiracoes_doadoras").insert([Ee]);if(Le){if(Le.code==="23505"){a({title:"Erro",description:"Esta doadora j foi aspirada nesta aspirao",variant:"destructive"}),i(!1),b.current=!1,ce();return}throw Le}const He=he+z;await T.from("pacotes_aspiracao").update({total_oocitos:He}).eq("id",e),a({title:"Doadora adicionada",description:"Doadora adicionada  aspirao com sucesso"}),y(!1),G({doadora_id:"",horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""}),ce()}catch(z){a({title:"Erro ao adicionar doadora",description:z instanceof Error?z.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1),b.current=!1}},J=async()=>{if(!M.registro.trim()){a({title:"Erro de validao",description:"Registro  obrigatrio",variant:"destructive"});return}if(!(k==="Outra"?M.racaCustom.trim():M.raca.trim())){a({title:"Erro de validao",description:"Raa  obrigatria",variant:"destructive"});return}if(!D.hora_final.trim()){a({title:"Erro de validao",description:"Hora final  obrigatria",variant:"destructive"});return}if(!(l!=null&&l.veterinario_responsavel)||!(l!=null&&l.tecnico_responsavel)){a({title:"Erro de validao",description:"A aspirao deve ter veterinrio e tcnico responsveis preenchidos. Por favor, edite a aspirao primeiro.",variant:"destructive"});return}if(oe(D)===0){X("create"),ee(!0);return}await xe()},xe=async()=>{try{i(!0);const z=k==="Outra"?M.racaCustom.trim():M.raca.trim(),Ee=M.registro.trim().toUpperCase(),{data:Le,error:He}=await T.from("doadoras").select("id, registro, raca").ilike("registro",Ee).eq("raca",z);if(He&&He.code!=="PGRST116")throw He;if(Le&&Le.length>0){a({title:"Erro",description:`J existe uma doadora com o registro ${M.registro.trim()} e raa ${z}`,variant:"destructive"}),i(!1);return}const Me={fazenda_id:l.fazenda_id,registro:Ee,raca:z},{data:ft,error:dt}=await T.from("doadoras").insert([Me]).select().single();if(dt){if(dt.code==="23505"){a({title:"Erro",description:`J existe uma doadora com o registro ${M.registro.trim()} nesta fazenda`,variant:"destructive"}),i(!1);return}throw dt}const ht=oe(D),ta={pacote_aspiracao_id:e,doadora_id:ft.id,fazenda_id:l.fazenda_id,data_aspiracao:l.data_aspiracao,horario_aspiracao:D.horario_aspiracao||null,hora_final:D.hora_final,atresicos:parseInt(D.atresicos)||0,degenerados:parseInt(D.degenerados)||0,expandidos:parseInt(D.expandidos)||0,desnudos:parseInt(D.desnudos)||0,viaveis:parseInt(D.viaveis)||0,total_oocitos:ht,veterinario_responsavel:l.veterinario_responsavel,tecnico_responsavel:l.tecnico_responsavel,recomendacao_touro:D.recomendacao_touro.trim()||null,observacoes:D.observacoes.trim()||null},{error:fa}=await T.from("aspiracoes_doadoras").insert([ta]);if(fa){if(fa.code==="23505"){a({title:"Erro",description:"Esta doadora j foi aspirada nesta aspirao",variant:"destructive"}),i(!1),ce();return}throw fa}const va=he+ht;await T.from("pacotes_aspiracao").update({total_oocitos:va}).eq("id",e),a({title:"Doadora criada e adicionada",description:"Doadora criada e adicionada  aspirao com sucesso"}),w(!1),K({registro:"",raca:"",racaCustom:""}),P(""),ce()}catch(z){a({title:"Erro ao criar doadora",description:z instanceof Error?z.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},I=z=>{var Ee,Le,He,Me,ft;q(z),ne({horario_aspiracao:z.horario_aspiracao||"",hora_final:z.hora_final||"",atresicos:((Ee=z.atresicos)==null?void 0:Ee.toString())||"",degenerados:((Le=z.degenerados)==null?void 0:Le.toString())||"",expandidos:((He=z.expandidos)==null?void 0:He.toString())||"",desnudos:((Me=z.desnudos)==null?void 0:Me.toString())||"",viaveis:((ft=z.viaveis)==null?void 0:ft.toString())||"",recomendacao_touro:z.recomendacao_touro||"",observacoes:z.observacoes||""}),O(!0)},de=async()=>{if(A){if(!H.hora_final.trim()){a({title:"Erro de validao",description:"Hora final  obrigatria",variant:"destructive"});return}try{i(!0);const z=oe(H),Ee=A.total_oocitos||0,Le=z-Ee,He={horario_aspiracao:H.horario_aspiracao||null,hora_final:H.hora_final,atresicos:parseInt(H.atresicos)||0,degenerados:parseInt(H.degenerados)||0,expandidos:parseInt(H.expandidos)||0,desnudos:parseInt(H.desnudos)||0,viaveis:parseInt(H.viaveis)||0,total_oocitos:z,recomendacao_touro:H.recomendacao_touro.trim()||null,observacoes:H.observacoes.trim()||null},{error:Me}=await T.from("aspiracoes_doadoras").update(He).eq("id",A.id);if(Me)throw Me;const ft=he+Le;await T.from("pacotes_aspiracao").update({total_oocitos:ft}).eq("id",e),a({title:"Aspirao atualizada",description:"Aspirao da doadora atualizada com sucesso"}),O(!1),q(null),ce()}catch(z){a({title:"Erro ao atualizar aspirao",description:z instanceof Error?z.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}}},_e=async()=>{if(!$.veterinario_responsavel.trim()){a({title:"Erro de validao",description:"Veterinrio responsvel  obrigatrio",variant:"destructive"});return}if(!$.tecnico_responsavel.trim()){a({title:"Erro de validao",description:"Tcnico responsvel  obrigatrio",variant:"destructive"});return}try{i(!0);const{error:z}=await T.from("pacotes_aspiracao").update({veterinario_responsavel:$.veterinario_responsavel.trim(),tecnico_responsavel:$.tecnico_responsavel.trim(),updated_at:new Date().toISOString()}).eq("id",e);if(z)throw z;a({title:"Aspirao atualizada",description:"Informaes da aspirao atualizadas com sucesso"}),Y(!1),ce()}catch(z){a({title:"Erro ao atualizar aspirao",description:z instanceof Error?z.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},Se=async()=>{try{i(!0);const{error:z}=await T.from("pacotes_aspiracao").update({status:"FINALIZADO",updated_at:new Date().toISOString()}).eq("id",e);if(z)throw z;a({title:"Aspirao finalizada",description:"Aspirao finalizada com sucesso"}),N(!1),t("/aspiracoes")}catch(z){a({title:"Erro ao finalizar aspirao",description:z instanceof Error?z.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}};if(s)return r.jsx(zt,{});if(!l)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Aspirao no encontrada"}),r.jsx(U,{onClick:()=>t("/aspiracoes"),className:"mt-4",children:"Voltar para Aspiraes"})]});const ue=l.status==="FINALIZADO";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>t("/aspiracoes"),children:r.jsx(es,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["Aspirao - ",d]}),r.jsx("p",{className:"text-slate-600 mt-1",children:ue?"Aspirao finalizada":"Gerenciar doadoras da aspirao"})]})]}),!ue&&r.jsxs(U,{onClick:()=>N(!0),disabled:o||m.length===0,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(rf,{className:"w-4 h-4 mr-2"}),o?"Finalizando...":"Finalizar Pacote"]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ae,{children:"Informaes da Aspirao"}),!ue&&r.jsxs(U,{variant:"outline",size:"sm",onClick:()=>Y(!0),children:[r.jsx(dc,{className:"w-4 h-4 mr-2"}),"Editar"]})]})}),r.jsx(we,{children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{className:"text-slate-500",children:"Fazenda da Aspirao"}),r.jsx("p",{className:"font-medium",children:d})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(F,{className:"text-slate-500",children:"Fazendas Destino"}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:h.length>0?h.map((z,Ee)=>r.jsx(st,{variant:"outline",className:"font-medium",children:z},Ee)):r.jsx("p",{className:"font-medium text-slate-400",children:"-"})})]}),r.jsxs("div",{children:[r.jsx(F,{className:"text-slate-500",children:"Data da Aspirao"}),r.jsx("p",{className:"font-medium",children:Kt(l.data_aspiracao)})]}),r.jsxs("div",{children:[r.jsx(F,{className:"text-slate-500",children:"Horrio de Incio"}),r.jsx("p",{className:"font-medium",children:l.horario_inicio||"-"})]}),r.jsxs("div",{children:[r.jsx(F,{className:"text-slate-500",children:"Veterinrio Responsvel"}),r.jsx("p",{className:"font-medium",children:l.veterinario_responsavel||"-"})]}),r.jsxs("div",{children:[r.jsx(F,{className:"text-slate-500",children:"Tcnico Responsvel"}),r.jsx("p",{className:"font-medium",children:l.tecnico_responsavel||"-"})]}),r.jsxs("div",{children:[r.jsx(F,{className:"text-slate-500",children:"Status"}),r.jsx("div",{children:r.jsx(st,{variant:ue?"default":"secondary",children:ue?"FINALIZADO":"EM ANDAMENTO"})})]}),r.jsxs("div",{children:[r.jsx(F,{className:"text-slate-500",children:"Total de Ocitos"}),r.jsx("p",{className:"font-medium text-lg",children:he})]})]})})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Ae,{children:["Doadoras Aspiradas (",m.length,")"]}),!ue&&r.jsxs(Dt,{open:v,onOpenChange:z=>{y(z),z||G({doadora_id:"",horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""})},children:[r.jsx(Ds,{asChild:!0,children:r.jsxs(U,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ts,{className:"w-4 h-4 mr-2"}),"Adicionar Doadora"]})}),r.jsxs(_t,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Adicionar Doadora  Aspirao"}),r.jsx(Ot,{children:"Selecione uma doadora existente ou cadastre uma nova"})]}),r.jsxs(Rf,{defaultValue:"existing",className:"w-full",children:[r.jsxs(Xc,{className:"grid w-full grid-cols-2",children:[r.jsx(Ir,{value:"existing",children:"Doadora Existente"}),r.jsx(Ir,{value:"new",children:"Cadastrar Nova"})]}),r.jsxs(Fr,{value:"existing",className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Doadora *"}),r.jsxs(Ze,{value:D.doadora_id,onValueChange:z=>G({...D,doadora_id:z}),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione uma doadora"})}),r.jsx(Qe,{children:x.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhuma doadora disponvel nesta fazenda"}):x.map(z=>r.jsxs(ve,{value:z.id,children:[z.registro," ",z.nome?`- ${z.nome}`:""]},z.id))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Horrio de Aspirao"}),r.jsx(se,{type:"time",value:D.horario_aspiracao,onChange:z=>G({...D,horario_aspiracao:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Hora Final *"}),r.jsx(se,{type:"time",value:D.hora_final,onChange:z=>G({...D,hora_final:z.target.value}),required:!0})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Contagem de Ocitos"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Atrsicos"}),r.jsx(se,{type:"number",min:"0",value:D.atresicos,onChange:z=>G({...D,atresicos:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Degenerados"}),r.jsx(se,{type:"number",min:"0",value:D.degenerados,onChange:z=>G({...D,degenerados:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Expandidos"}),r.jsx(se,{type:"number",min:"0",value:D.expandidos,onChange:z=>G({...D,expandidos:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Desnudos"}),r.jsx(se,{type:"number",min:"0",value:D.desnudos,onChange:z=>G({...D,desnudos:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Viveis"}),r.jsx(se,{type:"number",min:"0",value:D.viaveis,onChange:z=>G({...D,viaveis:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Total"}),r.jsx(se,{value:oe(D),disabled:!0})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Recomendao de Touro"}),r.jsx(se,{value:D.recomendacao_touro,onChange:z=>G({...D,recomendacao_touro:z.target.value}),placeholder:"Recomendao de touro para esta doadora"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Observaes"}),r.jsx(Aa,{value:D.observacoes,onChange:z=>G({...D,observacoes:z.target.value}),placeholder:"Observaes sobre esta aspirao",rows:2})]}),r.jsx(U,{onClick:Pe,className:"w-full bg-green-600 hover:bg-green-700",disabled:o||x.length===0,children:o?"Adicionando...":"Adicionar"})]}),r.jsxs(Fr,{value:"new",className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Registro *"}),r.jsx(se,{value:M.registro,onChange:z=>K({...M,registro:z.target.value}),placeholder:"Registro da doadora"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Raa *"}),r.jsxs(Ze,{value:k,onValueChange:z=>{P(z),K(z==="Outra"?{...M,raca:"",racaCustom:""}:{...M,raca:z,racaCustom:""})},children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione a raa"})}),r.jsxs(Qe,{children:[pe.map(z=>r.jsx(ve,{value:z,children:z},z)),r.jsx(ve,{value:"Outra",children:"Outra"})]})]})]}),k==="Outra"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Raa Customizada *"}),r.jsx(se,{value:M.racaCustom,onChange:z=>K({...M,racaCustom:z.target.value}),placeholder:"Digite a raa"})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Contagem de Ocitos"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Atrsicos"}),r.jsx(se,{type:"number",min:"0",value:D.atresicos,onChange:z=>G({...D,atresicos:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Degenerados"}),r.jsx(se,{type:"number",min:"0",value:D.degenerados,onChange:z=>G({...D,degenerados:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Expandidos"}),r.jsx(se,{type:"number",min:"0",value:D.expandidos,onChange:z=>G({...D,expandidos:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Desnudos"}),r.jsx(se,{type:"number",min:"0",value:D.desnudos,onChange:z=>G({...D,desnudos:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Viveis"}),r.jsx(se,{type:"number",min:"0",value:D.viaveis,onChange:z=>G({...D,viaveis:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Total"}),r.jsx(se,{value:oe(D),disabled:!0})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Recomendao de Touro"}),r.jsx(se,{value:D.recomendacao_touro,onChange:z=>G({...D,recomendacao_touro:z.target.value}),placeholder:"Recomendao de touro para esta doadora"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Horrio de Aspirao"}),r.jsx(se,{type:"time",value:D.horario_aspiracao,onChange:z=>G({...D,horario_aspiracao:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Hora Final *"}),r.jsx(se,{type:"time",value:D.hora_final,onChange:z=>G({...D,hora_final:z.target.value}),required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Observaes"}),r.jsx(Aa,{value:D.observacoes,onChange:z=>G({...D,observacoes:z.target.value}),placeholder:"Observaes sobre esta aspirao",rows:2})]}),r.jsx(U,{onClick:J,className:"w-full bg-green-600 hover:bg-green-700",disabled:o,children:o?"Criando...":"Criar e Adicionar"})]})]})]})]})]})}),r.jsx(we,{children:r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Doadora"}),r.jsx(V,{children:"Registro"}),r.jsx(V,{children:"Horrio"}),r.jsx(V,{children:"Viveis"}),r.jsx(V,{children:"Total Ocitos"}),r.jsx(V,{children:"Recomendao Touro"}),r.jsx(V,{children:"Observaes"}),!ue&&r.jsx(V,{className:"text-right",children:"Aes"})]})}),r.jsx(Rt,{children:m.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:ue?7:8,className:"text-center text-slate-500",children:"Nenhuma doadora adicionada  aspirao"})}):m.map(z=>r.jsxs(ge,{children:[r.jsx(L,{className:"font-medium",children:z.doadora_nome||"-"}),r.jsx(L,{children:z.doadora_registro||"-"}),r.jsx(L,{children:z.horario_aspiracao?`${z.horario_aspiracao}${z.hora_final?` - ${z.hora_final}`:""}`:"-"}),r.jsx(L,{className:"font-medium",children:z.viaveis||0}),r.jsx(L,{children:z.total_oocitos||0}),r.jsx(L,{children:z.recomendacao_touro||"-"}),r.jsx(L,{children:z.observacoes||"-"}),!ue&&r.jsx(L,{className:"text-right",children:r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>I(z),children:r.jsx(dc,{className:"w-4 h-4"})})})]},z.id))})]})})]}),r.jsx(Dt,{open:C,onOpenChange:z=>{O(z),z||(q(null),ne({horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""}))},children:r.jsxs(_t,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(jt,{children:[r.jsxs(wt,{children:["Editar Aspirao - ",(A==null?void 0:A.doadora_nome)||(A==null?void 0:A.doadora_registro)||"Doadora"]}),r.jsx(Ot,{children:"Edite os dados da aspirao da doadora"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Horrio de Aspirao"}),r.jsx(se,{type:"time",value:H.horario_aspiracao,onChange:z=>ne({...H,horario_aspiracao:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Hora Final *"}),r.jsx(se,{type:"time",value:H.hora_final,onChange:z=>ne({...H,hora_final:z.target.value}),required:!0})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Contagem de Ocitos"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Atrsicos"}),r.jsx(se,{type:"number",min:"0",value:H.atresicos,onChange:z=>ne({...H,atresicos:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Degenerados"}),r.jsx(se,{type:"number",min:"0",value:H.degenerados,onChange:z=>ne({...H,degenerados:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Expandidos"}),r.jsx(se,{type:"number",min:"0",value:H.expandidos,onChange:z=>ne({...H,expandidos:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Desnudos"}),r.jsx(se,{type:"number",min:"0",value:H.desnudos,onChange:z=>ne({...H,desnudos:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Viveis"}),r.jsx(se,{type:"number",min:"0",value:H.viaveis,onChange:z=>ne({...H,viaveis:z.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Total"}),r.jsx(se,{value:oe(H),disabled:!0})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Recomendao de Touro"}),r.jsx(se,{value:H.recomendacao_touro,onChange:z=>ne({...H,recomendacao_touro:z.target.value}),placeholder:"Recomendao de touro para esta doadora"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Observaes"}),r.jsx(Aa,{value:H.observacoes,onChange:z=>ne({...H,observacoes:z.target.value}),placeholder:"Observaes sobre esta aspirao",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(U,{variant:"outline",onClick:()=>{O(!1),q(null)},disabled:o,children:"Cancelar"}),r.jsx(U,{onClick:de,className:"bg-blue-600 hover:bg-blue-700",disabled:o,children:o?"Salvando...":"Salvar Alteraes"})]})]})]})}),r.jsx(Qi,{open:B,onOpenChange:ee,children:r.jsxs(wo,{children:[r.jsxs(So,{children:[r.jsx(No,{children:"Confirmar Adio de Doadora sem Ocitos"}),r.jsxs(Co,{children:["Esta doadora no possui nenhum ocito (total = 0). Deseja realmente adicion-la  aspirao?",r.jsx("br",{}),r.jsx("br",{}),r.jsx("strong",{children:"Ateno:"})," Doadoras sem ocitos podem no ser teis para o processo de FIV."]})]}),r.jsxs(Eo,{children:[r.jsx(To,{disabled:o,children:"Cancelar"}),r.jsx(Ao,{onClick:async()=>{ee(!1),Q==="add"?await Fe():Q==="create"&&await xe(),X(null)},disabled:o,className:"bg-orange-600 hover:bg-orange-700",children:o?"Adicionando...":"Sim, Adicionar Mesmo Assim"})]})]})}),r.jsx(Dt,{open:R,onOpenChange:Y,children:r.jsxs(_t,{children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Editar Aspirao"}),r.jsx(Ot,{children:"Atualize as informaes da aspirao"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Veterinrio Responsvel *"}),r.jsx(se,{value:$.veterinario_responsavel,onChange:z=>E({...$,veterinario_responsavel:z.target.value}),placeholder:"Nome do veterinrio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Tcnico Responsvel *"}),r.jsx(se,{value:$.tecnico_responsavel,onChange:z=>E({...$,tecnico_responsavel:z.target.value}),placeholder:"Nome do tcnico",required:!0})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(U,{variant:"outline",onClick:()=>Y(!1),disabled:o,children:"Cancelar"}),r.jsx(U,{onClick:_e,className:"bg-blue-600 hover:bg-blue-700",disabled:o,children:o?"Salvando...":"Salvar"})]})]})]})}),r.jsx(Qi,{open:S,onOpenChange:N,children:r.jsxs(wo,{children:[r.jsxs(So,{children:[r.jsx(No,{children:"Finalizar Aspirao"}),r.jsxs(Co,{children:["Tem certeza que deseja finalizar esta aspirao? Esta ao no pode ser desfeita.",r.jsx("br",{}),r.jsx("br",{}),r.jsx("strong",{children:"Ateno:"})," Aps finalizar, a aspirao ficar apenas como histrico e no poder ser editada.",r.jsx("br",{}),r.jsx("br",{}),"Total de ocitos na aspirao: ",r.jsx("strong",{children:he})]})]}),r.jsxs(Eo,{children:[r.jsx(To,{disabled:o,children:"Cancelar"}),r.jsx(Ao,{onClick:Se,disabled:o,className:"bg-blue-600 hover:bg-blue-700",children:o?"Finalizando...":"Finalizar Aspirao"})]})]})})]})}function h5(){const[e,t]=u.useState([]),[a,s]=u.useState([]),[n,o]=u.useState(!0),[i,l]=u.useState(!1),[c,d]=u.useState(!1),[f,h]=u.useState(!1),[p,m]=u.useState(!1),[j,x]=u.useState(null),[g,b]=u.useState(null),{toast:v}=ea(),y=["Holandesa","Jersey","Gir","Girolando","Nelore","Angus","Brahman","Hereford","Simmental","Tabapu","Sindi","Caracu","Canchim","Senepol","Brangus"],[_,w]=u.useState({cliente_id:"",nome:"",raca:"",tipo_semen:"",quantidade:""}),[S,N]=u.useState({cliente_id:"",nome:"",raca:"",tipo_semen:"",quantidade:""}),[C,O]=u.useState(""),[A,q]=u.useState(""),[B,ee]=u.useState("");u.useEffect(()=>{Q()},[]);const Q=async()=>{try{o(!0);const{data:E,error:D}=await T.from("clientes").select("id, nome").order("nome",{ascending:!0});if(D)throw D;s(E||[]);const{data:G,error:M}=await T.from("doses_semen").select("*").order("nome",{ascending:!0});if(M)throw M;const K=new Map(E==null?void 0:E.map(ne=>[ne.id,ne.nome])),H=G==null?void 0:G.map(ne=>({...ne,cliente_nome:ne.cliente_id?K.get(ne.cliente_id):void 0}));t(H||[])}catch(E){v({title:"Erro ao carregar dados",description:E instanceof Error?E.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},X=async E=>{if(E.preventDefault(),!_.nome.trim()){v({title:"Erro de validao",description:"Nome  obrigatrio",variant:"destructive"});return}try{m(!0);const D={nome:_.nome,cliente_id:_.cliente_id||null,raca:_.raca||null,tipo_semen:_.tipo_semen||null,quantidade:parseInt(_.quantidade)||0};console.log("Dados sendo inseridos:",D);const{error:G,data:M}=await T.from("doses_semen").insert([D]).select();if(G)throw console.error("Erro detalhado:",G),G;v({title:"Dose criada",description:"Dose de smen criada com sucesso"}),l(!1),w({cliente_id:"",nome:"",raca:"",tipo_semen:"",quantidade:""}),Q()}catch(D){console.error("Erro completo:",D);let G="Erro desconhecido";D instanceof Error?G=D.message:typeof D=="object"&&D!==null&&(G=JSON.stringify(D,null,2)),v({title:"Erro ao criar dose",description:G.includes("RLS")||G.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":G.length>200?G.substring(0,200)+"...":G,variant:"destructive"})}finally{m(!1)}},R=E=>{var D;x(E),N({cliente_id:E.cliente_id||"",nome:E.nome,raca:E.raca||"",tipo_semen:E.tipo_semen||"",quantidade:((D=E.quantidade)==null?void 0:D.toString())||""}),d(!0)},Y=async E=>{if(E.preventDefault(),!!j){if(!S.nome.trim()){v({title:"Erro de validao",description:"Nome  obrigatrio",variant:"destructive"});return}try{m(!0);const D={nome:S.nome,cliente_id:S.cliente_id||null,raca:S.raca||null,tipo_semen:S.tipo_semen||null,quantidade:parseInt(S.quantidade)||0},{error:G}=await T.from("doses_semen").update(D).eq("id",j.id);if(G)throw G;v({title:"Dose atualizada",description:"Dose de smen atualizada com sucesso"}),d(!1),x(null),Q()}catch(D){const G=D instanceof Error?D.message:"Erro desconhecido";v({title:"Erro ao atualizar dose",description:G.includes("RLS")||G.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":G,variant:"destructive"})}finally{m(!1)}}},$=async()=>{if(g)try{m(!0);const{error:E}=await T.from("doses_semen").delete().eq("id",g.id);if(E)throw E;v({title:"Dose excluda",description:"Dose de smen excluda com sucesso"}),h(!1),b(null),Q()}catch(E){const D=E instanceof Error?E.message:"Erro desconhecido";v({title:"Erro ao excluir dose",description:D,variant:"destructive"})}finally{m(!1)}};return n?r.jsx(zt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Doses de Smen"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar doses de smen disponveis"})]}),r.jsxs(Dt,{open:i,onOpenChange:l,children:[r.jsx(Ds,{asChild:!0,children:r.jsxs(U,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ts,{className:"w-4 h-4 mr-2"}),"Nova Dose"]})}),r.jsxs(_t,{className:"max-w-md",children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Criar Nova Dose de Smen"}),r.jsx(Ot,{children:"Preencha os dados da dose"})]}),r.jsxs("form",{onSubmit:X,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"nome",children:"Nome *"}),r.jsx(se,{id:"nome",value:_.nome,onChange:E=>w({..._,nome:E.target.value}),placeholder:"Nome do touro/reprodutor",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"cliente_id",children:"Cliente"}),r.jsxs(Ze,{value:_.cliente_id,onValueChange:E=>w({..._,cliente_id:E}),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione o cliente"})}),r.jsx(Qe,{children:a.map(E=>r.jsx(ve,{value:E.id,children:E.nome},E.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"raca",children:"Raa"}),r.jsxs(Ze,{value:_.raca,onValueChange:E=>w({..._,raca:E}),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione a raa"})}),r.jsx(Qe,{children:y.map(E=>r.jsx(ve,{value:E,children:E},E))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"tipo_semen",children:"Tipo de Smen"}),r.jsxs(Ze,{value:_.tipo_semen,onValueChange:E=>w({..._,tipo_semen:E}),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione o tipo"})}),r.jsxs(Qe,{children:[r.jsx(ve,{value:"CONVENCIONAL",children:"CONVENCIONAL"}),r.jsx(ve,{value:"SEXADO",children:"SEXADO"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"quantidade",children:"Quantidade"}),r.jsx(se,{id:"quantidade",type:"number",min:"0",value:_.quantidade,onChange:E=>w({..._,quantidade:E.target.value}),placeholder:"Quantidade a ser adicionada",required:!0})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(U,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:p,children:p?"Salvando...":"Salvar"}),r.jsx(U,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:p,children:"Cancelar"})]})]})]})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Lista de Doses de Smen"})}),r.jsxs(we,{children:[r.jsx("div",{className:"space-y-4 mb-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Filtrar por Touro"}),r.jsx(se,{placeholder:"Buscar por nome do touro...",value:C,onChange:E=>O(E.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Filtrar por Tipo"}),r.jsxs(Ze,{value:A||"all",onValueChange:E=>q(E==="all"?"":E),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Todos os tipos"})}),r.jsxs(Qe,{children:[r.jsx(ve,{value:"all",children:"Todos os tipos"}),r.jsx(ve,{value:"CONVENCIONAL",children:"CONVENCIONAL"}),r.jsx(ve,{value:"SEXADO",children:"SEXADO"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Filtrar por Raa"}),r.jsxs(Ze,{value:B||"all",onValueChange:E=>ee(E==="all"?"":E),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Todas as raas"})}),r.jsxs(Qe,{children:[r.jsx(ve,{value:"all",children:"Todas as raas"}),y.map(E=>r.jsx(ve,{value:E,children:E},E))]})]})]})]})}),r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Nome (Touro)"}),r.jsx(V,{children:"Cliente"}),r.jsx(V,{children:"Raa"}),r.jsx(V,{children:"Tipo"}),r.jsx(V,{children:"Quantidade"}),r.jsx(V,{className:"text-right",children:"Aes"})]})}),r.jsx(Rt,{children:e.filter(E=>{const D=!C||E.nome.toLowerCase().includes(C.toLowerCase()),G=!A||E.tipo_semen===A,M=!B||E.raca===B;return D&&G&&M}).length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:6,className:"text-center text-slate-500",children:"Nenhuma dose cadastrada"})}):e.filter(E=>{const D=!C||E.nome.toLowerCase().includes(C.toLowerCase()),G=!A||E.tipo_semen===A,M=!B||E.raca===B;return D&&G&&M}).map(E=>r.jsxs(ge,{children:[r.jsx(L,{className:"font-medium",children:E.nome}),r.jsx(L,{children:E.cliente_nome||"-"}),r.jsx(L,{children:E.raca||"-"}),r.jsx(L,{children:E.tipo_semen||"-"}),r.jsx(L,{children:E.quantidade??"-"}),r.jsx(L,{className:"text-right",children:r.jsxs("div",{className:"flex gap-1 justify-end",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>R(E),children:r.jsx(dc,{className:"w-4 h-4"})}),r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{b(E),h(!0)},children:r.jsx(Su,{className:"w-4 h-4 text-red-600"})})]})})]},E.id))})]})]})]}),r.jsx(Dt,{open:c,onOpenChange:d,children:r.jsxs(_t,{className:"max-w-md",children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Editar Dose de Smen"}),r.jsx(Ot,{children:"Atualizar dados da dose"})]}),r.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"edit_nome",children:"Nome *"}),r.jsx(se,{id:"edit_nome",value:S.nome,onChange:E=>N({...S,nome:E.target.value}),placeholder:"Nome do touro/reprodutor",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"edit_cliente_id",children:"Cliente"}),r.jsxs(Ze,{value:S.cliente_id,onValueChange:E=>N({...S,cliente_id:E}),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione o cliente"})}),r.jsx(Qe,{children:a.map(E=>r.jsx(ve,{value:E.id,children:E.nome},E.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"edit_raca",children:"Raa"}),r.jsxs(Ze,{value:S.raca,onValueChange:E=>N({...S,raca:E}),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione a raa"})}),r.jsx(Qe,{children:y.map(E=>r.jsx(ve,{value:E,children:E},E))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"edit_quantidade",children:"Quantidade"}),r.jsx(se,{id:"edit_quantidade",type:"number",min:"0",value:S.quantidade,onChange:E=>N({...S,quantidade:E.target.value}),placeholder:"Quantidade",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"edit_tipo_semen",children:"Tipo de Smen"}),r.jsxs(Ze,{value:S.tipo_semen,onValueChange:E=>N({...S,tipo_semen:E}),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione o tipo"})}),r.jsxs(Qe,{children:[r.jsx(ve,{value:"CONVENCIONAL",children:"CONVENCIONAL"}),r.jsx(ve,{value:"SEXADO",children:"SEXADO"})]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(U,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:p,children:p?"Salvando...":"Salvar Alteraes"}),r.jsx(U,{type:"button",variant:"outline",onClick:()=>d(!1),disabled:p,children:"Cancelar"})]})]})]})}),r.jsx(Qi,{open:f,onOpenChange:h,children:r.jsxs(wo,{children:[r.jsxs(So,{children:[r.jsx(No,{children:"Confirmar Excluso"}),r.jsxs(Co,{children:['Tem certeza que deseja excluir a dose "',g==null?void 0:g.nome,'"? Esta ao no pode ser desfeita.']})]}),r.jsxs(Eo,{children:[r.jsx(To,{disabled:p,children:"Cancelar"}),r.jsx(Ao,{onClick:$,disabled:p,className:"bg-red-600 hover:bg-red-700",children:p?"Excluindo...":"Excluir"})]})]})})]})}function iy(){var St;const{id:e}=$r(),t=za(),{toast:a}=ea(),[s,n]=u.useState([]),[o,i]=u.useState([]),[l,c]=u.useState([]),[d,f]=u.useState([]),[h,p]=u.useState([]),[m,j]=u.useState([]),[x,g]=u.useState(!0),[b,v]=u.useState(!1),[y,_]=u.useState(!1),[w,S]=u.useState(null),[N,C]=u.useState([]),[O,A]=u.useState(!1),[q,B]=u.useState({}),[ee,Q]=u.useState(!1),[X,R]=u.useState([]),[Y,$]=u.useState(!1),[E,D]=u.useState([]),[G,M]=u.useState([]),[K,H]=u.useState([]),[ne,pe]=u.useState(""),[k,P]=u.useState([]),[ce,re]=u.useState(""),[ie,oe]=u.useState([]),[he,Te]=u.useState(""),[Pe,Fe]=u.useState(""),[J,xe]=u.useState(""),[I,de]=u.useState(""),[_e,Se]=u.useState([]),[ue,z]=u.useState([]),[Ee,Le]=u.useState([]),[He,Me]=u.useState([]),[ft,dt]=u.useState(!1),ht=Z=>({0:"Recepo + Maturao",1:"Fecundao",2:"Clivagem",3:"Clivagem Avanada",4:"Compactao",5:"Mrula / Blastocisto Inicial",6:"Blastocisto",7:"Blastocisto Expandido",8:"Resgate / Sada Tardia"})[Z]||`Dia ${Z}`,ta=Z=>Z===0?"bg-blue-100 text-blue-800 border-blue-300":Z===1?"bg-green-100 text-green-800 border-green-300":Z>=2&&Z<=4?"bg-yellow-100 text-yellow-800 border-yellow-300":Z>=5&&Z<=6?"bg-orange-100 text-orange-800 border-orange-300":Z===7?"bg-purple-100 text-purple-800 border-purple-300":Z===8?"bg-red-100 text-red-800 border-red-300":"bg-slate-100 text-slate-800 border-slate-300",[fa,va]=u.useState([]),[yt,ra]=u.useState({aspiracao_doadora_id:"",dose_semen_id:"",quantidade_fracionada:"1.0",quantidade_oocitos:"",observacoes:""}),[Gt,gs]=u.useState({pacote_aspiracao_id:"",observacoes:"",doses_selecionadas:[]}),[ss,Vr]=u.useState(null);u.useEffect(()=>{e?Fa(e):$n()},[e]),u.useEffect(()=>{let Z=[...s];if(Pe&&(Z=Z.filter(be=>{const Ne=ue.find(Oe=>Oe.id===be.pacote_aspiracao_id);return(Ne==null?void 0:Ne.fazenda_id)===Pe})),I!==""){const be=parseInt(I);Z=Z.filter(Ne=>Ne.dia_atual===be)}Se(Z)},[s,Pe,I,ue]);const Bn=He.filter(Z=>Z.nome.toLowerCase().includes(J.toLowerCase()));u.useEffect(()=>{const Z=be=>{be.target.closest(".fazenda-busca-container")||dt(!1)};if(ft)return document.addEventListener("mousedown",Z),()=>{document.removeEventListener("mousedown",Z)}},[ft]);const $n=async()=>{try{g(!0);const{data:Z,error:be}=await T.from("pacotes_aspiracao").select("*").eq("status","FINALIZADO").order("data_aspiracao",{ascending:!1});if(be)throw be;console.log("Pacotes FINALIZADOS encontrados:",(Z==null?void 0:Z.length)||0),Z&&Z.length>0&&console.log("IDs dos pacotes FINALIZADOS:",Z.map(me=>me.id));const{data:Ne,error:Oe}=await T.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(Oe)throw Oe;p(Ne||[]);const{data:mt,error:Mt}=await T.from("clientes").select("id, nome").order("nome",{ascending:!0});Mt?console.error("Erro ao carregar clientes:",Mt):va(mt||[]);const ze=new Map(Ne==null?void 0:Ne.map(me=>[me.id,me.nome])),et=new Map,Re=new Map,Ft=(Z==null?void 0:Z.map(me=>me.id))||[];if(Ft.length>0){const{data:me,error:bt}=await T.from("pacotes_aspiracao_fazendas_destino").select("pacote_aspiracao_id, fazenda_destino_id").in("pacote_aspiracao_id",Ft);bt?console.error("Erro ao carregar fazendas destino:",bt):me&&me.forEach(Ut=>{const Ga=ze.get(Ut.fazenda_destino_id);if(Ga){const ca=et.get(Ut.pacote_aspiracao_id)||[];ca.push(Ga),et.set(Ut.pacote_aspiracao_id,ca)}});const{data:Ie,error:ga}=await T.from("aspiracoes_doadoras").select("pacote_aspiracao_id").in("pacote_aspiracao_id",Ft);ga?console.error("Erro ao carregar aspiraes:",ga):Ie&&Ie.forEach(Ut=>{Ut.pacote_aspiracao_id&&Re.set(Ut.pacote_aspiracao_id,(Re.get(Ut.pacote_aspiracao_id)||0)+1)})}const{data:at,error:na}=await T.from("lotes_fiv").select("*").order("data_abertura",{ascending:!1});if(na)throw na;const qt=new Set((at==null?void 0:at.map(me=>me.pacote_aspiracao_id).filter(me=>!!me))||[]),te=(Z||[]).filter(me=>me.usado_em_lote_fiv!==void 0?!me.usado_em_lote_fiv:!qt.has(me.id));console.log("Pacotes j usados em lotes:",Array.from(qt)),console.log("Total de lotes encontrados:",(at==null?void 0:at.length)||0),console.log("Pacotes disponveis aps filtrar usados:",te.length);const ke=te.map(me=>({...me,fazenda_nome:ze.get(me.fazenda_id),fazendas_destino_nomes:et.get(me.id)||[],quantidade_doadoras:Re.get(me.id)||0}));console.log("Pacotes finais para exibir:",ke.length),i(ke);const ot=at||[],Yt=(ot==null?void 0:ot.map(me=>me.id))||[],{data:$t,error:Ke}=await T.from("lote_fiv_acasalamentos").select("lote_fiv_id").in("lote_fiv_id",Yt);if(Ke)throw Ke;const aa=new Map;$t==null||$t.forEach(me=>{aa.set(me.lote_fiv_id,(aa.get(me.lote_fiv_id)||0)+1)});const{data:_a,error:kt}=await T.from("lote_fiv_fazendas_destino").select("lote_fiv_id, fazenda_id").in("lote_fiv_id",Yt);if(kt)throw kt;const ja=new Map;_a==null||_a.forEach(me=>{const bt=ze.get(me.fazenda_id);if(bt){const Ie=ja.get(me.lote_fiv_id)||[];Ie.push(bt),ja.set(me.lote_fiv_id,Ie)}});const Qs=new Map(ke.map(me=>[me.id,me]));(Z||[]).forEach(me=>{Qs.has(me.id)||Qs.set(me.id,{...me,fazenda_nome:ze.get(me.fazenda_id),fazendas_destino_nomes:et.get(me.id)||[],quantidade_doadoras:Re.get(me.id)||0})});const Xs=(ot||[]).map(me=>{const bt=Qs.get(me.pacote_aspiracao_id),Ie=new Date;Ie.setHours(0,0,0,0);let ga;if(bt!=null&&bt.data_aspiracao){const ns=bt.data_aspiracao.split("T")[0]+"T00:00:00";ga=new Date(ns)}else{const ns=new Date(me.data_abertura);ns.setDate(ns.getDate()-1),ga=ns}ga.setHours(0,0,0,0);const Ut=Ie.getTime()-ga.getTime(),Ga=Math.floor(Ut/(1e3*60*60*24)),ca=Math.max(0,Ga);return{...me,pacote_nome:bt==null?void 0:bt.fazenda_nome,pacote_data:bt==null?void 0:bt.data_aspiracao,fazendas_destino_nomes:ja.get(me.id)||[],quantidade_acasalamentos:aa.get(me.id)||0,dia_atual:ca}}),qa=Xs.filter(me=>me.status==="ABERTO"&&me.dia_atual!==void 0&&me.dia_atual>8);if(qa.length>0){const me=qa.map(bt=>bt.id);T.from("lotes_fiv").update({status:"FECHADO"}).in("id",me).then(({error:bt})=>{bt?console.error("Erro ao fechar lotes automaticamente:",bt):console.log(`${me.length} lote(s) fechado(s) automaticamente aps D8`)})}const fl=Xs.filter(me=>me.status==="FECHADO"?!1:me.dia_atual!==void 0&&me.dia_atual<=8);n(Xs),Se(fl);const zs=new Set(Xs.map(me=>me.pacote_aspiracao_id).filter(me=>!!me)),hr=[];(Z||[]).forEach(me=>{zs.has(me.id)&&hr.push({...me,fazenda_nome:ze.get(me.fazenda_id),fazendas_destino_nomes:et.get(me.id)||[],quantidade_doadoras:Re.get(me.id)||0})}),z(hr);const rs=new Set,mr=new Map;hr.forEach(me=>{if(me.data_aspiracao){const bt=me.data_aspiracao.split("T")[0];rs.add(bt)}me.fazenda_id&&me.fazenda_nome&&mr.set(me.fazenda_id,me.fazenda_nome)}),Le(Array.from(rs).sort().reverse()),Me(Array.from(mr.entries()).map(([me,bt])=>({id:me,nome:bt})).sort((me,bt)=>me.nome.localeCompare(bt.nome)))}catch(Z){a({title:"Erro ao carregar dados",description:Z instanceof Error?Z.message:"Erro desconhecido",variant:"destructive"})}finally{g(!1)}},Fa=async Z=>{try{g(!0);const{data:be,error:Ne}=await T.from("lotes_fiv").select("*").eq("id",Z).single();if(Ne)throw Ne;const{data:Oe,error:mt}=await T.from("pacotes_aspiracao").select("*").eq("id",be.pacote_aspiracao_id).single();if(mt)throw mt;Te(Oe.data_aspiracao);const{data:Mt,error:ze}=await T.from("fazendas").select("nome").eq("id",Oe.fazenda_id).single();ze?(console.error("Erro ao carregar fazenda origem:",ze),pe("")):pe((Mt==null?void 0:Mt.nome)||"");const{data:et,error:Re}=await T.from("pacotes_aspiracao_fazendas_destino").select("fazenda_destino_id").eq("pacote_aspiracao_id",Oe.id);Re&&console.error("Erro ao carregar fazendas destino:",Re);let Ft=[];if(!et||et.length===0?Oe.fazenda_destino_id&&(Ft=[Oe.fazenda_destino_id]):Ft=et.map(Ie=>Ie.fazenda_destino_id),R(Ft),Ft.length>0){const{data:Ie,error:ga}=await T.from("fazendas").select("id, nome").in("id",Ft);if(ga)console.error("Erro ao carregar nomes das fazendas destino:",ga),P([]);else if(P((Ie==null?void 0:Ie.map(Ut=>Ut.nome))||[]),Ie){const Ut=[...h];Ie.forEach(Ga=>{Ut.find(ca=>ca.id===Ga.id)||Ut.push(Ga)}),p(Ut)}}else P([]);const{data:at,error:na}=await T.from("lote_fiv_acasalamentos").select("*").eq("lote_fiv_id",Z).order("created_at",{ascending:!0});if(na)throw na;const qt=(at==null?void 0:at.map(Ie=>Ie.aspiracao_doadora_id))||[],{data:te,error:ke}=await T.from("aspiracoes_doadoras").select("id, doadora_id, viaveis").in("id",qt);if(ke)throw ke;const ot=[...new Set((te==null?void 0:te.map(Ie=>Ie.doadora_id))||[])],{data:Yt,error:$t}=await T.from("doadoras").select("id, nome, registro").in("id",ot);if($t)throw $t;const Ke=[...new Set((at==null?void 0:at.map(Ie=>Ie.dose_semen_id))||[])],{data:aa,error:_a}=await T.from("doses_semen").select("id, nome").in("id",Ke);if(_a)throw _a;const kt=new Map(Yt==null?void 0:Yt.map(Ie=>[Ie.id,Ie])),ja=new Map(aa==null?void 0:aa.map(Ie=>[Ie.id,Ie])),Qs=new Map(te==null?void 0:te.map(Ie=>[Ie.id,Ie])),{data:Ks,error:Xs}=await T.from("embrioes").select("lote_fiv_acasalamento_id").eq("lote_fiv_id",Z),qa=new Map;!Xs&&Ks&&Ks.forEach(Ie=>{Ie.lote_fiv_acasalamento_id&&qa.set(Ie.lote_fiv_acasalamento_id,(qa.get(Ie.lote_fiv_acasalamento_id)||0)+1)});const fl=(at||[]).map(Ie=>{const ga=Qs.get(Ie.aspiracao_doadora_id),Ut=ga?kt.get(ga.doadora_id):void 0,Ga=ja.get(Ie.dose_semen_id);return{...Ie,doadora_nome:(Ut==null?void 0:Ut.nome)||(Ut==null?void 0:Ut.registro),doadora_registro:Ut==null?void 0:Ut.registro,dose_nome:Ga==null?void 0:Ga.nome,viaveis:ga==null?void 0:ga.viaveis,total_embrioes_produzidos:qa.get(Ie.id)||0}});C(fl),S({...be,pacote_nome:Oe.fazenda_id,pacote_data:Oe.data_aspiracao}),_(!0);const{data:zs,error:hr}=await T.from("aspiracoes_doadoras").select("id, doadora_id, viaveis").eq("pacote_aspiracao_id",be.pacote_aspiracao_id);if(hr)console.error("Erro ao carregar todas as aspiraes:",hr);else{const Ie=new Map;at==null||at.forEach(ca=>{const ns=ca.aspiracao_doadora_id,Pf=ca.quantidade_oocitos||0;Ie.set(ns,(Ie.get(ns)||0)+Pf)});const Ut=(zs||[]).filter(ca=>{const ns=ca.viaveis??0,Pf=Ie.get(ca.id)||0,l1=ns-Pf;return ns>0&&l1>0}).map(ca=>({...ca,oocitos_disponiveis:(ca.viaveis??0)-(Ie.get(ca.id)||0)}));M(Ut);const Ga=[...new Set((zs==null?void 0:zs.map(ca=>ca.doadora_id))||[])];if(Ga.length>0){const{data:ca,error:ns}=await T.from("doadoras").select("id, nome, registro").in("id",Ga);!ns&&ca&&j(ca)}}const{data:rs,error:mr}=await T.from("doses_semen").select("id, nome, cliente_id").order("nome",{ascending:!0});if(mr)console.error("Erro ao carregar doses disponveis:",mr),H([]);else try{const Ie=be.doses_selecionadas;Ie&&Array.isArray(Ie)&&Ie.length>0?H((rs||[]).filter(ga=>Ie.includes(ga.id))):H(rs||[])}catch(Ie){console.warn("Campo doses_selecionadas no encontrado, mostrando todas as doses:",Ie),H(rs||[])}const{data:me,error:bt}=await T.from("clientes").select("id, nome").order("nome",{ascending:!0});bt?console.error("Erro ao carregar clientes:",bt):va(me||[]),await Hn(Z)}catch(be){a({title:"Erro ao carregar detalhes do lote",description:be instanceof Error?be.message:"Erro desconhecido",variant:"destructive"})}finally{g(!1)}},Hn=async Z=>{try{const{data:be,error:Ne}=await T.from("pacotes_aspiracao").select("id, data_aspiracao, observacoes").eq("status","FINALIZADO").like("observacoes",`%Lote FIV ${Z.slice(0,8)}%`).order("data_aspiracao",{ascending:!1});if(Ne){console.error("Erro ao carregar histrico de despachos:",Ne),D([]);return}if(!be||be.length===0){D([]);return}const{data:Oe,error:mt}=await T.from("embrioes").select("id, lote_fiv_acasalamento_id, created_at").eq("lote_fiv_id",Z).order("created_at",{ascending:!1});if(mt){console.error("Erro ao carregar embries:",mt),D([]);return}const Mt=new Map;Oe==null||Oe.forEach(Re=>{if(Re.created_at){const Ft=Re.created_at.split("T")[0],at=Mt.get(Ft)||[];at.push(Re),Mt.set(Ft,at)}});const ze=[...new Set((Oe==null?void 0:Oe.map(Re=>Re.lote_fiv_acasalamento_id).filter(Boolean))||[])];if(ze.length>0){const{data:Re,error:Ft}=await T.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",ze);if(Ft)console.error("Erro ao carregar acasalamentos:",Ft);else if(Re){const at=[...new Set(Re.map(kt=>kt.aspiracao_doadora_id).filter(Boolean))],{data:na}=await T.from("aspiracoes_doadoras").select("id, doadora_id").in("id",at),qt=[...new Set((na==null?void 0:na.map(kt=>kt.doadora_id).filter(Boolean))||[])],{data:te}=await T.from("doadoras").select("id, registro, nome").in("id",qt),ke=[...new Set(Re.map(kt=>kt.dose_semen_id).filter(Boolean))],{data:ot}=await T.from("doses_semen").select("id, nome").in("id",ke),Yt=new Map((na==null?void 0:na.map(kt=>[kt.id,kt]))||[]),$t=new Map((te==null?void 0:te.map(kt=>[kt.id,kt]))||[]),Ke=new Map((ot==null?void 0:ot.map(kt=>[kt.id,kt]))||[]),aa=new Map(Re.map(kt=>[kt.id,kt])),_a=be.map(kt=>{const ja=kt.data_aspiracao.split("T")[0],Qs=Mt.get(ja)||[],Ks=new Map;Qs.forEach(qa=>{qa.lote_fiv_acasalamento_id&&Ks.set(qa.lote_fiv_acasalamento_id,(Ks.get(qa.lote_fiv_acasalamento_id)||0)+1)});const Xs=Array.from(Ks.entries()).map(([qa,fl])=>{const zs=aa.get(qa),hr=zs?Yt.get(zs.aspiracao_doadora_id):void 0,rs=hr?$t.get(hr.doadora_id):void 0,mr=zs?Ke.get(zs.dose_semen_id):void 0;return{acasalamento_id:qa,quantidade:fl,doadora:(rs==null?void 0:rs.registro)||(rs==null?void 0:rs.nome)||"-",dose:(mr==null?void 0:mr.nome)||"-"}});return{id:kt.id,data_despacho:ja,acasalamentos:Xs,pacote_id:kt.id}});D(_a);return}}const et=be.map(Re=>{const Ft=Re.data_aspiracao.split("T")[0];return{id:Re.id,data_despacho:Ft,acasalamentos:[],pacote_id:Re.id}});D(et)}catch(be){console.error("Erro ao carregar histrico:",be),D([])}},qe=()=>{$(!0)},fe=async()=>{var Z;if(w)try{A(!0);const be=o.find(Ke=>Ke.id===w.pacote_aspiracao_id),Ne=new Date;Ne.setHours(0,0,0,0);let Oe;if(be!=null&&be.data_aspiracao){const Ke=be.data_aspiracao.split("T")[0]+"T00:00:00";Oe=new Date(Ke)}else{const Ke=new Date(w.data_abertura);Ke.setDate(Ke.getDate()-1),Oe=Ke}Oe.setHours(0,0,0,0);const mt=Ne.getTime()-Oe.getTime(),Mt=Math.floor(mt/(1e3*60*60*24));if(Math.max(0,Mt)>8){a({title:"Prazo expirado",description:"No  possvel criar embries aps o D8. O lote ser fechado automaticamente.",variant:"destructive"}),A(!1);return}const et=N.filter(Ke=>{var _a;return parseInt(q[Ke.id]||((_a=Ke.quantidade_embrioes)==null?void 0:_a.toString())||"0")>0});if(et.length===0){a({title:"Nenhum embrio para despachar",description:"Preencha a quantidade de embries em pelo menos um acasalamento antes de despachar.",variant:"destructive"});return}const{data:Re}=await T.from("pacotes_aspiracao").select("fazenda_id").eq("id",w.pacote_aspiracao_id).single(),Ft=`${ne} - ${k.join(", ")}`,at=new Date().toISOString().split("T")[0],na=X.length>0?X[0]:null;if(!na){a({title:"Erro ao despachar",description:" necessrio ter pelo menos uma fazenda destino configurada no lote.",variant:"destructive"});return}const{data:qt,error:te}=await T.from("pacotes_aspiracao").insert([{data_aspiracao:at,fazenda_id:(Re==null?void 0:Re.fazenda_id)||null,fazenda_destino_id:na,status:"FINALIZADO",observacoes:`Despachado do Lote FIV ${w.id.slice(0,8)}... em ${Kt(at)}. Pacote: ${Ft}`}]).select().single();if(te)throw console.error("Erro ao criar pacote:",te),te;if(X.length>0){const{error:Ke}=await T.from("pacotes_aspiracao_fazendas_destino").insert(X.map(aa=>({pacote_aspiracao_id:qt.id,fazenda_destino_id:aa})));Ke&&console.error("Erro ao associar fazendas destino:",Ke)}const ke=[],ot=[];for(const Ke of et){const aa=parseInt(q[Ke.id]||((Z=Ke.quantidade_embrioes)==null?void 0:Z.toString())||"0");if(aa>0){for(let _a=0;_a<aa;_a++)ke.push({lote_fiv_id:w.id,lote_fiv_acasalamento_id:Ke.id,status_atual:"FRESCO"});ot.push({acasalamento_id:Ke.id,quantidade:aa,doadora:Ke.doadora_registro||Ke.doadora_nome,dose:Ke.dose_nome})}}if(ke.length>0){const{error:Ke}=await T.from("embrioes").insert(ke);if(Ke)throw console.error("Erro detalhado ao criar embries:",Ke),Ke}const Yt={id:qt.id,data_despacho:at,acasalamentos:ot,pacote_id:qt.id};D([Yt,...E]);const $t=et.map(Ke=>T.from("lote_fiv_acasalamentos").update({quantidade_embrioes:null}).eq("id",Ke.id));await Promise.all($t),B({}),a({title:"Embries despachados",description:`${ke.length} embrio(es) foram despachados para o pacote "${Ft}".`}),Fa(w.id)}catch(be){a({title:"Erro ao despachar embries",description:be instanceof Error?be.message:"Erro desconhecido",variant:"destructive"})}finally{A(!1)}},Ve=async Z=>{gs({...Gt,pacote_aspiracao_id:Z});const be=o.find(Ne=>Ne.id===Z);if(Vr(be||null),be){const{data:Ne,error:Oe}=await T.from("aspiracoes_doadoras").select("id, doadora_id, viaveis").eq("pacote_aspiracao_id",Z);if(Oe){console.error("Erro ao carregar aspiraes:",Oe);return}c(Ne||[]);const mt=[...new Set((Ne==null?void 0:Ne.map(et=>et.doadora_id))||[])];if(mt.length>0){const{data:et,error:Re}=await T.from("doadoras").select("id, nome, registro").in("id",mt);if(Re){console.error("Erro ao carregar doadoras:",Re);return}j(et||[])}const{data:Mt,error:ze}=await T.from("doses_semen").select("id, nome, cliente_id").order("nome",{ascending:!0});if(ze){console.error("Erro ao carregar doses:",ze);return}f(Mt||[])}},It=async Z=>{if(Z.preventDefault(),!w)return;if(!yt.aspiracao_doadora_id){a({title:"Erro de validao",description:"Doadora  obrigatria",variant:"destructive"});return}if(!yt.dose_semen_id){a({title:"Erro de validao",description:"Selecione uma dose de smen",variant:"destructive"});return}const be=parseFloat(yt.quantidade_fracionada)||0;if(be<=0){a({title:"Erro de validao",description:"Quantidade fracionada deve ser maior que zero",variant:"destructive"});return}try{A(!0);const Ne=G.find(et=>et.id===yt.aspiracao_doadora_id),Oe=(Ne==null?void 0:Ne.oocitos_disponiveis)??0,mt=parseInt(yt.quantidade_oocitos)||0;if(mt>Oe){a({title:"Erro de validao",description:`A quantidade de ocitos (${mt}) no pode ser maior que os ocitos disponveis (${Oe})`,variant:"destructive"});return}const Mt={lote_fiv_id:w.id,aspiracao_doadora_id:yt.aspiracao_doadora_id,dose_semen_id:yt.dose_semen_id,quantidade_fracionada:be,quantidade_oocitos:mt>0?mt:null,observacoes:yt.observacoes||null},{error:ze}=await T.from("lote_fiv_acasalamentos").insert([Mt]);if(ze)throw ze;a({title:"Acasalamento adicionado",description:"Acasalamento adicionado com sucesso"}),Q(!1),ra({aspiracao_doadora_id:"",dose_semen_id:"",quantidade_fracionada:"1.0",quantidade_oocitos:"",observacoes:""}),await Fa(w.id)}catch(Ne){const Oe=Ne instanceof Error?Ne.message:"Erro desconhecido";a({title:"Erro ao adicionar acasalamento",description:Oe.includes("RLS")||Oe.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":Oe,variant:"destructive"})}finally{A(!1)}},We=async Z=>{var be,Ne;if(Z.preventDefault(),!Gt.pacote_aspiracao_id){a({title:"Erro de validao",description:"Pacote de aspirao  obrigatrio",variant:"destructive"});return}if(!ss){a({title:"Erro de validao",description:"Pacote selecionado no encontrado",variant:"destructive"});return}try{A(!0);const{data:Oe,error:mt}=await T.from("pacotes_aspiracao").select("id, status").eq("id",Gt.pacote_aspiracao_id).single();if(mt||!Oe){a({title:"Erro de validao",description:"Pacote de aspirao no encontrado ou invlido",variant:"destructive"});return}if(Oe.status!=="FINALIZADO"){a({title:"Erro de validao",description:"Apenas pacotes FINALIZADOS podem ser usados para criar lotes FIV",variant:"destructive"});return}const Mt=new Date(ss.data_aspiracao);Mt.setDate(Mt.getDate()+1);const ze=Mt.toISOString().split("T")[0];console.log("Dados que sero enviados:",{pacote_aspiracao_id:Gt.pacote_aspiracao_id,data_abertura:ze,data_fecundacao:ze,status:"ABERTO"});const et={pacote_aspiracao_id:Gt.pacote_aspiracao_id,data_abertura:ze,data_fecundacao:ze,status:"ABERTO",observacoes:Gt.observacoes||null};if(Gt.doses_selecionadas&&Gt.doses_selecionadas.length>0)try{et.doses_selecionadas=Gt.doses_selecionadas}catch(qt){console.warn("Campo doses_selecionadas no disponvel no banco:",qt)}let Re;const{data:Ft,error:at}=await T.from("lotes_fiv").insert([et]).select().single();if(at)if((be=at.message)!=null&&be.includes("doses_selecionadas")||at.code==="42703"){console.warn("Campo doses_selecionadas no existe no banco, criando lote sem ele"),delete et.doses_selecionadas;const{data:qt,error:te}=await T.from("lotes_fiv").insert([et]).select().single();if(te)throw console.error("Erro detalhado ao criar lote:",{message:te.message,details:te.details,hint:te.hint,code:te.code}),te;Re=qt}else throw console.error("Erro detalhado ao criar lote:",{message:at.message,details:at.details,hint:at.hint,code:at.code}),at;else Re=Ft;const na=(Ne=ss.fazendas_destino_nomes)==null?void 0:Ne.map(qt=>{const te=h.find(ke=>ke.nome===qt);return te==null?void 0:te.id}).filter(qt=>!!qt);if(na&&na.length>0){const{error:qt}=await T.from("lote_fiv_fazendas_destino").insert(na.map(te=>({lote_fiv_id:Re.id,fazenda_id:te})));if(qt)throw qt}try{await T.from("pacotes_aspiracao").update({usado_em_lote_fiv:!0}).eq("id",Gt.pacote_aspiracao_id)}catch(qt){console.warn("Campo usado_em_lote_fiv no existe no banco:",qt)}a({title:"Lote FIV criado",description:"Lote FIV criado com sucesso. Agora voc pode adicionar acasalamentos."}),v(!1),gs({pacote_aspiracao_id:"",observacoes:"",doses_selecionadas:[]}),Vr(null),c([]),j([]),t(`/lotes-fiv/${Re.id}`)}catch(Oe){const mt=Oe instanceof Error?Oe.message:"Erro desconhecido";a({title:"Erro ao criar lote",description:mt.includes("RLS")||mt.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":mt,variant:"destructive"})}finally{A(!1)}};if(x&&!w)return r.jsx(zt,{});if(w&&y){const Z=new Date,be=new Date(Z.getFullYear(),Z.getMonth(),Z.getDate());be.setHours(0,0,0,0);const Ne=te=>te,Oe=te=>({0:"Ocito",1:"Zigoto",2:"2 Clulas",3:"4 Clulas",4:"8 Clulas",5:"Mrula",6:"Blastocisto",7:"Blastocisto Expandido",8:"Blastocisto Expandido"})[te]||`D${te}`;let mt=he;if(!mt&&w.pacote_data&&(mt=w.pacote_data),!mt){const te=new Date(w.data_abertura);te.setDate(te.getDate()-1),mt=te.toISOString().split("T")[0]}const Mt=new Date(mt.split("T")[0]+"T00:00:00");Mt.setHours(0,0,0,0);const ze=be.getTime()-Mt.getTime(),et=Math.floor(ze/(1e3*60*60*24)),Re=Math.max(0,et),Ft=new Date(Mt);Ft.setDate(Ft.getDate()+7);const at=Ft.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}),na=["Domingo","Segunda-feira","Tera-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sbado"],qt=na[Ft.getDay()];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{_(!1),S(null),t("/lotes-fiv")},children:r.jsx(es,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Detalhes do Lote FIV"}),r.jsxs("div",{className:"text-slate-600 mt-1 flex items-center gap-2",children:[r.jsxs("span",{children:["Data de fecundao (D1): ",Kt(w.data_abertura)," |",he&&` Data aspirao (D0): ${Kt(he)} |`,` D${Ne(Re)} - ${Oe(Ne(Re))} |`," ","Status:"]}),r.jsx(st,{variant:w.status==="FECHADO"?"default":"secondary",children:w.status})]})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Informaes do Lote"})}),r.jsxs(we,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(F,{children:"Dia Atual"}),r.jsxs("p",{className:"text-2xl font-bold",children:["D",Ne(Re)," ",r.jsxs("span",{className:"text-lg font-normal text-slate-600",children:["- ",Oe(Ne(Re))]})]})]}),r.jsxs("div",{children:[r.jsx(F,{children:"Data do D7"}),Re<7?r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:at}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:qt})]}):Re===7?r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:at}),r.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[qt," - Perodo de classificao (hoje)"]})]}):Re===8?r.jsx("div",{children:(()=>{const te=new Date(be);te.setDate(te.getDate()-1);const ke=te.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}),ot=na[te.getDay()];return r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:ke}),r.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[ot," - Perodo de classificao (D7 foi ontem, hoje  D8)"]})]})})()}):r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:at}),r.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[qt," - Prazo encerrado"]})]})]})]}),r.jsxs("div",{className:"border-t pt-4 space-y-3",children:[r.jsxs("div",{children:[r.jsx(F,{className:"text-slate-500",children:"Fazenda Origem da Aspirao"}),r.jsx("p",{className:"font-medium",children:ne||"-"})]}),r.jsxs("div",{children:[r.jsx(F,{className:"text-slate-500",children:"Fazendas Destino"}),k.length>0?r.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:k.map((te,ke)=>r.jsx(st,{variant:"outline",className:"font-medium",children:te},ke))}):r.jsx("p",{className:"font-medium text-slate-400",children:"-"})]})]}),w.status==="ABERTO"&&Re===7&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-blue-800 font-medium",children:[" Este lote est no D6 (",Oe(6),"). Voc pode preencher a quantidade de embries (prvia) e gerar um relatrio."]}),r.jsxs(U,{variant:"outline",size:"sm",onClick:qe,children:[r.jsx(BT,{className:"w-4 h-4 mr-2"}),"Gerar Relatrio de Prvia"]})]})}),w.status==="ABERTO"&&Re>=7&&Re<=8&&r.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-orange-800 font-medium",children:[" Este lote est no D",Ne(Re)," (",Oe(Ne(Re)),"). Informe a quantidade de embries para cada acasalamento."]}),(Re===7||Re===8)&&r.jsxs(U,{variant:"default",size:"sm",onClick:fe,disabled:O,className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Xj,{className:"w-4 h-4 mr-2"}),O?"Despachando...":"Despachar Todos os Embries"]})]})}),w.status==="ABERTO"&&Re>8&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-red-800 font-medium",children:[" Este lote est no D",Ne(Re),". O prazo para informar embries (D7-D8) j passou. O lote ser fechado automaticamente."]})})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Acasalamentos"})}),r.jsxs(we,{children:[r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Doadora"}),r.jsx(V,{children:"Dose de Smen"}),r.jsx(V,{className:"text-center",children:"Qtd. Fracionada"}),r.jsx(V,{className:"text-center",children:"Ocitos Usados"}),w.status==="ABERTO"&&Re>=7&&Re<=8||w.status==="FECHADO"?r.jsxs(r.Fragment,{children:[r.jsx(V,{className:"text-center",children:"Qtd. Embries"}),r.jsx(V,{className:"text-center",children:"Total Produzidos"})]}):null]})}),r.jsx(Rt,{children:N.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:w.status==="FECHADO"||w.status==="ABERTO"&&Re>=7&&Re<=8?6:4,className:"text-center text-slate-500",children:"Nenhum acasalamento cadastrado"})}):(()=>{const te=new Map;N.forEach(Yt=>{const $t=Yt.doadora_nome||Yt.doadora_registro||"Desconhecida";te.has($t)||te.set($t,[]),te.get($t).push(Yt)});const ke=[];let ot=0;return te.forEach(Yt=>{const $t=Yt[0],Ke=$t.viaveis??0,aa=$t.doadora_nome||$t.doadora_registro||"Doadora desconhecida",_a=$t.doadora_registro,kt=Yt.length;Yt.forEach((ja,Qs)=>{const Ks=Qs===0,Xs=ot>0&&Ks?"border-t-2 border-slate-300":"";ke.push(r.jsxs(ge,{className:`${Qs>0?"bg-slate-50/50":""} ${Xs}`,children:[Ks?r.jsx(L,{rowSpan:kt,className:"align-middle bg-slate-50/50 border-r border-slate-200",children:r.jsxs("div",{className:"text-center py-2",children:[r.jsxs("div",{className:"text-slate-900 font-semibold text-sm",children:[aa,_a&&aa!==_a&&r.jsxs("div",{className:"text-slate-600 font-normal text-xs mt-1",children:["(",_a,")"]})]}),r.jsx("div",{className:"text-slate-600 text-xs mt-3 mb-1",children:"Total de Ocitos:"}),r.jsx("div",{className:"text-slate-900 font-bold text-xl",children:Ke})]})}):null,r.jsx(L,{children:ja.dose_nome}),r.jsx(L,{className:"text-center",children:ja.quantidade_fracionada}),r.jsx(L,{className:"text-center",children:ja.quantidade_oocitos??"-"}),(w.status==="ABERTO"&&Re>=7&&Re<=8||w.status==="FECHADO")&&r.jsxs(r.Fragment,{children:[r.jsx(L,{className:"text-center",children:w.status==="ABERTO"&&Re>=7&&Re<=8?r.jsx("div",{className:"flex justify-center",children:r.jsx(se,{type:"number",min:"0",value:q[ja.id]??ja.quantidade_embrioes??"",onChange:qa=>B({...q,[ja.id]:qa.target.value}),className:"w-20 text-center",placeholder:"0"})}):r.jsx("span",{className:"font-medium",children:ja.quantidade_embrioes??"-"})}),r.jsx(L,{className:"text-center font-semibold",children:ja.total_embrioes_produzidos??0})]})]},ja.id))}),ot++}),ke})()})]}),w.status==="ABERTO"&&Re<8&&r.jsx("div",{className:"mt-4 flex justify-end",children:r.jsxs(Dt,{open:ee,onOpenChange:te=>{Q(te),te||(ra({aspiracao_doadora_id:"",dose_semen_id:"",quantidade_fracionada:"1.0",quantidade_oocitos:"",observacoes:""}),re(""))},children:[r.jsx(Ds,{asChild:!0,children:r.jsxs(U,{children:[r.jsx(ts,{className:"w-4 h-4 mr-2"}),"Adicionar Acasalamento"]})}),r.jsxs(_t,{children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Adicionar Acasalamento"}),r.jsx(Ot,{children:"Selecione uma doadora do pacote e uma dose de smen. Voc pode adicionar mltiplos acasalamentos para a mesma doadora."})]}),r.jsxs("form",{onSubmit:It,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"aspiracao_doadora_id",children:"Doadora *"}),r.jsxs(Ze,{value:yt.aspiracao_doadora_id,onValueChange:async te=>{if(G.find(ke=>ke.id===te),ra({...yt,aspiracao_doadora_id:te}),te)try{const{data:ke,error:ot}=await T.from("aspiracoes_doadoras").select("recomendacao_touro").eq("id",te).single();ot?(console.error("Erro ao carregar recomendao:",ot),re("")):re((ke==null?void 0:ke.recomendacao_touro)||"")}catch(ke){console.error("Erro ao carregar recomendao:",ke),re("")}else re("")},children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione uma doadora"})}),r.jsx(Qe,{children:G.map(te=>{const ke=m.find(aa=>aa.id===te.doadora_id),ot=te.oocitos_disponiveis??0,Yt=te.viaveis??0,$t=Yt-ot,Ke=ke?ke.nome&&ke.registro?`${ke.nome} (${ke.registro})`:ke.nome||ke.registro||`Doadora ${te.doadora_id}`:`Doadora ${te.doadora_id}`;return r.jsx(ve,{value:te.id,children:`${Ke} - ${ot} ocitos disponveis (${Yt} total, ${$t} usados)`},te.id)})})]}),yt.aspiracao_doadora_id&&(()=>{const te=G.find($t=>$t.id===yt.aspiracao_doadora_id),ke=(te==null?void 0:te.oocitos_disponiveis)??0,ot=(te==null?void 0:te.viaveis)??0,Yt=ot-ke;return r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-sm text-slate-600",children:[r.jsx("strong",{children:"Ocitos disponveis:"})," ",ke," (Total: ",ot,", J usados: ",Yt,")"]}),ce&&r.jsxs("div",{className:"mt-2 bg-amber-50 border border-amber-200 rounded-lg p-3",children:[r.jsx("p",{className:"text-sm font-medium text-amber-800 mb-1",children:" Recomendao de Acasalamento:"}),r.jsx("p",{className:"text-sm text-amber-700",children:ce})]})]})})()]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"dose_semen_id",children:"Dose de Smen *"}),r.jsxs(Ze,{value:yt.dose_semen_id,onValueChange:te=>{ra({...yt,dose_semen_id:te})},children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione uma dose de smen"})}),r.jsx(Qe,{children:K.map(te=>{const ke=fa.find(ot=>ot.id===te.cliente_id);return r.jsxs(ve,{value:te.id,children:[te.nome," ",ke?`(${ke.nome})`:""]},te.id)})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"quantidade_fracionada",children:"Quantidade Fracionada *"}),r.jsx(se,{id:"quantidade_fracionada",type:"number",step:"0.1",min:"0.1",value:yt.quantidade_fracionada,onChange:te=>{ra({...yt,quantidade_fracionada:te.target.value})},placeholder:"1.0",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"quantidade_oocitos",children:"Ocitos"}),r.jsx(se,{id:"quantidade_oocitos",type:"number",min:"0",value:yt.quantidade_oocitos,onChange:te=>{ra({...yt,quantidade_oocitos:te.target.value})},placeholder:"0"})]})]}),yt.aspiracao_doadora_id&&(()=>{const te=G.find(aa=>aa.id===yt.aspiracao_doadora_id),ke=(te==null?void 0:te.oocitos_disponiveis)??0,ot=(te==null?void 0:te.viaveis)??0,Yt=ot-ke,$t=parseInt(yt.quantidade_oocitos)||0,Ke=ke-$t;return r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Total de ocitos viveis:"})," ",ot]}),r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Ocitos j usados em acasalamentos anteriores:"})," ",Yt]}),r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Ocitos disponveis:"})," ",ke]}),r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Ocitos sendo distribudos agora:"})," ",$t]}),r.jsxs("p",{className:`text-sm font-medium ${Ke<0?"text-red-600":Ke===0?"text-green-600":"text-blue-800"}`,children:[r.jsx("strong",{children:"Ocitos restantes aps esta distribuio:"})," ",Ke]})]})})(),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Aa,{id:"observacoes",value:yt.observacoes,onChange:te=>ra({...yt,observacoes:te.target.value}),placeholder:"Observaes sobre este(s) acasalamento(s)",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(U,{type:"button",variant:"outline",onClick:()=>{Q(!1),ra({aspiracao_doadora_id:"",dose_semen_id:"",quantidade_fracionada:"1.0",quantidade_oocitos:"",observacoes:""})},children:"Cancelar"}),r.jsx(U,{type:"submit",disabled:O,children:O?"Adicionando...":"Adicionar"})]})]})]})]})}),E.length>0&&r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Histrico de Despachos"}),r.jsx("div",{className:"space-y-4",children:E.map(te=>r.jsxs(je,{className:"border-l-4 border-green-500",children:[r.jsx(Ce,{children:r.jsxs(Ae,{className:"text-base",children:["Despacho em ",Kt(te.data_despacho)]})}),r.jsx(we,{children:r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Doadora"}),r.jsx(V,{children:"Dose"}),r.jsx(V,{className:"text-center",children:"Quantidade de Embries"})]})}),r.jsx(Rt,{children:te.acasalamentos.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:3,className:"text-center text-slate-500",children:"Nenhum acasalamento registrado"})}):te.acasalamentos.map((ke,ot)=>r.jsxs(ge,{children:[r.jsx(L,{children:ke.doadora||"-"}),r.jsx(L,{children:ke.dose||"-"}),r.jsx(L,{className:"text-center font-semibold",children:ke.quantidade})]},ot))})]})})]},te.id))})]})]})]}),r.jsx(Dt,{open:Y,onOpenChange:$,children:r.jsxs(_t,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Relatrio de Prvia de Produo - D6"}),r.jsx(Ot,{children:"Relatrio somente leitura com as quantidades de embries preenchidas (prvia)"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Lote FIV:"})," ",w.id.slice(0,8),"..."]}),r.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[r.jsx("strong",{children:"Data da Aspirao:"})," ",Kt(he)]}),r.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[r.jsx("strong",{children:"Fazenda Origem:"})," ",ne]}),r.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[r.jsx("strong",{children:"Fazendas Destino:"})," ",k.join(", ")]})]}),r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Doadora"}),r.jsx(V,{children:"Dose de Smen"}),r.jsx(V,{children:"Quantidade Fracionada"}),r.jsx(V,{children:"Ocitos Viveis"}),r.jsx(V,{children:"Ocitos Usados"}),r.jsx(V,{children:"Quantidade de Embries (Prvia)"})]})}),r.jsx(Rt,{children:N.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:6,className:"text-center text-slate-500",children:"Nenhum acasalamento cadastrado"})}):N.map(te=>{var ot;const ke=parseInt(q[te.id]||((ot=te.quantidade_embrioes)==null?void 0:ot.toString())||"0");return r.jsxs(ge,{children:[r.jsx(L,{className:"font-medium",children:te.doadora_nome||te.doadora_registro||"Doadora desconhecida"}),r.jsx(L,{children:te.dose_nome}),r.jsx(L,{children:te.quantidade_fracionada}),r.jsx(L,{children:te.viaveis??"-"}),r.jsx(L,{children:te.quantidade_oocitos??"-"}),r.jsx(L,{className:"font-semibold",children:ke})]},te.id)})})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[r.jsx(U,{variant:"outline",onClick:()=>$(!1),children:"Fechar"}),r.jsx(U,{onClick:()=>{window.print()},children:"Imprimir"})]})]})]})})]})}return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Lotes FIV"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar lotes de fecundao in vitro"})]}),r.jsxs(Dt,{open:b,onOpenChange:v,children:[r.jsx(Ds,{asChild:!0,children:r.jsxs(U,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ts,{className:"w-4 h-4 mr-2"}),"Novo Lote"]})}),r.jsxs(_t,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Criar Novo Lote FIV"}),r.jsx(Ot,{children:"Selecione um pacote de aspirao FINALIZADO para criar o lote"})]}),r.jsxs("form",{onSubmit:We,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"pacote_aspiracao_id",children:"Pacote de Aspirao *"}),o.length===0?r.jsxs("div",{className:"border rounded-lg p-4 bg-yellow-50 border-yellow-200",children:[r.jsx("p",{className:"text-sm text-yellow-800 font-medium mb-2",children:"Nenhum pacote disponvel"}),r.jsxs("p",{className:"text-sm text-yellow-700",children:["Verifique se o pacote de aspirao est com status ",r.jsx("strong",{children:"FINALIZADO"})," e ainda no foi usado para criar um lote FIV."]})]}):r.jsxs(Ze,{value:Gt.pacote_aspiracao_id,onValueChange:Ve,children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione o pacote"})}),r.jsx(Qe,{children:o.map(Z=>r.jsxs(ve,{value:Z.id,children:[Kt(Z.data_aspiracao)," - ",Z.fazenda_nome," (",Z.quantidade_doadoras," doadoras)"]},Z.id))})]}),ss&&r.jsxs("div",{className:"text-sm text-slate-600 space-y-1 mt-2 p-3 bg-slate-50 rounded-lg",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Data do Pacote:"})," ",Kt(ss.data_aspiracao)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Data de Fecundao do Lote:"})," ",(()=>{const Z=new Date(ss.data_aspiracao);return Z.setDate(Z.getDate()+1),Kt(Z.toISOString().split("T")[0])})()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Fazendas Destino:"})," ",((St=ss.fazendas_destino_nomes)==null?void 0:St.join(", "))||"Nenhuma"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Quantidade de Doadoras:"})," ",ss.quantidade_doadoras||0]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{children:"Doses de Smen Disponveis no Lote *"}),r.jsx("div",{className:"border rounded-lg p-4 max-h-60 overflow-y-auto",children:d.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"Carregando doses..."}):r.jsx("div",{className:"space-y-2",children:d.map(Z=>{const be=fa.find(Oe=>Oe.id===Z.cliente_id),Ne=Gt.doses_selecionadas.includes(Z.id);return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:`dose-${Z.id}`,checked:Ne,onChange:Oe=>{Oe.target.checked?gs({...Gt,doses_selecionadas:[...Gt.doses_selecionadas,Z.id]}):gs({...Gt,doses_selecionadas:Gt.doses_selecionadas.filter(mt=>mt!==Z.id)})},className:"rounded"}),r.jsxs("label",{htmlFor:`dose-${Z.id}`,className:"text-sm cursor-pointer flex-1",children:[r.jsx("span",{className:"font-medium",children:Z.nome}),be&&r.jsxs("span",{className:"text-slate-500 ml-2",children:["(",be.nome,")"]})]})]},Z.id)})})}),r.jsx("p",{className:"text-xs text-slate-500",children:"Selecione as doses de smen que estaro disponveis para uso neste lote"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Aa,{id:"observacoes",value:Gt.observacoes,onChange:Z=>gs({...Gt,observacoes:Z.target.value}),placeholder:"Observaes sobre o lote",rows:3})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(U,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:O,children:O?"Criando...":"Criar Lote"}),r.jsx(U,{type:"button",variant:"outline",onClick:()=>{v(!1),gs({pacote_aspiracao_id:"",observacoes:"",doses_selecionadas:[]}),Vr(null),c([]),j([])},disabled:O,children:"Cancelar"})]})]})]})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Lista de Lotes FIV"})}),r.jsxs(we,{children:[r.jsxs("div",{className:"flex gap-4 mb-6 flex-wrap",children:[r.jsxs("div",{className:"flex-1 min-w-[250px] relative fazenda-busca-container",children:[r.jsx(F,{htmlFor:"filtro-fazenda-aspirao",children:"Filtrar por Fazenda da Aspirao"}),r.jsxs("div",{className:"relative",children:[r.jsx(se,{id:"filtro-fazenda-aspirao",placeholder:"Digite para buscar fazenda...",value:J,onChange:Z=>{xe(Z.target.value),dt(!0),Z.target.value||Fe("")},onFocus:()=>dt(!0)}),Pe&&r.jsx(U,{variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-7 w-7 p-0",onClick:()=>{Fe(""),xe(""),dt(!1)},children:r.jsx(Rs,{className:"h-4 w-4"})}),ft&&Bn.length>0&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg max-h-60 overflow-auto",children:Bn.map(Z=>r.jsx("div",{className:"px-4 py-2 hover:bg-slate-100 cursor-pointer",onClick:()=>{Fe(Z.id),xe(Z.nome),dt(!1)},children:Z.nome},Z.id))}),ft&&J&&Bn.length===0&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg p-4 text-sm text-slate-500",children:"Nenhuma fazenda encontrada"})]})]}),r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx(F,{htmlFor:"filtro-dia-cultivo",children:"Filtrar por Dia do Cultivo"}),r.jsxs(Ze,{value:I||void 0,onValueChange:Z=>de(Z||""),children:[r.jsx(Ye,{id:"filtro-dia-cultivo",children:r.jsx(Je,{placeholder:"Todos os dias"})}),r.jsx(Qe,{children:[0,1,2,3,4,5,6,7,8].map(Z=>r.jsxs(ve,{value:Z.toString(),children:["D",Z," - ",ht(Z)]},Z))})]})]}),(Pe||I)&&r.jsx("div",{className:"flex items-end",children:r.jsx(U,{variant:"outline",onClick:()=>{Fe(""),xe(""),de(""),dt(!1)},children:"Limpar Filtros"})})]}),r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Aspirao"}),r.jsx(V,{children:"Fazendas Destino"}),r.jsx(V,{children:"Dia do Cultivo"}),r.jsx(V,{children:"Acasalamentos"}),r.jsx(V,{className:"text-right",children:"Aes"})]})}),r.jsx(Rt,{children:_e.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:5,className:"text-center text-slate-500",children:s.length===0?"Nenhum lote cadastrado":"Nenhum lote encontrado com os filtros selecionados"})}):_e.map(Z=>r.jsxs(ge,{children:[r.jsxs(L,{children:[Z.pacote_data&&Kt(Z.pacote_data)," - ",Z.pacote_nome]}),r.jsx(L,{children:r.jsx("div",{className:"flex flex-wrap gap-1",children:Z.fazendas_destino_nomes&&Z.fazendas_destino_nomes.length>0?Z.fazendas_destino_nomes.map((be,Ne)=>r.jsx(st,{variant:"outline",className:"text-xs",children:be},Ne)):r.jsx("span",{className:"text-slate-400",children:"-"})})}),r.jsx(L,{children:Z.dia_atual!==void 0?r.jsxs(st,{variant:"outline",className:`font-semibold ${ta(Z.dia_atual)}`,children:["D",Z.dia_atual," - ",ht(Z.dia_atual)]}):r.jsx("span",{className:"text-slate-400",children:"-"})}),r.jsx(L,{children:Z.quantidade_acasalamentos??0}),r.jsx(L,{className:"text-right",children:r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>t(`/lotes-fiv/${Z.id}`),children:r.jsx(cc,{className:"w-4 h-4"})})})]},Z.id))})]})]})]})]})}const m5={APTA:{variant:"default",className:"bg-green-500 hover:bg-green-600"},INAPTA:{variant:"destructive",className:""},INICIADA:{variant:"secondary",className:"bg-blue-500 hover:bg-blue-600 text-white"},UTILIZADA:{variant:"outline",className:"bg-purple-100 text-purple-800 border-purple-300"},NAO_UTILIZADA:{variant:"outline",className:"bg-gray-100 text-gray-800"},SINCRONIZANDO:{variant:"secondary",className:"bg-yellow-500 hover:bg-yellow-600 text-white"},SINCRONIZADA:{variant:"default",className:"bg-green-500 hover:bg-green-600"},PRENHE:{variant:"default",className:"bg-green-600 hover:bg-green-700"},VAZIA:{variant:"destructive",className:""},RETOQUE:{variant:"secondary",className:"bg-orange-500 hover:bg-orange-600 text-white"},TRANSFERIDO:{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-300"},CONGELADO:{variant:"secondary",className:"bg-cyan-500 hover:bg-cyan-600 text-white"},REALIZADA:{variant:"default",className:"bg-green-500 hover:bg-green-600"}};function xc({status:e,className:t}){const a=m5[e]||{variant:"outline",className:""};return r.jsx(st,{variant:a.variant,className:ye(a.className,t),children:e})}function p5(){const e=za(),[t,a]=u.useState([]),[s,n]=u.useState([]),[o,i]=u.useState([]),[l,c]=u.useState(""),[d,f]=u.useState(!1),[h,p]=u.useState(new Set),[m,j]=u.useState(new Set),[x,g]=u.useState(!1),[b,v]=u.useState(!1),[y,_]=u.useState(!1),[w,S]=u.useState(!1),[N,C]=u.useState(!1),[O,A]=u.useState(!1),[q,B]=u.useState(null),[ee,Q]=u.useState(null),[X,R]=u.useState(null),[Y,$]=u.useState([]),[E,D]=u.useState(!1),{toast:G}=ea(),[M,K]=u.useState({data_congelamento:new Date().toISOString().split("T")[0],localizacao_atual:""}),[H,ne]=u.useState({classificacao:""}),[pe,k]=u.useState({data_descarte:new Date().toISOString().split("T")[0],observacoes:""});u.useEffect(()=>{P()},[]),u.useEffect(()=>{re()},[l]);const P=async()=>{try{const{data:I,error:de}=await T.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(de)throw de;i(I||[])}catch(I){console.error("Erro ao carregar fazendas:",I)}},ce=async(I,de,_e,Se,ue,z)=>{try{const{error:Ee}=await T.from("historico_embrioes").insert([{embriao_id:I,status_anterior:de,status_novo:_e,tipo_operacao:Se,fazenda_id:ue||null,observacoes:z||null,data_mudanca:new Date().toISOString()}]);Ee&&console.error("Erro ao registrar histrico:",Ee)}catch(Ee){console.error("Erro ao registrar histrico:",Ee)}},re=async()=>{try{f(!0);const{data:I,error:de}=await T.from("embrioes").select("*").in("status_atual",["FRESCO","CONGELADO"]).order("created_at",{ascending:!1});if(de)throw de;if(!I||I.length===0){a([]),n([]),f(!1);return}const _e=[...new Set(I.filter(fe=>fe.lote_fiv_acasalamento_id).map(fe=>fe.lote_fiv_acasalamento_id))];if(_e.length===0){a(I),n([]),f(!1);return}const{data:Se,error:ue}=await T.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",_e);if(ue)throw ue;const z=[...new Set((Se==null?void 0:Se.map(fe=>fe.aspiracao_doadora_id))||[])],{data:Ee,error:Le}=await T.from("aspiracoes_doadoras").select("id, doadora_id, pacote_aspiracao_id").in("id",z);if(Le)throw Le;const He=[...new Set((Ee==null?void 0:Ee.map(fe=>fe.doadora_id))||[])],{data:Me,error:ft}=await T.from("doadoras").select("id, registro").in("id",He);if(ft)throw ft;const dt=[...new Set((Se==null?void 0:Se.map(fe=>fe.dose_semen_id))||[])],{data:ht,error:ta}=await T.from("doses_semen").select("id, nome").in("id",dt);if(ta)throw ta;const fa=[...new Set(I.filter(fe=>fe.lote_fiv_id).map(fe=>fe.lote_fiv_id))];let va=new Map,yt=new Map,ra=new Map;if(fa.length>0){const{data:fe,error:Ve}=await T.from("lotes_fiv").select("id, pacote_aspiracao_id").in("id",fa);if(!Ve&&fe){fe.forEach(We=>{We.pacote_aspiracao_id&&yt.set(We.id,We.pacote_aspiracao_id)});const It=[...new Set(fe.map(We=>We.pacote_aspiracao_id).filter(Boolean))];if(It.length>0){const{data:We,error:St}=await T.from("pacotes_aspiracao").select("id, data_aspiracao, fazenda_id, fazenda_destino_id, horario_inicio, veterinario_responsavel, total_oocitos").in("id",It);if(!St&&We){const[Z,be]=await Promise.all([T.from("pacotes_aspiracao_fazendas_destino").select("pacote_aspiracao_id, fazenda_destino_id").in("pacote_aspiracao_id",It),(async()=>{const ze=new Set;return We.forEach(et=>{et.fazenda_id&&ze.add(et.fazenda_id),et.fazenda_destino_id&&ze.add(et.fazenda_destino_id)}),ze.size>0?T.from("fazendas").select("id, nome").in("id",Array.from(ze)):{data:null,error:null}})()]),Ne=Z.data,Oe=be.data,mt=new Map((Oe==null?void 0:Oe.map(ze=>[ze.id,ze.nome]))||[]),Mt=new Map;Ee==null||Ee.forEach(ze=>{ze.pacote_aspiracao_id&&Mt.set(ze.pacote_aspiracao_id,(Mt.get(ze.pacote_aspiracao_id)||0)+1)}),Ne&&Ne.forEach(ze=>{const et=ra.get(ze.pacote_aspiracao_id)||[];et.includes(ze.fazenda_destino_id)||et.push(ze.fazenda_destino_id),ra.set(ze.pacote_aspiracao_id,et)}),We.forEach(ze=>{if(ze.fazenda_destino_id){const et=ra.get(ze.id)||[];et.includes(ze.fazenda_destino_id)||et.push(ze.fazenda_destino_id),ra.set(ze.id,et)}va.set(ze.id,{id:ze.id,data_aspiracao:ze.data_aspiracao,fazenda_nome:mt.get(ze.fazenda_id),quantidade_doadoras:Mt.get(ze.id)||0,horario_inicio:ze.horario_inicio,veterinario_responsavel:ze.veterinario_responsavel,total_oocitos:ze.total_oocitos})})}}}}const Gt=new Set;ra.forEach(fe=>{fe.forEach(Ve=>Gt.add(Ve))}),I.forEach(fe=>{fe.fazenda_destino_id&&Gt.add(fe.fazenda_destino_id)});let gs=new Map;if(Gt.size>0){const{data:fe,error:Ve}=await T.from("fazendas").select("id, nome").in("id",Array.from(Gt));!Ve&&fe&&(gs=new Map(fe.map(It=>[It.id,It.nome])))}const ss=new Map((Ee==null?void 0:Ee.map(fe=>[fe.id,fe]))||[]),Vr=new Map((Me==null?void 0:Me.map(fe=>[fe.id,fe]))||[]),Bn=new Map((ht==null?void 0:ht.map(fe=>[fe.id,fe]))||[]),$n=new Map((Se==null?void 0:Se.map(fe=>[fe.id,fe]))||[]),Fa=I.map(fe=>{const Ve=fe.lote_fiv_acasalamento_id?$n.get(fe.lote_fiv_acasalamento_id):void 0,It=Ve?ss.get(Ve.aspiracao_doadora_id):void 0,We=It?Vr.get(It.doadora_id):void 0,St=Ve?Bn.get(Ve.dose_semen_id):void 0,Z=fe.lote_fiv_id?yt.get(fe.lote_fiv_id):void 0,be=Z?va.get(Z):void 0;return{...fe,doadora_registro:We==null?void 0:We.registro,touro_nome:St==null?void 0:St.nome,fazenda_destino_nome:fe.fazenda_destino_id?gs.get(fe.fazenda_destino_id):void 0,data_aspiracao:be==null?void 0:be.data_aspiracao,pacote_aspiracao_id:Z}});a(Fa);const Hn=new Map;Fa.forEach(fe=>{if(!fe.lote_fiv_id||!fe.created_at)return;const Ve=fe.created_at.split("T")[0],It=`${fe.lote_fiv_id}-${Ve}`;let We=Hn.get(It);if(!We){const St=yt.get(fe.lote_fiv_id),Z=St?va.get(St):void 0,be=St?ra.get(St)||[]:[],Ne=be.map(Oe=>gs.get(Oe)).filter(Oe=>!!Oe);We={id:It,lote_fiv_id:fe.lote_fiv_id,data_despacho:Ve,fazendas_destino_ids:be,fazendas_destino_nomes:Ne,pacote_info:Z||{id:St||"",data_aspiracao:Ve,quantidade_doadoras:0},embrioes:[],total:0,frescos:0,congelados:0,sem_classificacao:0,classificados:{BE:0,BN:0,BX:0,BL:0,BI:0}},Hn.set(It,We)}if(We.embrioes.push(fe),We.total++,fe.status_atual==="FRESCO"&&We.frescos++,fe.status_atual==="CONGELADO"&&We.congelados++,!fe.classificacao)We.sem_classificacao++;else{const St=fe.classificacao.toUpperCase();St==="BE"?We.classificados.BE++:St==="BN"?We.classificados.BN++:St==="BX"?We.classificados.BX++:St==="BL"?We.classificados.BL++:St==="BI"&&We.classificados.BI++}});let qe=Array.from(Hn.values());l&&(qe=qe.filter(fe=>fe.fazendas_destino_ids.includes(l))),qe.sort((fe,Ve)=>Ve.data_despacho.localeCompare(fe.data_despacho)),n(qe)}catch(I){G({title:"Erro ao carregar dados",description:I instanceof Error?I.message:"Erro desconhecido",variant:"destructive"})}finally{f(!1)}},ie=I=>{const de=new Set(h);de.has(I)?de.delete(I):de.add(I),p(de)},oe=I=>{const de=new Set(m);de.has(I)?de.delete(I):de.add(I),j(de),g(de.size>0)},he=I=>{const de=new Set(m);I.embrioes.every(Se=>de.has(Se.id))?I.embrioes.forEach(Se=>de.delete(Se.id)):I.embrioes.forEach(Se=>de.add(Se.id)),j(de),g(de.size>0)},Te=async I=>{const de=q;if(!de||!H.classificacao){G({title:"Erro de validao",description:"Classificao  obrigatria",variant:"destructive"});return}try{A(!0);const _e=de.status_atual,Se=de.status_atual,{error:ue}=await T.from("embrioes").update({classificacao:H.classificacao,data_classificacao:new Date().toISOString().split("T")[0]}).eq("id",de.id);if(ue)throw ue;await ce(de.id,_e,Se,"CLASSIFICACAO",null,`Classificao: ${H.classificacao}`),G({title:"Embrio classificado",description:"Classificao salva com sucesso"}),_(!1),B(null),ne({classificacao:""}),j(new Set),g(!1),re()}catch(_e){G({title:"Erro ao classificar embrio",description:_e instanceof Error?_e.message:"Erro desconhecido",variant:"destructive"})}finally{A(!1)}},Pe=async()=>{if(m.size===0||!H.classificacao){G({title:"Erro de validao",description:"Selecione pelo menos um embrio e uma classificao",variant:"destructive"});return}try{A(!0);const I=Array.from(m),de=I.map(_e=>t.find(ue=>ue.id===_e)?T.from("embrioes").update({classificacao:H.classificacao,data_classificacao:new Date().toISOString().split("T")[0]}).eq("id",_e):null).filter(Boolean);await Promise.all(de);for(const _e of I){const Se=t.find(ue=>ue.id===_e);Se&&await ce(Se.id,Se.status_atual,Se.status_atual,"CLASSIFICACAO",null,`Classificao: ${H.classificacao}`)}G({title:"Embries classificados",description:`${I.length} embrio(es) classificados com sucesso`}),_(!1),ne({classificacao:""}),j(new Set),g(!1),re()}catch(I){G({title:"Erro ao classificar embries",description:I instanceof Error?I.message:"Erro desconhecido",variant:"destructive"})}finally{A(!1)}},Fe=async()=>{if(m.size===0||!M.localizacao_atual.trim()){G({title:"Erro de validao",description:"Selecione pelo menos um embrio e informe a localizao",variant:"destructive"});return}try{A(!0);const I=Array.from(m),de=I.map(_e=>T.from("embrioes").update({status_atual:"CONGELADO",data_congelamento:M.data_congelamento,localizacao_atual:M.localizacao_atual}).eq("id",_e));await Promise.all(de);for(const _e of I){const Se=t.find(ue=>ue.id===_e);Se&&await ce(Se.id,Se.status_atual,"CONGELADO","CONGELAMENTO",null,`Localizao: ${M.localizacao_atual}`)}G({title:"Embries congelados",description:`${I.length} embrio(es) congelados com sucesso`}),v(!1),K({data_congelamento:new Date().toISOString().split("T")[0],localizacao_atual:""}),j(new Set),g(!1),re()}catch(I){G({title:"Erro ao congelar embries",description:I instanceof Error?I.message:"Erro desconhecido",variant:"destructive"})}finally{A(!1)}},J=async()=>{if(m.size===0){G({title:"Erro de validao",description:"Selecione pelo menos um embrio",variant:"destructive"});return}try{A(!0);const I=Array.from(m),de=I.map(_e=>T.from("embrioes").update({status_atual:"DESCARTADO",data_descarte:pe.data_descarte}).eq("id",_e));await Promise.all(de);for(const _e of I){const Se=t.find(ue=>ue.id===_e);Se&&await ce(Se.id,Se.status_atual,"DESCARTADO","DESCARTE",null,pe.observacoes||null)}G({title:"Embries descartados",description:`${I.length} embrio(es) descartados com sucesso`}),S(!1),k({data_descarte:new Date().toISOString().split("T")[0],observacoes:""}),j(new Set),g(!1),re()}catch(I){G({title:"Erro ao descartar embries",description:I instanceof Error?I.message:"Erro desconhecido",variant:"destructive"})}finally{A(!1)}},xe=async I=>{try{D(!0);const{data:de,error:_e}=await T.from("historico_embrioes").select("*").eq("embriao_id",I).order("data_mudanca",{ascending:!1});if(_e)throw _e;$(de||[])}catch(de){console.error("Erro ao carregar histrico:",de),G({title:"Erro ao carregar histrico",description:de instanceof Error?de.message:"Erro desconhecido",variant:"destructive"})}finally{D(!1)}};return d?r.jsx(zt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Estoque de Embries"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar pacotes de embries para transferncia, congelamento ou descarte"})]})}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Pacotes de Embries"})}),r.jsxs(we,{children:[r.jsxs("div",{className:"mb-4 space-y-2",children:[r.jsx(F,{htmlFor:"fazenda_destino",children:"Filtrar por Fazenda Destino"}),r.jsxs(Ze,{value:l||"all",onValueChange:I=>c(I==="all"?"":I),children:[r.jsx(Ye,{className:"w-full md:w-[300px]",children:r.jsx(Je,{placeholder:"Todas as fazendas"})}),r.jsxs(Qe,{children:[r.jsx(ve,{value:"all",children:"Todas as fazendas"}),o.map(I=>r.jsx(ve,{value:I.id,children:I.nome},I.id))]})]})]}),s.length===0?r.jsx("div",{className:"text-center text-slate-500 py-12",children:"Nenhum pacote de embries encontrado para esta fazenda destino"}):r.jsx("div",{className:"space-y-4",children:s.map(I=>{const de=h.has(I.id),_e=I.embrioes.every(ue=>m.has(ue.id)),Se=I.embrioes.some(ue=>m.has(ue.id));return r.jsxs(je,{className:"border-l-4 border-l-green-500",children:[r.jsx(Ce,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>ie(I.id),className:"p-0 h-auto",children:de?r.jsx(Yj,{className:"w-5 h-5 text-slate-600"}):r.jsx(_v,{className:"w-5 h-5 text-slate-600"})}),r.jsxs(Ae,{className:"text-lg",children:[I.pacote_info.fazenda_nome||"Fazenda no identificada"," "," ",I.fazendas_destino_nomes&&I.fazendas_destino_nomes.length>0?r.jsx("span",{className:"inline-flex flex-wrap gap-1 items-center",children:I.fazendas_destino_nomes.map((ue,z)=>r.jsx(st,{variant:"outline",className:"text-xs",children:ue},z))}):r.jsx("span",{className:"text-slate-400",children:"Sem destino"})]})]}),r.jsxs("div",{className:"mt-2 ml-7 space-y-1 text-sm text-slate-600",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Data Despacho:"})," ",I.data_despacho?Kt(I.data_despacho):"-"]}),I.pacote_info.horario_inicio&&r.jsxs("p",{children:[r.jsx("strong",{children:"Horrio:"})," ",I.pacote_info.horario_inicio]}),I.pacote_info.veterinario_responsavel&&r.jsxs("p",{children:[r.jsx("strong",{children:"Veterinrio:"})," ",I.pacote_info.veterinario_responsavel]})]})]}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:I.total}),r.jsx("div",{className:"text-sm text-slate-600",children:"embries"}),r.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[I.frescos," frescos, ",I.congelados," congelados"]}),r.jsxs("div",{className:"text-xs text-slate-500",children:[I.sem_classificacao," sem classificao"]}),I.classificados.BE>0||I.classificados.BN>0||I.classificados.BX>0||I.classificados.BL>0||I.classificados.BI>0?r.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["BE: ",I.classificados.BE," | BN: ",I.classificados.BN," | BX: ",I.classificados.BX," | BL: ",I.classificados.BL," | BI: ",I.classificados.BI]}):null]})})]})}),de&&r.jsxs(we,{children:[r.jsx("div",{className:"mb-4 flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(U,{variant:"outline",size:"sm",onClick:()=>he(I),children:[_e?r.jsx(Wx,{className:"w-4 h-4 mr-2"}):r.jsx(e0,{className:"w-4 h-4 mr-2"}),_e?"Desmarcar Todos":"Selecionar Todos"]}),r.jsx("span",{className:"text-sm text-slate-600",children:Se&&`${I.embrioes.filter(ue=>m.has(ue.id)).length} selecionado(s)`})]})}),r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{className:"w-12"}),r.jsx(V,{children:"Identificao"}),r.jsx(V,{children:"Doadora"}),r.jsx(V,{children:"Touro"}),r.jsx(V,{children:"Classificao"}),r.jsx(V,{children:"Status"}),r.jsx(V,{children:"Localizao"}),r.jsx(V,{className:"text-right",children:"Aes"})]})}),r.jsx(Rt,{children:I.embrioes.map(ue=>{const z=m.has(ue.id);return r.jsxs(ge,{children:[r.jsx(L,{children:r.jsx(U,{variant:"ghost",size:"sm",className:"p-0 h-auto",onClick:()=>oe(ue.id),children:z?r.jsx(Wx,{className:"w-4 h-4 text-green-600"}):r.jsx(e0,{className:"w-4 h-4 text-slate-400"})})}),r.jsx(L,{className:"font-medium",children:ue.identificacao||ue.id.slice(0,8)}),r.jsx(L,{children:ue.doadora_registro||"-"}),r.jsx(L,{children:ue.touro_nome||"-"}),r.jsx(L,{children:ue.classificacao?r.jsx(st,{variant:"outline",children:ue.classificacao}):r.jsx("span",{className:"text-slate-400",children:"-"})}),r.jsx(L,{children:r.jsx(xc,{status:ue.status_atual})}),r.jsx(L,{children:ue.localizacao_atual||"-"}),r.jsx(L,{className:"text-right",children:r.jsxs("div",{className:"flex gap-1 justify-end",children:[!ue.classificacao&&ue.status_atual==="FRESCO"&&r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{B(ue),ne({classificacao:""}),_(!0)},title:"Classificar",children:r.jsx(Ud,{className:"w-4 h-4 text-purple-600"})}),ue.classificacao&&r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{B(ue),ne({classificacao:ue.classificacao||""}),_(!0)},title:"Editar Classificao",children:r.jsx(Ud,{className:"w-4 h-4 text-purple-600"})}),ue.status_atual==="FRESCO"&&r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{v(!0),j(new Set([ue.id]))},title:"Congelar",children:r.jsx(Jx,{className:"w-4 h-4 text-blue-600"})}),(ue.status_atual==="FRESCO"||ue.status_atual==="CONGELADO")&&r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>e("/transferencia"),title:"Transferir",children:r.jsx(sf,{className:"w-4 h-4 text-green-600"})}),(ue.status_atual==="FRESCO"||ue.status_atual==="CONGELADO")&&r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{Q(ue),k({data_descarte:new Date().toISOString().split("T")[0],observacoes:""}),S(!0)},title:"Descartar",children:r.jsx(Su,{className:"w-4 h-4 text-red-600"})}),r.jsx(U,{variant:"ghost",size:"sm",onClick:async()=>{R(ue),C(!0),await xe(ue.id)},title:"Ver Histrico",children:r.jsx(jv,{className:"w-4 h-4 text-slate-600"})})]})})]},ue.id)})})]})]})]},I.id)})}),x&&r.jsxs("div",{className:"mt-6 p-4 bg-slate-50 border border-slate-200 rounded-lg flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xj,{className:"w-5 h-5 text-slate-600"}),r.jsxs("span",{className:"font-medium text-slate-900",children:[m.size," embrio(es) selecionado(s)"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(U,{variant:"outline",size:"sm",onClick:()=>{ne({classificacao:""}),_(!0)},children:[r.jsx(Ud,{className:"w-4 h-4 mr-2"}),"Classificar"]}),r.jsxs(U,{variant:"outline",size:"sm",onClick:()=>{K({data_congelamento:new Date().toISOString().split("T")[0],localizacao_atual:""}),v(!0)},children:[r.jsx(Jx,{className:"w-4 h-4 mr-2"}),"Congelar"]}),r.jsxs(U,{variant:"outline",size:"sm",onClick:()=>{k({data_descarte:new Date().toISOString().split("T")[0],observacoes:""}),S(!0)},children:[r.jsx(Su,{className:"w-4 h-4 mr-2"}),"Descartar"]}),r.jsx(U,{variant:"outline",size:"sm",onClick:()=>{j(new Set),g(!1)},children:"Cancelar"})]})]})]})]}),r.jsx(Dt,{open:y&&!!q,onOpenChange:I=>{I||(_(!1),B(null))},children:r.jsxs(_t,{className:"max-w-md",children:[r.jsxs(jt,{children:[r.jsx(wt,{children:"Classificar Embrio"}),r.jsxs(Ot,{children:["Classificar embrio ",(q==null?void 0:q.identificacao)||"selecionado"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"classificacao",children:"Classificao *"}),r.jsxs(Ze,{value:H.classificacao,onValueChange:I=>ne({classificacao:I}),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione a classificao"})}),r.jsxs(Qe,{children:[r.jsx(ve,{value:"BE",children:"BE (Blastocisto Excelente)"}),r.jsx(ve,{value:"BN",children:"BN (Blastocisto Normal)"}),r.jsx(ve,{value:"BX",children:"BX (Blastocisto Regular)"}),r.jsx(ve,{value:"BL",children:"BL (Blastocisto Limitado)"}),r.jsx(ve,{value:"BI",children:"BI (Blastocisto Irregular)"})]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(U,{onClick:()=>Te(),className:"flex-1 bg-purple-600 hover:bg-purple-700",disabled:O,children:O?"Salvando...":"Salvar Classificao"}),r.jsx(U,{variant:"outline",onClick:()=>{_(!1),B(null)},disabled:O,children:"Cancelar"})]})]})]})}),r.jsx(Dt,{open:y&&!q&&m.size>0,onOpenChange:I=>{I||_(!1)},children:r.jsxs(_t,{className:"max-w-md",children:[r.jsxs(jt,{children:[r.jsxs(wt,{children:["Classificar ",m.size," Embrio(es)"]}),r.jsx(Ot,{children:"Classificar todos os embries selecionados com a mesma classificao"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"classificacao",children:"Classificao *"}),r.jsxs(Ze,{value:H.classificacao,onValueChange:I=>ne({classificacao:I}),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione a classificao"})}),r.jsxs(Qe,{children:[r.jsx(ve,{value:"BE",children:"BE (Blastocisto Excelente)"}),r.jsx(ve,{value:"BN",children:"BN (Blastocisto Normal)"}),r.jsx(ve,{value:"BX",children:"BX (Blastocisto Regular)"}),r.jsx(ve,{value:"BL",children:"BL (Blastocisto Limitado)"}),r.jsx(ve,{value:"BI",children:"BI (Blastocisto Irregular)"})]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(U,{onClick:Pe,className:"flex-1 bg-purple-600 hover:bg-purple-700",disabled:O,children:O?"Salvando...":`Classificar ${m.size} Embrio(es)`}),r.jsx(U,{variant:"outline",onClick:()=>{_(!1)},disabled:O,children:"Cancelar"})]})]})]})}),r.jsx(Dt,{open:b,onOpenChange:v,children:r.jsxs(_t,{className:"max-w-md",children:[r.jsxs(jt,{children:[r.jsxs(wt,{children:["Congelar ",m.size," Embrio(es)"]}),r.jsx(Ot,{children:"Registrar congelamento dos embries selecionados"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"data_congelamento",children:"Data de Congelamento *"}),r.jsx(se,{id:"data_congelamento",type:"date",value:M.data_congelamento,onChange:I=>K({...M,data_congelamento:I.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"localizacao_atual",children:"Localizao (Botijo) *"}),r.jsx(se,{id:"localizacao_atual",value:M.localizacao_atual,onChange:I=>K({...M,localizacao_atual:I.target.value}),placeholder:"Ex: Botijo 1, Canister A",required:!0})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(U,{onClick:Fe,className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:O,children:O?"Congelando...":`Congelar ${m.size} Embrio(es)`}),r.jsx(U,{variant:"outline",onClick:()=>v(!1),disabled:O,children:"Cancelar"})]})]})]})}),r.jsx(Dt,{open:w,onOpenChange:S,children:r.jsxs(_t,{className:"max-w-md",children:[r.jsxs(jt,{children:[r.jsxs(wt,{children:["Descartar ",m.size," Embrio(es)"]}),r.jsx(Ot,{children:"Descartar os embries selecionados"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"data_descarte",children:"Data de Descarte *"}),r.jsx(se,{id:"data_descarte",type:"date",value:pe.data_descarte,onChange:I=>k({...pe,data_descarte:I.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"observacoes",children:"Observaes / Motivo"}),r.jsx(Aa,{id:"observacoes",value:pe.observacoes,onChange:I=>k({...pe,observacoes:I.target.value}),placeholder:"Informe o motivo do descarte (opcional)",rows:4})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(U,{onClick:J,className:"flex-1 bg-red-600 hover:bg-red-700",disabled:O,children:O?"Descartando...":`Descartar ${m.size} Embrio(es)`}),r.jsx(U,{variant:"outline",onClick:()=>S(!1),disabled:O,children:"Cancelar"})]})]})]})}),r.jsx(hN,{open:N,onOpenChange:C,children:r.jsxs(og,{className:"w-full sm:max-w-2xl",children:[r.jsxs(ig,{children:[r.jsx(lg,{children:"Histrico do Embrio"}),r.jsxs(cg,{children:["Histrico completo de eventos do embrio"," ",(X==null?void 0:X.identificacao)||(X==null?void 0:X.id.slice(0,8))]})]}),r.jsx("div",{className:"mt-6",children:E?r.jsx(zt,{}):Y.length===0?r.jsx("p",{className:"text-slate-500 text-center py-8",children:"Nenhum histrico encontrado"}):r.jsx("div",{className:"space-y-4",children:Y.map(I=>{const de={CLASSIFICACAO:"Classificao",DESTINACAO:"Destinao",CONGELAMENTO:"Congelamento",DESCARTE:"Descarte",TRANSFERENCIA:"Transferncia"};return r.jsx(je,{children:r.jsx(we,{className:"pt-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:de[I.tipo_operacao]||I.tipo_operacao}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:I.data_mudanca?Kt(I.data_mudanca):"-"}),I.observacoes&&r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:I.observacoes})]}),r.jsx("div",{className:"text-right",children:r.jsx(xc,{status:I.status_novo||""})})]})})},I.id)})})})]})})]})}function v5(){const[e,t]=u.useState([]),[a,s]=u.useState([]),[n,o]=u.useState([]),[i,l]=u.useState([]),[c,d]=u.useState(!0),[f,h]=u.useState(!1),{toast:p}=ea(),[m,j]=u.useState({fazenda_id:"",receptora_id:"",protocolo_receptora_id:"",embriao_id:"",data_te:new Date().toISOString().split("T")[0],tipo_te:"FRESCO",veterinario_responsavel:"",tecnico_responsavel:"",observacoes:""});u.useEffect(()=>{x(),g()},[]);const x=async()=>{try{const{data:_,error:w}=await T.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(w)throw w;t(_||[]),d(!1)}catch(_){p({title:"Erro ao carregar fazendas",description:_ instanceof Error?_.message:"Erro desconhecido",variant:"destructive"}),d(!1)}},g=async()=>{try{const{data:_,error:w}=await T.from("embrioes").select("id, identificacao, classificacao, status_atual, localizacao_atual, lote_fiv_id").in("status_atual",["FRESCO","CONGELADO"]);if(w)throw w;if(!_||_.length===0){o([]);return}const S=[...new Set(_.filter(A=>A.lote_fiv_id).map(A=>A.lote_fiv_id))];let N=new Map,C=new Map;if(S.length>0){const{data:A,error:q}=await T.from("lotes_fiv").select("id, pacote_aspiracao_id").in("id",S);if(!q&&A){A.forEach(ee=>{ee.pacote_aspiracao_id&&N.set(ee.id,ee.pacote_aspiracao_id)});const B=[...new Set(A.map(ee=>ee.pacote_aspiracao_id).filter(Boolean))];if(B.length>0){const{data:ee,error:Q}=await T.from("pacotes_aspiracao_fazendas_destino").select("pacote_aspiracao_id, fazenda_destino_id").in("pacote_aspiracao_id",B);!Q&&ee&&ee.forEach(R=>{const Y=C.get(R.pacote_aspiracao_id)||[];Y.includes(R.fazenda_destino_id)||Y.push(R.fazenda_destino_id),C.set(R.pacote_aspiracao_id,Y)});const{data:X}=await T.from("pacotes_aspiracao").select("id, fazenda_destino_id").in("id",B);X==null||X.forEach(R=>{if(R.fazenda_destino_id){const Y=C.get(R.id)||[];Y.includes(R.fazenda_destino_id)||Y.push(R.fazenda_destino_id),C.set(R.id,Y)}})}}}const O=_.map(A=>{const q=A.lote_fiv_id?N.get(A.lote_fiv_id):void 0,B=q?C.get(q):[];return{embriao_id:A.id,identificacao:A.identificacao,classificacao:A.classificacao,status_atual:A.status_atual,localizacao_atual:A.localizacao_atual,lote_fiv_id:A.lote_fiv_id,fazendas_destino_ids:B||[]}});o(O),l([])}catch(_){console.error("Error loading embrioes:",_),p({title:"Erro ao carregar embries",description:_ instanceof Error?_.message:"Erro desconhecido",variant:"destructive"}),o([])}},b=async _=>{if(j({...m,fazenda_id:_,receptora_id:"",protocolo_receptora_id:"",embriao_id:""}),_){const w=n.filter(S=>S.fazendas_destino_ids&&S.fazendas_destino_ids.includes(_));l(w)}else l([]);try{const{data:w,error:S}=await T.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",_);if(S)throw S;const N=(w==null?void 0:w.map(X=>X.receptora_id))||[];if(N.length===0){s([]);return}const{data:C,error:O}=await T.from("v_protocolo_receptoras_status").select("*").eq("fase_ciclo","SINCRONIZADA").in("receptora_id",N);if(O)throw O;if(!C||C.length===0){s([]);return}const A=Array.from(new Set(C.map(X=>X.protocolo_id))),{data:q,error:B}=await T.from("protocolo_receptoras").select("id, receptora_id, protocolo_id").in("protocolo_id",A).in("receptora_id",N);if(B)throw B;const ee=new Map((q==null?void 0:q.map(X=>[X.receptora_id+X.protocolo_id,X.id]))||[]),Q=C.map(X=>({receptora_id:X.receptora_id,brinco:X.brinco,protocolo_id:X.protocolo_id,protocolo_receptora_id:ee.get(X.receptora_id+X.protocolo_id)||""}));s(Q)}catch(w){p({title:"Erro ao carregar receptoras",description:w instanceof Error?w.message:"Erro desconhecido",variant:"destructive"})}},v=_=>{const w=a.find(S=>S.receptora_id===_);j({...m,receptora_id:_,protocolo_receptora_id:(w==null?void 0:w.protocolo_receptora_id)||""})},y=async _=>{if(_.preventDefault(),!m.fazenda_id||!m.receptora_id||!m.embriao_id||!m.data_te){p({title:"Erro de validao",description:"Fazenda, receptora, embrio e data de TE so obrigatrios",variant:"destructive"});return}try{h(!0);const w={embriao_id:m.embriao_id,receptora_id:m.receptora_id,protocolo_receptora_id:m.protocolo_receptora_id||null,data_te:m.data_te,tipo_te:m.tipo_te,veterinario_responsavel:m.veterinario_responsavel||null,tecnico_responsavel:m.tecnico_responsavel||null,status_te:"REALIZADA",observacoes:m.observacoes||null},{error:S}=await T.from("transferencias_embrioes").insert([w]);if(S)throw console.error("Erro ao inserir transferncia:",S),new Error(`Erro ao registrar transferncia: ${S.message}${S.code?` (cdigo: ${S.code})`:""}${S.details?` - ${S.details}`:""}`);const{error:N}=await T.from("embrioes").update({status_atual:"TRANSFERIDO"}).eq("id",m.embriao_id);if(N)throw N;if(m.protocolo_receptora_id){const{error:C}=await T.from("protocolo_receptoras").update({status:"UTILIZADA"}).eq("id",m.protocolo_receptora_id);if(C)throw C}p({title:"Transferncia realizada",description:"Transferncia de embrio registrada com sucesso"}),j({fazenda_id:"",receptora_id:"",protocolo_receptora_id:"",embriao_id:"",data_te:new Date().toISOString().split("T")[0],tipo_te:"FRESCO",veterinario_responsavel:"",tecnico_responsavel:"",observacoes:""}),s([]),g()}catch(w){console.error("Erro completo:",w);const S=w instanceof Error?w.message:"Erro desconhecido";p({title:"Erro ao realizar transferncia",description:S.includes("RLS")||S.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":S,variant:"destructive"})}finally{h(!1)}};return c?r.jsx(zt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Transferncia de Embries (TE)"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Registrar transferncia de embries para receptoras"})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsxs(Ae,{className:"flex items-center gap-2",children:[r.jsx(sf,{className:"w-5 h-5"}),"Nova Transferncia"]})}),r.jsx(we,{children:r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"fazenda_id",children:"Fazenda *"}),r.jsxs(Ze,{value:m.fazenda_id,onValueChange:b,children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione a fazenda"})}),r.jsx(Qe,{children:e.map(_=>r.jsx(ve,{value:_.id,children:_.nome},_.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"receptora_id",children:"Receptora Sincronizada *"}),r.jsxs(Ze,{value:m.receptora_id,onValueChange:v,disabled:!m.fazenda_id,children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione a receptora"})}),r.jsx(Qe,{children:a.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhuma receptora sincronizada disponvel"}):a.map(_=>r.jsx(ve,{value:_.receptora_id,children:_.brinco},_.receptora_id))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"embriao_id",children:"Embrio Disponvel *"}),r.jsxs(Ze,{value:m.embriao_id,onValueChange:_=>j({...m,embriao_id:_}),disabled:!m.fazenda_id,children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:m.fazenda_id?"Selecione o embrio":"Selecione primeiro a fazenda"})}),r.jsx(Qe,{children:m.fazenda_id?i.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhum embrio disponvel para esta fazenda"}):i.map(_=>r.jsxs(ve,{value:_.embriao_id,children:[_.identificacao||_.embriao_id.slice(0,8)," -"," ",_.classificacao," (",_.status_atual,")"]},_.embriao_id)):r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Selecione primeiro uma fazenda para ver os embries disponveis"})})]}),m.fazenda_id&&i.length>0&&r.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[i.length," embrio(es) disponvel(is) para esta fazenda"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"data_te",children:"Data da TE *"}),r.jsx(se,{id:"data_te",type:"date",value:m.data_te,onChange:_=>j({...m,data_te:_.target.value}),required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"tipo_te",children:"Tipo de TE"}),r.jsxs(Ze,{value:m.tipo_te,onValueChange:_=>j({...m,tipo_te:_}),children:[r.jsx(Ye,{children:r.jsx(Je,{})}),r.jsxs(Qe,{children:[r.jsx(ve,{value:"FRESCO",children:"FRESCO"}),r.jsx(ve,{value:"CONGELADO",children:"CONGELADO"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"veterinario_responsavel",children:"Veterinrio Responsvel"}),r.jsx(se,{id:"veterinario_responsavel",value:m.veterinario_responsavel,onChange:_=>j({...m,veterinario_responsavel:_.target.value}),placeholder:"Nome do veterinrio"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"tecnico_responsavel",children:"Tcnico Responsvel"}),r.jsx(se,{id:"tecnico_responsavel",value:m.tecnico_responsavel,onChange:_=>j({...m,tecnico_responsavel:_.target.value}),placeholder:"Nome do tcnico"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Aa,{id:"observacoes",value:m.observacoes,onChange:_=>j({...m,observacoes:_.target.value}),placeholder:"Observaes sobre a transferncia",rows:3})]}),r.jsx("div",{className:"flex gap-2 pt-2",children:r.jsx(U,{type:"submit",className:"bg-green-600 hover:bg-green-700",disabled:f,children:f?"Registrando...":"Registrar Transferncia"})})]})})]})]})}function g5(){const[e,t]=u.useState([]),[a,s]=u.useState([]),[n,o]=u.useState(!0),[i,l]=u.useState(!1),[c,d]=u.useState(!1),{toast:f}=ea(),[h,p]=u.useState({receptora_id:"",data_te:"",data_diagnostico:new Date().toISOString().split("T")[0],resultado:"",numero_gestacoes:"",observacoes:""});u.useEffect(()=>{m()},[]);const m=async()=>{try{o(!0);const{data:g,error:b}=await T.from("transferencias_embrioes").select("receptora_id, data_te").eq("status_te","REALIZADA").order("data_te",{ascending:!1});if(b)throw b;const v=[...new Set(g==null?void 0:g.map(S=>S.receptora_id))];if(v.length>0){const{data:S,error:N}=await T.from("receptoras").select("id, identificacao").in("id",v);if(N)throw N;const C=new Map(S==null?void 0:S.map(A=>[A.id,A.identificacao])),O=(g==null?void 0:g.map(A=>({receptora_id:A.receptora_id,brinco:C.get(A.receptora_id)||"",data_te:A.data_te})))||[];s(O)}const{data:y,error:_}=await T.from("diagnosticos_gestacao").select("*").eq("tipo_diagnostico","DG").order("data_diagnostico",{ascending:!1});if(_)throw _;const w=[...new Set(y==null?void 0:y.map(S=>S.receptora_id))];if(w.length>0){const{data:S,error:N}=await T.from("receptoras").select("id, identificacao").in("id",w);if(N)throw N;const C=new Map(S==null?void 0:S.map(A=>[A.id,A.identificacao])),O=y==null?void 0:y.map(A=>({...A,receptora_brinco:C.get(A.receptora_id)}));t(O||[])}else t([])}catch(g){f({title:"Erro ao carregar dados",description:g instanceof Error?g.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},j=g=>{const b=a.find(v=>v.receptora_id===g);p({...h,receptora_id:g,data_te:(b==null?void 0:b.data_te)||""})},x=async g=>{if(g.preventDefault(),!h.receptora_id||!h.data_te||!h.data_diagnostico||!h.resultado){f({title:"Erro de validao",description:"Receptora, data da TE, data do diagnstico e resultado so obrigatrios",variant:"destructive"});return}try{d(!0);const b={receptora_id:h.receptora_id,data_te:h.data_te,tipo_diagnostico:"DG",data_diagnostico:h.data_diagnostico,resultado:h.resultado,numero_gestacoes:h.numero_gestacoes?parseInt(h.numero_gestacoes):null,observacoes:h.observacoes||null},{error:v}=await T.from("diagnosticos_gestacao").insert([b]);if(v)throw v;f({title:"Diagnstico registrado",description:"Diagnstico de gestao registrado com sucesso"}),l(!1),p({receptora_id:"",data_te:"",data_diagnostico:new Date().toISOString().split("T")[0],resultado:"",numero_gestacoes:"",observacoes:""}),m()}catch(b){const v=b instanceof Error?b.message:"Erro desconhecido";f({title:"Erro ao registrar diagnstico",description:v.includes("RLS")||v.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":v,variant:"destructive"})}finally{d(!1)}};return n?r.jsx(zt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Diagnstico de Gestao (DG)"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Registrar diagnsticos de gestao"})]}),r.jsxs(Dt,{open:i,onOpenChange:l,children:[r.jsx(Ds,{asChild:!0,children:r.jsxs(U,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ts,{className:"w-4 h-4 mr-2"}),"Novo Diagnstico"]})}),r.jsxs(_t,{className:"max-w-md",children:[r.jsxs(jt,{children:[r.jsxs(wt,{className:"flex items-center gap-2",children:[r.jsx(Ev,{className:"w-5 h-5"}),"Registrar Diagnstico de Gestao"]}),r.jsx(Ot,{children:"Preencha os dados do diagnstico"})]}),r.jsxs("form",{onSubmit:x,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"receptora_id",children:"Receptora com TE *"}),r.jsxs(Ze,{value:h.receptora_id,onValueChange:j,children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione a receptora"})}),r.jsx(Qe,{children:a.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhuma receptora com TE registrada"}):a.map(g=>r.jsxs(ve,{value:g.receptora_id,children:[g.brinco," - TE em"," ",new Date(g.data_te).toLocaleDateString("pt-BR")]},g.receptora_id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"data_diagnostico",children:"Data do Diagnstico *"}),r.jsx(se,{id:"data_diagnostico",type:"date",value:h.data_diagnostico,onChange:g=>p({...h,data_diagnostico:g.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"resultado",children:"Resultado *"}),r.jsxs(Ze,{value:h.resultado,onValueChange:g=>p({...h,resultado:g}),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione o resultado"})}),r.jsxs(Qe,{children:[r.jsx(ve,{value:"PRENHE",children:"PRENHE"}),r.jsx(ve,{value:"VAZIA",children:"VAZIA"}),r.jsx(ve,{value:"RETOQUE",children:"RETOQUE"})]})]})]}),h.resultado==="PRENHE"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"numero_gestacoes",children:"Nmero de Gestaes"}),r.jsx(se,{id:"numero_gestacoes",type:"number",min:"1",max:"3",value:h.numero_gestacoes,onChange:g=>p({...h,numero_gestacoes:g.target.value}),placeholder:"1, 2 ou 3 (gemelar)"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Aa,{id:"observacoes",value:h.observacoes,onChange:g=>p({...h,observacoes:g.target.value}),placeholder:"Observaes sobre o diagnstico",rows:3})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(U,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:c,children:c?"Salvando...":"Registrar"}),r.jsx(U,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:c,children:"Cancelar"})]})]})]})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Histrico de Diagnsticos"})}),r.jsx(we,{children:r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Data Diagnstico"}),r.jsx(V,{children:"Receptora"}),r.jsx(V,{children:"Data TE"}),r.jsx(V,{children:"Resultado"}),r.jsx(V,{children:"N Gestaes"}),r.jsx(V,{children:"Observaes"})]})}),r.jsx(Rt,{children:e.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:6,className:"text-center text-slate-500",children:"Nenhum diagnstico registrado"})}):e.map(g=>r.jsxs(ge,{children:[r.jsx(L,{children:new Date(g.data_diagnostico).toLocaleDateString("pt-BR")}),r.jsx(L,{className:"font-medium",children:g.receptora_brinco||"-"}),r.jsx(L,{children:new Date(g.data_te).toLocaleDateString("pt-BR")}),r.jsx(L,{children:r.jsx(xc,{status:g.resultado})}),r.jsx(L,{children:g.numero_gestacoes||"-"}),r.jsx(L,{children:g.observacoes||"-"})]},g.id))})]})})]})]})}function x5(){const[e,t]=u.useState([]),[a,s]=u.useState([]),[n,o]=u.useState(!0),[i,l]=u.useState(!1),[c,d]=u.useState(!1),{toast:f}=ea(),[h,p]=u.useState({receptora_id:"",data_te:"",data_diagnostico:new Date().toISOString().split("T")[0],resultado:"PRENHE",sexagem:"",numero_gestacoes:"",observacoes:""});u.useEffect(()=>{m()},[]);const m=async()=>{try{o(!0);const{data:g,error:b}=await T.from("transferencias_embrioes").select("receptora_id, data_te").eq("status_te","REALIZADA").order("data_te",{ascending:!1});if(b)throw b;const v=[...new Set(g==null?void 0:g.map(S=>S.receptora_id))];if(v.length>0){const{data:S,error:N}=await T.from("receptoras").select("id, identificacao").in("id",v);if(N)throw N;const C=new Map(S==null?void 0:S.map(A=>[A.id,A.identificacao])),O=(g==null?void 0:g.map(A=>({receptora_id:A.receptora_id,brinco:C.get(A.receptora_id)||"",data_te:A.data_te})))||[];s(O)}const{data:y,error:_}=await T.from("diagnosticos_gestacao").select("*").eq("tipo_diagnostico","SEXAGEM").order("data_diagnostico",{ascending:!1});if(_)throw _;const w=[...new Set(y==null?void 0:y.map(S=>S.receptora_id))];if(w.length>0){const{data:S,error:N}=await T.from("receptoras").select("id, identificacao").in("id",w);if(N)throw N;const C=new Map(S==null?void 0:S.map(A=>[A.id,A.identificacao])),O=y==null?void 0:y.map(A=>({...A,receptora_brinco:C.get(A.receptora_id)}));t(O||[])}else t([])}catch(g){f({title:"Erro ao carregar dados",description:g instanceof Error?g.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},j=g=>{const b=a.find(v=>v.receptora_id===g);p({...h,receptora_id:g,data_te:(b==null?void 0:b.data_te)||""})},x=async g=>{if(g.preventDefault(),!h.receptora_id||!h.data_te||!h.data_diagnostico){f({title:"Erro de validao",description:"Receptora, data da TE e data do diagnstico so obrigatrios",variant:"destructive"});return}if(h.resultado==="PRENHE"&&!h.sexagem){f({title:"Erro de validao",description:"Sexagem  obrigatria quando resultado  PRENHE",variant:"destructive"});return}try{d(!0);const b={receptora_id:h.receptora_id,data_te:h.data_te,tipo_diagnostico:"SEXAGEM",data_diagnostico:h.data_diagnostico,resultado:h.resultado,sexagem:h.sexagem||null,numero_gestacoes:h.numero_gestacoes?parseInt(h.numero_gestacoes):null,observacoes:h.observacoes||null},{error:v}=await T.from("diagnosticos_gestacao").insert([b]);if(v)throw v;f({title:"Sexagem registrada",description:"Sexagem registrada com sucesso"}),l(!1),p({receptora_id:"",data_te:"",data_diagnostico:new Date().toISOString().split("T")[0],resultado:"PRENHE",sexagem:"",numero_gestacoes:"",observacoes:""}),m()}catch(b){const v=b instanceof Error?b.message:"Erro desconhecido";f({title:"Erro ao registrar sexagem",description:v.includes("RLS")||v.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":v,variant:"destructive"})}finally{d(!1)}};return n?r.jsx(zt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Sexagem"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Registrar sexagem fetal"})]}),r.jsxs(Dt,{open:i,onOpenChange:l,children:[r.jsx(Ds,{asChild:!0,children:r.jsxs(U,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ts,{className:"w-4 h-4 mr-2"}),"Nova Sexagem"]})}),r.jsxs(_t,{className:"max-w-md",children:[r.jsxs(jt,{children:[r.jsxs(wt,{className:"flex items-center gap-2",children:[r.jsx(Hj,{className:"w-5 h-5"}),"Registrar Sexagem"]}),r.jsx(Ot,{children:"Preencha os dados da sexagem (pode ser feita sem DG prvio)"})]}),r.jsxs("form",{onSubmit:x,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"receptora_id",children:"Receptora com TE *"}),r.jsxs(Ze,{value:h.receptora_id,onValueChange:j,children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione a receptora"})}),r.jsx(Qe,{children:a.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhuma receptora com TE registrada"}):a.map(g=>r.jsxs(ve,{value:g.receptora_id,children:[g.brinco," - TE em"," ",new Date(g.data_te).toLocaleDateString("pt-BR")]},g.receptora_id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"data_diagnostico",children:"Data da Sexagem *"}),r.jsx(se,{id:"data_diagnostico",type:"date",value:h.data_diagnostico,onChange:g=>p({...h,data_diagnostico:g.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"resultado",children:"Resultado"}),r.jsxs(Ze,{value:h.resultado,onValueChange:g=>p({...h,resultado:g}),children:[r.jsx(Ye,{children:r.jsx(Je,{})}),r.jsxs(Qe,{children:[r.jsx(ve,{value:"PRENHE",children:"PRENHE"}),r.jsx(ve,{value:"RETOQUE",children:"RETOQUE"})]})]})]}),h.resultado==="PRENHE"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"sexagem",children:"Sexo do Feto *"}),r.jsxs(Ze,{value:h.sexagem,onValueChange:g=>p({...h,sexagem:g}),children:[r.jsx(Ye,{children:r.jsx(Je,{placeholder:"Selecione o sexo"})}),r.jsxs(Qe,{children:[r.jsx(ve,{value:"FEMEA",children:"FMEA"}),r.jsx(ve,{value:"MACHO",children:"MACHO"}),r.jsx(ve,{value:"PRENHE",children:"PRENHE (sem sexo visvel)"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"numero_gestacoes",children:"Nmero de Gestaes"}),r.jsx(se,{id:"numero_gestacoes",type:"number",min:"1",max:"3",value:h.numero_gestacoes,onChange:g=>p({...h,numero_gestacoes:g.target.value}),placeholder:"1, 2 ou 3 (gemelar)"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(F,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Aa,{id:"observacoes",value:h.observacoes,onChange:g=>p({...h,observacoes:g.target.value}),placeholder:"Observaes sobre a sexagem",rows:3})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(U,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:c,children:c?"Salvando...":"Registrar"}),r.jsx(U,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:c,children:"Cancelar"})]})]})]})]})]}),r.jsxs(je,{children:[r.jsx(Ce,{children:r.jsx(Ae,{children:"Histrico de Sexagens"})}),r.jsx(we,{children:r.jsxs(At,{children:[r.jsx(Tt,{children:r.jsxs(ge,{children:[r.jsx(V,{children:"Data Sexagem"}),r.jsx(V,{children:"Receptora"}),r.jsx(V,{children:"Data TE"}),r.jsx(V,{children:"Resultado"}),r.jsx(V,{children:"Sexo"}),r.jsx(V,{children:"N Gestaes"}),r.jsx(V,{children:"Observaes"})]})}),r.jsx(Rt,{children:e.length===0?r.jsx(ge,{children:r.jsx(L,{colSpan:7,className:"text-center text-slate-500",children:"Nenhuma sexagem registrada"})}):e.map(g=>r.jsxs(ge,{children:[r.jsx(L,{children:new Date(g.data_diagnostico).toLocaleDateString("pt-BR")}),r.jsx(L,{className:"font-medium",children:g.receptora_brinco||"-"}),r.jsx(L,{children:new Date(g.data_te).toLocaleDateString("pt-BR")}),r.jsx(L,{children:r.jsx(xc,{status:g.resultado})}),r.jsx(L,{children:g.sexagem?r.jsx(xc,{status:g.sexagem}):"-"}),r.jsx(L,{children:g.numero_gestacoes||"-"}),r.jsx(L,{children:g.observacoes||"-"})]},g.id))})]})})]})]})}function y5(){return r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-gray-50 to-blue-50 p-6 text-center",children:r.jsxs("div",{className:"space-y-6 max-w-md",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("h1",{className:"text-8xl font-bold text-blue-600",children:"404"}),r.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Page Not Found"}),r.jsx("p",{className:"text-muted-foreground",children:"The page you're looking for doesn't exist or may have been moved."})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[r.jsx(U,{asChild:!0,children:r.jsx("a",{href:"/",children:"Return Home"})}),r.jsx(U,{variant:"outline",onClick:()=>window.history.back(),children:"Go Back"})]})]})})}const b5=new FO,_5=()=>r.jsx(UO,{client:b5,children:r.jsxs(pO,{children:[r.jsx(L2,{}),r.jsx(DR,{}),r.jsx(Bz,{children:r.jsxs(kz,{children:[r.jsxs(Et,{element:r.jsx(Qz,{}),children:[r.jsx(Et,{path:"/",element:r.jsx(uk,{})}),r.jsx(Et,{path:"/clientes",element:r.jsx(mk,{})}),r.jsx(Et,{path:"/clientes/novo",element:r.jsx(Y0,{})}),r.jsx(Et,{path:"/clientes/:id",element:r.jsx(MP,{})}),r.jsx(Et,{path:"/clientes/:id/editar",element:r.jsx(Y0,{})}),r.jsx(Et,{path:"/fazendas",element:r.jsx(kP,{})}),r.jsx(Et,{path:"/fazendas/:id",element:r.jsx(LP,{})}),r.jsx(Et,{path:"/doadoras",element:r.jsx(p6,{})}),r.jsx(Et,{path:"/doadoras/:id",element:r.jsx(j6,{})}),r.jsx(Et,{path:"/receptoras",element:r.jsx(N6,{})}),r.jsx(Et,{path:"/receptoras/:id/historico",element:r.jsx(pN,{})}),r.jsx(Et,{path:"/protocolos",element:r.jsx(C6,{})}),r.jsx(Et,{path:"/protocolos/novo",element:r.jsx(o5,{})}),r.jsx(Et,{path:"/protocolos/:id",element:r.jsx(i5,{})}),r.jsx(Et,{path:"/protocolos/:id/passo2",element:r.jsx(l5,{})}),r.jsx(Et,{path:"/protocolos/fechados/:id/relatorio",element:r.jsx(c5,{})}),r.jsx(Et,{path:"/aspiracoes",element:r.jsx(d5,{})}),r.jsx(Et,{path:"/aspiracoes/novo",element:r.jsx(u5,{})}),r.jsx(Et,{path:"/aspiracoes/:id",element:r.jsx(f5,{})}),r.jsx(Et,{path:"/doses-semen",element:r.jsx(h5,{})}),r.jsx(Et,{path:"/lotes-fiv",element:r.jsx(iy,{})}),r.jsx(Et,{path:"/lotes-fiv/:id",element:r.jsx(iy,{})}),r.jsx(Et,{path:"/embrioes",element:r.jsx(p5,{})}),r.jsx(Et,{path:"/transferencia",element:r.jsx(v5,{})}),r.jsx(Et,{path:"/dg",element:r.jsx(g5,{})}),r.jsx(Et,{path:"/sexagem",element:r.jsx(x5,{})})]}),r.jsx(Et,{path:"*",element:r.jsx(y5,{})})]})})]})});n2.createRoot(document.getElementById("root")).render(r.jsx(_5,{}));
