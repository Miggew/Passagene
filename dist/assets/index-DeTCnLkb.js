var Qx=e=>{throw TypeError(e)};var Qh=(e,t,a)=>t.has(e)||Qx("Cannot "+a);var ye=(e,t,a)=>(Qh(e,t,"read from private field"),a?a.call(e):t.get(e)),Ot=(e,t,a)=>t.has(e)?Qx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),nt=(e,t,a,s)=>(Qh(e,t,"write to private field"),s?s.call(e,a):t.set(e,a),a),Ba=(e,t,a)=>(Qh(e,t,"access private method"),a);var su=(e,t,a,s)=>({set _(n){nt(e,t,n,a)},get _(){return ye(e,t,s)}});function fD(e,t){for(var a=0;a<t.length;a++){const s=t[a];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in e)){const o=Object.getOwnPropertyDescriptor(s,n);o&&Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();var Ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function hD(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var a=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var n=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(a,s,n.get?n:{enumerable:!0,get:function(){return e[s]}})}),a}var yb={exports:{}},Bf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mD=Symbol.for("react.transitional.element"),pD=Symbol.for("react.fragment");function _b(e,t,a){var s=null;if(a!==void 0&&(s=""+a),t.key!==void 0&&(s=""+t.key),"key"in t){a={};for(var n in t)n!=="key"&&(a[n]=t[n])}else a=t;return t=a.ref,{$$typeof:mD,type:e,key:s,ref:t!==void 0?t:null,props:a}}Bf.Fragment=pD;Bf.jsx=_b;Bf.jsxs=_b;yb.exports=Bf;var r=yb.exports,bb={exports:{}},Uf={},wb={exports:{}},jb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,q){var I=A.length;A.push(q);e:for(;0<I;){var w=I-1>>>1,C=A[w];if(0<n(C,q))A[w]=q,A[I]=C,I=w;else break e}}function a(A){return A.length===0?null:A[0]}function s(A){if(A.length===0)return null;var q=A[0],I=A.pop();if(I!==q){A[0]=I;e:for(var w=0,C=A.length,$=C>>>1;w<$;){var O=2*(w+1)-1,L=A[O],H=O+1,G=A[H];if(0>n(L,I))H<C&&0>n(G,L)?(A[w]=G,A[H]=I,w=H):(A[w]=L,A[O]=I,w=O);else if(H<C&&0>n(G,I))A[w]=G,A[H]=I,w=H;else break e}}return q}function n(A,q){var I=A.sortIndex-q.sortIndex;return I!==0?I:A.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],f=1,h=null,p=3,m=!1,b=!1,y=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;function E(A){for(var q=a(d);q!==null;){if(q.callback===null)s(d);else if(q.startTime<=A)s(d),q.sortIndex=q.expirationTime,t(c,q);else break;q=a(d)}}function j(A){if(y=!1,E(A),!b)if(a(c)!==null)b=!0,S||(S=!0,Z());else{var q=a(d);q!==null&&M(j,q.startTime-A)}}var S=!1,N=-1,R=5,T=-1;function F(){return _?!0:!(e.unstable_now()-T<R)}function U(){if(_=!1,S){var A=e.unstable_now();T=A;var q=!0;try{e:{b=!1,y&&(y=!1,v(N),N=-1),m=!0;var I=p;try{t:{for(E(A),h=a(c);h!==null&&!(h.expirationTime>A&&F());){var w=h.callback;if(typeof w=="function"){h.callback=null,p=h.priorityLevel;var C=w(h.expirationTime<=A);if(A=e.unstable_now(),typeof C=="function"){h.callback=C,E(A),q=!0;break t}h===a(c)&&s(c),E(A)}else s(c);h=a(c)}if(h!==null)q=!0;else{var $=a(d);$!==null&&M(j,$.startTime-A),q=!1}}break e}finally{h=null,p=I,m=!1}q=void 0}}finally{q?Z():S=!1}}}var Z;if(typeof g=="function")Z=function(){g(U)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,k=ce.port2;ce.port1.onmessage=U,Z=function(){k.postMessage(null)}}else Z=function(){x(U,0)};function M(A,q){N=x(function(){A(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(A){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var I=p;p=q;try{return A()}finally{p=I}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(A,q){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var I=p;p=A;try{return q()}finally{p=I}},e.unstable_scheduleCallback=function(A,q,I){var w=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?w+I:w):I=w,A){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=I+C,A={id:f++,callback:q,priorityLevel:A,startTime:I,expirationTime:C,sortIndex:-1},I>w?(A.sortIndex=I,t(d,A),a(c)===null&&A===a(d)&&(y?(v(N),N=-1):y=!0,M(j,I-w))):(A.sortIndex=C,t(c,A),b||m||(b=!0,S||(S=!0,Z()))),A},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(A){var q=p;return function(){var I=p;p=q;try{return A.apply(this,arguments)}finally{p=I}}}})(jb);wb.exports=jb;var gD=wb.exports,Eb={exports:{}},ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg=Symbol.for("react.transitional.element"),vD=Symbol.for("react.portal"),xD=Symbol.for("react.fragment"),yD=Symbol.for("react.strict_mode"),_D=Symbol.for("react.profiler"),bD=Symbol.for("react.consumer"),wD=Symbol.for("react.context"),jD=Symbol.for("react.forward_ref"),ED=Symbol.for("react.suspense"),SD=Symbol.for("react.memo"),Sb=Symbol.for("react.lazy"),Zx=Symbol.iterator;function ND(e){return e===null||typeof e!="object"?null:(e=Zx&&e[Zx]||e["@@iterator"],typeof e=="function"?e:null)}var Nb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cb=Object.assign,Ab={};function kl(e,t,a){this.props=e,this.context=t,this.refs=Ab,this.updater=a||Nb}kl.prototype.isReactComponent={};kl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};kl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Db(){}Db.prototype=kl.prototype;function Gg(e,t,a){this.props=e,this.context=t,this.refs=Ab,this.updater=a||Nb}var Yg=Gg.prototype=new Db;Yg.constructor=Gg;Cb(Yg,kl.prototype);Yg.isPureReactComponent=!0;var Xx=Array.isArray,la={H:null,A:null,T:null,S:null,V:null},Tb=Object.prototype.hasOwnProperty;function Wg(e,t,a,s,n,o){return a=o.ref,{$$typeof:Vg,type:e,key:t,ref:a!==void 0?a:null,props:o}}function CD(e,t){return Wg(e.type,t,void 0,void 0,void 0,e.props)}function Qg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vg}function AD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return t[a]})}var Kx=/\/+/g;function Zh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?AD(""+e.key):t.toString(36)}function Jx(){}function DD(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Jx,Jx):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function wi(e,t,a,s,n){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"bigint":case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Vg:case vD:i=!0;break;case Sb:return i=e._init,wi(i(e._payload),t,a,s,n)}}if(i)return n=n(e),i=s===""?"."+Zh(e,0):s,Xx(n)?(a="",i!=null&&(a=i.replace(Kx,"$&/")+"/"),wi(n,t,a,"",function(d){return d})):n!=null&&(Qg(n)&&(n=CD(n,a+(n.key==null||e&&e.key===n.key?"":(""+n.key).replace(Kx,"$&/")+"/")+i)),t.push(n)),1;i=0;var l=s===""?".":s+":";if(Xx(e))for(var c=0;c<e.length;c++)s=e[c],o=l+Zh(s,c),i+=wi(s,t,a,o,n);else if(c=ND(e),typeof c=="function")for(e=c.call(e),c=0;!(s=e.next()).done;)s=s.value,o=l+Zh(s,c++),i+=wi(s,t,a,o,n);else if(o==="object"){if(typeof e.then=="function")return wi(DD(e),t,a,s,n);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return i}function ru(e,t,a){if(e==null)return e;var s=[],n=0;return wi(e,s,"","",function(o){return t.call(a,o,n++)}),s}function TD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(a){(e._status===0||e._status===-1)&&(e._status=1,e._result=a)},function(a){(e._status===0||e._status===-1)&&(e._status=2,e._result=a)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var e0=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function OD(){}ut.Children={map:ru,forEach:function(e,t,a){ru(e,function(){t.apply(this,arguments)},a)},count:function(e){var t=0;return ru(e,function(){t++}),t},toArray:function(e){return ru(e,function(t){return t})||[]},only:function(e){if(!Qg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ut.Component=kl;ut.Fragment=xD;ut.Profiler=_D;ut.PureComponent=Gg;ut.StrictMode=yD;ut.Suspense=ED;ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=la;ut.__COMPILER_RUNTIME={__proto__:null,c:function(e){return la.H.useMemoCache(e)}};ut.cache=function(e){return function(){return e.apply(null,arguments)}};ut.cloneElement=function(e,t,a){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var s=Cb({},e.props),n=e.key,o=void 0;if(t!=null)for(i in t.ref!==void 0&&(o=void 0),t.key!==void 0&&(n=""+t.key),t)!Tb.call(t,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&t.ref===void 0||(s[i]=t[i]);var i=arguments.length-2;if(i===1)s.children=a;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];s.children=l}return Wg(e.type,n,void 0,void 0,o,s)};ut.createContext=function(e){return e={$$typeof:wD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:bD,_context:e},e};ut.createElement=function(e,t,a){var s,n={},o=null;if(t!=null)for(s in t.key!==void 0&&(o=""+t.key),t)Tb.call(t,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(n[s]=t[s]);var i=arguments.length-2;if(i===1)n.children=a;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];n.children=l}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)n[s]===void 0&&(n[s]=i[s]);return Wg(e,o,void 0,void 0,null,n)};ut.createRef=function(){return{current:null}};ut.forwardRef=function(e){return{$$typeof:jD,render:e}};ut.isValidElement=Qg;ut.lazy=function(e){return{$$typeof:Sb,_payload:{_status:-1,_result:e},_init:TD}};ut.memo=function(e,t){return{$$typeof:SD,type:e,compare:t===void 0?null:t}};ut.startTransition=function(e){var t=la.T,a={};la.T=a;try{var s=e(),n=la.S;n!==null&&n(a,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(OD,e0)}catch(o){e0(o)}finally{la.T=t}};ut.unstable_useCacheRefresh=function(){return la.H.useCacheRefresh()};ut.use=function(e){return la.H.use(e)};ut.useActionState=function(e,t,a){return la.H.useActionState(e,t,a)};ut.useCallback=function(e,t){return la.H.useCallback(e,t)};ut.useContext=function(e){return la.H.useContext(e)};ut.useDebugValue=function(){};ut.useDeferredValue=function(e,t){return la.H.useDeferredValue(e,t)};ut.useEffect=function(e,t,a){var s=la.H;if(typeof a=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(e,t)};ut.useId=function(){return la.H.useId()};ut.useImperativeHandle=function(e,t,a){return la.H.useImperativeHandle(e,t,a)};ut.useInsertionEffect=function(e,t){return la.H.useInsertionEffect(e,t)};ut.useLayoutEffect=function(e,t){return la.H.useLayoutEffect(e,t)};ut.useMemo=function(e,t){return la.H.useMemo(e,t)};ut.useOptimistic=function(e,t){return la.H.useOptimistic(e,t)};ut.useReducer=function(e,t,a){return la.H.useReducer(e,t,a)};ut.useRef=function(e){return la.H.useRef(e)};ut.useState=function(e){return la.H.useState(e)};ut.useSyncExternalStore=function(e,t,a){return la.H.useSyncExternalStore(e,t,a)};ut.useTransition=function(){return la.H.useTransition()};ut.version="19.1.1";Eb.exports=ut;var u=Eb.exports;const se=xb(u),Zg=fD({__proto__:null,default:se},[u]);var Ob={exports:{}},ts={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RD=u;function Rb(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function gn(){}var Ja={d:{f:gn,r:function(){throw Error(Rb(522))},D:gn,C:gn,L:gn,m:gn,X:gn,S:gn,M:gn},p:0,findDOMNode:null},MD=Symbol.for("react.portal");function kD(e,t,a){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:MD,key:s==null?null:""+s,children:e,containerInfo:t,implementation:a}}var Sc=RD.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Hf(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}ts.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ja;ts.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Rb(299));return kD(e,t,null,a)};ts.flushSync=function(e){var t=Sc.T,a=Ja.p;try{if(Sc.T=null,Ja.p=2,e)return e()}finally{Sc.T=t,Ja.p=a,Ja.d.f()}};ts.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Ja.d.C(e,t))};ts.prefetchDNS=function(e){typeof e=="string"&&Ja.d.D(e)};ts.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var a=t.as,s=Hf(a,t.crossOrigin),n=typeof t.integrity=="string"?t.integrity:void 0,o=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;a==="style"?Ja.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:s,integrity:n,fetchPriority:o}):a==="script"&&Ja.d.X(e,{crossOrigin:s,integrity:n,fetchPriority:o,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};ts.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var a=Hf(t.as,t.crossOrigin);Ja.d.M(e,{crossOrigin:a,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Ja.d.M(e)};ts.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var a=t.as,s=Hf(a,t.crossOrigin);Ja.d.L(e,a,{crossOrigin:s,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};ts.preloadModule=function(e,t){if(typeof e=="string")if(t){var a=Hf(t.as,t.crossOrigin);Ja.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:a,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Ja.d.m(e)};ts.requestFormReset=function(e){Ja.d.r(e)};ts.unstable_batchedUpdates=function(e,t){return e(t)};ts.useFormState=function(e,t,a){return Sc.H.useFormState(e,t,a)};ts.useFormStatus=function(){return Sc.H.useHostTransitionStatus()};ts.version="19.1.1";function Mb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mb)}catch(e){console.error(e)}}Mb(),Ob.exports=ts;var ti=Ob.exports;const kb=xb(ti);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ca=gD,zb=u,zD=ti;function we(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Pb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jd(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function Ib(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function t0(e){if(jd(e)!==e)throw Error(we(188))}function PD(e){var t=e.alternate;if(!t){if(t=jd(e),t===null)throw Error(we(188));return t!==e?null:e}for(var a=e,s=t;;){var n=a.return;if(n===null)break;var o=n.alternate;if(o===null){if(s=n.return,s!==null){a=s;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===a)return t0(n),e;if(o===s)return t0(n),t;o=o.sibling}throw Error(we(188))}if(a.return!==s.return)a=n,s=o;else{for(var i=!1,l=n.child;l;){if(l===a){i=!0,a=n,s=o;break}if(l===s){i=!0,s=n,a=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===a){i=!0,a=o,s=n;break}if(l===s){i=!0,s=o,a=n;break}l=l.sibling}if(!i)throw Error(we(189))}}if(a.alternate!==s)throw Error(we(190))}if(a.tag!==3)throw Error(we(188));return a.stateNode.current===a?e:t}function Lb(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Lb(e),t!==null)return t;e=e.sibling}return null}var oa=Object.assign,ID=Symbol.for("react.element"),nu=Symbol.for("react.transitional.element"),vc=Symbol.for("react.portal"),Ti=Symbol.for("react.fragment"),Fb=Symbol.for("react.strict_mode"),fp=Symbol.for("react.profiler"),LD=Symbol.for("react.provider"),$b=Symbol.for("react.consumer"),Gr=Symbol.for("react.context"),Xg=Symbol.for("react.forward_ref"),hp=Symbol.for("react.suspense"),mp=Symbol.for("react.suspense_list"),Kg=Symbol.for("react.memo"),Cn=Symbol.for("react.lazy"),pp=Symbol.for("react.activity"),FD=Symbol.for("react.memo_cache_sentinel"),a0=Symbol.iterator;function ac(e){return e===null||typeof e!="object"?null:(e=a0&&e[a0]||e["@@iterator"],typeof e=="function"?e:null)}var $D=Symbol.for("react.client.reference");function gp(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===$D?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ti:return"Fragment";case fp:return"Profiler";case Fb:return"StrictMode";case hp:return"Suspense";case mp:return"SuspenseList";case pp:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case vc:return"Portal";case Gr:return(e.displayName||"Context")+".Provider";case $b:return(e._context.displayName||"Context")+".Consumer";case Xg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Kg:return t=e.displayName||null,t!==null?t:gp(e.type)||"Memo";case Cn:t=e._payload,e=e._init;try{return gp(e(t))}catch{}}return null}var xc=Array.isArray,Xe=zb.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,zt=zD.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ko={pending:!1,data:null,method:null,action:null},vp=[],Oi=-1;function Ar(e){return{current:e}}function Ma(e){0>Oi||(e.current=vp[Oi],vp[Oi]=null,Oi--)}function ca(e,t){Oi++,vp[Oi]=e.current,e.current=t}var jr=Ar(null),Vc=Ar(null),Vn=Ar(null),Zu=Ar(null);function Xu(e,t){switch(ca(Vn,t),ca(Vc,e),ca(jr,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?iy(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=iy(t),e=sE(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ma(jr),ca(jr,e)}function dl(){Ma(jr),Ma(Vc),Ma(Vn)}function xp(e){e.memoizedState!==null&&ca(Zu,e);var t=jr.current,a=sE(t,e.type);t!==a&&(ca(Vc,e),ca(jr,a))}function Ku(e){Vc.current===e&&(Ma(jr),Ma(Vc)),Zu.current===e&&(Ma(Zu),td._currentValue=ko)}var yp=Object.prototype.hasOwnProperty,Jg=Ca.unstable_scheduleCallback,Xh=Ca.unstable_cancelCallback,qD=Ca.unstable_shouldYield,BD=Ca.unstable_requestPaint,Er=Ca.unstable_now,UD=Ca.unstable_getCurrentPriorityLevel,qb=Ca.unstable_ImmediatePriority,Bb=Ca.unstable_UserBlockingPriority,Ju=Ca.unstable_NormalPriority,HD=Ca.unstable_LowPriority,Ub=Ca.unstable_IdlePriority,VD=Ca.log,GD=Ca.unstable_setDisableYieldValue,Ed=null,ws=null;function $n(e){if(typeof VD=="function"&&GD(e),ws&&typeof ws.setStrictMode=="function")try{ws.setStrictMode(Ed,e)}catch{}}var js=Math.clz32?Math.clz32:QD,YD=Math.log,WD=Math.LN2;function QD(e){return e>>>=0,e===0?32:31-(YD(e)/WD|0)|0}var ou=256,iu=4194304;function _o(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Vf(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var n=0,o=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var l=s&134217727;return l!==0?(s=l&~o,s!==0?n=_o(s):(i&=l,i!==0?n=_o(i):a||(a=l&~e,a!==0&&(n=_o(a))))):(l=s&~o,l!==0?n=_o(l):i!==0?n=_o(i):a||(a=s&~e,a!==0&&(n=_o(a)))),n===0?0:t!==0&&t!==n&&!(t&o)&&(o=n&-n,a=t&-t,o>=a||o===32&&(a&4194048)!==0)?t:n}function Sd(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ZD(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hb(){var e=ou;return ou<<=1,!(ou&4194048)&&(ou=256),e}function Vb(){var e=iu;return iu<<=1,!(iu&62914560)&&(iu=4194304),e}function Kh(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Nd(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function XD(e,t,a,s,n,o){var i=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var l=e.entanglements,c=e.expirationTimes,d=e.hiddenUpdates;for(a=i&~a;0<a;){var f=31-js(a),h=1<<f;l[f]=0,c[f]=-1;var p=d[f];if(p!==null)for(d[f]=null,f=0;f<p.length;f++){var m=p[f];m!==null&&(m.lane&=-536870913)}a&=~h}s!==0&&Gb(e,s,0),o!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=o&~(i&~t))}function Gb(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-js(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&4194090}function Yb(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-js(a),n=1<<s;n&t|e[s]&t&&(e[s]|=t),a&=~n}}function ev(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function tv(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Wb(){var e=zt.p;return e!==0?e:(e=window.event,e===void 0?32:hE(e.type))}function KD(e,t){var a=zt.p;try{return zt.p=e,t()}finally{zt.p=a}}var io=Math.random().toString(36).slice(2),Ga="__reactFiber$"+io,ds="__reactProps$"+io,zl="__reactContainer$"+io,_p="__reactEvents$"+io,JD="__reactListeners$"+io,eT="__reactHandles$"+io,s0="__reactResources$"+io,Cd="__reactMarker$"+io;function av(e){delete e[Ga],delete e[ds],delete e[_p],delete e[JD],delete e[eT]}function Ri(e){var t=e[Ga];if(t)return t;for(var a=e.parentNode;a;){if(t=a[zl]||a[Ga]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=dy(e);e!==null;){if(a=e[Ga])return a;e=dy(e)}return t}e=a,a=e.parentNode}return null}function Pl(e){if(e=e[Ga]||e[zl]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function yc(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(we(33))}function Bi(e){var t=e[s0];return t||(t=e[s0]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Oa(e){e[Cd]=!0}var Qb=new Set,Zb={};function ai(e,t){ul(e,t),ul(e+"Capture",t)}function ul(e,t){for(Zb[e]=t,e=0;e<t.length;e++)Qb.add(t[e])}var tT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),r0={},n0={};function aT(e){return yp.call(n0,e)?!0:yp.call(r0,e)?!1:tT.test(e)?n0[e]=!0:(r0[e]=!0,!1)}function Ru(e,t,a){if(aT(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function lu(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Ir(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}var Jh,o0;function ji(e){if(Jh===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Jh=t&&t[1]||"",o0=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jh+e+o0}var em=!1;function tm(e,t){if(!e||em)return"";em=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(m){var p=m}Reflect.construct(e,[],h)}else{try{h.call()}catch(m){p=m}e.call(h.prototype)}}else{try{throw Error()}catch(m){p=m}(h=e())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(m){if(m&&p&&typeof m.stack=="string")return[m.stack,p.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=s.DetermineComponentFrameRoot(),i=o[0],l=o[1];if(i&&l){var c=i.split(`
`),d=l.split(`
`);for(n=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;n<d.length&&!d[n].includes("DetermineComponentFrameRoot");)n++;if(s===c.length||n===d.length)for(s=c.length-1,n=d.length-1;1<=s&&0<=n&&c[s]!==d[n];)n--;for(;1<=s&&0<=n;s--,n--)if(c[s]!==d[n]){if(s!==1||n!==1)do if(s--,n--,0>n||c[s]!==d[n]){var f=`
`+c[s].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=s&&0<=n);break}}}finally{em=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ji(a):""}function sT(e){switch(e.tag){case 26:case 27:case 5:return ji(e.type);case 16:return ji("Lazy");case 13:return ji("Suspense");case 19:return ji("SuspenseList");case 0:case 15:return tm(e.type,!1);case 11:return tm(e.type.render,!1);case 1:return tm(e.type,!0);case 31:return ji("Activity");default:return""}}function i0(e){try{var t="";do t+=sT(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Rs(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xb(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rT(e){var t=Xb(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,o=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ef(e){e._valueTracker||(e._valueTracker=rT(e))}function Kb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=Xb(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function tf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var nT=/[\n"\\]/g;function zs(e){return e.replace(nT,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function bp(e,t,a,s,n,o,i,l){e.name="",i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.type=i:e.removeAttribute("type"),t!=null?i==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Rs(t)):e.value!==""+Rs(t)&&(e.value=""+Rs(t)):i!=="submit"&&i!=="reset"||e.removeAttribute("value"),t!=null?wp(e,i,Rs(t)):a!=null?wp(e,i,Rs(a)):s!=null&&e.removeAttribute("value"),n==null&&o!=null&&(e.defaultChecked=!!o),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+Rs(l):e.removeAttribute("name")}function Jb(e,t,a,s,n,o,i,l){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||a!=null){if(!(o!=="submit"&&o!=="reset"||t!=null))return;a=a!=null?""+Rs(a):"",t=t!=null?""+Rs(t):a,l||t===e.value||(e.value=t),e.defaultValue=t}s=s??n,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=l?e.checked:!!s,e.defaultChecked=!!s,i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.name=i)}function wp(e,t,a){t==="number"&&tf(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ui(e,t,a,s){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&s&&(e[a].defaultSelected=!0)}else{for(a=""+Rs(a),t=null,n=0;n<e.length;n++){if(e[n].value===a){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function ew(e,t,a){if(t!=null&&(t=""+Rs(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Rs(a):""}function tw(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(we(92));if(xc(s)){if(1<s.length)throw Error(we(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=Rs(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s)}function fl(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var oT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function l0(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||oT.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function aw(e,t,a){if(t!=null&&typeof t!="object")throw Error(we(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var n in t)s=t[n],t.hasOwnProperty(n)&&a[n]!==s&&l0(e,n,s)}else for(var o in t)t.hasOwnProperty(o)&&l0(e,o,t[o])}function sv(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mu(e){return lT.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var jp=null;function rv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mi=null,Hi=null;function c0(e){var t=Pl(e);if(t&&(e=t.stateNode)){var a=e[ds]||null;e:switch(e=t.stateNode,t.type){case"input":if(bp(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+zs(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var n=s[ds]||null;if(!n)throw Error(we(90));bp(s,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&Kb(s)}break e;case"textarea":ew(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Ui(e,!!a.multiple,t,!1)}}}var am=!1;function sw(e,t,a){if(am)return e(t,a);am=!0;try{var s=e(t);return s}finally{if(am=!1,(Mi!==null||Hi!==null)&&(th(),Mi&&(t=Mi,e=Hi,Hi=Mi=null,c0(t),e)))for(t=0;t<e.length;t++)c0(e[t])}}function Gc(e,t){var a=e.stateNode;if(a===null)return null;var s=a[ds]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(we(231,t,typeof a));return a}var tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ep=!1;if(tn)try{var sc={};Object.defineProperty(sc,"passive",{get:function(){Ep=!0}}),window.addEventListener("test",sc,sc),window.removeEventListener("test",sc,sc)}catch{Ep=!1}var qn=null,nv=null,ku=null;function rw(){if(ku)return ku;var e,t=nv,a=t.length,s,n="value"in qn?qn.value:qn.textContent,o=n.length;for(e=0;e<a&&t[e]===n[e];e++);var i=a-e;for(s=1;s<=i&&t[a-s]===n[o-s];s++);return ku=n.slice(e,1<s?1-s:void 0)}function zu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function cu(){return!0}function d0(){return!1}function fs(e){function t(a,s,n,o,i){this._reactName=a,this._targetInst=n,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(a=e[l],this[l]=a?a(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?cu:d0,this.isPropagationStopped=d0,this}return oa(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=cu)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=cu)},persist:function(){},isPersistent:cu}),t}var si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gf=fs(si),Ad=oa({},si,{view:0,detail:0}),cT=fs(Ad),sm,rm,rc,Yf=oa({},Ad,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ov,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rc&&(rc&&e.type==="mousemove"?(sm=e.screenX-rc.screenX,rm=e.screenY-rc.screenY):rm=sm=0,rc=e),sm)},movementY:function(e){return"movementY"in e?e.movementY:rm}}),u0=fs(Yf),dT=oa({},Yf,{dataTransfer:0}),uT=fs(dT),fT=oa({},Ad,{relatedTarget:0}),nm=fs(fT),hT=oa({},si,{animationName:0,elapsedTime:0,pseudoElement:0}),mT=fs(hT),pT=oa({},si,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gT=fs(pT),vT=oa({},si,{data:0}),f0=fs(vT),xT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_T={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_T[e])?!!t[e]:!1}function ov(){return bT}var wT=oa({},Ad,{key:function(e){if(e.key){var t=xT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ov,charCode:function(e){return e.type==="keypress"?zu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jT=fs(wT),ET=oa({},Yf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),h0=fs(ET),ST=oa({},Ad,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ov}),NT=fs(ST),CT=oa({},si,{propertyName:0,elapsedTime:0,pseudoElement:0}),AT=fs(CT),DT=oa({},Yf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),TT=fs(DT),OT=oa({},si,{newState:0,oldState:0}),RT=fs(OT),MT=[9,13,27,32],iv=tn&&"CompositionEvent"in window,Nc=null;tn&&"documentMode"in document&&(Nc=document.documentMode);var kT=tn&&"TextEvent"in window&&!Nc,nw=tn&&(!iv||Nc&&8<Nc&&11>=Nc),m0=" ",p0=!1;function ow(e,t){switch(e){case"keyup":return MT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iw(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ki=!1;function zT(e,t){switch(e){case"compositionend":return iw(t);case"keypress":return t.which!==32?null:(p0=!0,m0);case"textInput":return e=t.data,e===m0&&p0?null:e;default:return null}}function PT(e,t){if(ki)return e==="compositionend"||!iv&&ow(e,t)?(e=rw(),ku=nv=qn=null,ki=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nw&&t.locale!=="ko"?null:t.data;default:return null}}var IT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!IT[e.type]:t==="textarea"}function lw(e,t,a,s){Mi?Hi?Hi.push(s):Hi=[s]:Mi=s,t=_f(t,"onChange"),0<t.length&&(a=new Gf("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var Cc=null,Yc=null;function LT(e){eE(e,0)}function Wf(e){var t=yc(e);if(Kb(t))return e}function v0(e,t){if(e==="change")return t}var cw=!1;if(tn){var om;if(tn){var im="oninput"in document;if(!im){var x0=document.createElement("div");x0.setAttribute("oninput","return;"),im=typeof x0.oninput=="function"}om=im}else om=!1;cw=om&&(!document.documentMode||9<document.documentMode)}function y0(){Cc&&(Cc.detachEvent("onpropertychange",dw),Yc=Cc=null)}function dw(e){if(e.propertyName==="value"&&Wf(Yc)){var t=[];lw(t,Yc,e,rv(e)),sw(LT,t)}}function FT(e,t,a){e==="focusin"?(y0(),Cc=t,Yc=a,Cc.attachEvent("onpropertychange",dw)):e==="focusout"&&y0()}function $T(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wf(Yc)}function qT(e,t){if(e==="click")return Wf(t)}function BT(e,t){if(e==="input"||e==="change")return Wf(t)}function UT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cs=typeof Object.is=="function"?Object.is:UT;function Wc(e,t){if(Cs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var n=a[s];if(!yp.call(t,n)||!Cs(e[n],t[n]))return!1}return!0}function _0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function b0(e,t){var a=_0(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=_0(a)}}function uw(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?uw(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fw(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=tf(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=tf(e.document)}return t}function lv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var HT=tn&&"documentMode"in document&&11>=document.documentMode,zi=null,Sp=null,Ac=null,Np=!1;function w0(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Np||zi==null||zi!==tf(s)||(s=zi,"selectionStart"in s&&lv(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ac&&Wc(Ac,s)||(Ac=s,s=_f(Sp,"onSelect"),0<s.length&&(t=new Gf("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=zi)))}function vo(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Pi={animationend:vo("Animation","AnimationEnd"),animationiteration:vo("Animation","AnimationIteration"),animationstart:vo("Animation","AnimationStart"),transitionrun:vo("Transition","TransitionRun"),transitionstart:vo("Transition","TransitionStart"),transitioncancel:vo("Transition","TransitionCancel"),transitionend:vo("Transition","TransitionEnd")},lm={},hw={};tn&&(hw=document.createElement("div").style,"AnimationEvent"in window||(delete Pi.animationend.animation,delete Pi.animationiteration.animation,delete Pi.animationstart.animation),"TransitionEvent"in window||delete Pi.transitionend.transition);function ri(e){if(lm[e])return lm[e];if(!Pi[e])return e;var t=Pi[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in hw)return lm[e]=t[a];return e}var mw=ri("animationend"),pw=ri("animationiteration"),gw=ri("animationstart"),VT=ri("transitionrun"),GT=ri("transitionstart"),YT=ri("transitioncancel"),vw=ri("transitionend"),xw=new Map,Cp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cp.push("scrollEnd");function or(e,t){xw.set(e,t),ai(t,[e])}var j0=new WeakMap;function Ps(e,t){if(typeof e=="object"&&e!==null){var a=j0.get(e);return a!==void 0?a:(t={value:e,source:t,stack:i0(t)},j0.set(e,t),t)}return{value:e,source:t,stack:i0(t)}}var Os=[],Ii=0,cv=0;function Qf(){for(var e=Ii,t=cv=Ii=0;t<e;){var a=Os[t];Os[t++]=null;var s=Os[t];Os[t++]=null;var n=Os[t];Os[t++]=null;var o=Os[t];if(Os[t++]=null,s!==null&&n!==null){var i=s.pending;i===null?n.next=n:(n.next=i.next,i.next=n),s.pending=n}o!==0&&yw(a,n,o)}}function Zf(e,t,a,s){Os[Ii++]=e,Os[Ii++]=t,Os[Ii++]=a,Os[Ii++]=s,cv|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function dv(e,t,a,s){return Zf(e,t,a,s),af(e)}function Il(e,t){return Zf(e,null,null,t),af(e)}function yw(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var n=!1,o=e.return;o!==null;)o.childLanes|=a,s=o.alternate,s!==null&&(s.childLanes|=a),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(n=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,n&&t!==null&&(n=31-js(a),e=o.hiddenUpdates,s=e[n],s===null?e[n]=[t]:s.push(t),t.lane=a|536870912),o):null}function af(e){if(50<Lc)throw Lc=0,Wp=null,Error(we(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Li={};function WT(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(e,t,a,s){return new WT(e,t,a,s)}function uv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Jr(e,t){var a=e.alternate;return a===null?(a=bs(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function _w(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Pu(e,t,a,s,n,o){var i=0;if(s=e,typeof e=="function")uv(e)&&(i=1);else if(typeof e=="string")i=Z2(e,a,jr.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case pp:return e=bs(31,a,t,n),e.elementType=pp,e.lanes=o,e;case Ti:return zo(a.children,n,o,t);case Fb:i=8,n|=24;break;case fp:return e=bs(12,a,t,n|2),e.elementType=fp,e.lanes=o,e;case hp:return e=bs(13,a,t,n),e.elementType=hp,e.lanes=o,e;case mp:return e=bs(19,a,t,n),e.elementType=mp,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case LD:case Gr:i=10;break e;case $b:i=9;break e;case Xg:i=11;break e;case Kg:i=14;break e;case Cn:i=16,s=null;break e}i=29,a=Error(we(130,e===null?"null":typeof e,"")),s=null}return t=bs(i,a,t,n),t.elementType=e,t.type=s,t.lanes=o,t}function zo(e,t,a,s){return e=bs(7,e,s,t),e.lanes=a,e}function cm(e,t,a){return e=bs(6,e,null,t),e.lanes=a,e}function dm(e,t,a){return t=bs(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Fi=[],$i=0,sf=null,rf=0,Ms=[],ks=0,Po=null,Yr=1,Wr="";function bo(e,t){Fi[$i++]=rf,Fi[$i++]=sf,sf=e,rf=t}function bw(e,t,a){Ms[ks++]=Yr,Ms[ks++]=Wr,Ms[ks++]=Po,Po=e;var s=Yr;e=Wr;var n=32-js(s)-1;s&=~(1<<n),a+=1;var o=32-js(t)+n;if(30<o){var i=n-n%5;o=(s&(1<<i)-1).toString(32),s>>=i,n-=i,Yr=1<<32-js(t)+n|a<<n|s,Wr=o+e}else Yr=1<<o|a<<n|s,Wr=e}function fv(e){e.return!==null&&(bo(e,1),bw(e,1,0))}function hv(e){for(;e===sf;)sf=Fi[--$i],Fi[$i]=null,rf=Fi[--$i],Fi[$i]=null;for(;e===Po;)Po=Ms[--ks],Ms[ks]=null,Wr=Ms[--ks],Ms[ks]=null,Yr=Ms[--ks],Ms[ks]=null}var Ka=null,ga=null,kt=!1,Io=null,gr=!1,Ap=Error(we(519));function Uo(e){var t=Error(we(418,""));throw Qc(Ps(t,e)),Ap}function E0(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[Ga]=e,t[ds]=s,a){case"dialog":xt("cancel",t),xt("close",t);break;case"iframe":case"object":case"embed":xt("load",t);break;case"video":case"audio":for(a=0;a<Kc.length;a++)xt(Kc[a],t);break;case"source":xt("error",t);break;case"img":case"image":case"link":xt("error",t),xt("load",t);break;case"details":xt("toggle",t);break;case"input":xt("invalid",t),Jb(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),ef(t);break;case"select":xt("invalid",t);break;case"textarea":xt("invalid",t),tw(t,s.value,s.defaultValue,s.children),ef(t)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||aE(t.textContent,a)?(s.popover!=null&&(xt("beforetoggle",t),xt("toggle",t)),s.onScroll!=null&&xt("scroll",t),s.onScrollEnd!=null&&xt("scrollend",t),s.onClick!=null&&(t.onclick=rh),t=!0):t=!1,t||Uo(e)}function S0(e){for(Ka=e.return;Ka;)switch(Ka.tag){case 5:case 13:gr=!1;return;case 27:case 3:gr=!0;return;default:Ka=Ka.return}}function nc(e){if(e!==Ka)return!1;if(!kt)return S0(e),kt=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||eg(e.type,e.memoizedProps)),a=!a),a&&ga&&Uo(e),S0(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(we(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){ga=tr(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}ga=null}}else t===27?(t=ga,lo(e.type)?(e=sg,sg=null,ga=e):ga=t):ga=Ka?tr(e.stateNode.nextSibling):null;return!0}function Dd(){ga=Ka=null,kt=!1}function N0(){var e=Io;return e!==null&&(is===null?is=e:is.push.apply(is,e),Io=null),e}function Qc(e){Io===null?Io=[e]:Io.push(e)}var Dp=Ar(null),ni=null,Qr=null;function Tn(e,t,a){ca(Dp,t._currentValue),t._currentValue=a}function en(e){e._currentValue=Dp.current,Ma(Dp)}function Tp(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function Op(e,t,a,s){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var o=n.dependencies;if(o!==null){var i=n.child;o=o.firstContext;e:for(;o!==null;){var l=o;o=n;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=a,l=o.alternate,l!==null&&(l.lanes|=a),Tp(o.return,a,e),s||(i=null);break e}o=l.next}}else if(n.tag===18){if(i=n.return,i===null)throw Error(we(341));i.lanes|=a,o=i.alternate,o!==null&&(o.lanes|=a),Tp(i,a,e),i=null}else i=n.child;if(i!==null)i.return=n;else for(i=n;i!==null;){if(i===e){i=null;break}if(n=i.sibling,n!==null){n.return=i.return,i=n;break}i=i.return}n=i}}function Td(e,t,a,s){e=null;for(var n=t,o=!1;n!==null;){if(!o){if(n.flags&524288)o=!0;else if(n.flags&262144)break}if(n.tag===10){var i=n.alternate;if(i===null)throw Error(we(387));if(i=i.memoizedProps,i!==null){var l=n.type;Cs(n.pendingProps.value,i.value)||(e!==null?e.push(l):e=[l])}}else if(n===Zu.current){if(i=n.alternate,i===null)throw Error(we(387));i.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(td):e=[td])}n=n.return}e!==null&&Op(t,e,a,s),t.flags|=262144}function nf(e){for(e=e.firstContext;e!==null;){if(!Cs(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ho(e){ni=e,Qr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ya(e){return ww(ni,e)}function du(e,t){return ni===null&&Ho(e),ww(e,t)}function ww(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Qr===null){if(e===null)throw Error(we(308));Qr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Qr=Qr.next=t;return a}var QT=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},ZT=Ca.unstable_scheduleCallback,XT=Ca.unstable_NormalPriority,Sa={$$typeof:Gr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mv(){return{controller:new QT,data:new Map,refCount:0}}function Od(e){e.refCount--,e.refCount===0&&ZT(XT,function(){e.controller.abort()})}var Dc=null,Rp=0,hl=0,Vi=null;function KT(e,t){if(Dc===null){var a=Dc=[];Rp=0,hl=Iv(),Vi={status:"pending",value:void 0,then:function(s){a.push(s)}}}return Rp++,t.then(C0,C0),t}function C0(){if(--Rp===0&&Dc!==null){Vi!==null&&(Vi.status="fulfilled");var e=Dc;Dc=null,hl=0,Vi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function JT(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(n){a.push(n)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var n=0;n<a.length;n++)(0,a[n])(t)},function(n){for(s.status="rejected",s.reason=n,n=0;n<a.length;n++)(0,a[n])(void 0)}),s}var A0=Xe.S;Xe.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&KT(e,t),A0!==null&&A0(e,t)};var Lo=Ar(null);function pv(){var e=Lo.current;return e!==null?e:ta.pooledCache}function Iu(e,t){t===null?ca(Lo,Lo.current):ca(Lo,t.pool)}function jw(){var e=pv();return e===null?null:{parent:Sa._currentValue,pool:e}}var Rd=Error(we(460)),Ew=Error(we(474)),Xf=Error(we(542)),Mp={then:function(){}};function D0(e){return e=e.status,e==="fulfilled"||e==="rejected"}function uu(){}function Sw(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(uu,uu),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,O0(e),e;default:if(typeof t.status=="string")t.then(uu,uu);else{if(e=ta,e!==null&&100<e.shellSuspendCounter)throw Error(we(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=s}},function(s){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,O0(e),e}throw Tc=t,Rd}}var Tc=null;function T0(){if(Tc===null)throw Error(we(459));var e=Tc;return Tc=null,e}function O0(e){if(e===Rd||e===Xf)throw Error(we(483))}var An=!1;function gv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Gn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Yn(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Vt&2){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,t=af(e),yw(e,null,a),t}return Zf(e,s,t,a),af(e)}function Oc(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Yb(e,a)}}function um(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var n=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var i={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};o===null?n=o=i:o=o.next=i,a=a.next}while(a!==null);o===null?n=o=t:o=o.next=t}else n=o=t;a={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var zp=!1;function Rc(){if(zp){var e=Vi;if(e!==null)throw e}}function Mc(e,t,a,s){zp=!1;var n=e.updateQueue;An=!1;var o=n.firstBaseUpdate,i=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==i&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(o!==null){var h=n.baseState;i=0,f=d=c=null,l=o;do{var p=l.lane&-536870913,m=p!==l.lane;if(m?(St&p)===p:(s&p)===p){p!==0&&p===hl&&(zp=!0),f!==null&&(f=f.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var b=e,y=l;p=t;var _=a;switch(y.tag){case 1:if(b=y.payload,typeof b=="function"){h=b.call(_,h,p);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,p=typeof b=="function"?b.call(_,h,p):b,p==null)break e;h=oa({},h,p);break e;case 2:An=!0}}p=l.callback,p!==null&&(e.flags|=64,m&&(e.flags|=8192),m=n.callbacks,m===null?n.callbacks=[p]:m.push(p))}else m={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=m,c=h):f=f.next=m,i|=p;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;m=l,l=m.next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}while(!0);f===null&&(c=h),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=f,o===null&&(n.shared.lanes=0),so|=i,e.lanes=i,e.memoizedState=h}}function Nw(e,t){if(typeof e!="function")throw Error(we(191,e));e.call(t)}function Cw(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Nw(a[e],t)}var ml=Ar(null),of=Ar(0);function R0(e,t){e=rn,ca(of,e),ca(ml,t),rn=e|t.baseLanes}function Pp(){ca(of,rn),ca(ml,ml.current)}function vv(){rn=of.current,Ma(ml),Ma(of)}var to=0,ht=null,Qt=null,wa=null,lf=!1,Gi=!1,Vo=!1,cf=0,Zc=0,Yi=null,e2=0;function ya(){throw Error(we(321))}function xv(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Cs(e[a],t[a]))return!1;return!0}function yv(e,t,a,s,n,o){return to=o,ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xe.H=e===null||e.memoizedState===null?rj:nj,Vo=!1,o=a(s,n),Vo=!1,Gi&&(o=Dw(t,a,s,n)),Aw(e),o}function Aw(e){Xe.H=df;var t=Qt!==null&&Qt.next!==null;if(to=0,wa=Qt=ht=null,lf=!1,Zc=0,Yi=null,t)throw Error(we(300));e===null||Ra||(e=e.dependencies,e!==null&&nf(e)&&(Ra=!0))}function Dw(e,t,a,s){ht=e;var n=0;do{if(Gi&&(Yi=null),Zc=0,Gi=!1,25<=n)throw Error(we(301));if(n+=1,wa=Qt=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}Xe.H=i2,o=t(a,s)}while(Gi);return o}function t2(){var e=Xe.H,t=e.useState()[0];return t=typeof t.then=="function"?Md(t):t,e=e.useState()[0],(Qt!==null?Qt.memoizedState:null)!==e&&(ht.flags|=1024),t}function _v(){var e=cf!==0;return cf=0,e}function bv(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function wv(e){if(lf){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}lf=!1}to=0,wa=Qt=ht=null,Gi=!1,Zc=cf=0,Yi=null}function ns(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wa===null?ht.memoizedState=wa=e:wa=wa.next=e,wa}function ja(){if(Qt===null){var e=ht.alternate;e=e!==null?e.memoizedState:null}else e=Qt.next;var t=wa===null?ht.memoizedState:wa.next;if(t!==null)wa=t,Qt=e;else{if(e===null)throw ht.alternate===null?Error(we(467)):Error(we(310));Qt=e,e={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},wa===null?ht.memoizedState=wa=e:wa=wa.next=e}return wa}function jv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Md(e){var t=Zc;return Zc+=1,Yi===null&&(Yi=[]),e=Sw(Yi,e,t),t=ht,(wa===null?t.memoizedState:wa.next)===null&&(t=t.alternate,Xe.H=t===null||t.memoizedState===null?rj:nj),e}function Kf(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Md(e);if(e.$$typeof===Gr)return Ya(e)}throw Error(we(438,String(e)))}function Ev(e){var t=null,a=ht.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=ht.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=jv(),ht.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=FD;return t.index++,a}function an(e,t){return typeof t=="function"?t(e):t}function Lu(e){var t=ja();return Sv(t,Qt,e)}function Sv(e,t,a){var s=e.queue;if(s===null)throw Error(we(311));s.lastRenderedReducer=a;var n=e.baseQueue,o=s.pending;if(o!==null){if(n!==null){var i=n.next;n.next=o.next,o.next=i}t.baseQueue=n=o,s.pending=null}if(o=e.baseState,n===null)e.memoizedState=o;else{t=n.next;var l=i=null,c=null,d=t,f=!1;do{var h=d.lane&-536870913;if(h!==d.lane?(St&h)===h:(to&h)===h){var p=d.revertLane;if(p===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===hl&&(f=!0);else if((to&p)===p){d=d.next,p===hl&&(f=!0);continue}else h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=h,i=o):c=c.next=h,ht.lanes|=p,so|=p;h=d.action,Vo&&a(o,h),o=d.hasEagerState?d.eagerState:a(o,h)}else p={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=p,i=o):c=c.next=p,ht.lanes|=h,so|=h;d=d.next}while(d!==null&&d!==t);if(c===null?i=o:c.next=l,!Cs(o,e.memoizedState)&&(Ra=!0,f&&(a=Vi,a!==null)))throw a;e.memoizedState=o,e.baseState=i,e.baseQueue=c,s.lastRenderedState=o}return n===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function fm(e){var t=ja(),a=t.queue;if(a===null)throw Error(we(311));a.lastRenderedReducer=e;var s=a.dispatch,n=a.pending,o=t.memoizedState;if(n!==null){a.pending=null;var i=n=n.next;do o=e(o,i.action),i=i.next;while(i!==n);Cs(o,t.memoizedState)||(Ra=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),a.lastRenderedState=o}return[o,s]}function Tw(e,t,a){var s=ht,n=ja(),o=kt;if(o){if(a===void 0)throw Error(we(407));a=a()}else a=t();var i=!Cs((Qt||n).memoizedState,a);i&&(n.memoizedState=a,Ra=!0),n=n.queue;var l=Mw.bind(null,s,n,e);if(kd(2048,8,l,[e]),n.getSnapshot!==t||i||wa!==null&&wa.memoizedState.tag&1){if(s.flags|=2048,pl(9,Jf(),Rw.bind(null,s,n,a,t),null),ta===null)throw Error(we(349));o||to&124||Ow(s,t,a)}return a}function Ow(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ht.updateQueue,t===null?(t=jv(),ht.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Rw(e,t,a,s){t.value=a,t.getSnapshot=s,kw(t)&&zw(e)}function Mw(e,t,a){return a(function(){kw(t)&&zw(e)})}function kw(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Cs(e,a)}catch{return!0}}function zw(e){var t=Il(e,2);t!==null&&Ss(t,e,2)}function Ip(e){var t=ns();if(typeof e=="function"){var a=e;if(e=a(),Vo){$n(!0);try{a()}finally{$n(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:an,lastRenderedState:e},t}function Pw(e,t,a,s){return e.baseState=a,Sv(e,Qt,typeof s=="function"?s:an)}function a2(e,t,a,s,n){if(eh(e))throw Error(we(485));if(e=t.action,e!==null){var o={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(i){o.listeners.push(i)}};Xe.T!==null?a(!0):o.isTransition=!1,s(o),a=t.pending,a===null?(o.next=t.pending=o,Iw(t,o)):(o.next=a.next,t.pending=a.next=o)}}function Iw(e,t){var a=t.action,s=t.payload,n=e.state;if(t.isTransition){var o=Xe.T,i={};Xe.T=i;try{var l=a(n,s),c=Xe.S;c!==null&&c(i,l),M0(e,t,l)}catch(d){Lp(e,t,d)}finally{Xe.T=o}}else try{o=a(n,s),M0(e,t,o)}catch(d){Lp(e,t,d)}}function M0(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){k0(e,t,s)},function(s){return Lp(e,t,s)}):k0(e,t,a)}function k0(e,t,a){t.status="fulfilled",t.value=a,Lw(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Iw(e,a)))}function Lp(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,Lw(t),t=t.next;while(t!==s)}e.action=null}function Lw(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Fw(e,t){return t}function z0(e,t){if(kt){var a=ta.formState;if(a!==null){e:{var s=ht;if(kt){if(ga){t:{for(var n=ga,o=gr;n.nodeType!==8;){if(!o){n=null;break t}if(n=tr(n.nextSibling),n===null){n=null;break t}}o=n.data,n=o==="F!"||o==="F"?n:null}if(n){ga=tr(n.nextSibling),s=n.data==="F!";break e}}Uo(s)}s=!1}s&&(t=a[0])}}return a=ns(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fw,lastRenderedState:t},a.queue=s,a=tj.bind(null,ht,s),s.dispatch=a,s=Ip(!1),o=Dv.bind(null,ht,!1,s.queue),s=ns(),n={state:t,dispatch:null,action:e,pending:null},s.queue=n,a=a2.bind(null,ht,n,o,a),n.dispatch=a,s.memoizedState=e,[t,a,!1]}function P0(e){var t=ja();return $w(t,Qt,e)}function $w(e,t,a){if(t=Sv(e,t,Fw)[0],e=Lu(an)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Md(t)}catch(i){throw i===Rd?Xf:i}else s=t;t=ja();var n=t.queue,o=n.dispatch;return a!==t.memoizedState&&(ht.flags|=2048,pl(9,Jf(),s2.bind(null,n,a),null)),[s,o,e]}function s2(e,t){e.action=t}function I0(e){var t=ja(),a=Qt;if(a!==null)return $w(t,a,e);ja(),t=t.memoizedState,a=ja();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function pl(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=ht.updateQueue,t===null&&(t=jv(),ht.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Jf(){return{destroy:void 0,resource:void 0}}function qw(){return ja().memoizedState}function Fu(e,t,a,s){var n=ns();s=s===void 0?null:s,ht.flags|=e,n.memoizedState=pl(1|t,Jf(),a,s)}function kd(e,t,a,s){var n=ja();s=s===void 0?null:s;var o=n.memoizedState.inst;Qt!==null&&s!==null&&xv(s,Qt.memoizedState.deps)?n.memoizedState=pl(t,o,a,s):(ht.flags|=e,n.memoizedState=pl(1|t,o,a,s))}function L0(e,t){Fu(8390656,8,e,t)}function Bw(e,t){kd(2048,8,e,t)}function Uw(e,t){return kd(4,2,e,t)}function Hw(e,t){return kd(4,4,e,t)}function Vw(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gw(e,t,a){a=a!=null?a.concat([e]):null,kd(4,4,Vw.bind(null,t,e),a)}function Nv(){}function Yw(e,t){var a=ja();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&xv(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function Ww(e,t){var a=ja();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&xv(t,s[1]))return s[0];if(s=e(),Vo){$n(!0);try{e()}finally{$n(!1)}}return a.memoizedState=[s,t],s}function Cv(e,t,a){return a===void 0||to&1073741824?e.memoizedState=t:(e.memoizedState=a,e=Lj(),ht.lanes|=e,so|=e,a)}function Qw(e,t,a,s){return Cs(a,t)?a:ml.current!==null?(e=Cv(e,a,s),Cs(e,t)||(Ra=!0),e):to&42?(e=Lj(),ht.lanes|=e,so|=e,t):(Ra=!0,e.memoizedState=a)}function Zw(e,t,a,s,n){var o=zt.p;zt.p=o!==0&&8>o?o:8;var i=Xe.T,l={};Xe.T=l,Dv(e,!1,t,a);try{var c=n(),d=Xe.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=JT(c,s);kc(e,t,f,Es(e))}else kc(e,t,s,Es(e))}catch(h){kc(e,t,{then:function(){},status:"rejected",reason:h},Es())}finally{zt.p=o,Xe.T=i}}function r2(){}function Fp(e,t,a,s){if(e.tag!==5)throw Error(we(476));var n=Xw(e).queue;Zw(e,n,t,ko,a===null?r2:function(){return Kw(e),a(s)})}function Xw(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ko,baseState:ko,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:an,lastRenderedState:ko},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:an,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Kw(e){var t=Xw(e).next.queue;kc(e,t,{},Es())}function Av(){return Ya(td)}function Jw(){return ja().memoizedState}function ej(){return ja().memoizedState}function n2(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Es();e=Gn(a);var s=Yn(t,e,a);s!==null&&(Ss(s,t,a),Oc(s,t,a)),t={cache:mv()},e.payload=t;return}t=t.return}}function o2(e,t,a){var s=Es();a={lane:s,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},eh(e)?aj(t,a):(a=dv(e,t,a,s),a!==null&&(Ss(a,e,s),sj(a,t,s)))}function tj(e,t,a){var s=Es();kc(e,t,a,s)}function kc(e,t,a,s){var n={lane:s,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(eh(e))aj(t,n);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,a);if(n.hasEagerState=!0,n.eagerState=l,Cs(l,i))return Zf(e,t,n,0),ta===null&&Qf(),!1}catch{}finally{}if(a=dv(e,t,n,s),a!==null)return Ss(a,e,s),sj(a,t,s),!0}return!1}function Dv(e,t,a,s){if(s={lane:2,revertLane:Iv(),action:s,hasEagerState:!1,eagerState:null,next:null},eh(e)){if(t)throw Error(we(479))}else t=dv(e,a,s,2),t!==null&&Ss(t,e,2)}function eh(e){var t=e.alternate;return e===ht||t!==null&&t===ht}function aj(e,t){Gi=lf=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function sj(e,t,a){if(a&4194048){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Yb(e,a)}}var df={readContext:Ya,use:Kf,useCallback:ya,useContext:ya,useEffect:ya,useImperativeHandle:ya,useLayoutEffect:ya,useInsertionEffect:ya,useMemo:ya,useReducer:ya,useRef:ya,useState:ya,useDebugValue:ya,useDeferredValue:ya,useTransition:ya,useSyncExternalStore:ya,useId:ya,useHostTransitionStatus:ya,useFormState:ya,useActionState:ya,useOptimistic:ya,useMemoCache:ya,useCacheRefresh:ya},rj={readContext:Ya,use:Kf,useCallback:function(e,t){return ns().memoizedState=[e,t===void 0?null:t],e},useContext:Ya,useEffect:L0,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Fu(4194308,4,Vw.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Fu(4194308,4,e,t)},useInsertionEffect:function(e,t){Fu(4,2,e,t)},useMemo:function(e,t){var a=ns();t=t===void 0?null:t;var s=e();if(Vo){$n(!0);try{e()}finally{$n(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=ns();if(a!==void 0){var n=a(t);if(Vo){$n(!0);try{a(t)}finally{$n(!1)}}}else n=t;return s.memoizedState=s.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=o2.bind(null,ht,e),[s.memoizedState,e]},useRef:function(e){var t=ns();return e={current:e},t.memoizedState=e},useState:function(e){e=Ip(e);var t=e.queue,a=tj.bind(null,ht,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Nv,useDeferredValue:function(e,t){var a=ns();return Cv(a,e,t)},useTransition:function(){var e=Ip(!1);return e=Zw.bind(null,ht,e.queue,!0,!1),ns().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=ht,n=ns();if(kt){if(a===void 0)throw Error(we(407));a=a()}else{if(a=t(),ta===null)throw Error(we(349));St&124||Ow(s,t,a)}n.memoizedState=a;var o={value:a,getSnapshot:t};return n.queue=o,L0(Mw.bind(null,s,o,e),[e]),s.flags|=2048,pl(9,Jf(),Rw.bind(null,s,o,a,t),null),a},useId:function(){var e=ns(),t=ta.identifierPrefix;if(kt){var a=Wr,s=Yr;a=(s&~(1<<32-js(s)-1)).toString(32)+a,t=""+t+"R"+a,a=cf++,0<a&&(t+="H"+a.toString(32)),t+=""}else a=e2++,t=""+t+"r"+a.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Av,useFormState:z0,useActionState:z0,useOptimistic:function(e){var t=ns();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Dv.bind(null,ht,!0,a),a.dispatch=t,[e,t]},useMemoCache:Ev,useCacheRefresh:function(){return ns().memoizedState=n2.bind(null,ht)}},nj={readContext:Ya,use:Kf,useCallback:Yw,useContext:Ya,useEffect:Bw,useImperativeHandle:Gw,useInsertionEffect:Uw,useLayoutEffect:Hw,useMemo:Ww,useReducer:Lu,useRef:qw,useState:function(){return Lu(an)},useDebugValue:Nv,useDeferredValue:function(e,t){var a=ja();return Qw(a,Qt.memoizedState,e,t)},useTransition:function(){var e=Lu(an)[0],t=ja().memoizedState;return[typeof e=="boolean"?e:Md(e),t]},useSyncExternalStore:Tw,useId:Jw,useHostTransitionStatus:Av,useFormState:P0,useActionState:P0,useOptimistic:function(e,t){var a=ja();return Pw(a,Qt,e,t)},useMemoCache:Ev,useCacheRefresh:ej},i2={readContext:Ya,use:Kf,useCallback:Yw,useContext:Ya,useEffect:Bw,useImperativeHandle:Gw,useInsertionEffect:Uw,useLayoutEffect:Hw,useMemo:Ww,useReducer:fm,useRef:qw,useState:function(){return fm(an)},useDebugValue:Nv,useDeferredValue:function(e,t){var a=ja();return Qt===null?Cv(a,e,t):Qw(a,Qt.memoizedState,e,t)},useTransition:function(){var e=fm(an)[0],t=ja().memoizedState;return[typeof e=="boolean"?e:Md(e),t]},useSyncExternalStore:Tw,useId:Jw,useHostTransitionStatus:Av,useFormState:I0,useActionState:I0,useOptimistic:function(e,t){var a=ja();return Qt!==null?Pw(a,Qt,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ev,useCacheRefresh:ej},Wi=null,Xc=0;function fu(e){var t=Xc;return Xc+=1,Wi===null&&(Wi=[]),Sw(Wi,e,t)}function oc(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function hu(e,t){throw t.$$typeof===ID?Error(we(525)):(e=Object.prototype.toString.call(t),Error(we(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function F0(e){var t=e._init;return t(e._payload)}function oj(e){function t(x,v){if(e){var g=x.deletions;g===null?(x.deletions=[v],x.flags|=16):g.push(v)}}function a(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function s(x){for(var v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function n(x,v){return x=Jr(x,v),x.index=0,x.sibling=null,x}function o(x,v,g){return x.index=g,e?(g=x.alternate,g!==null?(g=g.index,g<v?(x.flags|=67108866,v):g):(x.flags|=67108866,v)):(x.flags|=1048576,v)}function i(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function l(x,v,g,E){return v===null||v.tag!==6?(v=cm(g,x.mode,E),v.return=x,v):(v=n(v,g),v.return=x,v)}function c(x,v,g,E){var j=g.type;return j===Ti?f(x,v,g.props.children,E,g.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Cn&&F0(j)===v.type)?(v=n(v,g.props),oc(v,g),v.return=x,v):(v=Pu(g.type,g.key,g.props,null,x.mode,E),oc(v,g),v.return=x,v)}function d(x,v,g,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==g.containerInfo||v.stateNode.implementation!==g.implementation?(v=dm(g,x.mode,E),v.return=x,v):(v=n(v,g.children||[]),v.return=x,v)}function f(x,v,g,E,j){return v===null||v.tag!==7?(v=zo(g,x.mode,E,j),v.return=x,v):(v=n(v,g),v.return=x,v)}function h(x,v,g){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=cm(""+v,x.mode,g),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case nu:return g=Pu(v.type,v.key,v.props,null,x.mode,g),oc(g,v),g.return=x,g;case vc:return v=dm(v,x.mode,g),v.return=x,v;case Cn:var E=v._init;return v=E(v._payload),h(x,v,g)}if(xc(v)||ac(v))return v=zo(v,x.mode,g,null),v.return=x,v;if(typeof v.then=="function")return h(x,fu(v),g);if(v.$$typeof===Gr)return h(x,du(x,v),g);hu(x,v)}return null}function p(x,v,g,E){var j=v!==null?v.key:null;if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return j!==null?null:l(x,v,""+g,E);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case nu:return g.key===j?c(x,v,g,E):null;case vc:return g.key===j?d(x,v,g,E):null;case Cn:return j=g._init,g=j(g._payload),p(x,v,g,E)}if(xc(g)||ac(g))return j!==null?null:f(x,v,g,E,null);if(typeof g.then=="function")return p(x,v,fu(g),E);if(g.$$typeof===Gr)return p(x,v,du(x,g),E);hu(x,g)}return null}function m(x,v,g,E,j){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return x=x.get(g)||null,l(v,x,""+E,j);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case nu:return x=x.get(E.key===null?g:E.key)||null,c(v,x,E,j);case vc:return x=x.get(E.key===null?g:E.key)||null,d(v,x,E,j);case Cn:var S=E._init;return E=S(E._payload),m(x,v,g,E,j)}if(xc(E)||ac(E))return x=x.get(g)||null,f(v,x,E,j,null);if(typeof E.then=="function")return m(x,v,g,fu(E),j);if(E.$$typeof===Gr)return m(x,v,g,du(v,E),j);hu(v,E)}return null}function b(x,v,g,E){for(var j=null,S=null,N=v,R=v=0,T=null;N!==null&&R<g.length;R++){N.index>R?(T=N,N=null):T=N.sibling;var F=p(x,N,g[R],E);if(F===null){N===null&&(N=T);break}e&&N&&F.alternate===null&&t(x,N),v=o(F,v,R),S===null?j=F:S.sibling=F,S=F,N=T}if(R===g.length)return a(x,N),kt&&bo(x,R),j;if(N===null){for(;R<g.length;R++)N=h(x,g[R],E),N!==null&&(v=o(N,v,R),S===null?j=N:S.sibling=N,S=N);return kt&&bo(x,R),j}for(N=s(N);R<g.length;R++)T=m(N,x,R,g[R],E),T!==null&&(e&&T.alternate!==null&&N.delete(T.key===null?R:T.key),v=o(T,v,R),S===null?j=T:S.sibling=T,S=T);return e&&N.forEach(function(U){return t(x,U)}),kt&&bo(x,R),j}function y(x,v,g,E){if(g==null)throw Error(we(151));for(var j=null,S=null,N=v,R=v=0,T=null,F=g.next();N!==null&&!F.done;R++,F=g.next()){N.index>R?(T=N,N=null):T=N.sibling;var U=p(x,N,F.value,E);if(U===null){N===null&&(N=T);break}e&&N&&U.alternate===null&&t(x,N),v=o(U,v,R),S===null?j=U:S.sibling=U,S=U,N=T}if(F.done)return a(x,N),kt&&bo(x,R),j;if(N===null){for(;!F.done;R++,F=g.next())F=h(x,F.value,E),F!==null&&(v=o(F,v,R),S===null?j=F:S.sibling=F,S=F);return kt&&bo(x,R),j}for(N=s(N);!F.done;R++,F=g.next())F=m(N,x,R,F.value,E),F!==null&&(e&&F.alternate!==null&&N.delete(F.key===null?R:F.key),v=o(F,v,R),S===null?j=F:S.sibling=F,S=F);return e&&N.forEach(function(Z){return t(x,Z)}),kt&&bo(x,R),j}function _(x,v,g,E){if(typeof g=="object"&&g!==null&&g.type===Ti&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case nu:e:{for(var j=g.key;v!==null;){if(v.key===j){if(j=g.type,j===Ti){if(v.tag===7){a(x,v.sibling),E=n(v,g.props.children),E.return=x,x=E;break e}}else if(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Cn&&F0(j)===v.type){a(x,v.sibling),E=n(v,g.props),oc(E,g),E.return=x,x=E;break e}a(x,v);break}else t(x,v);v=v.sibling}g.type===Ti?(E=zo(g.props.children,x.mode,E,g.key),E.return=x,x=E):(E=Pu(g.type,g.key,g.props,null,x.mode,E),oc(E,g),E.return=x,x=E)}return i(x);case vc:e:{for(j=g.key;v!==null;){if(v.key===j)if(v.tag===4&&v.stateNode.containerInfo===g.containerInfo&&v.stateNode.implementation===g.implementation){a(x,v.sibling),E=n(v,g.children||[]),E.return=x,x=E;break e}else{a(x,v);break}else t(x,v);v=v.sibling}E=dm(g,x.mode,E),E.return=x,x=E}return i(x);case Cn:return j=g._init,g=j(g._payload),_(x,v,g,E)}if(xc(g))return b(x,v,g,E);if(ac(g)){if(j=ac(g),typeof j!="function")throw Error(we(150));return g=j.call(g),y(x,v,g,E)}if(typeof g.then=="function")return _(x,v,fu(g),E);if(g.$$typeof===Gr)return _(x,v,du(x,g),E);hu(x,g)}return typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint"?(g=""+g,v!==null&&v.tag===6?(a(x,v.sibling),E=n(v,g),E.return=x,x=E):(a(x,v),E=cm(g,x.mode,E),E.return=x,x=E),i(x)):a(x,v)}return function(x,v,g,E){try{Xc=0;var j=_(x,v,g,E);return Wi=null,j}catch(N){if(N===Rd||N===Xf)throw N;var S=bs(29,N,null,x.mode);return S.lanes=E,S.return=x,S}finally{}}}var gl=oj(!0),ij=oj(!1),Fs=Ar(null),Sr=null;function On(e){var t=e.alternate;ca(Na,Na.current&1),ca(Fs,e),Sr===null&&(t===null||ml.current!==null||t.memoizedState!==null)&&(Sr=e)}function lj(e){if(e.tag===22){if(ca(Na,Na.current),ca(Fs,e),Sr===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Sr=e)}}else Rn()}function Rn(){ca(Na,Na.current),ca(Fs,Fs.current)}function Zr(e){Ma(Fs),Sr===e&&(Sr=null),Ma(Na)}var Na=Ar(0);function uf(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||ag(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hm(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:oa({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var $p={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=Es(),n=Gn(s);n.payload=t,a!=null&&(n.callback=a),t=Yn(e,n,s),t!==null&&(Ss(t,e,s),Oc(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=Es(),n=Gn(s);n.tag=1,n.payload=t,a!=null&&(n.callback=a),t=Yn(e,n,s),t!==null&&(Ss(t,e,s),Oc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Es(),s=Gn(a);s.tag=2,t!=null&&(s.callback=t),t=Yn(e,s,a),t!==null&&(Ss(t,e,a),Oc(t,e,a))}};function $0(e,t,a,s,n,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,i):t.prototype&&t.prototype.isPureReactComponent?!Wc(a,s)||!Wc(n,o):!0}function q0(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&$p.enqueueReplaceState(t,t.state,null)}function Go(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=oa({},a));for(var n in e)a[n]===void 0&&(a[n]=e[n])}return a}var ff=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function cj(e){ff(e)}function dj(e){console.error(e)}function uj(e){ff(e)}function hf(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function B0(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function qp(e,t,a){return a=Gn(a),a.tag=3,a.payload={element:null},a.callback=function(){hf(e,t)},a}function fj(e){return e=Gn(e),e.tag=3,e}function hj(e,t,a,s){var n=a.type.getDerivedStateFromError;if(typeof n=="function"){var o=s.value;e.payload=function(){return n(o)},e.callback=function(){B0(t,a,s)}}var i=a.stateNode;i!==null&&typeof i.componentDidCatch=="function"&&(e.callback=function(){B0(t,a,s),typeof n!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function l2(e,t,a,s,n){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&Td(t,a,n,!0),a=Fs.current,a!==null){switch(a.tag){case 13:return Sr===null?Qp():a.alternate===null&&va===0&&(va=3),a.flags&=-257,a.flags|=65536,a.lanes=n,s===Mp?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),Em(e,s,n)),!1;case 22:return a.flags|=65536,s===Mp?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),Em(e,s,n)),!1}throw Error(we(435,a.tag))}return Em(e,s,n),Qp(),!1}if(kt)return t=Fs.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=n,s!==Ap&&(e=Error(we(422),{cause:s}),Qc(Ps(e,a)))):(s!==Ap&&(t=Error(we(423),{cause:s}),Qc(Ps(t,a))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,s=Ps(s,a),n=qp(e.stateNode,s,n),um(e,n),va!==4&&(va=2)),!1;var o=Error(we(520),{cause:s});if(o=Ps(o,a),Ic===null?Ic=[o]:Ic.push(o),va!==4&&(va=2),t===null)return!0;s=Ps(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=n&-n,a.lanes|=e,e=qp(a.stateNode,s,e),um(a,e),!1;case 1:if(t=a.type,o=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(Wn===null||!Wn.has(o))))return a.flags|=65536,n&=-n,a.lanes|=n,n=fj(n),hj(n,e,a,s),um(a,n),!1}a=a.return}while(a!==null);return!1}var mj=Error(we(461)),Ra=!1;function Pa(e,t,a,s){t.child=e===null?ij(t,null,a,s):gl(t,e.child,a,s)}function U0(e,t,a,s,n){a=a.render;var o=t.ref;if("ref"in s){var i={};for(var l in s)l!=="ref"&&(i[l]=s[l])}else i=s;return Ho(t),s=yv(e,t,a,i,o,n),l=_v(),e!==null&&!Ra?(bv(e,t,n),sn(e,t,n)):(kt&&l&&fv(t),t.flags|=1,Pa(e,t,s,n),t.child)}function H0(e,t,a,s,n){if(e===null){var o=a.type;return typeof o=="function"&&!uv(o)&&o.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=o,pj(e,t,o,s,n)):(e=Pu(a.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!Tv(e,n)){var i=o.memoizedProps;if(a=a.compare,a=a!==null?a:Wc,a(i,s)&&e.ref===t.ref)return sn(e,t,n)}return t.flags|=1,e=Jr(o,s),e.ref=t.ref,e.return=t,t.child=e}function pj(e,t,a,s,n){if(e!==null){var o=e.memoizedProps;if(Wc(o,s)&&e.ref===t.ref)if(Ra=!1,t.pendingProps=s=o,Tv(e,n))e.flags&131072&&(Ra=!0);else return t.lanes=e.lanes,sn(e,t,n)}return Bp(e,t,a,s,n)}function gj(e,t,a){var s=t.pendingProps,n=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if(t.flags&128){if(s=o!==null?o.baseLanes|a:a,e!==null){for(n=t.child=e.child,o=0;n!==null;)o=o|n.lanes|n.childLanes,n=n.sibling;t.childLanes=o&~s}else t.childLanes=0,t.child=null;return V0(e,t,s,a)}if(a&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Iu(t,o!==null?o.cachePool:null),o!==null?R0(t,o):Pp(),lj(t);else return t.lanes=t.childLanes=536870912,V0(e,t,o!==null?o.baseLanes|a:a,a)}else o!==null?(Iu(t,o.cachePool),R0(t,o),Rn(),t.memoizedState=null):(e!==null&&Iu(t,null),Pp(),Rn());return Pa(e,t,n,a),t.child}function V0(e,t,a,s){var n=pv();return n=n===null?null:{parent:Sa._currentValue,pool:n},t.memoizedState={baseLanes:a,cachePool:n},e!==null&&Iu(t,null),Pp(),lj(t),e!==null&&Td(e,t,s,!0),null}function $u(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(we(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Bp(e,t,a,s,n){return Ho(t),a=yv(e,t,a,s,void 0,n),s=_v(),e!==null&&!Ra?(bv(e,t,n),sn(e,t,n)):(kt&&s&&fv(t),t.flags|=1,Pa(e,t,a,n),t.child)}function G0(e,t,a,s,n,o){return Ho(t),t.updateQueue=null,a=Dw(t,s,a,n),Aw(e),s=_v(),e!==null&&!Ra?(bv(e,t,o),sn(e,t,o)):(kt&&s&&fv(t),t.flags|=1,Pa(e,t,a,o),t.child)}function Y0(e,t,a,s,n){if(Ho(t),t.stateNode===null){var o=Li,i=a.contextType;typeof i=="object"&&i!==null&&(o=Ya(i)),o=new a(s,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=$p,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=s,o.state=t.memoizedState,o.refs={},gv(t),i=a.contextType,o.context=typeof i=="object"&&i!==null?Ya(i):Li,o.state=t.memoizedState,i=a.getDerivedStateFromProps,typeof i=="function"&&(hm(t,a,i,s),o.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(i=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),i!==o.state&&$p.enqueueReplaceState(o,o.state,null),Mc(t,s,o,n),Rc(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){o=t.stateNode;var l=t.memoizedProps,c=Go(a,l);o.props=c;var d=o.context,f=a.contextType;i=Li,typeof f=="object"&&f!==null&&(i=Ya(f));var h=a.getDerivedStateFromProps;f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l||d!==i)&&q0(t,o,s,i),An=!1;var p=t.memoizedState;o.state=p,Mc(t,s,o,n),Rc(),d=t.memoizedState,l||p!==d||An?(typeof h=="function"&&(hm(t,a,h,s),d=t.memoizedState),(c=An||$0(t,a,c,s,p,d,i))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=d),o.props=s,o.state=d,o.context=i,s=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,kp(e,t),i=t.memoizedProps,f=Go(a,i),o.props=f,h=t.pendingProps,p=o.context,d=a.contextType,c=Li,typeof d=="object"&&d!==null&&(c=Ya(d)),l=a.getDerivedStateFromProps,(d=typeof l=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==h||p!==c)&&q0(t,o,s,c),An=!1,p=t.memoizedState,o.state=p,Mc(t,s,o,n),Rc();var m=t.memoizedState;i!==h||p!==m||An||e!==null&&e.dependencies!==null&&nf(e.dependencies)?(typeof l=="function"&&(hm(t,a,l,s),m=t.memoizedState),(f=An||$0(t,a,f,s,p,m,c)||e!==null&&e.dependencies!==null&&nf(e.dependencies))?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=m),o.props=s,o.state=m,o.context=c,s=f):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),s=!1)}return o=s,$u(e,t),s=(t.flags&128)!==0,o||s?(o=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&s?(t.child=gl(t,e.child,null,n),t.child=gl(t,null,a,n)):Pa(e,t,a,n),t.memoizedState=o.state,e=t.child):e=sn(e,t,n),e}function W0(e,t,a,s){return Dd(),t.flags|=256,Pa(e,t,a,s),t.child}var mm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pm(e){return{baseLanes:e,cachePool:jw()}}function gm(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Is),e}function vj(e,t,a){var s=t.pendingProps,n=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(Na.current&2)!==0),i&&(n=!0,t.flags&=-129),i=(t.flags&32)!==0,t.flags&=-33,e===null){if(kt){if(n?On(t):Rn(),kt){var l=ga,c;if(c=l){e:{for(c=l,l=gr;c.nodeType!==8;){if(!l){l=null;break e}if(c=tr(c.nextSibling),c===null){l=null;break e}}l=c}l!==null?(t.memoizedState={dehydrated:l,treeContext:Po!==null?{id:Yr,overflow:Wr}:null,retryLane:536870912,hydrationErrors:null},c=bs(18,null,null,0),c.stateNode=l,c.return=t,t.child=c,Ka=t,ga=null,c=!0):c=!1}c||Uo(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return ag(l)?t.lanes=32:t.lanes=536870912,null;Zr(t)}return l=s.children,s=s.fallback,n?(Rn(),n=t.mode,l=mf({mode:"hidden",children:l},n),s=zo(s,n,a,null),l.return=t,s.return=t,l.sibling=s,t.child=l,n=t.child,n.memoizedState=pm(a),n.childLanes=gm(e,i,a),t.memoizedState=mm,s):(On(t),Up(t,l))}if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null)){if(o)t.flags&256?(On(t),t.flags&=-257,t=vm(e,t,a)):t.memoizedState!==null?(Rn(),t.child=e.child,t.flags|=128,t=null):(Rn(),n=s.fallback,l=t.mode,s=mf({mode:"visible",children:s.children},l),n=zo(n,l,a,null),n.flags|=2,s.return=t,n.return=t,s.sibling=n,t.child=s,gl(t,e.child,null,a),s=t.child,s.memoizedState=pm(a),s.childLanes=gm(e,i,a),t.memoizedState=mm,t=n);else if(On(t),ag(l)){if(i=l.nextSibling&&l.nextSibling.dataset,i)var d=i.dgst;i=d,s=Error(we(419)),s.stack="",s.digest=i,Qc({value:s,source:null,stack:null}),t=vm(e,t,a)}else if(Ra||Td(e,t,a,!1),i=(a&e.childLanes)!==0,Ra||i){if(i=ta,i!==null&&(s=a&-a,s=s&42?1:ev(s),s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==c.retryLane))throw c.retryLane=s,Il(e,s),Ss(i,e,s),mj;l.data==="$?"||Qp(),t=vm(e,t,a)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ga=tr(l.nextSibling),Ka=t,kt=!0,Io=null,gr=!1,e!==null&&(Ms[ks++]=Yr,Ms[ks++]=Wr,Ms[ks++]=Po,Yr=e.id,Wr=e.overflow,Po=t),t=Up(t,s.children),t.flags|=4096);return t}return n?(Rn(),n=s.fallback,l=t.mode,c=e.child,d=c.sibling,s=Jr(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,d!==null?n=Jr(d,n):(n=zo(n,l,a,null),n.flags|=2),n.return=t,s.return=t,s.sibling=n,t.child=s,s=n,n=t.child,l=e.child.memoizedState,l===null?l=pm(a):(c=l.cachePool,c!==null?(d=Sa._currentValue,c=c.parent!==d?{parent:d,pool:d}:c):c=jw(),l={baseLanes:l.baseLanes|a,cachePool:c}),n.memoizedState=l,n.childLanes=gm(e,i,a),t.memoizedState=mm,s):(On(t),a=e.child,e=a.sibling,a=Jr(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a)}function Up(e,t){return t=mf({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function mf(e,t){return e=bs(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function vm(e,t,a){return gl(t,e.child,null,a),e=Up(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Q0(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Tp(e.return,t,a)}function xm(e,t,a,s,n){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=a,o.tailMode=n)}function xj(e,t,a){var s=t.pendingProps,n=s.revealOrder,o=s.tail;if(Pa(e,t,s.children,a),s=Na.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Q0(e,a,t);else if(e.tag===19)Q0(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(ca(Na,s),n){case"forwards":for(a=t.child,n=null;a!==null;)e=a.alternate,e!==null&&uf(e)===null&&(n=a),a=a.sibling;a=n,a===null?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),xm(t,!1,n,a,o);break;case"backwards":for(a=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&uf(e)===null){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}xm(t,!0,a,null,o);break;case"together":xm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sn(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),so|=t.lanes,!(a&t.childLanes))if(e!==null){if(Td(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(we(153));if(t.child!==null){for(e=t.child,a=Jr(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Jr(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Tv(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&nf(e)))}function c2(e,t,a){switch(t.tag){case 3:Xu(t,t.stateNode.containerInfo),Tn(t,Sa,e.memoizedState.cache),Dd();break;case 27:case 5:xp(t);break;case 4:Xu(t,t.stateNode.containerInfo);break;case 10:Tn(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(On(t),t.flags|=128,null):a&t.child.childLanes?vj(e,t,a):(On(t),e=sn(e,t,a),e!==null?e.sibling:null);On(t);break;case 19:var n=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(Td(e,t,a,!1),s=(a&t.childLanes)!==0),n){if(s)return xj(e,t,a);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ca(Na,Na.current),s)break;return null;case 22:case 23:return t.lanes=0,gj(e,t,a);case 24:Tn(t,Sa,e.memoizedState.cache)}return sn(e,t,a)}function yj(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ra=!0;else{if(!Tv(e,a)&&!(t.flags&128))return Ra=!1,c2(e,t,a);Ra=!!(e.flags&131072)}else Ra=!1,kt&&t.flags&1048576&&bw(t,rf,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,n=s._init;if(s=n(s._payload),t.type=s,typeof s=="function")uv(s)?(e=Go(s,e),t.tag=1,t=Y0(null,t,s,e,a)):(t.tag=0,t=Bp(null,t,s,e,a));else{if(s!=null){if(n=s.$$typeof,n===Xg){t.tag=11,t=U0(null,t,s,e,a);break e}else if(n===Kg){t.tag=14,t=H0(null,t,s,e,a);break e}}throw t=gp(s)||s,Error(we(306,t,""))}}return t;case 0:return Bp(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,n=Go(s,t.pendingProps),Y0(e,t,s,n,a);case 3:e:{if(Xu(t,t.stateNode.containerInfo),e===null)throw Error(we(387));s=t.pendingProps;var o=t.memoizedState;n=o.element,kp(e,t),Mc(t,s,null,a);var i=t.memoizedState;if(s=i.cache,Tn(t,Sa,s),s!==o.cache&&Op(t,[Sa],a,!0),Rc(),s=i.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=W0(e,t,s,a);break e}else if(s!==n){n=Ps(Error(we(424)),t),Qc(n),t=W0(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ga=tr(e.firstChild),Ka=t,kt=!0,Io=null,gr=!0,a=ij(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Dd(),s===n){t=sn(e,t,a);break e}Pa(e,t,s,a)}t=t.child}return t;case 26:return $u(e,t),e===null?(a=fy(t.type,null,t.pendingProps,null))?t.memoizedState=a:kt||(a=t.type,e=t.pendingProps,s=bf(Vn.current).createElement(a),s[Ga]=t,s[ds]=e,La(s,a,e),Oa(s),t.stateNode=s):t.memoizedState=fy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return xp(t),e===null&&kt&&(s=t.stateNode=nE(t.type,t.pendingProps,Vn.current),Ka=t,gr=!0,n=ga,lo(t.type)?(sg=n,ga=tr(s.firstChild)):ga=n),Pa(e,t,t.pendingProps.children,a),$u(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&kt&&((n=s=ga)&&(s=I2(s,t.type,t.pendingProps,gr),s!==null?(t.stateNode=s,Ka=t,ga=tr(s.firstChild),gr=!1,n=!0):n=!1),n||Uo(t)),xp(t),n=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,eg(n,o)?s=null:i!==null&&eg(n,i)&&(t.flags|=32),t.memoizedState!==null&&(n=yv(e,t,t2,null,null,a),td._currentValue=n),$u(e,t),Pa(e,t,s,a),t.child;case 6:return e===null&&kt&&((e=a=ga)&&(a=L2(a,t.pendingProps,gr),a!==null?(t.stateNode=a,Ka=t,ga=null,e=!0):e=!1),e||Uo(t)),null;case 13:return vj(e,t,a);case 4:return Xu(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=gl(t,null,s,a):Pa(e,t,s,a),t.child;case 11:return U0(e,t,t.type,t.pendingProps,a);case 7:return Pa(e,t,t.pendingProps,a),t.child;case 8:return Pa(e,t,t.pendingProps.children,a),t.child;case 12:return Pa(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,Tn(t,t.type,s.value),Pa(e,t,s.children,a),t.child;case 9:return n=t.type._context,s=t.pendingProps.children,Ho(t),n=Ya(n),s=s(n),t.flags|=1,Pa(e,t,s,a),t.child;case 14:return H0(e,t,t.type,t.pendingProps,a);case 15:return pj(e,t,t.type,t.pendingProps,a);case 19:return xj(e,t,a);case 31:return s=t.pendingProps,a=t.mode,s={mode:s.mode,children:s.children},e===null?(a=mf(s,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=Jr(e.child,s),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return gj(e,t,a);case 24:return Ho(t),s=Ya(Sa),e===null?(n=pv(),n===null&&(n=ta,o=mv(),n.pooledCache=o,o.refCount++,o!==null&&(n.pooledCacheLanes|=a),n=o),t.memoizedState={parent:s,cache:n},gv(t),Tn(t,Sa,n)):(e.lanes&a&&(kp(e,t),Mc(t,null,null,a),Rc()),n=e.memoizedState,o=t.memoizedState,n.parent!==s?(n={parent:s,cache:s},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),Tn(t,Sa,s)):(s=o.cache,Tn(t,Sa,s),s!==n.cache&&Op(t,[Sa],a,!0))),Pa(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(we(156,t.tag))}function Lr(e){e.flags|=4}function Z0(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!lE(t)){if(t=Fs.current,t!==null&&((St&4194048)===St?Sr!==null:(St&62914560)!==St&&!(St&536870912)||t!==Sr))throw Tc=Mp,Ew;e.flags|=8192}}function mu(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Vb():536870912,e.lanes|=t,vl|=t)}function ic(e,t){if(!kt)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ha(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var n=e.child;n!==null;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags&65011712,s|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function d2(e,t,a){var s=t.pendingProps;switch(hv(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ha(t),null;case 1:return ha(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),en(Sa),dl(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(nc(t)?Lr(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,N0())),ha(t),null;case 26:return a=t.memoizedState,e===null?(Lr(t),a!==null?(ha(t),Z0(t,a)):(ha(t),t.flags&=-16777217)):a?a!==e.memoizedState?(Lr(t),ha(t),Z0(t,a)):(ha(t),t.flags&=-16777217):(e.memoizedProps!==s&&Lr(t),ha(t),t.flags&=-16777217),null;case 27:Ku(t),a=Vn.current;var n=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Lr(t);else{if(!s){if(t.stateNode===null)throw Error(we(166));return ha(t),null}e=jr.current,nc(t)?E0(t):(e=nE(n,s,a),t.stateNode=e,Lr(t))}return ha(t),null;case 5:if(Ku(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Lr(t);else{if(!s){if(t.stateNode===null)throw Error(we(166));return ha(t),null}if(e=jr.current,nc(t))E0(t);else{switch(n=bf(Vn.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?n.createElement("select",{is:s.is}):n.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?n.createElement(a,{is:s.is}):n.createElement(a)}}e[Ga]=t,e[ds]=s;e:for(n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.tag!==27&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}t.stateNode=e;e:switch(La(e,a,s),a){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Lr(t)}}return ha(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Lr(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(we(166));if(e=Vn.current,nc(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,n=Ka,n!==null)switch(n.tag){case 27:case 5:s=n.memoizedProps}e[Ga]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||aE(e.nodeValue,a)),e||Uo(t)}else e=bf(e).createTextNode(s),e[Ga]=t,t.stateNode=e}return ha(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=nc(t),s!==null&&s.dehydrated!==null){if(e===null){if(!n)throw Error(we(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(we(317));n[Ga]=t}else Dd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ha(t),n=!1}else n=N0(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(Zr(t),t):(Zr(t),null)}if(Zr(t),t.flags&128)return t.lanes=a,t;if(a=s!==null,e=e!==null&&e.memoizedState!==null,a){s=t.child,n=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(n=s.alternate.memoizedState.cachePool.pool);var o=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==n&&(s.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),mu(t,t.updateQueue),ha(t),null;case 4:return dl(),e===null&&Lv(t.stateNode.containerInfo),ha(t),null;case 10:return en(t.type),ha(t),null;case 19:if(Ma(Na),n=t.memoizedState,n===null)return ha(t),null;if(s=(t.flags&128)!==0,o=n.rendering,o===null)if(s)ic(n,!1);else{if(va!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=uf(e),o!==null){for(t.flags|=128,ic(n,!1),e=o.updateQueue,t.updateQueue=e,mu(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)_w(a,e),a=a.sibling;return ca(Na,Na.current&1|2),t.child}e=e.sibling}n.tail!==null&&Er()>gf&&(t.flags|=128,s=!0,ic(n,!1),t.lanes=4194304)}else{if(!s)if(e=uf(o),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,mu(t,e),ic(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!kt)return ha(t),null}else 2*Er()-n.renderingStartTime>gf&&a!==536870912&&(t.flags|=128,s=!0,ic(n,!1),t.lanes=4194304);n.isBackwards?(o.sibling=t.child,t.child=o):(e=n.last,e!==null?e.sibling=o:t.child=o,n.last=o)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=Er(),t.sibling=null,e=Na.current,ca(Na,s?e&1|2:e&1),t):(ha(t),null);case 22:case 23:return Zr(t),vv(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?a&536870912&&!(t.flags&128)&&(ha(t),t.subtreeFlags&6&&(t.flags|=8192)):ha(t),a=t.updateQueue,a!==null&&mu(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&Ma(Lo),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),en(Sa),ha(t),null;case 25:return null;case 30:return null}throw Error(we(156,t.tag))}function u2(e,t){switch(hv(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return en(Sa),dl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ku(t),null;case 13:if(Zr(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(we(340));Dd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ma(Na),null;case 4:return dl(),null;case 10:return en(t.type),null;case 22:case 23:return Zr(t),vv(),e!==null&&Ma(Lo),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return en(Sa),null;case 25:return null;default:return null}}function _j(e,t){switch(hv(t),t.tag){case 3:en(Sa),dl();break;case 26:case 27:case 5:Ku(t);break;case 4:dl();break;case 13:Zr(t);break;case 19:Ma(Na);break;case 10:en(t.type);break;case 22:case 23:Zr(t),vv(),e!==null&&Ma(Lo);break;case 24:en(Sa)}}function zd(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var n=s.next;a=n;do{if((a.tag&e)===e){s=void 0;var o=a.create,i=a.inst;s=o(),i.destroy=s}a=a.next}while(a!==n)}}catch(l){Kt(t,t.return,l)}}function ao(e,t,a){try{var s=t.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var o=n.next;s=o;do{if((s.tag&e)===e){var i=s.inst,l=i.destroy;if(l!==void 0){i.destroy=void 0,n=t;var c=a,d=l;try{d()}catch(f){Kt(n,c,f)}}}s=s.next}while(s!==o)}}catch(f){Kt(t,t.return,f)}}function bj(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Cw(t,a)}catch(s){Kt(e,e.return,s)}}}function wj(e,t,a){a.props=Go(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){Kt(e,t,s)}}function zc(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(n){Kt(e,t,n)}}function _r(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(n){Kt(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(n){Kt(e,t,n)}else a.current=null}function jj(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(n){Kt(e,e.return,n)}}function ym(e,t,a){try{var s=e.stateNode;R2(s,e.type,a,t),s[ds]=t}catch(n){Kt(e,e.return,n)}}function Ej(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&lo(e.type)||e.tag===4}function _m(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ej(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&lo(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hp(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=rh));else if(s!==4&&(s===27&&lo(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Hp(e,t,a),e=e.sibling;e!==null;)Hp(e,t,a),e=e.sibling}function pf(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&lo(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(pf(e,t,a),e=e.sibling;e!==null;)pf(e,t,a),e=e.sibling}function Sj(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);La(t,s,a),t[Ga]=e,t[ds]=a}catch(o){Kt(e,e.return,o)}}var Vr=!1,_a=!1,bm=!1,X0=typeof WeakSet=="function"?WeakSet:Set,Ta=null;function f2(e,t){if(e=e.containerInfo,Kp=Sf,e=fw(e),lv(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var n=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var i=0,l=-1,c=-1,d=0,f=0,h=e,p=null;t:for(;;){for(var m;h!==a||n!==0&&h.nodeType!==3||(l=i+n),h!==o||s!==0&&h.nodeType!==3||(c=i+s),h.nodeType===3&&(i+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===e)break t;if(p===a&&++d===n&&(l=i),p===o&&++f===s&&(c=i),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}a=l===-1||c===-1?null:{start:l,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(Jp={focusedElem:e,selectionRange:a},Sf=!1,Ta=t;Ta!==null;)if(t=Ta,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Ta=e;else for(;Ta!==null;){switch(t=Ta,o=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,a=t,n=o.memoizedProps,o=o.memoizedState,s=a.stateNode;try{var b=Go(a.type,n,a.elementType===a.type);e=s.getSnapshotBeforeUpdate(b,o),s.__reactInternalSnapshotBeforeUpdate=e}catch(y){Kt(a,a.return,y)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)tg(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":tg(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(we(163))}if(e=t.sibling,e!==null){e.return=t.return,Ta=e;break}Ta=t.return}}function Nj(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:vn(e,a),s&4&&zd(5,a);break;case 1:if(vn(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(i){Kt(a,a.return,i)}else{var n=Go(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){Kt(a,a.return,i)}}s&64&&bj(a),s&512&&zc(a,a.return);break;case 3:if(vn(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Cw(e,t)}catch(i){Kt(a,a.return,i)}}break;case 27:t===null&&s&4&&Sj(a);case 26:case 5:vn(e,a),t===null&&s&4&&jj(a),s&512&&zc(a,a.return);break;case 12:vn(e,a);break;case 13:vn(e,a),s&4&&Dj(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=b2.bind(null,a),F2(e,a))));break;case 22:if(s=a.memoizedState!==null||Vr,!s){t=t!==null&&t.memoizedState!==null||_a,n=Vr;var o=_a;Vr=s,(_a=t)&&!o?jn(e,a,(a.subtreeFlags&8772)!==0):vn(e,a),Vr=n,_a=o}break;case 30:break;default:vn(e,a)}}function Cj(e){var t=e.alternate;t!==null&&(e.alternate=null,Cj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&av(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ia=null,os=!1;function Fr(e,t,a){for(a=a.child;a!==null;)Aj(e,t,a),a=a.sibling}function Aj(e,t,a){if(ws&&typeof ws.onCommitFiberUnmount=="function")try{ws.onCommitFiberUnmount(Ed,a)}catch{}switch(a.tag){case 26:_a||_r(a,t),Fr(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:_a||_r(a,t);var s=ia,n=os;lo(a.type)&&(ia=a.stateNode,os=!1),Fr(e,t,a),Fc(a.stateNode),ia=s,os=n;break;case 5:_a||_r(a,t);case 6:if(s=ia,n=os,ia=null,Fr(e,t,a),ia=s,os=n,ia!==null)if(os)try{(ia.nodeType===9?ia.body:ia.nodeName==="HTML"?ia.ownerDocument.body:ia).removeChild(a.stateNode)}catch(o){Kt(a,t,o)}else try{ia.removeChild(a.stateNode)}catch(o){Kt(a,t,o)}break;case 18:ia!==null&&(os?(e=ia,cy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),rd(e)):cy(ia,a.stateNode));break;case 4:s=ia,n=os,ia=a.stateNode.containerInfo,os=!0,Fr(e,t,a),ia=s,os=n;break;case 0:case 11:case 14:case 15:_a||ao(2,a,t),_a||ao(4,a,t),Fr(e,t,a);break;case 1:_a||(_r(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&wj(a,t,s)),Fr(e,t,a);break;case 21:Fr(e,t,a);break;case 22:_a=(s=_a)||a.memoizedState!==null,Fr(e,t,a),_a=s;break;default:Fr(e,t,a)}}function Dj(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{rd(e)}catch(a){Kt(t,t.return,a)}}function h2(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new X0),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new X0),t;default:throw Error(we(435,e.tag))}}function wm(e,t){var a=h2(e);t.forEach(function(s){var n=w2.bind(null,e,s);a.has(s)||(a.add(s),s.then(n,n))})}function gs(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var n=a[s],o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 27:if(lo(l.type)){ia=l.stateNode,os=!1;break e}break;case 5:ia=l.stateNode,os=!1;break e;case 3:case 4:ia=l.stateNode.containerInfo,os=!0;break e}l=l.return}if(ia===null)throw Error(we(160));Aj(o,i,n),ia=null,os=!1,o=n.alternate,o!==null&&(o.return=null),n.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Tj(t,e),t=t.sibling}var Ks=null;function Tj(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:gs(t,e),vs(e),s&4&&(ao(3,e,e.return),zd(3,e),ao(5,e,e.return));break;case 1:gs(t,e),vs(e),s&512&&(_a||a===null||_r(a,a.return)),s&64&&Vr&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var n=Ks;if(gs(t,e),vs(e),s&512&&(_a||a===null||_r(a,a.return)),s&4){var o=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,n=n.ownerDocument||n;t:switch(s){case"title":o=n.getElementsByTagName("title")[0],(!o||o[Cd]||o[Ga]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=n.createElement(s),n.head.insertBefore(o,n.querySelector("head > title"))),La(o,s,a),o[Ga]=e,Oa(o),s=o;break e;case"link":var i=my("link","href",n).get(s+(a.href||""));if(i){for(var l=0;l<i.length;l++)if(o=i[l],o.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&o.getAttribute("rel")===(a.rel==null?null:a.rel)&&o.getAttribute("title")===(a.title==null?null:a.title)&&o.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){i.splice(l,1);break t}}o=n.createElement(s),La(o,s,a),n.head.appendChild(o);break;case"meta":if(i=my("meta","content",n).get(s+(a.content||""))){for(l=0;l<i.length;l++)if(o=i[l],o.getAttribute("content")===(a.content==null?null:""+a.content)&&o.getAttribute("name")===(a.name==null?null:a.name)&&o.getAttribute("property")===(a.property==null?null:a.property)&&o.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&o.getAttribute("charset")===(a.charSet==null?null:a.charSet)){i.splice(l,1);break t}}o=n.createElement(s),La(o,s,a),n.head.appendChild(o);break;default:throw Error(we(468,s))}o[Ga]=e,Oa(o),s=o}e.stateNode=s}else py(n,e.type,e.stateNode);else e.stateNode=hy(n,s,e.memoizedProps);else o!==s?(o===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):o.count--,s===null?py(n,e.type,e.stateNode):hy(n,s,e.memoizedProps)):s===null&&e.stateNode!==null&&ym(e,e.memoizedProps,a.memoizedProps)}break;case 27:gs(t,e),vs(e),s&512&&(_a||a===null||_r(a,a.return)),a!==null&&s&4&&ym(e,e.memoizedProps,a.memoizedProps);break;case 5:if(gs(t,e),vs(e),s&512&&(_a||a===null||_r(a,a.return)),e.flags&32){n=e.stateNode;try{fl(n,"")}catch(m){Kt(e,e.return,m)}}s&4&&e.stateNode!=null&&(n=e.memoizedProps,ym(e,n,a!==null?a.memoizedProps:n)),s&1024&&(bm=!0);break;case 6:if(gs(t,e),vs(e),s&4){if(e.stateNode===null)throw Error(we(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(m){Kt(e,e.return,m)}}break;case 3:if(Uu=null,n=Ks,Ks=wf(t.containerInfo),gs(t,e),Ks=n,vs(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{rd(t.containerInfo)}catch(m){Kt(e,e.return,m)}bm&&(bm=!1,Oj(e));break;case 4:s=Ks,Ks=wf(e.stateNode.containerInfo),gs(t,e),vs(e),Ks=s;break;case 12:gs(t,e),vs(e);break;case 13:gs(t,e),vs(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zv=Er()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,wm(e,s)));break;case 22:n=e.memoizedState!==null;var c=a!==null&&a.memoizedState!==null,d=Vr,f=_a;if(Vr=d||n,_a=f||c,gs(t,e),_a=f,Vr=d,vs(e),s&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(a===null||c||Vr||_a||wo(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){c=a=t;try{if(o=c.stateNode,n)i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=h!=null&&h.hasOwnProperty("display")?h.display:null;l.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(m){Kt(c,c.return,m)}}}else if(t.tag===6){if(a===null){c=t;try{c.stateNode.nodeValue=n?"":c.memoizedProps}catch(m){Kt(c,c.return,m)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,wm(e,a))));break;case 19:gs(t,e),vs(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,wm(e,s)));break;case 30:break;case 21:break;default:gs(t,e),vs(e)}}function vs(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(Ej(s)){a=s;break}s=s.return}if(a==null)throw Error(we(160));switch(a.tag){case 27:var n=a.stateNode,o=_m(e);pf(e,o,n);break;case 5:var i=a.stateNode;a.flags&32&&(fl(i,""),a.flags&=-33);var l=_m(e);pf(e,l,i);break;case 3:case 4:var c=a.stateNode.containerInfo,d=_m(e);Hp(e,d,c);break;default:throw Error(we(161))}}catch(f){Kt(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Oj(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Oj(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function vn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Nj(e,t.alternate,t),t=t.sibling}function wo(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ao(4,t,t.return),wo(t);break;case 1:_r(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&wj(t,t.return,a),wo(t);break;case 27:Fc(t.stateNode);case 26:case 5:_r(t,t.return),wo(t);break;case 22:t.memoizedState===null&&wo(t);break;case 30:wo(t);break;default:wo(t)}e=e.sibling}}function jn(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,n=e,o=t,i=o.flags;switch(o.tag){case 0:case 11:case 15:jn(n,o,a),zd(4,o);break;case 1:if(jn(n,o,a),s=o,n=s.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(d){Kt(s,s.return,d)}if(s=o,n=s.updateQueue,n!==null){var l=s.stateNode;try{var c=n.shared.hiddenCallbacks;if(c!==null)for(n.shared.hiddenCallbacks=null,n=0;n<c.length;n++)Nw(c[n],l)}catch(d){Kt(s,s.return,d)}}a&&i&64&&bj(o),zc(o,o.return);break;case 27:Sj(o);case 26:case 5:jn(n,o,a),a&&s===null&&i&4&&jj(o),zc(o,o.return);break;case 12:jn(n,o,a);break;case 13:jn(n,o,a),a&&i&4&&Dj(n,o);break;case 22:o.memoizedState===null&&jn(n,o,a),zc(o,o.return);break;case 30:break;default:jn(n,o,a)}t=t.sibling}}function Ov(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Od(a))}function Rv(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Od(e))}function dr(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Rj(e,t,a,s),t=t.sibling}function Rj(e,t,a,s){var n=t.flags;switch(t.tag){case 0:case 11:case 15:dr(e,t,a,s),n&2048&&zd(9,t);break;case 1:dr(e,t,a,s);break;case 3:dr(e,t,a,s),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Od(e)));break;case 12:if(n&2048){dr(e,t,a,s),e=t.stateNode;try{var o=t.memoizedProps,i=o.id,l=o.onPostCommit;typeof l=="function"&&l(i,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){Kt(t,t.return,c)}}else dr(e,t,a,s);break;case 13:dr(e,t,a,s);break;case 23:break;case 22:o=t.stateNode,i=t.alternate,t.memoizedState!==null?o._visibility&2?dr(e,t,a,s):Pc(e,t):o._visibility&2?dr(e,t,a,s):(o._visibility|=2,Ei(e,t,a,s,(t.subtreeFlags&10256)!==0)),n&2048&&Ov(i,t);break;case 24:dr(e,t,a,s),n&2048&&Rv(t.alternate,t);break;default:dr(e,t,a,s)}}function Ei(e,t,a,s,n){for(n=n&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var o=e,i=t,l=a,c=s,d=i.flags;switch(i.tag){case 0:case 11:case 15:Ei(o,i,l,c,n),zd(8,i);break;case 23:break;case 22:var f=i.stateNode;i.memoizedState!==null?f._visibility&2?Ei(o,i,l,c,n):Pc(o,i):(f._visibility|=2,Ei(o,i,l,c,n)),n&&d&2048&&Ov(i.alternate,i);break;case 24:Ei(o,i,l,c,n),n&&d&2048&&Rv(i.alternate,i);break;default:Ei(o,i,l,c,n)}t=t.sibling}}function Pc(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,n=s.flags;switch(s.tag){case 22:Pc(a,s),n&2048&&Ov(s.alternate,s);break;case 24:Pc(a,s),n&2048&&Rv(s.alternate,s);break;default:Pc(a,s)}t=t.sibling}}var _c=8192;function ci(e){if(e.subtreeFlags&_c)for(e=e.child;e!==null;)Mj(e),e=e.sibling}function Mj(e){switch(e.tag){case 26:ci(e),e.flags&_c&&e.memoizedState!==null&&K2(Ks,e.memoizedState,e.memoizedProps);break;case 5:ci(e);break;case 3:case 4:var t=Ks;Ks=wf(e.stateNode.containerInfo),ci(e),Ks=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=_c,_c=16777216,ci(e),_c=t):ci(e));break;default:ci(e)}}function kj(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function lc(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Ta=s,Pj(s,e)}kj(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)zj(e),e=e.sibling}function zj(e){switch(e.tag){case 0:case 11:case 15:lc(e),e.flags&2048&&ao(9,e,e.return);break;case 3:lc(e);break;case 12:lc(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,qu(e)):lc(e);break;default:lc(e)}}function qu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Ta=s,Pj(s,e)}kj(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ao(8,t,t.return),qu(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,qu(t));break;default:qu(t)}e=e.sibling}}function Pj(e,t){for(;Ta!==null;){var a=Ta;switch(a.tag){case 0:case 11:case 15:ao(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Od(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,Ta=s;else e:for(a=e;Ta!==null;){s=Ta;var n=s.sibling,o=s.return;if(Cj(s),s===a){Ta=null;break e}if(n!==null){n.return=o,Ta=n;break e}Ta=o}}}var m2={getCacheForType:function(e){var t=Ya(Sa),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},p2=typeof WeakMap=="function"?WeakMap:Map,Vt=0,ta=null,yt=null,St=0,Ht=0,xs=null,Bn=!1,Ll=!1,Mv=!1,rn=0,va=0,so=0,Fo=0,kv=0,Is=0,vl=0,Ic=null,is=null,Vp=!1,zv=0,gf=1/0,vf=null,Wn=null,Ia=0,Qn=null,xl=null,Qi=0,Gp=0,Yp=null,Ij=null,Lc=0,Wp=null;function Es(){if(Vt&2&&St!==0)return St&-St;if(Xe.T!==null){var e=hl;return e!==0?e:Iv()}return Wb()}function Lj(){Is===0&&(Is=!(St&536870912)||kt?Hb():536870912);var e=Fs.current;return e!==null&&(e.flags|=32),Is}function Ss(e,t,a){(e===ta&&(Ht===2||Ht===9)||e.cancelPendingCommit!==null)&&(yl(e,0),Un(e,St,Is,!1)),Nd(e,a),(!(Vt&2)||e!==ta)&&(e===ta&&(!(Vt&2)&&(Fo|=a),va===4&&Un(e,St,Is,!1)),Dr(e))}function Fj(e,t,a){if(Vt&6)throw Error(we(327));var s=!a&&(t&124)===0&&(t&e.expiredLanes)===0||Sd(e,t),n=s?x2(e,t):jm(e,t,!0),o=s;do{if(n===0){Ll&&!s&&Un(e,t,0,!1);break}else{if(a=e.current.alternate,o&&!g2(a)){n=jm(e,t,!1),o=!1;continue}if(n===2){if(o=t,e.errorRecoveryDisabledLanes&o)var i=0;else i=e.pendingLanes&-536870913,i=i!==0?i:i&536870912?536870912:0;if(i!==0){t=i;e:{var l=e;n=Ic;var c=l.current.memoizedState.isDehydrated;if(c&&(yl(l,i).flags|=256),i=jm(l,i,!1),i!==2){if(Mv&&!c){l.errorRecoveryDisabledLanes|=o,Fo|=o,n=4;break e}o=is,is=n,o!==null&&(is===null?is=o:is.push.apply(is,o))}n=i}if(o=!1,n!==2)continue}}if(n===1){yl(e,0),Un(e,t,0,!0);break}e:{switch(s=e,o=n,o){case 0:case 1:throw Error(we(345));case 4:if((t&4194048)!==t)break;case 6:Un(s,t,Is,!Bn);break e;case 2:is=null;break;case 3:case 5:break;default:throw Error(we(329))}if((t&62914560)===t&&(n=zv+300-Er(),10<n)){if(Un(s,t,Is,!Bn),Vf(s,0,!0)!==0)break e;s.timeoutHandle=rE(K0.bind(null,s,a,is,vf,Vp,t,Is,Fo,vl,Bn,o,2,-0,0),n);break e}K0(s,a,is,vf,Vp,t,Is,Fo,vl,Bn,o,0,-0,0)}}break}while(!0);Dr(e)}function K0(e,t,a,s,n,o,i,l,c,d,f,h,p,m){if(e.timeoutHandle=-1,h=t.subtreeFlags,(h&8192||(h&16785408)===16785408)&&(ed={stylesheets:null,count:0,unsuspend:X2},Mj(t),h=J2(),h!==null)){e.cancelPendingCommit=h(ey.bind(null,e,t,o,a,s,n,i,l,c,f,1,p,m)),Un(e,o,i,!d);return}ey(e,t,o,a,s,n,i,l,c)}function g2(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var n=a[s],o=n.getSnapshot;n=n.value;try{if(!Cs(o(),n))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Un(e,t,a,s){t&=~kv,t&=~Fo,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var n=t;0<n;){var o=31-js(n),i=1<<o;s[o]=-1,n&=~i}a!==0&&Gb(e,a,t)}function th(){return Vt&6?!0:(Pd(0),!1)}function Pv(){if(yt!==null){if(Ht===0)var e=yt.return;else e=yt,Qr=ni=null,wv(e),Wi=null,Xc=0,e=yt;for(;e!==null;)_j(e.alternate,e),e=e.return;yt=null}}function yl(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,k2(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Pv(),ta=e,yt=a=Jr(e.current,null),St=t,Ht=0,xs=null,Bn=!1,Ll=Sd(e,t),Mv=!1,vl=Is=kv=Fo=so=va=0,is=Ic=null,Vp=!1,t&8&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var n=31-js(s),o=1<<n;t|=e[n],s&=~o}return rn=t,Qf(),a}function $j(e,t){ht=null,Xe.H=df,t===Rd||t===Xf?(t=T0(),Ht=3):t===Ew?(t=T0(),Ht=4):Ht=t===mj?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,xs=t,yt===null&&(va=1,hf(e,Ps(t,e.current)))}function qj(){var e=Xe.H;return Xe.H=df,e===null?df:e}function Bj(){var e=Xe.A;return Xe.A=m2,e}function Qp(){va=4,Bn||(St&4194048)!==St&&Fs.current!==null||(Ll=!0),!(so&134217727)&&!(Fo&134217727)||ta===null||Un(ta,St,Is,!1)}function jm(e,t,a){var s=Vt;Vt|=2;var n=qj(),o=Bj();(ta!==e||St!==t)&&(vf=null,yl(e,t)),t=!1;var i=va;e:do try{if(Ht!==0&&yt!==null){var l=yt,c=xs;switch(Ht){case 8:Pv(),i=6;break e;case 3:case 2:case 9:case 6:Fs.current===null&&(t=!0);var d=Ht;if(Ht=0,xs=null,qi(e,l,c,d),a&&Ll){i=0;break e}break;default:d=Ht,Ht=0,xs=null,qi(e,l,c,d)}}v2(),i=va;break}catch(f){$j(e,f)}while(!0);return t&&e.shellSuspendCounter++,Qr=ni=null,Vt=s,Xe.H=n,Xe.A=o,yt===null&&(ta=null,St=0,Qf()),i}function v2(){for(;yt!==null;)Uj(yt)}function x2(e,t){var a=Vt;Vt|=2;var s=qj(),n=Bj();ta!==e||St!==t?(vf=null,gf=Er()+500,yl(e,t)):Ll=Sd(e,t);e:do try{if(Ht!==0&&yt!==null){t=yt;var o=xs;t:switch(Ht){case 1:Ht=0,xs=null,qi(e,t,o,1);break;case 2:case 9:if(D0(o)){Ht=0,xs=null,J0(t);break}t=function(){Ht!==2&&Ht!==9||ta!==e||(Ht=7),Dr(e)},o.then(t,t);break e;case 3:Ht=7;break e;case 4:Ht=5;break e;case 7:D0(o)?(Ht=0,xs=null,J0(t)):(Ht=0,xs=null,qi(e,t,o,7));break;case 5:var i=null;switch(yt.tag){case 26:i=yt.memoizedState;case 5:case 27:var l=yt;if(!i||lE(i)){Ht=0,xs=null;var c=l.sibling;if(c!==null)yt=c;else{var d=l.return;d!==null?(yt=d,ah(d)):yt=null}break t}}Ht=0,xs=null,qi(e,t,o,5);break;case 6:Ht=0,xs=null,qi(e,t,o,6);break;case 8:Pv(),va=6;break e;default:throw Error(we(462))}}y2();break}catch(f){$j(e,f)}while(!0);return Qr=ni=null,Xe.H=s,Xe.A=n,Vt=a,yt!==null?0:(ta=null,St=0,Qf(),va)}function y2(){for(;yt!==null&&!qD();)Uj(yt)}function Uj(e){var t=yj(e.alternate,e,rn);e.memoizedProps=e.pendingProps,t===null?ah(e):yt=t}function J0(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=G0(a,t,t.pendingProps,t.type,void 0,St);break;case 11:t=G0(a,t,t.pendingProps,t.type.render,t.ref,St);break;case 5:wv(t);default:_j(a,t),t=yt=_w(t,rn),t=yj(a,t,rn)}e.memoizedProps=e.pendingProps,t===null?ah(e):yt=t}function qi(e,t,a,s){Qr=ni=null,wv(t),Wi=null,Xc=0;var n=t.return;try{if(l2(e,n,t,a,St)){va=1,hf(e,Ps(a,e.current)),yt=null;return}}catch(o){if(n!==null)throw yt=n,o;va=1,hf(e,Ps(a,e.current)),yt=null;return}t.flags&32768?(kt||s===1?e=!0:Ll||St&536870912?e=!1:(Bn=e=!0,(s===2||s===9||s===3||s===6)&&(s=Fs.current,s!==null&&s.tag===13&&(s.flags|=16384))),Hj(t,e)):ah(t)}function ah(e){var t=e;do{if(t.flags&32768){Hj(t,Bn);return}e=t.return;var a=d2(t.alternate,t,rn);if(a!==null){yt=a;return}if(t=t.sibling,t!==null){yt=t;return}yt=t=e}while(t!==null);va===0&&(va=5)}function Hj(e,t){do{var a=u2(e.alternate,e);if(a!==null){a.flags&=32767,yt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){yt=e;return}yt=e=a}while(e!==null);va=6,yt=null}function ey(e,t,a,s,n,o,i,l,c){e.cancelPendingCommit=null;do sh();while(Ia!==0);if(Vt&6)throw Error(we(327));if(t!==null){if(t===e.current)throw Error(we(177));if(o=t.lanes|t.childLanes,o|=cv,XD(e,a,o,i,l,c),e===ta&&(yt=ta=null,St=0),xl=t,Qn=e,Qi=a,Gp=o,Yp=n,Ij=s,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,j2(Ju,function(){return Qj(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,t.subtreeFlags&13878||s){s=Xe.T,Xe.T=null,n=zt.p,zt.p=2,i=Vt,Vt|=4;try{f2(e,t,a)}finally{Vt=i,zt.p=n,Xe.T=s}}Ia=1,Vj(),Gj(),Yj()}}function Vj(){if(Ia===1){Ia=0;var e=Qn,t=xl,a=(t.flags&13878)!==0;if(t.subtreeFlags&13878||a){a=Xe.T,Xe.T=null;var s=zt.p;zt.p=2;var n=Vt;Vt|=4;try{Tj(t,e);var o=Jp,i=fw(e.containerInfo),l=o.focusedElem,c=o.selectionRange;if(i!==l&&l&&l.ownerDocument&&uw(l.ownerDocument.documentElement,l)){if(c!==null&&lv(l)){var d=c.start,f=c.end;if(f===void 0&&(f=d),"selectionStart"in l)l.selectionStart=d,l.selectionEnd=Math.min(f,l.value.length);else{var h=l.ownerDocument||document,p=h&&h.defaultView||window;if(p.getSelection){var m=p.getSelection(),b=l.textContent.length,y=Math.min(c.start,b),_=c.end===void 0?y:Math.min(c.end,b);!m.extend&&y>_&&(i=_,_=y,y=i);var x=b0(l,y),v=b0(l,_);if(x&&v&&(m.rangeCount!==1||m.anchorNode!==x.node||m.anchorOffset!==x.offset||m.focusNode!==v.node||m.focusOffset!==v.offset)){var g=h.createRange();g.setStart(x.node,x.offset),m.removeAllRanges(),y>_?(m.addRange(g),m.extend(v.node,v.offset)):(g.setEnd(v.node,v.offset),m.addRange(g))}}}}for(h=[],m=l;m=m.parentNode;)m.nodeType===1&&h.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<h.length;l++){var E=h[l];E.element.scrollLeft=E.left,E.element.scrollTop=E.top}}Sf=!!Kp,Jp=Kp=null}finally{Vt=n,zt.p=s,Xe.T=a}}e.current=t,Ia=2}}function Gj(){if(Ia===2){Ia=0;var e=Qn,t=xl,a=(t.flags&8772)!==0;if(t.subtreeFlags&8772||a){a=Xe.T,Xe.T=null;var s=zt.p;zt.p=2;var n=Vt;Vt|=4;try{Nj(e,t.alternate,t)}finally{Vt=n,zt.p=s,Xe.T=a}}Ia=3}}function Yj(){if(Ia===4||Ia===3){Ia=0,BD();var e=Qn,t=xl,a=Qi,s=Ij;t.subtreeFlags&10256||t.flags&10256?Ia=5:(Ia=0,xl=Qn=null,Wj(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(Wn=null),tv(a),t=t.stateNode,ws&&typeof ws.onCommitFiberRoot=="function")try{ws.onCommitFiberRoot(Ed,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=Xe.T,n=zt.p,zt.p=2,Xe.T=null;try{for(var o=e.onRecoverableError,i=0;i<s.length;i++){var l=s[i];o(l.value,{componentStack:l.stack})}}finally{Xe.T=t,zt.p=n}}Qi&3&&sh(),Dr(e),n=e.pendingLanes,a&4194090&&n&42?e===Wp?Lc++:(Lc=0,Wp=e):Lc=0,Pd(0)}}function Wj(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Od(t)))}function sh(e){return Vj(),Gj(),Yj(),Qj()}function Qj(){if(Ia!==5)return!1;var e=Qn,t=Gp;Gp=0;var a=tv(Qi),s=Xe.T,n=zt.p;try{zt.p=32>a?32:a,Xe.T=null,a=Yp,Yp=null;var o=Qn,i=Qi;if(Ia=0,xl=Qn=null,Qi=0,Vt&6)throw Error(we(331));var l=Vt;if(Vt|=4,zj(o.current),Rj(o,o.current,i,a),Vt=l,Pd(0,!1),ws&&typeof ws.onPostCommitFiberRoot=="function")try{ws.onPostCommitFiberRoot(Ed,o)}catch{}return!0}finally{zt.p=n,Xe.T=s,Wj(e,t)}}function ty(e,t,a){t=Ps(a,t),t=qp(e.stateNode,t,2),e=Yn(e,t,2),e!==null&&(Nd(e,2),Dr(e))}function Kt(e,t,a){if(e.tag===3)ty(e,e,a);else for(;t!==null;){if(t.tag===3){ty(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Wn===null||!Wn.has(s))){e=Ps(a,e),a=fj(2),s=Yn(t,a,2),s!==null&&(hj(a,s,t,e),Nd(s,2),Dr(s));break}}t=t.return}}function Em(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new p2;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(a)||(Mv=!0,n.add(a),e=_2.bind(null,e,t,a),t.then(e,e))}function _2(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ta===e&&(St&a)===a&&(va===4||va===3&&(St&62914560)===St&&300>Er()-zv?!(Vt&2)&&yl(e,0):kv|=a,vl===St&&(vl=0)),Dr(e)}function Zj(e,t){t===0&&(t=Vb()),e=Il(e,t),e!==null&&(Nd(e,t),Dr(e))}function b2(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Zj(e,a)}function w2(e,t){var a=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(a=n.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(we(314))}s!==null&&s.delete(t),Zj(e,a)}function j2(e,t){return Jg(e,t)}var xf=null,Si=null,Zp=!1,yf=!1,Sm=!1,$o=0;function Dr(e){e!==Si&&e.next===null&&(Si===null?xf=Si=e:Si=Si.next=e),yf=!0,Zp||(Zp=!0,S2())}function Pd(e,t){if(!Sm&&yf){Sm=!0;do for(var a=!1,s=xf;s!==null;){if(e!==0){var n=s.pendingLanes;if(n===0)var o=0;else{var i=s.suspendedLanes,l=s.pingedLanes;o=(1<<31-js(42|e)+1)-1,o&=n&~(i&~l),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(a=!0,ay(s,o))}else o=St,o=Vf(s,s===ta?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(o&3)||Sd(s,o)||(a=!0,ay(s,o));s=s.next}while(a);Sm=!1}}function E2(){Xj()}function Xj(){yf=Zp=!1;var e=0;$o!==0&&(M2()&&(e=$o),$o=0);for(var t=Er(),a=null,s=xf;s!==null;){var n=s.next,o=Kj(s,t);o===0?(s.next=null,a===null?xf=n:a.next=n,n===null&&(Si=a)):(a=s,(e!==0||o&3)&&(yf=!0)),s=n}Pd(e)}function Kj(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var i=31-js(o),l=1<<i,c=n[i];c===-1?(!(l&a)||l&s)&&(n[i]=ZD(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}if(t=ta,a=St,a=Vf(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(Ht===2||Ht===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Xh(s),e.callbackNode=null,e.callbackPriority=0;if(!(a&3)||Sd(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&Xh(s),tv(a)){case 2:case 8:a=Bb;break;case 32:a=Ju;break;case 268435456:a=Ub;break;default:a=Ju}return s=Jj.bind(null,e),a=Jg(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&Xh(s),e.callbackPriority=2,e.callbackNode=null,2}function Jj(e,t){if(Ia!==0&&Ia!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(sh()&&e.callbackNode!==a)return null;var s=St;return s=Vf(e,e===ta?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Fj(e,s,t),Kj(e,Er()),e.callbackNode!=null&&e.callbackNode===a?Jj.bind(null,e):null)}function ay(e,t){if(sh())return null;Fj(e,t,!0)}function S2(){z2(function(){Vt&6?Jg(qb,E2):Xj()})}function Iv(){return $o===0&&($o=Hb()),$o}function sy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Mu(""+e)}function ry(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function N2(e,t,a,s,n){if(t==="submit"&&a&&a.stateNode===n){var o=sy((n[ds]||null).action),i=s.submitter;i&&(t=(t=i[ds]||null)?sy(t.formAction):i.getAttribute("formAction"),t!==null&&(o=t,i=null));var l=new Gf("action","action",null,s,n);e.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if($o!==0){var c=i?ry(n,i):new FormData(n);Fp(a,{pending:!0,data:c,method:n.method,action:o},null,c)}}else typeof o=="function"&&(l.preventDefault(),c=i?ry(n,i):new FormData(n),Fp(a,{pending:!0,data:c,method:n.method,action:o},o,c))},currentTarget:n}]})}}for(var Nm=0;Nm<Cp.length;Nm++){var Cm=Cp[Nm],C2=Cm.toLowerCase(),A2=Cm[0].toUpperCase()+Cm.slice(1);or(C2,"on"+A2)}or(mw,"onAnimationEnd");or(pw,"onAnimationIteration");or(gw,"onAnimationStart");or("dblclick","onDoubleClick");or("focusin","onFocus");or("focusout","onBlur");or(VT,"onTransitionRun");or(GT,"onTransitionStart");or(YT,"onTransitionCancel");or(vw,"onTransitionEnd");ul("onMouseEnter",["mouseout","mouseover"]);ul("onMouseLeave",["mouseout","mouseover"]);ul("onPointerEnter",["pointerout","pointerover"]);ul("onPointerLeave",["pointerout","pointerover"]);ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ai("onBeforeInput",["compositionend","keypress","textInput","paste"]);ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kc));function eE(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],n=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var i=s.length-1;0<=i;i--){var l=s[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&n.isPropagationStopped())break e;o=l,n.currentTarget=d;try{o(n)}catch(f){ff(f)}n.currentTarget=null,o=c}else for(i=0;i<s.length;i++){if(l=s[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&n.isPropagationStopped())break e;o=l,n.currentTarget=d;try{o(n)}catch(f){ff(f)}n.currentTarget=null,o=c}}}}function xt(e,t){var a=t[_p];a===void 0&&(a=t[_p]=new Set);var s=e+"__bubble";a.has(s)||(tE(t,e,2,!1),a.add(s))}function Am(e,t,a){var s=0;t&&(s|=4),tE(a,e,s,t)}var pu="_reactListening"+Math.random().toString(36).slice(2);function Lv(e){if(!e[pu]){e[pu]=!0,Qb.forEach(function(a){a!=="selectionchange"&&(D2.has(a)||Am(a,!1,e),Am(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pu]||(t[pu]=!0,Am("selectionchange",!1,t))}}function tE(e,t,a,s){switch(hE(t)){case 2:var n=aO;break;case 8:n=sO;break;default:n=Bv}a=n.bind(null,t,a,e),n=void 0,!Ep||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):n!==void 0?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function Dm(e,t,a,s,n){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var l=s.stateNode.containerInfo;if(l===n)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&i.stateNode.containerInfo===n)return;i=i.return}for(;l!==null;){if(i=Ri(l),i===null)return;if(c=i.tag,c===5||c===6||c===26||c===27){s=o=i;continue e}l=l.parentNode}}s=s.return}sw(function(){var d=o,f=rv(a),h=[];e:{var p=xw.get(e);if(p!==void 0){var m=Gf,b=e;switch(e){case"keypress":if(zu(a)===0)break e;case"keydown":case"keyup":m=jT;break;case"focusin":b="focus",m=nm;break;case"focusout":b="blur",m=nm;break;case"beforeblur":case"afterblur":m=nm;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=u0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=uT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=NT;break;case mw:case pw:case gw:m=mT;break;case vw:m=AT;break;case"scroll":case"scrollend":m=cT;break;case"wheel":m=TT;break;case"copy":case"cut":case"paste":m=gT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=h0;break;case"toggle":case"beforetoggle":m=RT}var y=(t&4)!==0,_=!y&&(e==="scroll"||e==="scrollend"),x=y?p!==null?p+"Capture":null:p;y=[];for(var v=d,g;v!==null;){var E=v;if(g=E.stateNode,E=E.tag,E!==5&&E!==26&&E!==27||g===null||x===null||(E=Gc(v,x),E!=null&&y.push(Jc(v,E,g))),_)break;v=v.return}0<y.length&&(p=new m(p,b,null,a,f),h.push({event:p,listeners:y}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&a!==jp&&(b=a.relatedTarget||a.fromElement)&&(Ri(b)||b[zl]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(b=a.relatedTarget||a.toElement,m=d,b=b?Ri(b):null,b!==null&&(_=jd(b),y=b.tag,b!==_||y!==5&&y!==27&&y!==6)&&(b=null)):(m=null,b=d),m!==b)){if(y=u0,E="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(y=h0,E="onPointerLeave",x="onPointerEnter",v="pointer"),_=m==null?p:yc(m),g=b==null?p:yc(b),p=new y(E,v+"leave",m,a,f),p.target=_,p.relatedTarget=g,E=null,Ri(f)===d&&(y=new y(x,v+"enter",b,a,f),y.target=g,y.relatedTarget=_,E=y),_=E,m&&b)t:{for(y=m,x=b,v=0,g=y;g;g=di(g))v++;for(g=0,E=x;E;E=di(E))g++;for(;0<v-g;)y=di(y),v--;for(;0<g-v;)x=di(x),g--;for(;v--;){if(y===x||x!==null&&y===x.alternate)break t;y=di(y),x=di(x)}y=null}else y=null;m!==null&&ny(h,p,m,y,!1),b!==null&&_!==null&&ny(h,_,b,y,!0)}}e:{if(p=d?yc(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var j=v0;else if(g0(p))if(cw)j=BT;else{j=$T;var S=FT}else m=p.nodeName,!m||m.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?d&&sv(d.elementType)&&(j=v0):j=qT;if(j&&(j=j(e,d))){lw(h,j,a,f);break e}S&&S(e,p,d),e==="focusout"&&d&&p.type==="number"&&d.memoizedProps.value!=null&&wp(p,"number",p.value)}switch(S=d?yc(d):window,e){case"focusin":(g0(S)||S.contentEditable==="true")&&(zi=S,Sp=d,Ac=null);break;case"focusout":Ac=Sp=zi=null;break;case"mousedown":Np=!0;break;case"contextmenu":case"mouseup":case"dragend":Np=!1,w0(h,a,f);break;case"selectionchange":if(HT)break;case"keydown":case"keyup":w0(h,a,f)}var N;if(iv)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else ki?ow(e,a)&&(R="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(R="onCompositionStart");R&&(nw&&a.locale!=="ko"&&(ki||R!=="onCompositionStart"?R==="onCompositionEnd"&&ki&&(N=rw()):(qn=f,nv="value"in qn?qn.value:qn.textContent,ki=!0)),S=_f(d,R),0<S.length&&(R=new f0(R,e,null,a,f),h.push({event:R,listeners:S}),N?R.data=N:(N=iw(a),N!==null&&(R.data=N)))),(N=kT?zT(e,a):PT(e,a))&&(R=_f(d,"onBeforeInput"),0<R.length&&(S=new f0("onBeforeInput","beforeinput",null,a,f),h.push({event:S,listeners:R}),S.data=N)),N2(h,e,d,a,f)}eE(h,t)})}function Jc(e,t,a){return{instance:e,listener:t,currentTarget:a}}function _f(e,t){for(var a=t+"Capture",s=[];e!==null;){var n=e,o=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||o===null||(n=Gc(e,a),n!=null&&s.unshift(Jc(e,n,o)),n=Gc(e,t),n!=null&&s.push(Jc(e,n,o))),e.tag===3)return s;e=e.return}return[]}function di(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ny(e,t,a,s,n){for(var o=t._reactName,i=[];a!==null&&a!==s;){var l=a,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||d===null||(c=d,n?(d=Gc(a,o),d!=null&&i.unshift(Jc(a,d,c))):n||(d=Gc(a,o),d!=null&&i.push(Jc(a,d,c)))),a=a.return}i.length!==0&&e.push({event:t,listeners:i})}var T2=/\r\n?/g,O2=/\u0000|\uFFFD/g;function oy(e){return(typeof e=="string"?e:""+e).replace(T2,`
`).replace(O2,"")}function aE(e,t){return t=oy(t),oy(e)===t}function rh(){}function Wt(e,t,a,s,n,o){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||fl(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&fl(e,""+s);break;case"className":lu(e,"class",s);break;case"tabIndex":lu(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":lu(e,a,s);break;case"style":aw(e,s,o);break;case"data":if(t!=="object"){lu(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Mu(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(a==="formAction"?(t!=="input"&&Wt(e,t,"name",n.name,n,null),Wt(e,t,"formEncType",n.formEncType,n,null),Wt(e,t,"formMethod",n.formMethod,n,null),Wt(e,t,"formTarget",n.formTarget,n,null)):(Wt(e,t,"encType",n.encType,n,null),Wt(e,t,"method",n.method,n,null),Wt(e,t,"target",n.target,n,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Mu(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=rh);break;case"onScroll":s!=null&&xt("scroll",e);break;case"onScrollEnd":s!=null&&xt("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(we(61));if(a=s.__html,a!=null){if(n.children!=null)throw Error(we(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=Mu(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":xt("beforetoggle",e),xt("toggle",e),Ru(e,"popover",s);break;case"xlinkActuate":Ir(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Ir(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Ir(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Ir(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Ir(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Ir(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Ir(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Ir(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Ir(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Ru(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=iT.get(a)||a,Ru(e,a,s))}}function Xp(e,t,a,s,n,o){switch(a){case"style":aw(e,s,o);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(we(61));if(a=s.__html,a!=null){if(n.children!=null)throw Error(we(60));e.innerHTML=a}}break;case"children":typeof s=="string"?fl(e,s):(typeof s=="number"||typeof s=="bigint")&&fl(e,""+s);break;case"onScroll":s!=null&&xt("scroll",e);break;case"onScrollEnd":s!=null&&xt("scrollend",e);break;case"onClick":s!=null&&(e.onclick=rh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zb.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(n=a.endsWith("Capture"),t=a.slice(2,n?a.length-7:void 0),o=e[ds]||null,o=o!=null?o[a]:null,typeof o=="function"&&e.removeEventListener(t,o,n),typeof s=="function")){typeof o!="function"&&o!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,n);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):Ru(e,a,s)}}}function La(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",e),xt("load",e);var s=!1,n=!1,o;for(o in a)if(a.hasOwnProperty(o)){var i=a[o];if(i!=null)switch(o){case"src":s=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(we(137,t));default:Wt(e,t,o,i,a,null)}}n&&Wt(e,t,"srcSet",a.srcSet,a,null),s&&Wt(e,t,"src",a.src,a,null);return;case"input":xt("invalid",e);var l=o=i=n=null,c=null,d=null;for(s in a)if(a.hasOwnProperty(s)){var f=a[s];if(f!=null)switch(s){case"name":n=f;break;case"type":i=f;break;case"checked":c=f;break;case"defaultChecked":d=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(we(137,t));break;default:Wt(e,t,s,f,a,null)}}Jb(e,o,l,c,d,i,n,!1),ef(e);return;case"select":xt("invalid",e),s=i=o=null;for(n in a)if(a.hasOwnProperty(n)&&(l=a[n],l!=null))switch(n){case"value":o=l;break;case"defaultValue":i=l;break;case"multiple":s=l;default:Wt(e,t,n,l,a,null)}t=o,a=i,e.multiple=!!s,t!=null?Ui(e,!!s,t,!1):a!=null&&Ui(e,!!s,a,!0);return;case"textarea":xt("invalid",e),o=n=s=null;for(i in a)if(a.hasOwnProperty(i)&&(l=a[i],l!=null))switch(i){case"value":s=l;break;case"defaultValue":n=l;break;case"children":o=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(we(91));break;default:Wt(e,t,i,l,a,null)}tw(e,s,n,o),ef(e);return;case"option":for(c in a)if(a.hasOwnProperty(c)&&(s=a[c],s!=null))switch(c){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Wt(e,t,c,s,a,null)}return;case"dialog":xt("beforetoggle",e),xt("toggle",e),xt("cancel",e),xt("close",e);break;case"iframe":case"object":xt("load",e);break;case"video":case"audio":for(s=0;s<Kc.length;s++)xt(Kc[s],e);break;case"image":xt("error",e),xt("load",e);break;case"details":xt("toggle",e);break;case"embed":case"source":case"link":xt("error",e),xt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in a)if(a.hasOwnProperty(d)&&(s=a[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(we(137,t));default:Wt(e,t,d,s,a,null)}return;default:if(sv(t)){for(f in a)a.hasOwnProperty(f)&&(s=a[f],s!==void 0&&Xp(e,t,f,s,a,void 0));return}}for(l in a)a.hasOwnProperty(l)&&(s=a[l],s!=null&&Wt(e,t,l,s,a,null))}function R2(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,o=null,i=null,l=null,c=null,d=null,f=null;for(m in a){var h=a[m];if(a.hasOwnProperty(m)&&h!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":c=h;default:s.hasOwnProperty(m)||Wt(e,t,m,null,s,h)}}for(var p in s){var m=s[p];if(h=a[p],s.hasOwnProperty(p)&&(m!=null||h!=null))switch(p){case"type":o=m;break;case"name":n=m;break;case"checked":d=m;break;case"defaultChecked":f=m;break;case"value":i=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(we(137,t));break;default:m!==h&&Wt(e,t,p,m,s,h)}}bp(e,i,l,c,d,f,o,n);return;case"select":m=i=l=p=null;for(o in a)if(c=a[o],a.hasOwnProperty(o)&&c!=null)switch(o){case"value":break;case"multiple":m=c;default:s.hasOwnProperty(o)||Wt(e,t,o,null,s,c)}for(n in s)if(o=s[n],c=a[n],s.hasOwnProperty(n)&&(o!=null||c!=null))switch(n){case"value":p=o;break;case"defaultValue":l=o;break;case"multiple":i=o;default:o!==c&&Wt(e,t,n,o,s,c)}t=l,a=i,s=m,p!=null?Ui(e,!!a,p,!1):!!s!=!!a&&(t!=null?Ui(e,!!a,t,!0):Ui(e,!!a,a?[]:"",!1));return;case"textarea":m=p=null;for(l in a)if(n=a[l],a.hasOwnProperty(l)&&n!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Wt(e,t,l,null,s,n)}for(i in s)if(n=s[i],o=a[i],s.hasOwnProperty(i)&&(n!=null||o!=null))switch(i){case"value":p=n;break;case"defaultValue":m=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(we(91));break;default:n!==o&&Wt(e,t,i,n,s,o)}ew(e,p,m);return;case"option":for(var b in a)if(p=a[b],a.hasOwnProperty(b)&&p!=null&&!s.hasOwnProperty(b))switch(b){case"selected":e.selected=!1;break;default:Wt(e,t,b,null,s,p)}for(c in s)if(p=s[c],m=a[c],s.hasOwnProperty(c)&&p!==m&&(p!=null||m!=null))switch(c){case"selected":e.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Wt(e,t,c,p,s,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var y in a)p=a[y],a.hasOwnProperty(y)&&p!=null&&!s.hasOwnProperty(y)&&Wt(e,t,y,null,s,p);for(d in s)if(p=s[d],m=a[d],s.hasOwnProperty(d)&&p!==m&&(p!=null||m!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(we(137,t));break;default:Wt(e,t,d,p,s,m)}return;default:if(sv(t)){for(var _ in a)p=a[_],a.hasOwnProperty(_)&&p!==void 0&&!s.hasOwnProperty(_)&&Xp(e,t,_,void 0,s,p);for(f in s)p=s[f],m=a[f],!s.hasOwnProperty(f)||p===m||p===void 0&&m===void 0||Xp(e,t,f,p,s,m);return}}for(var x in a)p=a[x],a.hasOwnProperty(x)&&p!=null&&!s.hasOwnProperty(x)&&Wt(e,t,x,null,s,p);for(h in s)p=s[h],m=a[h],!s.hasOwnProperty(h)||p===m||p==null&&m==null||Wt(e,t,h,p,s,m)}var Kp=null,Jp=null;function bf(e){return e.nodeType===9?e:e.ownerDocument}function iy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sE(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function eg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tm=null;function M2(){var e=window.event;return e&&e.type==="popstate"?e===Tm?!1:(Tm=e,!0):(Tm=null,!1)}var rE=typeof setTimeout=="function"?setTimeout:void 0,k2=typeof clearTimeout=="function"?clearTimeout:void 0,ly=typeof Promise=="function"?Promise:void 0,z2=typeof queueMicrotask=="function"?queueMicrotask:typeof ly<"u"?function(e){return ly.resolve(null).then(e).catch(P2)}:rE;function P2(e){setTimeout(function(){throw e})}function lo(e){return e==="head"}function cy(e,t){var a=t,s=0,n=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(0<s&&8>s){a=s;var i=e.ownerDocument;if(a&1&&Fc(i.documentElement),a&2&&Fc(i.body),a&4)for(a=i.head,Fc(a),i=a.firstChild;i;){var l=i.nextSibling,c=i.nodeName;i[Cd]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&i.rel.toLowerCase()==="stylesheet"||a.removeChild(i),i=l}}if(n===0){e.removeChild(o),rd(t);return}n--}else a==="$"||a==="$?"||a==="$!"?n++:s=a.charCodeAt(0)-48;else s=0;a=o}while(a);rd(t)}function tg(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":tg(a),av(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function I2(e,t,a,s){for(;e.nodeType===1;){var n=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Cd])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=tr(e.nextSibling),e===null)break}return null}function L2(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=tr(e.nextSibling),e===null))return null;return e}function ag(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function F2(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function tr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var sg=null;function dy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function nE(e,t,a){switch(t=bf(a),e){case"html":if(e=t.documentElement,!e)throw Error(we(452));return e;case"head":if(e=t.head,!e)throw Error(we(453));return e;case"body":if(e=t.body,!e)throw Error(we(454));return e;default:throw Error(we(451))}}function Fc(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);av(e)}var $s=new Map,uy=new Set;function wf(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var dn=zt.d;zt.d={f:$2,r:q2,D:B2,C:U2,L:H2,m:V2,X:Y2,S:G2,M:W2};function $2(){var e=dn.f(),t=th();return e||t}function q2(e){var t=Pl(e);t!==null&&t.tag===5&&t.type==="form"?Kw(t):dn.r(e)}var Fl=typeof document>"u"?null:document;function oE(e,t,a){var s=Fl;if(s&&typeof t=="string"&&t){var n=zs(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof a=="string"&&(n+='[crossorigin="'+a+'"]'),uy.has(n)||(uy.add(n),e={rel:e,crossOrigin:a,href:t},s.querySelector(n)===null&&(t=s.createElement("link"),La(t,"link",e),Oa(t),s.head.appendChild(t)))}}function B2(e){dn.D(e),oE("dns-prefetch",e,null)}function U2(e,t){dn.C(e,t),oE("preconnect",e,t)}function H2(e,t,a){dn.L(e,t,a);var s=Fl;if(s&&e&&t){var n='link[rel="preload"][as="'+zs(t)+'"]';t==="image"&&a&&a.imageSrcSet?(n+='[imagesrcset="'+zs(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(n+='[imagesizes="'+zs(a.imageSizes)+'"]')):n+='[href="'+zs(e)+'"]';var o=n;switch(t){case"style":o=_l(e);break;case"script":o=$l(e)}$s.has(o)||(e=oa({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),$s.set(o,e),s.querySelector(n)!==null||t==="style"&&s.querySelector(Id(o))||t==="script"&&s.querySelector(Ld(o))||(t=s.createElement("link"),La(t,"link",e),Oa(t),s.head.appendChild(t)))}}function V2(e,t){dn.m(e,t);var a=Fl;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+zs(s)+'"][href="'+zs(e)+'"]',o=n;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=$l(e)}if(!$s.has(o)&&(e=oa({rel:"modulepreload",href:e},t),$s.set(o,e),a.querySelector(n)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ld(o)))return}s=a.createElement("link"),La(s,"link",e),Oa(s),a.head.appendChild(s)}}}function G2(e,t,a){dn.S(e,t,a);var s=Fl;if(s&&e){var n=Bi(s).hoistableStyles,o=_l(e);t=t||"default";var i=n.get(o);if(!i){var l={loading:0,preload:null};if(i=s.querySelector(Id(o)))l.loading=5;else{e=oa({rel:"stylesheet",href:e,"data-precedence":t},a),(a=$s.get(o))&&Fv(e,a);var c=i=s.createElement("link");Oa(c),La(c,"link",e),c._p=new Promise(function(d,f){c.onload=d,c.onerror=f}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Bu(i,t,s)}i={type:"stylesheet",instance:i,count:1,state:l},n.set(o,i)}}}function Y2(e,t){dn.X(e,t);var a=Fl;if(a&&e){var s=Bi(a).hoistableScripts,n=$l(e),o=s.get(n);o||(o=a.querySelector(Ld(n)),o||(e=oa({src:e,async:!0},t),(t=$s.get(n))&&$v(e,t),o=a.createElement("script"),Oa(o),La(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(n,o))}}function W2(e,t){dn.M(e,t);var a=Fl;if(a&&e){var s=Bi(a).hoistableScripts,n=$l(e),o=s.get(n);o||(o=a.querySelector(Ld(n)),o||(e=oa({src:e,async:!0,type:"module"},t),(t=$s.get(n))&&$v(e,t),o=a.createElement("script"),Oa(o),La(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(n,o))}}function fy(e,t,a,s){var n=(n=Vn.current)?wf(n):null;if(!n)throw Error(we(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=_l(a.href),a=Bi(n).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=_l(a.href);var o=Bi(n).hoistableStyles,i=o.get(e);if(i||(n=n.ownerDocument||n,i={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,i),(o=n.querySelector(Id(e)))&&!o._p&&(i.instance=o,i.state.loading=5),$s.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},$s.set(e,a),o||Q2(n,e,a,i.state))),t&&s===null)throw Error(we(528,""));return i}if(t&&s!==null)throw Error(we(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=$l(a),a=Bi(n).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(we(444,e))}}function _l(e){return'href="'+zs(e)+'"'}function Id(e){return'link[rel="stylesheet"]['+e+"]"}function iE(e){return oa({},e,{"data-precedence":e.precedence,precedence:null})}function Q2(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),La(t,"link",a),Oa(t),e.head.appendChild(t))}function $l(e){return'[src="'+zs(e)+'"]'}function Ld(e){return"script[async]"+e}function hy(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+zs(a.href)+'"]');if(s)return t.instance=s,Oa(s),s;var n=oa({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Oa(s),La(s,"style",n),Bu(s,a.precedence,e),t.instance=s;case"stylesheet":n=_l(a.href);var o=e.querySelector(Id(n));if(o)return t.state.loading|=4,t.instance=o,Oa(o),o;s=iE(a),(n=$s.get(n))&&Fv(s,n),o=(e.ownerDocument||e).createElement("link"),Oa(o);var i=o;return i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),La(o,"link",s),t.state.loading|=4,Bu(o,a.precedence,e),t.instance=o;case"script":return o=$l(a.src),(n=e.querySelector(Ld(o)))?(t.instance=n,Oa(n),n):(s=a,(n=$s.get(o))&&(s=oa({},a),$v(s,n)),e=e.ownerDocument||e,n=e.createElement("script"),Oa(n),La(n,"link",s),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(we(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(s=t.instance,t.state.loading|=4,Bu(s,a.precedence,e));return t.instance}function Bu(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=s.length?s[s.length-1]:null,o=n,i=0;i<s.length;i++){var l=s[i];if(l.dataset.precedence===t)o=l;else if(o!==n)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Fv(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function $v(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Uu=null;function my(e,t,a){if(Uu===null){var s=new Map,n=Uu=new Map;n.set(a,s)}else n=Uu,s=n.get(a),s||(s=new Map,n.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),n=0;n<a.length;n++){var o=a[n];if(!(o[Cd]||o[Ga]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var i=o.getAttribute(t)||"";i=e+i;var l=s.get(i);l?l.push(o):s.set(i,[o])}}return s}function py(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Z2(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function lE(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var ed=null;function X2(){}function K2(e,t,a){if(ed===null)throw Error(we(475));var s=ed;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var n=_l(a.href),o=e.querySelector(Id(n));if(o){e=o._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=jf.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=o,Oa(o);return}o=e.ownerDocument||e,a=iE(a),(n=$s.get(n))&&Fv(a,n),o=o.createElement("link"),Oa(o);var i=o;i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),La(o,"link",a),t.instance=o}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(s.count++,t=jf.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function J2(){if(ed===null)throw Error(we(475));var e=ed;return e.stylesheets&&e.count===0&&rg(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&rg(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function jf(){if(this.count--,this.count===0){if(this.stylesheets)rg(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ef=null;function rg(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ef=new Map,t.forEach(eO,e),Ef=null,jf.call(e))}function eO(e,t){if(!(t.state.loading&4)){var a=Ef.get(e);if(a)var s=a.get(null);else{a=new Map,Ef.set(e,a);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<n.length;o++){var i=n[o];(i.nodeName==="LINK"||i.getAttribute("media")!=="not all")&&(a.set(i.dataset.precedence,i),s=i)}s&&a.set(null,s)}n=t.instance,i=n.getAttribute("data-precedence"),o=a.get(i)||s,o===s&&a.set(null,n),a.set(i,n),this.count++,s=jf.bind(this),n.addEventListener("load",s),n.addEventListener("error",s),o?o.parentNode.insertBefore(n,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var td={$$typeof:Gr,Provider:null,Consumer:null,_currentValue:ko,_currentValue2:ko,_threadCount:0};function tO(e,t,a,s,n,o,i,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kh(0),this.hiddenUpdates=Kh(null),this.identifierPrefix=s,this.onUncaughtError=n,this.onCaughtError=o,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function cE(e,t,a,s,n,o,i,l,c,d,f,h){return e=new tO(e,t,a,i,l,c,d,h),t=1,o===!0&&(t|=24),o=bs(3,null,null,t),e.current=o,o.stateNode=e,t=mv(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:s,isDehydrated:a,cache:t},gv(o),e}function dE(e){return e?(e=Li,e):Li}function uE(e,t,a,s,n,o){n=dE(n),s.context===null?s.context=n:s.pendingContext=n,s=Gn(t),s.payload={element:a},o=o===void 0?null:o,o!==null&&(s.callback=o),a=Yn(e,s,t),a!==null&&(Ss(a,e,t),Oc(a,e,t))}function gy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function qv(e,t){gy(e,t),(e=e.alternate)&&gy(e,t)}function fE(e){if(e.tag===13){var t=Il(e,67108864);t!==null&&Ss(t,e,67108864),qv(e,67108864)}}var Sf=!0;function aO(e,t,a,s){var n=Xe.T;Xe.T=null;var o=zt.p;try{zt.p=2,Bv(e,t,a,s)}finally{zt.p=o,Xe.T=n}}function sO(e,t,a,s){var n=Xe.T;Xe.T=null;var o=zt.p;try{zt.p=8,Bv(e,t,a,s)}finally{zt.p=o,Xe.T=n}}function Bv(e,t,a,s){if(Sf){var n=ng(s);if(n===null)Dm(e,t,s,Nf,a),vy(e,s);else if(nO(n,e,t,a,s))s.stopPropagation();else if(vy(e,s),t&4&&-1<rO.indexOf(e)){for(;n!==null;){var o=Pl(n);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var i=_o(o.pendingLanes);if(i!==0){var l=o;for(l.pendingLanes|=2,l.entangledLanes|=2;i;){var c=1<<31-js(i);l.entanglements[1]|=c,i&=~c}Dr(o),!(Vt&6)&&(gf=Er()+500,Pd(0))}}break;case 13:l=Il(o,2),l!==null&&Ss(l,o,2),th(),qv(o,2)}if(o=ng(s),o===null&&Dm(e,t,s,Nf,a),o===n)break;n=o}n!==null&&s.stopPropagation()}else Dm(e,t,s,null,a)}}function ng(e){return e=rv(e),Uv(e)}var Nf=null;function Uv(e){if(Nf=null,e=Ri(e),e!==null){var t=jd(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=Ib(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Nf=e,null}function hE(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(UD()){case qb:return 2;case Bb:return 8;case Ju:case HD:return 32;case Ub:return 268435456;default:return 32}default:return 32}}var og=!1,Zn=null,Xn=null,Kn=null,ad=new Map,sd=new Map,Mn=[],rO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vy(e,t){switch(e){case"focusin":case"focusout":Zn=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":ad.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sd.delete(t.pointerId)}}function cc(e,t,a,s,n,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:o,targetContainers:[n]},t!==null&&(t=Pl(t),t!==null&&fE(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function nO(e,t,a,s,n){switch(t){case"focusin":return Zn=cc(Zn,e,t,a,s,n),!0;case"dragenter":return Xn=cc(Xn,e,t,a,s,n),!0;case"mouseover":return Kn=cc(Kn,e,t,a,s,n),!0;case"pointerover":var o=n.pointerId;return ad.set(o,cc(ad.get(o)||null,e,t,a,s,n)),!0;case"gotpointercapture":return o=n.pointerId,sd.set(o,cc(sd.get(o)||null,e,t,a,s,n)),!0}return!1}function mE(e){var t=Ri(e.target);if(t!==null){var a=jd(t);if(a!==null){if(t=a.tag,t===13){if(t=Ib(a),t!==null){e.blockedOn=t,KD(e.priority,function(){if(a.tag===13){var s=Es();s=ev(s);var n=Il(a,s);n!==null&&Ss(n,a,s),qv(a,s)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=ng(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);jp=s,a.target.dispatchEvent(s),jp=null}else return t=Pl(a),t!==null&&fE(t),e.blockedOn=a,!1;t.shift()}return!0}function xy(e,t,a){Hu(e)&&a.delete(t)}function oO(){og=!1,Zn!==null&&Hu(Zn)&&(Zn=null),Xn!==null&&Hu(Xn)&&(Xn=null),Kn!==null&&Hu(Kn)&&(Kn=null),ad.forEach(xy),sd.forEach(xy)}function gu(e,t){e.blockedOn===t&&(e.blockedOn=null,og||(og=!0,Ca.unstable_scheduleCallback(Ca.unstable_NormalPriority,oO)))}var vu=null;function yy(e){vu!==e&&(vu=e,Ca.unstable_scheduleCallback(Ca.unstable_NormalPriority,function(){vu===e&&(vu=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],n=e[t+2];if(typeof s!="function"){if(Uv(s||a)===null)continue;break}var o=Pl(a);o!==null&&(e.splice(t,3),t-=3,Fp(o,{pending:!0,data:n,method:a.method,action:s},s,n))}}))}function rd(e){function t(c){return gu(c,e)}Zn!==null&&gu(Zn,e),Xn!==null&&gu(Xn,e),Kn!==null&&gu(Kn,e),ad.forEach(t),sd.forEach(t);for(var a=0;a<Mn.length;a++){var s=Mn[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Mn.length&&(a=Mn[0],a.blockedOn===null);)mE(a),a.blockedOn===null&&Mn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var n=a[s],o=a[s+1],i=n[ds]||null;if(typeof o=="function")i||yy(a);else if(i){var l=null;if(o&&o.hasAttribute("formAction")){if(n=o,i=o[ds]||null)l=i.formAction;else if(Uv(n)!==null)continue}else l=i.action;typeof l=="function"?a[s+1]=l:(a.splice(s,3),s-=3),yy(a)}}}function Hv(e){this._internalRoot=e}nh.prototype.render=Hv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(we(409));var a=t.current,s=Es();uE(a,s,e,t,null,null)};nh.prototype.unmount=Hv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;uE(e.current,2,null,e,null,null),th(),t[zl]=null}};function nh(e){this._internalRoot=e}nh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wb();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Mn.length&&t!==0&&t<Mn[a].priority;a++);Mn.splice(a,0,e),a===0&&mE(e)}};var _y=zb.version;if(_y!=="19.1.1")throw Error(we(527,_y,"19.1.1"));zt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(we(188)):(e=Object.keys(e).join(","),Error(we(268,e)));return e=PD(t),e=e!==null?Lb(e):null,e=e===null?null:e.stateNode,e};var iO={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Xe,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xu.isDisabled&&xu.supportsFiber)try{Ed=xu.inject(iO),ws=xu}catch{}}Uf.createRoot=function(e,t){if(!Pb(e))throw Error(we(299));var a=!1,s="",n=cj,o=dj,i=uj,l=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(i=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=cE(e,1,!1,null,null,a,s,n,o,i,l,null),e[zl]=t.current,Lv(e),new Hv(t)};Uf.hydrateRoot=function(e,t,a){if(!Pb(e))throw Error(we(299));var s=!1,n="",o=cj,i=dj,l=uj,c=null,d=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(i=a.onCaughtError),a.onRecoverableError!==void 0&&(l=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(c=a.unstable_transitionCallbacks),a.formState!==void 0&&(d=a.formState)),t=cE(e,1,!0,t,a??null,s,n,o,i,l,c,d),t.context=dE(null),a=t.current,s=Es(),s=ev(s),n=Gn(s),n.callback=null,Yn(a,n,s),a=s,t.current.lanes=a,Nd(t,a),Dr(t),e[zl]=t.current,Lv(e),new nh(t)};Uf.version="19.1.1";function pE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pE)}catch(e){console.error(e)}}pE(),bb.exports=Uf;var lO=bb.exports,cO=(e,t,a,s,n,o,i,l)=>{let c=document.documentElement,d=["light","dark"];function f(m){(Array.isArray(e)?e:[e]).forEach(b=>{let y=b==="class",_=y&&o?n.map(x=>o[x]||x):n;y?(c.classList.remove(..._),c.classList.add(o&&o[m]?o[m]:m)):c.setAttribute(b,m)}),h(m)}function h(m){l&&d.includes(m)&&(c.style.colorScheme=m)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)f(s);else try{let m=localStorage.getItem(t)||a,b=i&&m==="system"?p():m;f(b)}catch{}},dO=u.createContext(void 0),uO={setTheme:e=>{},themes:[]},fO=()=>{var e;return(e=u.useContext(dO))!=null?e:uO};u.memo(({forcedTheme:e,storageKey:t,attribute:a,enableSystem:s,enableColorScheme:n,defaultTheme:o,value:i,themes:l,nonce:c,scriptProps:d})=>{let f=JSON.stringify([a,t,o,e,l,i,s,n]).slice(1,-1);return u.createElement("script",{...d,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${cO.toString()})(${f})`}})});var hO=e=>{switch(e){case"success":return gO;case"info":return xO;case"warning":return vO;case"error":return yO;default:return null}},mO=Array(12).fill(0),pO=({visible:e,className:t})=>se.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},se.createElement("div",{className:"sonner-spinner"},mO.map((a,s)=>se.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),gO=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),vO=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),xO=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),yO=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_O=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},se.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),se.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),bO=()=>{let[e,t]=se.useState(document.hidden);return se.useEffect(()=>{let a=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",a),()=>window.removeEventListener("visibilitychange",a)},[]),e},ig=1,wO=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:a,...s}=e,n=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:ig++,o=this.toasts.find(l=>l.id===n),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),o?this.toasts=this.toasts.map(l=>l.id===n?(this.publish({...l,...e,id:n,title:a}),{...l,...e,id:n,dismissible:i,title:a}):l):this.addToast({title:a,...s,dismissible:i,id:n}),n},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(a=>a({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let a;t.loading!==void 0&&(a=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),n=a!==void 0,o,i=s.then(async c=>{if(o=["resolve",c],se.isValidElement(c))n=!1,this.create({id:a,type:"default",message:c});else if(EO(c)&&!c.ok){n=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,f=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:a,type:"error",message:d,description:f})}else if(t.success!==void 0){n=!1;let d=typeof t.success=="function"?await t.success(c):t.success,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:a,type:"success",message:d,description:f})}}).catch(async c=>{if(o=["reject",c],t.error!==void 0){n=!1;let d=typeof t.error=="function"?await t.error(c):t.error,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:a,type:"error",message:d,description:f})}}).finally(()=>{var c;n&&(this.dismiss(a),a=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>i.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof a!="string"&&typeof a!="number"?{unwrap:l}:Object.assign(a,{unwrap:l})},this.custom=(e,t)=>{let a=(t==null?void 0:t.id)||ig++;return this.create({jsx:e(a),id:a,...t}),a},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ls=new wO,jO=(e,t)=>{let a=(t==null?void 0:t.id)||ig++;return ls.addToast({title:e,...t,id:a}),a},EO=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",SO=jO,NO=()=>ls.toasts,CO=()=>ls.getActiveToasts();Object.assign(SO,{success:ls.success,info:ls.info,warning:ls.warning,error:ls.error,custom:ls.custom,message:ls.message,promise:ls.promise,dismiss:ls.dismiss,loading:ls.loading},{getHistory:NO,getToasts:CO});function AO(e,{insertAt:t}={}){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&a.firstChild?a.insertBefore(s,a.firstChild):a.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}AO(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function yu(e){return e.label!==void 0}var DO=3,TO="32px",OO="16px",by=4e3,RO=356,MO=14,kO=20,zO=200;function Gs(...e){return e.filter(Boolean).join(" ")}function PO(e){let[t,a]=e.split("-"),s=[];return t&&s.push(t),a&&s.push(a),s}var IO=e=>{var t,a,s,n,o,i,l,c,d,f,h;let{invert:p,toast:m,unstyled:b,interacting:y,setHeights:_,visibleToasts:x,heights:v,index:g,toasts:E,expanded:j,removeToast:S,defaultRichColors:N,closeButton:R,style:T,cancelButtonStyle:F,actionButtonStyle:U,className:Z="",descriptionClassName:ce="",duration:k,position:M,gap:A,loadingIcon:q,expandByDefault:I,classNames:w,icons:C,closeButtonAriaLabel:$="Close toast",pauseWhenPageIsHidden:O}=e,[L,H]=se.useState(null),[G,te]=se.useState(null),[Y,be]=se.useState(!1),[de,V]=se.useState(!1),[le,B]=se.useState(!1),[ie,xe]=se.useState(!1),[pe,Ce]=se.useState(!1),[De,he]=se.useState(0),[P,ee]=se.useState(0),ue=se.useRef(m.duration||k||by),K=se.useRef(null),ne=se.useRef(null),D=g===0,Q=g+1<=x,J=m.type,oe=m.dismissible!==!1,ge=m.className||"",Ne=m.descriptionClassName||"",me=se.useMemo(()=>v.findIndex(Ge=>Ge.toastId===m.id)||0,[v,m.id]),_e=se.useMemo(()=>{var Ge;return(Ge=m.closeButton)!=null?Ge:R},[m.closeButton,R]),je=se.useMemo(()=>m.duration||k||by,[m.duration,k]),Ze=se.useRef(0),it=se.useRef(0),Je=se.useRef(0),mt=se.useRef(null),[wt,ka]=M.split("-"),We=se.useMemo(()=>v.reduce((Ge,Se,at)=>at>=me?Ge:Ge+Se.height,0),[v,me]),Ct=bO(),Ke=m.invert||p,Rt=J==="loading";it.current=se.useMemo(()=>me*A+We,[me,We]),se.useEffect(()=>{ue.current=je},[je]),se.useEffect(()=>{be(!0)},[]),se.useEffect(()=>{let Ge=ne.current;if(Ge){let Se=Ge.getBoundingClientRect().height;return ee(Se),_(at=>[{toastId:m.id,height:Se,position:m.position},...at]),()=>_(at=>at.filter(Mt=>Mt.toastId!==m.id))}},[_,m.id]),se.useLayoutEffect(()=>{if(!Y)return;let Ge=ne.current,Se=Ge.style.height;Ge.style.height="auto";let at=Ge.getBoundingClientRect().height;Ge.style.height=Se,ee(at),_(Mt=>Mt.find(st=>st.toastId===m.id)?Mt.map(st=>st.toastId===m.id?{...st,height:at}:st):[{toastId:m.id,height:at,position:m.position},...Mt])},[Y,m.title,m.description,_,m.id]);let Gt=se.useCallback(()=>{V(!0),he(it.current),_(Ge=>Ge.filter(Se=>Se.toastId!==m.id)),setTimeout(()=>{S(m)},zO)},[m,S,_,it]);se.useEffect(()=>{if(m.promise&&J==="loading"||m.duration===1/0||m.type==="loading")return;let Ge;return j||y||O&&Ct?(()=>{if(Je.current<Ze.current){let Se=new Date().getTime()-Ze.current;ue.current=ue.current-Se}Je.current=new Date().getTime()})():ue.current!==1/0&&(Ze.current=new Date().getTime(),Ge=setTimeout(()=>{var Se;(Se=m.onAutoClose)==null||Se.call(m,m),Gt()},ue.current)),()=>clearTimeout(Ge)},[j,y,m,J,O,Ct,Gt]),se.useEffect(()=>{m.delete&&Gt()},[Gt,m.delete]);function ft(){var Ge,Se,at;return C!=null&&C.loading?se.createElement("div",{className:Gs(w==null?void 0:w.loader,(Ge=m==null?void 0:m.classNames)==null?void 0:Ge.loader,"sonner-loader"),"data-visible":J==="loading"},C.loading):q?se.createElement("div",{className:Gs(w==null?void 0:w.loader,(Se=m==null?void 0:m.classNames)==null?void 0:Se.loader,"sonner-loader"),"data-visible":J==="loading"},q):se.createElement(pO,{className:Gs(w==null?void 0:w.loader,(at=m==null?void 0:m.classNames)==null?void 0:at.loader),visible:J==="loading"})}return se.createElement("li",{tabIndex:0,ref:ne,className:Gs(Z,ge,w==null?void 0:w.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,w==null?void 0:w.default,w==null?void 0:w[J],(a=m==null?void 0:m.classNames)==null?void 0:a[J]),"data-sonner-toast":"","data-rich-colors":(s=m.richColors)!=null?s:N,"data-styled":!(m.jsx||m.unstyled||b),"data-mounted":Y,"data-promise":!!m.promise,"data-swiped":pe,"data-removed":de,"data-visible":Q,"data-y-position":wt,"data-x-position":ka,"data-index":g,"data-front":D,"data-swiping":le,"data-dismissible":oe,"data-type":J,"data-invert":Ke,"data-swipe-out":ie,"data-swipe-direction":G,"data-expanded":!!(j||I&&Y),style:{"--index":g,"--toasts-before":g,"--z-index":E.length-g,"--offset":`${de?De:it.current}px`,"--initial-height":I?"auto":`${P}px`,...T,...m.style},onDragEnd:()=>{B(!1),H(null),mt.current=null},onPointerDown:Ge=>{Rt||!oe||(K.current=new Date,he(it.current),Ge.target.setPointerCapture(Ge.pointerId),Ge.target.tagName!=="BUTTON"&&(B(!0),mt.current={x:Ge.clientX,y:Ge.clientY}))},onPointerUp:()=>{var Ge,Se,at,Mt;if(ie||!oe)return;mt.current=null;let st=Number(((Ge=ne.current)==null?void 0:Ge.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ft=Number(((Se=ne.current)==null?void 0:Se.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),fe=new Date().getTime()-((at=K.current)==null?void 0:at.getTime()),Re=L==="x"?st:Ft,Le=Math.abs(Re)/fe;if(Math.abs(Re)>=kO||Le>.11){he(it.current),(Mt=m.onDismiss)==null||Mt.call(m,m),te(L==="x"?st>0?"right":"left":Ft>0?"down":"up"),Gt(),xe(!0),Ce(!1);return}B(!1),H(null)},onPointerMove:Ge=>{var Se,at,Mt,st;if(!mt.current||!oe||((Se=window.getSelection())==null?void 0:Se.toString().length)>0)return;let Ft=Ge.clientY-mt.current.y,fe=Ge.clientX-mt.current.x,Re=(at=e.swipeDirections)!=null?at:PO(M);!L&&(Math.abs(fe)>1||Math.abs(Ft)>1)&&H(Math.abs(fe)>Math.abs(Ft)?"x":"y");let Le={x:0,y:0};L==="y"?(Re.includes("top")||Re.includes("bottom"))&&(Re.includes("top")&&Ft<0||Re.includes("bottom")&&Ft>0)&&(Le.y=Ft):L==="x"&&(Re.includes("left")||Re.includes("right"))&&(Re.includes("left")&&fe<0||Re.includes("right")&&fe>0)&&(Le.x=fe),(Math.abs(Le.x)>0||Math.abs(Le.y)>0)&&Ce(!0),(Mt=ne.current)==null||Mt.style.setProperty("--swipe-amount-x",`${Le.x}px`),(st=ne.current)==null||st.style.setProperty("--swipe-amount-y",`${Le.y}px`)}},_e&&!m.jsx?se.createElement("button",{"aria-label":$,"data-disabled":Rt,"data-close-button":!0,onClick:Rt||!oe?()=>{}:()=>{var Ge;Gt(),(Ge=m.onDismiss)==null||Ge.call(m,m)},className:Gs(w==null?void 0:w.closeButton,(n=m==null?void 0:m.classNames)==null?void 0:n.closeButton)},(o=C==null?void 0:C.close)!=null?o:_O):null,m.jsx||u.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:se.createElement(se.Fragment,null,J||m.icon||m.promise?se.createElement("div",{"data-icon":"",className:Gs(w==null?void 0:w.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||ft():null,m.type!=="loading"?m.icon||(C==null?void 0:C[J])||hO(J):null):null,se.createElement("div",{"data-content":"",className:Gs(w==null?void 0:w.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},se.createElement("div",{"data-title":"",className:Gs(w==null?void 0:w.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?se.createElement("div",{"data-description":"",className:Gs(ce,Ne,w==null?void 0:w.description,(d=m==null?void 0:m.classNames)==null?void 0:d.description)},typeof m.description=="function"?m.description():m.description):null),u.isValidElement(m.cancel)?m.cancel:m.cancel&&yu(m.cancel)?se.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||F,onClick:Ge=>{var Se,at;yu(m.cancel)&&oe&&((at=(Se=m.cancel).onClick)==null||at.call(Se,Ge),Gt())},className:Gs(w==null?void 0:w.cancelButton,(f=m==null?void 0:m.classNames)==null?void 0:f.cancelButton)},m.cancel.label):null,u.isValidElement(m.action)?m.action:m.action&&yu(m.action)?se.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||U,onClick:Ge=>{var Se,at;yu(m.action)&&((at=(Se=m.action).onClick)==null||at.call(Se,Ge),!Ge.defaultPrevented&&Gt())},className:Gs(w==null?void 0:w.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function wy(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function LO(e,t){let a={};return[e,t].forEach((s,n)=>{let o=n===1,i=o?"--mobile-offset":"--offset",l=o?OO:TO;function c(d){["top","right","bottom","left"].forEach(f=>{a[`${i}-${f}`]=typeof d=="number"?`${d}px`:d})}typeof s=="number"||typeof s=="string"?c(s):typeof s=="object"?["top","right","bottom","left"].forEach(d=>{s[d]===void 0?a[`${i}-${d}`]=l:a[`${i}-${d}`]=typeof s[d]=="number"?`${s[d]}px`:s[d]}):c(l)}),a}var FO=u.forwardRef(function(e,t){let{invert:a,position:s="bottom-right",hotkey:n=["altKey","KeyT"],expand:o,closeButton:i,className:l,offset:c,mobileOffset:d,theme:f="light",richColors:h,duration:p,style:m,visibleToasts:b=DO,toastOptions:y,dir:_=wy(),gap:x=MO,loadingIcon:v,icons:g,containerAriaLabel:E="Notifications",pauseWhenPageIsHidden:j}=e,[S,N]=se.useState([]),R=se.useMemo(()=>Array.from(new Set([s].concat(S.filter(O=>O.position).map(O=>O.position)))),[S,s]),[T,F]=se.useState([]),[U,Z]=se.useState(!1),[ce,k]=se.useState(!1),[M,A]=se.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),q=se.useRef(null),I=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=se.useRef(null),C=se.useRef(!1),$=se.useCallback(O=>{N(L=>{var H;return(H=L.find(G=>G.id===O.id))!=null&&H.delete||ls.dismiss(O.id),L.filter(({id:G})=>G!==O.id)})},[]);return se.useEffect(()=>ls.subscribe(O=>{if(O.dismiss){N(L=>L.map(H=>H.id===O.id?{...H,delete:!0}:H));return}setTimeout(()=>{kb.flushSync(()=>{N(L=>{let H=L.findIndex(G=>G.id===O.id);return H!==-1?[...L.slice(0,H),{...L[H],...O},...L.slice(H+1)]:[O,...L]})})})}),[]),se.useEffect(()=>{if(f!=="system"){A(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?A("dark"):A("light")),typeof window>"u")return;let O=window.matchMedia("(prefers-color-scheme: dark)");try{O.addEventListener("change",({matches:L})=>{A(L?"dark":"light")})}catch{O.addListener(({matches:H})=>{try{A(H?"dark":"light")}catch(G){console.error(G)}})}},[f]),se.useEffect(()=>{S.length<=1&&Z(!1)},[S]),se.useEffect(()=>{let O=L=>{var H,G;n.every(te=>L[te]||L.code===te)&&(Z(!0),(H=q.current)==null||H.focus()),L.code==="Escape"&&(document.activeElement===q.current||(G=q.current)!=null&&G.contains(document.activeElement))&&Z(!1)};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[n]),se.useEffect(()=>{if(q.current)return()=>{w.current&&(w.current.focus({preventScroll:!0}),w.current=null,C.current=!1)}},[q.current]),se.createElement("section",{ref:t,"aria-label":`${E} ${I}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((O,L)=>{var H;let[G,te]=O.split("-");return S.length?se.createElement("ol",{key:O,dir:_==="auto"?wy():_,tabIndex:-1,ref:q,className:l,"data-sonner-toaster":!0,"data-theme":M,"data-y-position":G,"data-lifted":U&&S.length>1&&!o,"data-x-position":te,style:{"--front-toast-height":`${((H=T[0])==null?void 0:H.height)||0}px`,"--width":`${RO}px`,"--gap":`${x}px`,...m,...LO(c,d)},onBlur:Y=>{C.current&&!Y.currentTarget.contains(Y.relatedTarget)&&(C.current=!1,w.current&&(w.current.focus({preventScroll:!0}),w.current=null))},onFocus:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||C.current||(C.current=!0,w.current=Y.relatedTarget)},onMouseEnter:()=>Z(!0),onMouseMove:()=>Z(!0),onMouseLeave:()=>{ce||Z(!1)},onDragEnd:()=>Z(!1),onPointerDown:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||k(!0)},onPointerUp:()=>k(!1)},S.filter(Y=>!Y.position&&L===0||Y.position===O).map((Y,be)=>{var de,V;return se.createElement(IO,{key:Y.id,icons:g,index:be,toast:Y,defaultRichColors:h,duration:(de=y==null?void 0:y.duration)!=null?de:p,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:a,visibleToasts:b,closeButton:(V=y==null?void 0:y.closeButton)!=null?V:i,interacting:ce,position:O,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:$,toasts:S.filter(le=>le.position==Y.position),heights:T.filter(le=>le.position==Y.position),setHeights:F,expandByDefault:o,gap:x,loadingIcon:v,expanded:U,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const $O=({...e})=>{const{theme:t="system"}=fO();return r.jsx(FO,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},qO=1,BO=1e6;let Om=0;function UO(){return Om=(Om+1)%Number.MAX_SAFE_INTEGER,Om.toString()}const Rm=new Map,jy=e=>{if(Rm.has(e))return;const t=setTimeout(()=>{Rm.delete(e),$c({type:"REMOVE_TOAST",toastId:e})},BO);Rm.set(e,t)},HO=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,qO)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=t;return a?jy(a):e.toasts.forEach(s=>{jy(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===a||a===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(a=>a.id!==t.toastId)}}},Vu=[];let Gu={toasts:[]};function $c(e){Gu=HO(Gu,e),Vu.forEach(t=>{t(Gu)})}function VO({...e}){const t=UO(),a=n=>$c({type:"UPDATE_TOAST",toast:{...n,id:t}}),s=()=>$c({type:"DISMISS_TOAST",toastId:t});return $c({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:n=>{n||s()}}}),{id:t,dismiss:s,update:a}}function fa(){const[e,t]=u.useState(Gu);return u.useEffect(()=>(Vu.push(t),()=>{const a=Vu.indexOf(t);a>-1&&Vu.splice(a,1)}),[e]),{...e,toast:VO,dismiss:a=>$c({type:"DISMISS_TOAST",toastId:a})}}function Be(e,t,{checkForDefaultPrevented:a=!0}={}){return function(n){if(e==null||e(n),a===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function Ey(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Yo(...e){return t=>{let a=!1;const s=e.map(n=>{const o=Ey(n,t);return!a&&typeof o=="function"&&(a=!0),o});if(a)return()=>{for(let n=0;n<s.length;n++){const o=s[n];typeof o=="function"?o():Ey(e[n],null)}}}}function Nt(...e){return u.useCallback(Yo(...e),e)}function GO(e,t){const a=u.createContext(t),s=o=>{const{children:i,...l}=o,c=u.useMemo(()=>l,Object.values(l));return r.jsx(a.Provider,{value:c,children:i})};s.displayName=e+"Provider";function n(o){const i=u.useContext(a);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,n]}function As(e,t=[]){let a=[];function s(o,i){const l=u.createContext(i),c=a.length;a=[...a,i];const d=h=>{var x;const{scope:p,children:m,...b}=h,y=((x=p==null?void 0:p[e])==null?void 0:x[c])||l,_=u.useMemo(()=>b,Object.values(b));return r.jsx(y.Provider,{value:_,children:m})};d.displayName=o+"Provider";function f(h,p){var y;const m=((y=p==null?void 0:p[e])==null?void 0:y[c])||l,b=u.useContext(m);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[d,f]}const n=()=>{const o=a.map(i=>u.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return u.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return n.scopeName=e,[s,YO(n,...t)]}function YO(...e){const t=e[0];if(e.length===1)return t;const a=()=>{const s=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(o){const i=s.reduce((l,{useScope:c,scopeName:d})=>{const h=c(o)[`__scope${d}`];return{...l,...h}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return a.scopeName=t.scopeName,a}function Wo(e){const t=QO(e),a=u.forwardRef((s,n)=>{const{children:o,...i}=s,l=u.Children.toArray(o),c=l.find(ZO);if(c){const d=c.props.children,f=l.map(h=>h===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...i,ref:n,children:u.isValidElement(d)?u.cloneElement(d,void 0,f):null})}return r.jsx(t,{...i,ref:n,children:o})});return a.displayName=`${e}.Slot`,a}var WO=Wo("Slot");function QO(e){const t=u.forwardRef((a,s)=>{const{children:n,...o}=a;if(u.isValidElement(n)){const i=KO(n),l=XO(o,n.props);return n.type!==u.Fragment&&(l.ref=s?Yo(s,i):i),u.cloneElement(n,l)}return u.Children.count(n)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var gE=Symbol("radix.slottable");function vE(e){const t=({children:a})=>r.jsx(r.Fragment,{children:a});return t.displayName=`${e}.Slottable`,t.__radixId=gE,t}function ZO(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===gE}function XO(e,t){const a={...t};for(const s in t){const n=e[s],o=t[s];/^on[A-Z]/.test(s)?n&&o?a[s]=(...l)=>{const c=o(...l);return n(...l),c}:n&&(a[s]=n):s==="style"?a[s]={...n,...o}:s==="className"&&(a[s]=[n,o].filter(Boolean).join(" "))}return{...e,...a}}function KO(e){var s,n;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,a=t&&"isReactWarning"in t&&t.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}function Vv(e){const t=e+"CollectionProvider",[a,s]=As(t),[n,o]=a(t,{collectionRef:{current:null},itemMap:new Map}),i=y=>{const{scope:_,children:x}=y,v=se.useRef(null),g=se.useRef(new Map).current;return r.jsx(n,{scope:_,itemMap:g,collectionRef:v,children:x})};i.displayName=t;const l=e+"CollectionSlot",c=Wo(l),d=se.forwardRef((y,_)=>{const{scope:x,children:v}=y,g=o(l,x),E=Nt(_,g.collectionRef);return r.jsx(c,{ref:E,children:v})});d.displayName=l;const f=e+"CollectionItemSlot",h="data-radix-collection-item",p=Wo(f),m=se.forwardRef((y,_)=>{const{scope:x,children:v,...g}=y,E=se.useRef(null),j=Nt(_,E),S=o(f,x);return se.useEffect(()=>(S.itemMap.set(E,{ref:E,...g}),()=>void S.itemMap.delete(E))),r.jsx(p,{[h]:"",ref:j,children:v})});m.displayName=f;function b(y){const _=o(e+"CollectionConsumer",y);return se.useCallback(()=>{const v=_.collectionRef.current;if(!v)return[];const g=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(_.itemMap.values()).sort((S,N)=>g.indexOf(S.ref.current)-g.indexOf(N.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:i,Slot:d,ItemSlot:m},b,s]}var JO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ue=JO.reduce((e,t)=>{const a=Wo(`Primitive.${t}`),s=u.forwardRef((n,o)=>{const{asChild:i,...l}=n,c=i?a:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function xE(e,t){e&&ti.flushSync(()=>e.dispatchEvent(t))}function qs(e){const t=u.useRef(e);return u.useEffect(()=>{t.current=e}),u.useMemo(()=>(...a)=>{var s;return(s=t.current)==null?void 0:s.call(t,...a)},[])}function eR(e,t=globalThis==null?void 0:globalThis.document){const a=qs(e);u.useEffect(()=>{const s=n=>{n.key==="Escape"&&a(n)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[a,t])}var tR="DismissableLayer",lg="dismissableLayer.update",aR="dismissableLayer.pointerDownOutside",sR="dismissableLayer.focusOutside",Sy,yE=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ql=u.forwardRef((e,t)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:s,onPointerDownOutside:n,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,d=u.useContext(yE),[f,h]=u.useState(null),p=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=u.useState({}),b=Nt(t,N=>h(N)),y=Array.from(d.layers),[_]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(_),v=f?y.indexOf(f):-1,g=d.layersWithOutsidePointerEventsDisabled.size>0,E=v>=x,j=nR(N=>{const R=N.target,T=[...d.branches].some(F=>F.contains(R));!E||T||(n==null||n(N),i==null||i(N),N.defaultPrevented||l==null||l())},p),S=oR(N=>{const R=N.target;[...d.branches].some(F=>F.contains(R))||(o==null||o(N),i==null||i(N),N.defaultPrevented||l==null||l())},p);return eR(N=>{v===d.layers.size-1&&(s==null||s(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),u.useEffect(()=>{if(f)return a&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Sy=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),Ny(),()=>{a&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Sy)}},[f,p,a,d]),u.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),Ny())},[f,d]),u.useEffect(()=>{const N=()=>m({});return document.addEventListener(lg,N),()=>document.removeEventListener(lg,N)},[]),r.jsx(Ue.div,{...c,ref:b,style:{pointerEvents:g?E?"auto":"none":void 0,...e.style},onFocusCapture:Be(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Be(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Be(e.onPointerDownCapture,j.onPointerDownCapture)})});ql.displayName=tR;var rR="DismissableLayerBranch",_E=u.forwardRef((e,t)=>{const a=u.useContext(yE),s=u.useRef(null),n=Nt(t,s);return u.useEffect(()=>{const o=s.current;if(o)return a.branches.add(o),()=>{a.branches.delete(o)}},[a.branches]),r.jsx(Ue.div,{...e,ref:n})});_E.displayName=rR;function nR(e,t=globalThis==null?void 0:globalThis.document){const a=qs(e),s=u.useRef(!1),n=u.useRef(()=>{});return u.useEffect(()=>{const o=l=>{if(l.target&&!s.current){let c=function(){bE(aR,a,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=c,t.addEventListener("click",n.current,{once:!0})):c()}else t.removeEventListener("click",n.current);s.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",n.current)}},[t,a]),{onPointerDownCapture:()=>s.current=!0}}function oR(e,t=globalThis==null?void 0:globalThis.document){const a=qs(e),s=u.useRef(!1);return u.useEffect(()=>{const n=o=>{o.target&&!s.current&&bE(sR,a,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,a]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Ny(){const e=new CustomEvent(lg);document.dispatchEvent(e)}function bE(e,t,a,{discrete:s}){const n=a.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:a});t&&n.addEventListener(e,t,{once:!0}),s?xE(n,o):n.dispatchEvent(o)}var iR=ql,lR=_E,Fa=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},cR="Portal",Fd=u.forwardRef((e,t)=>{var l;const{container:a,...s}=e,[n,o]=u.useState(!1);Fa(()=>o(!0),[]);const i=a||n&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?kb.createPortal(r.jsx(Ue.div,{...s,ref:t}),i):null});Fd.displayName=cR;function dR(e,t){return u.useReducer((a,s)=>t[a][s]??a,e)}var Tr=e=>{const{present:t,children:a}=e,s=uR(t),n=typeof a=="function"?a({present:s.isPresent}):u.Children.only(a),o=Nt(s.ref,fR(n));return typeof a=="function"||s.isPresent?u.cloneElement(n,{ref:o}):null};Tr.displayName="Presence";function uR(e){const[t,a]=u.useState(),s=u.useRef(null),n=u.useRef(e),o=u.useRef("none"),i=e?"mounted":"unmounted",[l,c]=dR(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const d=_u(s.current);o.current=l==="mounted"?d:"none"},[l]),Fa(()=>{const d=s.current,f=n.current;if(f!==e){const p=o.current,m=_u(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(f&&p!==m?"ANIMATION_OUT":"UNMOUNT"),n.current=e}},[e,c]),Fa(()=>{if(t){let d;const f=t.ownerDocument.defaultView??window,h=m=>{const y=_u(s.current).includes(m.animationName);if(m.target===t&&y&&(c("ANIMATION_END"),!n.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",d=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},p=m=>{m.target===t&&(o.current=_u(s.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:u.useCallback(d=>{s.current=d?getComputedStyle(d):null,a(d)},[])}}function _u(e){return(e==null?void 0:e.animationName)||"none"}function fR(e){var s,n;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,a=t&&"isReactWarning"in t&&t.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}var hR=Zg[" useInsertionEffect ".trim().toString()]||Fa;function Bs({prop:e,defaultProp:t,onChange:a=()=>{},caller:s}){const[n,o,i]=mR({defaultProp:t,onChange:a}),l=e!==void 0,c=l?e:n;{const f=u.useRef(e!==void 0);u.useEffect(()=>{const h=f.current;h!==l&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,s])}const d=u.useCallback(f=>{var h;if(l){const p=pR(f)?f(e):f;p!==e&&((h=i.current)==null||h.call(i,p))}else o(f)},[l,e,o,i]);return[c,d]}function mR({defaultProp:e,onChange:t}){const[a,s]=u.useState(e),n=u.useRef(a),o=u.useRef(t);return hR(()=>{o.current=t},[t]),u.useEffect(()=>{var i;n.current!==a&&((i=o.current)==null||i.call(o,a),n.current=a)},[a,n]),[a,s,o]}function pR(e){return typeof e=="function"}var wE=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),gR="VisuallyHidden",oh=u.forwardRef((e,t)=>r.jsx(Ue.span,{...e,ref:t,style:{...wE,...e.style}}));oh.displayName=gR;var vR=oh,Gv="ToastProvider",[Yv,xR,yR]=Vv("Toast"),[jE,eH]=As("Toast",[yR]),[_R,ih]=jE(Gv),EE=e=>{const{__scopeToast:t,label:a="Notification",duration:s=5e3,swipeDirection:n="right",swipeThreshold:o=50,children:i}=e,[l,c]=u.useState(null),[d,f]=u.useState(0),h=u.useRef(!1),p=u.useRef(!1);return a.trim()||console.error(`Invalid prop \`label\` supplied to \`${Gv}\`. Expected non-empty \`string\`.`),r.jsx(Yv.Provider,{scope:t,children:r.jsx(_R,{scope:t,label:a,duration:s,swipeDirection:n,swipeThreshold:o,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:u.useCallback(()=>f(m=>m+1),[]),onToastRemove:u.useCallback(()=>f(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:i})})};EE.displayName=Gv;var SE="ToastViewport",bR=["F8"],cg="toast.viewportPause",dg="toast.viewportResume",NE=u.forwardRef((e,t)=>{const{__scopeToast:a,hotkey:s=bR,label:n="Notifications ({hotkey})",...o}=e,i=ih(SE,a),l=xR(a),c=u.useRef(null),d=u.useRef(null),f=u.useRef(null),h=u.useRef(null),p=Nt(t,h,i.onViewportChange),m=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=i.toastCount>0;u.useEffect(()=>{const _=x=>{var g;s.length!==0&&s.every(E=>x[E]||x.code===E)&&((g=h.current)==null||g.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[s]),u.useEffect(()=>{const _=c.current,x=h.current;if(b&&_&&x){const v=()=>{if(!i.isClosePausedRef.current){const S=new CustomEvent(cg);x.dispatchEvent(S),i.isClosePausedRef.current=!0}},g=()=>{if(i.isClosePausedRef.current){const S=new CustomEvent(dg);x.dispatchEvent(S),i.isClosePausedRef.current=!1}},E=S=>{!_.contains(S.relatedTarget)&&g()},j=()=>{_.contains(document.activeElement)||g()};return _.addEventListener("focusin",v),_.addEventListener("focusout",E),_.addEventListener("pointermove",v),_.addEventListener("pointerleave",j),window.addEventListener("blur",v),window.addEventListener("focus",g),()=>{_.removeEventListener("focusin",v),_.removeEventListener("focusout",E),_.removeEventListener("pointermove",v),_.removeEventListener("pointerleave",j),window.removeEventListener("blur",v),window.removeEventListener("focus",g)}}},[b,i.isClosePausedRef]);const y=u.useCallback(({tabbingDirection:_})=>{const v=l().map(g=>{const E=g.ref.current,j=[E,...kR(E)];return _==="forwards"?j:j.reverse()});return(_==="forwards"?v.reverse():v).flat()},[l]);return u.useEffect(()=>{const _=h.current;if(_){const x=v=>{var j,S,N;const g=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!g){const R=document.activeElement,T=v.shiftKey;if(v.target===_&&T){(j=d.current)==null||j.focus();return}const Z=y({tabbingDirection:T?"backwards":"forwards"}),ce=Z.findIndex(k=>k===R);Mm(Z.slice(ce+1))?v.preventDefault():T?(S=d.current)==null||S.focus():(N=f.current)==null||N.focus()}};return _.addEventListener("keydown",x),()=>_.removeEventListener("keydown",x)}},[l,y]),r.jsxs(lR,{ref:c,role:"region","aria-label":n.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&r.jsx(ug,{ref:d,onFocusFromOutsideViewport:()=>{const _=y({tabbingDirection:"forwards"});Mm(_)}}),r.jsx(Yv.Slot,{scope:a,children:r.jsx(Ue.ol,{tabIndex:-1,...o,ref:p})}),b&&r.jsx(ug,{ref:f,onFocusFromOutsideViewport:()=>{const _=y({tabbingDirection:"backwards"});Mm(_)}})]})});NE.displayName=SE;var CE="ToastFocusProxy",ug=u.forwardRef((e,t)=>{const{__scopeToast:a,onFocusFromOutsideViewport:s,...n}=e,o=ih(CE,a);return r.jsx(oh,{"aria-hidden":!0,tabIndex:0,...n,ref:t,style:{position:"fixed"},onFocus:i=>{var d;const l=i.relatedTarget;!((d=o.viewport)!=null&&d.contains(l))&&s()}})});ug.displayName=CE;var $d="Toast",wR="toast.swipeStart",jR="toast.swipeMove",ER="toast.swipeCancel",SR="toast.swipeEnd",AE=u.forwardRef((e,t)=>{const{forceMount:a,open:s,defaultOpen:n,onOpenChange:o,...i}=e,[l,c]=Bs({prop:s,defaultProp:n??!0,onChange:o,caller:$d});return r.jsx(Tr,{present:a||l,children:r.jsx(AR,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:qs(e.onPause),onResume:qs(e.onResume),onSwipeStart:Be(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Be(e.onSwipeMove,d=>{const{x:f,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Be(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Be(e.onSwipeEnd,d=>{const{x:f,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});AE.displayName=$d;var[NR,CR]=jE($d,{onClose(){}}),AR=u.forwardRef((e,t)=>{const{__scopeToast:a,type:s="foreground",duration:n,open:o,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:f,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:m,...b}=e,y=ih($d,a),[_,x]=u.useState(null),v=Nt(t,k=>x(k)),g=u.useRef(null),E=u.useRef(null),j=n||y.duration,S=u.useRef(0),N=u.useRef(j),R=u.useRef(0),{onToastAdd:T,onToastRemove:F}=y,U=qs(()=>{var M;(_==null?void 0:_.contains(document.activeElement))&&((M=y.viewport)==null||M.focus()),i()}),Z=u.useCallback(k=>{!k||k===1/0||(window.clearTimeout(R.current),S.current=new Date().getTime(),R.current=window.setTimeout(U,k))},[U]);u.useEffect(()=>{const k=y.viewport;if(k){const M=()=>{Z(N.current),d==null||d()},A=()=>{const q=new Date().getTime()-S.current;N.current=N.current-q,window.clearTimeout(R.current),c==null||c()};return k.addEventListener(cg,A),k.addEventListener(dg,M),()=>{k.removeEventListener(cg,A),k.removeEventListener(dg,M)}}},[y.viewport,j,c,d,Z]),u.useEffect(()=>{o&&!y.isClosePausedRef.current&&Z(j)},[o,j,y.isClosePausedRef,Z]),u.useEffect(()=>(T(),()=>F()),[T,F]);const ce=u.useMemo(()=>_?zE(_):null,[_]);return y.viewport?r.jsxs(r.Fragment,{children:[ce&&r.jsx(DR,{__scopeToast:a,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:ce}),r.jsx(NR,{scope:a,onClose:U,children:ti.createPortal(r.jsx(Yv.ItemSlot,{scope:a,children:r.jsx(iR,{asChild:!0,onEscapeKeyDown:Be(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||U(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(Ue.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":y.swipeDirection,...b,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Be(e.onKeyDown,k=>{k.key==="Escape"&&(l==null||l(k.nativeEvent),k.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,U()))}),onPointerDown:Be(e.onPointerDown,k=>{k.button===0&&(g.current={x:k.clientX,y:k.clientY})}),onPointerMove:Be(e.onPointerMove,k=>{if(!g.current)return;const M=k.clientX-g.current.x,A=k.clientY-g.current.y,q=!!E.current,I=["left","right"].includes(y.swipeDirection),w=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,C=I?w(0,M):0,$=I?0:w(0,A),O=k.pointerType==="touch"?10:2,L={x:C,y:$},H={originalEvent:k,delta:L};q?(E.current=L,bu(jR,h,H,{discrete:!1})):Cy(L,y.swipeDirection,O)?(E.current=L,bu(wR,f,H,{discrete:!1}),k.target.setPointerCapture(k.pointerId)):(Math.abs(M)>O||Math.abs(A)>O)&&(g.current=null)}),onPointerUp:Be(e.onPointerUp,k=>{const M=E.current,A=k.target;if(A.hasPointerCapture(k.pointerId)&&A.releasePointerCapture(k.pointerId),E.current=null,g.current=null,M){const q=k.currentTarget,I={originalEvent:k,delta:M};Cy(M,y.swipeDirection,y.swipeThreshold)?bu(SR,m,I,{discrete:!0}):bu(ER,p,I,{discrete:!0}),q.addEventListener("click",w=>w.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),DR=e=>{const{__scopeToast:t,children:a,...s}=e,n=ih($d,t),[o,i]=u.useState(!1),[l,c]=u.useState(!1);return RR(()=>i(!0)),u.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:r.jsx(Fd,{asChild:!0,children:r.jsx(oh,{...s,children:o&&r.jsxs(r.Fragment,{children:[n.label," ",a]})})})},TR="ToastTitle",DE=u.forwardRef((e,t)=>{const{__scopeToast:a,...s}=e;return r.jsx(Ue.div,{...s,ref:t})});DE.displayName=TR;var OR="ToastDescription",TE=u.forwardRef((e,t)=>{const{__scopeToast:a,...s}=e;return r.jsx(Ue.div,{...s,ref:t})});TE.displayName=OR;var OE="ToastAction",RE=u.forwardRef((e,t)=>{const{altText:a,...s}=e;return a.trim()?r.jsx(kE,{altText:a,asChild:!0,children:r.jsx(Wv,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${OE}\`. Expected non-empty \`string\`.`),null)});RE.displayName=OE;var ME="ToastClose",Wv=u.forwardRef((e,t)=>{const{__scopeToast:a,...s}=e,n=CR(ME,a);return r.jsx(kE,{asChild:!0,children:r.jsx(Ue.button,{type:"button",...s,ref:t,onClick:Be(e.onClick,n.onClose)})})});Wv.displayName=ME;var kE=u.forwardRef((e,t)=>{const{__scopeToast:a,altText:s,...n}=e;return r.jsx(Ue.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...n,ref:t})});function zE(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),MR(s)){const n=s.ariaHidden||s.hidden||s.style.display==="none",o=s.dataset.radixToastAnnounceExclude==="";if(!n)if(o){const i=s.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...zE(s))}}),t}function bu(e,t,a,{discrete:s}){const n=a.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:a});t&&n.addEventListener(e,t,{once:!0}),s?xE(n,o):n.dispatchEvent(o)}var Cy=(e,t,a=0)=>{const s=Math.abs(e.x),n=Math.abs(e.y),o=s>n;return t==="left"||t==="right"?o&&s>a:!o&&n>a};function RR(e=()=>{}){const t=qs(e);Fa(()=>{let a=0,s=0;return a=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(a),window.cancelAnimationFrame(s)}},[t])}function MR(e){return e.nodeType===e.ELEMENT_NODE}function kR(e){const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function Mm(e){const t=document.activeElement;return e.some(a=>a===t?!0:(a.focus(),document.activeElement!==t))}var zR=EE,PE=NE,IE=AE,LE=DE,FE=TE,$E=RE,qE=Wv;function BE(e){var t,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(a=BE(e[t]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function UE(){for(var e,t,a=0,s="",n=arguments.length;a<n;a++)(e=arguments[a])&&(t=BE(e))&&(s&&(s+=" "),s+=t);return s}const Ay=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Dy=UE,Bl=(e,t)=>a=>{var s;if((t==null?void 0:t.variants)==null)return Dy(e,a==null?void 0:a.class,a==null?void 0:a.className);const{variants:n,defaultVariants:o}=t,i=Object.keys(n).map(d=>{const f=a==null?void 0:a[d],h=o==null?void 0:o[d];if(f===null)return null;const p=Ay(f)||Ay(h);return n[d][p]}),l=a&&Object.entries(a).reduce((d,f)=>{let[h,p]=f;return p===void 0||(d[h]=p),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,f)=>{let{class:h,className:p,...m}=f;return Object.entries(m).every(b=>{let[y,_]=b;return Array.isArray(_)?_.includes({...o,...l}[y]):{...o,...l}[y]===_})?[...d,h,p]:d},[]);return Dy(e,i,c,a==null?void 0:a.class,a==null?void 0:a.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HE=(...e)=>e.filter((t,a,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===a).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:n="",children:o,iconNode:i,...l},c)=>u.createElement("svg",{ref:c,...IR,width:t,height:t,stroke:e,strokeWidth:s?Number(a)*24/Number(t):a,className:HE("lucide",n),...l},[...i.map(([d,f])=>u.createElement(d,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=(e,t)=>{const a=u.forwardRef(({className:s,...n},o)=>u.createElement(LR,{ref:o,iconNode:t,className:HE(`lucide-${PR(e)}`,s),...n}));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=tt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=tt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=tt("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=tt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=tt("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=tt("Beef",[["circle",{cx:"12.5",cy:"8.5",r:"2.5",key:"9738u8"}],["path",{d:"M12.5 2a6.5 6.5 0 0 0-6.22 4.6c-1.1 3.13-.78 3.9-3.18 6.08A3 3 0 0 0 5 18c4 0 8.4-1.8 11.4-4.3A6.5 6.5 0 0 0 12.5 2Z",key:"o0f6za"}],["path",{d:"m18.5 6 2.19 4.5a6.48 6.48 0 0 1 .31 2 6.49 6.49 0 0 1-2.6 5.2C15.4 20.2 11 22 7 22a3 3 0 0 1-2.68-1.66L2.4 16.5",key:"k7p6i0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=tt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=tt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=tt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=tt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=tt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=tt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=tt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=tt("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=tt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=tt("Dna",[["path",{d:"m10 16 1.5 1.5",key:"11lckj"}],["path",{d:"m14 8-1.5-1.5",key:"1ohn8i"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m17 6-2.891-2.891",key:"xu6p2f"}],["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"m20 9 .891.891",key:"3xwk7g"}],["path",{d:"M3.109 14.109 4 15",key:"q76aoh"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m7 18 2.891 2.891",key:"1sisit"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=tt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=tt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=tt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=tt("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=tt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=tt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=tt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=tt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=tt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=tt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=tt("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=tt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=tt("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=tt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=tt("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=tt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=tt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=tt("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=tt("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=tt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=tt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=tt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=tt("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=tt("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=tt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=tt("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=tt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=tt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=tt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=tt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ax="-",XR=e=>{const t=JR(e),{conflictingClassGroups:a,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:i=>{const l=i.split(ax);return l[0]===""&&l.length!==1&&l.shift(),KE(l,t)||KR(i)},getConflictingClassGroupIds:(i,l)=>{const c=a[i]||[];return l&&s[i]?[...c,...s[i]]:c}}},KE=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const a=e[0],s=t.nextPart.get(a),n=s?KE(e.slice(1),s):void 0;if(n)return n;if(t.validators.length===0)return;const o=e.join(ax);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},My=/^\[(.+)\]$/,KR=e=>{if(My.test(e)){const t=My.exec(e)[1],a=t==null?void 0:t.substring(0,t.indexOf(":"));if(a)return"arbitrary.."+a}},JR=e=>{const{theme:t,prefix:a}=e,s={nextPart:new Map,validators:[]};return tM(Object.entries(e.classGroups),a).forEach(([o,i])=>{hg(i,s,o,t)}),s},hg=(e,t,a,s)=>{e.forEach(n=>{if(typeof n=="string"){const o=n===""?t:ky(t,n);o.classGroupId=a;return}if(typeof n=="function"){if(eM(n)){hg(n(s),t,a,s);return}t.validators.push({validator:n,classGroupId:a});return}Object.entries(n).forEach(([o,i])=>{hg(i,ky(t,o),a,s)})})},ky=(e,t)=>{let a=e;return t.split(ax).forEach(s=>{a.nextPart.has(s)||a.nextPart.set(s,{nextPart:new Map,validators:[]}),a=a.nextPart.get(s)}),a},eM=e=>e.isThemeGetter,tM=(e,t)=>t?e.map(([a,s])=>{const n=s.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[t+i,l])):o);return[a,n]}):e,aM=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,a=new Map,s=new Map;const n=(o,i)=>{a.set(o,i),t++,t>e&&(t=0,s=a,a=new Map)};return{get(o){let i=a.get(o);if(i!==void 0)return i;if((i=s.get(o))!==void 0)return n(o,i),i},set(o,i){a.has(o)?a.set(o,i):n(o,i)}}},JE="!",sM=e=>{const{separator:t,experimentalParseClassName:a}=e,s=t.length===1,n=t[0],o=t.length,i=l=>{const c=[];let d=0,f=0,h;for(let _=0;_<l.length;_++){let x=l[_];if(d===0){if(x===n&&(s||l.slice(_,_+o)===t)){c.push(l.slice(f,_)),f=_+o;continue}if(x==="/"){h=_;continue}}x==="["?d++:x==="]"&&d--}const p=c.length===0?l:l.substring(f),m=p.startsWith(JE),b=m?p.substring(1):p,y=h&&h>f?h-f:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:b,maybePostfixModifierPosition:y}};return a?l=>a({className:l,parseClassName:i}):i},rM=e=>{if(e.length<=1)return e;const t=[];let a=[];return e.forEach(s=>{s[0]==="["?(t.push(...a.sort(),s),a=[]):a.push(s)}),t.push(...a.sort()),t},nM=e=>({cache:aM(e.cacheSize),parseClassName:sM(e),...XR(e)}),oM=/\s+/,iM=(e,t)=>{const{parseClassName:a,getClassGroupId:s,getConflictingClassGroupIds:n}=t,o=[],i=e.trim().split(oM);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:f,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=a(d);let b=!!m,y=s(b?p.substring(0,m):p);if(!y){if(!b){l=d+(l.length>0?" "+l:l);continue}if(y=s(p),!y){l=d+(l.length>0?" "+l:l);continue}b=!1}const _=rM(f).join(":"),x=h?_+JE:_,v=x+y;if(o.includes(v))continue;o.push(v);const g=n(y,b);for(let E=0;E<g.length;++E){const j=g[E];o.push(x+j)}l=d+(l.length>0?" "+l:l)}return l};function lM(){let e=0,t,a,s="";for(;e<arguments.length;)(t=arguments[e++])&&(a=eS(t))&&(s&&(s+=" "),s+=a);return s}const eS=e=>{if(typeof e=="string")return e;let t,a="";for(let s=0;s<e.length;s++)e[s]&&(t=eS(e[s]))&&(a&&(a+=" "),a+=t);return a};function cM(e,...t){let a,s,n,o=i;function i(c){const d=t.reduce((f,h)=>h(f),e());return a=nM(d),s=a.cache.get,n=a.cache.set,o=l,l(c)}function l(c){const d=s(c);if(d)return d;const f=iM(c,a);return n(c,f),f}return function(){return o(lM.apply(null,arguments))}}const aa=e=>{const t=a=>a[e]||[];return t.isThemeGetter=!0,t},tS=/^\[(?:([a-z-]+):)?(.+)\]$/i,dM=/^\d+\/\d+$/,uM=new Set(["px","full","screen"]),fM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,hM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,pM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$r=e=>Zi(e)||uM.has(e)||dM.test(e),xn=e=>Hl(e,"length",EM),Zi=e=>!!e&&!Number.isNaN(Number(e)),zm=e=>Hl(e,"number",Zi),dc=e=>!!e&&Number.isInteger(Number(e)),vM=e=>e.endsWith("%")&&Zi(e.slice(0,-1)),ct=e=>tS.test(e),yn=e=>fM.test(e),xM=new Set(["length","size","percentage"]),yM=e=>Hl(e,xM,aS),_M=e=>Hl(e,"position",aS),bM=new Set(["image","url"]),wM=e=>Hl(e,bM,NM),jM=e=>Hl(e,"",SM),uc=()=>!0,Hl=(e,t,a)=>{const s=tS.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):a(s[2]):!1},EM=e=>hM.test(e)&&!mM.test(e),aS=()=>!1,SM=e=>pM.test(e),NM=e=>gM.test(e),CM=()=>{const e=aa("colors"),t=aa("spacing"),a=aa("blur"),s=aa("brightness"),n=aa("borderColor"),o=aa("borderRadius"),i=aa("borderSpacing"),l=aa("borderWidth"),c=aa("contrast"),d=aa("grayscale"),f=aa("hueRotate"),h=aa("invert"),p=aa("gap"),m=aa("gradientColorStops"),b=aa("gradientColorStopPositions"),y=aa("inset"),_=aa("margin"),x=aa("opacity"),v=aa("padding"),g=aa("saturate"),E=aa("scale"),j=aa("sepia"),S=aa("skew"),N=aa("space"),R=aa("translate"),T=()=>["auto","contain","none"],F=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto",ct,t],Z=()=>[ct,t],ce=()=>["",$r,xn],k=()=>["auto",Zi,ct],M=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],A=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],w=()=>["","0",ct],C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>[Zi,ct];return{cacheSize:500,separator:":",theme:{colors:[uc],spacing:[$r,xn],blur:["none","",yn,ct],brightness:$(),borderColor:[e],borderRadius:["none","","full",yn,ct],borderSpacing:Z(),borderWidth:ce(),contrast:$(),grayscale:w(),hueRotate:$(),invert:w(),gap:Z(),gradientColorStops:[e],gradientColorStopPositions:[vM,xn],inset:U(),margin:U(),opacity:$(),padding:Z(),saturate:$(),scale:$(),sepia:w(),skew:$(),space:Z(),translate:Z()},classGroups:{aspect:[{aspect:["auto","square","video",ct]}],container:["container"],columns:[{columns:[yn]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...M(),ct]}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",dc,ct]}],basis:[{basis:U()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ct]}],grow:[{grow:w()}],shrink:[{shrink:w()}],order:[{order:["first","last","none",dc,ct]}],"grid-cols":[{"grid-cols":[uc]}],"col-start-end":[{col:["auto",{span:["full",dc,ct]},ct]}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":[uc]}],"row-start-end":[{row:["auto",{span:[dc,ct]},ct]}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ct]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ct]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ct,t]}],"min-w":[{"min-w":[ct,t,"min","max","fit"]}],"max-w":[{"max-w":[ct,t,"none","full","min","max","fit","prose",{screen:[yn]},yn]}],h:[{h:[ct,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ct,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ct,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ct,t,"auto","min","max","fit"]}],"font-size":[{text:["base",yn,xn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",zm]}],"font-family":[{font:[uc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ct]}],"line-clamp":[{"line-clamp":["none",Zi,zm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",$r,ct]}],"list-image":[{"list-image":["none",ct]}],"list-style-type":[{list:["none","disc","decimal",ct]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...A(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",$r,xn]}],"underline-offset":[{"underline-offset":["auto",$r,ct]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ct]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ct]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...M(),_M]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",yM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},wM]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...A(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:A()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...A()]}],"outline-offset":[{"outline-offset":[$r,ct]}],"outline-w":[{outline:[$r,xn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[$r,xn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",yn,jM]}],"shadow-color":[{shadow:[uc]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[a]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",yn,ct]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[h]}],saturate:[{saturate:[g]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[a]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[g]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ct]}],duration:[{duration:$()}],ease:[{ease:["linear","in","out","in-out",ct]}],delay:[{delay:$()}],animate:[{animate:["none","spin","ping","pulse","bounce",ct]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[dc,ct]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ct]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ct]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Z()}],"scroll-mx":[{"scroll-mx":Z()}],"scroll-my":[{"scroll-my":Z()}],"scroll-ms":[{"scroll-ms":Z()}],"scroll-me":[{"scroll-me":Z()}],"scroll-mt":[{"scroll-mt":Z()}],"scroll-mr":[{"scroll-mr":Z()}],"scroll-mb":[{"scroll-mb":Z()}],"scroll-ml":[{"scroll-ml":Z()}],"scroll-p":[{"scroll-p":Z()}],"scroll-px":[{"scroll-px":Z()}],"scroll-py":[{"scroll-py":Z()}],"scroll-ps":[{"scroll-ps":Z()}],"scroll-pe":[{"scroll-pe":Z()}],"scroll-pt":[{"scroll-pt":Z()}],"scroll-pr":[{"scroll-pr":Z()}],"scroll-pb":[{"scroll-pb":Z()}],"scroll-pl":[{"scroll-pl":Z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ct]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[$r,xn,zm]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},AM=cM(CM);function Ae(...e){return AM(UE(e))}function Lt(e){if(!e)return"-";if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e)){const[a,s,n]=e.split("-");return`${n}/${s}/${a}`}return(typeof e=="string"?new Date(e):e).toLocaleDateString("pt-BR")}function DM(e){if(!e)return null;if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=typeof e=="string"?new Date(e):e,a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${n}`}function pr(e){if(!e)return null;if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=e.match(/^(\d{4}-\d{2}-\d{2})/);return t?t[1]:null}function TM(e,t){if(!e||!/^\d{4}-\d{2}-\d{2}$/.test(e))throw new Error("Data deve estar no formato YYYY-MM-DD");const[a,s,n]=e.split("-").map(Number),o=new Date(a,s-1,n);o.setDate(o.getDate()+t);const i=o.getFullYear(),l=String(o.getMonth()+1).padStart(2,"0"),c=String(o.getDate()).padStart(2,"0");return`${i}-${l}-${c}`}function Pm(e,t){if(!e||!t)return 0;const a=pr(e),s=pr(t);if(!a||!s)return 0;const[n,o,i]=a.split("-").map(Number),[l,c,d]=s.split("-").map(Number),f=new Date(n,o-1,i),h=new Date(l,c-1,d),p=f.getTime()-h.getTime();return Math.floor(p/(1e3*60*60*24))}function Bc(){const e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${s}`}function zy(e){if(!e)return"-";const t=pr(e);if(!t)return"-";const[a,s,n]=t.split("-");return`${n}/${s}/${a}`}function OM(e){const t=pr(e);if(!t)return"";const[a,s,n]=t.split("-").map(Number),o=new Date(a,s-1,n);return["Domingo","Segunda-feira","Tera-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sbado"][o.getDay()]}const RM=zR,sS=u.forwardRef(({className:e,...t},a)=>r.jsx(PE,{ref:a,className:Ae("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));sS.displayName=PE.displayName;const MM=Bl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),rS=u.forwardRef(({className:e,variant:t,...a},s)=>r.jsx(IE,{ref:s,className:Ae(MM({variant:t}),e),...a}));rS.displayName=IE.displayName;const kM=u.forwardRef(({className:e,...t},a)=>r.jsx($E,{ref:a,className:Ae("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));kM.displayName=$E.displayName;const nS=u.forwardRef(({className:e,...t},a)=>r.jsx(qE,{ref:a,className:Ae("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(sr,{className:"h-4 w-4"})}));nS.displayName=qE.displayName;const oS=u.forwardRef(({className:e,...t},a)=>r.jsx(LE,{ref:a,className:Ae("text-sm font-semibold",e),...t}));oS.displayName=LE.displayName;const iS=u.forwardRef(({className:e,...t},a)=>r.jsx(FE,{ref:a,className:Ae("text-sm opacity-90",e),...t}));iS.displayName=FE.displayName;function zM(){const{toasts:e}=fa();return r.jsxs(RM,{children:[e.map(function({id:t,title:a,description:s,action:n,...o}){return r.jsxs(rS,{...o,children:[r.jsxs("div",{className:"grid gap-1",children:[a&&r.jsx(oS,{children:a}),s&&r.jsx(iS,{children:s})]}),n,r.jsx(nS,{})]},t)}),r.jsx(sS,{})]})}var PM=Zg[" useId ".trim().toString()]||(()=>{}),IM=0;function es(e){const[t,a]=u.useState(PM());return Fa(()=>{a(s=>s??String(IM++))},[e]),t?`radix-${t}`:""}const LM=["top","right","bottom","left"],ro=Math.min,_s=Math.max,Tf=Math.round,wu=Math.floor,Nr=e=>({x:e,y:e}),FM={left:"right",right:"left",bottom:"top",top:"bottom"},$M={start:"end",end:"start"};function mg(e,t,a){return _s(e,ro(t,a))}function nn(e,t){return typeof e=="function"?e(t):e}function on(e){return e.split("-")[0]}function Vl(e){return e.split("-")[1]}function sx(e){return e==="x"?"y":"x"}function rx(e){return e==="y"?"height":"width"}const qM=new Set(["top","bottom"]);function br(e){return qM.has(on(e))?"y":"x"}function nx(e){return sx(br(e))}function BM(e,t,a){a===void 0&&(a=!1);const s=Vl(e),n=nx(e),o=rx(n);let i=n==="x"?s===(a?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Of(i)),[i,Of(i)]}function UM(e){const t=Of(e);return[pg(e),t,pg(t)]}function pg(e){return e.replace(/start|end/g,t=>$M[t])}const Py=["left","right"],Iy=["right","left"],HM=["top","bottom"],VM=["bottom","top"];function GM(e,t,a){switch(e){case"top":case"bottom":return a?t?Iy:Py:t?Py:Iy;case"left":case"right":return t?HM:VM;default:return[]}}function YM(e,t,a,s){const n=Vl(e);let o=GM(on(e),a==="start",s);return n&&(o=o.map(i=>i+"-"+n),t&&(o=o.concat(o.map(pg)))),o}function Of(e){return e.replace(/left|right|bottom|top/g,t=>FM[t])}function WM(e){return{top:0,right:0,bottom:0,left:0,...e}}function lS(e){return typeof e!="number"?WM(e):{top:e,right:e,bottom:e,left:e}}function Rf(e){const{x:t,y:a,width:s,height:n}=e;return{width:s,height:n,top:a,left:t,right:t+s,bottom:a+n,x:t,y:a}}function Ly(e,t,a){let{reference:s,floating:n}=e;const o=br(t),i=nx(t),l=rx(i),c=on(t),d=o==="y",f=s.x+s.width/2-n.width/2,h=s.y+s.height/2-n.height/2,p=s[l]/2-n[l]/2;let m;switch(c){case"top":m={x:f,y:s.y-n.height};break;case"bottom":m={x:f,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:h};break;case"left":m={x:s.x-n.width,y:h};break;default:m={x:s.x,y:s.y}}switch(Vl(t)){case"start":m[i]-=p*(a&&d?-1:1);break;case"end":m[i]+=p*(a&&d?-1:1);break}return m}const QM=async(e,t,a)=>{const{placement:s="bottom",strategy:n="absolute",middleware:o=[],platform:i}=a,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:n}),{x:f,y:h}=Ly(d,s,c),p=s,m={},b=0;for(let y=0;y<l.length;y++){const{name:_,fn:x}=l[y],{x:v,y:g,data:E,reset:j}=await x({x:f,y:h,initialPlacement:s,placement:p,strategy:n,middlewareData:m,rects:d,platform:i,elements:{reference:e,floating:t}});f=v??f,h=g??h,m={...m,[_]:{...m[_],...E}},j&&b<=50&&(b++,typeof j=="object"&&(j.placement&&(p=j.placement),j.rects&&(d=j.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:n}):j.rects),{x:f,y:h}=Ly(d,p,c)),y=-1)}return{x:f,y:h,placement:p,strategy:n,middlewareData:m}};async function id(e,t){var a;t===void 0&&(t={});const{x:s,y:n,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=nn(t,e),b=lS(m),_=l[p?h==="floating"?"reference":"floating":h],x=Rf(await o.getClippingRect({element:(a=await(o.isElement==null?void 0:o.isElement(_)))==null||a?_:_.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:c})),v=h==="floating"?{x:s,y:n,width:i.floating.width,height:i.floating.height}:i.reference,g=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),E=await(o.isElement==null?void 0:o.isElement(g))?await(o.getScale==null?void 0:o.getScale(g))||{x:1,y:1}:{x:1,y:1},j=Rf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:g,strategy:c}):v);return{top:(x.top-j.top+b.top)/E.y,bottom:(j.bottom-x.bottom+b.bottom)/E.y,left:(x.left-j.left+b.left)/E.x,right:(j.right-x.right+b.right)/E.x}}const ZM=e=>({name:"arrow",options:e,async fn(t){const{x:a,y:s,placement:n,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:f=0}=nn(e,t)||{};if(d==null)return{};const h=lS(f),p={x:a,y:s},m=nx(n),b=rx(m),y=await i.getDimensions(d),_=m==="y",x=_?"top":"left",v=_?"bottom":"right",g=_?"clientHeight":"clientWidth",E=o.reference[b]+o.reference[m]-p[m]-o.floating[b],j=p[m]-o.reference[m],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let N=S?S[g]:0;(!N||!await(i.isElement==null?void 0:i.isElement(S)))&&(N=l.floating[g]||o.floating[b]);const R=E/2-j/2,T=N/2-y[b]/2-1,F=ro(h[x],T),U=ro(h[v],T),Z=F,ce=N-y[b]-U,k=N/2-y[b]/2+R,M=mg(Z,k,ce),A=!c.arrow&&Vl(n)!=null&&k!==M&&o.reference[b]/2-(k<Z?F:U)-y[b]/2<0,q=A?k<Z?k-Z:k-ce:0;return{[m]:p[m]+q,data:{[m]:M,centerOffset:k-M-q,...A&&{alignmentOffset:q}},reset:A}}}),XM=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var a,s;const{placement:n,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:y=!0,..._}=nn(e,t);if((a=o.arrow)!=null&&a.alignmentOffset)return{};const x=on(n),v=br(l),g=on(l)===l,E=await(c.isRTL==null?void 0:c.isRTL(d.floating)),j=p||(g||!y?[Of(l)]:UM(l)),S=b!=="none";!p&&S&&j.push(...YM(l,y,b,E));const N=[l,...j],R=await id(t,_),T=[];let F=((s=o.flip)==null?void 0:s.overflows)||[];if(f&&T.push(R[x]),h){const k=BM(n,i,E);T.push(R[k[0]],R[k[1]])}if(F=[...F,{placement:n,overflows:T}],!T.every(k=>k<=0)){var U,Z;const k=(((U=o.flip)==null?void 0:U.index)||0)+1,M=N[k];if(M&&(!(h==="alignment"?v!==br(M):!1)||F.every(I=>I.overflows[0]>0&&br(I.placement)===v)))return{data:{index:k,overflows:F},reset:{placement:M}};let A=(Z=F.filter(q=>q.overflows[0]<=0).sort((q,I)=>q.overflows[1]-I.overflows[1])[0])==null?void 0:Z.placement;if(!A)switch(m){case"bestFit":{var ce;const q=(ce=F.filter(I=>{if(S){const w=br(I.placement);return w===v||w==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(w=>w>0).reduce((w,C)=>w+C,0)]).sort((I,w)=>I[1]-w[1])[0])==null?void 0:ce[0];q&&(A=q);break}case"initialPlacement":A=l;break}if(n!==A)return{reset:{placement:A}}}return{}}}};function Fy(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function $y(e){return LM.some(t=>e[t]>=0)}const KM=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:a}=t,{strategy:s="referenceHidden",...n}=nn(e,t);switch(s){case"referenceHidden":{const o=await id(t,{...n,elementContext:"reference"}),i=Fy(o,a.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:$y(i)}}}case"escaped":{const o=await id(t,{...n,altBoundary:!0}),i=Fy(o,a.floating);return{data:{escapedOffsets:i,escaped:$y(i)}}}default:return{}}}}},cS=new Set(["left","top"]);async function JM(e,t){const{placement:a,platform:s,elements:n}=e,o=await(s.isRTL==null?void 0:s.isRTL(n.floating)),i=on(a),l=Vl(a),c=br(a)==="y",d=cS.has(i)?-1:1,f=o&&c?-1:1,h=nn(t,e);let{mainAxis:p,crossAxis:m,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof b=="number"&&(m=l==="end"?b*-1:b),c?{x:m*f,y:p*d}:{x:p*d,y:m*f}}const ek=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var a,s;const{x:n,y:o,placement:i,middlewareData:l}=t,c=await JM(t,e);return i===((a=l.offset)==null?void 0:a.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:n+c.x,y:o+c.y,data:{...c,placement:i}}}}},tk=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:a,y:s,placement:n}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:_=>{let{x,y:v}=_;return{x,y:v}}},...c}=nn(e,t),d={x:a,y:s},f=await id(t,c),h=br(on(n)),p=sx(h);let m=d[p],b=d[h];if(o){const _=p==="y"?"top":"left",x=p==="y"?"bottom":"right",v=m+f[_],g=m-f[x];m=mg(v,m,g)}if(i){const _=h==="y"?"top":"left",x=h==="y"?"bottom":"right",v=b+f[_],g=b-f[x];b=mg(v,b,g)}const y=l.fn({...t,[p]:m,[h]:b});return{...y,data:{x:y.x-a,y:y.y-s,enabled:{[p]:o,[h]:i}}}}}},ak=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:a,y:s,placement:n,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=nn(e,t),f={x:a,y:s},h=br(n),p=sx(h);let m=f[p],b=f[h];const y=nn(l,t),_=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const g=p==="y"?"height":"width",E=o.reference[p]-o.floating[g]+_.mainAxis,j=o.reference[p]+o.reference[g]-_.mainAxis;m<E?m=E:m>j&&(m=j)}if(d){var x,v;const g=p==="y"?"width":"height",E=cS.has(on(n)),j=o.reference[h]-o.floating[g]+(E&&((x=i.offset)==null?void 0:x[h])||0)+(E?0:_.crossAxis),S=o.reference[h]+o.reference[g]+(E?0:((v=i.offset)==null?void 0:v[h])||0)-(E?_.crossAxis:0);b<j?b=j:b>S&&(b=S)}return{[p]:m,[h]:b}}}},sk=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var a,s;const{placement:n,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...d}=nn(e,t),f=await id(t,d),h=on(n),p=Vl(n),m=br(n)==="y",{width:b,height:y}=o.floating;let _,x;h==="top"||h==="bottom"?(_=h,x=p===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(x=h,_=p==="end"?"top":"bottom");const v=y-f.top-f.bottom,g=b-f.left-f.right,E=ro(y-f[_],v),j=ro(b-f[x],g),S=!t.middlewareData.shift;let N=E,R=j;if((a=t.middlewareData.shift)!=null&&a.enabled.x&&(R=g),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(N=v),S&&!p){const F=_s(f.left,0),U=_s(f.right,0),Z=_s(f.top,0),ce=_s(f.bottom,0);m?R=b-2*(F!==0||U!==0?F+U:_s(f.left,f.right)):N=y-2*(Z!==0||ce!==0?Z+ce:_s(f.top,f.bottom))}await c({...t,availableWidth:R,availableHeight:N});const T=await i.getDimensions(l.floating);return b!==T.width||y!==T.height?{reset:{rects:!0}}:{}}}};function dh(){return typeof window<"u"}function Gl(e){return dS(e)?(e.nodeName||"").toLowerCase():"#document"}function Ns(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Or(e){var t;return(t=(dS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function dS(e){return dh()?e instanceof Node||e instanceof Ns(e).Node:!1}function rr(e){return dh()?e instanceof Element||e instanceof Ns(e).Element:!1}function Cr(e){return dh()?e instanceof HTMLElement||e instanceof Ns(e).HTMLElement:!1}function qy(e){return!dh()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ns(e).ShadowRoot}const rk=new Set(["inline","contents"]);function Bd(e){const{overflow:t,overflowX:a,overflowY:s,display:n}=nr(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+a)&&!rk.has(n)}const nk=new Set(["table","td","th"]);function ok(e){return nk.has(Gl(e))}const ik=[":popover-open",":modal"];function uh(e){return ik.some(t=>{try{return e.matches(t)}catch{return!1}})}const lk=["transform","translate","scale","rotate","perspective"],ck=["transform","translate","scale","rotate","perspective","filter"],dk=["paint","layout","strict","content"];function ox(e){const t=ix(),a=rr(e)?nr(e):e;return lk.some(s=>a[s]?a[s]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!t&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!t&&(a.filter?a.filter!=="none":!1)||ck.some(s=>(a.willChange||"").includes(s))||dk.some(s=>(a.contain||"").includes(s))}function uk(e){let t=no(e);for(;Cr(t)&&!bl(t);){if(ox(t))return t;if(uh(t))return null;t=no(t)}return null}function ix(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const fk=new Set(["html","body","#document"]);function bl(e){return fk.has(Gl(e))}function nr(e){return Ns(e).getComputedStyle(e)}function fh(e){return rr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function no(e){if(Gl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||qy(e)&&e.host||Or(e);return qy(t)?t.host:t}function uS(e){const t=no(e);return bl(t)?e.ownerDocument?e.ownerDocument.body:e.body:Cr(t)&&Bd(t)?t:uS(t)}function ld(e,t,a){var s;t===void 0&&(t=[]),a===void 0&&(a=!0);const n=uS(e),o=n===((s=e.ownerDocument)==null?void 0:s.body),i=Ns(n);if(o){const l=gg(i);return t.concat(i,i.visualViewport||[],Bd(n)?n:[],l&&a?ld(l):[])}return t.concat(n,ld(n,[],a))}function gg(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function fS(e){const t=nr(e);let a=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const n=Cr(e),o=n?e.offsetWidth:a,i=n?e.offsetHeight:s,l=Tf(a)!==o||Tf(s)!==i;return l&&(a=o,s=i),{width:a,height:s,$:l}}function lx(e){return rr(e)?e:e.contextElement}function Xi(e){const t=lx(e);if(!Cr(t))return Nr(1);const a=t.getBoundingClientRect(),{width:s,height:n,$:o}=fS(t);let i=(o?Tf(a.width):a.width)/s,l=(o?Tf(a.height):a.height)/n;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const hk=Nr(0);function hS(e){const t=Ns(e);return!ix()||!t.visualViewport?hk:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function mk(e,t,a){return t===void 0&&(t=!1),!a||t&&a!==Ns(e)?!1:t}function Qo(e,t,a,s){t===void 0&&(t=!1),a===void 0&&(a=!1);const n=e.getBoundingClientRect(),o=lx(e);let i=Nr(1);t&&(s?rr(s)&&(i=Xi(s)):i=Xi(e));const l=mk(o,a,s)?hS(o):Nr(0);let c=(n.left+l.x)/i.x,d=(n.top+l.y)/i.y,f=n.width/i.x,h=n.height/i.y;if(o){const p=Ns(o),m=s&&rr(s)?Ns(s):s;let b=p,y=gg(b);for(;y&&s&&m!==b;){const _=Xi(y),x=y.getBoundingClientRect(),v=nr(y),g=x.left+(y.clientLeft+parseFloat(v.paddingLeft))*_.x,E=x.top+(y.clientTop+parseFloat(v.paddingTop))*_.y;c*=_.x,d*=_.y,f*=_.x,h*=_.y,c+=g,d+=E,b=Ns(y),y=gg(b)}}return Rf({width:f,height:h,x:c,y:d})}function cx(e,t){const a=fh(e).scrollLeft;return t?t.left+a:Qo(Or(e)).left+a}function mS(e,t,a){a===void 0&&(a=!1);const s=e.getBoundingClientRect(),n=s.left+t.scrollLeft-(a?0:cx(e,s)),o=s.top+t.scrollTop;return{x:n,y:o}}function pk(e){let{elements:t,rect:a,offsetParent:s,strategy:n}=e;const o=n==="fixed",i=Or(s),l=t?uh(t.floating):!1;if(s===i||l&&o)return a;let c={scrollLeft:0,scrollTop:0},d=Nr(1);const f=Nr(0),h=Cr(s);if((h||!h&&!o)&&((Gl(s)!=="body"||Bd(i))&&(c=fh(s)),Cr(s))){const m=Qo(s);d=Xi(s),f.x=m.x+s.clientLeft,f.y=m.y+s.clientTop}const p=i&&!h&&!o?mS(i,c,!0):Nr(0);return{width:a.width*d.x,height:a.height*d.y,x:a.x*d.x-c.scrollLeft*d.x+f.x+p.x,y:a.y*d.y-c.scrollTop*d.y+f.y+p.y}}function gk(e){return Array.from(e.getClientRects())}function vk(e){const t=Or(e),a=fh(e),s=e.ownerDocument.body,n=_s(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),o=_s(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let i=-a.scrollLeft+cx(e);const l=-a.scrollTop;return nr(s).direction==="rtl"&&(i+=_s(t.clientWidth,s.clientWidth)-n),{width:n,height:o,x:i,y:l}}function xk(e,t){const a=Ns(e),s=Or(e),n=a.visualViewport;let o=s.clientWidth,i=s.clientHeight,l=0,c=0;if(n){o=n.width,i=n.height;const d=ix();(!d||d&&t==="fixed")&&(l=n.offsetLeft,c=n.offsetTop)}return{width:o,height:i,x:l,y:c}}const yk=new Set(["absolute","fixed"]);function _k(e,t){const a=Qo(e,!0,t==="fixed"),s=a.top+e.clientTop,n=a.left+e.clientLeft,o=Cr(e)?Xi(e):Nr(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=n*o.x,d=s*o.y;return{width:i,height:l,x:c,y:d}}function By(e,t,a){let s;if(t==="viewport")s=xk(e,a);else if(t==="document")s=vk(Or(e));else if(rr(t))s=_k(t,a);else{const n=hS(e);s={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Rf(s)}function pS(e,t){const a=no(e);return a===t||!rr(a)||bl(a)?!1:nr(a).position==="fixed"||pS(a,t)}function bk(e,t){const a=t.get(e);if(a)return a;let s=ld(e,[],!1).filter(l=>rr(l)&&Gl(l)!=="body"),n=null;const o=nr(e).position==="fixed";let i=o?no(e):e;for(;rr(i)&&!bl(i);){const l=nr(i),c=ox(i);!c&&l.position==="fixed"&&(n=null),(o?!c&&!n:!c&&l.position==="static"&&!!n&&yk.has(n.position)||Bd(i)&&!c&&pS(e,i))?s=s.filter(f=>f!==i):n=l,i=no(i)}return t.set(e,s),s}function wk(e){let{element:t,boundary:a,rootBoundary:s,strategy:n}=e;const i=[...a==="clippingAncestors"?uh(t)?[]:bk(t,this._c):[].concat(a),s],l=i[0],c=i.reduce((d,f)=>{const h=By(t,f,n);return d.top=_s(h.top,d.top),d.right=ro(h.right,d.right),d.bottom=ro(h.bottom,d.bottom),d.left=_s(h.left,d.left),d},By(t,l,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function jk(e){const{width:t,height:a}=fS(e);return{width:t,height:a}}function Ek(e,t,a){const s=Cr(t),n=Or(t),o=a==="fixed",i=Qo(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=Nr(0);function d(){c.x=cx(n)}if(s||!s&&!o)if((Gl(t)!=="body"||Bd(n))&&(l=fh(t)),s){const m=Qo(t,!0,o,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else n&&d();o&&!s&&n&&d();const f=n&&!s&&!o?mS(n,l):Nr(0),h=i.left+l.scrollLeft-c.x-f.x,p=i.top+l.scrollTop-c.y-f.y;return{x:h,y:p,width:i.width,height:i.height}}function Im(e){return nr(e).position==="static"}function Uy(e,t){if(!Cr(e)||nr(e).position==="fixed")return null;if(t)return t(e);let a=e.offsetParent;return Or(e)===a&&(a=a.ownerDocument.body),a}function gS(e,t){const a=Ns(e);if(uh(e))return a;if(!Cr(e)){let n=no(e);for(;n&&!bl(n);){if(rr(n)&&!Im(n))return n;n=no(n)}return a}let s=Uy(e,t);for(;s&&ok(s)&&Im(s);)s=Uy(s,t);return s&&bl(s)&&Im(s)&&!ox(s)?a:s||uk(e)||a}const Sk=async function(e){const t=this.getOffsetParent||gS,a=this.getDimensions,s=await a(e.floating);return{reference:Ek(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Nk(e){return nr(e).direction==="rtl"}const Ck={convertOffsetParentRelativeRectToViewportRelativeRect:pk,getDocumentElement:Or,getClippingRect:wk,getOffsetParent:gS,getElementRects:Sk,getClientRects:gk,getDimensions:jk,getScale:Xi,isElement:rr,isRTL:Nk};function vS(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Ak(e,t){let a=null,s;const n=Or(e);function o(){var l;clearTimeout(s),(l=a)==null||l.disconnect(),a=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const d=e.getBoundingClientRect(),{left:f,top:h,width:p,height:m}=d;if(l||t(),!p||!m)return;const b=wu(h),y=wu(n.clientWidth-(f+p)),_=wu(n.clientHeight-(h+m)),x=wu(f),g={rootMargin:-b+"px "+-y+"px "+-_+"px "+-x+"px",threshold:_s(0,ro(1,c))||1};let E=!0;function j(S){const N=S[0].intersectionRatio;if(N!==c){if(!E)return i();N?i(!1,N):s=setTimeout(()=>{i(!1,1e-7)},1e3)}N===1&&!vS(d,e.getBoundingClientRect())&&i(),E=!1}try{a=new IntersectionObserver(j,{...g,root:n.ownerDocument})}catch{a=new IntersectionObserver(j,g)}a.observe(e)}return i(!0),o}function Dk(e,t,a,s){s===void 0&&(s={});const{ancestorScroll:n=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=lx(e),f=n||o?[...d?ld(d):[],...ld(t)]:[];f.forEach(x=>{n&&x.addEventListener("scroll",a,{passive:!0}),o&&x.addEventListener("resize",a)});const h=d&&l?Ak(d,a):null;let p=-1,m=null;i&&(m=new ResizeObserver(x=>{let[v]=x;v&&v.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var g;(g=m)==null||g.observe(t)})),a()}),d&&!c&&m.observe(d),m.observe(t));let b,y=c?Qo(e):null;c&&_();function _(){const x=Qo(e);y&&!vS(y,x)&&a(),y=x,b=requestAnimationFrame(_)}return a(),()=>{var x;f.forEach(v=>{n&&v.removeEventListener("scroll",a),o&&v.removeEventListener("resize",a)}),h==null||h(),(x=m)==null||x.disconnect(),m=null,c&&cancelAnimationFrame(b)}}const Tk=ek,Ok=tk,Rk=XM,Mk=sk,kk=KM,Hy=ZM,zk=ak,Pk=(e,t,a)=>{const s=new Map,n={platform:Ck,...a},o={...n.platform,_c:s};return QM(e,t,{...n,platform:o})};var Ik=typeof document<"u",Lk=function(){},Yu=Ik?u.useLayoutEffect:Lk;function Mf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let a,s,n;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(a=e.length,a!==t.length)return!1;for(s=a;s--!==0;)if(!Mf(e[s],t[s]))return!1;return!0}if(n=Object.keys(e),a=n.length,a!==Object.keys(t).length)return!1;for(s=a;s--!==0;)if(!{}.hasOwnProperty.call(t,n[s]))return!1;for(s=a;s--!==0;){const o=n[s];if(!(o==="_owner"&&e.$$typeof)&&!Mf(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function xS(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Vy(e,t){const a=xS(e);return Math.round(t*a)/a}function Lm(e){const t=u.useRef(e);return Yu(()=>{t.current=e}),t}function Fk(e){e===void 0&&(e={});const{placement:t="bottom",strategy:a="absolute",middleware:s=[],platform:n,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[f,h]=u.useState({x:0,y:0,strategy:a,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=u.useState(s);Mf(p,s)||m(s);const[b,y]=u.useState(null),[_,x]=u.useState(null),v=u.useCallback(I=>{I!==S.current&&(S.current=I,y(I))},[]),g=u.useCallback(I=>{I!==N.current&&(N.current=I,x(I))},[]),E=o||b,j=i||_,S=u.useRef(null),N=u.useRef(null),R=u.useRef(f),T=c!=null,F=Lm(c),U=Lm(n),Z=Lm(d),ce=u.useCallback(()=>{if(!S.current||!N.current)return;const I={placement:t,strategy:a,middleware:p};U.current&&(I.platform=U.current),Pk(S.current,N.current,I).then(w=>{const C={...w,isPositioned:Z.current!==!1};k.current&&!Mf(R.current,C)&&(R.current=C,ti.flushSync(()=>{h(C)}))})},[p,t,a,U,Z]);Yu(()=>{d===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,h(I=>({...I,isPositioned:!1})))},[d]);const k=u.useRef(!1);Yu(()=>(k.current=!0,()=>{k.current=!1}),[]),Yu(()=>{if(E&&(S.current=E),j&&(N.current=j),E&&j){if(F.current)return F.current(E,j,ce);ce()}},[E,j,ce,F,T]);const M=u.useMemo(()=>({reference:S,floating:N,setReference:v,setFloating:g}),[v,g]),A=u.useMemo(()=>({reference:E,floating:j}),[E,j]),q=u.useMemo(()=>{const I={position:a,left:0,top:0};if(!A.floating)return I;const w=Vy(A.floating,f.x),C=Vy(A.floating,f.y);return l?{...I,transform:"translate("+w+"px, "+C+"px)",...xS(A.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:w,top:C}},[a,l,A.floating,f.x,f.y]);return u.useMemo(()=>({...f,update:ce,refs:M,elements:A,floatingStyles:q}),[f,ce,M,A,q])}const $k=e=>{function t(a){return{}.hasOwnProperty.call(a,"current")}return{name:"arrow",options:e,fn(a){const{element:s,padding:n}=typeof e=="function"?e(a):e;return s&&t(s)?s.current!=null?Hy({element:s.current,padding:n}).fn(a):{}:s?Hy({element:s,padding:n}).fn(a):{}}}},qk=(e,t)=>({...Tk(e),options:[e,t]}),Bk=(e,t)=>({...Ok(e),options:[e,t]}),Uk=(e,t)=>({...zk(e),options:[e,t]}),Hk=(e,t)=>({...Rk(e),options:[e,t]}),Vk=(e,t)=>({...Mk(e),options:[e,t]}),Gk=(e,t)=>({...kk(e),options:[e,t]}),Yk=(e,t)=>({...$k(e),options:[e,t]});var Wk="Arrow",yS=u.forwardRef((e,t)=>{const{children:a,width:s=10,height:n=5,...o}=e;return r.jsx(Ue.svg,{...o,ref:t,width:s,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?a:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});yS.displayName=Wk;var Qk=yS;function dx(e){const[t,a]=u.useState(void 0);return Fa(()=>{if(e){a({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const o=n[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;a({width:i,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else a(void 0)},[e]),t}var ux="Popper",[_S,Yl]=As(ux),[Zk,bS]=_S(ux),wS=e=>{const{__scopePopper:t,children:a}=e,[s,n]=u.useState(null);return r.jsx(Zk,{scope:t,anchor:s,onAnchorChange:n,children:a})};wS.displayName=ux;var jS="PopperAnchor",ES=u.forwardRef((e,t)=>{const{__scopePopper:a,virtualRef:s,...n}=e,o=bS(jS,a),i=u.useRef(null),l=Nt(t,i);return u.useEffect(()=>{o.onAnchorChange((s==null?void 0:s.current)||i.current)}),s?null:r.jsx(Ue.div,{...n,ref:l})});ES.displayName=jS;var fx="PopperContent",[Xk,Kk]=_S(fx),SS=u.forwardRef((e,t)=>{var Y,be,de,V,le,B;const{__scopePopper:a,side:s="bottom",sideOffset:n=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:b,...y}=e,_=bS(fx,a),[x,v]=u.useState(null),g=Nt(t,ie=>v(ie)),[E,j]=u.useState(null),S=dx(E),N=(S==null?void 0:S.width)??0,R=(S==null?void 0:S.height)??0,T=s+(o!=="center"?"-"+o:""),F=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},U=Array.isArray(d)?d:[d],Z=U.length>0,ce={padding:F,boundary:U.filter(ez),altBoundary:Z},{refs:k,floatingStyles:M,placement:A,isPositioned:q,middlewareData:I}=Fk({strategy:"fixed",placement:T,whileElementsMounted:(...ie)=>Dk(...ie,{animationFrame:m==="always"}),elements:{reference:_.anchor},middleware:[qk({mainAxis:n+R,alignmentAxis:i}),c&&Bk({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Uk():void 0,...ce}),c&&Hk({...ce}),Vk({...ce,apply:({elements:ie,rects:xe,availableWidth:pe,availableHeight:Ce})=>{const{width:De,height:he}=xe.reference,P=ie.floating.style;P.setProperty("--radix-popper-available-width",`${pe}px`),P.setProperty("--radix-popper-available-height",`${Ce}px`),P.setProperty("--radix-popper-anchor-width",`${De}px`),P.setProperty("--radix-popper-anchor-height",`${he}px`)}}),E&&Yk({element:E,padding:l}),tz({arrowWidth:N,arrowHeight:R}),p&&Gk({strategy:"referenceHidden",...ce})]}),[w,C]=AS(A),$=qs(b);Fa(()=>{q&&($==null||$())},[q,$]);const O=(Y=I.arrow)==null?void 0:Y.x,L=(be=I.arrow)==null?void 0:be.y,H=((de=I.arrow)==null?void 0:de.centerOffset)!==0,[G,te]=u.useState();return Fa(()=>{x&&te(window.getComputedStyle(x).zIndex)},[x]),r.jsx("div",{ref:k.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:q?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[(V=I.transformOrigin)==null?void 0:V.x,(le=I.transformOrigin)==null?void 0:le.y].join(" "),...((B=I.hide)==null?void 0:B.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(Xk,{scope:a,placedSide:w,onArrowChange:j,arrowX:O,arrowY:L,shouldHideArrow:H,children:r.jsx(Ue.div,{"data-side":w,"data-align":C,...y,ref:g,style:{...y.style,animation:q?void 0:"none"}})})})});SS.displayName=fx;var NS="PopperArrow",Jk={top:"bottom",right:"left",bottom:"top",left:"right"},CS=u.forwardRef(function(t,a){const{__scopePopper:s,...n}=t,o=Kk(NS,s),i=Jk[o.placedSide];return r.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:r.jsx(Qk,{...n,ref:a,style:{...n.style,display:"block"}})})});CS.displayName=NS;function ez(e){return e!==null}var tz=e=>({name:"transformOrigin",options:e,fn(t){var _,x,v;const{placement:a,rects:s,middlewareData:n}=t,i=((_=n.arrow)==null?void 0:_.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,f]=AS(a),h={start:"0%",center:"50%",end:"100%"}[f],p=(((x=n.arrow)==null?void 0:x.x)??0)+l/2,m=(((v=n.arrow)==null?void 0:v.y)??0)+c/2;let b="",y="";return d==="bottom"?(b=i?h:`${p}px`,y=`${-c}px`):d==="top"?(b=i?h:`${p}px`,y=`${s.floating.height+c}px`):d==="right"?(b=`${-c}px`,y=i?h:`${m}px`):d==="left"&&(b=`${s.floating.width+c}px`,y=i?h:`${m}px`),{data:{x:b,y}}}});function AS(e){const[t,a="center"]=e.split("-");return[t,a]}var DS=wS,hh=ES,hx=SS,mx=CS,[mh,tH]=As("Tooltip",[Yl]),px=Yl(),TS="TooltipProvider",az=700,Gy="tooltip.open",[sz,OS]=mh(TS),RS=e=>{const{__scopeTooltip:t,delayDuration:a=az,skipDelayDuration:s=300,disableHoverableContent:n=!1,children:o}=e,i=u.useRef(!0),l=u.useRef(!1),c=u.useRef(0);return u.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(sz,{scope:t,isOpenDelayedRef:i,delayDuration:a,onOpen:u.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:u.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:u.useCallback(d=>{l.current=d},[]),disableHoverableContent:n,children:o})};RS.displayName=TS;var MS="Tooltip",[aH,ph]=mh(MS),vg="TooltipTrigger",rz=u.forwardRef((e,t)=>{const{__scopeTooltip:a,...s}=e,n=ph(vg,a),o=OS(vg,a),i=px(a),l=u.useRef(null),c=Nt(t,l,n.onTriggerChange),d=u.useRef(!1),f=u.useRef(!1),h=u.useCallback(()=>d.current=!1,[]);return u.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),r.jsx(hh,{asChild:!0,...i,children:r.jsx(Ue.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...s,ref:c,onPointerMove:Be(e.onPointerMove,p=>{p.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(n.onTriggerEnter(),f.current=!0)}),onPointerLeave:Be(e.onPointerLeave,()=>{n.onTriggerLeave(),f.current=!1}),onPointerDown:Be(e.onPointerDown,()=>{n.open&&n.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Be(e.onFocus,()=>{d.current||n.onOpen()}),onBlur:Be(e.onBlur,n.onClose),onClick:Be(e.onClick,n.onClose)})})});rz.displayName=vg;var nz="TooltipPortal",[sH,oz]=mh(nz,{forceMount:void 0}),wl="TooltipContent",kS=u.forwardRef((e,t)=>{const a=oz(wl,e.__scopeTooltip),{forceMount:s=a.forceMount,side:n="top",...o}=e,i=ph(wl,e.__scopeTooltip);return r.jsx(Tr,{present:s||i.open,children:i.disableHoverableContent?r.jsx(zS,{side:n,...o,ref:t}):r.jsx(iz,{side:n,...o,ref:t})})}),iz=u.forwardRef((e,t)=>{const a=ph(wl,e.__scopeTooltip),s=OS(wl,e.__scopeTooltip),n=u.useRef(null),o=Nt(t,n),[i,l]=u.useState(null),{trigger:c,onClose:d}=a,f=n.current,{onPointerInTransitChange:h}=s,p=u.useCallback(()=>{l(null),h(!1)},[h]),m=u.useCallback((b,y)=>{const _=b.currentTarget,x={x:b.clientX,y:b.clientY},v=fz(x,_.getBoundingClientRect()),g=hz(x,v),E=mz(y.getBoundingClientRect()),j=gz([...g,...E]);l(j),h(!0)},[h]);return u.useEffect(()=>()=>p(),[p]),u.useEffect(()=>{if(c&&f){const b=_=>m(_,f),y=_=>m(_,c);return c.addEventListener("pointerleave",b),f.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",b),f.removeEventListener("pointerleave",y)}}},[c,f,m,p]),u.useEffect(()=>{if(i){const b=y=>{const _=y.target,x={x:y.clientX,y:y.clientY},v=(c==null?void 0:c.contains(_))||(f==null?void 0:f.contains(_)),g=!pz(x,i);v?p():g&&(p(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,f,i,d,p]),r.jsx(zS,{...e,ref:o})}),[lz,cz]=mh(MS,{isInside:!1}),dz=vE("TooltipContent"),zS=u.forwardRef((e,t)=>{const{__scopeTooltip:a,children:s,"aria-label":n,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=ph(wl,a),d=px(a),{onClose:f}=c;return u.useEffect(()=>(document.addEventListener(Gy,f),()=>document.removeEventListener(Gy,f)),[f]),u.useEffect(()=>{if(c.trigger){const h=p=>{const m=p.target;m!=null&&m.contains(c.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,f]),r.jsx(ql,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:r.jsxs(hx,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(dz,{children:s}),r.jsx(lz,{scope:a,isInside:!0,children:r.jsx(vR,{id:c.contentId,role:"tooltip",children:n||s})})]})})});kS.displayName=wl;var PS="TooltipArrow",uz=u.forwardRef((e,t)=>{const{__scopeTooltip:a,...s}=e,n=px(a);return cz(PS,a).isInside?null:r.jsx(mx,{...n,...s,ref:t})});uz.displayName=PS;function fz(e,t){const a=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(a,s,n,o)){case o:return"left";case n:return"right";case a:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function hz(e,t,a=5){const s=[];switch(t){case"top":s.push({x:e.x-a,y:e.y+a},{x:e.x+a,y:e.y+a});break;case"bottom":s.push({x:e.x-a,y:e.y-a},{x:e.x+a,y:e.y-a});break;case"left":s.push({x:e.x+a,y:e.y-a},{x:e.x+a,y:e.y+a});break;case"right":s.push({x:e.x-a,y:e.y-a},{x:e.x-a,y:e.y+a});break}return s}function mz(e){const{top:t,right:a,bottom:s,left:n}=e;return[{x:n,y:t},{x:a,y:t},{x:a,y:s},{x:n,y:s}]}function pz(e,t){const{x:a,y:s}=e;let n=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],d=l.x,f=l.y,h=c.x,p=c.y;f>s!=p>s&&a<(h-d)*(s-f)/(p-f)+d&&(n=!n)}return n}function gz(e){const t=e.slice();return t.sort((a,s)=>a.x<s.x?-1:a.x>s.x?1:a.y<s.y?-1:a.y>s.y?1:0),vz(t)}function vz(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const n=e[s];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(n.y-i.y)>=(o.y-i.y)*(n.x-i.x))t.pop();else break}t.push(n)}t.pop();const a=[];for(let s=e.length-1;s>=0;s--){const n=e[s];for(;a.length>=2;){const o=a[a.length-1],i=a[a.length-2];if((o.x-i.x)*(n.y-i.y)>=(o.y-i.y)*(n.x-i.x))a.pop();else break}a.push(n)}return a.pop(),t.length===1&&a.length===1&&t[0].x===a[0].x&&t[0].y===a[0].y?t:t.concat(a)}var xz=RS,IS=kS;const yz=xz,_z=u.forwardRef(({className:e,sideOffset:t=4,...a},s)=>r.jsx(IS,{ref:s,sideOffset:t,className:Ae("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a}));_z.displayName=IS.displayName;var gh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},vh=typeof window>"u"||"Deno"in globalThis;function Qs(){}function bz(e,t){return typeof e=="function"?e(t):e}function wz(e){return typeof e=="number"&&e>=0&&e!==1/0}function jz(e,t){return Math.max(e+(t||0)-Date.now(),0)}function xg(e,t){return typeof e=="function"?e(t):e}function Ez(e,t){return typeof e=="function"?e(t):e}function Yy(e,t){const{type:a="all",exact:s,fetchStatus:n,predicate:o,queryKey:i,stale:l}=e;if(i){if(s){if(t.queryHash!==gx(i,t.options))return!1}else if(!dd(t.queryKey,i))return!1}if(a!=="all"){const c=t.isActive();if(a==="active"&&!c||a==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||n&&n!==t.state.fetchStatus||o&&!o(t))}function Wy(e,t){const{exact:a,status:s,predicate:n,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(a){if(cd(t.options.mutationKey)!==cd(o))return!1}else if(!dd(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||n&&!n(t))}function gx(e,t){return((t==null?void 0:t.queryKeyHashFn)||cd)(e)}function cd(e){return JSON.stringify(e,(t,a)=>yg(a)?Object.keys(a).sort().reduce((s,n)=>(s[n]=a[n],s),{}):a)}function dd(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(a=>dd(e[a],t[a])):!1}function LS(e,t){if(e===t)return e;const a=Qy(e)&&Qy(t);if(a||yg(e)&&yg(t)){const s=a?e:Object.keys(e),n=s.length,o=a?t:Object.keys(t),i=o.length,l=a?[]:{},c=new Set(s);let d=0;for(let f=0;f<i;f++){const h=a?f:o[f];(!a&&c.has(h)||a)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,d++):(l[h]=LS(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&d++)}return n===i&&d===n?e:l}return t}function Qy(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function yg(e){if(!Zy(e))return!1;const t=e.constructor;if(t===void 0)return!0;const a=t.prototype;return!(!Zy(a)||!a.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Zy(e){return Object.prototype.toString.call(e)==="[object Object]"}function Sz(e){return new Promise(t=>{setTimeout(t,e)})}function Nz(e,t,a){return typeof a.structuralSharing=="function"?a.structuralSharing(e,t):a.structuralSharing!==!1?LS(e,t):t}function Cz(e,t,a=0){const s=[...e,t];return a&&s.length>a?s.slice(1):s}function Az(e,t,a=0){const s=[t,...e];return a&&s.length>a?s.slice(0,-1):s}var vx=Symbol();function FS(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===vx?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Ao,zn,al,db,Dz=(db=class extends gh{constructor(){super();Ot(this,Ao);Ot(this,zn);Ot(this,al);nt(this,al,t=>{if(!vh&&window.addEventListener){const a=()=>t();return window.addEventListener("visibilitychange",a,!1),()=>{window.removeEventListener("visibilitychange",a)}}})}onSubscribe(){ye(this,zn)||this.setEventListener(ye(this,al))}onUnsubscribe(){var t;this.hasListeners()||((t=ye(this,zn))==null||t.call(this),nt(this,zn,void 0))}setEventListener(t){var a;nt(this,al,t),(a=ye(this,zn))==null||a.call(this),nt(this,zn,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){ye(this,Ao)!==t&&(nt(this,Ao,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(a=>{a(t)})}isFocused(){var t;return typeof ye(this,Ao)=="boolean"?ye(this,Ao):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ao=new WeakMap,zn=new WeakMap,al=new WeakMap,db),$S=new Dz,sl,Pn,rl,ub,Tz=(ub=class extends gh{constructor(){super();Ot(this,sl,!0);Ot(this,Pn);Ot(this,rl);nt(this,rl,t=>{if(!vh&&window.addEventListener){const a=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",a,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",s)}}})}onSubscribe(){ye(this,Pn)||this.setEventListener(ye(this,rl))}onUnsubscribe(){var t;this.hasListeners()||((t=ye(this,Pn))==null||t.call(this),nt(this,Pn,void 0))}setEventListener(t){var a;nt(this,rl,t),(a=ye(this,Pn))==null||a.call(this),nt(this,Pn,t(this.setOnline.bind(this)))}setOnline(t){ye(this,sl)!==t&&(nt(this,sl,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return ye(this,sl)}},sl=new WeakMap,Pn=new WeakMap,rl=new WeakMap,ub),kf=new Tz;function Oz(){let e,t;const a=new Promise((n,o)=>{e=n,t=o});a.status="pending",a.catch(()=>{});function s(n){Object.assign(a,n),delete a.resolve,delete a.reject}return a.resolve=n=>{s({status:"fulfilled",value:n}),e(n)},a.reject=n=>{s({status:"rejected",reason:n}),t(n)},a}function Rz(e){return Math.min(1e3*2**e,3e4)}function qS(e){return(e??"online")==="online"?kf.isOnline():!0}var BS=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Fm(e){return e instanceof BS}function US(e){let t=!1,a=0,s=!1,n;const o=Oz(),i=y=>{var _;s||(p(new BS(y)),(_=e.abort)==null||_.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>$S.isFocused()&&(e.networkMode==="always"||kf.isOnline())&&e.canRun(),f=()=>qS(e.networkMode)&&e.canRun(),h=y=>{var _;s||(s=!0,(_=e.onSuccess)==null||_.call(e,y),n==null||n(),o.resolve(y))},p=y=>{var _;s||(s=!0,(_=e.onError)==null||_.call(e,y),n==null||n(),o.reject(y))},m=()=>new Promise(y=>{var _;n=x=>{(s||d())&&y(x)},(_=e.onPause)==null||_.call(e)}).then(()=>{var y;n=void 0,s||(y=e.onContinue)==null||y.call(e)}),b=()=>{if(s)return;let y;const _=a===0?e.initialPromise:void 0;try{y=_??e.fn()}catch(x){y=Promise.reject(x)}Promise.resolve(y).then(h).catch(x=>{var S;if(s)return;const v=e.retry??(vh?0:3),g=e.retryDelay??Rz,E=typeof g=="function"?g(a,x):g,j=v===!0||typeof v=="number"&&a<v||typeof v=="function"&&v(a,x);if(t||!j){p(x);return}a++,(S=e.onFail)==null||S.call(e,a,x),Sz(E).then(()=>d()?void 0:m()).then(()=>{t?p(x):b()})})};return{promise:o,cancel:i,continue:()=>(n==null||n(),o),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?b():m().then(b),o)}}var Mz=e=>setTimeout(e,0);function kz(){let e=[],t=0,a=l=>{l()},s=l=>{l()},n=Mz;const o=l=>{t?e.push(l):n(()=>{a(l)})},i=()=>{const l=e;e=[],l.length&&n(()=>{s(()=>{l.forEach(c=>{a(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{a=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{n=l}}}var Xa=kz(),Do,fb,HS=(fb=class{constructor(){Ot(this,Do)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wz(this.gcTime)&&nt(this,Do,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(vh?1/0:5*60*1e3))}clearGcTimeout(){ye(this,Do)&&(clearTimeout(ye(this,Do)),nt(this,Do,void 0))}},Do=new WeakMap,fb),nl,To,Ts,Oo,Ha,bd,Ro,Zs,qr,hb,zz=(hb=class extends HS{constructor(t){super();Ot(this,Zs);Ot(this,nl);Ot(this,To);Ot(this,Ts);Ot(this,Oo);Ot(this,Ha);Ot(this,bd);Ot(this,Ro);nt(this,Ro,!1),nt(this,bd,t.defaultOptions),this.setOptions(t.options),this.observers=[],nt(this,Oo,t.client),nt(this,Ts,ye(this,Oo).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,nt(this,nl,Iz(this.options)),this.state=t.state??ye(this,nl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ye(this,Ha))==null?void 0:t.promise}setOptions(t){this.options={...ye(this,bd),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ye(this,Ts).remove(this)}setData(t,a){const s=Nz(this.state.data,t,this.options);return Ba(this,Zs,qr).call(this,{data:s,type:"success",dataUpdatedAt:a==null?void 0:a.updatedAt,manual:a==null?void 0:a.manual}),s}setState(t,a){Ba(this,Zs,qr).call(this,{type:"setState",state:t,setStateOptions:a})}cancel(t){var s,n;const a=(s=ye(this,Ha))==null?void 0:s.promise;return(n=ye(this,Ha))==null||n.cancel(t),a?a.then(Qs).catch(Qs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ye(this,nl))}isActive(){return this.observers.some(t=>Ez(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===vx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>xg(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!jz(this.state.dataUpdatedAt,t)}onFocus(){var a;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(a=ye(this,Ha))==null||a.continue()}onOnline(){var a;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(a=ye(this,Ha))==null||a.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ye(this,Ts).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(a=>a!==t),this.observers.length||(ye(this,Ha)&&(ye(this,Ro)?ye(this,Ha).cancel({revert:!0}):ye(this,Ha).cancelRetry()),this.scheduleGc()),ye(this,Ts).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ba(this,Zs,qr).call(this,{type:"invalidate"})}fetch(t,a){var d,f,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(a!=null&&a.cancelRefetch))this.cancel({silent:!0});else if(ye(this,Ha))return ye(this,Ha).continueRetry(),ye(this,Ha).promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(m=>m.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,n=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(nt(this,Ro,!0),s.signal)})},o=()=>{const p=FS(this.options,a),b=(()=>{const y={client:ye(this,Oo),queryKey:this.queryKey,meta:this.meta};return n(y),y})();return nt(this,Ro,!1),this.options.persister?this.options.persister(p,b,this):p(b)},l=(()=>{const p={fetchOptions:a,options:this.options,queryKey:this.queryKey,client:ye(this,Oo),state:this.state,fetchFn:o};return n(p),p})();(d=this.options.behavior)==null||d.onFetch(l,this),nt(this,To,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&Ba(this,Zs,qr).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=p=>{var m,b,y,_;Fm(p)&&p.silent||Ba(this,Zs,qr).call(this,{type:"error",error:p}),Fm(p)||((b=(m=ye(this,Ts).config).onError)==null||b.call(m,p,this),(_=(y=ye(this,Ts).config).onSettled)==null||_.call(y,this.state.data,p,this)),this.scheduleGc()};return nt(this,Ha,US({initialPromise:a==null?void 0:a.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var m,b,y,_;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(x){c(x);return}(b=(m=ye(this,Ts).config).onSuccess)==null||b.call(m,p,this),(_=(y=ye(this,Ts).config).onSettled)==null||_.call(y,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,m)=>{Ba(this,Zs,qr).call(this,{type:"failed",failureCount:p,error:m})},onPause:()=>{Ba(this,Zs,qr).call(this,{type:"pause"})},onContinue:()=>{Ba(this,Zs,qr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),ye(this,Ha).start()}},nl=new WeakMap,To=new WeakMap,Ts=new WeakMap,Oo=new WeakMap,Ha=new WeakMap,bd=new WeakMap,Ro=new WeakMap,Zs=new WeakSet,qr=function(t){const a=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Pz(s.data,this.options),fetchMeta:t.meta??null};case"success":return nt(this,To,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return Fm(n)&&n.revert&&ye(this,To)?{...ye(this,To),fetchStatus:"idle"}:{...s,error:n,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=a(this.state),Xa.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),ye(this,Ts).notify({query:this,type:"updated",action:t})})},hb);function Pz(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:qS(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Iz(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,a=t!==void 0,s=a?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:a?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}var fr,mb,Lz=(mb=class extends gh{constructor(t={}){super();Ot(this,fr);this.config=t,nt(this,fr,new Map)}build(t,a,s){const n=a.queryKey,o=a.queryHash??gx(n,a);let i=this.get(o);return i||(i=new zz({client:t,queryKey:n,queryHash:o,options:t.defaultQueryOptions(a),state:s,defaultOptions:t.getQueryDefaults(n)}),this.add(i)),i}add(t){ye(this,fr).has(t.queryHash)||(ye(this,fr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const a=ye(this,fr).get(t.queryHash);a&&(t.destroy(),a===t&&ye(this,fr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Xa.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ye(this,fr).get(t)}getAll(){return[...ye(this,fr).values()]}find(t){const a={exact:!0,...t};return this.getAll().find(s=>Yy(a,s))}findAll(t={}){const a=this.getAll();return Object.keys(t).length>0?a.filter(s=>Yy(t,s)):a}notify(t){Xa.batch(()=>{this.listeners.forEach(a=>{a(t)})})}onFocus(){Xa.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Xa.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},fr=new WeakMap,mb),hr,Za,Mo,mr,En,pb,Fz=(pb=class extends HS{constructor(t){super();Ot(this,mr);Ot(this,hr);Ot(this,Za);Ot(this,Mo);this.mutationId=t.mutationId,nt(this,Za,t.mutationCache),nt(this,hr,[]),this.state=t.state||$z(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ye(this,hr).includes(t)||(ye(this,hr).push(t),this.clearGcTimeout(),ye(this,Za).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){nt(this,hr,ye(this,hr).filter(a=>a!==t)),this.scheduleGc(),ye(this,Za).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ye(this,hr).length||(this.state.status==="pending"?this.scheduleGc():ye(this,Za).remove(this))}continue(){var t;return((t=ye(this,Mo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,i,l,c,d,f,h,p,m,b,y,_,x,v,g,E,j,S,N,R;const a=()=>{Ba(this,mr,En).call(this,{type:"continue"})};nt(this,Mo,US({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(T,F)=>{Ba(this,mr,En).call(this,{type:"failed",failureCount:T,error:F})},onPause:()=>{Ba(this,mr,En).call(this,{type:"pause"})},onContinue:a,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ye(this,Za).canRun(this)}));const s=this.state.status==="pending",n=!ye(this,Mo).canStart();try{if(s)a();else{Ba(this,mr,En).call(this,{type:"pending",variables:t,isPaused:n}),await((i=(o=ye(this,Za).config).onMutate)==null?void 0:i.call(o,t,this));const F=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));F!==this.state.context&&Ba(this,mr,En).call(this,{type:"pending",context:F,variables:t,isPaused:n})}const T=await ye(this,Mo).start();return await((f=(d=ye(this,Za).config).onSuccess)==null?void 0:f.call(d,T,t,this.state.context,this)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,T,t,this.state.context)),await((b=(m=ye(this,Za).config).onSettled)==null?void 0:b.call(m,T,null,this.state.variables,this.state.context,this)),await((_=(y=this.options).onSettled)==null?void 0:_.call(y,T,null,t,this.state.context)),Ba(this,mr,En).call(this,{type:"success",data:T}),T}catch(T){try{throw await((v=(x=ye(this,Za).config).onError)==null?void 0:v.call(x,T,t,this.state.context,this)),await((E=(g=this.options).onError)==null?void 0:E.call(g,T,t,this.state.context)),await((S=(j=ye(this,Za).config).onSettled)==null?void 0:S.call(j,void 0,T,this.state.variables,this.state.context,this)),await((R=(N=this.options).onSettled)==null?void 0:R.call(N,void 0,T,t,this.state.context)),T}finally{Ba(this,mr,En).call(this,{type:"error",error:T})}}finally{ye(this,Za).runNext(this)}}},hr=new WeakMap,Za=new WeakMap,Mo=new WeakMap,mr=new WeakSet,En=function(t){const a=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=a(this.state),Xa.batch(()=>{ye(this,hr).forEach(s=>{s.onMutationUpdate(t)}),ye(this,Za).notify({mutation:this,type:"updated",action:t})})},pb);function $z(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Hr,Xs,wd,gb,qz=(gb=class extends gh{constructor(t={}){super();Ot(this,Hr);Ot(this,Xs);Ot(this,wd);this.config=t,nt(this,Hr,new Set),nt(this,Xs,new Map),nt(this,wd,0)}build(t,a,s){const n=new Fz({mutationCache:this,mutationId:++su(this,wd)._,options:t.defaultMutationOptions(a),state:s});return this.add(n),n}add(t){ye(this,Hr).add(t);const a=ju(t);if(typeof a=="string"){const s=ye(this,Xs).get(a);s?s.push(t):ye(this,Xs).set(a,[t])}this.notify({type:"added",mutation:t})}remove(t){if(ye(this,Hr).delete(t)){const a=ju(t);if(typeof a=="string"){const s=ye(this,Xs).get(a);if(s)if(s.length>1){const n=s.indexOf(t);n!==-1&&s.splice(n,1)}else s[0]===t&&ye(this,Xs).delete(a)}}this.notify({type:"removed",mutation:t})}canRun(t){const a=ju(t);if(typeof a=="string"){const s=ye(this,Xs).get(a),n=s==null?void 0:s.find(o=>o.state.status==="pending");return!n||n===t}else return!0}runNext(t){var s;const a=ju(t);if(typeof a=="string"){const n=(s=ye(this,Xs).get(a))==null?void 0:s.find(o=>o!==t&&o.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Xa.batch(()=>{ye(this,Hr).forEach(t=>{this.notify({type:"removed",mutation:t})}),ye(this,Hr).clear(),ye(this,Xs).clear()})}getAll(){return Array.from(ye(this,Hr))}find(t){const a={exact:!0,...t};return this.getAll().find(s=>Wy(a,s))}findAll(t={}){return this.getAll().filter(a=>Wy(t,a))}notify(t){Xa.batch(()=>{this.listeners.forEach(a=>{a(t)})})}resumePausedMutations(){const t=this.getAll().filter(a=>a.state.isPaused);return Xa.batch(()=>Promise.all(t.map(a=>a.continue().catch(Qs))))}},Hr=new WeakMap,Xs=new WeakMap,wd=new WeakMap,gb);function ju(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Xy(e){return{onFetch:(t,a)=>{var f,h,p,m,b;const s=t.options,n=(p=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,o=((m=t.state.data)==null?void 0:m.pages)||[],i=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let y=!1;const _=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener("abort",()=>{y=!0}),t.signal)})},x=FS(t.options,t.fetchOptions),v=async(g,E,j)=>{if(y)return Promise.reject();if(E==null&&g.pages.length)return Promise.resolve(g);const N=(()=>{const U={client:t.client,queryKey:t.queryKey,pageParam:E,direction:j?"backward":"forward",meta:t.options.meta};return _(U),U})(),R=await x(N),{maxPages:T}=t.options,F=j?Az:Cz;return{pages:F(g.pages,R,T),pageParams:F(g.pageParams,E,T)}};if(n&&o.length){const g=n==="backward",E=g?Bz:Ky,j={pages:o,pageParams:i},S=E(s,j);l=await v(j,S,g)}else{const g=e??o.length;do{const E=c===0?i[0]??s.initialPageParam:Ky(s,l);if(c>0&&E==null)break;l=await v(l,E),c++}while(c<g)}return l};t.options.persister?t.fetchFn=()=>{var y,_;return(_=(y=t.options).persister)==null?void 0:_.call(y,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},a)}:t.fetchFn=d}}}function Ky(e,{pages:t,pageParams:a}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,a[s],a):void 0}function Bz(e,{pages:t,pageParams:a}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,a[0],a):void 0}var pa,In,Ln,ol,il,Fn,ll,cl,vb,Uz=(vb=class{constructor(e={}){Ot(this,pa);Ot(this,In);Ot(this,Ln);Ot(this,ol);Ot(this,il);Ot(this,Fn);Ot(this,ll);Ot(this,cl);nt(this,pa,e.queryCache||new Lz),nt(this,In,e.mutationCache||new qz),nt(this,Ln,e.defaultOptions||{}),nt(this,ol,new Map),nt(this,il,new Map),nt(this,Fn,0)}mount(){su(this,Fn)._++,ye(this,Fn)===1&&(nt(this,ll,$S.subscribe(async e=>{e&&(await this.resumePausedMutations(),ye(this,pa).onFocus())})),nt(this,cl,kf.subscribe(async e=>{e&&(await this.resumePausedMutations(),ye(this,pa).onOnline())})))}unmount(){var e,t;su(this,Fn)._--,ye(this,Fn)===0&&((e=ye(this,ll))==null||e.call(this),nt(this,ll,void 0),(t=ye(this,cl))==null||t.call(this),nt(this,cl,void 0))}isFetching(e){return ye(this,pa).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ye(this,In).findAll({...e,status:"pending"}).length}getQueryData(e){var a;const t=this.defaultQueryOptions({queryKey:e});return(a=ye(this,pa).get(t.queryHash))==null?void 0:a.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),a=ye(this,pa).build(this,t),s=a.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&a.isStaleByTime(xg(t.staleTime,a))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return ye(this,pa).findAll(e).map(({queryKey:t,state:a})=>{const s=a.data;return[t,s]})}setQueryData(e,t,a){const s=this.defaultQueryOptions({queryKey:e}),n=ye(this,pa).get(s.queryHash),o=n==null?void 0:n.state.data,i=bz(t,o);if(i!==void 0)return ye(this,pa).build(this,s).setData(i,{...a,manual:!0})}setQueriesData(e,t,a){return Xa.batch(()=>ye(this,pa).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,a)]))}getQueryState(e){var a;const t=this.defaultQueryOptions({queryKey:e});return(a=ye(this,pa).get(t.queryHash))==null?void 0:a.state}removeQueries(e){const t=ye(this,pa);Xa.batch(()=>{t.findAll(e).forEach(a=>{t.remove(a)})})}resetQueries(e,t){const a=ye(this,pa);return Xa.batch(()=>(a.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const a={revert:!0,...t},s=Xa.batch(()=>ye(this,pa).findAll(e).map(n=>n.cancel(a)));return Promise.all(s).then(Qs).catch(Qs)}invalidateQueries(e,t={}){return Xa.batch(()=>(ye(this,pa).findAll(e).forEach(a=>{a.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const a={...t,cancelRefetch:t.cancelRefetch??!0},s=Xa.batch(()=>ye(this,pa).findAll(e).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let o=n.fetch(void 0,a);return a.throwOnError||(o=o.catch(Qs)),n.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(Qs)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const a=ye(this,pa).build(this,t);return a.isStaleByTime(xg(t.staleTime,a))?a.fetch(t):Promise.resolve(a.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Qs).catch(Qs)}fetchInfiniteQuery(e){return e.behavior=Xy(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Qs).catch(Qs)}ensureInfiniteQueryData(e){return e.behavior=Xy(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return kf.isOnline()?ye(this,In).resumePausedMutations():Promise.resolve()}getQueryCache(){return ye(this,pa)}getMutationCache(){return ye(this,In)}getDefaultOptions(){return ye(this,Ln)}setDefaultOptions(e){nt(this,Ln,e)}setQueryDefaults(e,t){ye(this,ol).set(cd(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ye(this,ol).values()],a={};return t.forEach(s=>{dd(e,s.queryKey)&&Object.assign(a,s.defaultOptions)}),a}setMutationDefaults(e,t){ye(this,il).set(cd(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ye(this,il).values()],a={};return t.forEach(s=>{dd(e,s.mutationKey)&&Object.assign(a,s.defaultOptions)}),a}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ye(this,Ln).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=gx(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===vx&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ye(this,Ln).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ye(this,pa).clear(),ye(this,In).clear()}},pa=new WeakMap,In=new WeakMap,Ln=new WeakMap,ol=new WeakMap,il=new WeakMap,Fn=new WeakMap,ll=new WeakMap,cl=new WeakMap,vb),Hz=u.createContext(void 0),Vz=({client:e,children:t})=>(u.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(Hz.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ud(){return ud=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ud.apply(this,arguments)}var Hn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Hn||(Hn={}));const Jy="popstate";function Gz(e){e===void 0&&(e={});function t(n,o){let{pathname:i="/",search:l="",hash:c=""}=oi(n.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),_g("",{pathname:i,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function a(n,o){let i=n.document.querySelector("base"),l="";if(i&&i.getAttribute("href")){let c=n.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof o=="string"?o:zf(o))}function s(n,o){xx(n.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return Wz(t,a,s,e)}function Ea(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xx(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Yz(){return Math.random().toString(36).substr(2,8)}function e_(e,t){return{usr:e.state,key:e.key,idx:t}}function _g(e,t,a,s){return a===void 0&&(a=null),ud({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?oi(t):t,{state:a,key:t&&t.key||s||Yz()})}function zf(e){let{pathname:t="/",search:a="",hash:s=""}=e;return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function oi(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substr(a),e=e.substr(0,a));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function Wz(e,t,a,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:o=!1}=s,i=n.history,l=Hn.Pop,c=null,d=f();d==null&&(d=0,i.replaceState(ud({},i.state,{idx:d}),""));function f(){return(i.state||{idx:null}).idx}function h(){l=Hn.Pop;let _=f(),x=_==null?null:_-d;d=_,c&&c({action:l,location:y.location,delta:x})}function p(_,x){l=Hn.Push;let v=_g(y.location,_,x);a&&a(v,_),d=f()+1;let g=e_(v,d),E=y.createHref(v);try{i.pushState(g,"",E)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;n.location.assign(E)}o&&c&&c({action:l,location:y.location,delta:1})}function m(_,x){l=Hn.Replace;let v=_g(y.location,_,x);a&&a(v,_),d=f();let g=e_(v,d),E=y.createHref(v);i.replaceState(g,"",E),o&&c&&c({action:l,location:y.location,delta:0})}function b(_){let x=n.location.origin!=="null"?n.location.origin:n.location.href,v=typeof _=="string"?_:zf(_);return v=v.replace(/ $/,"%20"),Ea(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let y={get action(){return l},get location(){return e(n,i)},listen(_){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Jy,h),c=_,()=>{n.removeEventListener(Jy,h),c=null}},createHref(_){return t(n,_)},createURL:b,encodeLocation(_){let x=b(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:m,go(_){return i.go(_)}};return y}var t_;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(t_||(t_={}));function Qz(e,t,a){return a===void 0&&(a="/"),Zz(e,t,a)}function Zz(e,t,a,s){let n=typeof t=="string"?oi(t):t,o=yx(n.pathname||"/",a);if(o==null)return null;let i=VS(e);Xz(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=cP(o);l=oP(i[c],d)}return l}function VS(e,t,a,s){t===void 0&&(t=[]),a===void 0&&(a=[]),s===void 0&&(s="");let n=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(Ea(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=Jn([s,c.relativePath]),f=a.concat(c);o.children&&o.children.length>0&&(Ea(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),VS(o.children,t,f,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:rP(d,o.index),routesMeta:f})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))n(o,i);else for(let c of GS(o.path))n(o,i,c)}),t}function GS(e){let t=e.split("/");if(t.length===0)return[];let[a,...s]=t,n=a.endsWith("?"),o=a.replace(/\?$/,"");if(s.length===0)return n?[o,""]:[o];let i=GS(s.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),n&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Xz(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:nP(t.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}const Kz=/^:[\w-]+$/,Jz=3,eP=2,tP=1,aP=10,sP=-2,a_=e=>e==="*";function rP(e,t){let a=e.split("/"),s=a.length;return a.some(a_)&&(s+=sP),t&&(s+=eP),a.filter(n=>!a_(n)).reduce((n,o)=>n+(Kz.test(o)?Jz:o===""?tP:aP),s)}function nP(e,t){return e.length===t.length&&e.slice(0,-1).every((s,n)=>s===t[n])?e[e.length-1]-t[t.length-1]:0}function oP(e,t,a){let{routesMeta:s}=e,n={},o="/",i=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,f=o==="/"?t:t.slice(o.length)||"/",h=iP({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),p=c.route;if(!h)return null;Object.assign(n,h.params),i.push({params:n,pathname:Jn([o,h.pathname]),pathnameBase:hP(Jn([o,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(o=Jn([o,h.pathnameBase]))}return i}function iP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,s]=lP(e.path,e.caseSensitive,e.end),n=t.match(a);if(!n)return null;let o=n[0],i=o.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((d,f,h)=>{let{paramName:p,isOptional:m}=f;if(p==="*"){let y=l[h]||"";i=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const b=l[h];return m&&!b?d[p]=void 0:d[p]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:e}}function lP(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!0),xx(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}function cP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xx(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function yx(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,s=e.charAt(a);return s&&s!=="/"?null:e.slice(a)||"/"}function dP(e,t){t===void 0&&(t="/");let{pathname:a,search:s="",hash:n=""}=typeof e=="string"?oi(e):e;return{pathname:a?a.startsWith("/")?a:uP(a,t):t,search:mP(s),hash:pP(n)}}function uP(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?a.length>1&&a.pop():n!=="."&&a.push(n)}),a.length>1?a.join("/"):"/"}function $m(e,t,a,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fP(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function YS(e,t){let a=fP(e);return t?a.map((s,n)=>n===a.length-1?s.pathname:s.pathnameBase):a.map(s=>s.pathnameBase)}function WS(e,t,a,s){s===void 0&&(s=!1);let n;typeof e=="string"?n=oi(e):(n=ud({},e),Ea(!n.pathname||!n.pathname.includes("?"),$m("?","pathname","search",n)),Ea(!n.pathname||!n.pathname.includes("#"),$m("#","pathname","hash",n)),Ea(!n.search||!n.search.includes("#"),$m("#","search","hash",n)));let o=e===""||n.pathname==="",i=o?"/":n.pathname,l;if(i==null)l=a;else{let h=t.length-1;if(!s&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),h-=1;n.pathname=p.join("/")}l=h>=0?t[h]:"/"}let c=dP(n,l),d=i&&i!=="/"&&i.endsWith("/"),f=(o||i===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const Jn=e=>e.join("/").replace(/\/\/+/g,"/"),hP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),mP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,pP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function gP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const QS=["post","put","patch","delete"];new Set(QS);const vP=["get",...QS];new Set(vP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fd(){return fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},fd.apply(this,arguments)}const _x=u.createContext(null),xP=u.createContext(null),ii=u.createContext(null),xh=u.createContext(null),un=u.createContext({outlet:null,matches:[],isDataRoute:!1}),ZS=u.createContext(null);function yP(e,t){let{relative:a}=t===void 0?{}:t;Ud()||Ea(!1);let{basename:s,navigator:n}=u.useContext(ii),{hash:o,pathname:i,search:l}=KS(e,{relative:a}),c=i;return s!=="/"&&(c=i==="/"?s:Jn([s,i])),n.createHref({pathname:c,search:l,hash:o})}function Ud(){return u.useContext(xh)!=null}function Hd(){return Ud()||Ea(!1),u.useContext(xh).location}function XS(e){u.useContext(ii).static||u.useLayoutEffect(e)}function $a(){let{isDataRoute:e}=u.useContext(un);return e?kP():_P()}function _P(){Ud()||Ea(!1);let e=u.useContext(_x),{basename:t,future:a,navigator:s}=u.useContext(ii),{matches:n}=u.useContext(un),{pathname:o}=Hd(),i=JSON.stringify(YS(n,a.v7_relativeSplatPath)),l=u.useRef(!1);return XS(()=>{l.current=!0}),u.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let h=WS(d,JSON.parse(i),o,f.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Jn([t,h.pathname])),(f.replace?s.replace:s.push)(h,f.state,f)},[t,s,i,o,e])}const bP=u.createContext(null);function wP(e){let t=u.useContext(un).outlet;return t&&u.createElement(bP.Provider,{value:e},t)}function fn(){let{matches:e}=u.useContext(un),t=e[e.length-1];return t?t.params:{}}function KS(e,t){let{relative:a}=t===void 0?{}:t,{future:s}=u.useContext(ii),{matches:n}=u.useContext(un),{pathname:o}=Hd(),i=JSON.stringify(YS(n,s.v7_relativeSplatPath));return u.useMemo(()=>WS(e,JSON.parse(i),o,a==="path"),[e,i,o,a])}function jP(e,t){return EP(e,t)}function EP(e,t,a,s){Ud()||Ea(!1);let{navigator:n}=u.useContext(ii),{matches:o}=u.useContext(un),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Hd(),f;if(t){var h;let _=typeof t=="string"?oi(t):t;c==="/"||(h=_.pathname)!=null&&h.startsWith(c)||Ea(!1),f=_}else f=d;let p=f.pathname||"/",m=p;if(c!=="/"){let _=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let b=Qz(e,{pathname:m}),y=DP(b&&b.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Jn([c,n.encodeLocation?n.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Jn([c,n.encodeLocation?n.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,a,s);return t&&y?u.createElement(xh.Provider,{value:{location:fd({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Hn.Pop}},y):y}function SP(){let e=MP(),t=gP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),a?u.createElement("pre",{style:n},a):null,null)}const NP=u.createElement(SP,null);class CP extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?u.createElement(un.Provider,{value:this.props.routeContext},u.createElement(ZS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AP(e){let{routeContext:t,match:a,children:s}=e,n=u.useContext(_x);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),u.createElement(un.Provider,{value:t},s)}function DP(e,t,a,s){var n;if(t===void 0&&(t=[]),a===void 0&&(a=null),s===void 0&&(s=null),e==null){var o;if(!a)return null;if(a.errors)e=a.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let i=e,l=(n=a)==null?void 0:n.errors;if(l!=null){let f=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);f>=0||Ea(!1),i=i.slice(0,Math.min(i.length,f+1))}let c=!1,d=-1;if(a&&s&&s.v7_partialHydration)for(let f=0;f<i.length;f++){let h=i[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=f),h.route.id){let{loaderData:p,errors:m}=a,b=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||b){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((f,h,p)=>{let m,b=!1,y=null,_=null;a&&(m=l&&h.route.id?l[h.route.id]:void 0,y=h.route.errorElement||NP,c&&(d<0&&p===0?(zP("route-fallback"),b=!0,_=null):d===p&&(b=!0,_=h.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,p+1)),v=()=>{let g;return m?g=y:b?g=_:h.route.Component?g=u.createElement(h.route.Component,null):h.route.element?g=h.route.element:g=f,u.createElement(AP,{match:h,routeContext:{outlet:f,matches:x,isDataRoute:a!=null},children:g})};return a&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?u.createElement(CP,{location:a.location,revalidation:a.revalidation,component:y,error:m,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var JS=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(JS||{}),eN=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(eN||{});function TP(e){let t=u.useContext(_x);return t||Ea(!1),t}function OP(e){let t=u.useContext(xP);return t||Ea(!1),t}function RP(e){let t=u.useContext(un);return t||Ea(!1),t}function tN(e){let t=RP(),a=t.matches[t.matches.length-1];return a.route.id||Ea(!1),a.route.id}function MP(){var e;let t=u.useContext(ZS),a=OP(),s=tN();return t!==void 0?t:(e=a.errors)==null?void 0:e[s]}function kP(){let{router:e}=TP(JS.UseNavigateStable),t=tN(eN.UseNavigateStable),a=u.useRef(!1);return XS(()=>{a.current=!0}),u.useCallback(function(n,o){o===void 0&&(o={}),a.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,fd({fromRouteId:t},o)))},[e,t])}const s_={};function zP(e,t,a){s_[e]||(s_[e]=!0)}function PP(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function IP(e){return wP(e.context)}function It(e){Ea(!1)}function LP(e){let{basename:t="/",children:a=null,location:s,navigationType:n=Hn.Pop,navigator:o,static:i=!1,future:l}=e;Ud()&&Ea(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:o,static:i,future:fd({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof s=="string"&&(s=oi(s));let{pathname:f="/",search:h="",hash:p="",state:m=null,key:b="default"}=s,y=u.useMemo(()=>{let _=yx(f,c);return _==null?null:{location:{pathname:_,search:h,hash:p,state:m,key:b},navigationType:n}},[c,f,h,p,m,b,n]);return y==null?null:u.createElement(ii.Provider,{value:d},u.createElement(xh.Provider,{children:a,value:y}))}function FP(e){let{children:t,location:a}=e;return jP(bg(t),a)}new Promise(()=>{});function bg(e,t){t===void 0&&(t=[]);let a=[];return u.Children.forEach(e,(s,n)=>{if(!u.isValidElement(s))return;let o=[...t,n];if(s.type===u.Fragment){a.push.apply(a,bg(s.props.children,o));return}s.type!==It&&Ea(!1),!s.props.index||!s.props.children||Ea(!1);let i={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=bg(s.props.children,o)),a.push(i)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wg(){return wg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},wg.apply(this,arguments)}function $P(e,t){if(e==null)return{};var a={},s=Object.keys(e),n,o;for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&(a[n]=e[n]);return a}function qP(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function BP(e,t){return e.button===0&&(!t||t==="_self")&&!qP(e)}const UP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],HP="6";try{window.__reactRouterVersion=HP}catch{}const VP="startTransition",r_=Zg[VP];function GP(e){let{basename:t,children:a,future:s,window:n}=e,o=u.useRef();o.current==null&&(o.current=Gz({window:n,v5Compat:!0}));let i=o.current,[l,c]=u.useState({action:i.action,location:i.location}),{v7_startTransition:d}=s||{},f=u.useCallback(h=>{d&&r_?r_(()=>c(h)):c(h)},[c,d]);return u.useLayoutEffect(()=>i.listen(f),[i,f]),u.useEffect(()=>PP(s),[s]),u.createElement(LP,{basename:t,children:a,location:l.location,navigationType:l.action,navigator:i,future:s})}const YP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jl=u.forwardRef(function(t,a){let{onClick:s,relative:n,reloadDocument:o,replace:i,state:l,target:c,to:d,preventScrollReset:f,viewTransition:h}=t,p=$P(t,UP),{basename:m}=u.useContext(ii),b,y=!1;if(typeof d=="string"&&WP.test(d)&&(b=d,YP))try{let g=new URL(window.location.href),E=d.startsWith("//")?new URL(g.protocol+d):new URL(d),j=yx(E.pathname,m);E.origin===g.origin&&j!=null?d=j+E.search+E.hash:y=!0}catch{}let _=yP(d,{relative:n}),x=QP(d,{replace:i,state:l,target:c,preventScrollReset:f,relative:n,viewTransition:h});function v(g){s&&s(g),g.defaultPrevented||x(g)}return u.createElement("a",wg({},p,{href:b||_,onClick:y||o?s:v,ref:a,target:c}))});var n_;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(n_||(n_={}));var o_;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(o_||(o_={}));function QP(e,t){let{target:a,replace:s,state:n,preventScrollReset:o,relative:i,viewTransition:l}=t===void 0?{}:t,c=$a(),d=Hd(),f=KS(e,{relative:i});return u.useCallback(h=>{if(BP(h,a)){h.preventDefault();let p=s!==void 0?s:zf(d)===zf(f);c(e,{replace:p,state:n,preventScrollReset:o,relative:i,viewTransition:l})}},[d,c,f,s,n,a,e,o,i,l])}const ZP=[{path:"/",label:"Dashboard",icon:VR},{path:"/clientes",label:"Clientes",icon:ZR},{path:"/fazendas",label:"Fazendas",icon:QE},{path:"/doadoras",label:"Doadoras",icon:qo},{path:"/receptoras",label:"Receptoras",icon:VE},{path:"/protocolos",label:"Protocolos",icon:tx},{path:"/aspiracoes",label:"Aspiraes",icon:Af},{path:"/doses-semen",label:"Doses de Smen",icon:qo},{path:"/lotes-fiv",label:"Lotes FIV",icon:Af},{path:"/embrioes",label:"Embries/Estoque",icon:qo},{path:"/transferencia",label:"Transferncia (TE)",icon:lh},{path:"/dg",label:"DG",icon:XE},{path:"/sexagem",label:"Sexagem",icon:Qv}];function XP(){const e=Hd();return r.jsxs("div",{className:"w-64 bg-slate-900 text-white min-h-screen p-4 flex flex-col",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-green-400",children:"FIV/TE Bovina"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Sistema de Controle"})]}),r.jsx("nav",{className:"flex-1 space-y-1",children:ZP.map(t=>{const a=t.icon,s=e.pathname===t.path;return r.jsxs(jl,{to:t.path,className:Ae("flex items-center gap-3 px-3 py-2 rounded-lg transition-colors",s?"bg-green-600 text-white":"text-slate-300 hover:bg-slate-800 hover:text-white"),children:[r.jsx(a,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:t.label})]},t.path)})}),r.jsx("div",{className:"pt-4 border-t border-slate-800",children:r.jsx("p",{className:"text-xs text-slate-500 text-center",children:" 2024 FIV/TE System"})})]})}function KP(){return r.jsxs("div",{className:"flex min-h-screen bg-slate-50",children:[r.jsx(XP,{}),r.jsx("main",{className:"flex-1 p-8",children:r.jsx(IP,{})})]})}const Me=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:Ae("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Me.displayName="Card";const ze=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:Ae("flex flex-col space-y-1.5 p-6",e),...t}));ze.displayName="CardHeader";const Pe=u.forwardRef(({className:e,...t},a)=>r.jsx("h3",{ref:a,className:Ae("text-2xl font-semibold leading-none tracking-tight",e),...t}));Pe.displayName="CardTitle";const bc=u.forwardRef(({className:e,...t},a)=>r.jsx("p",{ref:a,className:Ae("text-sm text-muted-foreground",e),...t}));bc.displayName="CardDescription";const ke=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:Ae("p-6 pt-0",e),...t}));ke.displayName="CardContent";const JP=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:Ae("flex items-center p-6 pt-0",e),...t}));JP.displayName="CardFooter";const hd=Bl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),re=u.forwardRef(({className:e,variant:t,size:a,asChild:s=!1,...n},o)=>{const i=s?WO:"button";return r.jsx(i,{className:Ae(hd({variant:t,size:a,className:e})),ref:o,...n})});re.displayName="Button";const e4="modulepreload",t4=function(e){return"/Passagene/"+e},i_={},Vd=function(t,a,s){let n=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(a.map(c=>{if(c=t4(c),c in i_)return;i_[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":e4,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return n.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},a4=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...a)=>Vd(async()=>{const{default:s}=await Promise.resolve().then(()=>Wl);return{default:s}},void 0).then(({default:s})=>s(...a)):t=fetch,(...a)=>t(...a)};class bx extends Error{constructor(t,a="FunctionsError",s){super(t),this.name=a,this.context=s}}class s4 extends bx{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class l_ extends bx{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class c_ extends bx{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var jg;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(jg||(jg={}));var r4=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class n4{constructor(t,{headers:a={},customFetch:s,region:n=jg.Any}={}){this.url=t,this.headers=a,this.region=n,this.fetch=a4(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,a={}){var s;return r4(this,void 0,void 0,function*(){try{const{headers:n,method:o,body:i}=a;let l={},{region:c}=a;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let f;i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=i):typeof i=="string"?(l["Content-Type"]="text/plain",f=i):typeof FormData<"u"&&i instanceof FormData?f=i:(l["Content-Type"]="application/json",f=JSON.stringify(i)));const h=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:f}).catch(y=>{throw new s4(y)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new l_(h);if(!h.ok)throw new c_(h);let m=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return m==="application/json"?b=yield h.json():m==="application/octet-stream"?b=yield h.blob():m==="text/event-stream"?b=h:m==="multipart/form-data"?b=yield h.formData():b=yield h.text(),{data:b,error:null,response:h}}catch(n){return{data:null,error:n,response:n instanceof c_||n instanceof l_?n.context:void 0}}})}}var cs={},wx={},yh={},Gd={},_h={},bh={},o4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},El=o4();const i4=El.fetch,aN=El.fetch.bind(El),sN=El.Headers,l4=El.Request,c4=El.Response,Wl=Object.freeze(Object.defineProperty({__proto__:null,Headers:sN,Request:l4,Response:c4,default:aN,fetch:i4},Symbol.toStringTag,{value:"Module"})),d4=hD(Wl);var wh={};Object.defineProperty(wh,"__esModule",{value:!0});let u4=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};wh.default=u4;var rN=Ls&&Ls.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bh,"__esModule",{value:!0});const f4=rN(d4),h4=rN(wh);let m4=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=f4.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,a){return this.headers=Object.assign({},this.headers),this.headers[t]=a,this}then(t,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,l,c;let d=null,f=null,h=null,p=o.status,m=o.statusText;if(o.ok){if(this.method!=="HEAD"){const x=await o.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=x:f=JSON.parse(x))}const y=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),_=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&_&&_.length>1&&(h=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,p=406,m="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const y=await o.text();try{d=JSON.parse(y),Array.isArray(d)&&o.status===404&&(f=[],d=null,p=200,m="OK")}catch{o.status===404&&y===""?(p=204,m="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,p=200,m="OK"),d&&this.shouldThrowOnError)throw new h4.default(d)}return{error:d,data:f,count:h,status:p,statusText:m}});return this.shouldThrowOnError||(n=n.catch(o=>{var i,l,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,a)}returns(){return this}overrideTypes(){return this}};bh.default=m4;var p4=Ls&&Ls.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_h,"__esModule",{value:!0});const g4=p4(bh);let v4=class extends g4.default{select(t){let a=!1;const s=(t??"*").split("").map(n=>/\s/.test(n)&&!a?"":(n==='"'&&(a=!a),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:a=!0,nullsFirst:s,foreignTable:n,referencedTable:o=n}={}){const i=o?`${o}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${t}.${a?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:a,referencedTable:s=a}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,a,{foreignTable:s,referencedTable:n=s}={}){const o=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${a-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:a=!1,settings:s=!1,buffers:n=!1,wal:o=!1,format:i="text"}={}){var l;const c=[t?"analyze":null,a?"verbose":null,s?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${d}"; options=${c};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};_h.default=v4;var x4=Ls&&Ls.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gd,"__esModule",{value:!0});const y4=x4(_h);let _4=class extends y4.default{eq(t,a){return this.url.searchParams.append(t,`eq.${a}`),this}neq(t,a){return this.url.searchParams.append(t,`neq.${a}`),this}gt(t,a){return this.url.searchParams.append(t,`gt.${a}`),this}gte(t,a){return this.url.searchParams.append(t,`gte.${a}`),this}lt(t,a){return this.url.searchParams.append(t,`lt.${a}`),this}lte(t,a){return this.url.searchParams.append(t,`lte.${a}`),this}like(t,a){return this.url.searchParams.append(t,`like.${a}`),this}likeAllOf(t,a){return this.url.searchParams.append(t,`like(all).{${a.join(",")}}`),this}likeAnyOf(t,a){return this.url.searchParams.append(t,`like(any).{${a.join(",")}}`),this}ilike(t,a){return this.url.searchParams.append(t,`ilike.${a}`),this}ilikeAllOf(t,a){return this.url.searchParams.append(t,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(t,a){return this.url.searchParams.append(t,`ilike(any).{${a.join(",")}}`),this}is(t,a){return this.url.searchParams.append(t,`is.${a}`),this}in(t,a){const s=Array.from(new Set(a)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cs.{${a.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(a)}`),this}containedBy(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cd.{${a.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(a)}`),this}rangeGt(t,a){return this.url.searchParams.append(t,`sr.${a}`),this}rangeGte(t,a){return this.url.searchParams.append(t,`nxl.${a}`),this}rangeLt(t,a){return this.url.searchParams.append(t,`sl.${a}`),this}rangeLte(t,a){return this.url.searchParams.append(t,`nxr.${a}`),this}rangeAdjacent(t,a){return this.url.searchParams.append(t,`adj.${a}`),this}overlaps(t,a){return typeof a=="string"?this.url.searchParams.append(t,`ov.${a}`):this.url.searchParams.append(t,`ov.{${a.join(",")}}`),this}textSearch(t,a,{config:s,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const i=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${o}fts${i}.${a}`),this}match(t){return Object.entries(t).forEach(([a,s])=>{this.url.searchParams.append(a,`eq.${s}`)}),this}not(t,a,s){return this.url.searchParams.append(t,`not.${a}.${s}`),this}or(t,{foreignTable:a,referencedTable:s=a}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,a,s){return this.url.searchParams.append(t,`${a}.${s}`),this}};Gd.default=_4;var b4=Ls&&Ls.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yh,"__esModule",{value:!0});const fc=b4(Gd);let w4=class{constructor(t,{headers:a={},schema:s,fetch:n}){this.url=t,this.headers=a,this.schema=s,this.fetch=n}select(t,{head:a=!1,count:s}={}){const n=a?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),s&&(this.headers.Prefer=`count=${s}`),new fc.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:a,defaultToNull:s=!0}={}){const n="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),a&&o.push(`count=${a}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const i=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new fc.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:a,ignoreDuplicates:s=!1,count:n,defaultToNull:o=!0}={}){const i="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new fc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:a}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),a&&n.push(`count=${a}`),this.headers.Prefer=n.join(","),new fc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const a="DELETE",s=[];return t&&s.push(`count=${t}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new fc.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};yh.default=w4;var jh={},Eh={};Object.defineProperty(Eh,"__esModule",{value:!0});Eh.version=void 0;Eh.version="0.0.0-automated";Object.defineProperty(jh,"__esModule",{value:!0});jh.DEFAULT_HEADERS=void 0;const j4=Eh;jh.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${j4.version}`};var nN=Ls&&Ls.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wx,"__esModule",{value:!0});const E4=nN(yh),S4=nN(Gd),N4=jh;let C4=class oN{constructor(t,{headers:a={},schema:s,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},N4.DEFAULT_HEADERS),a),this.schemaName=s,this.fetch=n}from(t){const a=new URL(`${this.url}/${t}`);return new E4.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new oN(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,a={},{head:s=!1,get:n=!1,count:o}={}){let i;const l=new URL(`${this.url}/rpc/${t}`);let c;s||n?(i=s?"HEAD":"GET",Object.entries(a).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{l.searchParams.append(f,h)})):(i="POST",c=a);const d=Object.assign({},this.headers);return o&&(d.Prefer=`count=${o}`),new S4.default({method:i,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};wx.default=C4;var Ql=Ls&&Ls.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cs,"__esModule",{value:!0});cs.PostgrestError=cs.PostgrestBuilder=cs.PostgrestTransformBuilder=cs.PostgrestFilterBuilder=cs.PostgrestQueryBuilder=cs.PostgrestClient=void 0;const iN=Ql(wx);cs.PostgrestClient=iN.default;const lN=Ql(yh);cs.PostgrestQueryBuilder=lN.default;const cN=Ql(Gd);cs.PostgrestFilterBuilder=cN.default;const dN=Ql(_h);cs.PostgrestTransformBuilder=dN.default;const uN=Ql(bh);cs.PostgrestBuilder=uN.default;const fN=Ql(wh);cs.PostgrestError=fN.default;var A4=cs.default={PostgrestClient:iN.default,PostgrestQueryBuilder:lN.default,PostgrestFilterBuilder:cN.default,PostgrestTransformBuilder:dN.default,PostgrestBuilder:uN.default,PostgrestError:fN.default};const{PostgrestClient:D4,PostgrestQueryBuilder:cH,PostgrestFilterBuilder:dH,PostgrestTransformBuilder:uH,PostgrestBuilder:fH,PostgrestError:hH}=A4;function T4(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const O4=T4(),R4="2.11.15",M4=`realtime-js/${R4}`,k4="1.0.0",hN=1e4,z4=1e3;var Uc;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Uc||(Uc={}));var Ua;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ua||(Ua={}));var Js;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Js||(Js={}));var Eg;(function(e){e.websocket="websocket"})(Eg||(Eg={}));var No;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(No||(No={}));class P4{constructor(){this.HEADER_LENGTH=1}decode(t,a){return t.constructor===ArrayBuffer?a(this._binaryDecode(t)):a(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const a=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,a,s)}_decodeBroadcast(t,a,s){const n=a.getUint8(1),o=a.getUint8(2);let i=this.HEADER_LENGTH+2;const l=s.decode(t.slice(i,i+n));i=i+n;const c=s.decode(t.slice(i,i+o));i=i+o;const d=JSON.parse(s.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class mN{constructor(t,a){this.callback=t,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ea;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ea||(ea={}));const d_=(e,t,a={})=>{var s;const n=(s=a.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((o,i)=>(o[i]=I4(i,e,t,n),o),{})},I4=(e,t,a,s)=>{const n=t.find(l=>l.name===e),o=n==null?void 0:n.type,i=a[e];return o&&!s.includes(o)?pN(o,i):Sg(i)},pN=(e,t)=>{if(e.charAt(0)==="_"){const a=e.slice(1,e.length);return q4(t,a)}switch(e){case ea.bool:return L4(t);case ea.float4:case ea.float8:case ea.int2:case ea.int4:case ea.int8:case ea.numeric:case ea.oid:return F4(t);case ea.json:case ea.jsonb:return $4(t);case ea.timestamp:return B4(t);case ea.abstime:case ea.date:case ea.daterange:case ea.int4range:case ea.int8range:case ea.money:case ea.reltime:case ea.text:case ea.time:case ea.timestamptz:case ea.timetz:case ea.tsrange:case ea.tstzrange:return Sg(t);default:return Sg(t)}},Sg=e=>e,L4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},F4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},$4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},q4=(e,t)=>{if(typeof e!="string")return e;const a=e.length-1,s=e[a];if(e[0]==="{"&&s==="}"){let o;const i=e.slice(1,a);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>pN(t,l))}return e},B4=e=>typeof e=="string"?e.replace(" ","T"):e,gN=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class qm{constructor(t,a,s={},n=hN){this.channel=t,this.event=a,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,a){var s;return this._hasReceived(t)&&a((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:a}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(a))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var u_;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(u_||(u_={}));class Hc{constructor(t,a){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hc.syncState(this.state,n,o,i),this.pendingDiffs.forEach(c=>{this.state=Hc.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Hc.syncDiff(this.state,n,o,i),l())}),this.onJoin((n,o,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:o,newPresences:i})}),this.onLeave((n,o,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,a,s,n){const o=this.cloneDeep(t),i=this.transformState(a),l={},c={};return this.map(o,(d,f)=>{i[d]||(c[d]=f)}),this.map(i,(d,f)=>{const h=o[d];if(h){const p=f.map(_=>_.presence_ref),m=h.map(_=>_.presence_ref),b=f.filter(_=>m.indexOf(_.presence_ref)<0),y=h.filter(_=>p.indexOf(_.presence_ref)<0);b.length>0&&(l[d]=b),y.length>0&&(c[d]=y)}else l[d]=f}),this.syncDiff(o,{joins:l,leaves:c},s,n)}static syncDiff(t,a,s,n){const{joins:o,leaves:i}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(o,(l,c)=>{var d;const f=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),f.length>0){const h=t[l].map(m=>m.presence_ref),p=f.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...p)}s(l,f,c)}),this.map(i,(l,c)=>{let d=t[l];if(!d)return;const f=c.map(h=>h.presence_ref);d=d.filter(h=>f.indexOf(h.presence_ref)<0),t[l]=d,n(l,d,c),d.length===0&&delete t[l]}),t}static map(t,a){return Object.getOwnPropertyNames(t).map(s=>a(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((a,s)=>{const n=t[s];return"metas"in n?a[s]=n.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):a[s]=n,a},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var f_;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(f_||(f_={}));var h_;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(h_||(h_={}));var Ur;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ur||(Ur={}));class jx{constructor(t,a={config:{}},s){this.topic=t,this.params=a,this.socket=s,this.bindings={},this.state=Ua.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new qm(this,Js.join,this.params,this.timeout),this.rejoinTimer=new mN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ua.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ua.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ua.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ua.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Js.reply,{},(n,o)=>{this._trigger(this._replyEventName(o),n)}),this.presence=new Hc(this),this.broadcastEndpointURL=gN(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,a=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==Ua.closed){const{config:{broadcast:o,presence:i,private:l}}=this.params;this._onError(f=>t==null?void 0:t(Ur.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Ur.CLOSED));const c={},d={broadcast:o,presence:i,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(f=>f.filter))!==null&&n!==void 0?n:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:f})=>{var h;if(this.socket.setAuth(),f===void 0){t==null||t(Ur.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,m=(h=p==null?void 0:p.length)!==null&&h!==void 0?h:0,b=[];for(let y=0;y<m;y++){const _=p[y],{filter:{event:x,schema:v,table:g,filter:E}}=_,j=f&&f[y];if(j&&j.event===x&&j.schema===v&&j.table===g&&j.filter===E)b.push(Object.assign(Object.assign({},_),{id:j.id}));else{this.unsubscribe(),this.state=Ua.errored,t==null||t(Ur.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Ur.SUBSCRIBED);return}}).receive("error",f=>{this.state=Ua.errored,t==null||t(Ur.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ur.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,a={}){return await this.send({type:"presence",event:"track",payload:t},a.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,a,s){return this._on(t,a,s)}async send(t,a={}){var s,n;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=a.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const d=this._push(t.type,t,a.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ua.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Js.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new qm(this,Js.leave,{},t),s.receive("ok",()=>{a(),n("ok")}).receive("timeout",()=>{a(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,a,s){const n=new AbortController,o=setTimeout(()=>n.abort(),s),i=await this.socket.fetch(t,Object.assign(Object.assign({},a),{signal:n.signal}));return clearTimeout(o),i}_push(t,a,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new qm(this,t,a,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,a,s){return a}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,a,s){var n,o;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:f}=Js;if(s&&[l,c,d,f].indexOf(i)>=0&&s!==this._joinRef())return;let p=this._onMessage(i,a,s);if(a&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(m=>{var b,y,_;return((b=m.filter)===null||b===void 0?void 0:b.event)==="*"||((_=(y=m.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===i}).map(m=>m.callback(p,s)):(o=this.bindings[i])===null||o===void 0||o.filter(m=>{var b,y,_,x,v,g;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const E=m.id,j=(b=m.filter)===null||b===void 0?void 0:b.event;return E&&((y=a.ids)===null||y===void 0?void 0:y.includes(E))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((_=a.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const E=(v=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return E==="*"||E===((g=a==null?void 0:a.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof p=="object"&&"ids"in p){const b=p.data,{schema:y,table:_,commit_timestamp:x,type:v,errors:g}=b;p=Object.assign(Object.assign({},{schema:y,table:_,commit_timestamp:x,eventType:v,new:{},old:{},errors:g}),this._getPayloadRecords(b))}m.callback(p,s)})}_isClosed(){return this.state===Ua.closed}_isJoined(){return this.state===Ua.joined}_isJoining(){return this.state===Ua.joining}_isLeaving(){return this.state===Ua.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,a,s){const n=t.toLocaleLowerCase(),o={type:n,filter:a,callback:s};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(t,a){const s=t.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var o;return!(((o=n.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&jx.isEqual(n.filter,a))}),this}static isEqual(t,a){if(Object.keys(t).length!==Object.keys(a).length)return!1;for(const s in t)if(t[s]!==a[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Js.close,{},t)}_onError(t){this._on(Js.error,{},a=>t(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ua.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const a={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(a.new=d_(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(a.old=d_(t.columns,t.old_record)),a}}const m_=()=>{},U4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class H4{constructor(t,a){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hN,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=m_,this.ref=0,this.logger=m_,this.conn=null,this.sendBuffer=[],this.serializer=new P4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...l)=>Vd(async()=>{const{default:c}=await Promise.resolve().then(()=>Wl);return{default:c}},void 0).then(({default:c})=>c(...l)):i=fetch,(...l)=>i(...l)},this.endPoint=`${t}/${Eg.websocket}`,this.httpEndpoint=gN(t),a!=null&&a.transport?this.transport=a.transport:this.transport=null,a!=null&&a.params&&(this.params=a.params),a!=null&&a.timeout&&(this.timeout=a.timeout),a!=null&&a.logger&&(this.logger=a.logger),(a!=null&&a.logLevel||a!=null&&a.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),a!=null&&a.heartbeatIntervalMs&&(this.heartbeatIntervalMs=a.heartbeatIntervalMs);const n=(s=a==null?void 0:a.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=a!=null&&a.reconnectAfterMs?a.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=a!=null&&a.encode?a.encode:(o,i)=>i(JSON.stringify(o)),this.decode=a!=null&&a.decode?a.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new mN(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(a==null?void 0:a.fetch),a!=null&&a.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(a==null?void 0:a.worker)||!1,this.workerUrl=a==null?void 0:a.workerUrl}this.accessToken=(a==null?void 0:a.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=O4),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:k4}))}disconnect(t,a){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,a??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(t){const a=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const t=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,a,s){this.logger(t,a,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Uc.connecting:return No.Connecting;case Uc.open:return No.Open;case Uc.closing:return No.Closing;default:return No.Closed}}isConnected(){return this.connectionState()===No.Open}channel(t,a={config:{}}){const s=`realtime:${t}`,n=this.getChannels().find(o=>o.topic===s);if(n)return n;{const o=new jx(`realtime:${t}`,a,this);return this.channels.push(o),o}}push(t){const{topic:a,event:s,payload:n,ref:o}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${a} ${s} (${o})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let a=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(s=>{const n={access_token:a,version:M4};a&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(Js.access_token,{access_token:a})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(z4,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let a=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${t}"`),a.unsubscribe())}_remove(t){this.channels=this.channels.filter(a=>a.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,a=>{let{topic:s,event:n,payload:o,ref:i}=a;s==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(a.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${s} ${n} ${i&&"("+i+")"||""}`,o),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,o,i)),this.stateChangeCallbacks.message.forEach(l=>l(a))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(a=>a(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(a=>a(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Js.error))}_appendParams(t,a){if(Object.keys(a).length===0)return t;const s=t.match(/\?/)?"&":"?",n=new URLSearchParams(a);return`${t}${s}${n}`}_workerObjectUrl(t){let a;if(t)a=t;else{const s=new Blob([U4],{type:"application/javascript"});a=URL.createObjectURL(s)}return a}}class Ex extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Da(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class V4 extends Ex{constructor(t,a){super(t),this.name="StorageApiError",this.status=a}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ng extends Ex{constructor(t,a){super(t),this.name="StorageUnknownError",this.originalError=a}}var G4=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const vN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...a)=>Vd(async()=>{const{default:s}=await Promise.resolve().then(()=>Wl);return{default:s}},void 0).then(({default:s})=>s(...a)):t=fetch,(...a)=>t(...a)},Y4=()=>G4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vd(()=>Promise.resolve().then(()=>Wl),void 0)).Response:Response}),Cg=e=>{if(Array.isArray(e))return e.map(a=>Cg(a));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([a,s])=>{const n=a.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[n]=Cg(s)}),t};var li=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const Bm=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),W4=(e,t,a)=>li(void 0,void 0,void 0,function*(){const s=yield Y4();e instanceof s&&!(a!=null&&a.noResolveJson)?e.json().then(n=>{t(new V4(Bm(n),e.status||500))}).catch(n=>{t(new Ng(Bm(n),n))}):t(new Ng(Bm(e),e))}),Q4=(e,t,a,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),a))};function Yd(e,t,a,s,n,o){return li(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(a,Q4(t,s,n,o)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>W4(c,l,s))})})}function Pf(e,t,a,s){return li(this,void 0,void 0,function*(){return Yd(e,"GET",t,a,s)})}function Dn(e,t,a,s,n){return li(this,void 0,void 0,function*(){return Yd(e,"POST",t,s,n,a)})}function Z4(e,t,a,s,n){return li(this,void 0,void 0,function*(){return Yd(e,"PUT",t,s,n,a)})}function X4(e,t,a,s){return li(this,void 0,void 0,function*(){return Yd(e,"HEAD",t,Object.assign(Object.assign({},a),{noResolveJson:!0}),s)})}function xN(e,t,a,s,n){return li(this,void 0,void 0,function*(){return Yd(e,"DELETE",t,s,n,a)})}var rs=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const K4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},p_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class J4{constructor(t,a={},s,n){this.url=t,this.headers=a,this.bucketId=s,this.fetch=vN(n)}uploadOrUpdate(t,a,s,n){return rs(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},p_),n);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=s,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(a),f=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:t,body:o,headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{})),p=yield h.json();return h.ok?{data:{path:d,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(o){if(Da(o))return{data:null,error:o};throw o}})}upload(t,a,s){return rs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,a,s)})}uploadToSignedUrl(t,a,s,n){return rs(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",a);try{let c;const d=Object.assign({upsert:p_.upsert},n),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:f}),p=yield h.json();return h.ok?{data:{path:o,fullPath:p.Key},error:null}:{data:null,error:p}}catch(c){if(Da(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,a){return rs(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const n=Object.assign({},this.headers);a!=null&&a.upsert&&(n["x-upsert"]="true");const o=yield Dn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new Ex("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(s){if(Da(s))return{data:null,error:s};throw s}})}update(t,a,s){return rs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,a,s)})}move(t,a,s){return rs(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(Da(n))return{data:null,error:n};throw n}})}copy(t,a,s){return rs(this,void 0,void 0,function*(){try{return{data:{path:(yield Dn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(Da(n))return{data:null,error:n};throw n}})}createSignedUrl(t,a,s){return rs(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),o=yield Dn(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:a},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(n){if(Da(n))return{data:null,error:n};throw n}})}createSignedUrls(t,a,s){return rs(this,void 0,void 0,function*(){try{const n=yield Dn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:t},{headers:this.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(n){if(Da(n))return{data:null,error:n};throw n}})}download(t,a){return rs(this,void 0,void 0,function*(){const n=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),i=o?`?${o}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Pf(this.fetch,`${this.url}/${n}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Da(l))return{data:null,error:l};throw l}})}info(t){return rs(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{const s=yield Pf(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:Cg(s),error:null}}catch(s){if(Da(s))return{data:null,error:s};throw s}})}exists(t){return rs(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{return yield X4(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(Da(s)&&s instanceof Ng){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,a){const s=this._getFinalPath(t),n=[],o=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";o!==""&&n.push(o);const l=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(t){return rs(this,void 0,void 0,function*(){try{return{data:yield xN(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(a){if(Da(a))return{data:null,error:a};throw a}})}list(t,a,s){return rs(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},K4),a),{prefix:t||""});return{data:yield Dn(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(Da(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const a=[];return t.width&&a.push(`width=${t.width}`),t.height&&a.push(`height=${t.height}`),t.resize&&a.push(`resize=${t.resize}`),t.format&&a.push(`format=${t.format}`),t.quality&&a.push(`quality=${t.quality}`),a.join("&")}}const eI="2.7.1",tI={"X-Client-Info":`storage-js/${eI}`};var fi=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class aI{constructor(t,a={},s){this.url=t,this.headers=Object.assign(Object.assign({},tI),a),this.fetch=vN(s)}listBuckets(){return fi(this,void 0,void 0,function*(){try{return{data:yield Pf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Da(t))return{data:null,error:t};throw t}})}getBucket(t){return fi(this,void 0,void 0,function*(){try{return{data:yield Pf(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(a){if(Da(a))return{data:null,error:a};throw a}})}createBucket(t,a={public:!1}){return fi(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Da(s))return{data:null,error:s};throw s}})}updateBucket(t,a){return fi(this,void 0,void 0,function*(){try{return{data:yield Z4(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(Da(s))return{data:null,error:s};throw s}})}emptyBucket(t){return fi(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(Da(a))return{data:null,error:a};throw a}})}deleteBucket(t){return fi(this,void 0,void 0,function*(){try{return{data:yield xN(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(a){if(Da(a))return{data:null,error:a};throw a}})}}class sI extends aI{constructor(t,a={},s){super(t,a,s)}from(t){return new J4(this.url,this.headers,t,this.fetch)}}const rI="2.52.0";let wc="";typeof Deno<"u"?wc="deno":typeof document<"u"?wc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wc="react-native":wc="node";const nI={"X-Client-Info":`supabase-js-${wc}/${rI}`},oI={headers:nI},iI={schema:"public"},lI={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cI={};var dI=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const uI=e=>{let t;return e?t=e:typeof fetch>"u"?t=aN:t=fetch,(...a)=>t(...a)},fI=()=>typeof Headers>"u"?sN:Headers,hI=(e,t,a)=>{const s=uI(a),n=fI();return(o,i)=>dI(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new n(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(o,Object.assign(Object.assign({},i),{headers:d}))})};var mI=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};function pI(e){return e.endsWith("/")?e:e+"/"}function gI(e,t){var a,s;const{db:n,auth:o,realtime:i,global:l}=e,{db:c,auth:d,realtime:f,global:h}=t,p={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},f),i),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(a=h==null?void 0:h.headers)!==null&&a!==void 0?a:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>mI(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const yN="2.71.1",Ni=30*1e3,Ag=3,Um=Ag*Ni,vI="http://localhost:9999",xI="supabase.auth.token",yI={"X-Client-Info":`gotrue-js/${yN}`},Dg="X-Supabase-Api-Version",_N={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_I=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bI=10*60*1e3;class Sx extends Error{constructor(t,a,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=s}}function ot(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class wI extends Sx{constructor(t,a,s){super(t,a,s),this.name="AuthApiError",this.status=a,this.code=s}}function jI(e){return ot(e)&&e.name==="AuthApiError"}class bN extends Sx{constructor(t,a){super(t),this.name="AuthUnknownError",this.originalError=a}}class co extends Sx{constructor(t,a,s,n){super(t,s,n),this.name=a,this.status=s}}class Sn extends co{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function EI(e){return ot(e)&&e.name==="AuthSessionMissingError"}class Eu extends co{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Su extends co{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Nu extends co{constructor(t,a=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function SI(e){return ot(e)&&e.name==="AuthImplicitGrantRedirectError"}class g_ extends co{constructor(t,a=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Tg extends co{constructor(t,a){super(t,"AuthRetryableFetchError",a,void 0)}}function Hm(e){return ot(e)&&e.name==="AuthRetryableFetchError"}class v_ extends co{constructor(t,a,s){super(t,"AuthWeakPasswordError",a,"weak_password"),this.reasons=s}}class Og extends co{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const If="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),x_=` 	
\r=`.split(""),NI=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<x_.length;t+=1)e[x_[t].charCodeAt(0)]=-2;for(let t=0;t<If.length;t+=1)e[If[t].charCodeAt(0)]=t;return e})();function y_(e,t,a){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;a(If[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;a(If[s]),t.queuedBits-=6}}function wN(e,t,a){const s=NI[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)a(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function __(e){const t=[],a=i=>{t.push(String.fromCodePoint(i))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},o=i=>{DI(i,s,a)};for(let i=0;i<e.length;i+=1)wN(e.charCodeAt(i),n,o);return t.join("")}function CI(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function AI(e,t){for(let a=0;a<e.length;a+=1){let s=e.charCodeAt(a);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(e.charCodeAt(a+1)-56320&65535|n)+65536,a+=1}CI(s,t)}}function DI(e,t,a){if(t.utf8seq===0){if(e<=127){a(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&a(t.codepoint)}}function TI(e){const t=[],a={queue:0,queuedBits:0},s=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)wN(e.charCodeAt(n),a,s);return new Uint8Array(t)}function OI(e){const t=[];return AI(e,a=>t.push(a)),new Uint8Array(t)}function RI(e){const t=[],a={queue:0,queuedBits:0},s=n=>{t.push(n)};return e.forEach(n=>y_(n,a,s)),y_(null,a,s),t.join("")}function MI(e){return Math.round(Date.now()/1e3)+e}function kI(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ys=()=>typeof window<"u"&&typeof document<"u",xo={tested:!1,writable:!1},jN=()=>{if(!Ys())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xo.tested)return xo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),xo.tested=!0,xo.writable=!0}catch{xo.tested=!0,xo.writable=!1}return xo.writable};function zI(e){const t={},a=new URL(e);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((n,o)=>{t[o]=n})}catch{}return a.searchParams.forEach((s,n)=>{t[n]=s}),t}const EN=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...a)=>Vd(async()=>{const{default:s}=await Promise.resolve().then(()=>Wl);return{default:s}},void 0).then(({default:s})=>s(...a)):t=fetch,(...a)=>t(...a)},PI=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ci=async(e,t,a)=>{await e.setItem(t,JSON.stringify(a))},yo=async(e,t)=>{const a=await e.getItem(t);if(!a)return null;try{return JSON.parse(a)}catch{return a}},_n=async(e,t)=>{await e.removeItem(t)};class Sh{constructor(){this.promise=new Sh.promiseConstructor((t,a)=>{this.resolve=t,this.reject=a})}}Sh.promiseConstructor=Promise;function Vm(e){const t=e.split(".");if(t.length!==3)throw new Og("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!_I.test(t[s]))throw new Og("JWT not in base64url format");return{header:JSON.parse(__(t[0])),payload:JSON.parse(__(t[1])),signature:TI(t[2]),raw:{header:t[0],payload:t[1]}}}async function II(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function LI(e,t){return new Promise((s,n)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){s(i);return}}catch(i){if(!t(o,i)){n(i);return}}})()})}function FI(e){return("0"+e.toString(16)).substr(-2)}function $I(){const t=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=a.length;let n="";for(let o=0;o<56;o++)n+=a.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(t),Array.from(t,FI).join("")}async function qI(e){const a=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",a),n=new Uint8Array(s);return Array.from(n).map(o=>String.fromCharCode(o)).join("")}async function BI(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const a=await qI(e);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function hi(e,t,a=!1){const s=$I();let n=s;a&&(n+="/PASSWORD_RECOVERY"),await Ci(e,`${t}-code-verifier`,n);const o=await BI(s);return[o,s===o?"plain":"s256"]}const UI=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function HI(e){const t=e.headers.get(Dg);if(!t||!t.match(UI))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function VI(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function GI(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const YI=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mi(e){if(!YI.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Gm(){const e={};return new Proxy(e,{get:(t,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const s=a.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function b_(e){return JSON.parse(JSON.stringify(e))}var WI=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]]);return a};const jo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),QI=[502,503,504];async function w_(e){var t;if(!PI(e))throw new Tg(jo(e),0);if(QI.includes(e.status))throw new Tg(jo(e),e.status);let a;try{a=await e.json()}catch(o){throw new bN(jo(o),o)}let s;const n=HI(e);if(n&&n.getTime()>=_N["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?s=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(s=a.error_code),s){if(s==="weak_password")throw new v_(jo(a),e.status,((t=a.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Sn}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new v_(jo(a),e.status,a.weak_password.reasons);throw new wI(jo(a),e.status||500,s)}const ZI=(e,t,a,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),a))};async function vt(e,t,a,s){var n;const o=Object.assign({},s==null?void 0:s.headers);o[Dg]||(o[Dg]=_N["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const i=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(i.redirect_to=s.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await XI(e,t,a+l,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function XI(e,t,a,s,n,o){const i=ZI(t,s,n,o);let l;try{l=await e(a,Object.assign({},i))}catch(c){throw console.error(c),new Tg(jo(c),0)}if(l.ok||await w_(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await w_(c)}}function Br(e){var t;let a=null;t6(e)&&(a=Object.assign({},e),e.expires_at||(a.expires_at=MI(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:a,user:s},error:null}}function j_(e){const t=Br(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function kn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function KI(e){return{data:e,error:null}}function JI(e){const{action_link:t,email_otp:a,hashed_token:s,redirect_to:n,verification_type:o}=e,i=WI(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:a,hashed_token:s,redirect_to:n,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function e6(e){return e}function t6(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ym=["global","local","others"];var a6=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]]);return a};class s6{constructor({url:t="",headers:a={},fetch:s}){this.url=t,this.headers=a,this.fetch=EN(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,a=Ym[0]){if(Ym.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ym.join(", ")}`);try{return await vt(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ot(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,a={}){try{return await vt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:kn})}catch(s){if(ot(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:a}=t,s=a6(t,["options"]),n=Object.assign(Object.assign({},s),a);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await vt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:JI,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(ot(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(t){try{return await vt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:kn})}catch(a){if(ot(a))return{data:{user:null},error:a};throw a}}async listUsers(t){var a,s,n,o,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},f=await vt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:"",per_page:(o=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:e6});if(f.error)throw f.error;const h=await f.json(),p=(i=f.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(b=>{const y=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(b.split(";")[1].split("=")[1]);d[`${_}Page`]=y}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(ot(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){mi(t);try{return await vt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:kn})}catch(a){if(ot(a))return{data:{user:null},error:a};throw a}}async updateUserById(t,a){mi(t);try{return await vt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:a,headers:this.headers,xform:kn})}catch(s){if(ot(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,a=!1){mi(t);try{return await vt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:a},xform:kn})}catch(s){if(ot(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){mi(t.userId);try{const{data:a,error:s}=await vt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:a,error:s}}catch(a){if(ot(a))return{data:null,error:a};throw a}}async _deleteFactor(t){mi(t.userId),mi(t.id);try{return{data:await vt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(a){if(ot(a))return{data:null,error:a};throw a}}}function E_(e={}){return{getItem:t=>e[t]||null,setItem:(t,a)=>{e[t]=a},removeItem:t=>{delete e[t]}}}function r6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const pi={debug:!!(globalThis&&jN()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class SN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class n6 extends SN{}async function o6(e,t,a){pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),pi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await a()}finally{pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new n6(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(pi.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}r6();const i6={url:vI,storageKey:xI,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yI,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function S_(e,t,a){return await a()}const gi={};class md{constructor(t){var a,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=md.nextInstanceID,md.nextInstanceID+=1,this.instanceID>0&&Ys()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},i6),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new s6({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=EN(n.fetch),this.lock=n.lock||S_,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Ys()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=o6:this.lock=S_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:jN()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=E_(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=E_(this.memoryStorage)),Ys()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,a;return(a=(t=gi[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(t){gi[this.storageKey]=Object.assign(Object.assign({},gi[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,a;return(a=(t=gi[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){gi[this.storageKey]=Object.assign(Object.assign({},gi[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${yN}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const a=zI(window.location.href);let s="none";if(this._isImplicitGrantCallback(a)?s="implicit":await this._isPKCECallback(a)&&(s="pkce"),Ys()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:o}=await this._getSessionFromURL(a,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),SI(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return ot(a)?{error:a}:{error:new bN("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var a,s,n;try{const o=await vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:Br}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(ot(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var a,s,n;try{let o;if("email"in t){const{email:f,password:h,options:p}=t;let m=null,b=null;this.flowType==="pkce"&&([m,b]=await hi(this.storage,this.storageKey)),o=await vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:f,password:h,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:b},xform:Br})}else if("phone"in t){const{phone:f,password:h,options:p}=t;o=await vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:h,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},channel:(n=p==null?void 0:p.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Br})}else throw new Su("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(ot(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let a;if("email"in t){const{email:o,password:i,options:l}=t;a=await vt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:j_})}else if("phone"in t){const{phone:o,password:i,options:l}=t;a=await vt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:j_})}else throw new Su("You must provide either an email or phone number and a password");const{data:s,error:n}=a;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Eu}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(a){if(ot(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(t){var a,s,n,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:a}=t;if(a==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}async signInWithSolana(t){var a,s,n,o,i,l,c,d,f,h,p,m;let b,y;if("message"in t)b=t.message,y=t.signature;else{const{chain:_,wallet:x,statement:v,options:g}=t;let E;if(Ys())if(typeof x=="object")E=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))E=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=x}const j=new URL((a=g==null?void 0:g.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in E&&E.signIn){const S=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),v?{statement:v}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)b=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),y=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${j.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(n=(s=g==null?void 0:g.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((d=g==null?void 0:g.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(f=g==null?void 0:g.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await E.signMessage(new TextEncoder().encode(b),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=S}}try{const{data:_,error:x}=await vt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:RI(y)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Br});if(x)throw x;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Eu}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:x})}catch(_){if(ot(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(t){const a=await yo(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(a??"").split("/");try{const{data:o,error:i}=await vt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Br});if(await _n(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Eu}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:n??null}),error:i})}catch(o){if(ot(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:a,provider:s,token:n,access_token:o,nonce:i}=t,l=await vt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Br}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Eu}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(a){if(ot(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(t){var a,s,n,o,i;try{if("email"in t){const{email:l,options:c}=t;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await hi(this.storage,this.storageKey));const{error:h}=await vt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:f}=await vt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f}}throw new Su("You must provide either an email or phone number.")}catch(l){if(ot(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var a,s;try{let n,o;"options"in t&&(n=(a=t.options)===null||a===void 0?void 0:a.redirectTo,o=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:i,error:l}=await vt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:n,xform:Br});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(ot(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var a,s,n;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await hi(this.storage,this.storageKey)),await vt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(a=t.options)===null||a===void 0?void 0:a.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:KI})}catch(o){if(ot(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:a},error:s}=t;if(s)throw s;if(!a)throw new Sn;const{error:n}=await vt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(ot(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const a=`${this.url}/resend`;if("email"in t){const{email:s,type:n,options:o}=t,{error:i}=await vt(this.fetch,"POST",a,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:s,type:n,options:o}=t,{data:i,error:l}=await vt(this.fetch,"POST",a,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new Su("You must provide either an email or phone number and a type")}catch(a){if(ot(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(t,a){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await a()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=a();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await t(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const a=await yo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?t=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<Um:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const i=await yo(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=Gm()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,f)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,f))})}return{data:{session:t},error:null}}const{session:n,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await vt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:kn}):await this._useSession(async a=>{var s,n,o;const{data:i,error:l}=a;if(l)throw l;return!(!((s=i.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Sn}:await vt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0,xform:kn})})}catch(a){if(ot(a))return EI(a)&&(await this._removeSession(),await _n(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(t,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,a))}async _updateUser(t,a={}){try{return await this._useSession(async s=>{const{data:n,error:o}=s;if(o)throw o;if(!n.session)throw new Sn;const i=n.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await hi(this.storage,this.storageKey));const{data:d,error:f}=await vt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:kn});if(f)throw f;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(s){if(ot(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Sn;const a=Date.now()/1e3;let s=a,n=!0,o=null;const{payload:i}=Vm(t.access_token);if(i.exp&&(s=i.exp,n=s<=a),n){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:s-a,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(a){if(ot(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async a=>{var s;if(!t){const{data:i,error:l}=a;if(l)throw l;t=(s=i.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new Sn;const{session:n,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(ot(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(t,a){try{if(!Ys())throw new Nu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Nu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new g_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Nu("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new g_("No code detected.");const{data:v,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=t;if(!o||!l||!i||!d)throw new Nu("No session defined in URL");const f=Math.round(Date.now()/1e3),h=parseInt(l);let p=f+h;c&&(p=parseInt(c));const m=p-f;m*1e3<=Ni&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const b=p-h;f-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,p,f):f-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,p,f);const{data:y,error:_}=await this._getUser(o);if(_)throw _;const x={provider_token:s,provider_refresh_token:n,access_token:o,expires_in:h,expires_at:p,refresh_token:i,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(s){if(ot(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const a=await yo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&a)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async a=>{var s;const{data:n,error:o}=a;if(o)return{error:o};const i=(s=n.session)===null||s===void 0?void 0:s.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(jI(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await _n(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const a=kI(),s={id:a,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async a=>{var s,n;try{const{data:{session:o},error:i}=a;if(i)throw i;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,a={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await hi(this.storage,this.storageKey,!0));try{return await vt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(o){if(ot(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:a,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=a.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(a){if(ot(a))return{data:null,error:a};throw a}}async linkIdentity(t){var a;try{const{data:s,error:n}=await this._useSession(async o=>{var i,l,c,d,f;const{data:h,error:p}=o;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await vt(this.fetch,"GET",m,{headers:this.headers,jwt:(f=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(n)throw n;return Ys()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(ot(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async a=>{var s,n;const{data:o,error:i}=a;if(i)throw i;return await vt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(a){if(ot(a))return{data:null,error:a};throw a}}async _refreshAccessToken(t){const a=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{const s=Date.now();return await LI(async n=>(n>0&&await II(200*Math.pow(2,n-1)),this._debug(a,"refreshing attempt",n),await vt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Br})),(n,o)=>{const i=200*Math.pow(2,n);return o&&Hm(o)&&Date.now()+i-s<Ni})}catch(s){if(this._debug(a,"error",s),ot(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(a,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,a){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",a,"url",s),Ys()&&!a.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,a;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await yo(this.storage,this.storageKey);if(n&&this.userStorage){let i=await yo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:n.user},await Ci(this.userStorage,this.storageKey+"-user",i)),n.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:Gm()}else if(n&&!n.user&&!n.user){const i=await yo(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(n.user=i.user,await _n(this.storage,this.storageKey+"-user"),await Ci(this.storage,this.storageKey,n)):n.user=Gm()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const o=((a=n.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<Um;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${Um}s`),o){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Hm(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(n.access_token);!l&&(i!=null&&i.user)?(n.user=i.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(s,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var a,s;if(!t)throw new Sn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Sh;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new Sn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(n,"error",o),ot(o)){const i={session:null,error:o};return Hm(o)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(i),i}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,a,s=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",a,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:a});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,a)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const a=Object.assign({},t),s=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&a.user&&await Ci(this.userStorage,this.storageKey+"-user",{user:a.user});const n=Object.assign({},a);delete n.user;const o=b_(n);await Ci(this.storage,this.storageKey,o)}else{const n=b_(a);await Ci(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await _n(this.storage,this.storageKey),await _n(this.storage,this.storageKey+"-code-verifier"),await _n(this.storage,this.storageKey+"-user"),this.userStorage&&await _n(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ys()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ni);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async a=>{const{data:{session:s}}=a;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-t)/Ni);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Ni}ms, refresh threshold is ${Ag} ticks`),n<=Ag&&await this._callRefreshToken(s.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof SN)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ys()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const a=`#_onVisibilityChanged(${t})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,a,s){const n=[`provider=${encodeURIComponent(a)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,i]=await hi(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);n.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async a=>{var s;const{data:n,error:o}=a;return o?{data:null,error:o}:await vt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(a){if(ot(a))return{data:null,error:a};throw a}}async _enroll(t){try{return await this._useSession(async a=>{var s,n;const{data:o,error:i}=a;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await vt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(a){if(ot(a))return{data:null,error:a};throw a}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var s;const{data:n,error:o}=a;if(o)return{data:null,error:o};const{data:i,error:l}=await vt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(a){if(ot(a))return{data:null,error:a};throw a}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var s;const{data:n,error:o}=a;return o?{data:null,error:o}:await vt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(a){if(ot(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(t){const{data:a,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:a.id,code:t.code})}async _listFactors(){const{data:{user:t},error:a}=await this.getUser();if(a)return{data:null,error:a};const s=(t==null?void 0:t.factors)||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=s.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:s,totp:n,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var a,s;const{data:{session:n},error:o}=t;if(o)return{data:null,error:o};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Vm(n.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((s=(a=n.user.factors)===null||a===void 0?void 0:a.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const f=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,a={keys:[]}){let s=a.keys.find(l=>l.kid===t);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+bI>n)return s;const{data:o,error:i}=await vt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=n,s=o.keys.find(l=>l.kid===t),!s)?null:s}async getClaims(t,a={}){try{let s=t;if(!s){const{data:m,error:b}=await this.getSession();if(b||!m.session)return{data:null,error:b};s=m.session.access_token}const{header:n,payload:o,signature:i,raw:{header:l,payload:c}}=Vm(s);a!=null&&a.allowExpired||VI(o.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!d){const{error:m}=await this.getUser(s);if(m)throw m;return{data:{claims:o,header:n,signature:i},error:null}}const f=GI(n.alg),h=await crypto.subtle.importKey("jwk",d,f,!0,["verify"]);if(!await crypto.subtle.verify(f,h,i,OI(`${l}.${c}`)))throw new Og("Invalid JWT signature");return{data:{claims:o,header:n,signature:i},error:null}}catch(s){if(ot(s))return{data:null,error:s};throw s}}}md.nextInstanceID=0;const l6=md;class c6 extends l6{constructor(t){super(t)}}var d6=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class u6{constructor(t,a,s){var n,o,i;if(this.supabaseUrl=t,this.supabaseKey=a,!t)throw new Error("supabaseUrl is required.");if(!a)throw new Error("supabaseKey is required.");const l=pI(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:iI,realtime:cI,auth:Object.assign(Object.assign({},lI),{storageKey:d}),global:oI},h=gI(s??{},f);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=h.auth)!==null&&i!==void 0?i:{},this.headers,h.global.fetch),this.fetch=hI(a,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new D4(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new n4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new sI(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,a={},s={}){return this.rest.rpc(t,a,s)}channel(t,a={config:{}}){return this.realtime.channel(t,a)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,a;return d6(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(a=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&a!==void 0?a:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:a,detectSessionInUrl:s,storage:n,storageKey:o,flowType:i,lock:l,debug:c},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new c6({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:t,persistSession:a,detectSessionInUrl:s,storage:n,flowType:i,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new H4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,s)=>{this._handleTokenChanged(a,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,a,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const f6=(e,t,a)=>new u6(e,t,a),h6="https://twsnzfzjtjdamwwembzp.supabase.co",m6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3c256ZnpqdGpkYW13d2VtYnpwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczMDczODEsImV4cCI6MjA4Mjg4MzM4MX0.EFmjLPT_Mnl4cv2qcH5vq5_zmo47fGWFjQdGGwidsNY",z=f6(h6,m6);function Pt({className:e,size:t=24}){return r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx(GR,{className:Ae("animate-spin text-green-600",e),size:t})})}function p6(){const[e,t]=u.useState({protocolosAbertos:0,receptorasSincronizadas:0,embrioesFrescosDisponiveis:0,embrioesCongeladosEstoque:0}),[a,s]=u.useState(!0);u.useEffect(()=>{n()},[]);const n=async()=>{try{const{count:i}=await z.from("protocolos_sincronizacao").select("*",{count:"exact",head:!0}).is("data_retirada",null),{count:l}=await z.from("protocolo_receptoras").select("*",{count:"exact",head:!0}).in("status",["APTA","SINCRONIZADA"]),{count:c}=await z.from("v_embrioes_disponiveis_te").select("*",{count:"exact",head:!0}).eq("disponivel_fresco_hoje",!0),{count:d}=await z.from("v_embrioes_disponiveis_te").select("*",{count:"exact",head:!0}).eq("disponivel_congelado",!0);t({protocolosAbertos:i||0,receptorasSincronizadas:l||0,embrioesFrescosDisponiveis:c||0,embrioesCongeladosEstoque:d||0})}catch(i){console.error("Erro ao carregar estatsticas:",i)}finally{s(!1)}},o=[{label:"Novo Protocolo",path:"/protocolos/novo",icon:tx,color:"bg-green-600 hover:bg-green-700"},{label:"Registrar Retirada",path:"/protocolos",icon:BR,color:"bg-blue-600 hover:bg-blue-700"},{label:"Nova Aspirao",path:"/aspiracoes/novo",icon:Af,color:"bg-purple-600 hover:bg-purple-700"},{label:"Criar Lote FIV",path:"/lotes-fiv/novo",icon:Af,color:"bg-indigo-600 hover:bg-indigo-700"},{label:"Gerar Embries",path:"/embrioes/novo",icon:qo,color:"bg-pink-600 hover:bg-pink-700"},{label:"TE do Protocolo",path:"/transferencia",icon:lh,color:"bg-orange-600 hover:bg-orange-700"},{label:"Lanar DG",path:"/dg",icon:XE,color:"bg-teal-600 hover:bg-teal-700"},{label:"Lanar Sexagem",path:"/sexagem",icon:Qv,color:"bg-cyan-600 hover:bg-cyan-700"}];return a?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Dashboard"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Viso geral do sistema de FIV/TE"})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Aes Rpidas"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.map(i=>{const l=i.icon;return r.jsx(jl,{to:i.path,children:r.jsxs(re,{className:`w-full h-24 flex flex-col items-center justify-center gap-2 ${i.color} text-white`,children:[r.jsx(l,{className:"w-6 h-6"}),r.jsx("span",{className:"text-sm font-medium text-center",children:i.label})]})},i.path)})})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Estatsticas"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(Me,{children:[r.jsxs(ze,{children:[r.jsx(Pe,{className:"text-lg",children:"Protocolos Abertos"}),r.jsx(bc,{children:"Em andamento"})]}),r.jsx(ke,{children:r.jsx("p",{className:"text-4xl font-bold text-green-600",children:e.protocolosAbertos})})]}),r.jsxs(Me,{children:[r.jsxs(ze,{children:[r.jsx(Pe,{className:"text-lg",children:"Receptoras Sincronizadas"}),r.jsx(bc,{children:"Aptas para TE"})]}),r.jsx(ke,{children:r.jsx("p",{className:"text-4xl font-bold text-blue-600",children:e.receptorasSincronizadas})})]}),r.jsxs(Me,{children:[r.jsxs(ze,{children:[r.jsx(Pe,{className:"text-lg",children:"Embries Frescos"}),r.jsx(bc,{children:"Disponveis hoje (D7/D8)"})]}),r.jsx(ke,{children:r.jsx("p",{className:"text-4xl font-bold text-purple-600",children:e.embrioesFrescosDisponiveis})})]}),r.jsxs(Me,{children:[r.jsxs(ze,{children:[r.jsx(Pe,{className:"text-lg",children:"Embries Congelados"}),r.jsx(bc,{children:"Em estoque"})]}),r.jsx(ke,{children:r.jsx("p",{className:"text-4xl font-bold text-cyan-600",children:e.embrioesCongeladosEstoque})})]})]})]})]})}const At=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:a,className:Ae("w-full caption-bottom text-sm",e),...t})}));At.displayName="Table";const Dt=u.forwardRef(({className:e,...t},a)=>r.jsx("thead",{ref:a,className:Ae("[&_tr]:border-b",e),...t}));Dt.displayName="TableHeader";const Tt=u.forwardRef(({className:e,...t},a)=>r.jsx("tbody",{ref:a,className:Ae("[&_tr:last-child]:border-0",e),...t}));Tt.displayName="TableBody";const g6=u.forwardRef(({className:e,...t},a)=>r.jsx("tfoot",{ref:a,className:Ae("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));g6.displayName="TableFooter";const Oe=u.forwardRef(({className:e,...t},a)=>r.jsx("tr",{ref:a,className:Ae("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Oe.displayName="TableRow";const X=u.forwardRef(({className:e,...t},a)=>r.jsx("th",{ref:a,className:Ae("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));X.displayName="TableHead";const W=u.forwardRef(({className:e,...t},a)=>r.jsx("td",{ref:a,className:Ae("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));W.displayName="TableCell";const v6=u.forwardRef(({className:e,...t},a)=>r.jsx("caption",{ref:a,className:Ae("mt-4 text-sm text-muted-foreground",e),...t}));v6.displayName="TableCaption";function x6(){const[e,t]=u.useState([]),[a,s]=u.useState(!0),{toast:n}=fa();u.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:i,error:l}=await z.from("clientes").select("*").order("nome",{ascending:!0});if(l)throw l;t(i||[])}catch(i){n({title:"Erro ao carregar clientes",description:i instanceof Error?i.message:"Erro desconhecido",variant:"destructive"})}finally{s(!1)}};return a?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Clientes"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar clientes do sistema"})]}),r.jsx(jl,{to:"/clientes/novo",children:r.jsxs(re,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ar,{className:"w-4 h-4 mr-2"}),"Novo Cliente"]})})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Lista de Clientes"})}),r.jsx(ke,{children:r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Nome"}),r.jsx(X,{children:"Telefone"}),r.jsx(X,{children:"Endereo"}),r.jsx(X,{children:"Cadastrado em"}),r.jsx(X,{className:"text-right",children:"Aes"})]})}),r.jsx(Tt,{children:e.length===0?r.jsx(Oe,{children:r.jsx(W,{colSpan:5,className:"text-center text-slate-500",children:"Nenhum cliente cadastrado"})}):e.map(i=>r.jsxs(Oe,{children:[r.jsx(W,{className:"font-medium",children:i.nome}),r.jsx(W,{children:i.telefone||"-"}),r.jsx(W,{children:i.endereco||"-"}),r.jsx(W,{children:i.created_at?new Date(i.created_at).toLocaleDateString("pt-BR"):"-"}),r.jsx(W,{className:"text-right",children:r.jsx(jl,{to:`/clientes/${i.id}`,children:r.jsx(re,{variant:"ghost",size:"sm",children:r.jsx(Xv,{className:"w-4 h-4"})})})})]},i.id))})]})})]})]})}const Ee=u.forwardRef(({className:e,type:t,...a},s)=>r.jsx("input",{type:t,className:Ae("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...a}));Ee.displayName="Input";var y6="Label",NN=u.forwardRef((e,t)=>r.jsx(Ue.label,{...e,ref:t,onMouseDown:a=>{var n;a.target.closest("button, input, select, textarea")||((n=e.onMouseDown)==null||n.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));NN.displayName=y6;var CN=NN;const _6=Bl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ae=u.forwardRef(({className:e,...t},a)=>r.jsx(CN,{ref:a,className:Ae(_6(),e),...t}));ae.displayName=CN.displayName;const Wa=u.forwardRef(({className:e,...t},a)=>r.jsx("textarea",{className:Ae("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));Wa.displayName="Textarea";function N_(){const{id:e}=fn(),t=$a(),{toast:a}=fa(),[s,n]=u.useState(!1),[o,i]=u.useState({nome:"",telefone:"",endereco:""});u.useEffect(()=>{e&&l()},[e]);const l=async()=>{try{n(!0);const{data:d,error:f}=await z.from("clientes").select("*").eq("id",e).single();if(f)throw f;d&&i({nome:d.nome||"",telefone:d.telefone||"",endereco:d.endereco||""})}catch(d){a({title:"Erro ao carregar cliente",description:d instanceof Error?d.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},c=async d=>{if(d.preventDefault(),!o.nome.trim()){a({title:"Erro de validao",description:"Nome  obrigatrio",variant:"destructive"});return}try{if(n(!0),e){const{error:f}=await z.from("clientes").update(o).eq("id",e);if(f)throw f;a({title:"Cliente atualizado",description:"Cliente atualizado com sucesso"})}else{const{error:f}=await z.from("clientes").insert([o]);if(f)throw f;a({title:"Cliente criado",description:"Cliente criado com sucesso"})}t("/clientes")}catch(f){a({title:"Erro ao salvar cliente",description:f instanceof Error?f.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}};return s&&e?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>t("/clientes"),children:r.jsx(us,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:e?"Editar Cliente":"Novo Cliente"}),r.jsx("p",{className:"text-slate-600 mt-1",children:e?"Atualizar informaes do cliente":"Cadastrar novo cliente"})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Informaes do Cliente"})}),r.jsx(ke,{children:r.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"nome",children:"Nome *"}),r.jsx(Ee,{id:"nome",value:o.nome,onChange:d=>i({...o,nome:d.target.value}),placeholder:"Nome do cliente",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"telefone",children:"Telefone"}),r.jsx(Ee,{id:"telefone",value:o.telefone,onChange:d=>i({...o,telefone:d.target.value}),placeholder:"(00) 00000-0000"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"endereco",children:"Endereo"}),r.jsx(Wa,{id:"endereco",value:o.endereco,onChange:d=>i({...o,endereco:d.target.value}),placeholder:"Endereo completo",rows:3})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx(re,{type:"submit",className:"bg-green-600 hover:bg-green-700",disabled:s,children:s?"Salvando...":"Salvar"}),r.jsx(re,{type:"button",variant:"outline",onClick:()=>t("/clientes"),disabled:s,children:"Cancelar"})]})]})})]})]})}var Wm="focusScope.autoFocusOnMount",Qm="focusScope.autoFocusOnUnmount",C_={bubbles:!1,cancelable:!0},b6="FocusScope",Nh=u.forwardRef((e,t)=>{const{loop:a=!1,trapped:s=!1,onMountAutoFocus:n,onUnmountAutoFocus:o,...i}=e,[l,c]=u.useState(null),d=qs(n),f=qs(o),h=u.useRef(null),p=Nt(t,y=>c(y)),m=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(s){let y=function(g){if(m.paused||!l)return;const E=g.target;l.contains(E)?h.current=E:Nn(h.current,{select:!0})},_=function(g){if(m.paused||!l)return;const E=g.relatedTarget;E!==null&&(l.contains(E)||Nn(h.current,{select:!0}))},x=function(g){if(document.activeElement===document.body)for(const j of g)j.removedNodes.length>0&&Nn(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",_);const v=new MutationObserver(x);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",_),v.disconnect()}}},[s,l,m.paused]),u.useEffect(()=>{if(l){D_.add(m);const y=document.activeElement;if(!l.contains(y)){const x=new CustomEvent(Wm,C_);l.addEventListener(Wm,d),l.dispatchEvent(x),x.defaultPrevented||(w6(C6(AN(l)),{select:!0}),document.activeElement===y&&Nn(l))}return()=>{l.removeEventListener(Wm,d),setTimeout(()=>{const x=new CustomEvent(Qm,C_);l.addEventListener(Qm,f),l.dispatchEvent(x),x.defaultPrevented||Nn(y??document.body,{select:!0}),l.removeEventListener(Qm,f),D_.remove(m)},0)}}},[l,d,f,m]);const b=u.useCallback(y=>{if(!a&&!s||m.paused)return;const _=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,x=document.activeElement;if(_&&x){const v=y.currentTarget,[g,E]=j6(v);g&&E?!y.shiftKey&&x===E?(y.preventDefault(),a&&Nn(g,{select:!0})):y.shiftKey&&x===g&&(y.preventDefault(),a&&Nn(E,{select:!0})):x===v&&y.preventDefault()}},[a,s,m.paused]);return r.jsx(Ue.div,{tabIndex:-1,...i,ref:p,onKeyDown:b})});Nh.displayName=b6;function w6(e,{select:t=!1}={}){const a=document.activeElement;for(const s of e)if(Nn(s,{select:t}),document.activeElement!==a)return}function j6(e){const t=AN(e),a=A_(t,e),s=A_(t.reverse(),e);return[a,s]}function AN(e){const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function A_(e,t){for(const a of e)if(!E6(a,{upTo:t}))return a}function E6(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function S6(e){return e instanceof HTMLInputElement&&"select"in e}function Nn(e,{select:t=!1}={}){if(e&&e.focus){const a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&S6(e)&&t&&e.select()}}var D_=N6();function N6(){let e=[];return{add(t){const a=e[0];t!==a&&(a==null||a.pause()),e=T_(e,t),e.unshift(t)},remove(t){var a;e=T_(e,t),(a=e[0])==null||a.resume()}}}function T_(e,t){const a=[...e],s=a.indexOf(t);return s!==-1&&a.splice(s,1),a}function C6(e){return e.filter(t=>t.tagName!=="A")}var Zm=0;function Nx(){u.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??O_()),document.body.insertAdjacentElement("beforeend",e[1]??O_()),Zm++,()=>{Zm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Zm--}},[])}function O_(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var vr=function(){return vr=Object.assign||function(t){for(var a,s=1,n=arguments.length;s<n;s++){a=arguments[s];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},vr.apply(this,arguments)};function DN(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]]);return a}function A6(e,t,a){if(a||arguments.length===2)for(var s=0,n=t.length,o;s<n;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var Wu="right-scroll-bar-position",Qu="width-before-scroll-bar",D6="with-scroll-bars-hidden",T6="--removed-body-scroll-bar-size";function Xm(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function O6(e,t){var a=u.useState(function(){return{value:e,callback:t,facade:{get current(){return a.value},set current(s){var n=a.value;n!==s&&(a.value=s,a.callback(s,n))}}}})[0];return a.callback=t,a.facade}var R6=typeof window<"u"?u.useLayoutEffect:u.useEffect,R_=new WeakMap;function M6(e,t){var a=O6(null,function(s){return e.forEach(function(n){return Xm(n,s)})});return R6(function(){var s=R_.get(a);if(s){var n=new Set(s),o=new Set(e),i=a.current;n.forEach(function(l){o.has(l)||Xm(l,null)}),o.forEach(function(l){n.has(l)||Xm(l,i)})}R_.set(a,e)},[e]),a}function k6(e){return e}function z6(e,t){t===void 0&&(t=k6);var a=[],s=!1,n={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:e},useMedium:function(o){var i=t(o,s);return a.push(i),function(){a=a.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(s=!0;a.length;){var i=a;a=[],i.forEach(o)}a={push:function(l){return o(l)},filter:function(){return a}}},assignMedium:function(o){s=!0;var i=[];if(a.length){var l=a;a=[],l.forEach(o),i=a}var c=function(){var f=i;i=[],f.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),a={push:function(f){i.push(f),d()},filter:function(f){return i=i.filter(f),a}}}};return n}function P6(e){e===void 0&&(e={});var t=z6(null);return t.options=vr({async:!0,ssr:!1},e),t}var TN=function(e){var t=e.sideCar,a=DN(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return u.createElement(s,vr({},a))};TN.isSideCarExport=!0;function I6(e,t){return e.useMedium(t),TN}var ON=P6(),Km=function(){},Ch=u.forwardRef(function(e,t){var a=u.useRef(null),s=u.useState({onScrollCapture:Km,onWheelCapture:Km,onTouchMoveCapture:Km}),n=s[0],o=s[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,f=e.enabled,h=e.shards,p=e.sideCar,m=e.noRelative,b=e.noIsolation,y=e.inert,_=e.allowPinchZoom,x=e.as,v=x===void 0?"div":x,g=e.gapMode,E=DN(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=p,S=M6([a,t]),N=vr(vr({},E),n);return u.createElement(u.Fragment,null,f&&u.createElement(j,{sideCar:ON,removeScrollBar:d,shards:h,noRelative:m,noIsolation:b,inert:y,setCallbacks:o,allowPinchZoom:!!_,lockRef:a,gapMode:g}),i?u.cloneElement(u.Children.only(l),vr(vr({},N),{ref:S})):u.createElement(v,vr({},N,{className:c,ref:S}),l))});Ch.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ch.classNames={fullWidth:Qu,zeroRight:Wu};var L6=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function F6(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=L6();return t&&e.setAttribute("nonce",t),e}function $6(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function q6(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var B6=function(){var e=0,t=null;return{add:function(a){e==0&&(t=F6())&&($6(t,a),q6(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},U6=function(){var e=B6();return function(t,a){u.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&a])}},RN=function(){var e=U6(),t=function(a){var s=a.styles,n=a.dynamic;return e(s,n),null};return t},H6={left:0,top:0,right:0,gap:0},Jm=function(e){return parseInt(e||"",10)||0},V6=function(e){var t=window.getComputedStyle(document.body),a=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],n=t[e==="padding"?"paddingRight":"marginRight"];return[Jm(a),Jm(s),Jm(n)]},G6=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return H6;var t=V6(e),a=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-a+t[2]-t[0])}},Y6=RN(),Ki="data-scroll-locked",W6=function(e,t,a,s){var n=e.left,o=e.top,i=e.right,l=e.gap;return a===void 0&&(a="margin"),`
  .`.concat(D6,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Ki,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),a==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),a==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Wu,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Qu,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Wu," .").concat(Wu,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Qu," .").concat(Qu,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Ki,`] {
    `).concat(T6,": ").concat(l,`px;
  }
`)},M_=function(){var e=parseInt(document.body.getAttribute(Ki)||"0",10);return isFinite(e)?e:0},Q6=function(){u.useEffect(function(){return document.body.setAttribute(Ki,(M_()+1).toString()),function(){var e=M_()-1;e<=0?document.body.removeAttribute(Ki):document.body.setAttribute(Ki,e.toString())}},[])},Z6=function(e){var t=e.noRelative,a=e.noImportant,s=e.gapMode,n=s===void 0?"margin":s;Q6();var o=u.useMemo(function(){return G6(n)},[n]);return u.createElement(Y6,{styles:W6(o,!t,n,a?"":"!important")})},Rg=!1;if(typeof window<"u")try{var Cu=Object.defineProperty({},"passive",{get:function(){return Rg=!0,!0}});window.addEventListener("test",Cu,Cu),window.removeEventListener("test",Cu,Cu)}catch{Rg=!1}var vi=Rg?{passive:!1}:!1,X6=function(e){return e.tagName==="TEXTAREA"},MN=function(e,t){if(!(e instanceof Element))return!1;var a=window.getComputedStyle(e);return a[t]!=="hidden"&&!(a.overflowY===a.overflowX&&!X6(e)&&a[t]==="visible")},K6=function(e){return MN(e,"overflowY")},J6=function(e){return MN(e,"overflowX")},k_=function(e,t){var a=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var n=kN(e,s);if(n){var o=zN(e,s),i=o[1],l=o[2];if(i>l)return!0}s=s.parentNode}while(s&&s!==a.body);return!1},e3=function(e){var t=e.scrollTop,a=e.scrollHeight,s=e.clientHeight;return[t,a,s]},t3=function(e){var t=e.scrollLeft,a=e.scrollWidth,s=e.clientWidth;return[t,a,s]},kN=function(e,t){return e==="v"?K6(t):J6(t)},zN=function(e,t){return e==="v"?e3(t):t3(t)},a3=function(e,t){return e==="h"&&t==="rtl"?-1:1},s3=function(e,t,a,s,n){var o=a3(e,window.getComputedStyle(t).direction),i=o*s,l=a.target,c=t.contains(l),d=!1,f=i>0,h=0,p=0;do{if(!l)break;var m=zN(e,l),b=m[0],y=m[1],_=m[2],x=y-_-o*b;(b||x)&&kN(e,l)&&(h+=x,p+=b);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&Math.abs(h)<1||!f&&Math.abs(p)<1)&&(d=!0),d},Au=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},z_=function(e){return[e.deltaX,e.deltaY]},P_=function(e){return e&&"current"in e?e.current:e},r3=function(e,t){return e[0]===t[0]&&e[1]===t[1]},n3=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},o3=0,xi=[];function i3(e){var t=u.useRef([]),a=u.useRef([0,0]),s=u.useRef(),n=u.useState(o3++)[0],o=u.useState(RN)[0],i=u.useRef(e);u.useEffect(function(){i.current=e},[e]),u.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(n));var y=A6([e.lockRef.current],(e.shards||[]).map(P_),!0).filter(Boolean);return y.forEach(function(_){return _.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),y.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(n))})}}},[e.inert,e.lockRef.current,e.shards]);var l=u.useCallback(function(y,_){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!i.current.allowPinchZoom;var x=Au(y),v=a.current,g="deltaX"in y?y.deltaX:v[0]-x[0],E="deltaY"in y?y.deltaY:v[1]-x[1],j,S=y.target,N=Math.abs(g)>Math.abs(E)?"h":"v";if("touches"in y&&N==="h"&&S.type==="range")return!1;var R=k_(N,S);if(!R)return!0;if(R?j=N:(j=N==="v"?"h":"v",R=k_(N,S)),!R)return!1;if(!s.current&&"changedTouches"in y&&(g||E)&&(s.current=j),!j)return!0;var T=s.current||j;return s3(T,_,y,T==="h"?g:E)},[]),c=u.useCallback(function(y){var _=y;if(!(!xi.length||xi[xi.length-1]!==o)){var x="deltaY"in _?z_(_):Au(_),v=t.current.filter(function(j){return j.name===_.type&&(j.target===_.target||_.target===j.shadowParent)&&r3(j.delta,x)})[0];if(v&&v.should){_.cancelable&&_.preventDefault();return}if(!v){var g=(i.current.shards||[]).map(P_).filter(Boolean).filter(function(j){return j.contains(_.target)}),E=g.length>0?l(_,g[0]):!i.current.noIsolation;E&&_.cancelable&&_.preventDefault()}}},[]),d=u.useCallback(function(y,_,x,v){var g={name:y,delta:_,target:x,should:v,shadowParent:l3(x)};t.current.push(g),setTimeout(function(){t.current=t.current.filter(function(E){return E!==g})},1)},[]),f=u.useCallback(function(y){a.current=Au(y),s.current=void 0},[]),h=u.useCallback(function(y){d(y.type,z_(y),y.target,l(y,e.lockRef.current))},[]),p=u.useCallback(function(y){d(y.type,Au(y),y.target,l(y,e.lockRef.current))},[]);u.useEffect(function(){return xi.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,vi),document.addEventListener("touchmove",c,vi),document.addEventListener("touchstart",f,vi),function(){xi=xi.filter(function(y){return y!==o}),document.removeEventListener("wheel",c,vi),document.removeEventListener("touchmove",c,vi),document.removeEventListener("touchstart",f,vi)}},[]);var m=e.removeScrollBar,b=e.inert;return u.createElement(u.Fragment,null,b?u.createElement(o,{styles:n3(n)}):null,m?u.createElement(Z6,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function l3(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const c3=I6(ON,i3);var Ah=u.forwardRef(function(e,t){return u.createElement(Ch,vr({},e,{ref:t,sideCar:c3}))});Ah.classNames=Ch.classNames;var d3=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},yi=new WeakMap,Du=new WeakMap,Tu={},ep=0,PN=function(e){return e&&(e.host||PN(e.parentNode))},u3=function(e,t){return t.map(function(a){if(e.contains(a))return a;var s=PN(a);return s&&e.contains(s)?s:(console.error("aria-hidden",a,"in not contained inside",e,". Doing nothing"),null)}).filter(function(a){return!!a})},f3=function(e,t,a,s){var n=u3(t,Array.isArray(e)?e:[e]);Tu[a]||(Tu[a]=new WeakMap);var o=Tu[a],i=[],l=new Set,c=new Set(n),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};n.forEach(d);var f=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(p){if(l.has(p))f(p);else try{var m=p.getAttribute(s),b=m!==null&&m!=="false",y=(yi.get(p)||0)+1,_=(o.get(p)||0)+1;yi.set(p,y),o.set(p,_),i.push(p),y===1&&b&&Du.set(p,!0),_===1&&p.setAttribute(a,"true"),b||p.setAttribute(s,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return f(t),l.clear(),ep++,function(){i.forEach(function(h){var p=yi.get(h)-1,m=o.get(h)-1;yi.set(h,p),o.set(h,m),p||(Du.has(h)||h.removeAttribute(s),Du.delete(h)),m||h.removeAttribute(a)}),ep--,ep||(yi=new WeakMap,yi=new WeakMap,Du=new WeakMap,Tu={})}},Cx=function(e,t,a){a===void 0&&(a="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),n=d3(e);return n?(s.push.apply(s,Array.from(n.querySelectorAll("[aria-live], script"))),f3(s,n,a,"aria-hidden")):function(){return null}},Dh="Dialog",[IN,LN]=As(Dh),[h3,ir]=IN(Dh),FN=e=>{const{__scopeDialog:t,children:a,open:s,defaultOpen:n,onOpenChange:o,modal:i=!0}=e,l=u.useRef(null),c=u.useRef(null),[d,f]=Bs({prop:s,defaultProp:n??!1,onChange:o,caller:Dh});return r.jsx(h3,{scope:t,triggerRef:l,contentRef:c,contentId:es(),titleId:es(),descriptionId:es(),open:d,onOpenChange:f,onOpenToggle:u.useCallback(()=>f(h=>!h),[f]),modal:i,children:a})};FN.displayName=Dh;var $N="DialogTrigger",qN=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=ir($N,a),o=Nt(t,n.triggerRef);return r.jsx(Ue.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Tx(n.open),...s,ref:o,onClick:Be(e.onClick,n.onOpenToggle)})});qN.displayName=$N;var Ax="DialogPortal",[m3,BN]=IN(Ax,{forceMount:void 0}),UN=e=>{const{__scopeDialog:t,forceMount:a,children:s,container:n}=e,o=ir(Ax,t);return r.jsx(m3,{scope:t,forceMount:a,children:u.Children.map(s,i=>r.jsx(Tr,{present:a||o.open,children:r.jsx(Fd,{asChild:!0,container:n,children:i})}))})};UN.displayName=Ax;var Lf="DialogOverlay",HN=u.forwardRef((e,t)=>{const a=BN(Lf,e.__scopeDialog),{forceMount:s=a.forceMount,...n}=e,o=ir(Lf,e.__scopeDialog);return o.modal?r.jsx(Tr,{present:s||o.open,children:r.jsx(g3,{...n,ref:t})}):null});HN.displayName=Lf;var p3=Wo("DialogOverlay.RemoveScroll"),g3=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=ir(Lf,a);return r.jsx(Ah,{as:p3,allowPinchZoom:!0,shards:[n.contentRef],children:r.jsx(Ue.div,{"data-state":Tx(n.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Zo="DialogContent",VN=u.forwardRef((e,t)=>{const a=BN(Zo,e.__scopeDialog),{forceMount:s=a.forceMount,...n}=e,o=ir(Zo,e.__scopeDialog);return r.jsx(Tr,{present:s||o.open,children:o.modal?r.jsx(v3,{...n,ref:t}):r.jsx(x3,{...n,ref:t})})});VN.displayName=Zo;var v3=u.forwardRef((e,t)=>{const a=ir(Zo,e.__scopeDialog),s=u.useRef(null),n=Nt(t,a.contentRef,s);return u.useEffect(()=>{const o=s.current;if(o)return Cx(o)},[]),r.jsx(GN,{...e,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Be(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=a.triggerRef.current)==null||i.focus()}),onPointerDownOutside:Be(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:Be(e.onFocusOutside,o=>o.preventDefault())})}),x3=u.forwardRef((e,t)=>{const a=ir(Zo,e.__scopeDialog),s=u.useRef(!1),n=u.useRef(!1);return r.jsx(GN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=a.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const i=o.target;((d=a.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&n.current&&o.preventDefault()}})}),GN=u.forwardRef((e,t)=>{const{__scopeDialog:a,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:o,...i}=e,l=ir(Zo,a),c=u.useRef(null),d=Nt(t,c);return Nx(),r.jsxs(r.Fragment,{children:[r.jsx(Nh,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:o,children:r.jsx(ql,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Tx(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(_3,{titleId:l.titleId}),r.jsx(w3,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Dx="DialogTitle",YN=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=ir(Dx,a);return r.jsx(Ue.h2,{id:n.titleId,...s,ref:t})});YN.displayName=Dx;var WN="DialogDescription",QN=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=ir(WN,a);return r.jsx(Ue.p,{id:n.descriptionId,...s,ref:t})});QN.displayName=WN;var ZN="DialogClose",XN=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=ir(ZN,a);return r.jsx(Ue.button,{type:"button",...s,ref:t,onClick:Be(e.onClick,()=>n.onOpenChange(!1))})});XN.displayName=ZN;function Tx(e){return e?"open":"closed"}var KN="DialogTitleWarning",[y3,JN]=GO(KN,{contentName:Zo,titleName:Dx,docsSlug:"dialog"}),_3=({titleId:e})=>{const t=JN(KN),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return u.useEffect(()=>{e&&(document.getElementById(e)||console.error(a))},[a,e]),null},b3="DialogDescriptionWarning",w3=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${JN(b3).contentName}}.`;return u.useEffect(()=>{var o;const n=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&n&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},Th=FN,e1=qN,Oh=UN,Zl=HN,Xl=VN,Wd=YN,Qd=QN,Rh=XN;const da=Th,ln=e1,j3=Oh,t1=u.forwardRef(({className:e,...t},a)=>r.jsx(Zl,{ref:a,className:Ae("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));t1.displayName=Zl.displayName;const sa=u.forwardRef(({className:e,children:t,...a},s)=>r.jsxs(j3,{children:[r.jsx(t1,{}),r.jsxs(Xl,{ref:s,className:Ae("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,r.jsxs(Rh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(sr,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));sa.displayName=Xl.displayName;const ra=({className:e,...t})=>r.jsx("div",{className:Ae("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});ra.displayName="DialogHeader";const a1=({className:e,...t})=>r.jsx("div",{className:Ae("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});a1.displayName="DialogFooter";const na=u.forwardRef(({className:e,...t},a)=>r.jsx(Wd,{ref:a,className:Ae("text-lg font-semibold leading-none tracking-tight",e),...t}));na.displayName=Wd.displayName;const ua=u.forwardRef(({className:e,...t},a)=>r.jsx(Qd,{ref:a,className:Ae("text-sm text-muted-foreground",e),...t}));ua.displayName=Qd.displayName;var E3=u.createContext(void 0);function Mh(e){const t=u.useContext(E3);return e||t||"ltr"}var tp="rovingFocusGroup.onEntryFocus",S3={bubbles:!1,cancelable:!0},Zd="RovingFocusGroup",[Mg,s1,N3]=Vv(Zd),[C3,kh]=As(Zd,[N3]),[A3,D3]=C3(Zd),r1=u.forwardRef((e,t)=>r.jsx(Mg.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Mg.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(T3,{...e,ref:t})})}));r1.displayName=Zd;var T3=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,orientation:s,loop:n=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...h}=e,p=u.useRef(null),m=Nt(t,p),b=Mh(o),[y,_]=Bs({prop:i,defaultProp:l??null,onChange:c,caller:Zd}),[x,v]=u.useState(!1),g=qs(d),E=s1(a),j=u.useRef(!1),[S,N]=u.useState(0);return u.useEffect(()=>{const R=p.current;if(R)return R.addEventListener(tp,g),()=>R.removeEventListener(tp,g)},[g]),r.jsx(A3,{scope:a,orientation:s,dir:b,loop:n,currentTabStopId:y,onItemFocus:u.useCallback(R=>_(R),[_]),onItemShiftTab:u.useCallback(()=>v(!0),[]),onFocusableItemAdd:u.useCallback(()=>N(R=>R+1),[]),onFocusableItemRemove:u.useCallback(()=>N(R=>R-1),[]),children:r.jsx(Ue.div,{tabIndex:x||S===0?-1:0,"data-orientation":s,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:Be(e.onMouseDown,()=>{j.current=!0}),onFocus:Be(e.onFocus,R=>{const T=!j.current;if(R.target===R.currentTarget&&T&&!x){const F=new CustomEvent(tp,S3);if(R.currentTarget.dispatchEvent(F),!F.defaultPrevented){const U=E().filter(A=>A.focusable),Z=U.find(A=>A.active),ce=U.find(A=>A.id===y),M=[Z,ce,...U].filter(Boolean).map(A=>A.ref.current);i1(M,f)}}j.current=!1}),onBlur:Be(e.onBlur,()=>v(!1))})})}),n1="RovingFocusGroupItem",o1=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,focusable:s=!0,active:n=!1,tabStopId:o,children:i,...l}=e,c=es(),d=o||c,f=D3(n1,a),h=f.currentTabStopId===d,p=s1(a),{onFocusableItemAdd:m,onFocusableItemRemove:b,currentTabStopId:y}=f;return u.useEffect(()=>{if(s)return m(),()=>b()},[s,m,b]),r.jsx(Mg.ItemSlot,{scope:a,id:d,focusable:s,active:n,children:r.jsx(Ue.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:Be(e.onMouseDown,_=>{s?f.onItemFocus(d):_.preventDefault()}),onFocus:Be(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:Be(e.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){f.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const x=M3(_,f.orientation,f.dir);if(x!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let g=p().filter(E=>E.focusable).map(E=>E.ref.current);if(x==="last")g.reverse();else if(x==="prev"||x==="next"){x==="prev"&&g.reverse();const E=g.indexOf(_.currentTarget);g=f.loop?k3(g,E+1):g.slice(E+1)}setTimeout(()=>i1(g))}}),children:typeof i=="function"?i({isCurrentTabStop:h,hasTabStop:y!=null}):i})})});o1.displayName=n1;var O3={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function R3(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function M3(e,t,a){const s=R3(e.key,a);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return O3[s]}function i1(e,t=!1){const a=document.activeElement;for(const s of e)if(s===a||(s.focus({preventScroll:t}),document.activeElement!==a))return}function k3(e,t){return e.map((a,s)=>e[(t+s)%e.length])}var l1=r1,c1=o1,zh="Tabs",[z3,mH]=As(zh,[kh]),d1=kh(),[P3,Ox]=z3(zh),u1=u.forwardRef((e,t)=>{const{__scopeTabs:a,value:s,onValueChange:n,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...d}=e,f=Mh(l),[h,p]=Bs({prop:s,onChange:n,defaultProp:o??"",caller:zh});return r.jsx(P3,{scope:a,baseId:es(),value:h,onValueChange:p,orientation:i,dir:f,activationMode:c,children:r.jsx(Ue.div,{dir:f,"data-orientation":i,...d,ref:t})})});u1.displayName=zh;var f1="TabsList",h1=u.forwardRef((e,t)=>{const{__scopeTabs:a,loop:s=!0,...n}=e,o=Ox(f1,a),i=d1(a);return r.jsx(l1,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:s,children:r.jsx(Ue.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:t})})});h1.displayName=f1;var m1="TabsTrigger",p1=u.forwardRef((e,t)=>{const{__scopeTabs:a,value:s,disabled:n=!1,...o}=e,i=Ox(m1,a),l=d1(a),c=x1(i.baseId,s),d=y1(i.baseId,s),f=s===i.value;return r.jsx(c1,{asChild:!0,...l,focusable:!n,active:f,children:r.jsx(Ue.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:c,...o,ref:t,onMouseDown:Be(e.onMouseDown,h=>{!n&&h.button===0&&h.ctrlKey===!1?i.onValueChange(s):h.preventDefault()}),onKeyDown:Be(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(s)}),onFocus:Be(e.onFocus,()=>{const h=i.activationMode!=="manual";!f&&!n&&h&&i.onValueChange(s)})})})});p1.displayName=m1;var g1="TabsContent",v1=u.forwardRef((e,t)=>{const{__scopeTabs:a,value:s,forceMount:n,children:o,...i}=e,l=Ox(g1,a),c=x1(l.baseId,s),d=y1(l.baseId,s),f=s===l.value,h=u.useRef(f);return u.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),r.jsx(Tr,{present:n||f,children:({present:p})=>r.jsx(Ue.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&o})})});v1.displayName=g1;function x1(e,t){return`${e}-trigger-${t}`}function y1(e,t){return`${e}-content-${t}`}var I3=u1,_1=h1,b1=p1,w1=v1;const j1=I3,Rx=u.forwardRef(({className:e,...t},a)=>r.jsx(_1,{ref:a,className:Ae("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Rx.displayName=_1.displayName;const pd=u.forwardRef(({className:e,...t},a)=>r.jsx(b1,{ref:a,className:Ae("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));pd.displayName=b1.displayName;const gd=u.forwardRef(({className:e,...t},a)=>r.jsx(w1,{ref:a,className:Ae("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));gd.displayName=w1.displayName;function L3(){const{id:e}=fn(),t=$a(),{toast:a}=fa(),[s,n]=u.useState(!0),[o,i]=u.useState(null),[l,c]=u.useState([]),[d,f]=u.useState([]),[h,p]=u.useState(!1),[m,b]=u.useState(!1),[y,_]=u.useState({nome:"",localizacao:"",latitude:"",longitude:"",responsavel:"",contato_responsavel:""});u.useEffect(()=>{e&&x()},[e]);const x=async()=>{try{n(!0);const{data:j,error:S}=await z.from("clientes").select("*").eq("id",e).single();if(S)throw S;i(j);const{data:N,error:R}=await z.from("fazendas").select("*").eq("cliente_id",e).order("nome",{ascending:!0});if(R)throw R;c(N||[]);const{data:T,error:F}=await z.from("doses_semen").select("*").eq("cliente_id",e).order("nome",{ascending:!0});if(F)throw F;f(T||[])}catch(j){a({title:"Erro ao carregar dados",description:j instanceof Error?j.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},v=j=>j.latitude&&j.longitude?`https://www.google.com/maps?q=${j.latitude},${j.longitude}`:j.localizacao?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(j.localizacao)}`:null,g=j=>j.latitude&&j.longitude?`https://waze.com/ul?ll=${j.latitude},${j.longitude}&navigate=yes`:j.localizacao?v(j):null,E=async j=>{if(j.preventDefault(),!y.nome.trim()){a({title:"Erro de validao",description:"Nome da fazenda  obrigatrio",variant:"destructive"});return}try{b(!0);const S={cliente_id:e,nome:y.nome,localizacao:y.localizacao.trim()||null,latitude:y.latitude?parseFloat(y.latitude):null,longitude:y.longitude?parseFloat(y.longitude):null,responsavel:y.responsavel.trim()||null,contato_responsavel:y.contato_responsavel.trim()||null},{error:N}=await z.from("fazendas").insert([S]);if(N)throw N;a({title:"Fazenda criada",description:"Fazenda criada com sucesso"}),p(!1),_({nome:"",localizacao:"",latitude:"",longitude:"",responsavel:"",contato_responsavel:""}),x()}catch(S){const N=S instanceof Error?S.message:"Erro desconhecido";a({title:"Erro ao criar fazenda",description:N.includes("RLS")||N.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":N,variant:"destructive"})}finally{b(!1)}};return s?r.jsx(Pt,{}):o?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>t("/clientes"),children:r.jsx(us,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:o.nome}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Detalhes do cliente"})]})]}),r.jsx(jl,{to:`/clientes/${e}/editar`,children:r.jsxs(re,{variant:"outline",children:[r.jsx(od,{className:"w-4 h-4 mr-2"}),"Editar"]})})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Informaes do Cliente"})}),r.jsxs(ke,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Nome"}),r.jsx("p",{className:"text-base text-slate-900",children:o.nome})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Telefone"}),r.jsx("p",{className:"text-base text-slate-900",children:o.telefone||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Endereo"}),r.jsx("p",{className:"text-base text-slate-900",children:o.endereco||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Cadastrado em"}),r.jsx("p",{className:"text-base text-slate-900",children:o.created_at?new Date(o.created_at).toLocaleDateString("pt-BR"):"-"})]})]})]}),r.jsxs(j1,{defaultValue:"fazendas",className:"w-full",children:[r.jsxs(Rx,{children:[r.jsxs(pd,{value:"fazendas",children:[r.jsx(QE,{className:"w-4 h-4 mr-2"}),"Fazendas (",l.length,")"]}),r.jsxs(pd,{value:"doses",children:[r.jsx(qo,{className:"w-4 h-4 mr-2"}),"Doses de Smen (",d.length,")"]})]}),r.jsx(gd,{value:"fazendas",children:r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Pe,{children:"Fazendas do Cliente"}),r.jsxs(da,{open:h,onOpenChange:p,children:[r.jsx(ln,{asChild:!0,children:r.jsxs(re,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ar,{className:"w-4 h-4 mr-2"}),"Nova Fazenda"]})}),r.jsxs(sa,{className:"max-w-md",children:[r.jsxs(ra,{children:[r.jsx(na,{children:"Criar Nova Fazenda"}),r.jsxs(ua,{children:["Criar fazenda para ",o.nome]})]}),r.jsxs("form",{onSubmit:E,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"nome",children:"Nome da Fazenda *"}),r.jsx(Ee,{id:"nome",value:y.nome,onChange:j=>_({...y,nome:j.target.value}),placeholder:"Nome da fazenda",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"localizacao",children:"Localizao"}),r.jsx(Ee,{id:"localizacao",value:y.localizacao,onChange:j=>_({...y,localizacao:j.target.value}),placeholder:"Cidade, Estado"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"latitude",children:"Latitude"}),r.jsx(Ee,{id:"latitude",type:"number",step:"any",value:y.latitude,onChange:j=>_({...y,latitude:j.target.value}),placeholder:"-23.550520"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"longitude",children:"Longitude"}),r.jsx(Ee,{id:"longitude",type:"number",step:"any",value:y.longitude,onChange:j=>_({...y,longitude:j.target.value}),placeholder:"-46.633308"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"responsavel",children:"Responsvel"}),r.jsx(Ee,{id:"responsavel",value:y.responsavel,onChange:j=>_({...y,responsavel:j.target.value}),placeholder:"Nome do responsvel"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"contato_responsavel",children:"Contato do Responsvel"}),r.jsx(Ee,{id:"contato_responsavel",value:y.contato_responsavel,onChange:j=>_({...y,contato_responsavel:j.target.value}),placeholder:"Telefone ou email"})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(re,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:m,children:m?"Salvando...":"Criar Fazenda"}),r.jsx(re,{type:"button",variant:"outline",onClick:()=>p(!1),disabled:m,children:"Cancelar"})]})]})]})]})]})}),r.jsx(ke,{children:r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Nome"}),r.jsx(X,{children:"Localizao"}),r.jsx(X,{children:"Responsvel"}),r.jsx(X,{children:"Contato"}),r.jsx(X,{className:"text-right",children:"Aes"})]})}),r.jsx(Tt,{children:l.length===0?r.jsx(Oe,{children:r.jsx(W,{colSpan:5,className:"text-center text-slate-500",children:"Nenhuma fazenda cadastrada"})}):l.map(j=>r.jsxs(Oe,{children:[r.jsx(W,{className:"font-medium",children:r.jsx(jl,{to:`/fazendas/${j.id}`,className:"text-green-600 hover:text-green-700 hover:underline",children:j.nome})}),r.jsx(W,{children:j.localizacao||"-"}),r.jsx(W,{children:j.responsavel||"-"}),r.jsx(W,{children:j.contato_responsavel||"-"}),r.jsx(W,{className:"text-right",children:r.jsxs("div",{className:"flex gap-2 justify-end",children:[v(j)&&r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>window.open(v(j),"_blank"),children:[r.jsx(Jv,{className:"w-4 h-4 mr-1"}),"Maps"]}),g(j)&&r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>window.open(g(j),"_blank"),children:[r.jsx(ZE,{className:"w-4 h-4 mr-1"}),"Waze"]})]})})]},j.id))})]})})]})}),r.jsx(gd,{value:"doses",children:r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Doses de Smen"})}),r.jsx(ke,{children:r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Nome (Touro)"}),r.jsx(X,{children:"Raa"}),r.jsx(X,{children:"Tipo"}),r.jsx(X,{children:"Quantidade"})]})}),r.jsx(Tt,{children:d.length===0?r.jsx(Oe,{children:r.jsx(W,{colSpan:4,className:"text-center text-slate-500",children:"Nenhuma dose de smen cadastrada"})}):d.map(j=>r.jsxs(Oe,{children:[r.jsx(W,{className:"font-medium",children:j.nome}),r.jsx(W,{children:j.raca||"-"}),r.jsx(W,{children:j.tipo_semen||"-"}),r.jsx(W,{children:j.quantidade??"-"})]},j.id))})]})})]})})]})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Cliente no encontrado"}),r.jsx(re,{onClick:()=>t("/clientes"),className:"mt-4",children:"Voltar para Clientes"})]})}function F3(){const[e,t]=u.useState([]),[a,s]=u.useState(!0),{toast:n}=fa(),o=$a();u.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const{data:l,error:c}=await z.from("fazendas").select("*").order("nome",{ascending:!0});if(c)throw c;const d=[...new Set(l==null?void 0:l.map(b=>b.cliente_id))],{data:f,error:h}=await z.from("clientes").select("id, nome").in("id",d);if(h)throw h;const p=new Map(f==null?void 0:f.map(b=>[b.id,b.nome])),m=l==null?void 0:l.map(b=>({...b,cliente_nome:p.get(b.cliente_id)}));t(m||[])}catch(l){n({title:"Erro ao carregar dados",description:l instanceof Error?l.message:"Erro desconhecido",variant:"destructive"})}finally{s(!1)}};return a?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Fazendas"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar fazendas do sistema"})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Lista de Fazendas"})}),r.jsx(ke,{children:r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Nome"}),r.jsx(X,{children:"Cliente"}),r.jsx(X,{children:"Responsvel"}),r.jsx(X,{children:"Contato"}),r.jsx(X,{children:"Localizao"})]})}),r.jsx(Tt,{children:e.length===0?r.jsx(Oe,{children:r.jsx(W,{colSpan:5,className:"text-center text-slate-500",children:"Nenhuma fazenda cadastrada"})}):e.map(l=>r.jsxs(Oe,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>o(`/fazendas/${l.id}`),children:[r.jsx(W,{className:"font-medium text-green-600",children:l.nome}),r.jsx(W,{children:l.cliente_nome||"-"}),r.jsx(W,{children:l.responsavel||"-"}),r.jsx(W,{children:l.contato_responsavel||"-"}),r.jsx(W,{children:l.localizacao||"-"})]},l.id))})]})})]})]})}const $3=Bl("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function et({className:e,variant:t,...a}){return r.jsx("div",{className:Ae($3({variant:t}),e),...a})}function q3(){const{id:e}=fn(),t=$a(),{toast:a}=fa(),[s,n]=u.useState(!0),[o,i]=u.useState(null),[l,c]=u.useState(""),[d,f]=u.useState([]),[h,p]=u.useState([]),[m,b]=u.useState([]),[y,_]=u.useState([]),[x,v]=u.useState({total_ultimos_60_dias:0,sem_diagnostico:0});u.useEffect(()=>{e&&g()},[e]);const g=async()=>{try{n(!0);const{data:S,error:N}=await z.from("fazendas").select("*").eq("id",e).single();if(N)throw N;i(S);const{data:R,error:T}=await z.from("clientes").select("nome").eq("id",S.cliente_id).single();if(T)throw T;c(R.nome);const{data:F,error:U}=await z.from("protocolos_sincronizacao").select("id, data_inicio, data_retirada, status").eq("fazenda_id",e).in("status",["PASSO1_FECHADO","PRIMEIRO_PASSO_FECHADO","SINCRONIZADO","FECHADO"]).order("data_inicio",{ascending:!1});if(U)throw U;f(F||[]);try{const{data:L,error:H}=await z.from("v_protocolo_receptoras_status").select("*").in("protocolo_id",(F==null?void 0:F.map(G=>G.id))||[]).eq("fase_ciclo","SINCRONIZADA");!H&&L&&p(L.map(G=>({brinco:G.brinco,fase_ciclo:G.fase_ciclo,status_efetivo:G.status_efetivo,motivo_efetivo:G.motivo_efetivo,data_te_prevista:G.data_te_prevista,data_limite_te:G.data_limite_te})))}catch{console.log("View v_protocolo_receptoras_status not available")}const{data:Z,error:ce}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",e);if(ce)throw ce;const k=(Z==null?void 0:Z.map(L=>L.receptora_id))||[],M=new Date;M.setDate(M.getDate()-60);const{data:A,error:q}=await z.from("transferencias_embrioes").select("id, receptora_id, data_te").in("receptora_id",k.length>0?k:["00000000-0000-0000-0000-000000000000"]).gte("data_te",M.toISOString().split("T")[0]);if(q)throw q;const I=(A==null?void 0:A.length)||0;if(A&&A.length>0){const L=A.map(te=>te.receptora_id),{data:H,error:G}=await z.from("diagnosticos_gestacao").select("receptora_id").in("receptora_id",L);if(!G){const te=new Set(H==null?void 0:H.map(be=>be.receptora_id)),Y=A.filter(be=>!te.has(be.receptora_id)).length;v({total_ultimos_60_dias:I,sem_diagnostico:Y})}}const{data:w,error:C}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",e);if(!C&&w){const L=w.map(H=>H.receptora_id);if(L.length>0){const{data:H,error:G}=await z.from("receptoras").select("id, identificacao, nome, status_reprodutivo").in("id",L).order("identificacao",{ascending:!0});G||b((H==null?void 0:H.map(te=>({receptora_id:te.id,brinco:te.identificacao,nome:te.nome,status_reprodutivo:te.status_reprodutivo})))||[])}else b([])}const{data:$,error:O}=await z.from("doadoras").select("*").eq("fazenda_id",e).order("registro",{ascending:!0});if(O)throw O;_($||[])}catch(S){a({title:"Erro ao carregar dados",description:S instanceof Error?S.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},E=()=>o?o.latitude&&o.longitude?`https://www.google.com/maps?q=${o.latitude},${o.longitude}`:o.localizacao?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(o.localizacao)}`:null:null,j=()=>o?o.latitude&&o.longitude?`https://waze.com/ul?ll=${o.latitude},${o.longitude}&navigate=yes`:o.localizacao?E():null:null;return s?r.jsx(Pt,{}):o?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>t("/fazendas"),children:r.jsx(us,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:o.nome}),r.jsxs("p",{className:"text-slate-600 mt-1",children:["Cliente: ",l]})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Informaes da Fazenda"})}),r.jsxs(ke,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Nome"}),r.jsx("p",{className:"text-base text-slate-900",children:o.nome})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Cliente"}),r.jsx("p",{className:"text-base text-slate-900",children:l})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Localizao"}),r.jsx("p",{className:"text-base text-slate-900",children:o.localizacao||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Coordenadas"}),r.jsx("p",{className:"text-base text-slate-900",children:o.latitude&&o.longitude?`${o.latitude}, ${o.longitude}`:"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Responsvel"}),r.jsx("p",{className:"text-base text-slate-900",children:o.responsavel||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Contato"}),r.jsx("p",{className:"text-base text-slate-900",children:o.contato_responsavel||"-"})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[E()&&r.jsxs(re,{variant:"outline",onClick:()=>window.open(E(),"_blank"),children:[r.jsx(Jv,{className:"w-4 h-4 mr-2"}),"Abrir no Google Maps"]}),j()&&r.jsxs(re,{variant:"outline",onClick:()=>window.open(j(),"_blank"),children:[r.jsx(ZE,{className:"w-4 h-4 mr-2"}),"Abrir no Waze"]})]})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Servios Ativos na Fazenda"})}),r.jsxs(ke,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[r.jsx(Cf,{className:"w-5 h-5"}),"Protocolos em Andamento (",d.length,")"]}),d.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"Nenhum protocolo ativo"}):r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"ID"}),r.jsx(X,{children:"Data Incio"}),r.jsx(X,{children:"Data Retirada"}),r.jsx(X,{children:"Status"})]})}),r.jsx(Tt,{children:d.map(S=>r.jsxs(Oe,{children:[r.jsx(W,{className:"font-mono text-xs",children:S.id.substring(0,8)}),r.jsx(W,{children:new Date(S.data_inicio).toLocaleDateString("pt-BR")}),r.jsx(W,{children:S.data_retirada?new Date(S.data_retirada).toLocaleDateString("pt-BR"):"-"}),r.jsx(W,{children:r.jsx(et,{variant:"default",children:S.status||"N/A"})})]},S.id))})]})]}),h.length>0&&r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-3",children:["Receptoras Sincronizadas Aguardando TE (",h.length,")"]}),r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Brinco"}),r.jsx(X,{children:"Fase"}),r.jsx(X,{children:"Status"}),r.jsx(X,{children:"Data TE Prevista"})]})}),r.jsx(Tt,{children:h.map((S,N)=>r.jsxs(Oe,{children:[r.jsx(W,{className:"font-medium",children:S.brinco}),r.jsx(W,{children:S.fase_ciclo||"-"}),r.jsx(W,{children:S.status_efetivo||"-"}),r.jsx(W,{children:S.data_te_prevista?new Date(S.data_te_prevista).toLocaleDateString("pt-BR"):"-"})]},N))})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Transferncias Recentes"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(Me,{children:r.jsxs(ke,{className:"pt-6",children:[r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:x.total_ultimos_60_dias}),r.jsx("p",{className:"text-sm text-slate-500",children:"ltimos 60 dias"})]})}),r.jsx(Me,{children:r.jsxs(ke,{className:"pt-6",children:[r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:x.sem_diagnostico}),r.jsx("p",{className:"text-sm text-slate-500",children:"Aguardando diagnstico"})]})})]})]})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsxs(Pe,{className:"flex items-center gap-2",children:[r.jsx(VE,{className:"w-5 h-5"}),"Receptoras da Fazenda (",m.length,")"]})}),r.jsx(ke,{children:m.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"Nenhuma receptora vinculada"}):r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Brinco"}),r.jsx(X,{children:"Nome"}),r.jsx(X,{children:"Status Reprodutivo"})]})}),r.jsx(Tt,{children:m.map(S=>r.jsxs(Oe,{children:[r.jsx(W,{className:"font-medium",children:S.brinco}),r.jsx(W,{children:S.nome||"-"}),r.jsx(W,{children:S.status_reprodutivo||"-"})]},S.receptora_id))})]})})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsxs(Pe,{className:"flex items-center gap-2",children:[r.jsx(qo,{className:"w-5 h-5"}),"Doadoras da Fazenda (",y.length,")"]})}),r.jsx(ke,{children:y.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"Nenhuma doadora cadastrada"}):r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Registro"}),r.jsx(X,{children:"Nome"}),r.jsx(X,{children:"Raa"}),r.jsx(X,{children:"GPTA"}),r.jsx(X,{children:"Controle Leiteiro"}),r.jsx(X,{children:"Beta Casena"})]})}),r.jsx(Tt,{children:y.map(S=>r.jsxs(Oe,{children:[r.jsx(W,{className:"font-medium",children:S.registro}),r.jsx(W,{children:S.nome||"-"}),r.jsx(W,{children:S.raca||"-"}),r.jsx(W,{children:S.gpta||"-"}),r.jsx(W,{children:S.controle_leiteiro||"-"}),r.jsx(W,{children:S.beta_caseina||"-"})]},S.id))})]})})]})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Fazenda no encontrada"}),r.jsx(re,{onClick:()=>t("/fazendas"),className:"mt-4",children:"Voltar para Fazendas"})]})}function I_(e,[t,a]){return Math.min(a,Math.max(t,e))}function Mx(e){const t=u.useRef({value:e,previous:e});return u.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var B3=[" ","Enter","ArrowUp","ArrowDown"],U3=[" ","Enter"],Xo="Select",[Ph,Ih,H3]=Vv(Xo),[Kl,pH]=As(Xo,[H3,Yl]),Lh=Yl(),[V3,uo]=Kl(Xo),[G3,Y3]=Kl(Xo),E1=e=>{const{__scopeSelect:t,children:a,open:s,defaultOpen:n,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:d,name:f,autoComplete:h,disabled:p,required:m,form:b}=e,y=Lh(t),[_,x]=u.useState(null),[v,g]=u.useState(null),[E,j]=u.useState(!1),S=Mh(d),[N,R]=Bs({prop:s,defaultProp:n??!1,onChange:o,caller:Xo}),[T,F]=Bs({prop:i,defaultProp:l,onChange:c,caller:Xo}),U=u.useRef(null),Z=_?b||!!_.closest("form"):!0,[ce,k]=u.useState(new Set),M=Array.from(ce).map(A=>A.props.value).join(";");return r.jsx(DS,{...y,children:r.jsxs(V3,{required:m,scope:t,trigger:_,onTriggerChange:x,valueNode:v,onValueNodeChange:g,valueNodeHasChildren:E,onValueNodeHasChildrenChange:j,contentId:es(),value:T,onValueChange:F,open:N,onOpenChange:R,dir:S,triggerPointerDownPosRef:U,disabled:p,children:[r.jsx(Ph.Provider,{scope:t,children:r.jsx(G3,{scope:e.__scopeSelect,onNativeOptionAdd:u.useCallback(A=>{k(q=>new Set(q).add(A))},[]),onNativeOptionRemove:u.useCallback(A=>{k(q=>{const I=new Set(q);return I.delete(A),I})},[]),children:a})}),Z?r.jsxs(W1,{"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:h,value:T,onChange:A=>F(A.target.value),disabled:p,form:b,children:[T===void 0?r.jsx("option",{value:""}):null,Array.from(ce)]},M):null]})})};E1.displayName=Xo;var S1="SelectTrigger",N1=u.forwardRef((e,t)=>{const{__scopeSelect:a,disabled:s=!1,...n}=e,o=Lh(a),i=uo(S1,a),l=i.disabled||s,c=Nt(t,i.onTriggerChange),d=Ih(a),f=u.useRef("touch"),[h,p,m]=Z1(y=>{const _=d().filter(g=>!g.disabled),x=_.find(g=>g.value===i.value),v=X1(_,y,x);v!==void 0&&i.onValueChange(v.value)}),b=y=>{l||(i.onOpenChange(!0),m()),y&&(i.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return r.jsx(hh,{asChild:!0,...o,children:r.jsx(Ue.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Q1(i.value)?"":void 0,...n,ref:c,onClick:Be(n.onClick,y=>{y.currentTarget.focus(),f.current!=="mouse"&&b(y)}),onPointerDown:Be(n.onPointerDown,y=>{f.current=y.pointerType;const _=y.target;_.hasPointerCapture(y.pointerId)&&_.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(b(y),y.preventDefault())}),onKeyDown:Be(n.onKeyDown,y=>{const _=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&p(y.key),!(_&&y.key===" ")&&B3.includes(y.key)&&(b(),y.preventDefault())})})})});N1.displayName=S1;var C1="SelectValue",A1=u.forwardRef((e,t)=>{const{__scopeSelect:a,className:s,style:n,children:o,placeholder:i="",...l}=e,c=uo(C1,a),{onValueNodeHasChildrenChange:d}=c,f=o!==void 0,h=Nt(t,c.onValueNodeChange);return Fa(()=>{d(f)},[d,f]),r.jsx(Ue.span,{...l,ref:h,style:{pointerEvents:"none"},children:Q1(c.value)?r.jsx(r.Fragment,{children:i}):o})});A1.displayName=C1;var W3="SelectIcon",D1=u.forwardRef((e,t)=>{const{__scopeSelect:a,children:s,...n}=e;return r.jsx(Ue.span,{"aria-hidden":!0,...n,ref:t,children:s||""})});D1.displayName=W3;var Q3="SelectPortal",T1=e=>r.jsx(Fd,{asChild:!0,...e});T1.displayName=Q3;var Ko="SelectContent",O1=u.forwardRef((e,t)=>{const a=uo(Ko,e.__scopeSelect),[s,n]=u.useState();if(Fa(()=>{n(new DocumentFragment)},[]),!a.open){const o=s;return o?ti.createPortal(r.jsx(R1,{scope:e.__scopeSelect,children:r.jsx(Ph.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),o):null}return r.jsx(M1,{...e,ref:t})});O1.displayName=Ko;var Ws=10,[R1,fo]=Kl(Ko),Z3="SelectContentImpl",X3=Wo("SelectContent.RemoveScroll"),M1=u.forwardRef((e,t)=>{const{__scopeSelect:a,position:s="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:b,hideWhenDetached:y,avoidCollisions:_,...x}=e,v=uo(Ko,a),[g,E]=u.useState(null),[j,S]=u.useState(null),N=Nt(t,Y=>E(Y)),[R,T]=u.useState(null),[F,U]=u.useState(null),Z=Ih(a),[ce,k]=u.useState(!1),M=u.useRef(!1);u.useEffect(()=>{if(g)return Cx(g)},[g]),Nx();const A=u.useCallback(Y=>{const[be,...de]=Z().map(B=>B.ref.current),[V]=de.slice(-1),le=document.activeElement;for(const B of Y)if(B===le||(B==null||B.scrollIntoView({block:"nearest"}),B===be&&j&&(j.scrollTop=0),B===V&&j&&(j.scrollTop=j.scrollHeight),B==null||B.focus(),document.activeElement!==le))return},[Z,j]),q=u.useCallback(()=>A([R,g]),[A,R,g]);u.useEffect(()=>{ce&&q()},[ce,q]);const{onOpenChange:I,triggerPointerDownPosRef:w}=v;u.useEffect(()=>{if(g){let Y={x:0,y:0};const be=V=>{var le,B;Y={x:Math.abs(Math.round(V.pageX)-(((le=w.current)==null?void 0:le.x)??0)),y:Math.abs(Math.round(V.pageY)-(((B=w.current)==null?void 0:B.y)??0))}},de=V=>{Y.x<=10&&Y.y<=10?V.preventDefault():g.contains(V.target)||I(!1),document.removeEventListener("pointermove",be),w.current=null};return w.current!==null&&(document.addEventListener("pointermove",be),document.addEventListener("pointerup",de,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",be),document.removeEventListener("pointerup",de,{capture:!0})}}},[g,I,w]),u.useEffect(()=>{const Y=()=>I(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[I]);const[C,$]=Z1(Y=>{const be=Z().filter(le=>!le.disabled),de=be.find(le=>le.ref.current===document.activeElement),V=X1(be,Y,de);V&&setTimeout(()=>V.ref.current.focus())}),O=u.useCallback((Y,be,de)=>{const V=!M.current&&!de;(v.value!==void 0&&v.value===be||V)&&(T(Y),V&&(M.current=!0))},[v.value]),L=u.useCallback(()=>g==null?void 0:g.focus(),[g]),H=u.useCallback((Y,be,de)=>{const V=!M.current&&!de;(v.value!==void 0&&v.value===be||V)&&U(Y)},[v.value]),G=s==="popper"?kg:k1,te=G===kg?{side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:b,hideWhenDetached:y,avoidCollisions:_}:{};return r.jsx(R1,{scope:a,content:g,viewport:j,onViewportChange:S,itemRefCallback:O,selectedItem:R,onItemLeave:L,itemTextRefCallback:H,focusSelectedItem:q,selectedItemText:F,position:s,isPositioned:ce,searchRef:C,children:r.jsx(Ah,{as:X3,allowPinchZoom:!0,children:r.jsx(Nh,{asChild:!0,trapped:v.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:Be(n,Y=>{var be;(be=v.trigger)==null||be.focus({preventScroll:!0}),Y.preventDefault()}),children:r.jsx(ql,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:r.jsx(G,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:Y=>Y.preventDefault(),...x,...te,onPlaced:()=>k(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Be(x.onKeyDown,Y=>{const be=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!be&&Y.key.length===1&&$(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let V=Z().filter(le=>!le.disabled).map(le=>le.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(V=V.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const le=Y.target,B=V.indexOf(le);V=V.slice(B+1)}setTimeout(()=>A(V)),Y.preventDefault()}})})})})})})});M1.displayName=Z3;var K3="SelectItemAlignedPosition",k1=u.forwardRef((e,t)=>{const{__scopeSelect:a,onPlaced:s,...n}=e,o=uo(Ko,a),i=fo(Ko,a),[l,c]=u.useState(null),[d,f]=u.useState(null),h=Nt(t,N=>f(N)),p=Ih(a),m=u.useRef(!1),b=u.useRef(!0),{viewport:y,selectedItem:_,selectedItemText:x,focusSelectedItem:v}=i,g=u.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&y&&_&&x){const N=o.trigger.getBoundingClientRect(),R=d.getBoundingClientRect(),T=o.valueNode.getBoundingClientRect(),F=x.getBoundingClientRect();if(o.dir!=="rtl"){const le=F.left-R.left,B=T.left-le,ie=N.left-B,xe=N.width+ie,pe=Math.max(xe,R.width),Ce=window.innerWidth-Ws,De=I_(B,[Ws,Math.max(Ws,Ce-pe)]);l.style.minWidth=xe+"px",l.style.left=De+"px"}else{const le=R.right-F.right,B=window.innerWidth-T.right-le,ie=window.innerWidth-N.right-B,xe=N.width+ie,pe=Math.max(xe,R.width),Ce=window.innerWidth-Ws,De=I_(B,[Ws,Math.max(Ws,Ce-pe)]);l.style.minWidth=xe+"px",l.style.right=De+"px"}const U=p(),Z=window.innerHeight-Ws*2,ce=y.scrollHeight,k=window.getComputedStyle(d),M=parseInt(k.borderTopWidth,10),A=parseInt(k.paddingTop,10),q=parseInt(k.borderBottomWidth,10),I=parseInt(k.paddingBottom,10),w=M+A+ce+I+q,C=Math.min(_.offsetHeight*5,w),$=window.getComputedStyle(y),O=parseInt($.paddingTop,10),L=parseInt($.paddingBottom,10),H=N.top+N.height/2-Ws,G=Z-H,te=_.offsetHeight/2,Y=_.offsetTop+te,be=M+A+Y,de=w-be;if(be<=H){const le=U.length>0&&_===U[U.length-1].ref.current;l.style.bottom="0px";const B=d.clientHeight-y.offsetTop-y.offsetHeight,ie=Math.max(G,te+(le?L:0)+B+q),xe=be+ie;l.style.height=xe+"px"}else{const le=U.length>0&&_===U[0].ref.current;l.style.top="0px";const ie=Math.max(H,M+y.offsetTop+(le?O:0)+te)+de;l.style.height=ie+"px",y.scrollTop=be-H+y.offsetTop}l.style.margin=`${Ws}px 0`,l.style.minHeight=C+"px",l.style.maxHeight=Z+"px",s==null||s(),requestAnimationFrame(()=>m.current=!0)}},[p,o.trigger,o.valueNode,l,d,y,_,x,o.dir,s]);Fa(()=>g(),[g]);const[E,j]=u.useState();Fa(()=>{d&&j(window.getComputedStyle(d).zIndex)},[d]);const S=u.useCallback(N=>{N&&b.current===!0&&(g(),v==null||v(),b.current=!1)},[g,v]);return r.jsx(e5,{scope:a,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:r.jsx(Ue.div,{...n,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});k1.displayName=K3;var J3="SelectPopperPosition",kg=u.forwardRef((e,t)=>{const{__scopeSelect:a,align:s="start",collisionPadding:n=Ws,...o}=e,i=Lh(a);return r.jsx(hx,{...i,...o,ref:t,align:s,collisionPadding:n,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});kg.displayName=J3;var[e5,kx]=Kl(Ko,{}),zg="SelectViewport",z1=u.forwardRef((e,t)=>{const{__scopeSelect:a,nonce:s,...n}=e,o=fo(zg,a),i=kx(zg,a),l=Nt(t,o.onViewportChange),c=u.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(Ph.Slot,{scope:a,children:r.jsx(Ue.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:Be(n.onScroll,d=>{const f=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=i;if(p!=null&&p.current&&h){const m=Math.abs(c.current-f.scrollTop);if(m>0){const b=window.innerHeight-Ws*2,y=parseFloat(h.style.minHeight),_=parseFloat(h.style.height),x=Math.max(y,_);if(x<b){const v=x+m,g=Math.min(b,v),E=v-g;h.style.height=g+"px",h.style.bottom==="0px"&&(f.scrollTop=E>0?E:0,h.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});z1.displayName=zg;var P1="SelectGroup",[t5,a5]=Kl(P1),s5=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e,n=es();return r.jsx(t5,{scope:a,id:n,children:r.jsx(Ue.div,{role:"group","aria-labelledby":n,...s,ref:t})})});s5.displayName=P1;var I1="SelectLabel",L1=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e,n=a5(I1,a);return r.jsx(Ue.div,{id:n.id,...s,ref:t})});L1.displayName=I1;var Ff="SelectItem",[r5,F1]=Kl(Ff),$1=u.forwardRef((e,t)=>{const{__scopeSelect:a,value:s,disabled:n=!1,textValue:o,...i}=e,l=uo(Ff,a),c=fo(Ff,a),d=l.value===s,[f,h]=u.useState(o??""),[p,m]=u.useState(!1),b=Nt(t,v=>{var g;return(g=c.itemRefCallback)==null?void 0:g.call(c,v,s,n)}),y=es(),_=u.useRef("touch"),x=()=>{n||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(r5,{scope:a,value:s,disabled:n,textId:y,isSelected:d,onItemTextChange:u.useCallback(v=>{h(g=>g||((v==null?void 0:v.textContent)??"").trim())},[]),children:r.jsx(Ph.ItemSlot,{scope:a,value:s,disabled:n,textValue:f,children:r.jsx(Ue.div,{role:"option","aria-labelledby":y,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...i,ref:b,onFocus:Be(i.onFocus,()=>m(!0)),onBlur:Be(i.onBlur,()=>m(!1)),onClick:Be(i.onClick,()=>{_.current!=="mouse"&&x()}),onPointerUp:Be(i.onPointerUp,()=>{_.current==="mouse"&&x()}),onPointerDown:Be(i.onPointerDown,v=>{_.current=v.pointerType}),onPointerMove:Be(i.onPointerMove,v=>{var g;_.current=v.pointerType,n?(g=c.onItemLeave)==null||g.call(c):_.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Be(i.onPointerLeave,v=>{var g;v.currentTarget===document.activeElement&&((g=c.onItemLeave)==null||g.call(c))}),onKeyDown:Be(i.onKeyDown,v=>{var E;((E=c.searchRef)==null?void 0:E.current)!==""&&v.key===" "||(U3.includes(v.key)&&x(),v.key===" "&&v.preventDefault())})})})})});$1.displayName=Ff;var jc="SelectItemText",q1=u.forwardRef((e,t)=>{const{__scopeSelect:a,className:s,style:n,...o}=e,i=uo(jc,a),l=fo(jc,a),c=F1(jc,a),d=Y3(jc,a),[f,h]=u.useState(null),p=Nt(t,x=>h(x),c.onItemTextChange,x=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,x,c.value,c.disabled)}),m=f==null?void 0:f.textContent,b=u.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:y,onNativeOptionRemove:_}=d;return Fa(()=>(y(b),()=>_(b)),[y,_,b]),r.jsxs(r.Fragment,{children:[r.jsx(Ue.span,{id:c.textId,...o,ref:p}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?ti.createPortal(o.children,i.valueNode):null]})});q1.displayName=jc;var B1="SelectItemIndicator",U1=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e;return F1(B1,a).isSelected?r.jsx(Ue.span,{"aria-hidden":!0,...s,ref:t}):null});U1.displayName=B1;var Pg="SelectScrollUpButton",H1=u.forwardRef((e,t)=>{const a=fo(Pg,e.__scopeSelect),s=kx(Pg,e.__scopeSelect),[n,o]=u.useState(!1),i=Nt(t,s.onScrollButtonChange);return Fa(()=>{if(a.viewport&&a.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=a.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[a.viewport,a.isPositioned]),n?r.jsx(G1,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=a;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});H1.displayName=Pg;var Ig="SelectScrollDownButton",V1=u.forwardRef((e,t)=>{const a=fo(Ig,e.__scopeSelect),s=kx(Ig,e.__scopeSelect),[n,o]=u.useState(!1),i=Nt(t,s.onScrollButtonChange);return Fa(()=>{if(a.viewport&&a.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<d;o(f)};const c=a.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[a.viewport,a.isPositioned]),n?r.jsx(G1,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=a;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});V1.displayName=Ig;var G1=u.forwardRef((e,t)=>{const{__scopeSelect:a,onAutoScroll:s,...n}=e,o=fo("SelectScrollButton",a),i=u.useRef(null),l=Ih(a),c=u.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return u.useEffect(()=>()=>c(),[c]),Fa(()=>{var f;const d=l().find(h=>h.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),r.jsx(Ue.div,{"aria-hidden":!0,...n,ref:t,style:{flexShrink:0,...n.style},onPointerDown:Be(n.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(s,50))}),onPointerMove:Be(n.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),i.current===null&&(i.current=window.setInterval(s,50))}),onPointerLeave:Be(n.onPointerLeave,()=>{c()})})}),n5="SelectSeparator",Y1=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e;return r.jsx(Ue.div,{"aria-hidden":!0,...s,ref:t})});Y1.displayName=n5;var Lg="SelectArrow",o5=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e,n=Lh(a),o=uo(Lg,a),i=fo(Lg,a);return o.open&&i.position==="popper"?r.jsx(mx,{...n,...s,ref:t}):null});o5.displayName=Lg;var i5="SelectBubbleInput",W1=u.forwardRef(({__scopeSelect:e,value:t,...a},s)=>{const n=u.useRef(null),o=Nt(s,n),i=Mx(t);return u.useEffect(()=>{const l=n.current;if(!l)return;const c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&f){const h=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(h)}},[i,t]),r.jsx(Ue.select,{...a,style:{...wE,...a.style},ref:o,defaultValue:t})});W1.displayName=i5;function Q1(e){return e===""||e===void 0}function Z1(e){const t=qs(e),a=u.useRef(""),s=u.useRef(0),n=u.useCallback(i=>{const l=a.current+i;t(l),function c(d){a.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=u.useCallback(()=>{a.current="",window.clearTimeout(s.current)},[]);return u.useEffect(()=>()=>window.clearTimeout(s.current),[]),[a,n,o]}function X1(e,t,a){const n=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=a?e.indexOf(a):-1;let i=l5(e,Math.max(o,0));n.length===1&&(i=i.filter(d=>d!==a));const c=i.find(d=>d.textValue.toLowerCase().startsWith(n.toLowerCase()));return c!==a?c:void 0}function l5(e,t){return e.map((a,s)=>e[(t+s)%e.length])}var c5=E1,K1=N1,d5=A1,u5=D1,f5=T1,J1=O1,h5=z1,eC=L1,tC=$1,m5=q1,p5=U1,aC=H1,sC=V1,rC=Y1;const _t=c5,bt=d5,pt=u.forwardRef(({className:e,children:t,...a},s)=>r.jsxs(K1,{ref:s,className:Ae("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,r.jsx(u5,{asChild:!0,children:r.jsx(Zv,{className:"h-4 w-4 opacity-50"})})]}));pt.displayName=K1.displayName;const nC=u.forwardRef(({className:e,...t},a)=>r.jsx(aC,{ref:a,className:Ae("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(WE,{className:"h-4 w-4"})}));nC.displayName=aC.displayName;const oC=u.forwardRef(({className:e,...t},a)=>r.jsx(sC,{ref:a,className:Ae("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(Zv,{className:"h-4 w-4"})}));oC.displayName=sC.displayName;const gt=u.forwardRef(({className:e,children:t,position:a="popper",...s},n)=>r.jsx(f5,{children:r.jsxs(J1,{ref:n,className:Ae("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...s,children:[r.jsx(nC,{}),r.jsx(h5,{className:Ae("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(oC,{})]})}));gt.displayName=J1.displayName;const g5=u.forwardRef(({className:e,...t},a)=>r.jsx(eC,{ref:a,className:Ae("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));g5.displayName=eC.displayName;const Ie=u.forwardRef(({className:e,children:t,...a},s)=>r.jsxs(tC,{ref:s,className:Ae("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(p5,{children:r.jsx(nd,{className:"h-4 w-4"})})}),r.jsx(m5,{children:t})]}));Ie.displayName=tC.displayName;const v5=u.forwardRef(({className:e,...t},a)=>r.jsx(rC,{ref:a,className:Ae("-mx-1 my-1 h-px bg-muted",e),...t}));v5.displayName=rC.displayName;function x5({doadoraId:e,doadoraNome:t,open:a,onClose:s}){const[n,o]=u.useState([]),[i,l]=u.useState(!1),{toast:c}=fa();u.useEffect(()=>{a&&e&&d()},[a,e]);const d=async()=>{try{l(!0);const{data:f,error:h}=await z.from("aspiracoes_doadoras").select("*").eq("doadora_id",e).order("data_aspiracao",{ascending:!1});if(h)throw h;o(f||[])}catch(f){c({title:"Erro ao carregar histrico",description:f instanceof Error?f.message:"Erro desconhecido",variant:"destructive"})}finally{l(!1)}};return r.jsx(da,{open:a,onOpenChange:s,children:r.jsxs(sa,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(ra,{children:[r.jsx(na,{children:"Histrico de Aspiraes"}),r.jsx(ua,{children:t?`Aspiraes da doadora: ${t}`:"Histrico completo de aspiraes"})]}),i?r.jsx("div",{className:"py-8",children:r.jsx(Pt,{})}):r.jsx("div",{className:"mt-4",children:n.length===0?r.jsx("p",{className:"text-center text-slate-500 py-8",children:"Nenhuma aspirao registrada para esta doadora"}):r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Data"}),r.jsx(X,{children:"Quantidade de Ocitos"}),r.jsx(X,{children:"Veterinrio"}),r.jsx(X,{children:"Tcnico"})]})}),r.jsx(Tt,{children:n.map(f=>r.jsxs(Oe,{children:[r.jsx(W,{children:Lt(f.data_aspiracao)}),r.jsx(W,{className:"font-medium",children:f.total_oocitos??"-"}),r.jsx(W,{children:f.veterinario_responsavel||"-"}),r.jsx(W,{children:f.tecnico_responsavel||"-"})]},f.id))})]})})]})})}function y5(){var q,I;const e=$a(),[t,a]=u.useState([]),[s,n]=u.useState([]),[o,i]=u.useState(null),[l,c]=u.useState([]),[d,f]=u.useState(""),[h,p]=u.useState(""),[m,b]=u.useState(!0),[y,_]=u.useState(!1),[x,v]=u.useState(!1),{toast:g}=fa(),[E,j]=u.useState({registro:"",raca:"",racaCustom:""}),S=["Holandesa","Jersey","Gir","Girolando"],[N,R]=u.useState("");u.useEffect(()=>{F()},[]),u.useEffect(()=>{d?U():(a([]),n([]))},[d]),u.useEffect(()=>{T()},[h,t]);const T=()=>{if(!h.trim()){n(t);return}const w=h.toLowerCase(),C=t.filter($=>{var O,L,H;return((O=$.nome)==null?void 0:O.toLowerCase().includes(w))||((L=$.registro)==null?void 0:L.toLowerCase().includes(w))||((H=$.raca)==null?void 0:H.toLowerCase().includes(w))});n(C)},F=async()=>{try{b(!0);const{data:w,error:C}=await z.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(C)throw C;c(w||[])}catch(w){g({title:"Erro ao carregar fazendas",description:w instanceof Error?w.message:"Erro desconhecido",variant:"destructive"})}finally{b(!1)}},U=async()=>{try{b(!0);const{data:w,error:C}=await z.from("doadoras").select("*").eq("fazenda_id",d).order("created_at",{ascending:!1});if(C)throw C;const $=await Promise.all((w||[]).map(async O=>{const{data:L,error:H}=await z.from("aspiracoes_doadoras").select("total_oocitos, data_aspiracao").eq("doadora_id",O.id).order("data_aspiracao",{ascending:!1}).limit(1).maybeSingle();return H||!L?{...O,ultima_aspiracao_total_oocitos:void 0,ultima_aspiracao_data:void 0}:{...O,ultima_aspiracao_total_oocitos:L.total_oocitos,ultima_aspiracao_data:L.data_aspiracao}}));a($),n($)}catch(w){g({title:"Erro ao carregar doadoras",description:w instanceof Error?w.message:"Erro desconhecido",variant:"destructive"})}finally{b(!1)}},Z=w=>{if(!w)return"-";switch(w){case"1_estrela":return r.jsx("div",{className:"flex items-center gap-1",children:r.jsx(ui,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})});case"2_estrelas":return r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ui,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),r.jsx(ui,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})]});case"3_estrelas":return r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ui,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),r.jsx(ui,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),r.jsx(ui,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})]});case"diamante":return r.jsx("div",{className:"flex items-center gap-1",children:r.jsx(HR,{className:"w-4 h-4 fill-blue-500 text-blue-500"})});default:return"-"}},ce=w=>{if(w.raca==="Gir"){const C=[];return w.gpta&&C.push(`GPTA: ${w.gpta}`),w.controle_leiteiro&&C.push(`Controle Leiteiro: ${w.controle_leiteiro}`),w.beta_caseina&&C.push(`Beta Casena: ${w.beta_caseina}`),w.link_abcz&&C.push("Link ABCZ"),C.length>0?C.join(", "):null}return null},k=()=>{j({registro:"",raca:"",racaCustom:""}),R("")},M=async w=>{if(w.preventDefault(),!d){g({title:"Erro de validao",description:"Selecione a fazenda primeiro",variant:"destructive"});return}if(!E.registro.trim()){g({title:"Erro de validao",description:"Registro  obrigatrio",variant:"destructive"});return}if(!(N==="Outra"?E.racaCustom.trim():E.raca.trim())){g({title:"Erro de validao",description:"Raa  obrigatria",variant:"destructive"});return}try{v(!0);const $=N==="Outra"?E.racaCustom.trim():E.raca.trim(),O={fazenda_id:d,registro:E.registro.trim(),raca:$},{data:L,error:H}=await z.from("doadoras").insert([O]).select().single();if(H)throw H;g({title:"Doadora criada",description:"Doadora criada com sucesso"}),_(!1),k(),U(),L!=null&&L.id&&e(`/doadoras/${L.id}`)}catch($){const O=$ instanceof Error?$.message:"Erro desconhecido";g({title:"Erro ao criar doadora",description:O.includes("RLS")||O.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":O,variant:"destructive"})}finally{v(!1)}},A=w=>{_(w),w||k()};return m&&l.length===0?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Doadoras"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar doadoras do sistema"})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Selecione a Fazenda"})}),r.jsx(ke,{children:r.jsxs(_t,{value:d,onValueChange:f,children:[r.jsx(pt,{className:"w-full",children:r.jsx(bt,{placeholder:"Selecione uma fazenda para visualizar doadoras"})}),r.jsx(gt,{children:l.map(w=>r.jsx(Ie,{value:w.id,children:w.nome},w.id))})]})})]}),d?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-4 flex-1",children:r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Ul,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),r.jsx(Ee,{placeholder:"Buscar por nome ou registro...",value:h,onChange:w=>p(w.target.value),className:"pl-10"})]})}),r.jsxs(da,{open:y,onOpenChange:A,children:[r.jsx(ln,{asChild:!0,children:r.jsxs(re,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ar,{className:"w-4 h-4 mr-2"}),"Nova Doadora"]})}),r.jsxs(sa,{className:"max-w-md",children:[r.jsxs(ra,{children:[r.jsx(na,{children:"Criar Nova Doadora"}),r.jsx(ua,{children:"Preencha os campos bsicos. As informaes detalhadas podem ser preenchidas aps a criao."})]}),r.jsxs("form",{onSubmit:M,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"registro",children:"Registro *"}),r.jsx(Ee,{id:"registro",value:E.registro,onChange:w=>j({...E,registro:w.target.value}),placeholder:"Registro da doadora",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"raca",children:"Raa *"}),r.jsxs(_t,{value:N,onValueChange:w=>{R(w),j(w==="Outra"?{...E,raca:"",racaCustom:""}:{...E,raca:w,racaCustom:""})},children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione a raa"})}),r.jsxs(gt,{children:[S.map(w=>r.jsx(Ie,{value:w,children:w},w)),r.jsx(Ie,{value:"Outra",children:"Outra"})]})]}),N==="Outra"&&r.jsx(Ee,{id:"raca_custom",value:E.racaCustom,onChange:w=>j({...E,racaCustom:w.target.value,raca:w.target.value}),placeholder:"Digite a raa",className:"mt-2",required:!0})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(re,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:x,children:x?"Salvando...":"Criar Doadora"}),r.jsx(re,{type:"button",variant:"outline",onClick:()=>A(!1),disabled:x,children:"Cancelar"})]})]})]})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Lista de Doadoras"})}),r.jsx(ke,{children:m?r.jsx("div",{className:"py-8",children:r.jsx(Pt,{})}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Registro"}),r.jsx(X,{children:"Nome"}),r.jsx(X,{children:"ltima Aspirao"}),r.jsx(X,{children:"Ocitos"}),r.jsx(X,{children:"Estado"}),r.jsx(X,{children:"Raa (Campos Especiais)"}),r.jsx(X,{children:"Classificao"}),r.jsx(X,{className:"text-right",children:"Aes"})]})}),r.jsx(Tt,{children:s.length===0?r.jsx(Oe,{children:r.jsx(W,{colSpan:8,className:"text-center text-slate-500",children:h?"Nenhuma doadora encontrada":"Nenhuma doadora cadastrada nesta fazenda"})}):s.map(w=>{const C=ce(w);return r.jsxs(Oe,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>e(`/doadoras/${w.id}`),children:[r.jsx(W,{className:"font-medium",children:w.registro}),r.jsx(W,{children:w.nome||"-"}),r.jsx(W,{children:w.ultima_aspiracao_data?Lt(w.ultima_aspiracao_data):"-"}),r.jsx(W,{children:w.ultima_aspiracao_total_oocitos??"-"}),r.jsx(W,{children:r.jsx(et,{variant:w.disponivel_aspiracao?"default":"secondary",children:w.disponivel_aspiracao?"Disponvel":"Indisponvel"})}),r.jsx(W,{children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:w.raca||"-"}),C&&r.jsx("span",{className:"text-xs text-slate-500",children:C})]})}),r.jsx(W,{children:Z(w.classificacao_genetica)}),r.jsx(W,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:$=>{$.stopPropagation(),i(w.id)},title:"Ver histrico de aspiraes",children:r.jsx(Kv,{className:"w-4 h-4"})}),r.jsx(re,{variant:"ghost",size:"sm",onClick:$=>{$.stopPropagation(),e(`/doadoras/${w.id}`)},title:"Editar doadora",children:r.jsx(YR,{className:"w-4 h-4"})})]})})]},w.id)})})]})})})]}),o&&r.jsx(x5,{doadoraId:o,doadoraNome:((q=s.find(w=>w.id===o))==null?void 0:q.nome)||((I=s.find(w=>w.id===o))==null?void 0:I.registro),open:!!o,onClose:()=>i(null)})]}):r.jsx(Me,{children:r.jsx(ke,{className:"py-12 text-center",children:r.jsx("p",{className:"text-slate-500",children:"Selecione uma fazenda para visualizar e gerenciar doadoras"})})})]})}var Fh="Switch",[_5,gH]=As(Fh),[b5,w5]=_5(Fh),iC=u.forwardRef((e,t)=>{const{__scopeSwitch:a,name:s,checked:n,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:d,form:f,...h}=e,[p,m]=u.useState(null),b=Nt(t,g=>m(g)),y=u.useRef(!1),_=p?f||!!p.closest("form"):!0,[x,v]=Bs({prop:n,defaultProp:o??!1,onChange:d,caller:Fh});return r.jsxs(b5,{scope:a,checked:x,disabled:l,children:[r.jsx(Ue.button,{type:"button",role:"switch","aria-checked":x,"aria-required":i,"data-state":uC(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:b,onClick:Be(e.onClick,g=>{v(E=>!E),_&&(y.current=g.isPropagationStopped(),y.current||g.stopPropagation())})}),_&&r.jsx(dC,{control:p,bubbles:!y.current,name:s,value:c,checked:x,required:i,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});iC.displayName=Fh;var lC="SwitchThumb",cC=u.forwardRef((e,t)=>{const{__scopeSwitch:a,...s}=e,n=w5(lC,a);return r.jsx(Ue.span,{"data-state":uC(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:t})});cC.displayName=lC;var j5="SwitchBubbleInput",dC=u.forwardRef(({__scopeSwitch:e,control:t,checked:a,bubbles:s=!0,...n},o)=>{const i=u.useRef(null),l=Nt(i,o),c=Mx(a),d=dx(t);return u.useEffect(()=>{const f=i.current;if(!f)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==a&&m){const b=new Event("click",{bubbles:s});m.call(f,a),f.dispatchEvent(b)}},[c,a,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:l,style:{...n.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});dC.displayName=j5;function uC(e){return e?"checked":"unchecked"}var fC=iC,E5=cC;const zx=u.forwardRef(({className:e,...t},a)=>r.jsx(fC,{className:Ae("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:a,children:r.jsx(E5,{className:Ae("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));zx.displayName=fC.displayName;function S5({value:e,onChange:t,doadoraNome:a,doadoraRegistro:s}){const n=(o,i,l)=>{t({...e,[o]:{...e[o],[i]:l}})};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Genealogia"}),r.jsx("div",{className:"bg-slate-50 rounded-lg p-6 border border-slate-200",children:r.jsxs("div",{className:"flex flex-col items-center gap-6",children:[r.jsx("div",{className:"flex flex-col items-center",children:r.jsxs("div",{className:"bg-white border-2 border-slate-400 rounded-lg p-4 shadow-sm min-w-[200px] text-center",children:[r.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-1",children:a||"Doadora"}),r.jsx("div",{className:"text-xs text-slate-600",children:s||"REGISTRO"})]})}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-3 shadow-sm min-w-[180px]",children:[r.jsx(ae,{className:"text-xs text-blue-700 font-medium mb-2 block",children:"Pai"}),r.jsx(Ee,{placeholder:"Nome",value:e.pai.nome,onChange:o=>n("pai","nome",o.target.value),className:"mb-2 text-sm"}),r.jsx(Ee,{placeholder:"Registro",value:e.pai.registro,onChange:o=>n("pai","registro",o.target.value),className:"text-xs"})]}),r.jsxs("div",{className:"bg-white border-2 border-red-500 rounded-lg p-3 shadow-sm min-w-[180px]",children:[r.jsx(ae,{className:"text-xs text-red-700 font-medium mb-2 block",children:"Me"}),r.jsx(Ee,{placeholder:"Nome",value:e.mae.nome,onChange:o=>n("mae","nome",o.target.value),className:"mb-2 text-sm"}),r.jsx(Ee,{placeholder:"Registro",value:e.mae.registro,onChange:o=>n("mae","registro",o.target.value),className:"text-xs"})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-3 shadow-sm min-w-[160px]",children:[r.jsx(ae,{className:"text-xs text-blue-700 font-medium mb-2 block",children:"Av Paterno"}),r.jsx(Ee,{placeholder:"Nome",value:e.pai_pai.nome,onChange:o=>n("pai_pai","nome",o.target.value),className:"mb-2 text-xs"}),r.jsx(Ee,{placeholder:"Registro",value:e.pai_pai.registro,onChange:o=>n("pai_pai","registro",o.target.value),className:"text-xs"})]}),r.jsxs("div",{className:"bg-white border-2 border-red-500 rounded-lg p-3 shadow-sm min-w-[160px]",children:[r.jsx(ae,{className:"text-xs text-red-700 font-medium mb-2 block",children:"Av Paterna"}),r.jsx(Ee,{placeholder:"Nome",value:e.pai_mae.nome,onChange:o=>n("pai_mae","nome",o.target.value),className:"mb-2 text-xs"}),r.jsx(Ee,{placeholder:"Registro",value:e.pai_mae.registro,onChange:o=>n("pai_mae","registro",o.target.value),className:"text-xs"})]}),r.jsxs("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-3 shadow-sm min-w-[160px]",children:[r.jsx(ae,{className:"text-xs text-blue-700 font-medium mb-2 block",children:"Av Materno"}),r.jsx(Ee,{placeholder:"Nome",value:e.mae_pai.nome,onChange:o=>n("mae_pai","nome",o.target.value),className:"mb-2 text-xs"}),r.jsx(Ee,{placeholder:"Registro",value:e.mae_pai.registro,onChange:o=>n("mae_pai","registro",o.target.value),className:"text-xs"})]}),r.jsxs("div",{className:"bg-white border-2 border-red-500 rounded-lg p-3 shadow-sm min-w-[160px]",children:[r.jsx(ae,{className:"text-xs text-red-700 font-medium mb-2 block",children:"Av Materna"}),r.jsx(Ee,{placeholder:"Nome",value:e.mae_mae.nome,onChange:o=>n("mae_mae","nome",o.target.value),className:"mb-2 text-xs"}),r.jsx(Ee,{placeholder:"Registro",value:e.mae_mae.registro,onChange:o=>n("mae_mae","registro",o.target.value),className:"text-xs"})]})]})]})})]})}function N5(){const{id:e}=fn(),t=$a(),{toast:a}=fa(),[s,n]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(null),h=["Holandesa","Jersey","Gir","Girolando"],[p,m]=u.useState(""),[b,y]=u.useState({registro:"",nome:"",raca:"",racaCustom:"",genealogia_texto:"",foto_url:"",gpta:"",controle_leiteiro:"",beta_caseina:"",link_abcz:"",disponivel_aspiracao:!0,classificacao_genetica:""}),[_,x]=u.useState({pai:{nome:"",registro:""},mae:{nome:"",registro:""},pai_pai:{nome:"",registro:""},pai_mae:{nome:"",registro:""},mae_pai:{nome:"",registro:""},mae_mae:{nome:"",registro:""}});u.useEffect(()=>{e&&v()},[e]);const v=async()=>{var E,j;try{n(!0);const{data:S,error:N}=await z.from("doadoras").select("*").eq("id",e).single();if(N)throw N;if(c(S),S.fazenda_id){const{data:Z,error:ce}=await z.from("fazendas").select("*").eq("id",S.fazenda_id).single();if(ce)throw ce;f(Z)}const R=S.raca||"",T=h.includes(R);m(T?R:"Outra");let F={pai:{nome:S.pai_nome||"",registro:S.pai_registro||""},mae:{nome:S.mae_nome||"",registro:S.mae_registro||""},pai_pai:{nome:"",registro:""},pai_mae:{nome:"",registro:""},mae_pai:{nome:"",registro:""},mae_mae:{nome:"",registro:""}},U=S.genealogia_texto||"";if(U.includes("[GENEALOGIA_JSON]"))try{const Z=U.match(/\[GENEALOGIA_JSON\](.*?)\[\/GENEALOGIA_JSON\]/s);if(Z){const ce=JSON.parse(Z[1]);F={pai:ce.pai||F.pai,mae:ce.mae||F.mae,pai_pai:ce.pai_pai||F.pai_pai,pai_mae:ce.pai_mae||F.pai_mae,mae_pai:ce.mae_pai||F.mae_pai,mae_mae:ce.mae_mae||F.mae_mae},U=U.replace(/\[GENEALOGIA_JSON\].*?\[\/GENEALOGIA_JSON\]/s,"").trim()}}catch(Z){console.warn("Erro ao parsear genealogia JSON:",Z)}y({registro:S.registro||"",nome:S.nome||"",raca:T?R:"",racaCustom:T?"":R,genealogia_texto:U,foto_url:S.foto_url||"",gpta:((E=S.gpta)==null?void 0:E.toString())||"",controle_leiteiro:((j=S.controle_leiteiro)==null?void 0:j.toString())||"",beta_caseina:S.beta_caseina||"",link_abcz:S.link_abcz||"",disponivel_aspiracao:S.disponivel_aspiracao??!0,classificacao_genetica:S.classificacao_genetica||""}),x(F)}catch(S){a({title:"Erro ao carregar dados",description:S instanceof Error?S.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},g=async E=>{if(E.preventDefault(),!b.registro.trim()){a({title:"Erro de validao",description:"Registro  obrigatrio",variant:"destructive"});return}if(!(p==="Outra"?b.racaCustom.trim():b.raca.trim())){a({title:"Erro de validao",description:"Raa  obrigatria",variant:"destructive"});return}try{i(!0);const S=p==="Outra"?b.racaCustom.trim():b.raca.trim(),N={registro:b.registro.trim(),nome:b.nome.trim()||null,raca:S,pai_registro:_.pai.registro.trim()||null,pai_nome:_.pai.nome.trim()||null,mae_registro:_.mae.registro.trim()||null,mae_nome:_.mae.nome.trim()||null,foto_url:b.foto_url.trim()||null,gpta:b.gpta?parseFloat(b.gpta):null,controle_leiteiro:b.controle_leiteiro?parseFloat(b.controle_leiteiro):null,beta_caseina:b.beta_caseina.trim()||null,link_abcz:b.link_abcz.trim()||null,disponivel_aspiracao:b.disponivel_aspiracao,classificacao_genetica:b.classificacao_genetica||null},R={pai:_.pai,mae:_.mae,pai_pai:_.pai_pai,pai_mae:_.pai_mae,mae_pai:_.mae_pai,mae_mae:_.mae_mae};if(Object.values(R).some(U=>U.nome.trim()||U.registro.trim())){const U=JSON.stringify(R);N.genealogia_texto=b.genealogia_texto.trim()?`${b.genealogia_texto}

[GENEALOGIA_JSON]${U}[/GENEALOGIA_JSON]`:`[GENEALOGIA_JSON]${U}[/GENEALOGIA_JSON]`}else N.genealogia_texto=b.genealogia_texto.trim()||null;const{error:F}=await z.from("doadoras").update(N).eq("id",e);if(F)throw F;a({title:"Doadora atualizada",description:"Doadora atualizada com sucesso"}),v()}catch(S){const N=S instanceof Error?S.message:"Erro desconhecido";a({title:"Erro ao atualizar doadora",description:N.includes("RLS")||N.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":N,variant:"destructive"})}finally{i(!1)}};return s?r.jsx(Pt,{}):l?r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{onClick:()=>t("/doadoras"),variant:"outline",size:"icon",children:r.jsx(us,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-2",children:[r.jsx(qo,{className:"w-8 h-8"}),b.nome||b.registro]}),r.jsxs("p",{className:"text-slate-600 mt-1",children:[b.registro," ",d&&` ${d.nome}`]})]})]})}),r.jsxs("form",{onSubmit:g,className:"space-y-6",children:[r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Informaes Bsicas"})}),r.jsx(ke,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"registro",children:"Registro *"}),r.jsx(Ee,{id:"registro",value:b.registro,onChange:E=>y({...b,registro:E.target.value}),placeholder:"Registro da doadora",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"nome",children:"Nome"}),r.jsx(Ee,{id:"nome",value:b.nome,onChange:E=>y({...b,nome:E.target.value}),placeholder:"Nome da doadora"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"raca",children:"Raa *"}),r.jsxs(_t,{value:p,onValueChange:E=>{m(E),y(E==="Outra"?{...b,raca:"",racaCustom:""}:{...b,raca:E,racaCustom:""})},children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione a raa"})}),r.jsxs(gt,{children:[h.map(E=>r.jsx(Ie,{value:E,children:E},E)),r.jsx(Ie,{value:"Outra",children:"Outra"})]})]}),p==="Outra"&&r.jsx(Ee,{id:"raca_custom",value:b.racaCustom,onChange:E=>y({...b,racaCustom:E.target.value,raca:E.target.value}),placeholder:"Digite a raa",className:"mt-2",required:!0}),p&&p!=="Outra"&&r.jsx("div",{className:"mt-2 text-xs text-slate-500"})]})]})})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Genealogia"})}),r.jsxs(ke,{children:[r.jsx(S5,{value:_,onChange:x,doadoraNome:b.nome||b.registro,doadoraRegistro:b.registro}),r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsx(ae,{htmlFor:"genealogia_texto",children:"Observaes sobre Genealogia"}),r.jsx(Wa,{id:"genealogia_texto",value:b.genealogia_texto,onChange:E=>y({...b,genealogia_texto:E.target.value}),placeholder:"Informaes adicionais sobre genealogia (opcional)",rows:3})]})]})]}),p==="Gir"&&r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Informaes Especficas - Raa Gir"})}),r.jsxs(ke,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"gpta",children:"GPTA"}),r.jsx(Ee,{id:"gpta",type:"number",value:b.gpta,onChange:E=>y({...b,gpta:E.target.value}),placeholder:"GPTA"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"controle_leiteiro",children:"Controle Leiteiro"}),r.jsx(Ee,{id:"controle_leiteiro",type:"number",value:b.controle_leiteiro,onChange:E=>y({...b,controle_leiteiro:E.target.value}),placeholder:"Controle Leiteiro"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"beta_caseina",children:"Beta Casena"}),r.jsx(Ee,{id:"beta_caseina",value:b.beta_caseina,onChange:E=>y({...b,beta_caseina:E.target.value}),placeholder:"Beta Casena"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"link_abcz",children:"Link ABCZ"}),r.jsx(Ee,{id:"link_abcz",type:"url",value:b.link_abcz,onChange:E=>y({...b,link_abcz:E.target.value}),placeholder:"URL do link ABCZ"})]})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Informaes Adicionais"})}),r.jsxs(ke,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ae,{htmlFor:"disponivel_aspiracao",children:"Disponvel para Aspirao"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Indica se a doadora est disponvel para aspirao"})]}),r.jsx(zx,{id:"disponivel_aspiracao",checked:b.disponivel_aspiracao,onCheckedChange:E=>y({...b,disponivel_aspiracao:E})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"classificacao_genetica",children:"Classificao Gentica"}),r.jsxs(_t,{value:b.classificacao_genetica,onValueChange:E=>y({...b,classificacao_genetica:E}),children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione a classificao"})}),r.jsxs(gt,{children:[r.jsx(Ie,{value:"1_estrela",children:"1 Estrela"}),r.jsx(Ie,{value:"2_estrelas",children:"2 Estrelas"}),r.jsx(Ie,{value:"3_estrelas",children:"3 Estrelas"}),r.jsx(Ie,{value:"diamante",children:"Diamante"})]})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"Classificao opcional do preo da gentica"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"foto_url",children:"Foto"}),r.jsx(Ee,{id:"foto_url",type:"url",value:b.foto_url,onChange:E=>y({...b,foto_url:E.target.value}),placeholder:"URL da foto"})]})]})]}),r.jsxs("div",{className:"flex gap-4 justify-end",children:[r.jsx(re,{type:"button",variant:"outline",onClick:()=>t("/doadoras"),children:"Cancelar"}),r.jsxs(re,{type:"submit",className:"bg-green-600 hover:bg-green-700",disabled:o,children:[r.jsx(QR,{className:"w-4 h-4 mr-2"}),o?"Salvando...":"Salvar Alteraes"]})]})]})]}):r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-500",children:"Doadora no encontrada"}),r.jsxs(re,{onClick:()=>t("/doadoras"),className:"mt-4",variant:"outline",children:[r.jsx(us,{className:"w-4 h-4 mr-2"}),"Voltar para Doadoras"]})]})})}async function Bo(e){try{const{data:t,error:a}=await z.from("receptoras").select("status_reprodutivo").eq("id",e).single();return!a&&(t!=null&&t.status_reprodutivo)?t.status_reprodutivo:await C5(e)}catch(t){return console.error("Error calculating receptora status:",t),"VAZIA"}}async function C5(e){try{const{data:t,error:a}=await z.from("v_tentativas_te_status").select("*").eq("receptora_id",e).order("data_te",{ascending:!1}).limit(1);if(a&&console.error("Error fetching v_tentativas_te_status:",a),t&&t.length>0){const o=t[0],i={PRENHE_FEMEA:"PRENHE_FEMEA",PRENHE_MACHO:"PRENHE_MACHO",PRENHE_SEM_SEXO:"PRENHE_SEM_SEXO",PRENHE_2_SEXOS:"PRENHE_2_SEXOS",PRENHE:"PRENHE",VAZIA:"VAZIA",RETOQUE:"SERVIDA",SEM_DIAGNOSTICO:"SERVIDA"};if(i[o.status_tentativa])return i[o.status_tentativa]}const{data:s,error:n}=await z.from("protocolo_receptoras").select("status, protocolo_id").eq("receptora_id",e);if(n&&console.error("Error fetching protocolo_receptoras:",n),s&&s.length>0){const o=s.map(h=>h.protocolo_id),{data:i,error:l}=await z.from("protocolos_sincronizacao").select("id, status").in("id",o);l&&console.error("Error fetching protocolos_sincronizacao:",l);const c=new Map((i||[]).map(h=>[h.id,h.status])),d=s.filter(h=>{const p=c.get(h.protocolo_id),m=h.status;return p==="SINCRONIZADO"||p==="FECHADO"?!1:(m==="APTA"||m==="INICIADA")&&p!=="SINCRONIZADO"&&p!=="FECHADO"});if(d.length>0)return d.some(p=>p.status==="APTA")?"SINCRONIZADA":"EM_SINCRONIZACAO";if(s.filter(h=>c.get(h.protocolo_id)==="PASSO2_FECHADO"&&h.status==="APTA").length>0)return"SINCRONIZADA"}return"VAZIA"}catch(t){return console.error("Error calculating receptora status (legacy):",t),"VAZIA"}}async function A5(e){if(e.length===0)return new Map;const t=new Map;try{const{data:a,error:s}=await z.from("receptoras").select("id, status_reprodutivo").in("id",e);!s&&a&&a.forEach(o=>{o.status_reprodutivo&&t.set(o.id,o.status_reprodutivo)});const n=e.filter(o=>!t.has(o));n.length>0&&(await D5(n)).forEach((i,l)=>{t.set(l,i)})}catch(a){console.error("Error calculating receptoras status:",a),e.forEach(s=>t.set(s,"VAZIA"))}return t}async function D5(e){const t=new Map;try{const{data:a,error:s}=await z.from("v_tentativas_te_status").select("receptora_id, status_tentativa, data_te").in("receptora_id",e).order("data_te",{ascending:!1});s&&console.error("Error fetching v_tentativas_te_status:",s);const{data:n,error:o}=await z.from("protocolo_receptoras").select("receptora_id, status, protocolo_id").in("receptora_id",e);o&&console.error("Error fetching protocolo_receptoras:",o);const i=[...new Set((n==null?void 0:n.map(p=>p.protocolo_id))||[])];let l=[];if(i.length>0){const{data:p,error:m}=await z.from("protocolos_sincronizacao").select("id, status").in("id",i);m?console.error("Error fetching protocolos_sincronizacao:",m):l=p||[]}const c=new Map((l==null?void 0:l.map(p=>[p.id,p.status]))||[]),d=new Map;a==null||a.forEach(p=>{d.has(p.receptora_id)||d.set(p.receptora_id,p)});const f={PRENHE_FEMEA:"PRENHE_FEMEA",PRENHE_MACHO:"PRENHE_MACHO",PRENHE_SEM_SEXO:"PRENHE_SEM_SEXO",PRENHE_2_SEXOS:"PRENHE_2_SEXOS",PRENHE_RETOQUE:"PRENHE_RETOQUE",PRENHE:"PRENHE",VAZIA:"VAZIA",RETOQUE:"SERVIDA",SEM_DIAGNOSTICO:"SERVIDA"},h=new Map;n==null||n.forEach(p=>{h.has(p.receptora_id)||h.set(p.receptora_id,[]),h.get(p.receptora_id).push(p)}),e.forEach(p=>{const m=d.get(p);if(m&&f[m.status_tentativa]){t.set(p,f[m.status_tentativa]);return}const b=h.get(p)||[],y=b.filter(x=>c.get(x.protocolo_id)!=="PASSO2_FECHADO"&&(x.status==="APTA"||x.status==="INICIADA"));if(y.length>0){t.set(p,y.some(x=>x.status==="APTA")?"SINCRONIZADA":"EM_SINCRONIZACAO");return}if(b.filter(x=>c.get(x.protocolo_id)==="PASSO2_FECHADO"&&x.status==="APTA").length>0){t.set(p,"SINCRONIZADA");return}t.set(p,"VAZIA")})}catch(a){console.error("Error calculating receptoras status (legacy):",a),e.forEach(s=>t.set(s,"VAZIA"))}return t}async function Px(e,t){try{const{error:a}=await z.from("receptoras").update({status_reprodutivo:t}).eq("id",e);return a?(console.error("Error updating receptora status:",a),{error:a}):{error:null}}catch(a){const s=a instanceof Error?a:new Error("Erro desconhecido");return console.error("Error updating receptora status:",s),{error:s}}}function Ji(e,t){switch(t){case"ENTRAR_PASSO1":return e!=="VAZIA"?{valido:!1,mensagem:`A receptora precisa estar VAZIA para entrar no primeiro passo de um protocolo. Status atual: ${e}`}:{valido:!0};case"FINALIZAR_PASSO1":return e!=="VAZIA"?{valido:!1,mensagem:`A receptora precisa estar VAZIA para finalizar o primeiro passo. Status atual: ${e}`}:{valido:!0};case"FINALIZAR_PASSO2":return e!=="EM_SINCRONIZACAO"?{valido:!1,mensagem:`A receptora precisa estar EM_SINCRONIZACAO para finalizar o segundo passo. Status atual: ${e}`}:{valido:!0};case"REALIZAR_TE":return e!=="SINCRONIZADA"?{valido:!1,mensagem:`A receptora precisa estar SINCRONIZADA para realizar transferncia de embries. Status atual: ${e}`}:{valido:!0};case"REALIZAR_DG":return e!=="SERVIDA"?{valido:!1,mensagem:`A receptora precisa estar SERVIDA para realizar diagnstico de gestao. Status atual: ${e}`}:{valido:!0};case"REALIZAR_SEXAGEM":return e!=="PRENHE"&&e!=="PRENHE_RETOQUE"?{valido:!1,mensagem:`A receptora precisa estar PRENHE ou PRENHE_RETOQUE para realizar sexagem. Status atual: ${e}`}:{valido:!0};default:return{valido:!1,mensagem:"Ao desconhecida"}}}function hC(e){const t=(e||"").trim();if(!t)return"";const a={VAZIA:"Vazia",EM_SINCRONIZACAO:"Em sincronizao",SINCRONIZADA:"Sincronizada",SERVIDA:"Servida",PRENHE:"Prenhe",PRENHE_RETOQUE:"Prenhe (retoque)",PRENHE_FEMEA:"Prenhe de fmea",PRENHE_MACHO:"Prenhe de macho",PRENHE_SEM_SEXO:"Prenhe (sem sexo)",PRENHE_2_SEXOS:"Prenhe de 2 sexos",SINCRONIZADO:"Sincronizado",FECHADO:"Fechado",PASSO1_FECHADO:"Passo 1 fechado",PASSO2_FECHADO:"Passo 2 fechado",EM_TE:"Em TE",APTA:"Apta",INAPTA:"Inapta",INICIADA:"Iniciada",UTILIZADA:"Utilizada",NAO_UTILIZADA:"No utilizada",SINCRONIZANDO:"Sincronizando",RETOQUE:"Retoque",TRANSFERIDO:"Transferido",CONGELADO:"Congelado",REALIZADA:"Realizada","EM SINCRONIZAO":"Em sincronizao","PRENHE (RETOQUE)":"Prenhe (retoque)","PRENHE (FMEA)":"Prenhe de fmea","PRENHE (MACHO)":"Prenhe de macho","PRENHE (SEM SEXO)":"Prenhe (sem sexo)","PRENHE (2 SEXOS)":"Prenhe de 2 sexos"};if(a[t])return a[t];const s=t.replace(/_/g," ").toLowerCase();return s.charAt(0).toUpperCase()+s.slice(1)}const T5={APTA:{variant:"default",className:"bg-green-500 hover:bg-green-600"},INAPTA:{variant:"destructive",className:""},INICIADA:{variant:"secondary",className:"bg-blue-500 hover:bg-blue-600 text-white"},UTILIZADA:{variant:"outline",className:"bg-purple-100 text-purple-800 border-purple-300"},NAO_UTILIZADA:{variant:"outline",className:"bg-gray-100 text-gray-800"},SINCRONIZANDO:{variant:"secondary",className:"bg-yellow-500 hover:bg-yellow-600 text-white"},SINCRONIZADA:{variant:"default",className:"bg-green-500 hover:bg-green-600"},SINCRONIZADO:{variant:"default",className:"bg-blue-600 hover:bg-blue-700 text-white"},FECHADO:{variant:"secondary",className:"bg-slate-500 hover:bg-slate-600 text-white"},PASSO1_FECHADO:{variant:"secondary",className:"bg-blue-400 hover:bg-blue-500 text-white"},PASSO2_FECHADO:{variant:"default",className:"bg-blue-600 hover:bg-blue-700 text-white"},EM_TE:{variant:"secondary",className:"bg-slate-500 hover:bg-slate-600 text-white"},VAZIA:{variant:"outline",className:"bg-gray-100 text-gray-800 border-gray-300"},EM_SINCRONIZACAO:{variant:"secondary",className:"bg-yellow-500 hover:bg-yellow-600 text-white"},SERVIDA:{variant:"secondary",className:"bg-blue-500 hover:bg-blue-600 text-white"},PRENHE:{variant:"default",className:"bg-green-600 hover:bg-green-700 text-white"},PRENHE_RETOQUE:{variant:"secondary",className:"bg-orange-500 hover:bg-orange-600 text-white"},PRENHE_FEMEA:{variant:"default",className:"bg-pink-600 hover:bg-pink-700 text-white"},PRENHE_MACHO:{variant:"default",className:"bg-blue-700 hover:bg-blue-800 text-white"},PRENHE_SEM_SEXO:{variant:"default",className:"bg-purple-600 hover:bg-purple-700 text-white"},PRENHE_2_SEXOS:{variant:"default",className:"bg-indigo-600 hover:bg-indigo-700 text-white"},RETOQUE:{variant:"secondary",className:"bg-orange-500 hover:bg-orange-600 text-white"},TRANSFERIDO:{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-300"},CONGELADO:{variant:"secondary",className:"bg-cyan-500 hover:bg-cyan-600 text-white"},REALIZADA:{variant:"default",className:"bg-green-500 hover:bg-green-600"}};function cn({status:e,count:t,className:a}){const s=T5[e]||{variant:"outline",className:""},n=hC(e),o=t&&t>1?`${n} (${t})`:n;return r.jsx(et,{variant:s.variant,className:Ae(s.className,a),children:o})}const mC=Th,O5=Oh,pC=u.forwardRef(({className:e,...t},a)=>r.jsx(Zl,{className:Ae("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));pC.displayName=Zl.displayName;const R5=Bl("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ix=u.forwardRef(({side:e="right",className:t,children:a,...s},n)=>r.jsxs(O5,{children:[r.jsx(pC,{}),r.jsxs(Xl,{ref:n,className:Ae(R5({side:e}),t),...s,children:[a,r.jsxs(Rh,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[r.jsx(sr,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ix.displayName=Xl.displayName;const Lx=({className:e,...t})=>r.jsx("div",{className:Ae("flex flex-col space-y-2 text-center sm:text-left",e),...t});Lx.displayName="SheetHeader";const Fx=u.forwardRef(({className:e,...t},a)=>r.jsx(Wd,{ref:a,className:Ae("text-lg font-semibold text-foreground",e),...t}));Fx.displayName=Wd.displayName;const $x=u.forwardRef(({className:e,...t},a)=>r.jsx(Qd,{ref:a,className:Ae("text-sm text-muted-foreground",e),...t}));$x.displayName=Qd.displayName;const Ds=e=>{if(!e||/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=e.match(/^(\d{4}-\d{2}-\d{2})/);if(t)return t[1];try{const a=new Date(e);if(isNaN(a.getTime()))return e;const s=a.getUTCFullYear(),n=String(a.getUTCMonth()+1).padStart(2,"0"),o=String(a.getUTCDate()).padStart(2,"0");return`${s}-${n}-${o}`}catch{return e}},L_=e=>{try{return new Date(e+"T12:00:00").toLocaleDateString("pt-BR")}catch{return e}};function gC({receptoraId:e,open:t,onClose:a}){const{toast:s}=fa(),[n,o]=u.useState(!0),[i,l]=u.useState(null),[c,d]=u.useState([]),[f,h]=u.useState([]),[p,m]=u.useState({totalCiclos:0,totalGestacoes:0,ciclosDesdeUltimaGestacao:0});u.useEffect(()=>{t&&e&&b()},[t,e]);const b=async()=>{try{o(!0);const x=[],v=[],{data:g,error:E}=await z.from("receptoras").select("*").eq("id",e).single();if(E)throw E;l(g);const{data:j}=await z.from("receptora_fazenda_historico").select("id, fazenda_id, data_inicio").eq("receptora_id",e).order("data_inicio",{ascending:!0});if(j&&j.length>0){const k=j[0],{data:M}=await z.from("fazendas").select("nome").eq("id",k.fazenda_id).single();v.push({data:Ds(k.data_inicio),tipo:"CADASTRO",resumo:`Cadastro na fazenda ${(M==null?void 0:M.nome)||"desconhecida"}`});for(let A=1;A<j.length;A++){const q=j[A],I=j[A-1],{data:w}=await z.from("fazendas").select("id, nome").in("id",[I.fazenda_id,q.fazenda_id].filter(Boolean)),C=new Map((w==null?void 0:w.map(L=>[L.id,L.nome]))||[]),$=C.get(I.fazenda_id)||"?",O=C.get(q.fazenda_id)||"?";v.push({data:Ds(q.data_inicio),tipo:"MUDANCA_FAZENDA",resumo:`${$}  ${O}`})}}const{data:S}=await z.from("protocolo_receptoras").select(`
          id,
          data_inclusao,
          status,
          motivo_inapta,
          protocolos_sincronizacao (
            id,
            data_inicio,
            passo2_data
          )
        `).eq("receptora_id",e).order("data_inclusao",{ascending:!1}),{data:N}=await z.from("diagnosticos_gestacao").select("*").eq("receptora_id",e).eq("tipo_diagnostico","DG").order("data_diagnostico",{ascending:!1});if(S)for(const k of S){const M=Array.isArray(k.protocolos_sincronizacao)?k.protocolos_sincronizacao[0]:k.protocolos_sincronizacao;if(!M||!M.data_inicio)continue;const A=Ds(M.data_inicio);let q="1 Passo";if(M.passo2_data){const I=Ds(M.passo2_data);k.status==="APTA"?q="1 Passo  2 Passo: APTA":k.status==="INAPTA"?(q="1 Passo  2 Passo: DESCARTADA",k.motivo_inapta&&(q+=` (${k.motivo_inapta})`)):q="1 Passo  2 Passo",x.push({data:I,tipo:"PROTOCOLO",resumo:q})}else x.push({data:A,tipo:"PROTOCOLO",resumo:q})}const{data:R}=await z.from("transferencias_embrioes").select(`
          id,
          embriao_id,
          data_te,
          status_te,
          embrioes (
            id,
            identificacao,
            classificacao,
            lote_fiv_acasalamento_id
          )
        `).eq("receptora_id",e).order("data_te",{ascending:!1}),T=new Set;R&&R.forEach(k=>{const M=Array.isArray(k.embrioes)?k.embrioes[0]:k.embrioes;M!=null&&M.lote_fiv_acasalamento_id&&T.add(M.lote_fiv_acasalamento_id)});const F=new Map;if(T.size>0){const k=Array.from(T).filter(Boolean);if(k.length>0){const{data:M,error:A}=await z.from("lote_fiv_acasalamentos").select(`
              id,
              aspiracao_doadora_id,
              dose_semen_id
            `).in("id",k);if(A)console.error("Erro ao buscar acasalamentos:",A);else if(M){const q=M.map($=>$.aspiracao_doadora_id).filter(Boolean),I=M.map($=>$.dose_semen_id).filter(Boolean),w=new Map;if(q.length>0){const{data:$}=await z.from("aspiracoes_doadoras").select("id, doadora_id").in("id",q);if($){const O=$.map(L=>L.doadora_id).filter(Boolean);if(O.length>0){const{data:L}=await z.from("doadoras").select("id, registro").in("id",O);if(L){const H=new Map(L.map(G=>[G.id,G.registro]));$.forEach(G=>{const te=H.get(G.doadora_id);te&&w.set(G.id,te)})}}}}const C=new Map;if(I.length>0){const{data:$}=await z.from("doses_semen").select("id, nome").in("id",I);$&&$.forEach(O=>{C.set(O.id,O.nome)})}M.forEach($=>{const O=w.get($.aspiracao_doadora_id)||"?",L=C.get($.dose_semen_id)||"?";F.set($.id,{doadora:O,touro:L})})}}}const U=new Map;if(R){const k=new Map;R.forEach(M=>{const A=M.data_te;k.has(A)||k.set(A,[]),k.get(A).push(M)}),k.forEach((M,A)=>{const q=M.filter(w=>w.status_te==="REALIZADA"),I=M.filter(w=>w.status_te==="DESCARTADA");if(q.length>0){const w=[],C=[];q.forEach(O=>{const L=Array.isArray(O.embrioes)?O.embrioes[0]:O.embrioes,H=(L==null?void 0:L.identificacao)||"Embrio";if(w.push(H),L!=null&&L.lote_fiv_acasalamento_id){const G=F.get(L.lote_fiv_acasalamento_id);if(G){const te=`${G.doadora}  ${G.touro}`;C.includes(te)||C.push(te)}}});let $=`${q.length} embrio(es): ${w.join(", ")}`;C.length>0&&($+=` | ${C.join("; ")}`),x.push({data:Ds(A),tipo:"TE",resumo:$}),U.set(A,C)}else I.length>0&&x.push({data:Ds(A),tipo:"TE",resumo:"Descartada para TE"})})}if(N)for(const k of N){let M=k.resultado==="PRENHE"?"PRENHE":k.resultado==="RETOQUE"?"PRENHE (RETOQUE)":"VAZIA";if(k.numero_gestacoes&&k.numero_gestacoes>0&&k.resultado!=="VAZIA"&&(M+=` (${k.numero_gestacoes} gestao${k.numero_gestacoes>1?"es":""})`),(k.resultado==="PRENHE"||k.resultado==="RETOQUE")&&k.data_te){const A=U.get(k.data_te);A&&A.length>0&&(M+=` | ${A.join("; ")}`)}x.push({data:Ds(k.data_diagnostico),tipo:"DG",resumo:M})}const{data:Z}=await z.from("diagnosticos_gestacao").select("*").eq("receptora_id",e).eq("tipo_diagnostico","SEXAGEM").order("data_diagnostico",{ascending:!1});if(Z)for(const k of Z){let M="Sexagem: ",A=[];if(k.observacoes){const q=k.observacoes.match(/SEXAGENS:([^|]+)/);q&&(A=q[1].split(",").map(w=>w.trim()).filter(w=>w).map(w=>({FEMEA:"Fmea",MACHO:"Macho",SEM_SEXO:"Sem Sexo",VAZIA:"Vazia"})[w]||w))}if(A.length===0&&k.sexagem){const q={FEMEA:"Fmea",MACHO:"Macho"};A.push(q[k.sexagem]||k.sexagem)}A.length>0?(A.length===1?M+=A[0]:A.length===2?A[0]===A[1]?M+=`2 ${A[0]}s`:M+=`${A[0]} e ${A[1]}`:M+=A.join(", "),k.numero_gestacoes&&k.numero_gestacoes>1&&(M+=` (${k.numero_gestacoes} gestaes)`)):k.resultado==="PRENHE"?M+="PRENHE":k.resultado==="VAZIA"?M+="VAZIA":M+="Resultado no disponvel",x.push({data:Ds(k.data_diagnostico),tipo:"SEXAGEM",resumo:M})}const ce={totalCiclos:0,totalGestacoes:0,ciclosDesdeUltimaGestacao:0};if(S){ce.totalCiclos=S.length;let k=null;if(N&&N.length>0){const A=[...N].sort((q,I)=>{const w=Ds(q.data_diagnostico);return Ds(I.data_diagnostico).localeCompare(w)}).find(q=>q.resultado==="PRENHE"||q.resultado==="RETOQUE");A&&(k=Ds(A.data_diagnostico))}if(k)for(const M of S){const A=Array.isArray(M.protocolos_sincronizacao)?M.protocolos_sincronizacao[0]:M.protocolos_sincronizacao;if(!A)continue;const q=A.passo2_data||A.data_inicio;if(!q)continue;Ds(q)>k&&ce.ciclosDesdeUltimaGestacao++}else ce.ciclosDesdeUltimaGestacao=ce.totalCiclos}if(N){const k=new Set;N.forEach(M=>{if(M.resultado==="PRENHE"||M.resultado==="RETOQUE"){const A=M.data_te||M.data_diagnostico;k.add(A)}}),ce.totalGestacoes=k.size}x.sort((k,M)=>M.data>k.data?1:M.data<k.data?-1:0),v.sort((k,M)=>M.data>k.data?1:M.data<k.data?-1:0),d(x),h(v),m(ce)}catch(x){s({title:"Erro ao carregar histrico",description:x instanceof Error?x.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},y=x=>({CADASTRO:r.jsx(fg,{className:"w-4 h-4 text-indigo-600"}),MUDANCA_FAZENDA:r.jsx(Jv,{className:"w-4 h-4 text-orange-600"}),PROTOCOLO:r.jsx(Cf,{className:"w-4 h-4 text-blue-600"}),TE:r.jsx(tx,{className:"w-4 h-4 text-green-600"}),DG:r.jsx(Qv,{className:"w-4 h-4 text-purple-600"}),SEXAGEM:r.jsx($R,{className:"w-4 h-4 text-pink-600"})})[x]||r.jsx(Cf,{className:"w-4 h-4"}),_=x=>({CADASTRO:r.jsx(et,{variant:"outline",className:"bg-indigo-50 text-indigo-700 border-indigo-200",children:"Cadastro"}),MUDANCA_FAZENDA:r.jsx(et,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:"Fazenda"}),PROTOCOLO:r.jsx(et,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Protocolo"}),TE:r.jsx(et,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"TE"}),DG:r.jsx(et,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:"DG"}),SEXAGEM:r.jsx(et,{variant:"outline",className:"bg-pink-50 text-pink-700 border-pink-200",children:"Sexagem"})})[x]||r.jsx(et,{variant:"outline",children:x});return r.jsx(mC,{open:t,onOpenChange:a,children:r.jsxs(Ix,{className:"w-full sm:max-w-3xl overflow-y-auto",children:[r.jsxs(Lx,{children:[r.jsx(Fx,{children:"Histrico da Receptora"}),r.jsx($x,{children:i?`Brinco ${i.identificacao} ${i.nome?`- ${i.nome}`:""}`:"Carregando..."})]}),n?r.jsx("div",{className:"py-8",children:r.jsx(Pt,{})}):r.jsxs("div",{className:"mt-6 space-y-4",children:[i&&r.jsxs(r.Fragment,{children:[r.jsx(Me,{children:r.jsx(ke,{className:"pt-6",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-500",children:"Brinco"}),r.jsx("p",{className:"font-medium",children:i.identificacao})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-500",children:"Nome"}),r.jsx("p",{className:"font-medium",children:i.nome||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-500",children:"Status Atual"}),r.jsx(cn,{status:i.status_reprodutivo||"VAZIA"})]})]})})}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{className:"text-base",children:"Estatsticas Reprodutivas"})}),r.jsx(ke,{children:r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-700",children:p.totalCiclos}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Ciclos Realizados"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg border border-green-200",children:[r.jsx("p",{className:"text-2xl font-bold text-green-700",children:p.totalGestacoes}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Gestaes"})]}),r.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg border border-orange-200",children:[r.jsx("p",{className:"text-2xl font-bold text-orange-700",children:p.ciclosDesdeUltimaGestacao}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Ciclos desde ltima Gestao"})]})]})})]})]}),f.length>0&&r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{className:"text-base",children:"Histrico Administrativo"})}),r.jsx(ke,{children:r.jsx("div",{className:"space-y-3",children:f.map((x,v)=>r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-[100px]",children:[y(x.tipo),_(x.tipo)]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-slate-900",children:x.resumo}),r.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:L_(x.data)})]})]},v))})})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsxs(Pe,{className:"text-base",children:["Linha do Tempo Reprodutiva (",c.length," eventos)"]})}),r.jsx(ke,{children:c.length===0?r.jsx("div",{className:"text-center py-8 text-slate-500",children:"Nenhum evento registrado"}):r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{className:"w-[100px]",children:"Data"}),r.jsx(X,{className:"w-[120px]",children:"Tipo"}),r.jsx(X,{children:"Resumo"})]})}),r.jsx(Tt,{children:c.map((x,v)=>r.jsxs(Oe,{className:"hover:bg-slate-50",children:[r.jsx(W,{className:"font-medium text-sm",children:L_(x.data)}),r.jsx(W,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[y(x.tipo),_(x.tipo)]})}),r.jsx(W,{children:r.jsx("span",{className:"text-sm",children:x.resumo})})]},v))})]})})]})]})]})})}function lr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Jo(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const vC=6048e5,M5=864e5,xC=6e4,yC=36e5;let k5={};function $h(){return k5}function vd(e,t){var l,c,d,f;const a=$h(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??a.weekStartsOn??((f=(d=a.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,n=lr(e),o=n.getDay(),i=(o<s?7:0)+o-s;return n.setDate(n.getDate()-i),n.setHours(0,0,0,0),n}function $f(e){return vd(e,{weekStartsOn:1})}function _C(e){const t=lr(e),a=t.getFullYear(),s=Jo(e,0);s.setFullYear(a+1,0,4),s.setHours(0,0,0,0);const n=$f(s),o=Jo(e,0);o.setFullYear(a,0,4),o.setHours(0,0,0,0);const i=$f(o);return t.getTime()>=n.getTime()?a+1:t.getTime()>=i.getTime()?a:a-1}function F_(e){const t=lr(e);return t.setHours(0,0,0,0),t}function $_(e){const t=lr(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),+e-+a}function z5(e,t){const a=F_(e),s=F_(t),n=+a-$_(a),o=+s-$_(s);return Math.round((n-o)/M5)}function P5(e){const t=_C(e),a=Jo(e,0);return a.setFullYear(t,0,4),a.setHours(0,0,0,0),$f(a)}function I5(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function L5(e){if(!I5(e)&&typeof e!="number")return!1;const t=lr(e);return!isNaN(Number(t))}function F5(e){const t=lr(e),a=Jo(e,0);return a.setFullYear(t.getFullYear(),0,1),a.setHours(0,0,0,0),a}const $5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},q5=(e,t,a)=>{let s;const n=$5[e];return typeof n=="string"?s=n:t===1?s=n.one:s=n.other.replace("{{count}}",t.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+s:s+" ago":s};function el(e){return(t={})=>{const a=t.width?String(t.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}const B5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},U5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},H5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},V5={date:el({formats:B5,defaultWidth:"full"}),time:el({formats:U5,defaultWidth:"full"}),dateTime:el({formats:H5,defaultWidth:"full"})},G5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Y5=(e,t,a,s)=>G5[e];function xr(e){return(t,a)=>{const s=a!=null&&a.context?String(a.context):"standalone";let n;if(s==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=a!=null&&a.width?String(a.width):i;n=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=a!=null&&a.width?String(a.width):e.defaultWidth;n=e.values[l]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return n[o]}}const W5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Q5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Z5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},X5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},K5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},J5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},eL=(e,t)=>{const a=Number(e),s=a%100;if(s>20||s<10)switch(s%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},tL={ordinalNumber:eL,era:xr({values:W5,defaultWidth:"wide"}),quarter:xr({values:Q5,defaultWidth:"wide",argumentCallback:e=>e-1}),month:xr({values:Z5,defaultWidth:"wide"}),day:xr({values:X5,defaultWidth:"wide"}),dayPeriod:xr({values:K5,defaultWidth:"wide",formattingValues:J5,defaultFormattingWidth:"wide"})};function yr(e){return(t,a={})=>{const s=a.width,n=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],o=t.match(n);if(!o)return null;const i=o[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?sL(l,h=>h.test(i)):aL(l,h=>h.test(i));let d;d=e.valueCallback?e.valueCallback(c):c,d=a.valueCallback?a.valueCallback(d):d;const f=t.slice(i.length);return{value:d,rest:f}}}function aL(e,t){for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return a}function sL(e,t){for(let a=0;a<e.length;a++)if(t(e[a]))return a}function bC(e){return(t,a={})=>{const s=t.match(e.matchPattern);if(!s)return null;const n=s[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=a.valueCallback?a.valueCallback(i):i;const l=t.slice(n.length);return{value:i,rest:l}}}const rL=/^(\d+)(th|st|nd|rd)?/i,nL=/\d+/i,oL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},iL={any:[/^b/i,/^(a|c)/i]},lL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},cL={any:[/1/i,/2/i,/3/i,/4/i]},dL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},uL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},fL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},mL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},pL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},gL={ordinalNumber:bC({matchPattern:rL,parsePattern:nL,valueCallback:e=>parseInt(e,10)}),era:yr({matchPatterns:oL,defaultMatchWidth:"wide",parsePatterns:iL,defaultParseWidth:"any"}),quarter:yr({matchPatterns:lL,defaultMatchWidth:"wide",parsePatterns:cL,defaultParseWidth:"any",valueCallback:e=>e+1}),month:yr({matchPatterns:dL,defaultMatchWidth:"wide",parsePatterns:uL,defaultParseWidth:"any"}),day:yr({matchPatterns:fL,defaultMatchWidth:"wide",parsePatterns:hL,defaultParseWidth:"any"}),dayPeriod:yr({matchPatterns:mL,defaultMatchWidth:"any",parsePatterns:pL,defaultParseWidth:"any"})},vL={code:"en-US",formatDistance:q5,formatLong:V5,formatRelative:Y5,localize:tL,match:gL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function xL(e){const t=lr(e);return z5(t,F5(t))+1}function yL(e){const t=lr(e),a=+$f(t)-+P5(t);return Math.round(a/vC)+1}function wC(e,t){var f,h,p,m;const a=lr(e),s=a.getFullYear(),n=$h(),o=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,i=Jo(e,0);i.setFullYear(s+1,0,o),i.setHours(0,0,0,0);const l=vd(i,t),c=Jo(e,0);c.setFullYear(s,0,o),c.setHours(0,0,0,0);const d=vd(c,t);return a.getTime()>=l.getTime()?s+1:a.getTime()>=d.getTime()?s:s-1}function _L(e,t){var l,c,d,f;const a=$h(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??a.firstWeekContainsDate??((f=(d=a.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,n=wC(e,t),o=Jo(e,0);return o.setFullYear(n,0,s),o.setHours(0,0,0,0),vd(o,t)}function bL(e,t){const a=lr(e),s=+vd(a,t)-+_L(a,t);return Math.round(s/vC)+1}function Bt(e,t){const a=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return a+s}const bn={y(e,t){const a=e.getFullYear(),s=a>0?a:1-a;return Bt(t==="yy"?s%100:s,t.length)},M(e,t){const a=e.getMonth();return t==="M"?String(a+1):Bt(a+1,2)},d(e,t){return Bt(e.getDate(),t.length)},a(e,t){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(e,t){return Bt(e.getHours()%12||12,t.length)},H(e,t){return Bt(e.getHours(),t.length)},m(e,t){return Bt(e.getMinutes(),t.length)},s(e,t){return Bt(e.getSeconds(),t.length)},S(e,t){const a=t.length,s=e.getMilliseconds(),n=Math.trunc(s*Math.pow(10,a-3));return Bt(n,t.length)}},_i={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},q_={G:function(e,t,a){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(s,{width:"abbreviated"});case"GGGGG":return a.era(s,{width:"narrow"});case"GGGG":default:return a.era(s,{width:"wide"})}},y:function(e,t,a){if(t==="yo"){const s=e.getFullYear(),n=s>0?s:1-s;return a.ordinalNumber(n,{unit:"year"})}return bn.y(e,t)},Y:function(e,t,a,s){const n=wC(e,s),o=n>0?n:1-n;if(t==="YY"){const i=o%100;return Bt(i,2)}return t==="Yo"?a.ordinalNumber(o,{unit:"year"}):Bt(o,t.length)},R:function(e,t){const a=_C(e);return Bt(a,t.length)},u:function(e,t){const a=e.getFullYear();return Bt(a,t.length)},Q:function(e,t,a){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Bt(s,2);case"Qo":return a.ordinalNumber(s,{unit:"quarter"});case"QQQ":return a.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,a){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Bt(s,2);case"qo":return a.ordinalNumber(s,{unit:"quarter"});case"qqq":return a.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,a){const s=e.getMonth();switch(t){case"M":case"MM":return bn.M(e,t);case"Mo":return a.ordinalNumber(s+1,{unit:"month"});case"MMM":return a.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,a){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Bt(s+1,2);case"Lo":return a.ordinalNumber(s+1,{unit:"month"});case"LLL":return a.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,a,s){const n=bL(e,s);return t==="wo"?a.ordinalNumber(n,{unit:"week"}):Bt(n,t.length)},I:function(e,t,a){const s=yL(e);return t==="Io"?a.ordinalNumber(s,{unit:"week"}):Bt(s,t.length)},d:function(e,t,a){return t==="do"?a.ordinalNumber(e.getDate(),{unit:"date"}):bn.d(e,t)},D:function(e,t,a){const s=xL(e);return t==="Do"?a.ordinalNumber(s,{unit:"dayOfYear"}):Bt(s,t.length)},E:function(e,t,a){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return a.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(s,{width:"short",context:"formatting"});case"EEEE":default:return a.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,a,s){const n=e.getDay(),o=(n-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Bt(o,2);case"eo":return a.ordinalNumber(o,{unit:"day"});case"eee":return a.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(n,{width:"short",context:"formatting"});case"eeee":default:return a.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,a,s){const n=e.getDay(),o=(n-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Bt(o,t.length);case"co":return a.ordinalNumber(o,{unit:"day"});case"ccc":return a.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(n,{width:"narrow",context:"standalone"});case"cccccc":return a.day(n,{width:"short",context:"standalone"});case"cccc":default:return a.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,a){const s=e.getDay(),n=s===0?7:s;switch(t){case"i":return String(n);case"ii":return Bt(n,t.length);case"io":return a.ordinalNumber(n,{unit:"day"});case"iii":return a.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(s,{width:"short",context:"formatting"});case"iiii":default:return a.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,a){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,a){const s=e.getHours();let n;switch(s===12?n=_i.noon:s===0?n=_i.midnight:n=s/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,a){const s=e.getHours();let n;switch(s>=17?n=_i.evening:s>=12?n=_i.afternoon:s>=4?n=_i.morning:n=_i.night,t){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,a){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),a.ordinalNumber(s,{unit:"hour"})}return bn.h(e,t)},H:function(e,t,a){return t==="Ho"?a.ordinalNumber(e.getHours(),{unit:"hour"}):bn.H(e,t)},K:function(e,t,a){const s=e.getHours()%12;return t==="Ko"?a.ordinalNumber(s,{unit:"hour"}):Bt(s,t.length)},k:function(e,t,a){let s=e.getHours();return s===0&&(s=24),t==="ko"?a.ordinalNumber(s,{unit:"hour"}):Bt(s,t.length)},m:function(e,t,a){return t==="mo"?a.ordinalNumber(e.getMinutes(),{unit:"minute"}):bn.m(e,t)},s:function(e,t,a){return t==="so"?a.ordinalNumber(e.getSeconds(),{unit:"second"}):bn.s(e,t)},S:function(e,t){return bn.S(e,t)},X:function(e,t,a){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return U_(s);case"XXXX":case"XX":return Eo(s);case"XXXXX":case"XXX":default:return Eo(s,":")}},x:function(e,t,a){const s=e.getTimezoneOffset();switch(t){case"x":return U_(s);case"xxxx":case"xx":return Eo(s);case"xxxxx":case"xxx":default:return Eo(s,":")}},O:function(e,t,a){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+B_(s,":");case"OOOO":default:return"GMT"+Eo(s,":")}},z:function(e,t,a){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+B_(s,":");case"zzzz":default:return"GMT"+Eo(s,":")}},t:function(e,t,a){const s=Math.trunc(e.getTime()/1e3);return Bt(s,t.length)},T:function(e,t,a){const s=e.getTime();return Bt(s,t.length)}};function B_(e,t=""){const a=e>0?"-":"+",s=Math.abs(e),n=Math.trunc(s/60),o=s%60;return o===0?a+String(n):a+String(n)+t+Bt(o,2)}function U_(e,t){return e%60===0?(e>0?"-":"+")+Bt(Math.abs(e)/60,2):Eo(e,t)}function Eo(e,t=""){const a=e>0?"-":"+",s=Math.abs(e),n=Bt(Math.trunc(s/60),2),o=Bt(s%60,2);return a+n+t+o}const H_=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},jC=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},wL=(e,t)=>{const a=e.match(/(P+)(p+)?/)||[],s=a[1],n=a[2];if(!n)return H_(e,t);let o;switch(s){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",H_(s,t)).replace("{{time}}",jC(n,t))},jL={p:jC,P:wL},EL=/^D+$/,SL=/^Y+$/,NL=["D","DD","YY","YYYY"];function CL(e){return EL.test(e)}function AL(e){return SL.test(e)}function DL(e,t,a){const s=TL(e,t,a);if(console.warn(s),NL.includes(e))throw new RangeError(s)}function TL(e,t,a){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const OL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,RL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ML=/^'([^]*?)'?$/,kL=/''/g,zL=/[a-zA-Z]/;function EC(e,t,a){var f,h,p,m,b,y,_,x;const s=$h(),n=(a==null?void 0:a.locale)??s.locale??vL,o=(a==null?void 0:a.firstWeekContainsDate)??((h=(f=a==null?void 0:a.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(p=s.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,i=(a==null?void 0:a.weekStartsOn)??((y=(b=a==null?void 0:a.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??s.weekStartsOn??((x=(_=s.locale)==null?void 0:_.options)==null?void 0:x.weekStartsOn)??0,l=lr(e);if(!L5(l))throw new RangeError("Invalid time value");let c=t.match(RL).map(v=>{const g=v[0];if(g==="p"||g==="P"){const E=jL[g];return E(v,n.formatLong)}return v}).join("").match(OL).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const g=v[0];if(g==="'")return{isToken:!1,value:PL(v)};if(q_[g])return{isToken:!0,value:v};if(g.match(zL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:v}});n.localize.preprocessor&&(c=n.localize.preprocessor(l,c));const d={firstWeekContainsDate:o,weekStartsOn:i,locale:n};return c.map(v=>{if(!v.isToken)return v.value;const g=v.value;(!(a!=null&&a.useAdditionalWeekYearTokens)&&AL(g)||!(a!=null&&a.useAdditionalDayOfYearTokens)&&CL(g))&&DL(g,t,String(e));const E=q_[g[0]];return E(l,g,n.localize,d)}).join("")}function PL(e){const t=e.match(ML);return t?t[1].replace(kL,"'"):e}function IL(e,t){const s=qL(e);let n;if(s.date){const c=BL(s.date,2);n=UL(c.restDateString,c.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);const o=n.getTime();let i=0,l;if(s.time&&(i=HL(s.time),isNaN(i)))return new Date(NaN);if(s.timezone){if(l=VL(s.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(o+i),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(o+i+l)}const Ou={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},LL=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,FL=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,$L=/^([+-])(\d{2})(?::?(\d{2}))?$/;function qL(e){const t={},a=e.split(Ou.dateTimeDelimiter);let s;if(a.length>2)return t;if(/:/.test(a[0])?s=a[0]:(t.date=a[0],s=a[1],Ou.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Ou.timeZoneDelimiter)[0],s=e.substr(t.date.length,e.length))),s){const n=Ou.timezone.exec(s);n?(t.time=s.replace(n[1],""),t.timezone=n[1]):t.time=s}return t}function BL(e,t){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(a);if(!s)return{year:NaN,restDateString:""};const n=s[1]?parseInt(s[1]):null,o=s[2]?parseInt(s[2]):null;return{year:o===null?n:o*100,restDateString:e.slice((s[1]||s[2]).length)}}function UL(e,t){if(t===null)return new Date(NaN);const a=e.match(LL);if(!a)return new Date(NaN);const s=!!a[4],n=hc(a[1]),o=hc(a[2])-1,i=hc(a[3]),l=hc(a[4]),c=hc(a[5])-1;if(s)return ZL(t,l,c)?GL(t,l,c):new Date(NaN);{const d=new Date(0);return!WL(t,o,i)||!QL(t,n)?new Date(NaN):(d.setUTCFullYear(t,o,Math.max(n,i)),d)}}function hc(e){return e?parseInt(e):1}function HL(e){const t=e.match(FL);if(!t)return NaN;const a=ap(t[1]),s=ap(t[2]),n=ap(t[3]);return XL(a,s,n)?a*yC+s*xC+n*1e3:NaN}function ap(e){return e&&parseFloat(e.replace(",","."))||0}function VL(e){if(e==="Z")return 0;const t=e.match($L);if(!t)return 0;const a=t[1]==="+"?-1:1,s=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return KL(s,n)?a*(s*yC+n*xC):NaN}function GL(e,t,a){const s=new Date(0);s.setUTCFullYear(e,0,4);const n=s.getUTCDay()||7,o=(t-1)*7+a+1-n;return s.setUTCDate(s.getUTCDate()+o),s}const YL=[31,null,31,30,31,30,31,31,30,31,30,31];function SC(e){return e%400===0||e%4===0&&e%100!==0}function WL(e,t,a){return t>=0&&t<=11&&a>=1&&a<=(YL[t]||(SC(e)?29:28))}function QL(e,t){return t>=1&&t<=(SC(e)?366:365)}function ZL(e,t,a){return t>=1&&t<=53&&a>=0&&a<=6}function XL(e,t,a){return e===24?t===0&&a===0:a>=0&&a<60&&t>=0&&t<60&&e>=0&&e<25}function KL(e,t){return t>=0&&t<=59}const JL={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},eF=(e,t,a)=>{let s;const n=JL[e];return typeof n=="string"?s=n:t===1?s=n.one:s=n.other.replace("{{count}}",String(t)),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"em "+s:"h "+s:s},tF={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},aF={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},sF={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},rF={date:el({formats:tF,defaultWidth:"full"}),time:el({formats:aF,defaultWidth:"full"}),dateTime:el({formats:sF,defaultWidth:"full"})},nF={lastWeek:e=>{const t=e.getDay();return"'"+(t===0||t===6?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},oF=(e,t,a,s)=>{const n=nF[e];return typeof n=="function"?n(t):n},iF={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},lF={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},cF={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},dF={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},uF={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},fF={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},hF=(e,t)=>{const a=Number(e);return(t==null?void 0:t.unit)==="week"?a+"":a+""},mF={ordinalNumber:hF,era:xr({values:iF,defaultWidth:"wide"}),quarter:xr({values:lF,defaultWidth:"wide",argumentCallback:e=>e-1}),month:xr({values:cF,defaultWidth:"wide"}),day:xr({values:dF,defaultWidth:"wide"}),dayPeriod:xr({values:uF,defaultWidth:"wide",formattingValues:fF,defaultFormattingWidth:"wide"})},pF=/^(\d+)[o]?/i,gF=/\d+/i,vF={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},xF={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},yF={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},_F={any:[/1/i,/2/i,/3/i,/4/i]},bF={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},wF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},jF={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},EF={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},SF={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},NF={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},CF={ordinalNumber:bC({matchPattern:pF,parsePattern:gF,valueCallback:e=>parseInt(e,10)}),era:yr({matchPatterns:vF,defaultMatchWidth:"wide",parsePatterns:xF,defaultParseWidth:"any"}),quarter:yr({matchPatterns:yF,defaultMatchWidth:"wide",parsePatterns:_F,defaultParseWidth:"any",valueCallback:e=>e+1}),month:yr({matchPatterns:bF,defaultMatchWidth:"wide",parsePatterns:wF,defaultParseWidth:"any"}),day:yr({matchPatterns:jF,defaultMatchWidth:"wide",parsePatterns:EF,defaultParseWidth:"any"}),dayPeriod:yr({matchPatterns:SF,defaultMatchWidth:"any",parsePatterns:NF,defaultParseWidth:"any"})},Fg={code:"pt-BR",formatDistance:eF,formatLong:rF,formatRelative:oF,localize:mF,match:CF,options:{weekStartsOn:0,firstWeekContainsDate:1}};function AF(){const[e,t]=u.useState([]),[a,s]=u.useState([]),[n,o]=u.useState([]),[i,l]=u.useState(""),[c,d]=u.useState(""),[f,h]=u.useState("all"),[p,m]=u.useState([]),[b,y]=u.useState(!0),[_,x]=u.useState(!1),[v,g]=u.useState(!1),[E,j]=u.useState(!1),[S,N]=u.useState(!1),[R,T]=u.useState(!1),[F,U]=u.useState(""),[Z,ce]=u.useState(!1),[k,M]=u.useState(!1),[A,q]=u.useState(null),[I,w]=u.useState(""),[C,$]=u.useState(""),[O,L]=u.useState(!1),[H,G]=u.useState(!1),{toast:te}=fa(),[Y,be]=u.useState({identificacao:"",nome:""}),[de,V]=u.useState({identificacao:"",nome:""});u.useEffect(()=>{ie()},[]),u.useEffect(()=>{i?xe():(t([]),s([]))},[i]),u.useEffect(()=>{le()},[c,f,e]);const le=()=>{let P=e;if(f!=="all"&&(P=P.filter(ee=>ee.status_calculado===f)),c.trim()){const ee=c.toLowerCase();P=P.filter(ue=>{var K;return ue.identificacao.toLowerCase().includes(ee)||((K=ue.nome)==null?void 0:K.toLowerCase().includes(ee))})}s(P)},B=P=>{if(!P)return"";try{const ee=IL(P);return Number.isNaN(ee.getTime())?"":EC(ee,"dd/MM/yyyy",{locale:Fg})}catch{return""}},ie=async()=>{try{y(!0);const{data:P,error:ee}=await z.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(ee)throw ee;o(P||[])}catch(P){te({title:"Erro ao carregar fazendas",description:P instanceof Error?P.message:"Erro desconhecido",variant:"destructive"})}finally{y(!1)}},xe=async()=>{try{x(!0);const{data:P,error:ee}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id, fazenda_nome_atual").eq("fazenda_id_atual",i);if(ee)throw ee;const ue=(P==null?void 0:P.map(je=>je.receptora_id))||[];if(ue.length===0){t([]),s([]),m([]);return}const{data:K,error:ne}=await z.from("receptoras").select("*").in("id",ue).order("identificacao",{ascending:!0});if(ne)throw ne;const D=new Map((P==null?void 0:P.map(je=>[je.receptora_id,je.fazenda_nome_atual]))||[]),Q=(K||[]).map(je=>({...je,fazenda_nome_atual:D.get(je.id)})),J=Q.map(je=>je.id),oe=await A5(J),ge=Q.map(je=>({...je,status_calculado:oe.get(je.id)||"VAZIA"})),Ne=["PRENHE","PRENHE_RETOQUE","PRENHE_FEMEA","PRENHE_MACHO","PRENHE_SEM_SEXO","PRENHE_2_SEXOS"],me=ge.filter(je=>Ne.includes(je.status_calculado)||je.status_calculado.includes("PRENHE"));if(me.length>0){const je=me.map(Je=>Je.id),{data:Ze,error:it}=await z.from("diagnosticos_gestacao").select("receptora_id, numero_gestacoes").in("receptora_id",je).in("resultado",["PRENHE","PRENHE_FEMEA","PRENHE_MACHO","PRENHE_SEM_SEXO","PRENHE_2_SEXOS"]).not("numero_gestacoes","is",null);if(!it&&Ze){const Je=new Map;Ze.forEach(mt=>{if(mt.numero_gestacoes&&mt.numero_gestacoes>1){const wt=Je.get(mt.receptora_id)||0;mt.numero_gestacoes>wt&&Je.set(mt.receptora_id,mt.numero_gestacoes)}}),ge.forEach(mt=>{const wt=Je.get(mt.id);wt&&wt>1&&(mt.numero_gestacoes=wt)})}}const _e=Array.from(new Set(ge.map(je=>je.status_calculado))).filter(je=>je).sort();m(_e),t(ge),s(ge),h("all")}catch(P){te({title:"Erro ao carregar receptoras",description:P instanceof Error?P.message:"Erro desconhecido",variant:"destructive"})}finally{x(!1)}},pe=async P=>{if(P.preventDefault(),!Y.identificacao.trim()){te({title:"Erro de validao",description:"Identificao (brinco)  obrigatria",variant:"destructive"});return}if(!i){te({title:"Erro de validao",description:"Selecione uma fazenda primeiro",variant:"destructive"});return}try{ce(!0);const{data:ee,error:ue}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",i);if(ue)throw console.error("Erro ao buscar receptoras da fazenda:",ue),ue;const K=(ee==null?void 0:ee.map(oe=>oe.receptora_id))||[];if(K.length>0){const{data:oe,error:ge}=await z.from("receptoras").select("id, identificacao, nome").in("id",K).ilike("identificacao",Y.identificacao.trim());if(ge)throw console.error("Erro ao verificar brinco duplicado:",ge),ge;if(oe&&oe.length>0){const Ne=oe[0].nome?`"${oe[0].nome}"`:"sem nome",me=`J existe uma receptora com o brinco "${Y.identificacao.trim()}" nesta fazenda (Nome: ${Ne}).`;throw console.error("Brinco duplicado detectado:",me,oe),new Error(me)}}if(Y.nome.trim()&&K.length>0){const{data:oe,error:ge}=await z.from("receptoras").select("id, identificacao").in("id",K).ilike("nome",Y.nome.trim());if(ge)throw console.error("Erro ao verificar nome duplicado:",ge),ge;if(oe&&oe.length>0)throw new Error(`J existe uma receptora com o nome "${Y.nome.trim()}" nesta fazenda (Brinco: ${oe[0].identificacao}).`)}const ne={identificacao:Y.identificacao};Y.nome.trim()&&(ne.nome=Y.nome);const{data:D,error:Q}=await z.from("receptoras").insert([ne]).select().single();if(Q)throw Q.code==="23505"?new Error("J existe uma receptora com esse brinco nesta fazenda."):Q;const{error:J}=await z.from("receptora_fazenda_historico").insert([{receptora_id:D.id,fazenda_id:i,data_inicio:new Date().toISOString().split("T")[0],data_fim:null}]);J&&console.error("Erro ao criar histrico de fazenda:",J),te({title:"Receptora criada",description:"Receptora criada com sucesso"}),g(!1),be({identificacao:"",nome:""}),xe()}catch(ee){te({title:"Erro ao criar receptora",description:ee instanceof Error?ee.message:"Erro desconhecido",variant:"destructive"})}finally{ce(!1)}},Ce=P=>{q(P),V({identificacao:P.identificacao,nome:P.nome||""}),j(!0)},De=async P=>{if(P.preventDefault(),!!A){if(!de.identificacao.trim()){te({title:"Erro de validao",description:"Identificao (brinco)  obrigatria",variant:"destructive"});return}try{ce(!0);const ee=A.identificacao,ue=de.identificacao.trim(),K=ee!==ue,ne={identificacao:ue,nome:de.nome.trim()||null},{error:D}=await z.from("receptoras").update(ne).eq("id",A.id);if(D)throw D.code==="23505"?new Error("J existe uma receptora com esse brinco nesta fazenda."):D;if(K)try{const{error:Q}=await z.from("receptora_renomeacoes_historico").insert([{receptora_id:A.id,brinco_anterior:ee,brinco_novo:ue,data_renomeacao:new Date().toISOString(),motivo:"EDICAO_MANUAL",observacoes:null}]);Q&&(Q.code==="42P01"?console.warn("Tabela receptora_renomeacoes_historico no existe. Execute o script criar_tabela_historico_renomeacoes.sql"):console.error("Erro ao registrar renomeao no histrico:",Q))}catch(Q){console.error("Erro ao registrar renomeao no histrico:",Q)}te({title:"Receptora atualizada",description:K?`Receptora atualizada. Brinco alterado de "${ee}" para "${ue}".`:"Receptora atualizada com sucesso"}),j(!1),q(null),xe()}catch(ee){te({title:"Erro ao atualizar receptora",description:ee instanceof Error?ee.message:"Erro desconhecido",variant:"destructive"})}finally{ce(!1)}}};u.useEffect(()=>{(async()=>{if(!A||!I){L(!1),$(""),G(!1);return}try{const{data:ee,error:ue}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",I);if(ue){console.error("Erro ao verificar receptoras na fazenda destino:",ue);return}const K=(ee==null?void 0:ee.map(Q=>Q.receptora_id))||[];if(K.length===0){L(!1),$(""),G(!1);return}if(A.nome&&A.nome.trim()){const{data:Q,error:J}=await z.from("receptoras").select("id, nome, identificacao").in("id",K).ilike("nome",A.nome.trim());J?console.error("Erro ao verificar nome:",J):Q&&Q.length>0?G(!0):G(!1)}else G(!1);const{data:ne,error:D}=await z.from("receptoras").select("id, identificacao").in("id",K).ilike("identificacao",A.identificacao);if(D){console.error("Erro ao verificar brinco:",D);return}if(ne&&ne.length>0){L(!0);const Q=async(J,oe=0)=>{if(oe>10)throw new Error("No foi possvel gerar um brinco disponvel aps vrias tentativas");const ge=new Date,Ne=String(ge.getDate()).padStart(2,"0"),me=String(ge.getMonth()+1).padStart(2,"0"),_e=oe===0?`-MOV${Ne}${me}`:`-MOV${Ne}${me}-${oe}`,je=`${J}${_e}`,{data:Ze,error:it}=await z.from("receptoras").select("id, identificacao").in("id",K).ilike("identificacao",je);return it?(console.error("Erro ao verificar novo brinco:",it),je):Ze&&Ze.length>0?Q(J,oe+1):je};try{const J=await Q(A.identificacao);$(J)}catch(J){console.error("Erro ao gerar brinco disponvel:",J);const oe=new Date,ge=String(oe.getDate()).padStart(2,"0"),Ne=String(oe.getMonth()+1).padStart(2,"0"),me=`-MOV${ge}${Ne}`;$(`${A.identificacao}${me}`)}}else L(!1),$("")}catch(ee){console.error("Erro ao verificar conflitos:",ee)}})()},[A,I]);const he=async()=>{if(!A||!I){te({title:"Erro de validao",description:"Selecione uma fazenda de destino",variant:"destructive"});return}if(H&&A.nome&&A.nome.trim()){te({title:"Conflito de nome",description:`J existe uma receptora com o nome "${A.nome.trim()}" na fazenda destino. No  possvel mover esta receptora.`,variant:"destructive"});return}try{M(!0);const{data:P,error:ee}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",I);if(!ee&&P){const Q=P.map(J=>J.receptora_id);if(Q.length>0){const{data:J,error:oe}=await z.from("receptoras").select("id, identificacao").in("id",Q).ilike("identificacao",A.identificacao);if(!oe&&J&&J.length>0&&(!O||!C)){M(!1),te({title:"Conflito de brinco",description:`J existe uma receptora com o brinco "${A.identificacao}" na fazenda destino. Aguarde enquanto o sistema gera um novo brinco...`,variant:"destructive"}),L(!0);return}}}const ue=A.identificacao;let K=ue;if(O&&C){const{data:Q,error:J}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",I);if(!J&&Q){const ge=Q.map(Ne=>Ne.receptora_id);if(ge.length>0){const{data:Ne,error:me}=await z.from("receptoras").select("id, identificacao").in("id",ge).ilike("identificacao",C);if(!me&&Ne&&Ne.length>0){let _e=1,je=C;for(;_e<=10;){const Ze=new Date,it=String(Ze.getDate()).padStart(2,"0"),Je=String(Ze.getMonth()+1).padStart(2,"0"),mt=`-MOV${it}${Je}-${_e}`;je=`${ue}${mt}`;const{data:wt,error:ka}=await z.from("receptoras").select("id").in("id",ge).ilike("identificacao",je);if(!ka&&(!wt||wt.length===0))break;_e++}K=je}else K=C}else K=C}else K=C;const{error:oe}=await z.from("receptoras").update({identificacao:K}).eq("id",A.id);if(oe)throw new Error(`Erro ao atualizar brinco: ${oe.message}`);try{const{error:ge}=await z.from("receptora_renomeacoes_historico").insert([{receptora_id:A.id,brinco_anterior:ue,brinco_novo:K,data_renomeacao:new Date().toISOString(),motivo:"MUDANCA_FAZENDA",observacoes:"Renomeao automtica devido a conflito de brinco na fazenda destino"}]);ge&&(ge.code==="42P01"?console.warn("Tabela receptora_renomeacoes_historico no existe. Execute o script criar_tabela_historico_renomeacoes.sql"):console.error("Erro ao registrar renomeao no histrico:",ge))}catch(ge){console.error("Erro ao registrar renomeao no histrico:",ge)}A.identificacao=K}const{data:ne,error:D}=await z.rpc("mover_receptora_fazenda",{p_receptora_id:A.id,p_nova_fazenda_id:I,p_data_mudanca:new Date().toISOString().split("T")[0],p_observacoes:null});if(D){console.error("Erro ao mover receptora:",D),console.error("Receptora ID:",A.id),console.error("Nova Fazenda ID:",I),console.error("Error code:",D.code),console.error("Error message:",D.message),console.error("Error details:",D.details);let Q="Erro ao mover receptora";D.message?Q=D.message:D.details&&(Q=D.details),te({title:"Erro ao mover receptora",description:Q,variant:"destructive"}),M(!1);return}te({title:"Receptora movida",description:O?`Receptora movida com sucesso. Brinco atualizado de "${ue}" para "${A.identificacao}" devido a conflito na fazenda destino.`:"Receptora movida para a nova fazenda com sucesso. Protocolos e histrico no foram afetados."}),N(!1),j(!1),q(null),w(""),L(!1),$(""),G(!1),xe()}catch(P){console.error("Erro catch ao mover receptora:",P);const ee=P instanceof Error?P.message:"Erro desconhecido ao mover receptora";te({title:"Erro ao mover receptora",description:ee,variant:"destructive"})}finally{M(!1)}};return b?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Receptoras"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar receptoras por fazenda"})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Selecione a Fazenda *"})}),r.jsx(ke,{children:r.jsxs(_t,{value:i,onValueChange:l,children:[r.jsx(pt,{className:"w-full",children:r.jsx(bt,{placeholder:"Selecione uma fazenda para listar receptoras"})}),r.jsx(gt,{children:n.map(P=>r.jsx(Ie,{value:P.id,children:P.nome},P.id))})]})})]}),i?r.jsxs(r.Fragment,{children:[r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Filtros"})}),r.jsx(ke,{children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 max-w-md",children:[r.jsx(ae,{htmlFor:"filtro-status",children:"Status"}),r.jsxs(_t,{value:f,onValueChange:h,children:[r.jsx(pt,{id:"filtro-status",children:r.jsx(bt,{placeholder:"Todas"})}),r.jsxs(gt,{children:[r.jsx(Ie,{value:"all",children:"Todas"}),p.map(P=>r.jsx(Ie,{value:P,children:hC(P)},P))]})]})]}),r.jsxs("div",{className:"flex-1 max-w-md",children:[r.jsx(ae,{htmlFor:"busca",children:"Buscar por brinco ou nome"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ul,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),r.jsx(Ee,{id:"busca",placeholder:"Buscar por brinco ou nome...",value:c,onChange:P=>d(P.target.value),className:"pl-10"})]})]})]})})]}),r.jsx("div",{className:"flex items-center justify-end",children:r.jsxs(da,{open:v,onOpenChange:g,children:[r.jsx(ln,{asChild:!0,children:r.jsxs(re,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ar,{className:"w-4 h-4 mr-2"}),"Nova Receptora"]})}),r.jsxs(sa,{className:"max-w-md",children:[r.jsxs(ra,{children:[r.jsx(na,{children:"Criar Nova Receptora"}),r.jsx(ua,{children:"Criar receptora na fazenda selecionada"})]}),r.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"identificacao",children:"Identificao (Brinco) *"}),r.jsx(Ee,{id:"identificacao",value:Y.identificacao,onChange:P=>be({...Y,identificacao:P.target.value}),placeholder:"Nmero do brinco",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"nome",children:"Nome"}),r.jsx(Ee,{id:"nome",value:Y.nome,onChange:P=>be({...Y,nome:P.target.value}),placeholder:"Nome da receptora (opcional)"})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(re,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:Z,children:Z?"Salvando...":"Salvar"}),r.jsx(re,{type:"button",variant:"outline",onClick:()=>g(!1),disabled:Z,children:"Cancelar"})]})]})]})]})}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsxs(Pe,{children:["Lista de Receptoras (",a.length,")"]})}),r.jsx(ke,{children:_?r.jsx("div",{className:"py-8",children:r.jsx(Pt,{})}):r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Brinco"}),r.jsx(X,{children:"Nome"}),r.jsx(X,{children:"Status Atual"}),r.jsx(X,{children:"Data de parto"}),r.jsx(X,{className:"text-right",children:"Aes"})]})}),r.jsx(Tt,{children:a.length===0?r.jsx(Oe,{children:r.jsx(W,{colSpan:5,className:"text-center text-slate-500",children:c?"Nenhuma receptora encontrada":"Nenhuma receptora cadastrada nesta fazenda"})}):a.map(P=>r.jsxs(Oe,{children:[r.jsx(W,{className:"font-medium",children:P.identificacao}),r.jsx(W,{children:P.nome||"-"}),r.jsx(W,{children:r.jsx(cn,{status:P.status_calculado,count:P.numero_gestacoes})}),r.jsx(W,{children:P.status_calculado.includes("PRENHE")&&P.data_provavel_parto?B(P.data_provavel_parto):""}),r.jsx(W,{className:"text-right",children:r.jsxs("div",{className:"flex gap-1 justify-end",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>Ce(P),title:"Editar",children:r.jsx(od,{className:"w-4 h-4"})}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{U(P.id),T(!0)},title:"Ver histrico",children:r.jsx(Kv,{className:"w-4 h-4"})})]})})]},P.id))})]})})]})]}):r.jsx(Me,{children:r.jsx(ke,{className:"py-12 text-center",children:r.jsx("p",{className:"text-slate-500 text-lg",children:"Selecione uma fazenda para listar receptoras"})})}),r.jsx(da,{open:E,onOpenChange:j,children:r.jsxs(sa,{className:"max-w-md",children:[r.jsxs(ra,{children:[r.jsx(na,{children:"Editar Receptora"}),r.jsx(ua,{children:"Atualizar dados da receptora"})]}),r.jsxs("form",{onSubmit:De,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"edit_identificacao",children:"Identificao (Brinco) *"}),r.jsx(Ee,{id:"edit_identificacao",value:de.identificacao,onChange:P=>V({...de,identificacao:P.target.value}),placeholder:"Nmero do brinco",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"edit_nome",children:"Nome"}),r.jsx(Ee,{id:"edit_nome",value:de.nome,onChange:P=>V({...de,nome:P.target.value}),placeholder:"Nome da receptora (opcional)"})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(re,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:Z,children:Z?"Salvando...":"Salvar Alteraes"}),r.jsx(re,{type:"button",variant:"outline",onClick:()=>j(!1),disabled:Z,children:"Cancelar"})]})]}),r.jsxs("div",{className:"relative my-4",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("span",{className:"w-full border-t"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-white px-2 text-slate-500",children:"Ou"})})]}),r.jsxs(re,{type:"button",variant:"outline",className:"w-full",onClick:()=>{N(!0),w("")},disabled:Z,children:[r.jsx(FR,{className:"w-4 h-4 mr-2"}),"Mover para outra fazenda"]})]})}),r.jsx(da,{open:S,onOpenChange:P=>{N(P),P||(L(!1),$(""))},children:r.jsxs(sa,{className:"max-w-md",children:[r.jsxs(ra,{children:[r.jsx(na,{children:"Mover Receptora"}),r.jsxs(ua,{children:["Mover ",A==null?void 0:A.identificacao," para outra fazenda. Protocolos e histrico reprodutivo no sero afetados."]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"nova_fazenda",children:"Nova Fazenda *"}),r.jsxs(_t,{value:I,onValueChange:w,children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione a fazenda de destino"})}),r.jsx(gt,{children:n.filter(P=>P.id!==i).map(P=>r.jsx(Ie,{value:P.id,children:P.nome},P.id))})]})]}),H&&(A==null?void 0:A.nome)&&r.jsxs("div",{className:"space-y-2 p-3 bg-red-50 border border-red-200 rounded-md",children:[r.jsx("div",{className:"flex items-start gap-2",children:r.jsx("div",{className:"text-red-800 text-sm font-medium",children:" Conflito de Nome Detectado"})}),r.jsxs("div",{className:"text-red-700 text-sm",children:['J existe uma receptora com o nome "',A.nome.trim(),'" na fazenda destino.']}),r.jsx("div",{className:"text-red-600 text-xs",children:"No  possvel mover esta receptora. Edite o nome da receptora antes de mov-la."})]}),O&&C&&r.jsxs("div",{className:"space-y-2 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:[r.jsx("div",{className:"flex items-start gap-2",children:r.jsx("div",{className:"text-yellow-800 text-sm font-medium",children:" Conflito de Brinco Detectado"})}),r.jsxs("div",{className:"text-yellow-700 text-sm",children:['J existe uma receptora com o brinco "',A==null?void 0:A.identificacao,'" na fazenda destino.']}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(ae,{className:"text-yellow-800 text-sm font-medium",children:"Novo Brinco Proposto:"}),r.jsx("div",{className:"p-2 bg-white border border-yellow-300 rounded text-sm font-mono text-yellow-900",children:C}),r.jsx("div",{className:"text-yellow-600 text-xs",children:"O brinco ser automaticamente atualizado para permitir a movimentao."})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(re,{type:"button",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:he,disabled:k||!I||H||O&&!C,children:k?"Movendo...":"Confirmar Movimentao"}),r.jsx(re,{type:"button",variant:"outline",onClick:()=>{N(!1),L(!1),$(""),G(!1)},disabled:k,children:"Cancelar"})]})]})]})}),r.jsx(gC,{receptoraId:F,open:R,onClose:()=>T(!1)})]})]})}function DF(e,t,a="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:e,timeZoneName:a}).format(t).split(/\s/g).slice(2).join(" ")}const sp={},Ec={};function Co(e,t){try{const s=(sp[e]||(sp[e]=new Intl.DateTimeFormat("en-US",{timeZone:e,timeZoneName:"longOffset"}).format))(t).split("GMT")[1];return s in Ec?Ec[s]:V_(s,s.split(":"))}catch{if(e in Ec)return Ec[e];const a=e==null?void 0:e.match(TF);return a?V_(e,a.slice(1)):NaN}}const TF=/([+-]\d\d):?(\d\d)?/;function V_(e,t){const a=+(t[0]||0),s=+(t[1]||0),n=+(t[2]||0)/60;return Ec[e]=a*60+s>0?a*60+s+n:a*60-s-n}class wr extends Date{constructor(...t){super(),t.length>1&&typeof t[t.length-1]=="string"&&(this.timeZone=t.pop()),this.internal=new Date,isNaN(Co(this.timeZone,this))?this.setTime(NaN):t.length?typeof t[0]=="number"&&(t.length===1||t.length===2&&typeof t[1]!="number")?this.setTime(t[0]):typeof t[0]=="string"?this.setTime(+new Date(t[0])):t[0]instanceof Date?this.setTime(+t[0]):(this.setTime(+new Date(...t)),NC(this),$g(this)):this.setTime(Date.now())}static tz(t,...a){return a.length?new wr(...a,t):new wr(Date.now(),t)}withTimeZone(t){return new wr(+this,t)}getTimezoneOffset(){const t=-Co(this.timeZone,this);return t>0?Math.floor(t):Math.ceil(t)}setTime(t){return Date.prototype.setTime.apply(this,arguments),$g(this),+this}[Symbol.for("constructDateFrom")](t){return new wr(+new Date(t),this.timeZone)}}const G_=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!G_.test(e))return;const t=e.replace(G_,"$1UTC");wr.prototype[t]&&(e.startsWith("get")?wr.prototype[e]=function(){return this.internal[t]()}:(wr.prototype[e]=function(){return Date.prototype[t].apply(this.internal,arguments),OF(this),+this},wr.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),$g(this),+this}))});function $g(e){e.internal.setTime(+e),e.internal.setUTCSeconds(e.internal.getUTCSeconds()-Math.round(-Co(e.timeZone,e)*60))}function OF(e){Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),NC(e)}function NC(e){const t=Co(e.timeZone,e),a=t>0?Math.floor(t):Math.ceil(t),s=new Date(+e);s.setUTCHours(s.getUTCHours()-1);const n=-new Date(+e).getTimezoneOffset(),o=-new Date(+s).getTimezoneOffset(),i=n-o,l=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();i&&l&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+i);const c=n-a;c&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+c);const d=new Date(+e);d.setUTCSeconds(0);const f=n>0?d.getSeconds():(d.getSeconds()-60)%60,h=Math.round(-(Co(e.timeZone,e)*60))%60;(h||f)&&(e.internal.setUTCSeconds(e.internal.getUTCSeconds()+h),Date.prototype.setUTCSeconds.call(e,Date.prototype.getUTCSeconds.call(e)+h+f));const p=Co(e.timeZone,e),m=p>0?Math.floor(p):Math.ceil(p),y=-new Date(+e).getTimezoneOffset()-m,_=m!==a,x=y-c;if(_&&x){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+x);const v=Co(e.timeZone,e),g=v>0?Math.floor(v):Math.ceil(v),E=m-g;E&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+E),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+E))}}class Va extends wr{static tz(t,...a){return a.length?new Va(...a,t):new Va(Date.now(),t)}toISOString(){const[t,a,s]=this.tzComponents(),n=`${t}${a}:${s}`;return this.internal.toISOString().slice(0,-1)+n}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[t,a,s,n]=this.internal.toUTCString().split(" ");return`${t==null?void 0:t.slice(0,-1)} ${s} ${a} ${n}`}toTimeString(){const t=this.internal.toUTCString().split(" ")[4],[a,s,n]=this.tzComponents();return`${t} GMT${a}${s}${n} (${DF(this.timeZone,this)})`}toLocaleString(t,a){return Date.prototype.toLocaleString.call(this,t,{...a,timeZone:(a==null?void 0:a.timeZone)||this.timeZone})}toLocaleDateString(t,a){return Date.prototype.toLocaleDateString.call(this,t,{...a,timeZone:(a==null?void 0:a.timeZone)||this.timeZone})}toLocaleTimeString(t,a){return Date.prototype.toLocaleTimeString.call(this,t,{...a,timeZone:(a==null?void 0:a.timeZone)||this.timeZone})}tzComponents(){const t=this.getTimezoneOffset(),a=t>0?"-":"+",s=String(Math.floor(Math.abs(t)/60)).padStart(2,"0"),n=String(Math.abs(t)%60).padStart(2,"0");return[a,s,n]}withTimeZone(t){return new Va(+this,t)}[Symbol.for("constructDateFrom")](t){return new Va(+new Date(t),this.timeZone)}}const CC=6048e5,RF=864e5,Y_=Symbol.for("constructDateFrom");function Aa(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Y_ in e?e[Y_](t):e instanceof Date?new e.constructor(t):new Date(t)}function Zt(e,t){return Aa(t||e,e)}function AC(e,t,a){const s=Zt(e,a==null?void 0:a.in);return isNaN(t)?Aa(e,NaN):(t&&s.setDate(s.getDate()+t),s)}function DC(e,t,a){const s=Zt(e,a==null?void 0:a.in);if(isNaN(t))return Aa(e,NaN);if(!t)return s;const n=s.getDate(),o=Aa(e,s.getTime());o.setMonth(s.getMonth()+t+1,0);const i=o.getDate();return n>=i?o:(s.setFullYear(o.getFullYear(),o.getMonth(),n),s)}let MF={};function Xd(){return MF}function Sl(e,t){var l,c,d,f;const a=Xd(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??a.weekStartsOn??((f=(d=a.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,n=Zt(e,t==null?void 0:t.in),o=n.getDay(),i=(o<s?7:0)+o-s;return n.setDate(n.getDate()-i),n.setHours(0,0,0,0),n}function xd(e,t){return Sl(e,{...t,weekStartsOn:1})}function TC(e,t){const a=Zt(e,t==null?void 0:t.in),s=a.getFullYear(),n=Aa(a,0);n.setFullYear(s+1,0,4),n.setHours(0,0,0,0);const o=xd(n),i=Aa(a,0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);const l=xd(i);return a.getTime()>=o.getTime()?s+1:a.getTime()>=l.getTime()?s:s-1}function W_(e){const t=Zt(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),+e-+a}function Jl(e,...t){const a=Aa.bind(null,t.find(s=>typeof s=="object"));return t.map(a)}function yd(e,t){const a=Zt(e,t==null?void 0:t.in);return a.setHours(0,0,0,0),a}function OC(e,t,a){const[s,n]=Jl(a==null?void 0:a.in,e,t),o=yd(s),i=yd(n),l=+o-W_(o),c=+i-W_(i);return Math.round((l-c)/RF)}function kF(e,t){const a=TC(e,t),s=Aa(e,0);return s.setFullYear(a,0,4),s.setHours(0,0,0,0),xd(s)}function zF(e,t,a){return AC(e,t*7,a)}function PF(e,t,a){return DC(e,t*12,a)}function IF(e,t){let a,s=t==null?void 0:t.in;return e.forEach(n=>{!s&&typeof n=="object"&&(s=Aa.bind(null,n));const o=Zt(n,s);(!a||a<o||isNaN(+o))&&(a=o)}),Aa(s,a||NaN)}function LF(e,t){let a,s=t==null?void 0:t.in;return e.forEach(n=>{!s&&typeof n=="object"&&(s=Aa.bind(null,n));const o=Zt(n,s);(!a||a>o||isNaN(+o))&&(a=o)}),Aa(s,a||NaN)}function FF(e,t,a){const[s,n]=Jl(a==null?void 0:a.in,e,t);return+yd(s)==+yd(n)}function RC(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function $F(e){return!(!RC(e)&&typeof e!="number"||isNaN(+Zt(e)))}function qF(e,t,a){const[s,n]=Jl(a==null?void 0:a.in,e,t),o=s.getFullYear()-n.getFullYear(),i=s.getMonth()-n.getMonth();return o*12+i}function BF(e,t){const a=Zt(e,t==null?void 0:t.in),s=a.getMonth();return a.setFullYear(a.getFullYear(),s+1,0),a.setHours(23,59,59,999),a}function UF(e,t){const[a,s]=Jl(e,t.start,t.end);return{start:a,end:s}}function HF(e,t){const{start:a,end:s}=UF(t==null?void 0:t.in,e);let n=+a>+s;const o=n?+a:+s,i=n?s:a;i.setHours(0,0,0,0),i.setDate(1);let l=1;const c=[];for(;+i<=o;)c.push(Aa(a,i)),i.setMonth(i.getMonth()+l);return n?c.reverse():c}function VF(e,t){const a=Zt(e,t==null?void 0:t.in);return a.setDate(1),a.setHours(0,0,0,0),a}function GF(e,t){const a=Zt(e,t==null?void 0:t.in),s=a.getFullYear();return a.setFullYear(s+1,0,0),a.setHours(23,59,59,999),a}function MC(e,t){const a=Zt(e,t==null?void 0:t.in);return a.setFullYear(a.getFullYear(),0,1),a.setHours(0,0,0,0),a}function kC(e,t){var l,c,d,f;const a=Xd(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??a.weekStartsOn??((f=(d=a.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,n=Zt(e,t==null?void 0:t.in),o=n.getDay(),i=(o<s?-7:0)+6-(o-s);return n.setDate(n.getDate()+i),n.setHours(23,59,59,999),n}function YF(e,t){return kC(e,{...t,weekStartsOn:1})}const WF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},QF=(e,t,a)=>{let s;const n=WF[e];return typeof n=="string"?s=n:t===1?s=n.one:s=n.other.replace("{{count}}",t.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+s:s+" ago":s};function rp(e){return(t={})=>{const a=t.width?String(t.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}const ZF={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},XF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},KF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},JF={date:rp({formats:ZF,defaultWidth:"full"}),time:rp({formats:XF,defaultWidth:"full"}),dateTime:rp({formats:KF,defaultWidth:"full"})},e$={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},t$=(e,t,a,s)=>e$[e];function mc(e){return(t,a)=>{const s=a!=null&&a.context?String(a.context):"standalone";let n;if(s==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=a!=null&&a.width?String(a.width):i;n=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=a!=null&&a.width?String(a.width):e.defaultWidth;n=e.values[l]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return n[o]}}const a$={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},s$={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},r$={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},n$={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},o$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},i$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},l$=(e,t)=>{const a=Number(e),s=a%100;if(s>20||s<10)switch(s%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},c$={ordinalNumber:l$,era:mc({values:a$,defaultWidth:"wide"}),quarter:mc({values:s$,defaultWidth:"wide",argumentCallback:e=>e-1}),month:mc({values:r$,defaultWidth:"wide"}),day:mc({values:n$,defaultWidth:"wide"}),dayPeriod:mc({values:o$,defaultWidth:"wide",formattingValues:i$,defaultFormattingWidth:"wide"})};function pc(e){return(t,a={})=>{const s=a.width,n=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],o=t.match(n);if(!o)return null;const i=o[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?u$(l,h=>h.test(i)):d$(l,h=>h.test(i));let d;d=e.valueCallback?e.valueCallback(c):c,d=a.valueCallback?a.valueCallback(d):d;const f=t.slice(i.length);return{value:d,rest:f}}}function d$(e,t){for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return a}function u$(e,t){for(let a=0;a<e.length;a++)if(t(e[a]))return a}function f$(e){return(t,a={})=>{const s=t.match(e.matchPattern);if(!s)return null;const n=s[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=a.valueCallback?a.valueCallback(i):i;const l=t.slice(n.length);return{value:i,rest:l}}}const h$=/^(\d+)(th|st|nd|rd)?/i,m$=/\d+/i,p$={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},g$={any:[/^b/i,/^(a|c)/i]},v$={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},x$={any:[/1/i,/2/i,/3/i,/4/i]},y$={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_$={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},b$={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},w$={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},j$={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},E$={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},S$={ordinalNumber:f$({matchPattern:h$,parsePattern:m$,valueCallback:e=>parseInt(e,10)}),era:pc({matchPatterns:p$,defaultMatchWidth:"wide",parsePatterns:g$,defaultParseWidth:"any"}),quarter:pc({matchPatterns:v$,defaultMatchWidth:"wide",parsePatterns:x$,defaultParseWidth:"any",valueCallback:e=>e+1}),month:pc({matchPatterns:y$,defaultMatchWidth:"wide",parsePatterns:_$,defaultParseWidth:"any"}),day:pc({matchPatterns:b$,defaultMatchWidth:"wide",parsePatterns:w$,defaultParseWidth:"any"}),dayPeriod:pc({matchPatterns:j$,defaultMatchWidth:"any",parsePatterns:E$,defaultParseWidth:"any"})},qx={code:"en-US",formatDistance:QF,formatLong:JF,formatRelative:t$,localize:c$,match:S$,options:{weekStartsOn:0,firstWeekContainsDate:1}};function N$(e,t){const a=Zt(e,t==null?void 0:t.in);return OC(a,MC(a))+1}function zC(e,t){const a=Zt(e,t==null?void 0:t.in),s=+xd(a)-+kF(a);return Math.round(s/CC)+1}function PC(e,t){var f,h,p,m;const a=Zt(e,t==null?void 0:t.in),s=a.getFullYear(),n=Xd(),o=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,i=Aa((t==null?void 0:t.in)||e,0);i.setFullYear(s+1,0,o),i.setHours(0,0,0,0);const l=Sl(i,t),c=Aa((t==null?void 0:t.in)||e,0);c.setFullYear(s,0,o),c.setHours(0,0,0,0);const d=Sl(c,t);return+a>=+l?s+1:+a>=+d?s:s-1}function C$(e,t){var l,c,d,f;const a=Xd(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??a.firstWeekContainsDate??((f=(d=a.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,n=PC(e,t),o=Aa((t==null?void 0:t.in)||e,0);return o.setFullYear(n,0,s),o.setHours(0,0,0,0),Sl(o,t)}function IC(e,t){const a=Zt(e,t==null?void 0:t.in),s=+Sl(a,t)-+C$(a,t);return Math.round(s/CC)+1}function Ut(e,t){const a=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return a+s}const wn={y(e,t){const a=e.getFullYear(),s=a>0?a:1-a;return Ut(t==="yy"?s%100:s,t.length)},M(e,t){const a=e.getMonth();return t==="M"?String(a+1):Ut(a+1,2)},d(e,t){return Ut(e.getDate(),t.length)},a(e,t){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(e,t){return Ut(e.getHours()%12||12,t.length)},H(e,t){return Ut(e.getHours(),t.length)},m(e,t){return Ut(e.getMinutes(),t.length)},s(e,t){return Ut(e.getSeconds(),t.length)},S(e,t){const a=t.length,s=e.getMilliseconds(),n=Math.trunc(s*Math.pow(10,a-3));return Ut(n,t.length)}},bi={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Q_={G:function(e,t,a){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(s,{width:"abbreviated"});case"GGGGG":return a.era(s,{width:"narrow"});case"GGGG":default:return a.era(s,{width:"wide"})}},y:function(e,t,a){if(t==="yo"){const s=e.getFullYear(),n=s>0?s:1-s;return a.ordinalNumber(n,{unit:"year"})}return wn.y(e,t)},Y:function(e,t,a,s){const n=PC(e,s),o=n>0?n:1-n;if(t==="YY"){const i=o%100;return Ut(i,2)}return t==="Yo"?a.ordinalNumber(o,{unit:"year"}):Ut(o,t.length)},R:function(e,t){const a=TC(e);return Ut(a,t.length)},u:function(e,t){const a=e.getFullYear();return Ut(a,t.length)},Q:function(e,t,a){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Ut(s,2);case"Qo":return a.ordinalNumber(s,{unit:"quarter"});case"QQQ":return a.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,a){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Ut(s,2);case"qo":return a.ordinalNumber(s,{unit:"quarter"});case"qqq":return a.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,a){const s=e.getMonth();switch(t){case"M":case"MM":return wn.M(e,t);case"Mo":return a.ordinalNumber(s+1,{unit:"month"});case"MMM":return a.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,a){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Ut(s+1,2);case"Lo":return a.ordinalNumber(s+1,{unit:"month"});case"LLL":return a.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,a,s){const n=IC(e,s);return t==="wo"?a.ordinalNumber(n,{unit:"week"}):Ut(n,t.length)},I:function(e,t,a){const s=zC(e);return t==="Io"?a.ordinalNumber(s,{unit:"week"}):Ut(s,t.length)},d:function(e,t,a){return t==="do"?a.ordinalNumber(e.getDate(),{unit:"date"}):wn.d(e,t)},D:function(e,t,a){const s=N$(e);return t==="Do"?a.ordinalNumber(s,{unit:"dayOfYear"}):Ut(s,t.length)},E:function(e,t,a){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return a.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(s,{width:"short",context:"formatting"});case"EEEE":default:return a.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,a,s){const n=e.getDay(),o=(n-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Ut(o,2);case"eo":return a.ordinalNumber(o,{unit:"day"});case"eee":return a.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(n,{width:"short",context:"formatting"});case"eeee":default:return a.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,a,s){const n=e.getDay(),o=(n-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Ut(o,t.length);case"co":return a.ordinalNumber(o,{unit:"day"});case"ccc":return a.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(n,{width:"narrow",context:"standalone"});case"cccccc":return a.day(n,{width:"short",context:"standalone"});case"cccc":default:return a.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,a){const s=e.getDay(),n=s===0?7:s;switch(t){case"i":return String(n);case"ii":return Ut(n,t.length);case"io":return a.ordinalNumber(n,{unit:"day"});case"iii":return a.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(s,{width:"short",context:"formatting"});case"iiii":default:return a.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,a){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,a){const s=e.getHours();let n;switch(s===12?n=bi.noon:s===0?n=bi.midnight:n=s/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,a){const s=e.getHours();let n;switch(s>=17?n=bi.evening:s>=12?n=bi.afternoon:s>=4?n=bi.morning:n=bi.night,t){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,a){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),a.ordinalNumber(s,{unit:"hour"})}return wn.h(e,t)},H:function(e,t,a){return t==="Ho"?a.ordinalNumber(e.getHours(),{unit:"hour"}):wn.H(e,t)},K:function(e,t,a){const s=e.getHours()%12;return t==="Ko"?a.ordinalNumber(s,{unit:"hour"}):Ut(s,t.length)},k:function(e,t,a){let s=e.getHours();return s===0&&(s=24),t==="ko"?a.ordinalNumber(s,{unit:"hour"}):Ut(s,t.length)},m:function(e,t,a){return t==="mo"?a.ordinalNumber(e.getMinutes(),{unit:"minute"}):wn.m(e,t)},s:function(e,t,a){return t==="so"?a.ordinalNumber(e.getSeconds(),{unit:"second"}):wn.s(e,t)},S:function(e,t){return wn.S(e,t)},X:function(e,t,a){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return X_(s);case"XXXX":case"XX":return So(s);case"XXXXX":case"XXX":default:return So(s,":")}},x:function(e,t,a){const s=e.getTimezoneOffset();switch(t){case"x":return X_(s);case"xxxx":case"xx":return So(s);case"xxxxx":case"xxx":default:return So(s,":")}},O:function(e,t,a){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Z_(s,":");case"OOOO":default:return"GMT"+So(s,":")}},z:function(e,t,a){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Z_(s,":");case"zzzz":default:return"GMT"+So(s,":")}},t:function(e,t,a){const s=Math.trunc(+e/1e3);return Ut(s,t.length)},T:function(e,t,a){return Ut(+e,t.length)}};function Z_(e,t=""){const a=e>0?"-":"+",s=Math.abs(e),n=Math.trunc(s/60),o=s%60;return o===0?a+String(n):a+String(n)+t+Ut(o,2)}function X_(e,t){return e%60===0?(e>0?"-":"+")+Ut(Math.abs(e)/60,2):So(e,t)}function So(e,t=""){const a=e>0?"-":"+",s=Math.abs(e),n=Ut(Math.trunc(s/60),2),o=Ut(s%60,2);return a+n+t+o}const K_=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},LC=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},A$=(e,t)=>{const a=e.match(/(P+)(p+)?/)||[],s=a[1],n=a[2];if(!n)return K_(e,t);let o;switch(s){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",K_(s,t)).replace("{{time}}",LC(n,t))},D$={p:LC,P:A$},T$=/^D+$/,O$=/^Y+$/,R$=["D","DD","YY","YYYY"];function M$(e){return T$.test(e)}function k$(e){return O$.test(e)}function z$(e,t,a){const s=P$(e,t,a);if(console.warn(s),R$.includes(e))throw new RangeError(s)}function P$(e,t,a){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const I$=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,L$=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,F$=/^'([^]*?)'?$/,$$=/''/g,q$=/[a-zA-Z]/;function B$(e,t,a){var f,h,p,m,b,y,_,x;const s=Xd(),n=(a==null?void 0:a.locale)??s.locale??qx,o=(a==null?void 0:a.firstWeekContainsDate)??((h=(f=a==null?void 0:a.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(p=s.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,i=(a==null?void 0:a.weekStartsOn)??((y=(b=a==null?void 0:a.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??s.weekStartsOn??((x=(_=s.locale)==null?void 0:_.options)==null?void 0:x.weekStartsOn)??0,l=Zt(e,a==null?void 0:a.in);if(!$F(l))throw new RangeError("Invalid time value");let c=t.match(L$).map(v=>{const g=v[0];if(g==="p"||g==="P"){const E=D$[g];return E(v,n.formatLong)}return v}).join("").match(I$).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const g=v[0];if(g==="'")return{isToken:!1,value:U$(v)};if(Q_[g])return{isToken:!0,value:v};if(g.match(q$))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:v}});n.localize.preprocessor&&(c=n.localize.preprocessor(l,c));const d={firstWeekContainsDate:o,weekStartsOn:i,locale:n};return c.map(v=>{if(!v.isToken)return v.value;const g=v.value;(!(a!=null&&a.useAdditionalWeekYearTokens)&&k$(g)||!(a!=null&&a.useAdditionalDayOfYearTokens)&&M$(g))&&z$(g,t,String(e));const E=Q_[g[0]];return E(l,g,n.localize,d)}).join("")}function U$(e){const t=e.match(F$);return t?t[1].replace($$,"'"):e}function H$(e,t){const a=Zt(e,t==null?void 0:t.in),s=a.getFullYear(),n=a.getMonth(),o=Aa(a,0);return o.setFullYear(s,n+1,0),o.setHours(0,0,0,0),o.getDate()}function V$(e,t){return Zt(e,t==null?void 0:t.in).getMonth()}function G$(e,t){return Zt(e,t==null?void 0:t.in).getFullYear()}function Y$(e,t){return+Zt(e)>+Zt(t)}function W$(e,t){return+Zt(e)<+Zt(t)}function Q$(e,t,a){const[s,n]=Jl(a==null?void 0:a.in,e,t);return s.getFullYear()===n.getFullYear()&&s.getMonth()===n.getMonth()}function Z$(e,t,a){const[s,n]=Jl(a==null?void 0:a.in,e,t);return s.getFullYear()===n.getFullYear()}function X$(e,t,a){const s=Zt(e,a==null?void 0:a.in),n=s.getFullYear(),o=s.getDate(),i=Aa(e,0);i.setFullYear(n,t,15),i.setHours(0,0,0,0);const l=H$(i);return s.setMonth(t,Math.min(o,l)),s}function K$(e,t,a){const s=Zt(e,a==null?void 0:a.in);return isNaN(+s)?Aa(e,NaN):(s.setFullYear(t),s)}const J_=5,J$=4;function eq(e,t){const a=t.startOfMonth(e),s=a.getDay()>0?a.getDay():7,n=t.addDays(e,-s+1),o=t.addDays(n,J_*7-1);return t.getMonth(e)===t.getMonth(o)?J_:J$}function FC(e,t){const a=t.startOfMonth(e),s=a.getDay();return s===1?a:s===0?t.addDays(a,-1*6):t.addDays(a,-1*(s-1))}function tq(e,t){const a=FC(e,t),s=eq(e,t);return t.addDays(a,s*7-1)}class hn{constructor(t,a){this.Date=Date,this.today=()=>{var s;return(s=this.overrides)!=null&&s.today?this.overrides.today():this.options.timeZone?Va.tz(this.options.timeZone):new this.Date},this.newDate=(s,n,o)=>{var i;return(i=this.overrides)!=null&&i.newDate?this.overrides.newDate(s,n,o):this.options.timeZone?new Va(s,n,o,this.options.timeZone):new Date(s,n,o)},this.addDays=(s,n)=>{var o;return(o=this.overrides)!=null&&o.addDays?this.overrides.addDays(s,n):AC(s,n)},this.addMonths=(s,n)=>{var o;return(o=this.overrides)!=null&&o.addMonths?this.overrides.addMonths(s,n):DC(s,n)},this.addWeeks=(s,n)=>{var o;return(o=this.overrides)!=null&&o.addWeeks?this.overrides.addWeeks(s,n):zF(s,n)},this.addYears=(s,n)=>{var o;return(o=this.overrides)!=null&&o.addYears?this.overrides.addYears(s,n):PF(s,n)},this.differenceInCalendarDays=(s,n)=>{var o;return(o=this.overrides)!=null&&o.differenceInCalendarDays?this.overrides.differenceInCalendarDays(s,n):OC(s,n)},this.differenceInCalendarMonths=(s,n)=>{var o;return(o=this.overrides)!=null&&o.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(s,n):qF(s,n)},this.eachMonthOfInterval=s=>{var n;return(n=this.overrides)!=null&&n.eachMonthOfInterval?this.overrides.eachMonthOfInterval(s):HF(s)},this.endOfBroadcastWeek=s=>{var n;return(n=this.overrides)!=null&&n.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(s):tq(s,this)},this.endOfISOWeek=s=>{var n;return(n=this.overrides)!=null&&n.endOfISOWeek?this.overrides.endOfISOWeek(s):YF(s)},this.endOfMonth=s=>{var n;return(n=this.overrides)!=null&&n.endOfMonth?this.overrides.endOfMonth(s):BF(s)},this.endOfWeek=(s,n)=>{var o;return(o=this.overrides)!=null&&o.endOfWeek?this.overrides.endOfWeek(s,n):kC(s,this.options)},this.endOfYear=s=>{var n;return(n=this.overrides)!=null&&n.endOfYear?this.overrides.endOfYear(s):GF(s)},this.format=(s,n,o)=>{var l;const i=(l=this.overrides)!=null&&l.format?this.overrides.format(s,n,this.options):B$(s,n,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(i):i},this.getISOWeek=s=>{var n;return(n=this.overrides)!=null&&n.getISOWeek?this.overrides.getISOWeek(s):zC(s)},this.getMonth=(s,n)=>{var o;return(o=this.overrides)!=null&&o.getMonth?this.overrides.getMonth(s,this.options):V$(s,this.options)},this.getYear=(s,n)=>{var o;return(o=this.overrides)!=null&&o.getYear?this.overrides.getYear(s,this.options):G$(s,this.options)},this.getWeek=(s,n)=>{var o;return(o=this.overrides)!=null&&o.getWeek?this.overrides.getWeek(s,this.options):IC(s,this.options)},this.isAfter=(s,n)=>{var o;return(o=this.overrides)!=null&&o.isAfter?this.overrides.isAfter(s,n):Y$(s,n)},this.isBefore=(s,n)=>{var o;return(o=this.overrides)!=null&&o.isBefore?this.overrides.isBefore(s,n):W$(s,n)},this.isDate=s=>{var n;return(n=this.overrides)!=null&&n.isDate?this.overrides.isDate(s):RC(s)},this.isSameDay=(s,n)=>{var o;return(o=this.overrides)!=null&&o.isSameDay?this.overrides.isSameDay(s,n):FF(s,n)},this.isSameMonth=(s,n)=>{var o;return(o=this.overrides)!=null&&o.isSameMonth?this.overrides.isSameMonth(s,n):Q$(s,n)},this.isSameYear=(s,n)=>{var o;return(o=this.overrides)!=null&&o.isSameYear?this.overrides.isSameYear(s,n):Z$(s,n)},this.max=s=>{var n;return(n=this.overrides)!=null&&n.max?this.overrides.max(s):IF(s)},this.min=s=>{var n;return(n=this.overrides)!=null&&n.min?this.overrides.min(s):LF(s)},this.setMonth=(s,n)=>{var o;return(o=this.overrides)!=null&&o.setMonth?this.overrides.setMonth(s,n):X$(s,n)},this.setYear=(s,n)=>{var o;return(o=this.overrides)!=null&&o.setYear?this.overrides.setYear(s,n):K$(s,n)},this.startOfBroadcastWeek=(s,n)=>{var o;return(o=this.overrides)!=null&&o.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(s,this):FC(s,this)},this.startOfDay=s=>{var n;return(n=this.overrides)!=null&&n.startOfDay?this.overrides.startOfDay(s):yd(s)},this.startOfISOWeek=s=>{var n;return(n=this.overrides)!=null&&n.startOfISOWeek?this.overrides.startOfISOWeek(s):xd(s)},this.startOfMonth=s=>{var n;return(n=this.overrides)!=null&&n.startOfMonth?this.overrides.startOfMonth(s):VF(s)},this.startOfWeek=(s,n)=>{var o;return(o=this.overrides)!=null&&o.startOfWeek?this.overrides.startOfWeek(s,this.options):Sl(s,this.options)},this.startOfYear=s=>{var n;return(n=this.overrides)!=null&&n.startOfYear?this.overrides.startOfYear(s):MC(s)},this.options={locale:qx,...t},this.overrides=a}getDigitMap(){const{numerals:t="latn"}=this.options,a=new Intl.NumberFormat("en-US",{numberingSystem:t}),s={};for(let n=0;n<10;n++)s[n.toString()]=a.format(n);return s}replaceDigits(t){const a=this.getDigitMap();return t.replace(/\d/g,s=>a[s]||s)}formatNumber(t){return this.replaceDigits(t.toString())}}const Rr=new hn;class $C{constructor(t,a,s=Rr){this.date=t,this.displayMonth=a,this.outside=!!(a&&!s.isSameMonth(t,a)),this.dateLib=s}isEqualTo(t){return this.dateLib.isSameDay(t.date,this.date)&&this.dateLib.isSameMonth(t.displayMonth,this.displayMonth)}}class aq{constructor(t,a){this.date=t,this.weeks=a}}class sq{constructor(t,a){this.days=a,this.weekNumber=t}}function rq(e){return se.createElement("button",{...e})}function nq(e){return se.createElement("span",{...e})}function oq(e){const{size:t=24,orientation:a="left",className:s}=e;return se.createElement("svg",{className:s,width:t,height:t,viewBox:"0 0 24 24"},a==="up"&&se.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),a==="down"&&se.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),a==="left"&&se.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),a==="right"&&se.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function iq(e){const{day:t,modifiers:a,...s}=e;return se.createElement("td",{...s})}function lq(e){const{day:t,modifiers:a,...s}=e,n=se.useRef(null);return se.useEffect(()=>{var o;a.focused&&((o=n.current)==null||o.focus())},[a.focused]),se.createElement("button",{ref:n,...s})}var He;(function(e){e.Root="root",e.Chevron="chevron",e.Day="day",e.DayButton="day_button",e.CaptionLabel="caption_label",e.Dropdowns="dropdowns",e.Dropdown="dropdown",e.DropdownRoot="dropdown_root",e.Footer="footer",e.MonthGrid="month_grid",e.MonthCaption="month_caption",e.MonthsDropdown="months_dropdown",e.Month="month",e.Months="months",e.Nav="nav",e.NextMonthButton="button_next",e.PreviousMonthButton="button_previous",e.Week="week",e.Weeks="weeks",e.Weekday="weekday",e.Weekdays="weekdays",e.WeekNumber="week_number",e.WeekNumberHeader="week_number_header",e.YearsDropdown="years_dropdown"})(He||(He={}));var ma;(function(e){e.disabled="disabled",e.hidden="hidden",e.outside="outside",e.focused="focused",e.today="today"})(ma||(ma={}));var er;(function(e){e.range_end="range_end",e.range_middle="range_middle",e.range_start="range_start",e.selected="selected"})(er||(er={}));var ys;(function(e){e.weeks_before_enter="weeks_before_enter",e.weeks_before_exit="weeks_before_exit",e.weeks_after_enter="weeks_after_enter",e.weeks_after_exit="weeks_after_exit",e.caption_after_enter="caption_after_enter",e.caption_after_exit="caption_after_exit",e.caption_before_enter="caption_before_enter",e.caption_before_exit="caption_before_exit"})(ys||(ys={}));function cq(e){const{options:t,className:a,components:s,classNames:n,...o}=e,i=[n[He.Dropdown],a].join(" "),l=t==null?void 0:t.find(({value:c})=>c===o.value);return se.createElement("span",{"data-disabled":o.disabled,className:n[He.DropdownRoot]},se.createElement(s.Select,{className:i,...o},t==null?void 0:t.map(({value:c,label:d,disabled:f})=>se.createElement(s.Option,{key:c,value:c,disabled:f},d))),se.createElement("span",{className:n[He.CaptionLabel],"aria-hidden":!0},l==null?void 0:l.label,se.createElement(s.Chevron,{orientation:"down",size:18,className:n[He.Chevron]})))}function dq(e){return se.createElement("div",{...e})}function uq(e){return se.createElement("div",{...e})}function fq(e){const{calendarMonth:t,displayIndex:a,...s}=e;return se.createElement("div",{...s},e.children)}function hq(e){const{calendarMonth:t,displayIndex:a,...s}=e;return se.createElement("div",{...s})}function mq(e){return se.createElement("table",{...e})}function pq(e){return se.createElement("div",{...e})}const qC=u.createContext(void 0);function Kd(){const e=u.useContext(qC);if(e===void 0)throw new Error("useDayPicker() must be used within a custom component.");return e}function gq(e){const{components:t}=Kd();return se.createElement(t.Dropdown,{...e})}function vq(e){const{onPreviousClick:t,onNextClick:a,previousMonth:s,nextMonth:n,...o}=e,{components:i,classNames:l,labels:{labelPrevious:c,labelNext:d}}=Kd(),f=u.useCallback(p=>{n&&(a==null||a(p))},[n,a]),h=u.useCallback(p=>{s&&(t==null||t(p))},[s,t]);return se.createElement("nav",{...o},se.createElement(i.PreviousMonthButton,{type:"button",className:l[He.PreviousMonthButton],tabIndex:s?void 0:-1,"aria-disabled":s?void 0:!0,"aria-label":c(s),onClick:h},se.createElement(i.Chevron,{disabled:s?void 0:!0,className:l[He.Chevron],orientation:"left"})),se.createElement(i.NextMonthButton,{type:"button",className:l[He.NextMonthButton],tabIndex:n?void 0:-1,"aria-disabled":n?void 0:!0,"aria-label":d(n),onClick:f},se.createElement(i.Chevron,{disabled:n?void 0:!0,orientation:"right",className:l[He.Chevron]})))}function xq(e){const{components:t}=Kd();return se.createElement(t.Button,{...e})}function yq(e){return se.createElement("option",{...e})}function _q(e){const{components:t}=Kd();return se.createElement(t.Button,{...e})}function bq(e){const{rootRef:t,...a}=e;return se.createElement("div",{...a,ref:t})}function wq(e){return se.createElement("select",{...e})}function jq(e){const{week:t,...a}=e;return se.createElement("tr",{...a})}function Eq(e){return se.createElement("th",{...e})}function Sq(e){return se.createElement("thead",{"aria-hidden":!0},se.createElement("tr",{...e}))}function Nq(e){const{week:t,...a}=e;return se.createElement("th",{...a})}function Cq(e){return se.createElement("th",{...e})}function Aq(e){return se.createElement("tbody",{...e})}function Dq(e){const{components:t}=Kd();return se.createElement(t.Dropdown,{...e})}const Tq=Object.freeze(Object.defineProperty({__proto__:null,Button:rq,CaptionLabel:nq,Chevron:oq,Day:iq,DayButton:lq,Dropdown:cq,DropdownNav:dq,Footer:uq,Month:fq,MonthCaption:hq,MonthGrid:mq,Months:pq,MonthsDropdown:gq,Nav:vq,NextMonthButton:xq,Option:yq,PreviousMonthButton:_q,Root:bq,Select:wq,Week:jq,WeekNumber:Nq,WeekNumberHeader:Cq,Weekday:Eq,Weekdays:Sq,Weeks:Aq,YearsDropdown:Dq},Symbol.toStringTag,{value:"Module"}));function Xr(e,t,a=!1,s=Rr){let{from:n,to:o}=e;const{differenceInCalendarDays:i,isSameDay:l}=s;return n&&o?(i(o,n)<0&&([n,o]=[o,n]),i(t,n)>=(a?1:0)&&i(o,t)>=(a?1:0)):!a&&o?l(o,t):!a&&n?l(n,t):!1}function BC(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Bx(e){return!!(e&&typeof e=="object"&&"from"in e)}function UC(e){return!!(e&&typeof e=="object"&&"after"in e)}function HC(e){return!!(e&&typeof e=="object"&&"before"in e)}function VC(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function GC(e,t){return Array.isArray(e)&&e.every(t.isDate)}function Kr(e,t,a=Rr){const s=Array.isArray(t)?t:[t],{isSameDay:n,differenceInCalendarDays:o,isAfter:i}=a;return s.some(l=>{if(typeof l=="boolean")return l;if(a.isDate(l))return n(e,l);if(GC(l,a))return l.includes(e);if(Bx(l))return Xr(l,e,!1,a);if(VC(l))return Array.isArray(l.dayOfWeek)?l.dayOfWeek.includes(e.getDay()):l.dayOfWeek===e.getDay();if(BC(l)){const c=o(l.before,e),d=o(l.after,e),f=c>0,h=d<0;return i(l.before,l.after)?h&&f:f||h}return UC(l)?o(e,l.after)>0:HC(l)?o(l.before,e)>0:typeof l=="function"?l(e):!1})}function Oq(e,t,a,s,n){const{disabled:o,hidden:i,modifiers:l,showOutsideDays:c,broadcastCalendar:d,today:f}=t,{isSameDay:h,isSameMonth:p,startOfMonth:m,isBefore:b,endOfMonth:y,isAfter:_}=n,x=a&&m(a),v=s&&y(s),g={[ma.focused]:[],[ma.outside]:[],[ma.disabled]:[],[ma.hidden]:[],[ma.today]:[]},E={};for(const j of e){const{date:S,displayMonth:N}=j,R=!!(N&&!p(S,N)),T=!!(x&&b(S,x)),F=!!(v&&_(S,v)),U=!!(o&&Kr(S,o,n)),Z=!!(i&&Kr(S,i,n))||T||F||!d&&!c&&R||d&&c===!1&&R,ce=h(S,f??n.today());R&&g.outside.push(j),U&&g.disabled.push(j),Z&&g.hidden.push(j),ce&&g.today.push(j),l&&Object.keys(l).forEach(k=>{const M=l==null?void 0:l[k];M&&Kr(S,M,n)&&(E[k]?E[k].push(j):E[k]=[j])})}return j=>{const S={[ma.focused]:!1,[ma.disabled]:!1,[ma.hidden]:!1,[ma.outside]:!1,[ma.today]:!1},N={};for(const R in g){const T=g[R];S[R]=T.some(F=>F===j)}for(const R in E)N[R]=E[R].some(T=>T===j);return{...S,...N}}}function Rq(e,t,a={}){return Object.entries(e).filter(([,n])=>n===!0).reduce((n,[o])=>(a[o]?n.push(a[o]):t[ma[o]]?n.push(t[ma[o]]):t[er[o]]&&n.push(t[er[o]]),n),[t[He.Day]])}function Mq(e){return{...Tq,...e}}function kq(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0,"data-nav-layout":e.navLayout||void 0};return Object.entries(e).forEach(([a,s])=>{a.startsWith("data-")&&(t[a]=s)}),t}function zq(){const e={};for(const t in He)e[He[t]]=`rdp-${He[t]}`;for(const t in ma)e[ma[t]]=`rdp-${ma[t]}`;for(const t in er)e[er[t]]=`rdp-${er[t]}`;for(const t in ys)e[ys[t]]=`rdp-${ys[t]}`;return e}function YC(e,t,a){return(a??new hn(t)).format(e,"LLLL y")}const Pq=YC;function Iq(e,t,a){return(a??new hn(t)).format(e,"d")}function Lq(e,t=Rr){return t.format(e,"LLLL")}function Fq(e,t,a){return(a??new hn(t)).format(e,"cccccc")}function $q(e,t=Rr){return e<10?t.formatNumber(`0${e.toLocaleString()}`):t.formatNumber(`${e.toLocaleString()}`)}function qq(){return""}function WC(e,t=Rr){return t.format(e,"yyyy")}const Bq=WC,Uq=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:YC,formatDay:Iq,formatMonthCaption:Pq,formatMonthDropdown:Lq,formatWeekNumber:$q,formatWeekNumberHeader:qq,formatWeekdayName:Fq,formatYearCaption:Bq,formatYearDropdown:WC},Symbol.toStringTag,{value:"Module"}));function Hq(e){return e!=null&&e.formatMonthCaption&&!e.formatCaption&&(e.formatCaption=e.formatMonthCaption),e!=null&&e.formatYearCaption&&!e.formatYearDropdown&&(e.formatYearDropdown=e.formatYearCaption),{...Uq,...e}}function Vq(e,t,a,s,n){const{startOfMonth:o,startOfYear:i,endOfYear:l,eachMonthOfInterval:c,getMonth:d}=n;return c({start:i(e),end:l(e)}).map(p=>{const m=s.formatMonthDropdown(p,n),b=d(p),y=t&&p<o(t)||a&&p>o(a)||!1;return{value:b,label:m,disabled:y}})}function Gq(e,t={},a={}){let s={...t==null?void 0:t[He.Day]};return Object.entries(e).filter(([,n])=>n===!0).forEach(([n])=>{s={...s,...a==null?void 0:a[n]}}),s}function Yq(e,t,a){const s=e.today(),n=t?e.startOfISOWeek(s):e.startOfWeek(s),o=[];for(let i=0;i<7;i++){const l=e.addDays(n,i);o.push(l)}return o}function Wq(e,t,a,s,n=!1){if(!e||!t)return;const{startOfYear:o,endOfYear:i,addYears:l,getYear:c,isBefore:d,isSameYear:f}=s,h=o(e),p=i(t),m=[];let b=h;for(;d(b,p)||f(b,p);)m.push(b),b=l(b,1);return n&&m.reverse(),m.map(y=>{const _=a.formatYearDropdown(y,s);return{value:c(y),label:_,disabled:!1}})}function QC(e,t,a,s){let n=(s??new hn(a)).format(e,"PPPP");return t.today&&(n=`Today, ${n}`),t.selected&&(n=`${n}, selected`),n}const Qq=QC;function ZC(e,t,a){return(a??new hn(t)).format(e,"LLLL y")}const Zq=ZC;function Xq(e,t,a,s){let n=(s??new hn(a)).format(e,"PPPP");return t!=null&&t.today&&(n=`Today, ${n}`),n}function Kq(e){return"Choose the Month"}function Jq(){return""}function eB(e){return"Go to the Next Month"}function tB(e){return"Go to the Previous Month"}function aB(e,t,a){return(a??new hn(t)).format(e,"cccc")}function sB(e,t){return`Week ${e}`}function rB(e){return"Week Number"}function nB(e){return"Choose the Year"}const oB=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:Zq,labelDay:Qq,labelDayButton:QC,labelGrid:ZC,labelGridcell:Xq,labelMonthDropdown:Kq,labelNav:Jq,labelNext:eB,labelPrevious:tB,labelWeekNumber:sB,labelWeekNumberHeader:rB,labelWeekday:aB,labelYearDropdown:nB},Symbol.toStringTag,{value:"Module"})),Jd=e=>e instanceof HTMLElement?e:null,np=e=>[...e.querySelectorAll("[data-animated-month]")??[]],iB=e=>Jd(e.querySelector("[data-animated-month]")),op=e=>Jd(e.querySelector("[data-animated-caption]")),ip=e=>Jd(e.querySelector("[data-animated-weeks]")),lB=e=>Jd(e.querySelector("[data-animated-nav]")),cB=e=>Jd(e.querySelector("[data-animated-weekdays]"));function dB(e,t,{classNames:a,months:s,focused:n,dateLib:o}){const i=u.useRef(null),l=u.useRef(s),c=u.useRef(!1);u.useLayoutEffect(()=>{const d=l.current;if(l.current=s,!t||!e.current||!(e.current instanceof HTMLElement)||s.length===0||d.length===0||s.length!==d.length)return;const f=o.isSameMonth(s[0].date,d[0].date),h=o.isAfter(s[0].date,d[0].date),p=h?a[ys.caption_after_enter]:a[ys.caption_before_enter],m=h?a[ys.weeks_after_enter]:a[ys.weeks_before_enter],b=i.current,y=e.current.cloneNode(!0);if(y instanceof HTMLElement?(np(y).forEach(g=>{if(!(g instanceof HTMLElement))return;const E=iB(g);E&&g.contains(E)&&g.removeChild(E);const j=op(g);j&&j.classList.remove(p);const S=ip(g);S&&S.classList.remove(m)}),i.current=y):i.current=null,c.current||f||n)return;const _=b instanceof HTMLElement?np(b):[],x=np(e.current);if(x!=null&&x.every(v=>v instanceof HTMLElement)&&_&&_.every(v=>v instanceof HTMLElement)){c.current=!0,e.current.style.isolation="isolate";const v=lB(e.current);v&&(v.style.zIndex="1"),x.forEach((g,E)=>{const j=_[E];if(!j)return;g.style.position="relative",g.style.overflow="hidden";const S=op(g);S&&S.classList.add(p);const N=ip(g);N&&N.classList.add(m);const R=()=>{c.current=!1,e.current&&(e.current.style.isolation=""),v&&(v.style.zIndex=""),S&&S.classList.remove(p),N&&N.classList.remove(m),g.style.position="",g.style.overflow="",g.contains(j)&&g.removeChild(j)};j.style.pointerEvents="none",j.style.position="absolute",j.style.overflow="hidden",j.setAttribute("aria-hidden","true");const T=cB(j);T&&(T.style.opacity="0");const F=op(j);F&&(F.classList.add(h?a[ys.caption_before_exit]:a[ys.caption_after_exit]),F.addEventListener("animationend",R));const U=ip(j);U&&U.classList.add(h?a[ys.weeks_before_exit]:a[ys.weeks_after_exit]),g.insertBefore(j,g.firstChild)})}})}function uB(e,t,a,s){const n=e[0],o=e[e.length-1],{ISOWeek:i,fixedWeeks:l,broadcastCalendar:c}=a??{},{addDays:d,differenceInCalendarDays:f,differenceInCalendarMonths:h,endOfBroadcastWeek:p,endOfISOWeek:m,endOfMonth:b,endOfWeek:y,isAfter:_,startOfBroadcastWeek:x,startOfISOWeek:v,startOfWeek:g}=s,E=c?x(n,s):i?v(n):g(n),j=c?p(o):i?m(b(o)):y(b(o)),S=f(j,E),N=h(o,n)+1,R=[];for(let U=0;U<=S;U++){const Z=d(E,U);if(t&&_(Z,t))break;R.push(Z)}const F=(c?35:42)*N;if(l&&R.length<F){const U=F-R.length;for(let Z=0;Z<U;Z++){const ce=d(R[R.length-1],1);R.push(ce)}}return R}function fB(e){const t=[];return e.reduce((a,s)=>{const n=s.weeks.reduce((o,i)=>o.concat(i.days.slice()),t.slice());return a.concat(n.slice())},t.slice())}function hB(e,t,a,s){const{numberOfMonths:n=1}=a,o=[];for(let i=0;i<n;i++){const l=s.addMonths(e,i);if(t&&l>t)break;o.push(l)}return o}function eb(e,t,a,s){const{month:n,defaultMonth:o,today:i=s.today(),numberOfMonths:l=1}=e;let c=n||o||i;const{differenceInCalendarMonths:d,addMonths:f,startOfMonth:h}=s;if(a&&d(a,c)<l-1){const p=-1*(l-1);c=f(a,p)}return t&&d(c,t)<0&&(c=t),h(c)}function mB(e,t,a,s){const{addDays:n,endOfBroadcastWeek:o,endOfISOWeek:i,endOfMonth:l,endOfWeek:c,getISOWeek:d,getWeek:f,startOfBroadcastWeek:h,startOfISOWeek:p,startOfWeek:m}=s,b=e.reduce((y,_)=>{const x=a.broadcastCalendar?h(_,s):a.ISOWeek?p(_):m(_),v=a.broadcastCalendar?o(_):a.ISOWeek?i(l(_)):c(l(_)),g=t.filter(N=>N>=x&&N<=v),E=a.broadcastCalendar?35:42;if(a.fixedWeeks&&g.length<E){const N=t.filter(R=>{const T=E-g.length;return R>v&&R<=n(v,T)});g.push(...N)}const j=g.reduce((N,R)=>{const T=a.ISOWeek?d(R):f(R),F=N.find(Z=>Z.weekNumber===T),U=new $C(R,_,s);return F?F.days.push(U):N.push(new sq(T,[U])),N},[]),S=new aq(_,j);return y.push(S),y},[]);return a.reverseMonths?b.reverse():b}function pB(e,t){let{startMonth:a,endMonth:s}=e;const{startOfYear:n,startOfDay:o,startOfMonth:i,endOfMonth:l,addYears:c,endOfYear:d,newDate:f,today:h}=t,{fromYear:p,toYear:m,fromMonth:b,toMonth:y}=e;!a&&b&&(a=b),!a&&p&&(a=t.newDate(p,0,1)),!s&&y&&(s=y),!s&&m&&(s=f(m,11,31));const _=e.captionLayout==="dropdown"||e.captionLayout==="dropdown-years";return a?a=i(a):p?a=f(p,0,1):!a&&_&&(a=n(c(e.today??h(),-100))),s?s=l(s):m?s=f(m,11,31):!s&&_&&(s=d(e.today??h())),[a&&o(a),s&&o(s)]}function gB(e,t,a,s){if(a.disableNavigation)return;const{pagedNavigation:n,numberOfMonths:o=1}=a,{startOfMonth:i,addMonths:l,differenceInCalendarMonths:c}=s,d=n?o:1,f=i(e);if(!t)return l(f,d);if(!(c(t,e)<o))return l(f,d)}function vB(e,t,a,s){if(a.disableNavigation)return;const{pagedNavigation:n,numberOfMonths:o}=a,{startOfMonth:i,addMonths:l,differenceInCalendarMonths:c}=s,d=n?o??1:1,f=i(e);if(!t)return l(f,-d);if(!(c(f,t)<=0))return l(f,-d)}function xB(e){const t=[];return e.reduce((a,s)=>a.concat(s.weeks.slice()),t.slice())}function qh(e,t){const[a,s]=u.useState(e);return[t===void 0?a:t,s]}function yB(e,t){const[a,s]=pB(e,t),{startOfMonth:n,endOfMonth:o}=t,i=eb(e,a,s,t),[l,c]=qh(i,e.month?i:void 0);u.useEffect(()=>{const S=eb(e,a,s,t);c(S)},[e.timeZone]);const d=hB(l,s,e,t),f=uB(d,e.endMonth?o(e.endMonth):void 0,e,t),h=mB(d,f,e,t),p=xB(h),m=fB(h),b=vB(l,a,e,t),y=gB(l,s,e,t),{disableNavigation:_,onMonthChange:x}=e,v=S=>p.some(N=>N.days.some(R=>R.isEqualTo(S))),g=S=>{if(_)return;let N=n(S);a&&N<n(a)&&(N=n(a)),s&&N>n(s)&&(N=n(s)),c(N),x==null||x(N)};return{months:h,weeks:p,days:m,navStart:a,navEnd:s,previousMonth:b,nextMonth:y,goToMonth:g,goToDay:S=>{v(S)||g(S.date)}}}var ur;(function(e){e[e.Today=0]="Today",e[e.Selected=1]="Selected",e[e.LastFocused=2]="LastFocused",e[e.FocusedModifier=3]="FocusedModifier"})(ur||(ur={}));function tb(e){return!e[ma.disabled]&&!e[ma.hidden]&&!e[ma.outside]}function _B(e,t,a,s){let n,o=-1;for(const i of e){const l=t(i);tb(l)&&(l[ma.focused]&&o<ur.FocusedModifier?(n=i,o=ur.FocusedModifier):s!=null&&s.isEqualTo(i)&&o<ur.LastFocused?(n=i,o=ur.LastFocused):a(i.date)&&o<ur.Selected?(n=i,o=ur.Selected):l[ma.today]&&o<ur.Today&&(n=i,o=ur.Today))}return n||(n=e.find(i=>tb(t(i)))),n}function bB(e,t,a,s,n,o,i){const{ISOWeek:l,broadcastCalendar:c}=o,{addDays:d,addMonths:f,addWeeks:h,addYears:p,endOfBroadcastWeek:m,endOfISOWeek:b,endOfWeek:y,max:_,min:x,startOfBroadcastWeek:v,startOfISOWeek:g,startOfWeek:E}=i;let S={day:d,week:h,month:f,year:p,startOfWeek:N=>c?v(N,i):l?g(N):E(N),endOfWeek:N=>c?m(N):l?b(N):y(N)}[e](a,t==="after"?1:-1);return t==="before"&&s?S=_([s,S]):t==="after"&&n&&(S=x([n,S])),S}function XC(e,t,a,s,n,o,i,l=0){if(l>365)return;const c=bB(e,t,a.date,s,n,o,i),d=!!(o.disabled&&Kr(c,o.disabled,i)),f=!!(o.hidden&&Kr(c,o.hidden,i)),h=c,p=new $C(c,h,i);return!d&&!f?p:XC(e,t,p,s,n,o,i,l+1)}function wB(e,t,a,s,n){const{autoFocus:o}=e,[i,l]=u.useState(),c=_B(t.days,a,s||(()=>!1),i),[d,f]=u.useState(o?c:void 0);return{isFocusTarget:y=>!!(c!=null&&c.isEqualTo(y)),setFocused:f,focused:d,blur:()=>{l(d),f(void 0)},moveFocus:(y,_)=>{if(!d)return;const x=XC(y,_,d,t.navStart,t.navEnd,e,n);x&&(t.goToDay(x),f(x))}}}function jB(e,t){const{selected:a,required:s,onSelect:n}=e,[o,i]=qh(a,n?a:void 0),l=n?a:o,{isSameDay:c}=t,d=m=>(l==null?void 0:l.some(b=>c(b,m)))??!1,{min:f,max:h}=e;return{selected:l,select:(m,b,y)=>{let _=[...l??[]];if(d(m)){if((l==null?void 0:l.length)===f||s&&(l==null?void 0:l.length)===1)return;_=l==null?void 0:l.filter(x=>!c(x,m))}else(l==null?void 0:l.length)===h?_=[m]:_=[..._,m];return n||i(_),n==null||n(_,m,b,y),_},isSelected:d}}function EB(e,t,a=0,s=0,n=!1,o=Rr){const{from:i,to:l}=t||{},{isSameDay:c,isAfter:d,isBefore:f}=o;let h;if(!i&&!l)h={from:e,to:a>0?void 0:e};else if(i&&!l)c(i,e)?a===0?h={from:i,to:e}:n?h={from:i,to:void 0}:h=void 0:f(e,i)?h={from:e,to:i}:h={from:i,to:e};else if(i&&l)if(c(i,e)&&c(l,e))n?h={from:i,to:l}:h=void 0;else if(c(i,e))h={from:i,to:a>0?void 0:e};else if(c(l,e))h={from:e,to:a>0?void 0:e};else if(f(e,i))h={from:e,to:l};else if(d(e,i))h={from:i,to:e};else if(d(e,l))h={from:i,to:e};else throw new Error("Invalid range");if(h!=null&&h.from&&(h!=null&&h.to)){const p=o.differenceInCalendarDays(h.to,h.from);s>0&&p>s?h={from:e,to:void 0}:a>1&&p<a&&(h={from:e,to:void 0})}return h}function SB(e,t,a=Rr){const s=Array.isArray(t)?t:[t];let n=e.from;const o=a.differenceInCalendarDays(e.to,e.from),i=Math.min(o,6);for(let l=0;l<=i;l++){if(s.includes(n.getDay()))return!0;n=a.addDays(n,1)}return!1}function ab(e,t,a=Rr){return Xr(e,t.from,!1,a)||Xr(e,t.to,!1,a)||Xr(t,e.from,!1,a)||Xr(t,e.to,!1,a)}function NB(e,t,a=Rr){const s=Array.isArray(t)?t:[t];if(s.filter(l=>typeof l!="function").some(l=>typeof l=="boolean"?l:a.isDate(l)?Xr(e,l,!1,a):GC(l,a)?l.some(c=>Xr(e,c,!1,a)):Bx(l)?l.from&&l.to?ab(e,{from:l.from,to:l.to},a):!1:VC(l)?SB(e,l.dayOfWeek,a):BC(l)?a.isAfter(l.before,l.after)?ab(e,{from:a.addDays(l.after,1),to:a.addDays(l.before,-1)},a):Kr(e.from,l,a)||Kr(e.to,l,a):UC(l)||HC(l)?Kr(e.from,l,a)||Kr(e.to,l,a):!1))return!0;const i=s.filter(l=>typeof l=="function");if(i.length){let l=e.from;const c=a.differenceInCalendarDays(e.to,e.from);for(let d=0;d<=c;d++){if(i.some(f=>f(l)))return!0;l=a.addDays(l,1)}}return!1}function CB(e,t){const{disabled:a,excludeDisabled:s,selected:n,required:o,onSelect:i}=e,[l,c]=qh(n,i?n:void 0),d=i?n:l;return{selected:d,select:(p,m,b)=>{const{min:y,max:_}=e,x=p?EB(p,d,y,_,o,t):void 0;return s&&a&&(x!=null&&x.from)&&x.to&&NB({from:x.from,to:x.to},a,t)&&(x.from=p,x.to=void 0),i||c(x),i==null||i(x,p,m,b),x},isSelected:p=>d&&Xr(d,p,!1,t)}}function AB(e,t){const{selected:a,required:s,onSelect:n}=e,[o,i]=qh(a,n?a:void 0),l=n?a:o,{isSameDay:c}=t;return{selected:l,select:(h,p,m)=>{let b=h;return!s&&l&&l&&c(h,l)&&(b=void 0),n||i(b),n==null||n(b,h,p,m),b},isSelected:h=>l?c(l,h):!1}}function DB(e,t){const a=AB(e,t),s=jB(e,t),n=CB(e,t);switch(e.mode){case"single":return a;case"multiple":return s;case"range":return n;default:return}}function TB(e){var ka;let t=e;t.timeZone&&(t={...e},t.today&&(t.today=new Va(t.today,t.timeZone)),t.month&&(t.month=new Va(t.month,t.timeZone)),t.defaultMonth&&(t.defaultMonth=new Va(t.defaultMonth,t.timeZone)),t.startMonth&&(t.startMonth=new Va(t.startMonth,t.timeZone)),t.endMonth&&(t.endMonth=new Va(t.endMonth,t.timeZone)),t.mode==="single"&&t.selected?t.selected=new Va(t.selected,t.timeZone):t.mode==="multiple"&&t.selected?t.selected=(ka=t.selected)==null?void 0:ka.map(We=>new Va(We,t.timeZone)):t.mode==="range"&&t.selected&&(t.selected={from:t.selected.from?new Va(t.selected.from,t.timeZone):void 0,to:t.selected.to?new Va(t.selected.to,t.timeZone):void 0}));const{components:a,formatters:s,labels:n,dateLib:o,locale:i,classNames:l}=u.useMemo(()=>{const We={...qx,...t.locale};return{dateLib:new hn({locale:We,weekStartsOn:t.broadcastCalendar?1:t.weekStartsOn,firstWeekContainsDate:t.firstWeekContainsDate,useAdditionalWeekYearTokens:t.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:t.useAdditionalDayOfYearTokens,timeZone:t.timeZone,numerals:t.numerals},t.dateLib),components:Mq(t.components),formatters:Hq(t.formatters),labels:{...oB,...t.labels},locale:We,classNames:{...zq(),...t.classNames}}},[t.locale,t.broadcastCalendar,t.weekStartsOn,t.firstWeekContainsDate,t.useAdditionalWeekYearTokens,t.useAdditionalDayOfYearTokens,t.timeZone,t.numerals,t.dateLib,t.components,t.formatters,t.labels,t.classNames]),{captionLayout:c,mode:d,navLayout:f,numberOfMonths:h=1,onDayBlur:p,onDayClick:m,onDayFocus:b,onDayKeyDown:y,onDayMouseEnter:_,onDayMouseLeave:x,onNextClick:v,onPrevClick:g,showWeekNumber:E,styles:j}=t,{formatCaption:S,formatDay:N,formatMonthDropdown:R,formatWeekNumber:T,formatWeekNumberHeader:F,formatWeekdayName:U,formatYearDropdown:Z}=s,ce=yB(t,o),{days:k,months:M,navStart:A,navEnd:q,previousMonth:I,nextMonth:w,goToMonth:C}=ce,$=Oq(k,t,A,q,o),{isSelected:O,select:L,selected:H}=DB(t,o)??{},{blur:G,focused:te,isFocusTarget:Y,moveFocus:be,setFocused:de}=wB(t,ce,$,O??(()=>!1),o),{labelDayButton:V,labelGridcell:le,labelGrid:B,labelMonthDropdown:ie,labelNav:xe,labelPrevious:pe,labelNext:Ce,labelWeekday:De,labelWeekNumber:he,labelWeekNumberHeader:P,labelYearDropdown:ee}=n,ue=u.useMemo(()=>Yq(o,t.ISOWeek),[o,t.ISOWeek]),K=d!==void 0||m!==void 0,ne=u.useCallback(()=>{I&&(C(I),g==null||g(I))},[I,C,g]),D=u.useCallback(()=>{w&&(C(w),v==null||v(w))},[C,w,v]),Q=u.useCallback((We,Ct)=>Ke=>{Ke.preventDefault(),Ke.stopPropagation(),de(We),L==null||L(We.date,Ct,Ke),m==null||m(We.date,Ct,Ke)},[L,m,de]),J=u.useCallback((We,Ct)=>Ke=>{de(We),b==null||b(We.date,Ct,Ke)},[b,de]),oe=u.useCallback((We,Ct)=>Ke=>{G(),p==null||p(We.date,Ct,Ke)},[G,p]),ge=u.useCallback((We,Ct)=>Ke=>{const Rt={ArrowLeft:[Ke.shiftKey?"month":"day",t.dir==="rtl"?"after":"before"],ArrowRight:[Ke.shiftKey?"month":"day",t.dir==="rtl"?"before":"after"],ArrowDown:[Ke.shiftKey?"year":"week","after"],ArrowUp:[Ke.shiftKey?"year":"week","before"],PageUp:[Ke.shiftKey?"year":"month","before"],PageDown:[Ke.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(Rt[Ke.key]){Ke.preventDefault(),Ke.stopPropagation();const[Gt,ft]=Rt[Ke.key];be(Gt,ft)}y==null||y(We.date,Ct,Ke)},[be,y,t.dir]),Ne=u.useCallback((We,Ct)=>Ke=>{_==null||_(We.date,Ct,Ke)},[_]),me=u.useCallback((We,Ct)=>Ke=>{x==null||x(We.date,Ct,Ke)},[x]),_e=u.useCallback(We=>Ct=>{const Ke=Number(Ct.target.value),Rt=o.setMonth(o.startOfMonth(We),Ke);C(Rt)},[o,C]),je=u.useCallback(We=>Ct=>{const Ke=Number(Ct.target.value),Rt=o.setYear(o.startOfMonth(We),Ke);C(Rt)},[o,C]),{className:Ze,style:it}=u.useMemo(()=>({className:[l[He.Root],t.className].filter(Boolean).join(" "),style:{...j==null?void 0:j[He.Root],...t.style}}),[l,t.className,t.style,j]),Je=kq(t),mt=u.useRef(null);dB(mt,!!t.animate,{classNames:l,months:M,focused:te,dateLib:o});const wt={dayPickerProps:t,selected:H,select:L,isSelected:O,months:M,nextMonth:w,previousMonth:I,goToMonth:C,getModifiers:$,components:a,classNames:l,styles:j,labels:n,formatters:s};return se.createElement(qC.Provider,{value:wt},se.createElement(a.Root,{rootRef:t.animate?mt:void 0,className:Ze,style:it,dir:t.dir,id:t.id,lang:t.lang,nonce:t.nonce,title:t.title,role:t.role,"aria-label":t["aria-label"],...Je},se.createElement(a.Months,{className:l[He.Months],style:j==null?void 0:j[He.Months]},!t.hideNavigation&&!f&&se.createElement(a.Nav,{"data-animated-nav":t.animate?"true":void 0,className:l[He.Nav],style:j==null?void 0:j[He.Nav],"aria-label":xe(),onPreviousClick:ne,onNextClick:D,previousMonth:I,nextMonth:w}),M.map((We,Ct)=>se.createElement(a.Month,{"data-animated-month":t.animate?"true":void 0,className:l[He.Month],style:j==null?void 0:j[He.Month],key:Ct,displayIndex:Ct,calendarMonth:We},f==="around"&&!t.hideNavigation&&Ct===0&&se.createElement(a.PreviousMonthButton,{type:"button",className:l[He.PreviousMonthButton],tabIndex:I?void 0:-1,"aria-disabled":I?void 0:!0,"aria-label":pe(I),onClick:ne,"data-animated-button":t.animate?"true":void 0},se.createElement(a.Chevron,{disabled:I?void 0:!0,className:l[He.Chevron],orientation:t.dir==="rtl"?"right":"left"})),se.createElement(a.MonthCaption,{"data-animated-caption":t.animate?"true":void 0,className:l[He.MonthCaption],style:j==null?void 0:j[He.MonthCaption],calendarMonth:We,displayIndex:Ct},c!=null&&c.startsWith("dropdown")?se.createElement(a.DropdownNav,{className:l[He.Dropdowns],style:j==null?void 0:j[He.Dropdowns]},c==="dropdown"||c==="dropdown-months"?se.createElement(a.MonthsDropdown,{className:l[He.MonthsDropdown],"aria-label":ie(),classNames:l,components:a,disabled:!!t.disableNavigation,onChange:_e(We.date),options:Vq(We.date,A,q,s,o),style:j==null?void 0:j[He.Dropdown],value:o.getMonth(We.date)}):se.createElement("span",null,R(We.date,o)),c==="dropdown"||c==="dropdown-years"?se.createElement(a.YearsDropdown,{className:l[He.YearsDropdown],"aria-label":ee(o.options),classNames:l,components:a,disabled:!!t.disableNavigation,onChange:je(We.date),options:Wq(A,q,s,o,!!t.reverseYears),style:j==null?void 0:j[He.Dropdown],value:o.getYear(We.date)}):se.createElement("span",null,Z(We.date,o)),se.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},S(We.date,o.options,o))):se.createElement(a.CaptionLabel,{className:l[He.CaptionLabel],role:"status","aria-live":"polite"},S(We.date,o.options,o))),f==="around"&&!t.hideNavigation&&Ct===h-1&&se.createElement(a.NextMonthButton,{type:"button",className:l[He.NextMonthButton],tabIndex:w?void 0:-1,"aria-disabled":w?void 0:!0,"aria-label":Ce(w),onClick:D,"data-animated-button":t.animate?"true":void 0},se.createElement(a.Chevron,{disabled:w?void 0:!0,className:l[He.Chevron],orientation:t.dir==="rtl"?"left":"right"})),Ct===h-1&&f==="after"&&!t.hideNavigation&&se.createElement(a.Nav,{"data-animated-nav":t.animate?"true":void 0,className:l[He.Nav],style:j==null?void 0:j[He.Nav],"aria-label":xe(),onPreviousClick:ne,onNextClick:D,previousMonth:I,nextMonth:w}),se.createElement(a.MonthGrid,{role:"grid","aria-multiselectable":d==="multiple"||d==="range","aria-label":B(We.date,o.options,o)||void 0,className:l[He.MonthGrid],style:j==null?void 0:j[He.MonthGrid]},!t.hideWeekdays&&se.createElement(a.Weekdays,{"data-animated-weekdays":t.animate?"true":void 0,className:l[He.Weekdays],style:j==null?void 0:j[He.Weekdays]},E&&se.createElement(a.WeekNumberHeader,{"aria-label":P(o.options),className:l[He.WeekNumberHeader],style:j==null?void 0:j[He.WeekNumberHeader],scope:"col"},F()),ue.map(Ke=>se.createElement(a.Weekday,{"aria-label":De(Ke,o.options,o),className:l[He.Weekday],key:String(Ke),style:j==null?void 0:j[He.Weekday],scope:"col"},U(Ke,o.options,o)))),se.createElement(a.Weeks,{"data-animated-weeks":t.animate?"true":void 0,className:l[He.Weeks],style:j==null?void 0:j[He.Weeks]},We.weeks.map(Ke=>se.createElement(a.Week,{className:l[He.Week],key:Ke.weekNumber,style:j==null?void 0:j[He.Week],week:Ke},E&&se.createElement(a.WeekNumber,{week:Ke,style:j==null?void 0:j[He.WeekNumber],"aria-label":he(Ke.weekNumber,{locale:i}),className:l[He.WeekNumber],scope:"row",role:"rowheader"},T(Ke.weekNumber,o)),Ke.days.map(Rt=>{const{date:Gt}=Rt,ft=$(Rt);if(ft[ma.focused]=!ft.hidden&&!!(te!=null&&te.isEqualTo(Rt)),ft[er.selected]=(O==null?void 0:O(Gt))||ft.selected,Bx(H)){const{from:Mt,to:st}=H;ft[er.range_start]=!!(Mt&&st&&o.isSameDay(Gt,Mt)),ft[er.range_end]=!!(Mt&&st&&o.isSameDay(Gt,st)),ft[er.range_middle]=Xr(H,Gt,!0,o)}const Ge=Gq(ft,j,t.modifiersStyles),Se=Rq(ft,l,t.modifiersClassNames),at=!K&&!ft.hidden?le(Gt,ft,o.options,o):void 0;return se.createElement(a.Day,{key:`${o.format(Gt,"yyyy-MM-dd")}_${o.format(Rt.displayMonth,"yyyy-MM")}`,day:Rt,modifiers:ft,className:Se.join(" "),style:Ge,role:"gridcell","aria-selected":ft.selected||void 0,"aria-label":at,"data-day":o.format(Gt,"yyyy-MM-dd"),"data-month":Rt.outside?o.format(Gt,"yyyy-MM"):void 0,"data-selected":ft.selected||void 0,"data-disabled":ft.disabled||void 0,"data-hidden":ft.hidden||void 0,"data-outside":Rt.outside||void 0,"data-focused":ft.focused||void 0,"data-today":ft.today||void 0},!ft.hidden&&K?se.createElement(a.DayButton,{className:l[He.DayButton],style:j==null?void 0:j[He.DayButton],type:"button",day:Rt,modifiers:ft,disabled:ft.disabled||void 0,tabIndex:Y(Rt)?0:-1,"aria-label":V(Gt,ft,o.options,o),onClick:Q(Rt,ft),onBlur:oe(Rt,ft),onFocus:J(Rt,ft),onKeyDown:ge(Rt,ft),onMouseEnter:Ne(Rt,ft),onMouseLeave:me(Rt,ft)},N(Gt,o.options,o)):!ft.hidden&&N(Rt.date,o.options,o))})))))))),t.footer&&se.createElement(a.Footer,{className:l[He.Footer],style:j==null?void 0:j[He.Footer],role:"status","aria-live":"polite"},t.footer)))}function KC({className:e,classNames:t,showOutsideDays:a=!0,...s}){return r.jsx(TB,{showOutsideDays:a,className:Ae("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Ae(hd({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Ae(hd({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...n})=>r.jsx(GE,{className:"h-4 w-4"}),IconRight:({...n})=>r.jsx(YE,{className:"h-4 w-4"})},...s})}KC.displayName="Calendar";var Bh="Popover",[JC,vH]=As(Bh,[Yl]),eu=Yl(),[OB,ho]=JC(Bh),eA=e=>{const{__scopePopover:t,children:a,open:s,defaultOpen:n,onOpenChange:o,modal:i=!1}=e,l=eu(t),c=u.useRef(null),[d,f]=u.useState(!1),[h,p]=Bs({prop:s,defaultProp:n??!1,onChange:o,caller:Bh});return r.jsx(DS,{...l,children:r.jsx(OB,{scope:t,contentId:es(),triggerRef:c,open:h,onOpenChange:p,onOpenToggle:u.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:d,onCustomAnchorAdd:u.useCallback(()=>f(!0),[]),onCustomAnchorRemove:u.useCallback(()=>f(!1),[]),modal:i,children:a})})};eA.displayName=Bh;var tA="PopoverAnchor",RB=u.forwardRef((e,t)=>{const{__scopePopover:a,...s}=e,n=ho(tA,a),o=eu(a),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=n;return u.useEffect(()=>(i(),()=>l()),[i,l]),r.jsx(hh,{...o,...s,ref:t})});RB.displayName=tA;var aA="PopoverTrigger",sA=u.forwardRef((e,t)=>{const{__scopePopover:a,...s}=e,n=ho(aA,a),o=eu(a),i=Nt(t,n.triggerRef),l=r.jsx(Ue.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":lA(n.open),...s,ref:i,onClick:Be(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?l:r.jsx(hh,{asChild:!0,...o,children:l})});sA.displayName=aA;var Ux="PopoverPortal",[MB,kB]=JC(Ux,{forceMount:void 0}),rA=e=>{const{__scopePopover:t,forceMount:a,children:s,container:n}=e,o=ho(Ux,t);return r.jsx(MB,{scope:t,forceMount:a,children:r.jsx(Tr,{present:a||o.open,children:r.jsx(Fd,{asChild:!0,container:n,children:s})})})};rA.displayName=Ux;var Nl="PopoverContent",nA=u.forwardRef((e,t)=>{const a=kB(Nl,e.__scopePopover),{forceMount:s=a.forceMount,...n}=e,o=ho(Nl,e.__scopePopover);return r.jsx(Tr,{present:s||o.open,children:o.modal?r.jsx(PB,{...n,ref:t}):r.jsx(IB,{...n,ref:t})})});nA.displayName=Nl;var zB=Wo("PopoverContent.RemoveScroll"),PB=u.forwardRef((e,t)=>{const a=ho(Nl,e.__scopePopover),s=u.useRef(null),n=Nt(t,s),o=u.useRef(!1);return u.useEffect(()=>{const i=s.current;if(i)return Cx(i)},[]),r.jsx(Ah,{as:zB,allowPinchZoom:!0,children:r.jsx(oA,{...e,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Be(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=a.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Be(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Be(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),IB=u.forwardRef((e,t)=>{const a=ho(Nl,e.__scopePopover),s=u.useRef(!1),n=u.useRef(!1);return r.jsx(oA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=a.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const i=o.target;((d=a.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&n.current&&o.preventDefault()}})}),oA=u.forwardRef((e,t)=>{const{__scopePopover:a,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:f,...h}=e,p=ho(Nl,a),m=eu(a);return Nx(),r.jsx(Nh,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:o,children:r.jsx(ql,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:r.jsx(hx,{"data-state":lA(p.open),role:"dialog",id:p.contentId,...m,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),iA="PopoverClose",LB=u.forwardRef((e,t)=>{const{__scopePopover:a,...s}=e,n=ho(iA,a);return r.jsx(Ue.button,{type:"button",...s,ref:t,onClick:Be(e.onClick,()=>n.onOpenChange(!1))})});LB.displayName=iA;var FB="PopoverArrow",$B=u.forwardRef((e,t)=>{const{__scopePopover:a,...s}=e,n=eu(a);return r.jsx(mx,{...n,...s,ref:t})});$B.displayName=FB;function lA(e){return e?"open":"closed"}var qB=eA,BB=sA,UB=rA,cA=nA;const Uh=qB,Hh=BB,tu=u.forwardRef(({className:e,align:t="center",sideOffset:a=4,...s},n)=>r.jsx(UB,{children:r.jsx(cA,{ref:n,align:t,sideOffset:a,className:Ae("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));tu.displayName=cA.displayName;function lp(e){if(!e||!/^\d{4}-\d{2}-\d{2}$/.test(e))return null;const[t,a,s]=e.split("-").map(Number);return new Date(t,a-1,s)}function HB(e){return DM(e)||""}function Us({value:e,onChange:t,placeholder:a="dd/mm/aaaa",disabled:s,min:n,max:o,className:i,id:l,required:c}){const[d,f]=u.useState(!1),h=u.useMemo(()=>lp(e),[e]),p=u.useMemo(()=>{const m=lp(n||""),b=lp(o||"");if(m&&b)return{before:m,after:b};if(m)return{before:m};if(b)return{after:b}},[n,o]);return r.jsxs(Uh,{open:d,onOpenChange:f,children:[r.jsx(Hh,{asChild:!0,children:r.jsxs(re,{id:l,variant:"outline",disabled:s,className:Ae("w-full justify-start text-left font-normal",!e&&"text-muted-foreground",i),type:"button",children:[r.jsx(Cf,{className:"mr-2 h-4 w-4"}),h?EC(h,"dd/MM/yyyy",{locale:Fg}):r.jsx("span",{children:a})]})}),r.jsx(tu,{className:"w-auto p-2",align:"start",children:r.jsx(KC,{mode:"single",selected:h??void 0,onSelect:m=>{m&&(t(HB(m)),f(!1))},disabled:p,initialFocus:!0,locale:Fg,showOutsideDays:!1,className:"rounded-md",classNames:{months:"flex flex-col",month:"space-y-1",caption:"flex justify-center pt-0 relative items-center mb-1",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:"h-6 w-6 bg-transparent p-0 opacity-50 hover:opacity-100",nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse",head_row:"flex",head_cell:"text-muted-foreground w-8 h-7 font-normal text-xs flex items-center justify-center",row:"flex w-full",cell:"h-8 w-8 text-center text-xs p-0 relative",day:"h-8 w-8 p-0 font-normal aria-selected:opacity-100 text-xs",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50"}})})]})}function VB(){const e=$a(),{toast:t}=fa(),[a,s]=u.useState(!0),[n,o]=u.useState([]),[i,l]=u.useState([]),[c,d]=u.useState(""),[f,h]=u.useState(""),[p,m]=u.useState(""),[b,y]=u.useState("all"),[_,x]=u.useState(!1),[v,g]=u.useState(1),[E,j]=u.useState(0),S=50;u.useEffect(()=>{N()},[]);const N=async()=>{try{s(!0),await R(),await T()}catch(F){t({title:"Erro ao carregar dados",description:F instanceof Error?F.message:"Erro desconhecido",variant:"destructive"})}finally{s(!1)}},R=async()=>{const{data:F,error:U}=await z.from("fazendas").select("*").order("nome",{ascending:!0});if(U)throw U;l(F||[])},T=async(F,U)=>{try{x(!0);const Z=(U==null?void 0:U.fazenda)!==void 0?U.fazenda:c,ce=(U==null?void 0:U.dataInicio)!==void 0?U.dataInicio:f,k=(U==null?void 0:U.dataFim)!==void 0?U.dataFim:p,M=(U==null?void 0:U.status)!==void 0?U.status:b,q=((F!==void 0?F:v)-1)*S,I=q+S*2-1;let w=z.from("protocolos_sincronizacao").select("*",{count:"exact"});Z&&Z!=="all"&&(w=w.eq("fazenda_id",Z)),ce&&(w=w.gte("data_inicio",ce)),k&&(w=w.lte("data_inicio",k)),M==="aguardando_2_passo"?w=w.in("status",["PASSO1_FECHADO","PRIMEIRO_PASSO_FECHADO"]):M==="sincronizado"?w=w.in("status",["SINCRONIZADO","PASSO2_FECHADO"]):M==="fechado"&&(w=w.in("status",["FECHADO","EM_TE"])),w=w.order("data_inicio",{ascending:!1}).range(q,I);const{data:C,error:$,count:O}=await w;if($)throw $;const L=(C||[]).map(B=>B.id),H=[...new Set((C||[]).map(B=>B.fazenda_id))],{data:G,error:te}=await z.from("protocolo_receptoras").select("protocolo_id").in("protocolo_id",L);te&&console.error("Erro ao contar receptoras:",te);const Y=(G||[]).reduce((B,ie)=>(B[ie.protocolo_id]=(B[ie.protocolo_id]||0)+1,B),{}),{data:be}=await z.from("fazendas").select("id, nome").in("id",H),de=(be||[]).reduce((B,ie)=>(B[ie.id]=ie.nome,B),{}),le=(C||[]).map(B=>{const ie=Y[B.id]||0;return ie===0?null:{...B,fazenda_nome:de[B.fazenda_id]||"N/A",receptoras_count:ie}}).filter(B=>B!==null).slice(0,S);o(le),j(O||0)}catch(Z){console.error("Erro ao carregar protocolos:",Z),t({title:"Erro ao carregar protocolos",description:Z instanceof Error?Z.message:"Erro desconhecido",variant:"destructive"}),o([])}finally{x(!1)}};return a?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Protocolos de Sincronizao"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar protocolos em 2 passos"})]}),r.jsxs(re,{onClick:()=>e("/protocolos/novo"),className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ar,{className:"w-4 h-4 mr-2"}),"Novo Protocolo (1 Passo)"]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Filtros"})}),r.jsxs(ke,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Filtro Rpido"}),r.jsxs(_t,{value:b,onValueChange:y,children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Todos os protocolos"})}),r.jsxs(gt,{children:[r.jsx(Ie,{value:"all",children:"Todos os protocolos"}),r.jsx(Ie,{value:"aguardando_2_passo",children:"Aguardando 2 Passo"}),r.jsx(Ie,{value:"sincronizado",children:"Sincronizados"}),r.jsx(Ie,{value:"fechado",children:"Fechados"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Fazenda"}),r.jsxs(_t,{value:c||"all",onValueChange:F=>{d(F==="all"?"":F)},children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Todas as fazendas"})}),r.jsxs(gt,{children:[r.jsx(Ie,{value:"all",children:"Todas as fazendas"}),i.map(F=>r.jsx(Ie,{value:F.id,children:F.nome},F.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Data Incio (de)"}),r.jsx(Us,{value:f,onChange:h})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Data Incio (at)"}),r.jsx(Us,{value:p,onChange:m})]})]}),r.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[r.jsxs("div",{className:"flex flex-wrap gap-2 flex-1",children:[r.jsx(ae,{className:"w-full text-sm font-medium text-slate-700",children:"Atalhos rpidos:"}),r.jsx(re,{type:"button",variant:"outline",size:"sm",onClick:()=>{const F=new Date,U=new Date(F);U.setDate(F.getDate()-7);const Z=U.toISOString().split("T")[0],ce=F.toISOString().split("T")[0];h(Z),m(ce)},children:"ltimos 7 dias"}),r.jsx(re,{type:"button",variant:"outline",size:"sm",onClick:()=>{const F=new Date,U=new Date(F);U.setDate(F.getDate()-30);const Z=U.toISOString().split("T")[0],ce=F.toISOString().split("T")[0];h(Z),m(ce)},children:"ltimos 30 dias"}),r.jsx(re,{type:"button",variant:"outline",size:"sm",onClick:()=>{const F=new Date,U=new Date(F);U.setDate(F.getDate()-90);const Z=U.toISOString().split("T")[0],ce=F.toISOString().split("T")[0];h(Z),m(ce)},children:"ltimos 90 dias"})]}),r.jsxs(re,{type:"button",onClick:()=>{g(1),T(1,{fazenda:c,dataInicio:f,dataFim:p,status:b})},disabled:_,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(Ul,{className:"w-4 h-4 mr-2"}),"Buscar"]})]})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsxs(Pe,{children:["Protocolos de Sincronizao (",n.length,")"]})}),r.jsx(ke,{children:_?r.jsx("div",{className:"py-8",children:r.jsx(Pt,{})}):n.length===0?r.jsxs("div",{className:"py-12 text-center text-slate-500",children:[r.jsx("p",{className:"text-lg",children:"Nenhum protocolo encontrado"}),r.jsx("p",{className:"text-sm mt-2",children:"Ajuste os filtros ou adicione um novo protocolo"})]}):r.jsxs(r.Fragment,{children:[r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Fazenda"}),r.jsx(X,{children:"Data Incio"}),r.jsx(X,{children:"Data 2 Passo"}),r.jsx(X,{children:"Tcnico 2 Passo"}),r.jsx(X,{children:"Receptoras"}),r.jsx(X,{children:"Status"}),r.jsx(X,{className:"text-right",children:"Aes"})]})}),r.jsx(Tt,{children:n.map(F=>{const U=F.status==="PASSO1_FECHADO"||F.status==="PRIMEIRO_PASSO_FECHADO",Z=F.status==="FECHADO"||F.status==="EM_TE";return r.jsxs(Oe,{children:[r.jsx(W,{className:"font-medium",children:F.fazenda_nome}),r.jsx(W,{children:Lt(F.data_inicio)}),r.jsx(W,{children:F.passo2_data?Lt(F.passo2_data):"-"}),r.jsx(W,{children:F.passo2_tecnico_responsavel||"-"}),r.jsx(W,{children:F.receptoras_count}),r.jsx(W,{children:Z||F.status==="FECHADO"||F.status==="EM_TE"?r.jsx(et,{variant:"secondary",className:"bg-slate-500 hover:bg-slate-600 text-white",children:"Fechado"}):F.status==="SINCRONIZADO"||F.status==="PASSO2_FECHADO"?r.jsx(et,{variant:"default",className:"bg-green-500 hover:bg-green-600 text-white",children:"Sincronizado"}):U?r.jsx(et,{variant:"secondary",className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:"Aguardando 2 Passo"}):r.jsx(et,{variant:"default",children:F.status||"N/A"})}),r.jsx(W,{children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[U&&r.jsxs(re,{variant:"default",size:"sm",onClick:()=>e(`/protocolos/${F.id}/passo2`),children:[r.jsx(qR,{className:"w-4 h-4 mr-2"}),"Iniciar 2 Passo"]}),r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>e(`/protocolos/${F.id}/relatorio`),children:[r.jsx(qc,{className:"w-4 h-4 mr-2"}),"Ver Relatrio"]})]})})]},F.id)})})]}),n.length>0&&r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[r.jsxs("div",{className:"text-sm text-slate-600",children:["Pgina ",v," - Mostrando ",n.length," protocolos"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(re,{variant:"outline",size:"sm",onClick:async()=>{const F=Math.max(1,v-1);g(F),await T(F)},disabled:v===1||_,children:[r.jsx(GE,{className:"w-4 h-4"}),"Anterior"]}),r.jsxs(re,{variant:"outline",size:"sm",onClick:async()=>{const F=v+1;g(F),await T(F)},disabled:n.length<S||_,children:["Prxima",r.jsx(YE,{className:"w-4 h-4"})]})]})]})]})})]})]})}var sb=1,GB=.9,YB=.8,WB=.17,cp=.1,dp=.999,QB=.9999,ZB=.99,XB=/[\\\/_+.#"@\[\(\{&]/,KB=/[\\\/_+.#"@\[\(\{&]/g,JB=/[\s-]/,dA=/[\s-]/g;function qg(e,t,a,s,n,o,i){if(o===t.length)return n===e.length?sb:ZB;var l=`${n},${o}`;if(i[l]!==void 0)return i[l];for(var c=s.charAt(o),d=a.indexOf(c,n),f=0,h,p,m,b;d>=0;)h=qg(e,t,a,s,d+1,o+1,i),h>f&&(d===n?h*=sb:XB.test(e.charAt(d-1))?(h*=YB,m=e.slice(n,d-1).match(KB),m&&n>0&&(h*=Math.pow(dp,m.length))):JB.test(e.charAt(d-1))?(h*=GB,b=e.slice(n,d-1).match(dA),b&&n>0&&(h*=Math.pow(dp,b.length))):(h*=WB,n>0&&(h*=Math.pow(dp,d-n))),e.charAt(d)!==t.charAt(o)&&(h*=QB)),(h<cp&&a.charAt(d-1)===s.charAt(o+1)||s.charAt(o+1)===s.charAt(o)&&a.charAt(d-1)!==s.charAt(o))&&(p=qg(e,t,a,s,d+1,o+2,i),p*cp>h&&(h=p*cp)),h>f&&(f=h),d=a.indexOf(c,d+1);return i[l]=f,f}function rb(e){return e.toLowerCase().replace(dA," ")}function eU(e,t,a){return e=a&&a.length>0?`${e+" "+a.join(" ")}`:e,qg(e,t,rb(e),rb(t),0,0,{})}var gc='[cmdk-group=""]',up='[cmdk-group-items=""]',tU='[cmdk-group-heading=""]',uA='[cmdk-item=""]',nb=`${uA}:not([aria-disabled="true"])`,Bg="cmdk-item-select",Ai="data-value",aU=(e,t,a)=>eU(e,t,a),fA=u.createContext(void 0),au=()=>u.useContext(fA),hA=u.createContext(void 0),Hx=()=>u.useContext(hA),mA=u.createContext(void 0),pA=u.forwardRef((e,t)=>{let a=Di(()=>{var O,L;return{search:"",value:(L=(O=e.value)!=null?O:e.defaultValue)!=null?L:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=Di(()=>new Set),n=Di(()=>new Map),o=Di(()=>new Map),i=Di(()=>new Set),l=gA(e),{label:c,children:d,value:f,onValueChange:h,filter:p,shouldFilter:m,loop:b,disablePointerSelection:y=!1,vimBindings:_=!0,...x}=e,v=es(),g=es(),E=es(),j=u.useRef(null),S=hU();ei(()=>{if(f!==void 0){let O=f.trim();a.current.value=O,N.emit()}},[f]),ei(()=>{S(6,ce)},[]);let N=u.useMemo(()=>({subscribe:O=>(i.current.add(O),()=>i.current.delete(O)),snapshot:()=>a.current,setState:(O,L,H)=>{var G,te,Y,be;if(!Object.is(a.current[O],L)){if(a.current[O]=L,O==="search")Z(),F(),S(1,U);else if(O==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let de=document.getElementById(E);de?de.focus():(G=document.getElementById(v))==null||G.focus()}if(S(7,()=>{var de;a.current.selectedItemId=(de=k())==null?void 0:de.id,N.emit()}),H||S(5,ce),((te=l.current)==null?void 0:te.value)!==void 0){let de=L??"";(be=(Y=l.current).onValueChange)==null||be.call(Y,de);return}}N.emit()}},emit:()=>{i.current.forEach(O=>O())}}),[]),R=u.useMemo(()=>({value:(O,L,H)=>{var G;L!==((G=o.current.get(O))==null?void 0:G.value)&&(o.current.set(O,{value:L,keywords:H}),a.current.filtered.items.set(O,T(L,H)),S(2,()=>{F(),N.emit()}))},item:(O,L)=>(s.current.add(O),L&&(n.current.has(L)?n.current.get(L).add(O):n.current.set(L,new Set([O]))),S(3,()=>{Z(),F(),a.current.value||U(),N.emit()}),()=>{o.current.delete(O),s.current.delete(O),a.current.filtered.items.delete(O);let H=k();S(4,()=>{Z(),(H==null?void 0:H.getAttribute("id"))===O&&U(),N.emit()})}),group:O=>(n.current.has(O)||n.current.set(O,new Set),()=>{o.current.delete(O),n.current.delete(O)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:v,inputId:E,labelId:g,listInnerRef:j}),[]);function T(O,L){var H,G;let te=(G=(H=l.current)==null?void 0:H.filter)!=null?G:aU;return O?te(O,a.current.search,L):0}function F(){if(!a.current.search||l.current.shouldFilter===!1)return;let O=a.current.filtered.items,L=[];a.current.filtered.groups.forEach(G=>{let te=n.current.get(G),Y=0;te.forEach(be=>{let de=O.get(be);Y=Math.max(de,Y)}),L.push([G,Y])});let H=j.current;M().sort((G,te)=>{var Y,be;let de=G.getAttribute("id"),V=te.getAttribute("id");return((Y=O.get(V))!=null?Y:0)-((be=O.get(de))!=null?be:0)}).forEach(G=>{let te=G.closest(up);te?te.appendChild(G.parentElement===te?G:G.closest(`${up} > *`)):H.appendChild(G.parentElement===H?G:G.closest(`${up} > *`))}),L.sort((G,te)=>te[1]-G[1]).forEach(G=>{var te;let Y=(te=j.current)==null?void 0:te.querySelector(`${gc}[${Ai}="${encodeURIComponent(G[0])}"]`);Y==null||Y.parentElement.appendChild(Y)})}function U(){let O=M().find(H=>H.getAttribute("aria-disabled")!=="true"),L=O==null?void 0:O.getAttribute(Ai);N.setState("value",L||void 0)}function Z(){var O,L,H,G;if(!a.current.search||l.current.shouldFilter===!1){a.current.filtered.count=s.current.size;return}a.current.filtered.groups=new Set;let te=0;for(let Y of s.current){let be=(L=(O=o.current.get(Y))==null?void 0:O.value)!=null?L:"",de=(G=(H=o.current.get(Y))==null?void 0:H.keywords)!=null?G:[],V=T(be,de);a.current.filtered.items.set(Y,V),V>0&&te++}for(let[Y,be]of n.current)for(let de of be)if(a.current.filtered.items.get(de)>0){a.current.filtered.groups.add(Y);break}a.current.filtered.count=te}function ce(){var O,L,H;let G=k();G&&(((O=G.parentElement)==null?void 0:O.firstChild)===G&&((H=(L=G.closest(gc))==null?void 0:L.querySelector(tU))==null||H.scrollIntoView({block:"nearest"})),G.scrollIntoView({block:"nearest"}))}function k(){var O;return(O=j.current)==null?void 0:O.querySelector(`${uA}[aria-selected="true"]`)}function M(){var O;return Array.from(((O=j.current)==null?void 0:O.querySelectorAll(nb))||[])}function A(O){let L=M()[O];L&&N.setState("value",L.getAttribute(Ai))}function q(O){var L;let H=k(),G=M(),te=G.findIndex(be=>be===H),Y=G[te+O];(L=l.current)!=null&&L.loop&&(Y=te+O<0?G[G.length-1]:te+O===G.length?G[0]:G[te+O]),Y&&N.setState("value",Y.getAttribute(Ai))}function I(O){let L=k(),H=L==null?void 0:L.closest(gc),G;for(;H&&!G;)H=O>0?uU(H,gc):fU(H,gc),G=H==null?void 0:H.querySelector(nb);G?N.setState("value",G.getAttribute(Ai)):q(O)}let w=()=>A(M().length-1),C=O=>{O.preventDefault(),O.metaKey?w():O.altKey?I(1):q(1)},$=O=>{O.preventDefault(),O.metaKey?A(0):O.altKey?I(-1):q(-1)};return u.createElement(Ue.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:O=>{var L;(L=x.onKeyDown)==null||L.call(x,O);let H=O.nativeEvent.isComposing||O.keyCode===229;if(!(O.defaultPrevented||H))switch(O.key){case"n":case"j":{_&&O.ctrlKey&&C(O);break}case"ArrowDown":{C(O);break}case"p":case"k":{_&&O.ctrlKey&&$(O);break}case"ArrowUp":{$(O);break}case"Home":{O.preventDefault(),A(0);break}case"End":{O.preventDefault(),w();break}case"Enter":{O.preventDefault();let G=k();if(G){let te=new Event(Bg);G.dispatchEvent(te)}}}}},u.createElement("label",{"cmdk-label":"",htmlFor:R.inputId,id:R.labelId,style:pU},c),Vh(e,O=>u.createElement(hA.Provider,{value:N},u.createElement(fA.Provider,{value:R},O))))}),sU=u.forwardRef((e,t)=>{var a,s;let n=es(),o=u.useRef(null),i=u.useContext(mA),l=au(),c=gA(e),d=(s=(a=c.current)==null?void 0:a.forceMount)!=null?s:i==null?void 0:i.forceMount;ei(()=>{if(!d)return l.item(n,i==null?void 0:i.id)},[d]);let f=vA(n,o,[e.value,e.children,o],e.keywords),h=Hx(),p=oo(S=>S.value&&S.value===f.current),m=oo(S=>d||l.filter()===!1?!0:S.search?S.filtered.items.get(n)>0:!0);u.useEffect(()=>{let S=o.current;if(!(!S||e.disabled))return S.addEventListener(Bg,b),()=>S.removeEventListener(Bg,b)},[m,e.onSelect,e.disabled]);function b(){var S,N;y(),(N=(S=c.current).onSelect)==null||N.call(S,f.current)}function y(){h.setState("value",f.current,!0)}if(!m)return null;let{disabled:_,value:x,onSelect:v,forceMount:g,keywords:E,...j}=e;return u.createElement(Ue.div,{ref:Yo(o,t),...j,id:n,"cmdk-item":"",role:"option","aria-disabled":!!_,"aria-selected":!!p,"data-disabled":!!_,"data-selected":!!p,onPointerMove:_||l.getDisablePointerSelection()?void 0:y,onClick:_?void 0:b},e.children)}),rU=u.forwardRef((e,t)=>{let{heading:a,children:s,forceMount:n,...o}=e,i=es(),l=u.useRef(null),c=u.useRef(null),d=es(),f=au(),h=oo(m=>n||f.filter()===!1?!0:m.search?m.filtered.groups.has(i):!0);ei(()=>f.group(i),[]),vA(i,l,[e.value,e.heading,c]);let p=u.useMemo(()=>({id:i,forceMount:n}),[n]);return u.createElement(Ue.div,{ref:Yo(l,t),...o,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},a&&u.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},a),Vh(e,m=>u.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":a?d:void 0},u.createElement(mA.Provider,{value:p},m))))}),nU=u.forwardRef((e,t)=>{let{alwaysRender:a,...s}=e,n=u.useRef(null),o=oo(i=>!i.search);return!a&&!o?null:u.createElement(Ue.div,{ref:Yo(n,t),...s,"cmdk-separator":"",role:"separator"})}),oU=u.forwardRef((e,t)=>{let{onValueChange:a,...s}=e,n=e.value!=null,o=Hx(),i=oo(d=>d.search),l=oo(d=>d.selectedItemId),c=au();return u.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),u.createElement(Ue.input,{ref:t,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:n?e.value:i,onChange:d=>{n||o.setState("search",d.target.value),a==null||a(d.target.value)}})}),iU=u.forwardRef((e,t)=>{let{children:a,label:s="Suggestions",...n}=e,o=u.useRef(null),i=u.useRef(null),l=oo(d=>d.selectedItemId),c=au();return u.useEffect(()=>{if(i.current&&o.current){let d=i.current,f=o.current,h,p=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let m=d.offsetHeight;f.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return p.observe(d),()=>{cancelAnimationFrame(h),p.unobserve(d)}}},[]),u.createElement(Ue.div,{ref:Yo(o,t),...n,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":s,id:c.listId},Vh(e,d=>u.createElement("div",{ref:Yo(i,c.listInnerRef),"cmdk-list-sizer":""},d)))}),lU=u.forwardRef((e,t)=>{let{open:a,onOpenChange:s,overlayClassName:n,contentClassName:o,container:i,...l}=e;return u.createElement(Th,{open:a,onOpenChange:s},u.createElement(Oh,{container:i},u.createElement(Zl,{"cmdk-overlay":"",className:n}),u.createElement(Xl,{"aria-label":e.label,"cmdk-dialog":"",className:o},u.createElement(pA,{ref:t,...l}))))}),cU=u.forwardRef((e,t)=>oo(a=>a.filtered.count===0)?u.createElement(Ue.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),dU=u.forwardRef((e,t)=>{let{progress:a,children:s,label:n="Loading...",...o}=e;return u.createElement(Ue.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,"aria-label":n},Vh(e,i=>u.createElement("div",{"aria-hidden":!0},i)))}),hs=Object.assign(pA,{List:iU,Item:sU,Input:oU,Group:rU,Separator:nU,Dialog:lU,Empty:cU,Loading:dU});function uU(e,t){let a=e.nextElementSibling;for(;a;){if(a.matches(t))return a;a=a.nextElementSibling}}function fU(e,t){let a=e.previousElementSibling;for(;a;){if(a.matches(t))return a;a=a.previousElementSibling}}function gA(e){let t=u.useRef(e);return ei(()=>{t.current=e}),t}var ei=typeof window>"u"?u.useEffect:u.useLayoutEffect;function Di(e){let t=u.useRef();return t.current===void 0&&(t.current=e()),t}function oo(e){let t=Hx(),a=()=>e(t.snapshot());return u.useSyncExternalStore(t.subscribe,a,a)}function vA(e,t,a,s=[]){let n=u.useRef(),o=au();return ei(()=>{var i;let l=(()=>{var d;for(let f of a){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(d=f.current.textContent)==null?void 0:d.trim():n.current}})(),c=s.map(d=>d.trim());o.value(e,l,c),(i=t.current)==null||i.setAttribute(Ai,l),n.current=l}),n}var hU=()=>{let[e,t]=u.useState(),a=Di(()=>new Map);return ei(()=>{a.current.forEach(s=>s()),a.current=new Map},[e]),(s,n)=>{a.current.set(s,n),t({})}};function mU(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Vh({asChild:e,children:t},a){return e&&u.isValidElement(t)?u.cloneElement(mU(t),{ref:t.ref},a(t.props.children)):a(t)}var pU={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const xA=u.forwardRef(({className:e,...t},a)=>r.jsx(hs,{ref:a,className:Ae("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));xA.displayName=hs.displayName;const yA=u.forwardRef(({className:e,...t},a)=>r.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[r.jsx(Ul,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),r.jsx(hs.Input,{ref:a,className:Ae("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));yA.displayName=hs.Input.displayName;const _A=u.forwardRef(({className:e,...t},a)=>r.jsx(hs.List,{ref:a,className:Ae("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));_A.displayName=hs.List.displayName;const bA=u.forwardRef((e,t)=>r.jsx(hs.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));bA.displayName=hs.Empty.displayName;const wA=u.forwardRef(({className:e,...t},a)=>r.jsx(hs.Group,{ref:a,className:Ae("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));wA.displayName=hs.Group.displayName;const gU=u.forwardRef(({className:e,...t},a)=>r.jsx(hs.Separator,{ref:a,className:Ae("-mx-1 h-px bg-border",e),...t}));gU.displayName=hs.Separator.displayName;const jA=u.forwardRef(({className:e,...t},a)=>r.jsx(hs.Item,{ref:a,className:Ae("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));jA.displayName=hs.Item.displayName;var EA="AlertDialog",[vU,xH]=As(EA,[LN]),mn=LN(),SA=e=>{const{__scopeAlertDialog:t,...a}=e,s=mn(t);return r.jsx(Th,{...s,...a,modal:!0})};SA.displayName=EA;var xU="AlertDialogTrigger",yU=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=mn(a);return r.jsx(e1,{...n,...s,ref:t})});yU.displayName=xU;var _U="AlertDialogPortal",NA=e=>{const{__scopeAlertDialog:t,...a}=e,s=mn(t);return r.jsx(Oh,{...s,...a})};NA.displayName=_U;var bU="AlertDialogOverlay",CA=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=mn(a);return r.jsx(Zl,{...n,...s,ref:t})});CA.displayName=bU;var tl="AlertDialogContent",[wU,jU]=vU(tl),EU=vE("AlertDialogContent"),AA=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,children:s,...n}=e,o=mn(a),i=u.useRef(null),l=Nt(t,i),c=u.useRef(null);return r.jsx(y3,{contentName:tl,titleName:DA,docsSlug:"alert-dialog",children:r.jsx(wU,{scope:a,cancelRef:c,children:r.jsxs(Xl,{role:"alertdialog",...o,...n,ref:l,onOpenAutoFocus:Be(n.onOpenAutoFocus,d=>{var f;d.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(EU,{children:s}),r.jsx(NU,{contentRef:i})]})})})});AA.displayName=tl;var DA="AlertDialogTitle",TA=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=mn(a);return r.jsx(Wd,{...n,...s,ref:t})});TA.displayName=DA;var OA="AlertDialogDescription",RA=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=mn(a);return r.jsx(Qd,{...n,...s,ref:t})});RA.displayName=OA;var SU="AlertDialogAction",MA=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=mn(a);return r.jsx(Rh,{...n,...s,ref:t})});MA.displayName=SU;var kA="AlertDialogCancel",zA=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,{cancelRef:n}=jU(kA,a),o=mn(a),i=Nt(t,n);return r.jsx(Rh,{...o,...s,ref:i})});zA.displayName=kA;var NU=({contentRef:e})=>{const t=`\`${tl}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${tl}\` by passing a \`${OA}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${tl}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return u.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},CU=SA,AU=NA,PA=CA,IA=AA,LA=MA,FA=zA,$A=TA,qA=RA;const _d=CU,DU=AU,BA=u.forwardRef(({className:e,...t},a)=>r.jsx(PA,{className:Ae("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));BA.displayName=PA.displayName;const Cl=u.forwardRef(({className:e,...t},a)=>r.jsxs(DU,{children:[r.jsx(BA,{}),r.jsx(IA,{ref:a,className:Ae("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Cl.displayName=IA.displayName;const Al=({className:e,...t})=>r.jsx("div",{className:Ae("flex flex-col space-y-2 text-center sm:text-left",e),...t});Al.displayName="AlertDialogHeader";const Dl=({className:e,...t})=>r.jsx("div",{className:Ae("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Dl.displayName="AlertDialogFooter";const Tl=u.forwardRef(({className:e,...t},a)=>r.jsx($A,{ref:a,className:Ae("text-lg font-semibold",e),...t}));Tl.displayName=$A.displayName;const Ol=u.forwardRef(({className:e,...t},a)=>r.jsx(qA,{ref:a,className:Ae("text-sm text-muted-foreground",e),...t}));Ol.displayName=qA.displayName;const Rl=u.forwardRef(({className:e,...t},a)=>r.jsx(LA,{ref:a,className:Ae(hd(),e),...t}));Rl.displayName=LA.displayName;const Ml=u.forwardRef(({className:e,...t},a)=>r.jsx(FA,{ref:a,className:Ae(hd({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Ml.displayName=FA.displayName;function Gh({value:e,onChange:t,disabled:a=!1,variant:s="display"}){return s==="editable"&&t&&!a?r.jsxs(Uh,{children:[r.jsx(Hh,{asChild:!0,children:r.jsxs(re,{variant:"outline",size:"sm",className:"h-7 px-3",disabled:a,children:[e==="N"&&r.jsx(et,{variant:"outline",className:"bg-slate-100 text-slate-700 border-0",children:"N"}),e==="CL"&&r.jsx(et,{variant:"outline",className:"bg-blue-100 text-blue-700 border-0",children:"CL"}),!e&&r.jsx("span",{className:"text-slate-400 text-sm",children:"Selecionar"})]})}),r.jsx(tu,{className:"w-auto p-2",align:"start",children:r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs(re,{variant:e==="N"?"default":"outline",size:"sm",className:"justify-start",onClick:()=>t("N"),children:[r.jsx(et,{variant:"outline",className:"bg-slate-100 text-slate-700 border-0 mr-2",children:"N"}),e==="N"&&r.jsx(nd,{className:"w-4 h-4 ml-auto"})]}),r.jsxs(re,{variant:e==="CL"?"default":"outline",size:"sm",className:"justify-start",onClick:()=>t("CL"),children:[r.jsx(et,{variant:"outline",className:"bg-blue-100 text-blue-700 border-0 mr-2",children:"CL"}),e==="CL"&&r.jsx(nd,{className:"w-4 h-4 ml-auto"})]}),e&&r.jsxs(re,{variant:"ghost",size:"sm",className:"justify-start text-slate-500",onClick:()=>t(null),children:[r.jsx(sr,{className:"w-4 h-4 mr-2"}),"Limpar"]})]})})]}):e==="N"?r.jsx(et,{variant:"outline",className:"bg-slate-100 text-slate-700 text-xs",children:"N"}):e==="CL"?r.jsx(et,{variant:"outline",className:"bg-blue-100 text-blue-700 text-xs",children:"CL"}):r.jsx("span",{className:"text-slate-300 text-xs",children:""})}function Yh({value:e,onChange:t,disabled:a=!1,variant:s="single"}){const n=s==="row"&&t&&!a,o=l=>{switch(l){case 1:return"bg-red-500";case 2:return"bg-yellow-500";case 3:return"bg-green-500"}},i=(l,c)=>r.jsx("div",{className:Ae("w-6 h-6 rounded-full border-2 transition-all",o(l),c?"border-slate-900 scale-110":"border-slate-300",n&&!a&&"cursor-pointer hover:scale-125"),onClick:()=>n&&(t==null?void 0:t(l)),title:`Qualidade ${l}`});return s==="single"?e?r.jsx("div",{className:"flex items-center gap-1.5",children:r.jsx("div",{className:Ae("w-4 h-4 rounded-full border-2",o(e),"border-slate-300"),title:`Qualidade ${e}`})}):r.jsx("span",{className:"text-slate-300 text-xs",children:""}):r.jsxs(Uh,{children:[r.jsx(Hh,{asChild:!0,children:r.jsx(re,{variant:"outline",size:"sm",className:"h-7 px-3",disabled:a,children:r.jsx("div",{className:"flex items-center gap-1",children:e?r.jsxs(r.Fragment,{children:[i(e,!1),r.jsx("span",{className:"text-sm text-slate-600 ml-1",children:e})]}):r.jsx("span",{className:"text-slate-400 text-sm",children:"Selecionar"})})})}),r.jsx(tu,{className:"w-auto p-3",align:"start",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx("div",{className:"flex items-center gap-3",children:[1,2,3].map(l=>r.jsxs("button",{type:"button",className:Ae("flex items-center gap-2 p-2 rounded-md transition-all","hover:bg-slate-100",e===l&&"bg-slate-100"),onClick:()=>t(l),disabled:a,children:[i(l,e===l),r.jsx("span",{className:"text-sm text-slate-700",children:l}),e===l&&r.jsx(nd,{className:"w-4 h-4 text-green-600"})]},l))}),e&&r.jsxs(re,{variant:"ghost",size:"sm",className:"justify-start text-slate-500",onClick:()=>t(null),disabled:a,children:[r.jsx(sr,{className:"w-4 h-4 mr-2"}),"Limpar"]})]})})]})}var UA="Toggle",Vx=u.forwardRef((e,t)=>{const{pressed:a,defaultPressed:s,onPressedChange:n,...o}=e,[i,l]=Bs({prop:a,onChange:n,defaultProp:s??!1,caller:UA});return r.jsx(Ue.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...o,ref:t,onClick:Be(e.onClick,()=>{e.disabled||l(!i)})})});Vx.displayName=UA;var HA=Vx,mo="ToggleGroup",[VA,yH]=As(mo,[kh]),GA=kh(),Gx=se.forwardRef((e,t)=>{const{type:a,...s}=e;if(a==="single"){const n=s;return r.jsx(TU,{...n,ref:t})}if(a==="multiple"){const n=s;return r.jsx(OU,{...n,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${mo}\``)});Gx.displayName=mo;var[YA,WA]=VA(mo),TU=se.forwardRef((e,t)=>{const{value:a,defaultValue:s,onValueChange:n=()=>{},...o}=e,[i,l]=Bs({prop:a,defaultProp:s??"",onChange:n,caller:mo});return r.jsx(YA,{scope:e.__scopeToggleGroup,type:"single",value:se.useMemo(()=>i?[i]:[],[i]),onItemActivate:l,onItemDeactivate:se.useCallback(()=>l(""),[l]),children:r.jsx(QA,{...o,ref:t})})}),OU=se.forwardRef((e,t)=>{const{value:a,defaultValue:s,onValueChange:n=()=>{},...o}=e,[i,l]=Bs({prop:a,defaultProp:s??[],onChange:n,caller:mo}),c=se.useCallback(f=>l((h=[])=>[...h,f]),[l]),d=se.useCallback(f=>l((h=[])=>h.filter(p=>p!==f)),[l]);return r.jsx(YA,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:d,children:r.jsx(QA,{...o,ref:t})})});Gx.displayName=mo;var[RU,MU]=VA(mo),QA=se.forwardRef((e,t)=>{const{__scopeToggleGroup:a,disabled:s=!1,rovingFocus:n=!0,orientation:o,dir:i,loop:l=!0,...c}=e,d=GA(a),f=Mh(i),h={role:"group",dir:f,...c};return r.jsx(RU,{scope:a,rovingFocus:n,disabled:s,children:n?r.jsx(l1,{asChild:!0,...d,orientation:o,dir:f,loop:l,children:r.jsx(Ue.div,{...h,ref:t})}):r.jsx(Ue.div,{...h,ref:t})})}),qf="ToggleGroupItem",ZA=se.forwardRef((e,t)=>{const a=WA(qf,e.__scopeToggleGroup),s=MU(qf,e.__scopeToggleGroup),n=GA(e.__scopeToggleGroup),o=a.value.includes(e.value),i=s.disabled||e.disabled,l={...e,pressed:o,disabled:i},c=se.useRef(null);return s.rovingFocus?r.jsx(c1,{asChild:!0,...n,focusable:!i,active:o,ref:c,children:r.jsx(ob,{...l,ref:t})}):r.jsx(ob,{...l,ref:t})});ZA.displayName=qf;var ob=se.forwardRef((e,t)=>{const{__scopeToggleGroup:a,value:s,...n}=e,o=WA(qf,a),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=o.type==="single"?i:void 0;return r.jsx(Vx,{...l,...n,ref:t,onPressedChange:c=>{c?o.onItemActivate(s):o.onItemDeactivate(s)}})}),XA=Gx,KA=ZA;const JA=Bl("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),kU=u.forwardRef(({className:e,variant:t,size:a,...s},n)=>r.jsx(HA,{ref:n,className:Ae(JA({variant:t,size:a,className:e})),...s}));kU.displayName=HA.displayName;const eD=u.createContext({size:"default",variant:"default"}),tD=u.forwardRef(({className:e,variant:t,size:a,children:s,...n},o)=>r.jsx(XA,{ref:o,className:Ae("flex items-center justify-center gap-1",e),...n,children:r.jsx(eD.Provider,{value:{variant:t,size:a},children:s})}));tD.displayName=XA.displayName;const Ug=u.forwardRef(({className:e,children:t,variant:a,size:s,...n},o)=>{const i=u.useContext(eD);return r.jsx(KA,{ref:o,className:Ae(JA({variant:i.variant||a,size:i.size||s}),e),...n,children:t})});Ug.displayName=KA.displayName;function ib({ciclandoValue:e,qualidadeValue:t,onChangeCiclando:a,onChangeQualidade:s,disabled:n=!1,size:o="sm"}){const i=o==="sm"?"text-xs":"text-sm",l=o==="sm"?"w-4 h-4":"w-5 h-5",c=d=>{switch(d){case 1:return"bg-red-500";case 2:return"bg-yellow-500";case 3:return"bg-green-500"}};return r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-slate-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:Ae("text-slate-500 font-medium",i),children:"Ciclo:"}),r.jsxs(tD,{type:"single",value:e||void 0,onValueChange:d=>{n||a(d==="CL"||d==="N"?d:null)},disabled:n,className:"gap-1",children:[r.jsx(Ug,{value:"CL","aria-label":"CL",size:"sm",variant:"outline",className:Ae("h-7 px-2 text-xs",e==="CL"&&"bg-blue-100 text-blue-700 border-blue-300 data-[state=on]:bg-blue-100",n&&"opacity-60"),children:"CL"}),r.jsx(Ug,{value:"N","aria-label":"N",size:"sm",variant:"outline",className:Ae("h-7 px-2 text-xs",e==="N"&&"bg-slate-100 text-slate-700 border-slate-300 data-[state=on]:bg-slate-100",n&&"opacity-60"),children:"N"})]}),e&&!n&&r.jsx(re,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-slate-400 hover:text-slate-600",onClick:()=>a(null),type:"button",children:r.jsx(sr,{className:"w-3 h-3"})}),!e&&r.jsx("span",{className:Ae("text-slate-300",i),children:""})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:Ae("text-slate-500 font-medium",i),children:"Qualidade:"}),r.jsx("div",{className:"flex items-center gap-1.5",children:[1,2,3].map(d=>r.jsx("button",{type:"button",disabled:n,onClick:()=>{n||s(t===d?null:d)},className:Ae(l,"rounded-full border-2 transition-all",c(d),t===d?"border-slate-900 scale-110 ring-2 ring-slate-300":"border-slate-300 opacity-50 hover:opacity-75 hover:scale-105",n&&"opacity-40 cursor-not-allowed",!n&&"cursor-pointer"),title:`Qualidade ${d}`},d))}),t&&!n&&r.jsx(re,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-slate-400 hover:text-slate-600",onClick:()=>s(null),type:"button",children:r.jsx(sr,{className:"w-3 h-3"})}),!t&&r.jsx("span",{className:Ae("text-slate-300",i),children:""})]})]})}function zU(){var le;const e=$a(),{toast:t}=fa(),[a,s]=u.useState(!1),[n,o]=u.useState(!1),i=u.useRef(!1),[l,c]=u.useState("form"),[d,f]=u.useState([]),[h,p]=u.useState([]),[m,b]=u.useState([]),[y,_]=u.useState(!1),[x,v]=u.useState(!1),[g,E]=u.useState(!1),[j,S]=u.useState(!1),[N,R]=u.useState(""),[T,F]=u.useState(!1),[U,Z]=u.useState({fazenda_id:"",data_inicio:Bc(),veterinario:"",tecnico:"",observacoes:""}),[ce,k]=u.useState([]),[M,A]=u.useState({receptora_id:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),[q,I]=u.useState({identificacao:"",nome:"",observacoes:""});u.useEffect(()=>{w()},[]),u.useEffect(()=>{l==="receptoras"&&U.fazenda_id?C(U.fazenda_id):l!=="receptoras"&&p([])},[l,U.fazenda_id]);const w=async()=>{try{const{data:B,error:ie}=await z.from("fazendas").select("*").order("nome",{ascending:!0});if(ie)throw ie;f(B||[])}catch(B){t({title:"Erro ao carregar fazendas",description:B instanceof Error?B.message:"Erro desconhecido",variant:"destructive"})}},C=async B=>{try{_(!0);const{data:ie,error:xe}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",B);if(xe)throw xe;const pe=(ie==null?void 0:ie.map(ne=>ne.receptora_id))||[];if(pe.length===0){p([]),b([]);return}const{data:Ce,error:De}=await z.from("receptoras").select("id, identificacao, nome").in("id",pe).order("identificacao",{ascending:!0});if(De)throw De;const P=(Ce||[]||[]).filter(ne=>(ne.id?String(ne.id).trim():"")!=="").map(async ne=>{const D=ne.id?String(ne.id).trim():"";if(!D)return null;const Q=await Bo(D),J=Ji(Q,"ENTRAR_PASSO1");return{...ne,status:Q,motivoIndisponivel:J.valido?void 0:J.mensagem}}),ue=(await Promise.all(P)).filter(ne=>ne!==null),K=ue.filter(ne=>ne.status==="VAZIA");p(K),b(ue)}catch(ie){console.error("Error loading receptoras:",ie),t({title:"Erro ao carregar receptoras",description:ie instanceof Error?ie.message:"Erro desconhecido",variant:"destructive"})}finally{_(!1)}},$=u.useMemo(()=>new Set(ce.filter(B=>B.id&&B.id.trim()!==""&&B.id!==null&&B.id!==void 0).map(B=>String(B.id).trim())),[ce]);u.useMemo(()=>h.filter(B=>{const ie=B.id?String(B.id).trim():"";return ie!==""&&!$.has(ie)}),[h,$]);const O=u.useMemo(()=>{if(!N.trim())return m.filter(ie=>{const xe=ie.id?String(ie.id).trim():"";return xe!==""&&!$.has(xe)&&ie.status==="VAZIA"}).map(ie=>({...ie,disponivel:!0}));const B=N.toLowerCase().trim();return m.filter(ie=>{const xe=ie.id?String(ie.id).trim():"";if(xe===""||$.has(xe))return!1;const pe=(ie.identificacao||"").toLowerCase(),Ce=(ie.nome||"").toLowerCase();return pe.includes(B)||Ce.includes(B)}).map(ie=>({...ie,disponivel:ie.status==="VAZIA"}))},[N,m,$]),L=()=>{if(!U.fazenda_id||!U.data_inicio||!U.veterinario.trim()||!U.tecnico.trim()){t({title:"Erro de validao",description:"Fazenda, data de incio, veterinrio e tcnico so obrigatrios",variant:"destructive"});return}c("receptoras")},H=async()=>{var Ce;const B=((Ce=M.receptora_id)==null?void 0:Ce.trim())||"";if(!B){t({title:"Erro",description:"Selecione uma receptora",variant:"destructive"});return}const ie=h.find(De=>(De.id?String(De.id).trim():"")===B);if(!ie||!ie.id){t({title:"Erro",description:"Receptora no encontrada ou invlida",variant:"destructive"});return}const xe=await Bo(B),pe=Ji(xe,"ENTRAR_PASSO1");if(!pe.valido){t({title:"Erro de validao",description:pe.mensagem||"A receptora no pode entrar no protocolo no estado atual",variant:"destructive"});return}if($.has(B)){t({title:"Receptora j adicionada",description:"Esta receptora j est na lista de selecionadas",variant:"destructive"});return}k(De=>{var P;return De.some(ee=>(ee.id?String(ee.id).trim():"")===B)?De:[...De,{id:ie.id,identificacao:ie.identificacao,nome:ie.nome,observacoes:((P=M.observacoes)==null?void 0:P.trim())||void 0,ciclando_classificacao:M.ciclando_classificacao||null,qualidade_semaforo:M.qualidade_semaforo||null}]}),A({receptora_id:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),R(""),F(!1),E(!1)},G=async()=>{var B;if(!q.identificacao.trim()){t({title:"Erro de validao",description:"Identificao (brinco)  obrigatria",variant:"destructive"});return}try{o(!0);const{data:ie,error:xe}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",U.fazenda_id);if(xe)throw console.error("Erro ao buscar receptoras da fazenda:",xe),xe;const pe=(ie==null?void 0:ie.map(ee=>ee.receptora_id))||[];if(pe.length>0){const{data:ee,error:ue}=await z.from("receptoras").select("id, identificacao, nome").in("id",pe).ilike("identificacao",q.identificacao.trim());if(ue)throw console.error("Erro ao verificar brinco duplicado:",ue),ue;if(ee&&ee.length>0){const K=ee[0].nome?`"${ee[0].nome}"`:"sem nome",ne=`J existe uma receptora com o brinco "${q.identificacao.trim()}" nesta fazenda (Nome: ${K}).`;throw console.error("Brinco duplicado detectado:",ne,ee),new Error(ne)}}if(q.nome.trim()&&pe.length>0){const{data:ee,error:ue}=await z.from("receptoras").select("id, identificacao").in("id",pe).ilike("nome",q.nome.trim());if(ue)throw console.error("Erro ao verificar nome duplicado:",ue),ue;if(ee&&ee.length>0)throw new Error(`J existe uma receptora com o nome "${q.nome.trim()}" nesta fazenda (Brinco: ${ee[0].identificacao}).`)}const Ce={identificacao:q.identificacao};q.nome.trim()&&(Ce.nome=q.nome);const{data:De,error:he}=await z.from("receptoras").insert([Ce]).select().single();if(he)throw he.code==="23505"?new Error("J existe uma receptora com esse brinco nesta fazenda."):he;const{error:P}=await z.from("receptora_fazenda_historico").insert([{receptora_id:De.id,fazenda_id:U.fazenda_id,data_inicio:Bc(),data_fim:null}]);P&&((B=P.message)!=null&&B.includes("brinco")||P.code==="P0001"||console.error("Erro ao criar histrico de fazenda:",P)),k([...ce,{id:De.id,identificacao:De.identificacao,nome:De.nome,observacoes:q.observacoes||void 0,ciclando_classificacao:q.ciclando_classificacao||null,qualidade_semaforo:q.qualidade_semaforo||null,isNew:!0}]),I({identificacao:"",nome:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),S(!1),C(U.fazenda_id)}catch(ie){t({title:"Erro ao criar receptora",description:ie instanceof Error?ie.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},te=B=>{k(ce.filter((ie,xe)=>xe!==B))},Y=async()=>{if(i.current||n)return;if(ce.length===0){t({title:"Erro de validao",description:"Adicione pelo menos 1 receptora antes de finalizar o 1 passo",variant:"destructive"});return}const B=ce.filter(he=>!he.id||he.id===""||he.id===null||he.id===void 0);if(B.length>0){console.error("Receptoras com IDs invlidos:",B),t({title:"Erro de validao",description:"Seleo de receptora invlida. Refaa a seleo.",variant:"destructive"});return}const ie=ce.filter(he=>he.id&&he.id!==""&&he.id!==null&&he.id!==void 0);if(ie.length!==ce.length||ie.length===0){console.error("Receptoras invlidas ou nenhuma vlida aps validao"),t({title:"Erro de validao",description:"Seleo de receptora invlida. Refaa a seleo.",variant:"destructive"});return}const xe=ie.map(he=>he.id),pe=ie.map(he=>he.observacoes||null),Ce=ie.map(he=>he.ciclando_classificacao||null),De=ie.map(he=>he.qualidade_semaforo||null);try{i.current=!0,o(!0);const he=`VET: ${U.veterinario.trim()} | TEC: ${U.tecnico.trim()}`,{data:P,error:ee}=await z.rpc("criar_protocolo_passo1_atomico",{p_fazenda_id:U.fazenda_id,p_data_inicio:U.data_inicio,p_responsavel_inicio:he,p_receptoras_ids:xe,p_data_inclusao:U.data_inicio,p_observacoes:U.observacoes.trim()||null,p_receptoras_observacoes:pe});if(ee)throw console.error("Erro ao criar protocolo (RPC):",ee),ee;if(!P)throw new Error("Protocolo criado mas ID no retornado");const{data:ue,error:K}=await z.from("protocolo_receptoras").select("id, receptora_id").eq("protocolo_id",P).in("receptora_id",xe);if(K)console.error("Erro ao buscar receptoras do protocolo:",K);else if(ue&&ue.length>0){const D=new Map(xe.map((J,oe)=>[J,oe])),Q=ue.map(async J=>{const oe=D.get(J.receptora_id);if(oe===void 0)return;const ge=Ce[oe],Ne=De[oe],{error:me}=await z.from("protocolo_receptoras").update({ciclando_classificacao:ge,qualidade_semaforo:Ne}).eq("id",J.id);me&&console.error(`Erro ao atualizar classificaes da receptora ${J.receptora_id}:`,me)});await Promise.allSettled(Q)}const ne=xe.map(async D=>{const Q=await Bo(D),J=Ji(Q,"FINALIZAR_PASSO1");if(!J.valido){console.warn(`No foi possvel atualizar status da receptora ${D}: ${J.mensagem}`);return}const{error:oe}=await Px(D,"EM_SINCRONIZACAO");oe&&console.error(`Erro ao atualizar status da receptora ${D}:`,oe)});await Promise.allSettled(ne),t({title:"Protocolo criado com sucesso",description:`${ce.length} receptoras adicionadas ao protocolo`}),e("/protocolos")}catch(he){console.error("Erro ao finalizar protocolo:",he);const P=he instanceof Error?he.message:"Erro desconhecido ao finalizar protocolo";t({title:"Erro ao finalizar protocolo",description:P,variant:"destructive"})}finally{o(!1),i.current=!1}},be=()=>{l==="form"?e("/protocolos"):c("form")},de=()=>{U.fazenda_id||ce.length>0?v(!0):e("/protocolos")},V=()=>{v(!1),e("/protocolos")};return l==="form"?r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:de,children:r.jsx(us,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Novo Protocolo"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Primeira visita - Cadastrar novo protocolo de sincronizao"})]})]})}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Informaes do Protocolo"})}),r.jsx(ke,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"fazenda_id",children:"Fazenda *"}),r.jsxs(_t,{value:U.fazenda_id,onValueChange:B=>Z({...U,fazenda_id:B}),children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione a fazenda"})}),r.jsx(gt,{children:d.map(B=>r.jsx(Ie,{value:B.id,children:B.nome},B.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"data_inicio",children:"Data de Incio *"}),r.jsx(Us,{id:"data_inicio",value:U.data_inicio,onChange:B=>Z({...U,data_inicio:B||""}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"veterinario",children:"Veterinrio Responsvel *"}),r.jsx(Ee,{id:"veterinario",value:U.veterinario,onChange:B=>Z({...U,veterinario:B.target.value}),placeholder:"Nome do veterinrio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"tecnico",children:"Tcnico Responsvel *"}),r.jsx(Ee,{id:"tecnico",value:U.tecnico,onChange:B=>Z({...U,tecnico:B.target.value}),placeholder:"Nome do tcnico/funcionrio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Wa,{id:"observacoes",value:U.observacoes,onChange:B=>Z({...U,observacoes:B.target.value}),placeholder:"Observaes sobre o protocolo",rows:3})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx(re,{onClick:L,className:"bg-green-600 hover:bg-green-700",disabled:a,children:"Continuar para Receptoras"}),r.jsx(re,{type:"button",variant:"outline",onClick:de,disabled:a,children:"Sair"})]})]})})]}),r.jsx(_d,{open:x,onOpenChange:v,children:r.jsxs(Cl,{children:[r.jsxs(Al,{children:[r.jsx(Tl,{children:"Sair sem finalizar?"}),r.jsx(Ol,{children:"Se voc sair agora, nenhum protocolo ser criado. Todos os dados preenchidos sero perdidos."})]}),r.jsxs(Dl,{children:[r.jsx(Ml,{children:"Cancelar"}),r.jsx(Rl,{onClick:V,children:"Sim, sair"})]})]})})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:be,children:r.jsx(us,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Adicionar Receptoras"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Selecione as receptoras para este protocolo"})]})]}),r.jsxs(re,{variant:"ghost",onClick:de,children:[r.jsx(sr,{className:"w-4 h-4 mr-2"}),"Sair"]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Informaes do Protocolo"})}),r.jsxs(ke,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:((le=d.find(B=>B.id===U.fazenda_id))==null?void 0:le.nome)||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data Incio"}),r.jsx("p",{className:"text-base text-slate-900",children:U.data_inicio})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Veterinrio"}),r.jsx("p",{className:"text-base text-slate-900",children:U.veterinario})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tcnico"}),r.jsx("p",{className:"text-base text-slate-900",children:U.tecnico})]})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Pe,{children:["Receptoras do Protocolo (",ce.length,")"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(da,{open:g,onOpenChange:B=>{E(B),B||(A({receptora_id:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),R(""),F(!1))},children:[r.jsx(ln,{asChild:!0,children:r.jsxs(re,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ar,{className:"w-4 h-4 mr-2"}),"Adicionar Receptora"]})}),r.jsxs(sa,{className:"max-w-lg",children:[r.jsxs(ra,{children:[r.jsx(na,{children:"Adicionar Receptora ao Protocolo"}),r.jsx(ua,{children:"Busque por identificao ou nome. Receptoras adequadas aparecero como disponveis. Receptoras inadequadas mostraro o motivo ao serem pesquisadas."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Receptora *"}),r.jsxs(Uh,{open:T,onOpenChange:F,children:[r.jsx(Hh,{asChild:!0,children:r.jsxs(re,{variant:"outline",role:"combobox","aria-expanded":T,className:"w-full justify-between",onClick:()=>F(!T),children:[M.receptora_id?(()=>{const B=m.find(ie=>String(ie.id).trim()===M.receptora_id.trim());return B?`${B.identificacao}${B.nome?` - ${B.nome}`:""}`:"Selecione uma receptora"})():"Buscar receptora...",r.jsx(Ul,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),r.jsx(tu,{className:"w-[400px] p-0",align:"start",children:r.jsxs(xA,{shouldFilter:!1,children:[r.jsx(yA,{placeholder:"Buscar por identificao ou nome...",value:N,onValueChange:R}),r.jsx(_A,{children:y?r.jsx("div",{className:"p-4 text-sm text-center text-slate-500",children:"Carregando receptoras..."}):O.length===0?r.jsx(bA,{children:N.trim()?"Nenhuma receptora encontrada":"Nenhuma receptora disponvel"}):r.jsx(wA,{children:O.map(B=>{var pe,Ce;const ie=B.id?String(B.id).trim():"";if(!ie)return null;const xe=`${B.identificacao} ${B.nome||""}`.trim();return r.jsx(jA,{value:`${xe} ${ie}`,onSelect:()=>{B.disponivel&&(A({...M,receptora_id:ie}),R(""),F(!1))},disabled:!B.disponivel,className:B.disponivel?"":"opacity-60 cursor-not-allowed",children:r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("span",{className:"flex-1",children:[B.identificacao,B.nome?` - ${B.nome}`:""]}),B.disponivel?r.jsx(et,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 shrink-0",children:"Disponvel"}):r.jsx(et,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 shrink-0",children:"Indisponvel"})]}),!B.disponivel&&r.jsx("span",{className:"text-xs text-red-600 mt-1",children:(pe=B.motivoIndisponivel)!=null&&pe.includes("Status atual:")&&((Ce=B.motivoIndisponivel.split("Status atual:")[1])==null?void 0:Ce.trim())||B.status})]})},B.id)})})})]})})]})]}),r.jsx("div",{className:"space-y-2",children:r.jsx(ib,{ciclandoValue:M.ciclando_classificacao,qualidadeValue:M.qualidade_semaforo,onChangeCiclando:B=>A({...M,ciclando_classificacao:B}),onChangeQualidade:B=>A({...M,qualidade_semaforo:B}),size:"sm"})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Observaes"}),r.jsx(Wa,{value:M.observacoes,onChange:B=>A({...M,observacoes:B.target.value}),placeholder:"Observaes sobre a incluso",rows:2})]}),r.jsx(re,{onClick:H,className:"w-full bg-green-600 hover:bg-green-700",disabled:y||!M.receptora_id,children:"Adicionar"})]})]})]}),r.jsxs(da,{open:j,onOpenChange:B=>{S(B),B||I({identificacao:"",nome:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null})},children:[r.jsx(ln,{asChild:!0,children:r.jsxs(re,{variant:"outline",children:[r.jsx(fg,{className:"w-4 h-4 mr-2"}),"Cadastrar Nova"]})}),r.jsxs(sa,{children:[r.jsx(ra,{children:r.jsx(na,{children:"Cadastrar Nova Receptora"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Identificao (Brinco) *"}),r.jsx(Ee,{value:q.identificacao,onChange:B=>I({...q,identificacao:B.target.value}),placeholder:"Nmero do brinco"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Nome"}),r.jsx(Ee,{value:q.nome,onChange:B=>I({...q,nome:B.target.value}),placeholder:"Nome da receptora (opcional)"})]}),r.jsx("div",{className:"space-y-2",children:r.jsx(ib,{ciclandoValue:q.ciclando_classificacao,qualidadeValue:q.qualidade_semaforo,onChangeCiclando:B=>I({...q,ciclando_classificacao:B}),onChangeQualidade:B=>I({...q,qualidade_semaforo:B}),size:"sm"})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Observaes"}),r.jsx(Wa,{value:q.observacoes,onChange:B=>I({...q,observacoes:B.target.value}),placeholder:"Observaes sobre a receptora",rows:2})]}),r.jsxs(re,{onClick:G,className:"w-full bg-blue-600 hover:bg-blue-700",disabled:n,children:[r.jsx(fg,{className:"w-4 h-4 mr-2"}),n?"Criando...":"Criar e Adicionar"]})]})]})]})]})]})}),r.jsx(ke,{children:ce.length===0?r.jsx("div",{className:"text-center py-8 text-slate-500",children:"Nenhuma receptora adicionada. Adicione pelo menos uma antes de finalizar."}):r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Brinco"}),r.jsx(X,{children:"Nome"}),r.jsx(X,{children:"Ciclando"}),r.jsx(X,{children:"Qualidade"}),r.jsx(X,{children:"Observaes"}),r.jsx(X,{className:"text-right",children:"Aes"})]})}),r.jsx(Tt,{children:ce.map((B,ie)=>{const xe=B.id&&B.id.trim()!==""?B.id:`new-${ie}`,pe=De=>{k(he=>he.map((P,ee)=>ee===ie?{...P,ciclando_classificacao:De}:P))},Ce=De=>{k(he=>he.map((P,ee)=>ee===ie?{...P,qualidade_semaforo:De}:P))};return r.jsxs(Oe,{children:[r.jsx(W,{className:"font-medium",children:B.identificacao}),r.jsx(W,{children:B.nome||"-"}),r.jsx(W,{children:r.jsx(Gh,{value:B.ciclando_classificacao,onChange:pe,variant:"editable"})}),r.jsx(W,{children:r.jsx(Yh,{value:B.qualidade_semaforo,onChange:Ce,variant:"row"})}),r.jsx(W,{children:B.observacoes||"-"}),r.jsx(W,{className:"text-right",children:r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>te(ie),children:r.jsx(sr,{className:"w-4 h-4"})})})]},xe)})})]})})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs(re,{onClick:Y,disabled:ce.length===0||n||i.current,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(qd,{className:"w-4 h-4 mr-2"}),n||i.current?"Finalizando...":"Finalizar 1 Passo"]}),r.jsx(re,{variant:"outline",onClick:be,disabled:n||i.current,children:"Voltar"})]}),r.jsx(_d,{open:x,onOpenChange:v,children:r.jsxs(Cl,{children:[r.jsxs(Al,{children:[r.jsx(Tl,{children:"Sair sem finalizar?"}),r.jsx(Ol,{children:"Se voc sair agora, nenhum protocolo ser criado. Todos os dados preenchidos sero perdidos."})]}),r.jsxs(Dl,{children:[r.jsx(Ml,{children:"Cancelar"}),r.jsx(Rl,{onClick:V,children:"Sim, sair"})]})]})})]})}function PU(){const{id:e}=fn(),t=$a(),{toast:a}=fa(),[s,n]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(""),[h,p]=u.useState([]),[m,b]=u.useState([]);u.useRef(!1);const[y,_]=u.useState(!1),[x,v]=u.useState(!1),[g,E]=u.useState(!1),[j,S]=u.useState({receptora_id:"",observacoes:""}),[N,R]=u.useState({identificacao:"",nome:"",observacoes:""});u.useEffect(()=>{e&&T()},[e]);const T=async()=>{try{n(!0);const{data:k,error:M}=await z.from("protocolos_sincronizacao").select("*").eq("id",e).single();if(M)throw M;c(k);const{data:A,error:q}=await z.from("fazendas").select("nome").eq("id",k.fazenda_id).single();if(q)throw q;f(A.nome),await F(),await U(k.fazenda_id)}catch(k){a({title:"Erro ao carregar dados",description:k instanceof Error?k.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},F=async()=>{try{const{data:k,error:M}=await z.from("protocolo_receptoras").select("*").eq("protocolo_id",e);if(M)throw M;if(!k||k.length===0){p([]);return}const A=k.map($=>$.receptora_id),{data:q,error:I}=await z.from("receptoras").select("*").in("id",A);if(I)throw I;const w=new Map((q==null?void 0:q.map($=>[$.id,$]))||[]),C=k.map($=>{const O=w.get($.receptora_id);return O?{...O,pr_id:$.id,pr_status:$.status,pr_motivo_inapta:$.motivo_inapta,pr_observacoes:$.observacoes}:(console.warn(`Receptora ${$.receptora_id} no encontrada`),null)}).filter($=>$!==null);p(C)}catch(k){console.error("Error loading receptoras:",k)}},U=async k=>{try{const{data:M,error:A}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",k);if(A)throw A;const q=(M==null?void 0:M.map(Y=>Y.receptora_id))||[];if(q.length===0){b([]);return}const{data:I,error:w}=await z.from("receptoras").select("id, identificacao, nome").in("id",q).order("identificacao",{ascending:!0});if(w)throw w;const C=I||[],{data:$,error:O}=await z.from("protocolo_receptoras").select("receptora_id").eq("protocolo_id",e);if(O)throw O;const L=($==null?void 0:$.map(Y=>Y.receptora_id))||[],H=(C||[]).filter(Y=>!L.includes(Y.id)).map(async Y=>await Bo(Y.id)==="VAZIA"?Y:null),te=(await Promise.all(H)).filter(Y=>Y!==null);b(te)}catch(M){console.error("Error loading receptoras disponiveis:",M)}},Z=()=>{E(!1),a({title:"1 passo concludo com sucesso",description:`${h.length} receptoras em sincronizao`}),t("/protocolos")};return s?r.jsx(Pt,{}):l?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>t("/protocolos"),children:r.jsx(us,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["Protocolo - ",d]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Protocolo finalizado"})]})]}),r.jsx("div",{className:"flex gap-2",children:!1})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Informaes do Protocolo"})}),r.jsxs(ke,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:d})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data Incio"}),r.jsx("p",{className:"text-base text-slate-900",children:Lt(l.data_inicio)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Responsvel"}),r.jsx("p",{className:"text-base text-slate-900",children:l.responsavel_inicio})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Status"}),r.jsx("div",{className:"text-base text-slate-900",children:r.jsx(et,{variant:"secondary",children:"1 Passo Concludo"})})]})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsxs(Pe,{children:["Receptoras do Protocolo (",h.length,")"]})}),r.jsx(ke,{children:r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Brinco"}),r.jsx(X,{children:"Nome"}),r.jsx(X,{children:"Status"}),r.jsx(X,{children:"Observaes"})]})}),r.jsx(Tt,{children:h.length===0?r.jsx(Oe,{children:r.jsx(W,{colSpan:4,className:"text-center text-slate-500",children:"Nenhuma receptora adicionada ao protocolo"})}):h.map(k=>r.jsxs(Oe,{children:[r.jsx(W,{className:"font-medium",children:k.identificacao}),r.jsx(W,{children:k.nome||"-"}),r.jsx(W,{children:r.jsx(et,{variant:"secondary",children:k.pr_status==="INICIADA"?"Em Sincronizao":k.pr_status})}),r.jsx(W,{className:"max-w-xs truncate",children:k.pr_observacoes||"-"})]},k.id))})]})})]}),r.jsx(da,{open:g,onOpenChange:E,children:r.jsxs(sa,{className:"max-w-2xl",children:[r.jsxs(ra,{children:[r.jsxs(na,{className:"flex items-center gap-2",children:[r.jsx(ch,{className:"w-6 h-6 text-green-600"}),"Resumo do 1 Passo"]}),r.jsx(ua,{children:"1 passo concludo com sucesso"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:d})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data do 1 Passo"}),r.jsx("p",{className:"text-base text-slate-900",children:l&&Lt(l.data_inicio)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Responsvel"}),r.jsx("p",{className:"text-base text-slate-900",children:l==null?void 0:l.responsavel_inicio})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total de Receptoras"}),r.jsx("p",{className:"text-base text-slate-900 font-bold",children:h.length})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Receptoras em Sincronizao:"}),r.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-lg",children:r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Brinco"}),r.jsx(X,{children:"Nome"})]})}),r.jsx(Tt,{children:h.map(k=>r.jsxs(Oe,{children:[r.jsx(W,{className:"font-medium",children:k.identificacao}),r.jsx(W,{children:k.nome||"-"})]},k.id))})]})})]}),r.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Prximo passo:"}),' Acesse a aba "2 Passo (para confirmar)" na tela de Protocolos e clique em "INICIAR 2 PASSO" para revisar e confirmar as receptoras.']})}),r.jsx(re,{onClick:Z,className:"w-full bg-green-600 hover:bg-green-700",children:"OK - Voltar para Protocolos"})]})]})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Protocolo no encontrado"}),r.jsx(re,{onClick:()=>t("/protocolos"),className:"mt-4",children:"Voltar para Protocolos"})]})}var Wh="Checkbox",[IU,_H]=As(Wh),[LU,Yx]=IU(Wh);function FU(e){const{__scopeCheckbox:t,checked:a,children:s,defaultChecked:n,disabled:o,form:i,name:l,onCheckedChange:c,required:d,value:f="on",internal_do_not_use_render:h}=e,[p,m]=Bs({prop:a,defaultProp:n??!1,onChange:c,caller:Wh}),[b,y]=u.useState(null),[_,x]=u.useState(null),v=u.useRef(!1),g=b?!!i||!!b.closest("form"):!0,E={checked:p,disabled:o,setChecked:m,control:b,setControl:y,name:l,form:i,value:f,hasConsumerStoppedPropagationRef:v,required:d,defaultChecked:eo(n)?!1:n,isFormControl:g,bubbleInput:_,setBubbleInput:x};return r.jsx(LU,{scope:t,...E,children:$U(h)?h(E):s})}var aD="CheckboxTrigger",sD=u.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:a,...s},n)=>{const{control:o,value:i,disabled:l,checked:c,required:d,setControl:f,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:m,bubbleInput:b}=Yx(aD,e),y=Nt(n,f),_=u.useRef(c);return u.useEffect(()=>{const x=o==null?void 0:o.form;if(x){const v=()=>h(_.current);return x.addEventListener("reset",v),()=>x.removeEventListener("reset",v)}},[o,h]),r.jsx(Ue.button,{type:"button",role:"checkbox","aria-checked":eo(c)?"mixed":c,"aria-required":d,"data-state":lD(c),"data-disabled":l?"":void 0,disabled:l,value:i,...s,ref:y,onKeyDown:Be(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:Be(a,x=>{h(v=>eo(v)?!0:!v),b&&m&&(p.current=x.isPropagationStopped(),p.current||x.stopPropagation())})})});sD.displayName=aD;var Wx=u.forwardRef((e,t)=>{const{__scopeCheckbox:a,name:s,checked:n,defaultChecked:o,required:i,disabled:l,value:c,onCheckedChange:d,form:f,...h}=e;return r.jsx(FU,{__scopeCheckbox:a,checked:n,defaultChecked:o,disabled:l,required:i,onCheckedChange:d,name:s,form:f,value:c,internal_do_not_use_render:({isFormControl:p})=>r.jsxs(r.Fragment,{children:[r.jsx(sD,{...h,ref:t,__scopeCheckbox:a}),p&&r.jsx(iD,{__scopeCheckbox:a})]})})});Wx.displayName=Wh;var rD="CheckboxIndicator",nD=u.forwardRef((e,t)=>{const{__scopeCheckbox:a,forceMount:s,...n}=e,o=Yx(rD,a);return r.jsx(Tr,{present:s||eo(o.checked)||o.checked===!0,children:r.jsx(Ue.span,{"data-state":lD(o.checked),"data-disabled":o.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});nD.displayName=rD;var oD="CheckboxBubbleInput",iD=u.forwardRef(({__scopeCheckbox:e,...t},a)=>{const{control:s,hasConsumerStoppedPropagationRef:n,checked:o,defaultChecked:i,required:l,disabled:c,name:d,value:f,form:h,bubbleInput:p,setBubbleInput:m}=Yx(oD,e),b=Nt(a,m),y=Mx(o),_=dx(s);u.useEffect(()=>{const v=p;if(!v)return;const g=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(g,"checked").set,S=!n.current;if(y!==o&&j){const N=new Event("click",{bubbles:S});v.indeterminate=eo(o),j.call(v,eo(o)?!1:o),v.dispatchEvent(N)}},[p,y,o,n]);const x=u.useRef(eo(o)?!1:o);return r.jsx(Ue.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??x.current,required:l,disabled:c,name:d,value:f,form:h,...t,tabIndex:-1,ref:b,style:{...t.style,..._,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});iD.displayName=oD;function $U(e){return typeof e=="function"}function eo(e){return e==="indeterminate"}function lD(e){return eo(e)?"indeterminate":e?"checked":"unchecked"}const Hg=u.forwardRef(({className:e,...t},a)=>r.jsx(Wx,{ref:a,className:Ae("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(nD,{className:Ae("flex items-center justify-center text-current"),children:r.jsx(nd,{className:"h-4 w-4"})})}));Hg.displayName=Wx.displayName;function qU(){const{id:e}=fn(),t=$a(),{toast:a}=fa(),[s,n]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(""),[h,p]=u.useState([]),[m,b]=u.useState(!1),[y,_]=u.useState(!1),[x,v]=u.useState(!1),[g,E]=u.useState({data:"",tecnico:""}),[j,S]=u.useState({});u.useEffect(()=>{e&&R()},[e]),u.useEffect(()=>{const w=h.filter(O=>O.pr_status==="INICIADA"),C=g.data&&g.tecnico.trim(),$=w.length>0||!C;v($&&(l==null?void 0:l.status)!=="SINCRONIZADO")},[h,l,g]);const N=u.useRef(!1);u.useEffect(()=>{if(!x){N.current=!1;return}N.current=!0;const w=$=>($.preventDefault(),$.returnValue="Voc tem receptoras pendentes de reviso. Tem certeza que deseja sair?",$.returnValue),C=$=>{x&&($.preventDefault(),window.history.pushState(null,"",window.location.href),_(!0))};return window.history.pushState(null,"",window.location.href),window.addEventListener("beforeunload",w),window.addEventListener("popstate",C),()=>{window.removeEventListener("beforeunload",w),window.removeEventListener("popstate",C)}},[x]);const R=async()=>{try{n(!0);const{data:w,error:C}=await z.from("protocolos_sincronizacao").select("*").eq("id",e).single();if(C)throw C;if(w.status!=="PASSO1_FECHADO"&&w.status!=="PRIMEIRO_PASSO_FECHADO"&&w.status!=="SINCRONIZADO"){a({title:"Erro",description:"Este protocolo no est aguardando o 2 passo",variant:"destructive"}),t("/protocolos");return}c(w),w.passo2_data||w.passo2_tecnico_responsavel?E({data:w.passo2_data||new Date().toISOString().split("T")[0],tecnico:w.passo2_tecnico_responsavel||""}):E({data:new Date().toISOString().split("T")[0],tecnico:""});const{data:$,error:O}=await z.from("fazendas").select("nome").eq("id",w.fazenda_id).single();if(O)throw O;f($.nome),await T()}catch(w){a({title:"Erro ao carregar dados",description:w instanceof Error?w.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},T=async()=>{try{if(!e){console.error("ID do protocolo no fornecido"),a({title:"Erro",description:"ID do protocolo no encontrado",variant:"destructive"});return}const{data:w,error:C}=await z.from("protocolo_receptoras").select("*").eq("protocolo_id",e);if(C){console.error("Erro ao carregar receptoras do protocolo:",C),console.error("Protocolo ID:",e),console.error("Cdigo do erro:",C.code),console.error("Mensagem do erro:",C.message),console.error("Detalhes:",C.details),a({title:"Erro ao carregar receptoras",description:C.message||"Erro desconhecido ao carregar receptoras do protocolo",variant:"destructive"}),p([]);return}if(console.log("=== DEBUG loadReceptoras ==="),console.log("Protocolo ID:",e),console.log("Receptoras retornadas:",(w==null?void 0:w.length)||0),w&&w.length>0?console.log("Primeira receptora:",{id:w[0].id,protocolo_id:w[0].protocolo_id,receptora_id:w[0].receptora_id,status:w[0].status}):console.warn("Nenhuma receptora retornada pela query"),!w||w.length===0){console.error("Protocolo sem receptoras vinculadas - inconsistncia detectada"),console.error("Protocolo ID:",e);const{count:L,error:H}=await z.from("protocolo_receptoras").select("*",{count:"exact",head:!0}).eq("protocolo_id",e);console.error("Tentativa de count direto - resultado:",L),H&&console.error("Erro ao fazer count:",H),a({title:"Erro: Protocolo inconsistente",description:`Este protocolo no possui receptoras vinculadas (ID: ${e}). Verifique no banco de dados se h receptoras vinculadas a este protocolo.`,variant:"destructive"}),p([]);return}const $=[];for(const L of w){const{data:H,error:G}=await z.from("receptoras").select("*").eq("id",L.receptora_id).single();if(G){console.error("Error loading receptora:",G);continue}$.push({...H,pr_id:L.id,pr_status:L.status,pr_motivo_inapta:L.motivo_inapta,pr_observacoes:L.observacoes,pr_ciclando_classificacao:"ciclando_classificacao"in L&&(L.ciclando_classificacao==="CL"||L.ciclando_classificacao==="N")?L.ciclando_classificacao:null,pr_qualidade_semaforo:"qualidade_semaforo"in L&&typeof L.qualidade_semaforo=="number"&&L.qualidade_semaforo>=1&&L.qualidade_semaforo<=3?L.qualidade_semaforo:null})}p($);const O={};$.filter(L=>L.pr_status==="INAPTA"&&L.pr_motivo_inapta).forEach(L=>{O[L.id]=L.pr_motivo_inapta||""}),S(O)}catch(w){console.error("Error loading receptoras:",w),a({title:"Erro ao carregar receptoras",description:w instanceof Error?w.message:"Erro desconhecido",variant:"destructive"})}},F=(w,C)=>{S($=>({...$,[w]:C.trim()})),p($=>$.map(O=>O.id===w?{...O,pr_motivo_inapta:C.trim()||void 0}:O))},U=async()=>{if(o)return;if(!g.data||!g.tecnico.trim()){a({title:"Erro de validao",description:"Data de realizao do 2 passo e tcnico responsvel so obrigatrios",variant:"destructive"});return}const w=h.filter(C=>C.pr_status==="INICIADA");if(w.length>0){a({title:"Erro",description:`Ainda h ${w.length} receptora(s) pendente(s) de reviso`,variant:"destructive"});return}if(h.length===0){a({title:"Erro",description:"No  possvel finalizar protocolo sem receptoras vinculadas",variant:"destructive"});return}try{i(!0);const C=new Date,$=`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}-${String(C.getDate()).padStart(2,"0")}`,O=h.filter(de=>de.pr_status==="APTA"),L=h.filter(de=>de.pr_status==="INAPTA"),G=O.length>0?"SINCRONIZADO":"FECHADO",te=[...O.map(async de=>{const{error:V}=await z.from("protocolo_receptoras").update({status:"APTA",motivo_inapta:null}).eq("protocolo_id",e).eq("receptora_id",de.id);if(V)throw console.error(`Erro ao atualizar status da receptora ${de.identificacao} no protocolo:`,V),V}),...L.map(async de=>{const V=j[de.id]||de.pr_motivo_inapta||null,{error:le}=await z.from("protocolo_receptoras").update({status:"INAPTA",motivo_inapta:V||null}).eq("protocolo_id",e).eq("receptora_id",de.id);if(le)throw console.error(`Erro ao atualizar status da receptora ${de.identificacao} no protocolo:`,le),le})];await Promise.allSettled(te);const{error:Y}=await z.from("protocolos_sincronizacao").update({status:G,passo2_data:g.data,passo2_tecnico_responsavel:g.tecnico.trim(),data_retirada:$,responsavel_retirada:(l==null?void 0:l.responsavel_inicio)||null}).eq("id",e);if(Y)throw console.error("Erro ao atualizar status do protocolo:",Y),Y;c({...l,status:G,passo2_data:g.data,passo2_tecnico_responsavel:g.tecnico.trim(),data_retirada:$,responsavel_retirada:(l==null?void 0:l.responsavel_inicio)||null});const be=[...O.map(async de=>{const{error:V}=await z.from("receptoras").update({status_reprodutivo:"SINCRONIZADA"}).eq("id",de.id);V?console.error(`Erro ao atualizar status da receptora ${de.identificacao} para SINCRONIZADA:`,V):console.log(`Status da receptora ${de.identificacao} atualizado para SINCRONIZADA`)}),...L.map(async de=>{const{error:V}=await z.from("receptoras").update({status_reprodutivo:"VAZIA"}).eq("id",de.id);V?console.error(`Erro ao atualizar status da receptora ${de.identificacao} para VAZIA:`,V):console.log(`Status da receptora ${de.identificacao} atualizado para VAZIA`)})];await Promise.allSettled(be),v(!1),N.current=!1,b(!0)}catch(C){console.error("Erro ao finalizar 2 passo:",C),a({title:"Erro ao finalizar 2 passo",description:C instanceof Error?C.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},Z=()=>{b(!1),a({title:"2 passo concludo com sucesso",description:`${h.filter(w=>w.pr_status==="APTA").length} receptoras confirmadas para TE`}),t("/protocolos")},ce=()=>{_(!1),v(!1),N.current=!1,t("/protocolos")},k=()=>{x?_(!0):(N.current=!1,t("/protocolos"))},M=w=>{const $={INICIADA:{label:"Aguardando Reviso",variant:"secondary"},APTA:{label:"Confirmada",variant:"default"},INAPTA:{label:"Descartada",variant:"destructive"}}[w]||{label:w,variant:"outline"};return r.jsx(et,{variant:$.variant,children:$.label})};if(s)return r.jsx(Pt,{});if(!l)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Protocolo no encontrado"}),r.jsx(re,{onClick:()=>t("/protocolos"),className:"mt-4",children:"Voltar para Protocolos"})]});if(h.length===0&&!s)return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:k,children:r.jsx(us,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["2 Passo - ",d]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Revisar e confirmar receptoras"})]})]})}),r.jsxs(Me,{className:"border-red-200 bg-red-50",children:[r.jsx(ze,{children:r.jsx(Pe,{className:"text-red-700",children:" Protocolo Inconsistente"})}),r.jsxs(ke,{className:"space-y-4",children:[r.jsx("p",{className:"text-red-800",children:"Este protocolo no possui receptoras vinculadas. No  possvel prosseguir com o 2 passo."}),r.jsx("p",{className:"text-sm text-red-700",children:"Isso pode ter ocorrido devido a um erro durante a criao do protocolo ou excluso acidental de dados."}),r.jsx(re,{onClick:()=>t("/protocolos"),variant:"outline",className:"mt-4",children:"Voltar para Protocolos"})]})]})]});const A=h.filter(w=>w.pr_status==="INICIADA"),q=h.filter(w=>w.pr_status==="APTA"),I=h.filter(w=>w.pr_status==="INAPTA");return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:k,children:r.jsx(us,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["2 Passo - ",d]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Revisar e confirmar receptoras"})]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsxs(re,{onClick:U,disabled:A.length>0||!g.data||!g.tecnico.trim()||o,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(qd,{className:"w-4 h-4 mr-2"}),o?"Finalizando...":"Finalizar 2 Passo"]}),(A.length>0||!g.data||!g.tecnico.trim())&&r.jsx("p",{className:"text-xs text-slate-500 text-right",children:!g.data||!g.tecnico.trim()?"Preencha a data e o tcnico responsvel":A.length>0?`${A.length} receptora(s) aguardando avaliao`:""})]})]}),l&&l.status!=="SINCRONIZADO"&&r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Dados do 2 Passo"})}),r.jsxs(ke,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"passo2_data",children:"Data de Realizao do 2 Passo *"}),r.jsx(Us,{id:"passo2_data",value:g.data,onChange:w=>E({...g,data:w||""}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"passo2_tecnico",children:"Tcnico Responsvel *"}),r.jsx(Ee,{id:"passo2_tecnico",value:g.tecnico,onChange:w=>E({...g,tecnico:w.target.value}),placeholder:"Nome do tcnico responsvel",required:!0})]})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Informaes do Protocolo"})}),r.jsxs(ke,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:d})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data Incio"}),r.jsx("p",{className:"text-base text-slate-900",children:Lt(l.data_inicio)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data do 2 Passo"}),r.jsx("p",{className:"text-base text-slate-900",children:l.passo2_data?Lt(l.passo2_data):g.data?Lt(g.data):"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tcnico 2 Passo"}),r.jsx("p",{className:"text-base text-slate-900",children:l.passo2_tecnico_responsavel||g.tecnico||"-"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(Me,{children:[r.jsx(ze,{className:"pb-3",children:r.jsx(Pe,{className:"text-base",children:"Aguardando Reviso"})}),r.jsx(ke,{children:r.jsx("p",{className:"text-3xl font-bold text-slate-900",children:A.length})})]}),r.jsxs(Me,{children:[r.jsx(ze,{className:"pb-3",children:r.jsx(Pe,{className:"text-base",children:"Confirmadas"})}),r.jsx(ke,{children:r.jsx("p",{className:"text-3xl font-bold text-green-600",children:q.length})})]}),r.jsxs(Me,{children:[r.jsx(ze,{className:"pb-3",children:r.jsx(Pe,{className:"text-base",children:"Descartadas"})}),r.jsx(ke,{children:r.jsx("p",{className:"text-3xl font-bold text-red-600",children:I.length})})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsxs(Pe,{children:["Receptoras para Reviso (",h.length,")"]})}),r.jsx(ke,{children:r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Brinco"}),r.jsx(X,{children:"Nome"}),r.jsx(X,{children:"Ciclando"}),r.jsx(X,{children:"Qualidade"}),r.jsx(X,{children:"Avaliao"}),r.jsx(X,{children:"Motivo (se INAPTA)"})]})}),r.jsx(Tt,{children:h.length===0?r.jsx(Oe,{children:r.jsx(W,{colSpan:6,className:"text-center text-slate-500",children:"Nenhuma receptora no protocolo"})}):h.map(w=>r.jsxs(Oe,{children:[r.jsx(W,{className:"font-medium",children:w.identificacao}),r.jsx(W,{children:w.nome||"-"}),r.jsx(W,{children:r.jsx(Gh,{value:w.pr_ciclando_classificacao,variant:"display",disabled:!0})}),r.jsx(W,{children:r.jsx(Yh,{value:w.pr_qualidade_semaforo,variant:"single",disabled:!0})}),r.jsx(W,{children:l&&l.status!=="SINCRONIZADO"?r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Hg,{id:`apta-${w.id}`,checked:w.pr_status==="APTA",onCheckedChange:C=>{C===!0?(S(O=>{const L={...O};return delete L[w.id],L}),p(O=>O.map(L=>L.id===w.id?{...L,pr_status:"APTA",pr_motivo_inapta:void 0}:L))):p(O=>O.map(L=>L.id===w.id?{...L,pr_status:"INICIADA",pr_motivo_inapta:void 0}:L))},className:"data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600 data-[state=checked]:text-white"}),r.jsx(ae,{htmlFor:`apta-${w.id}`,className:"text-sm font-medium cursor-pointer text-green-700",children:"APTA"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Hg,{id:`inapta-${w.id}`,checked:w.pr_status==="INAPTA",onCheckedChange:C=>{C===!0?p(O=>O.map(L=>L.id===w.id?{...L,pr_status:"INAPTA"}:L)):(S(O=>{const L={...O};return delete L[w.id],L}),p(O=>O.map(L=>L.id===w.id?{...L,pr_status:"INICIADA",pr_motivo_inapta:void 0}:L)))},className:"data-[state=checked]:bg-red-600 data-[state=checked]:border-red-600 data-[state=checked]:text-white"}),r.jsx(ae,{htmlFor:`inapta-${w.id}`,className:"text-sm font-medium cursor-pointer text-red-700",children:"INAPTA"})]})]}):M(w.pr_status)}),r.jsx(W,{children:w.pr_status==="INAPTA"&&l&&l.status!=="SINCRONIZADO"?r.jsx(Ee,{type:"text",placeholder:"Justificativa (opcional)",value:j[w.id]||w.pr_motivo_inapta||"",onChange:C=>F(w.id,C.target.value),className:"w-full"}):r.jsx("span",{className:"text-slate-500",children:w.pr_motivo_inapta||"-"})})]},w.id))})]})})]}),r.jsx(da,{open:m,onOpenChange:b,children:r.jsxs(sa,{className:"max-w-2xl",children:[r.jsxs(ra,{children:[r.jsxs(na,{className:"flex items-center gap-2",children:[r.jsx(ch,{className:"w-6 h-6 text-green-600"}),"Resumo do 2 Passo"]}),r.jsx(ua,{children:"2 passo concludo com sucesso"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:d})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data do Protocolo"}),r.jsx("p",{className:"text-base text-slate-900",children:l&&Lt(l.data_inicio)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total de Receptoras"}),r.jsx("p",{className:"text-base text-slate-900 font-bold",children:h.length})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Confirmadas para TE"}),r.jsx("p",{className:"text-base text-green-600 font-bold",children:q.length})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-green-700 mb-2",children:"Receptoras Confirmadas"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:q.length})]}),r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-red-700 mb-2",children:"Receptoras Descartadas"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:I.length})]})]}),r.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Protocolo concludo!"})," As receptoras confirmadas (APTA) esto prontas para transferncia de embries."]})}),r.jsx(re,{onClick:Z,className:"w-full bg-green-600 hover:bg-green-700",children:"OK - Voltar para Protocolos"})]})]})}),r.jsx(da,{open:y,onOpenChange:w=>{!w&&!o&&(_(!1),N.current=!1)},children:r.jsxs(sa,{children:[r.jsxs(ra,{children:[r.jsx(na,{children:"Cancelar 2 Passo?"}),r.jsxs(ua,{children:["Voc tem mudanas pendentes (campos no preenchidos ou receptoras no avaliadas).",r.jsx("br",{}),r.jsx("br",{}),"Ao sair, as alteraes no sero salvas e voc precisar iniciar o 2 passo novamente."]})]}),r.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[r.jsx(re,{variant:"outline",onClick:()=>{_(!1),N.current=!1},disabled:o,children:"No, continuar reviso"}),r.jsx(re,{variant:"destructive",onClick:ce,children:"Sim, sair sem salvar"})]})]})})]})}function lb(){const{id:e}=fn(),t=$a(),[a,s]=u.useState(!0),[n,o]=u.useState(null),[i,l]=u.useState(""),[c,d]=u.useState([]),[f,h]=u.useState(null),[p,m]=u.useState({totalIniciaram:0,totalConcluiram:0,totalDescartadas:0,totalConfirmadas:0}),b=async j=>{try{const{data:S}=await z.from("protocolo_receptoras").select("receptora_id").eq("protocolo_id",j.id).limit(1);if(!S||S.length===0)return j.observacoes||"";const N=S[0].receptora_id,{data:R}=await z.from("receptora_fazenda_historico").select(`
          fazenda_id,
          data_inicio
        `).eq("receptora_id",N).order("data_inicio",{ascending:!0});if(!R||R.length<2)return j.observacoes||"";const T=new Set;for(const w of R)w.fazenda_id&&T.add(w.fazenda_id);const{data:F}=await z.from("fazendas").select("id, nome").in("id",Array.from(T)),U=new Map;if(F)for(const w of F)U.set(w.id,w.nome);const Z=j.data_inicio.split("T")[0],[ce,k,M]=Z.split("-").map(Number),A=new Date(ce,k-1,M);let q=null,I=1/0;for(let w=1;w<R.length;w++){const C=R[w],$=R[w-1],O=C.data_inicio.split("T")[0],[L,H,G]=O.split("-").map(Number),te=new Date(L,H-1,G),Y=Math.abs((te.getTime()-A.getTime())/(1e3*60*60*24));Y<=1&&Y<I&&(I=Y,q={fazendaOrigem:U.get($.fazenda_id)||"Fazenda desconhecida",fazendaDestino:U.get(C.fazenda_id)||"Fazenda desconhecida",dataMudanca:C.data_inicio})}if(!q&&R.length>1)for(let w=R.length-1;w>=1;w--){const C=R[w],$=R[w-1],O=C.data_inicio.split("T")[0],[L,H,G]=O.split("-").map(Number),te=new Date(L,H-1,G);if(te<=A&&(A.getTime()-te.getTime())/(1e3*60*60*24)<=2){q={fazendaOrigem:U.get($.fazenda_id)||"Fazenda desconhecida",fazendaDestino:U.get(C.fazenda_id)||"Fazenda desconhecida",dataMudanca:C.data_inicio};break}}if(q){const w=new Date(q.dataMudanca).toLocaleDateString("pt-BR");return`${j.observacoes} (Mudana: ${q.fazendaOrigem}  ${q.fazendaDestino} em ${w})`}return j.observacoes||""}catch(S){return console.error("Erro ao enriquecer observaes:",S),j.observacoes||""}};u.useEffect(()=>{e&&y()},[e]);const y=async()=>{try{s(!0);const{data:j,error:S}=await z.from("protocolos_sincronizacao").select("*").eq("id",e).single();if(S)throw S;let N=j.observacoes;j.observacoes&&j.observacoes.includes("Protocolo criado automaticamente")&&(N=await b(j)),o({...j,observacoes:N});const{data:R,error:T}=await z.from("fazendas").select("nome").eq("id",j.fazenda_id).single();if(T)throw T;l(R.nome),await _(j.id),await x({...j,observacoes:N})}catch(j){console.error("Erro ao carregar dados:",j)}finally{s(!1)}},_=async j=>{try{const{data:S,error:N}=await z.from("protocolo_receptoras").select("id").eq("protocolo_id",j);if(N){console.error("Erro ao buscar protocolo_receptoras:",N);return}if(!S||S.length===0)return;const R=S.map(U=>U.id),{data:T,error:F}=await z.from("transferencias_embrioes").select("data_te, veterinario_responsavel, tecnico_responsavel").in("protocolo_receptora_id",R).eq("status_te","REALIZADA").order("data_te",{ascending:!1}).order("created_at",{ascending:!1}).limit(1).single();if(F){F.code!=="PGRST116"&&console.error("Erro ao buscar TE:",F);return}T&&h({data_te:T.data_te,veterinario_responsavel:T.veterinario_responsavel||void 0,tecnico_responsavel:T.tecnico_responsavel||void 0})}catch(S){console.error("Erro ao carregar informaes da TE:",S)}},x=async j=>{try{const{data:S,error:N}=await z.from("protocolo_receptoras").select("*").eq("protocolo_id",j.id).order("data_inclusao",{ascending:!0});if(N)throw N;const R=[];for(const ce of S||[]){const{data:k,error:M}=await z.from("receptoras").select("*").eq("id",ce.receptora_id).single();if(M){console.error("Erro ao carregar receptora:",M);continue}R.push({...k,pr_id:ce.id,pr_status:ce.status,pr_motivo_inapta:ce.motivo_inapta,pr_data_inclusao:ce.data_inclusao,pr_data_retirada:ce.data_retirada,pr_ciclando_classificacao:ce.ciclando_classificacao,pr_qualidade_semaforo:ce.qualidade_semaforo})}d(R);const T=R.length,F=R.filter(ce=>ce.pr_status==="APTA").length,U=R.filter(ce=>ce.pr_status==="INAPTA").length;m({totalIniciaram:T,totalConcluiram:F,totalDescartadas:U,totalConfirmadas:F})}catch(S){console.error("Erro ao carregar receptoras:",S)}},v=j=>{if(!j)return{veterinario:null,tecnico:null};const S=j.match(/VET:\s*(.+?)(?:\s*\||$)/i),N=j.match(/TEC:\s*(.+?)(?:\s*\||$)/i);return{veterinario:S?S[1].trim():null,tecnico:N?N[1].trim():null}},g=j=>j==="APTA"?r.jsx(et,{variant:"default",className:"bg-green-600",children:"Confirmada"}):j==="INAPTA"?r.jsx(et,{variant:"destructive",children:"Descartada"}):r.jsx(et,{variant:"secondary",children:j}),E=()=>{window.print()};return a?r.jsx(Pt,{}):n?r.jsxs("div",{className:"space-y-6 print:space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between print:hidden",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>t("/protocolos"),children:r.jsx(us,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Relatrio do Protocolo"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Visualizao somente leitura"})]})]}),r.jsxs(re,{onClick:E,variant:"outline",children:[r.jsx(WR,{className:"w-4 h-4 mr-2"}),"Imprimir"]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Informaes Gerais"})}),r.jsxs(ke,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:i||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data de Incio"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:n.data_inicio?Lt(n.data_inicio):""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Status"}),r.jsxs("p",{className:"text-base text-slate-900 mt-1",children:[n.status==="SINCRONIZADO"&&r.jsx(et,{variant:"default",className:"bg-green-600",children:"Sincronizado"}),n.status==="FECHADO"&&r.jsx(et,{variant:"default",className:"bg-slate-600",children:"Fechado"}),n.status==="PASSO1_FECHADO"&&r.jsx(et,{variant:"default",className:"bg-yellow-600",children:"Aguardando 2 Passo"})]})]})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"1 Passo"})}),r.jsxs(ke,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Veterinrio Responsvel"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:v(n.responsavel_inicio).veterinario||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tcnico Responsvel"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:v(n.responsavel_inicio).tecnico||""})]})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"2 Passo"})}),r.jsxs(ke,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data de Realizao"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:n.passo2_data?Lt(n.passo2_data):""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tcnico Responsvel"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:n.passo2_tecnico_responsavel||""})]})]})]}),f&&(f.data_te||f.veterinario_responsavel||f.tecnico_responsavel)&&r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Transferncia de Embries"})}),r.jsxs(ke,{className:"space-y-4",children:[f.data_te&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data da TE"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:Lt(f.data_te)})]}),f.veterinario_responsavel&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Veterinrio Responsvel"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:f.veterinario_responsavel})]}),f.tecnico_responsavel&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tcnico Responsvel"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:f.tecnico_responsavel})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(Me,{children:[r.jsx(ze,{className:"pb-3",children:r.jsx(Pe,{className:"text-base",children:"Total Iniciaram"})}),r.jsx(ke,{children:r.jsx("p",{className:"text-3xl font-bold text-slate-900",children:p.totalIniciaram})})]}),r.jsxs(Me,{children:[r.jsx(ze,{className:"pb-3",children:r.jsx(Pe,{className:"text-base",children:"Confirmadas"})}),r.jsx(ke,{children:r.jsx("p",{className:"text-3xl font-bold text-green-600",children:p.totalConfirmadas})})]}),r.jsxs(Me,{children:[r.jsx(ze,{className:"pb-3",children:r.jsx(Pe,{className:"text-base",children:"Descartadas"})}),r.jsx(ke,{children:r.jsx("p",{className:"text-3xl font-bold text-red-600",children:p.totalDescartadas})})]}),r.jsxs(Me,{children:[r.jsx(ze,{className:"pb-3",children:r.jsx(Pe,{className:"text-base",children:"Taxa de Sucesso"})}),r.jsx(ke,{children:r.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[p.totalIniciaram>0?Math.round(p.totalConfirmadas/p.totalIniciaram*100):0,"%"]})})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Receptoras e Resultado Final"})}),r.jsx(ke,{children:c.length===0?r.jsx("p",{className:"text-slate-500 text-center py-4",children:"Nenhuma receptora no protocolo"}):r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Identificao"}),r.jsx(X,{children:"Ciclando"}),r.jsx(X,{children:"Qualidade"}),r.jsx(X,{children:"Resultado Final"}),r.jsx(X,{children:"Motivo do Descarte"})]})}),r.jsx(Tt,{children:c.map(j=>r.jsxs(Oe,{children:[r.jsxs(W,{className:"font-medium",children:[j.identificacao,j.nome?` - ${j.nome}`:""]}),r.jsx(W,{children:r.jsx(Gh,{value:j.pr_ciclando_classificacao,variant:"display",disabled:!0})}),r.jsx(W,{children:r.jsx(Yh,{value:j.pr_qualidade_semaforo,variant:"single",disabled:!0})}),r.jsx(W,{children:g(j.pr_status)}),r.jsx(W,{children:j.pr_motivo_inapta||""})]},j.id))})]})})]}),n.observacoes&&r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Observaes"})}),r.jsx(ke,{children:r.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:n.observacoes})})]})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Protocolo no encontrado"}),r.jsx(re,{onClick:()=>t("/protocolos"),className:"mt-4",children:"Voltar para Protocolos"})]})}function BU(){const e=$a(),{toast:t}=fa(),[a,s]=u.useState([]),[n,o]=u.useState([]),[i,l]=u.useState([]),[c,d]=u.useState(!1),[f,h]=u.useState(!0),[p,m]=u.useState(!1),[b,y]=u.useState(""),[_,x]=u.useState(""),[v,g]=u.useState("");u.useEffect(()=>{E()},[]);const E=async()=>{try{h(!0);const{data:R,error:T}=await z.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(T)throw T;l(R||[])}catch(R){t({title:"Erro ao carregar fazendas",description:R instanceof Error?R.message:"Erro desconhecido",variant:"destructive"})}finally{h(!1)}},j=async()=>{try{d(!0);const{data:R,error:T}=await z.from("pacotes_aspiracao").select("*").order("data_aspiracao",{ascending:!1}).order("created_at",{ascending:!1});if(T)throw T;const F=new Map(i.map(I=>[I.id,I.nome])),U=(R==null?void 0:R.map(I=>I.id))||[],{data:Z,error:ce}=await z.from("aspiracoes_doadoras").select("pacote_aspiracao_id").in("pacote_aspiracao_id",U);if(ce)throw ce;const k=new Map;Z==null||Z.forEach(I=>{I.pacote_aspiracao_id&&k.set(I.pacote_aspiracao_id,(k.get(I.pacote_aspiracao_id)||0)+1)});const{data:M}=await z.from("pacotes_aspiracao_fazendas_destino").select("pacote_aspiracao_id, fazenda_destino_id").in("pacote_aspiracao_id",U),A=new Map;M==null||M.forEach(I=>{const w=A.get(I.pacote_aspiracao_id)||[],C=F.get(I.fazenda_destino_id);C&&!w.includes(C)&&w.push(C),A.set(I.pacote_aspiracao_id,w)});const q=(R||[]).map(I=>{let w=A.get(I.id);if(!w||w.length===0)if(I.fazenda_destino_id){const C=F.get(I.fazenda_destino_id);w=C?[C]:[]}else w=[];return{...I,fazenda_nome:F.get(I.fazenda_id),fazendas_destino_nomes:w,quantidade_doadoras:k.get(I.id)||0}});s(q),m(!0)}catch(R){t({title:"Erro ao carregar dados",description:R instanceof Error?R.message:"Erro desconhecido",variant:"destructive"})}finally{d(!1)}},S=()=>{if(!_||!v){t({title:"Campos obrigatrios",description:"Por favor, preencha a data inicial e a data final para realizar a busca",variant:"destructive"});return}if(_>v){t({title:"Data invlida",description:"A data inicial deve ser anterior ou igual  data final",variant:"destructive"});return}!p||a.length===0?j():N()},N=()=>{if(a.length===0)return;let R=[...a];R=R.filter(T=>{const F=T.data_aspiracao.split("T")[0];return F>=_&&F<=v}),b&&(R=R.filter(T=>T.fazenda_id===b)),o(R)};return u.useEffect(()=>{a.length>0&&_&&v&&p&&N()},[a]),f?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Aspiraes"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar aspiraes"})]}),r.jsxs(re,{onClick:()=>e("/aspiracoes/novo"),className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ar,{className:"w-4 h-4 mr-2"}),"Nova Aspirao"]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Filtros"})}),r.jsxs(ke,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Fazenda"}),r.jsxs(_t,{value:b||"all",onValueChange:R=>{y(R==="all"?"":R)},children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Todas as fazendas"})}),r.jsxs(gt,{children:[r.jsx(Ie,{value:"all",children:"Todas as fazendas"}),i.map(R=>r.jsx(Ie,{value:R.id,children:R.nome},R.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Data Inicial *"}),r.jsx(Us,{value:_,onChange:x,max:v||""}),_&&v&&_>v&&r.jsx("p",{className:"text-sm text-red-500",children:"A data inicial deve ser anterior ou igual  data final"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Data Final *"}),r.jsx(Us,{value:v,onChange:g,min:_||""})]})]}),r.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[r.jsxs("div",{className:"flex flex-wrap gap-2 flex-1",children:[r.jsx(ae,{className:"w-full text-sm font-medium text-slate-700",children:"Atalhos rpidos:"}),r.jsx(re,{type:"button",variant:"outline",size:"sm",onClick:()=>{const R=new Date,T=new Date(R);T.setDate(R.getDate()-7);const F=T.toISOString().split("T")[0],U=R.toISOString().split("T")[0];x(F),g(U)},children:"ltimos 7 dias"}),r.jsx(re,{type:"button",variant:"outline",size:"sm",onClick:()=>{const R=new Date,T=new Date(R);T.setDate(R.getDate()-30);const F=T.toISOString().split("T")[0],U=R.toISOString().split("T")[0];x(F),g(U)},children:"ltimos 30 dias"}),r.jsx(re,{type:"button",variant:"outline",size:"sm",onClick:()=>{const R=new Date,T=new Date(R);T.setDate(R.getDate()-90);const F=T.toISOString().split("T")[0],U=R.toISOString().split("T")[0];x(F),g(U)},children:"ltimos 90 dias"})]}),r.jsxs(re,{type:"button",onClick:S,disabled:!_||!v||c,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(Ul,{className:"w-4 h-4 mr-2"}),"Buscar"]})]})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Lista de Aspiraes"})}),r.jsx(ke,{children:r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Data"}),r.jsx(X,{children:"Fazenda"}),r.jsx(X,{children:"Fazenda Destino"}),r.jsx(X,{children:"Horrio Incio"}),r.jsx(X,{children:"Doadoras"}),r.jsx(X,{children:"Total Ocitos"}),r.jsx(X,{children:"Veterinrio"}),r.jsx(X,{children:"Status"}),r.jsx(X,{children:"Usado em Lote FIV"}),r.jsx(X,{className:"text-right",children:"Aes"})]})}),r.jsx(Tt,{children:!p&&n.length===0?r.jsx(Oe,{children:r.jsx(W,{colSpan:11,className:"text-center text-slate-500 py-12",children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(UR,{className:"w-8 h-8 text-slate-400"}),r.jsx("p",{className:"text-lg font-medium",children:"Aplique filtros para visualizar as aspiraes"}),r.jsx("p",{className:"text-sm",children:'Preencha a data inicial e data final, depois clique em "Buscar"'})]})})}):c?r.jsx(Oe,{children:r.jsx(W,{colSpan:11,className:"text-center text-slate-500 py-12",children:r.jsx(Pt,{})})}):n.length===0?r.jsx(Oe,{children:r.jsx(W,{colSpan:11,className:"text-center text-slate-500 py-12",children:"Nenhuma aspirao encontrada com os filtros aplicados"})}):n.map(R=>r.jsxs(Oe,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>e(`/aspiracoes/${R.id}`),children:[r.jsx(W,{children:Lt(R.data_aspiracao)}),r.jsx(W,{className:"font-medium",children:R.fazenda_nome||"-"}),r.jsx(W,{children:r.jsx("div",{className:"flex flex-wrap gap-1",children:R.fazendas_destino_nomes&&R.fazendas_destino_nomes.length>0?R.fazendas_destino_nomes.map((T,F)=>r.jsx(et,{variant:"outline",className:"text-xs",children:T},F)):r.jsx("span",{className:"text-slate-400",children:"-"})})}),r.jsx(W,{children:R.horario_inicio||"-"}),r.jsx(W,{children:R.quantidade_doadoras||0}),r.jsx(W,{className:"font-medium",children:R.total_oocitos||0}),r.jsx(W,{children:R.veterinario_responsavel||"-"}),r.jsx(W,{children:r.jsx(et,{variant:R.status==="FINALIZADO"?"default":"secondary",children:R.status==="FINALIZADO"?"FINALIZADO":"EM ANDAMENTO"})}),r.jsx(W,{children:R.usado_em_lote_fiv?r.jsx(et,{variant:"destructive",children:"Usado"}):r.jsx(et,{variant:"outline",children:"Disponvel"})}),r.jsx(W,{className:"text-right",onClick:T=>T.stopPropagation(),children:r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>e(`/aspiracoes/${R.id}`),children:r.jsx(Xv,{className:"w-4 h-4"})})})]},R.id))})]})})]})]})}function UU(){const e=$a(),{toast:t}=fa(),[a,s]=u.useState(!0),[n,o]=u.useState(!1),[i,l]=u.useState([]),[c,d]=u.useState({fazenda_id:"",fazendas_destino_ids:[],data_aspiracao:new Date().toISOString().split("T")[0],horario_inicio:"",veterinario_responsavel:"",tecnico_responsavel:"",observacoes:""}),[f,h]=u.useState("");u.useEffect(()=>{p()},[]);const p=async()=>{try{s(!0);const{data:b,error:y}=await z.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(y)throw y;l(b||[])}catch(b){t({title:"Erro ao carregar fazendas",description:b instanceof Error?b.message:"Erro desconhecido",variant:"destructive"})}finally{s(!1)}},m=async b=>{if(b.preventDefault(),!c.fazenda_id||c.fazendas_destino_ids.length===0||!c.data_aspiracao){t({title:"Erro de validao",description:"Fazenda, pelo menos uma fazenda destino e data so obrigatrios",variant:"destructive"});return}if(!c.veterinario_responsavel.trim()){t({title:"Erro de validao",description:"Veterinrio responsvel  obrigatrio",variant:"destructive"});return}if(!c.tecnico_responsavel.trim()){t({title:"Erro de validao",description:"Tcnico responsvel  obrigatrio",variant:"destructive"});return}try{o(!0);const y=c.fazendas_destino_ids[0],_={fazenda_id:c.fazenda_id,fazenda_destino_id:y,data_aspiracao:c.data_aspiracao,horario_inicio:c.horario_inicio||null,veterinario_responsavel:c.veterinario_responsavel.trim(),tecnico_responsavel:c.tecnico_responsavel.trim(),observacoes:c.observacoes.trim()||null,status:"EM_ANDAMENTO"},{data:x,error:v}=await z.from("pacotes_aspiracao").insert([_]).select().single();if(v)throw v;const g=c.fazendas_destino_ids.map(j=>({pacote_aspiracao_id:x.id,fazenda_destino_id:j})),{error:E}=await z.from("pacotes_aspiracao_fazendas_destino").insert(g);if(E)throw E;t({title:"Aspirao criada",description:"Aspirao criada com sucesso"}),e(`/aspiracoes/${x.id}`)}catch(y){t({title:"Erro ao criar aspirao",description:y instanceof Error?y.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}};return a?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{onClick:()=>e("/aspiracoes"),variant:"outline",size:"icon",children:r.jsx(us,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Nova Aspirao"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Criar nova aspirao"})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Informaes da Aspirao"})}),r.jsx(ke,{children:r.jsxs("form",{onSubmit:m,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"fazenda_id",children:"Fazenda da Aspirao *"}),r.jsxs(_t,{value:c.fazenda_id,onValueChange:b=>d({...c,fazenda_id:b}),children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione a fazenda"})}),r.jsx(gt,{children:i.map(b=>r.jsx(Ie,{value:b.id,children:b.nome},b.id))})]})]}),r.jsxs("div",{className:"space-y-2 col-span-2",children:[r.jsx(ae,{children:"Fazendas Destino *"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ee,{placeholder:"Buscar fazenda destino...",value:f,onChange:b=>h(b.target.value),className:"mb-2"}),r.jsxs(_t,{value:"",onValueChange:b=>{b&&!c.fazendas_destino_ids.includes(b)&&(d({...c,fazendas_destino_ids:[...c.fazendas_destino_ids,b]}),h(""))},children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione uma fazenda destino para adicionar"})}),r.jsx(gt,{children:i.filter(b=>!c.fazendas_destino_ids.includes(b.id)).filter(b=>f.trim()===""?!0:b.nome.toLowerCase().includes(f.toLowerCase())).map(b=>r.jsx(Ie,{value:b.id,children:b.nome},b.id))})]})]}),c.fazendas_destino_ids.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.fazendas_destino_ids.map(b=>{const y=i.find(_=>_.id===b);return y?r.jsxs(et,{variant:"outline",className:"flex items-center gap-1 pr-1",children:[y.nome,r.jsx("button",{type:"button",onClick:_=>{_.preventDefault(),d({...c,fazendas_destino_ids:c.fazendas_destino_ids.filter(x=>x!==b)})},className:"ml-1 hover:bg-slate-200 rounded-full p-0.5",children:r.jsx(sr,{className:"w-3 h-3"})})]},b):null})}),c.fazendas_destino_ids.length===0&&r.jsx("p",{className:"text-sm text-slate-500",children:"Selecione pelo menos uma fazenda destino"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"data_aspiracao",children:"Data da Aspirao *"}),r.jsx(Us,{id:"data_aspiracao",value:c.data_aspiracao,onChange:b=>d({...c,data_aspiracao:b||""}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"horario_inicio",children:"Horrio de Incio"}),r.jsx(Ee,{id:"horario_inicio",type:"time",value:c.horario_inicio,onChange:b=>d({...c,horario_inicio:b.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"veterinario_responsavel",children:"Veterinrio Responsvel *"}),r.jsx(Ee,{id:"veterinario_responsavel",value:c.veterinario_responsavel,onChange:b=>d({...c,veterinario_responsavel:b.target.value}),placeholder:"Nome do veterinrio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"tecnico_responsavel",children:"Tcnico Responsvel *"}),r.jsx(Ee,{id:"tecnico_responsavel",value:c.tecnico_responsavel,onChange:b=>d({...c,tecnico_responsavel:b.target.value}),placeholder:"Nome do tcnico",required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Wa,{id:"observacoes",value:c.observacoes,onChange:b=>d({...c,observacoes:b.target.value}),placeholder:"Observaes sobre a aspirao",rows:3})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx(re,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:n,children:n?"Criando...":"Criar Aspirao"}),r.jsx(re,{type:"button",variant:"outline",onClick:()=>e("/aspiracoes"),disabled:n,children:"Cancelar"})]})]})})]})]})}function HU(){const{id:e}=fn(),t=$a(),{toast:a}=fa(),[s,n]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(""),[h,p]=u.useState([]),[m,b]=u.useState([]),[y,_]=u.useState([]),x=u.useRef(!1),[v,g]=u.useState(!1),[E,j]=u.useState(!1),[S,N]=u.useState(!1),[R,T]=u.useState(!1),[F,U]=u.useState(null),[Z,ce]=u.useState(!1),[k,M]=u.useState(null),[A,q]=u.useState(!1),[I,w]=u.useState({veterinario_responsavel:"",tecnico_responsavel:""}),[C,$]=u.useState({doadora_id:"",horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""}),[O,L]=u.useState({registro:"",raca:"",racaCustom:""}),[H,G]=u.useState({horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""}),te=["Holandesa","Jersey","Gir","Girolando"],[Y,be]=u.useState("");u.useEffect(()=>{e&&de()},[e]);const de=async()=>{try{n(!0);const{data:D,error:Q}=await z.from("pacotes_aspiracao").select("*").eq("id",e).single();if(Q)throw Q;c(D),w({veterinario_responsavel:D.veterinario_responsavel||"",tecnico_responsavel:D.tecnico_responsavel||""});const{data:J,error:oe}=await z.from("fazendas").select("nome").eq("id",D.fazenda_id).single();if(oe)throw oe;f(J.nome);const{data:ge,error:Ne}=await z.from("pacotes_aspiracao_fazendas_destino").select("fazenda_destino_id").eq("pacote_aspiracao_id",e);if(Ne&&console.warn("Erro ao carregar fazendas destino:",Ne),!ge||ge.length===0){if(D.fazenda_destino_id){const{data:me,error:_e}=await z.from("fazendas").select("nome").eq("id",D.fazenda_destino_id).single();!_e&&me&&p([me.nome])}}else{const me=ge.map(Ze=>Ze.fazenda_destino_id),{data:_e,error:je}=await z.from("fazendas").select("id, nome").in("id",me);if(!je&&_e){const Ze=_e.map(it=>it.nome).filter(Boolean);p(Ze)}}await V(),D.status==="EM_ANDAMENTO"&&await le(D.fazenda_id)}catch(D){a({title:"Erro ao carregar dados",description:D instanceof Error?D.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},V=async()=>{try{const{data:D,error:Q}=await z.from("aspiracoes_doadoras").select("*").eq("pacote_aspiracao_id",e).order("created_at",{ascending:!0});if(Q)throw Q;if(!D||D.length===0){b([]);return}const J=D.map(_e=>_e.doadora_id),{data:oe,error:ge}=await z.from("doadoras").select("id, registro, nome").in("id",J);if(ge)throw ge;const Ne=new Map((oe==null?void 0:oe.map(_e=>[_e.id,_e]))||[]),me=D.map(_e=>{const je=Ne.get(_e.doadora_id);return{..._e,doadora_nome:je==null?void 0:je.nome,doadora_registro:je==null?void 0:je.registro}});b(me)}catch(D){console.error("Error loading aspiracoes:",D)}},le=async D=>{try{const{data:Q,error:J}=await z.from("aspiracoes_doadoras").select("doadora_id").eq("pacote_aspiracao_id",e);J&&console.error("Error loading aspiracoes for filtering:",J);const oe=new Set((Q==null?void 0:Q.map(_e=>_e.doadora_id))||[]),{data:ge,error:Ne}=await z.from("doadoras").select("id, registro, nome").eq("fazenda_id",D).order("registro",{ascending:!0});if(Ne)throw Ne;const me=(ge||[]).filter(_e=>!oe.has(_e.id));_(me)}catch(Q){console.error("Error loading doadoras disponiveis:",Q)}},B=D=>{const Q=parseInt(D.atresicos)||0,J=parseInt(D.degenerados)||0,oe=parseInt(D.expandidos)||0,ge=parseInt(D.desnudos)||0,Ne=parseInt(D.viaveis)||0;return Q+J+oe+ge+Ne},ie=m.reduce((D,Q)=>D+(Q.total_oocitos||0),0),xe=(D,Q)=>{if(!D)return"";const[J,oe]=D.split(":").map(Number),ge=J*60+oe+Q*60,Ne=Math.floor(ge/60)%24,me=ge%60;return`${String(Ne).padStart(2,"0")}:${String(me).padStart(2,"0")}`};u.useEffect(()=>{if(v&&l)if(le(l.fazenda_id),m.length>0){const D=m[m.length-1];D.hora_final&&$(Q=>({...Q,horario_aspiracao:D.hora_final||"",hora_final:xe(D.hora_final||"",1)}))}else l!=null&&l.horario_inicio&&$(D=>({...D,horario_aspiracao:l.horario_inicio||"",hora_final:xe(l.horario_inicio||"",1)}))},[v,m,l]);const pe=async()=>{if(o||x.current)return;if(!C.doadora_id){a({title:"Erro",description:"Selecione uma doadora",variant:"destructive"});return}if(!C.hora_final.trim()){a({title:"Erro de validao",description:"Hora final  obrigatria",variant:"destructive"});return}if(!(l!=null&&l.veterinario_responsavel)||!(l!=null&&l.tecnico_responsavel)){a({title:"Erro de validao",description:"A aspirao deve ter veterinrio e tcnico responsveis preenchidos. Por favor, edite a aspirao primeiro.",variant:"destructive"});return}if(m.find(J=>J.doadora_id===C.doadora_id)){a({title:"Erro",description:"Esta doadora j foi aspirada nesta aspirao",variant:"destructive"});return}if(B(C)===0){M("add"),ce(!0);return}await Ce()},Ce=async()=>{if(!(o||x.current))try{x.current=!0,i(!0);const D=B(C),Q={pacote_aspiracao_id:e,doadora_id:C.doadora_id,fazenda_id:l.fazenda_id,data_aspiracao:l.data_aspiracao,horario_aspiracao:C.horario_aspiracao||null,hora_final:C.hora_final,atresicos:parseInt(C.atresicos)||0,degenerados:parseInt(C.degenerados)||0,expandidos:parseInt(C.expandidos)||0,desnudos:parseInt(C.desnudos)||0,viaveis:parseInt(C.viaveis)||0,total_oocitos:D,veterinario_responsavel:l.veterinario_responsavel,tecnico_responsavel:l.tecnico_responsavel,recomendacao_touro:C.recomendacao_touro.trim()||null,observacoes:C.observacoes.trim()||null},{error:J}=await z.from("aspiracoes_doadoras").insert([Q]);if(J){if(J.code==="23505"){a({title:"Erro",description:"Esta doadora j foi aspirada nesta aspirao",variant:"destructive"}),i(!1),x.current=!1,de();return}throw J}const oe=ie+D;await z.from("pacotes_aspiracao").update({total_oocitos:oe}).eq("id",e),a({title:"Doadora adicionada",description:"Doadora adicionada  aspirao com sucesso"}),g(!1),$({doadora_id:"",horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""}),de()}catch(D){a({title:"Erro ao adicionar doadora",description:D instanceof Error?D.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1),x.current=!1}},De=async()=>{if(!O.registro.trim()){a({title:"Erro de validao",description:"Registro  obrigatrio",variant:"destructive"});return}if(!(Y==="Outra"?O.racaCustom.trim():O.raca.trim())){a({title:"Erro de validao",description:"Raa  obrigatria",variant:"destructive"});return}if(!C.hora_final.trim()){a({title:"Erro de validao",description:"Hora final  obrigatria",variant:"destructive"});return}if(!(l!=null&&l.veterinario_responsavel)||!(l!=null&&l.tecnico_responsavel)){a({title:"Erro de validao",description:"A aspirao deve ter veterinrio e tcnico responsveis preenchidos. Por favor, edite a aspirao primeiro.",variant:"destructive"});return}if(B(C)===0){M("create"),ce(!0);return}await he()},he=async()=>{try{i(!0);const D=Y==="Outra"?O.racaCustom.trim():O.raca.trim(),Q=O.registro.trim().toUpperCase(),{data:J,error:oe}=await z.from("doadoras").select("id, registro, raca").ilike("registro",Q).eq("raca",D);if(oe&&oe.code!=="PGRST116")throw oe;if(J&&J.length>0){a({title:"Erro",description:`J existe uma doadora com o registro ${O.registro.trim()} e raa ${D}`,variant:"destructive"}),i(!1);return}const ge={fazenda_id:l.fazenda_id,registro:Q,raca:D},{data:Ne,error:me}=await z.from("doadoras").insert([ge]).select().single();if(me){if(me.code==="23505"){a({title:"Erro",description:`J existe uma doadora com o registro ${O.registro.trim()} nesta fazenda`,variant:"destructive"}),i(!1);return}throw me}const _e=B(C),je={pacote_aspiracao_id:e,doadora_id:Ne.id,fazenda_id:l.fazenda_id,data_aspiracao:l.data_aspiracao,horario_aspiracao:C.horario_aspiracao||null,hora_final:C.hora_final,atresicos:parseInt(C.atresicos)||0,degenerados:parseInt(C.degenerados)||0,expandidos:parseInt(C.expandidos)||0,desnudos:parseInt(C.desnudos)||0,viaveis:parseInt(C.viaveis)||0,total_oocitos:_e,veterinario_responsavel:l.veterinario_responsavel,tecnico_responsavel:l.tecnico_responsavel,recomendacao_touro:C.recomendacao_touro.trim()||null,observacoes:C.observacoes.trim()||null},{error:Ze}=await z.from("aspiracoes_doadoras").insert([je]);if(Ze){if(Ze.code==="23505"){a({title:"Erro",description:"Esta doadora j foi aspirada nesta aspirao",variant:"destructive"}),i(!1),de();return}throw Ze}const it=ie+_e;await z.from("pacotes_aspiracao").update({total_oocitos:it}).eq("id",e),a({title:"Doadora criada e adicionada",description:"Doadora criada e adicionada  aspirao com sucesso"}),j(!1),L({registro:"",raca:"",racaCustom:""}),be(""),de()}catch(D){a({title:"Erro ao criar doadora",description:D instanceof Error?D.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},P=D=>{var Q,J,oe,ge,Ne;U(D),G({horario_aspiracao:D.horario_aspiracao||"",hora_final:D.hora_final||"",atresicos:((Q=D.atresicos)==null?void 0:Q.toString())||"",degenerados:((J=D.degenerados)==null?void 0:J.toString())||"",expandidos:((oe=D.expandidos)==null?void 0:oe.toString())||"",desnudos:((ge=D.desnudos)==null?void 0:ge.toString())||"",viaveis:((Ne=D.viaveis)==null?void 0:Ne.toString())||"",recomendacao_touro:D.recomendacao_touro||"",observacoes:D.observacoes||""}),T(!0)},ee=async()=>{if(F){if(!H.hora_final.trim()){a({title:"Erro de validao",description:"Hora final  obrigatria",variant:"destructive"});return}try{i(!0);const D=B(H),Q=F.total_oocitos||0,J=D-Q,oe={horario_aspiracao:H.horario_aspiracao||null,hora_final:H.hora_final,atresicos:parseInt(H.atresicos)||0,degenerados:parseInt(H.degenerados)||0,expandidos:parseInt(H.expandidos)||0,desnudos:parseInt(H.desnudos)||0,viaveis:parseInt(H.viaveis)||0,total_oocitos:D,recomendacao_touro:H.recomendacao_touro.trim()||null,observacoes:H.observacoes.trim()||null},{error:ge}=await z.from("aspiracoes_doadoras").update(oe).eq("id",F.id);if(ge)throw ge;const Ne=ie+J;await z.from("pacotes_aspiracao").update({total_oocitos:Ne}).eq("id",e),a({title:"Aspirao atualizada",description:"Aspirao da doadora atualizada com sucesso"}),T(!1),U(null),de()}catch(D){a({title:"Erro ao atualizar aspirao",description:D instanceof Error?D.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}}},ue=async()=>{if(!I.veterinario_responsavel.trim()){a({title:"Erro de validao",description:"Veterinrio responsvel  obrigatrio",variant:"destructive"});return}if(!I.tecnico_responsavel.trim()){a({title:"Erro de validao",description:"Tcnico responsvel  obrigatrio",variant:"destructive"});return}try{i(!0);const{error:D}=await z.from("pacotes_aspiracao").update({veterinario_responsavel:I.veterinario_responsavel.trim(),tecnico_responsavel:I.tecnico_responsavel.trim(),updated_at:new Date().toISOString()}).eq("id",e);if(D)throw D;a({title:"Aspirao atualizada",description:"Informaes da aspirao atualizadas com sucesso"}),q(!1),de()}catch(D){a({title:"Erro ao atualizar aspirao",description:D instanceof Error?D.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},K=async()=>{try{i(!0);const{error:D}=await z.from("pacotes_aspiracao").update({status:"FINALIZADO",updated_at:new Date().toISOString()}).eq("id",e);if(D)throw D;a({title:"Aspirao finalizada",description:"Aspirao finalizada com sucesso"}),N(!1),t("/aspiracoes")}catch(D){a({title:"Erro ao finalizar aspirao",description:D instanceof Error?D.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}};if(s)return r.jsx(Pt,{});if(!l)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Aspirao no encontrada"}),r.jsx(re,{onClick:()=>t("/aspiracoes"),className:"mt-4",children:"Voltar para Aspiraes"})]});const ne=l.status==="FINALIZADO";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>t("/aspiracoes"),children:r.jsx(us,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["Aspirao - ",d]}),r.jsx("p",{className:"text-slate-600 mt-1",children:ne?"Aspirao finalizada":"Gerenciar doadoras da aspirao"})]})]}),!ne&&r.jsxs(re,{onClick:()=>N(!0),disabled:o||m.length===0,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(qd,{className:"w-4 h-4 mr-2"}),o?"Finalizando...":"Finalizar Pacote"]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Pe,{children:"Informaes da Aspirao"}),!ne&&r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>q(!0),children:[r.jsx(od,{className:"w-4 h-4 mr-2"}),"Editar"]})]})}),r.jsx(ke,{children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(ae,{className:"text-slate-500",children:"Fazenda da Aspirao"}),r.jsx("p",{className:"font-medium",children:d})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(ae,{className:"text-slate-500",children:"Fazendas Destino"}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:h.length>0?h.map((D,Q)=>r.jsx(et,{variant:"outline",className:"font-medium",children:D},Q)):r.jsx("p",{className:"font-medium text-slate-400",children:"-"})})]}),r.jsxs("div",{children:[r.jsx(ae,{className:"text-slate-500",children:"Data da Aspirao"}),r.jsx("p",{className:"font-medium",children:Lt(l.data_aspiracao)})]}),r.jsxs("div",{children:[r.jsx(ae,{className:"text-slate-500",children:"Horrio de Incio"}),r.jsx("p",{className:"font-medium",children:l.horario_inicio||"-"})]}),r.jsxs("div",{children:[r.jsx(ae,{className:"text-slate-500",children:"Veterinrio Responsvel"}),r.jsx("p",{className:"font-medium",children:l.veterinario_responsavel||"-"})]}),r.jsxs("div",{children:[r.jsx(ae,{className:"text-slate-500",children:"Tcnico Responsvel"}),r.jsx("p",{className:"font-medium",children:l.tecnico_responsavel||"-"})]}),r.jsxs("div",{children:[r.jsx(ae,{className:"text-slate-500",children:"Status"}),r.jsx("div",{children:r.jsx(et,{variant:ne?"default":"secondary",children:ne?"FINALIZADO":"EM ANDAMENTO"})})]}),r.jsxs("div",{children:[r.jsx(ae,{className:"text-slate-500",children:"Total de Ocitos"}),r.jsx("p",{className:"font-medium text-lg",children:ie})]})]})})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Pe,{children:["Doadoras Aspiradas (",m.length,")"]}),!ne&&r.jsxs(da,{open:v,onOpenChange:D=>{g(D),D||$({doadora_id:"",horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""})},children:[r.jsx(ln,{asChild:!0,children:r.jsxs(re,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ar,{className:"w-4 h-4 mr-2"}),"Adicionar Doadora"]})}),r.jsxs(sa,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(ra,{children:[r.jsx(na,{children:"Adicionar Doadora  Aspirao"}),r.jsx(ua,{children:"Selecione uma doadora existente ou cadastre uma nova"})]}),r.jsxs(j1,{defaultValue:"existing",className:"w-full",children:[r.jsxs(Rx,{className:"grid w-full grid-cols-2",children:[r.jsx(pd,{value:"existing",children:"Doadora Existente"}),r.jsx(pd,{value:"new",children:"Cadastrar Nova"})]}),r.jsxs(gd,{value:"existing",className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Doadora *"}),r.jsxs(_t,{value:C.doadora_id,onValueChange:D=>$({...C,doadora_id:D}),children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione uma doadora"})}),r.jsx(gt,{children:y.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhuma doadora disponvel nesta fazenda"}):y.map(D=>r.jsxs(Ie,{value:D.id,children:[D.registro," ",D.nome?`- ${D.nome}`:""]},D.id))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Horrio de Aspirao"}),r.jsx(Ee,{type:"time",value:C.horario_aspiracao,onChange:D=>$({...C,horario_aspiracao:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Hora Final *"}),r.jsx(Ee,{type:"time",value:C.hora_final,onChange:D=>$({...C,hora_final:D.target.value}),required:!0})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Contagem de Ocitos"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Atrsicos"}),r.jsx(Ee,{type:"number",min:"0",value:C.atresicos,onChange:D=>$({...C,atresicos:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Degenerados"}),r.jsx(Ee,{type:"number",min:"0",value:C.degenerados,onChange:D=>$({...C,degenerados:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Expandidos"}),r.jsx(Ee,{type:"number",min:"0",value:C.expandidos,onChange:D=>$({...C,expandidos:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Desnudos"}),r.jsx(Ee,{type:"number",min:"0",value:C.desnudos,onChange:D=>$({...C,desnudos:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Viveis"}),r.jsx(Ee,{type:"number",min:"0",value:C.viaveis,onChange:D=>$({...C,viaveis:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Total"}),r.jsx(Ee,{value:B(C),disabled:!0})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Recomendao de Touro"}),r.jsx(Ee,{value:C.recomendacao_touro,onChange:D=>$({...C,recomendacao_touro:D.target.value}),placeholder:"Recomendao de touro para esta doadora"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Observaes"}),r.jsx(Wa,{value:C.observacoes,onChange:D=>$({...C,observacoes:D.target.value}),placeholder:"Observaes sobre esta aspirao",rows:2})]}),r.jsx(re,{onClick:pe,className:"w-full bg-green-600 hover:bg-green-700",disabled:o||y.length===0,children:o?"Adicionando...":"Adicionar"})]}),r.jsxs(gd,{value:"new",className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Registro *"}),r.jsx(Ee,{value:O.registro,onChange:D=>L({...O,registro:D.target.value}),placeholder:"Registro da doadora"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Raa *"}),r.jsxs(_t,{value:Y,onValueChange:D=>{be(D),L(D==="Outra"?{...O,raca:"",racaCustom:""}:{...O,raca:D,racaCustom:""})},children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione a raa"})}),r.jsxs(gt,{children:[te.map(D=>r.jsx(Ie,{value:D,children:D},D)),r.jsx(Ie,{value:"Outra",children:"Outra"})]})]})]}),Y==="Outra"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Raa Customizada *"}),r.jsx(Ee,{value:O.racaCustom,onChange:D=>L({...O,racaCustom:D.target.value}),placeholder:"Digite a raa"})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Contagem de Ocitos"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Atrsicos"}),r.jsx(Ee,{type:"number",min:"0",value:C.atresicos,onChange:D=>$({...C,atresicos:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Degenerados"}),r.jsx(Ee,{type:"number",min:"0",value:C.degenerados,onChange:D=>$({...C,degenerados:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Expandidos"}),r.jsx(Ee,{type:"number",min:"0",value:C.expandidos,onChange:D=>$({...C,expandidos:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Desnudos"}),r.jsx(Ee,{type:"number",min:"0",value:C.desnudos,onChange:D=>$({...C,desnudos:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Viveis"}),r.jsx(Ee,{type:"number",min:"0",value:C.viaveis,onChange:D=>$({...C,viaveis:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Total"}),r.jsx(Ee,{value:B(C),disabled:!0})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Recomendao de Touro"}),r.jsx(Ee,{value:C.recomendacao_touro,onChange:D=>$({...C,recomendacao_touro:D.target.value}),placeholder:"Recomendao de touro para esta doadora"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Horrio de Aspirao"}),r.jsx(Ee,{type:"time",value:C.horario_aspiracao,onChange:D=>$({...C,horario_aspiracao:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Hora Final *"}),r.jsx(Ee,{type:"time",value:C.hora_final,onChange:D=>$({...C,hora_final:D.target.value}),required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Observaes"}),r.jsx(Wa,{value:C.observacoes,onChange:D=>$({...C,observacoes:D.target.value}),placeholder:"Observaes sobre esta aspirao",rows:2})]}),r.jsx(re,{onClick:De,className:"w-full bg-green-600 hover:bg-green-700",disabled:o,children:o?"Criando...":"Criar e Adicionar"})]})]})]})]})]})}),r.jsx(ke,{children:r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Doadora"}),r.jsx(X,{children:"Registro"}),r.jsx(X,{children:"Horrio"}),r.jsx(X,{children:"Viveis"}),r.jsx(X,{children:"Total Ocitos"}),r.jsx(X,{children:"Recomendao Touro"}),r.jsx(X,{children:"Observaes"}),!ne&&r.jsx(X,{className:"text-right",children:"Aes"})]})}),r.jsx(Tt,{children:m.length===0?r.jsx(Oe,{children:r.jsx(W,{colSpan:ne?7:8,className:"text-center text-slate-500",children:"Nenhuma doadora adicionada  aspirao"})}):m.map(D=>r.jsxs(Oe,{children:[r.jsx(W,{className:"font-medium",children:D.doadora_nome||"-"}),r.jsx(W,{children:D.doadora_registro||"-"}),r.jsx(W,{children:D.horario_aspiracao?`${D.horario_aspiracao}${D.hora_final?` - ${D.hora_final}`:""}`:"-"}),r.jsx(W,{className:"font-medium",children:D.viaveis||0}),r.jsx(W,{children:D.total_oocitos||0}),r.jsx(W,{children:D.recomendacao_touro||"-"}),r.jsx(W,{children:D.observacoes||"-"}),!ne&&r.jsx(W,{className:"text-right",children:r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>P(D),children:r.jsx(od,{className:"w-4 h-4"})})})]},D.id))})]})})]}),r.jsx(da,{open:R,onOpenChange:D=>{T(D),D||(U(null),G({horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""}))},children:r.jsxs(sa,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(ra,{children:[r.jsxs(na,{children:["Editar Aspirao - ",(F==null?void 0:F.doadora_nome)||(F==null?void 0:F.doadora_registro)||"Doadora"]}),r.jsx(ua,{children:"Edite os dados da aspirao da doadora"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Horrio de Aspirao"}),r.jsx(Ee,{type:"time",value:H.horario_aspiracao,onChange:D=>G({...H,horario_aspiracao:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Hora Final *"}),r.jsx(Ee,{type:"time",value:H.hora_final,onChange:D=>G({...H,hora_final:D.target.value}),required:!0})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Contagem de Ocitos"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Atrsicos"}),r.jsx(Ee,{type:"number",min:"0",value:H.atresicos,onChange:D=>G({...H,atresicos:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Degenerados"}),r.jsx(Ee,{type:"number",min:"0",value:H.degenerados,onChange:D=>G({...H,degenerados:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Expandidos"}),r.jsx(Ee,{type:"number",min:"0",value:H.expandidos,onChange:D=>G({...H,expandidos:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Desnudos"}),r.jsx(Ee,{type:"number",min:"0",value:H.desnudos,onChange:D=>G({...H,desnudos:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Viveis"}),r.jsx(Ee,{type:"number",min:"0",value:H.viaveis,onChange:D=>G({...H,viaveis:D.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Total"}),r.jsx(Ee,{value:B(H),disabled:!0})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Recomendao de Touro"}),r.jsx(Ee,{value:H.recomendacao_touro,onChange:D=>G({...H,recomendacao_touro:D.target.value}),placeholder:"Recomendao de touro para esta doadora"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Observaes"}),r.jsx(Wa,{value:H.observacoes,onChange:D=>G({...H,observacoes:D.target.value}),placeholder:"Observaes sobre esta aspirao",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(re,{variant:"outline",onClick:()=>{T(!1),U(null)},disabled:o,children:"Cancelar"}),r.jsx(re,{onClick:ee,className:"bg-blue-600 hover:bg-blue-700",disabled:o,children:o?"Salvando...":"Salvar Alteraes"})]})]})]})}),r.jsx(_d,{open:Z,onOpenChange:ce,children:r.jsxs(Cl,{children:[r.jsxs(Al,{children:[r.jsx(Tl,{children:"Confirmar Adio de Doadora sem Ocitos"}),r.jsxs(Ol,{children:["Esta doadora no possui nenhum ocito (total = 0). Deseja realmente adicion-la  aspirao?",r.jsx("br",{}),r.jsx("br",{}),r.jsx("strong",{children:"Ateno:"})," Doadoras sem ocitos podem no ser teis para o processo de FIV."]})]}),r.jsxs(Dl,{children:[r.jsx(Ml,{disabled:o,children:"Cancelar"}),r.jsx(Rl,{onClick:async()=>{ce(!1),k==="add"?await Ce():k==="create"&&await he(),M(null)},disabled:o,className:"bg-orange-600 hover:bg-orange-700",children:o?"Adicionando...":"Sim, Adicionar Mesmo Assim"})]})]})}),r.jsx(da,{open:A,onOpenChange:q,children:r.jsxs(sa,{children:[r.jsxs(ra,{children:[r.jsx(na,{children:"Editar Aspirao"}),r.jsx(ua,{children:"Atualize as informaes da aspirao"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Veterinrio Responsvel *"}),r.jsx(Ee,{value:I.veterinario_responsavel,onChange:D=>w({...I,veterinario_responsavel:D.target.value}),placeholder:"Nome do veterinrio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Tcnico Responsvel *"}),r.jsx(Ee,{value:I.tecnico_responsavel,onChange:D=>w({...I,tecnico_responsavel:D.target.value}),placeholder:"Nome do tcnico",required:!0})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(re,{variant:"outline",onClick:()=>q(!1),disabled:o,children:"Cancelar"}),r.jsx(re,{onClick:ue,className:"bg-blue-600 hover:bg-blue-700",disabled:o,children:o?"Salvando...":"Salvar"})]})]})]})}),r.jsx(_d,{open:S,onOpenChange:N,children:r.jsxs(Cl,{children:[r.jsxs(Al,{children:[r.jsx(Tl,{children:"Finalizar Aspirao"}),r.jsxs(Ol,{children:["Tem certeza que deseja finalizar esta aspirao? Esta ao no pode ser desfeita.",r.jsx("br",{}),r.jsx("br",{}),r.jsx("strong",{children:"Ateno:"})," Aps finalizar, a aspirao ficar apenas como histrico e no poder ser editada.",r.jsx("br",{}),r.jsx("br",{}),"Total de ocitos na aspirao: ",r.jsx("strong",{children:ie})]})]}),r.jsxs(Dl,{children:[r.jsx(Ml,{disabled:o,children:"Cancelar"}),r.jsx(Rl,{onClick:K,disabled:o,className:"bg-blue-600 hover:bg-blue-700",children:o?"Finalizando...":"Finalizar Aspirao"})]})]})})]})}function VU(){const[e,t]=u.useState([]),[a,s]=u.useState([]),[n,o]=u.useState(!0),[i,l]=u.useState(!1),[c,d]=u.useState(!1),[f,h]=u.useState(!1),[p,m]=u.useState(!1),[b,y]=u.useState(null),[_,x]=u.useState(null),{toast:v}=fa(),g=["Holandesa","Jersey","Gir","Girolando","Nelore","Angus","Brahman","Hereford","Simmental","Tabapu","Sindi","Caracu","Canchim","Senepol","Brangus"],[E,j]=u.useState({cliente_id:"",nome:"",raca:"",tipo_semen:"",quantidade:""}),[S,N]=u.useState({cliente_id:"",nome:"",raca:"",tipo_semen:"",quantidade:""}),[R,T]=u.useState(""),[F,U]=u.useState(""),[Z,ce]=u.useState("");u.useEffect(()=>{k()},[]);const k=async()=>{try{o(!0);const{data:w,error:C}=await z.from("clientes").select("id, nome").order("nome",{ascending:!0});if(C)throw C;s(w||[]);const{data:$,error:O}=await z.from("doses_semen").select("*").order("nome",{ascending:!0});if(O)throw O;const L=new Map(w==null?void 0:w.map(G=>[G.id,G.nome])),H=$==null?void 0:$.map(G=>({...G,cliente_nome:G.cliente_id?L.get(G.cliente_id):void 0}));t(H||[])}catch(w){v({title:"Erro ao carregar dados",description:w instanceof Error?w.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},M=async w=>{if(w.preventDefault(),!E.nome.trim()){v({title:"Erro de validao",description:"Nome  obrigatrio",variant:"destructive"});return}try{m(!0);const C={nome:E.nome,cliente_id:E.cliente_id||null,raca:E.raca||null,tipo_semen:E.tipo_semen||null,quantidade:parseInt(E.quantidade)||0};console.log("Dados sendo inseridos:",C);const{error:$,data:O}=await z.from("doses_semen").insert([C]).select();if($)throw console.error("Erro detalhado:",$),$;v({title:"Dose criada",description:"Dose de smen criada com sucesso"}),l(!1),j({cliente_id:"",nome:"",raca:"",tipo_semen:"",quantidade:""}),k()}catch(C){console.error("Erro completo:",C);let $="Erro desconhecido";C instanceof Error?$=C.message:typeof C=="object"&&C!==null&&($=JSON.stringify(C,null,2)),v({title:"Erro ao criar dose",description:$.includes("RLS")||$.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":$.length>200?$.substring(0,200)+"...":$,variant:"destructive"})}finally{m(!1)}},A=w=>{var C;y(w),N({cliente_id:w.cliente_id||"",nome:w.nome,raca:w.raca||"",tipo_semen:w.tipo_semen||"",quantidade:((C=w.quantidade)==null?void 0:C.toString())||""}),d(!0)},q=async w=>{if(w.preventDefault(),!!b){if(!S.nome.trim()){v({title:"Erro de validao",description:"Nome  obrigatrio",variant:"destructive"});return}try{m(!0);const C={nome:S.nome,cliente_id:S.cliente_id||null,raca:S.raca||null,tipo_semen:S.tipo_semen||null,quantidade:parseInt(S.quantidade)||0},{error:$}=await z.from("doses_semen").update(C).eq("id",b.id);if($)throw $;v({title:"Dose atualizada",description:"Dose de smen atualizada com sucesso"}),d(!1),y(null),k()}catch(C){const $=C instanceof Error?C.message:"Erro desconhecido";v({title:"Erro ao atualizar dose",description:$.includes("RLS")||$.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":$,variant:"destructive"})}finally{m(!1)}}},I=async()=>{if(_)try{m(!0);const{error:w}=await z.from("doses_semen").delete().eq("id",_.id);if(w)throw w;v({title:"Dose excluda",description:"Dose de smen excluda com sucesso"}),h(!1),x(null),k()}catch(w){const C=w instanceof Error?w.message:"Erro desconhecido";v({title:"Erro ao excluir dose",description:C,variant:"destructive"})}finally{m(!1)}};return n?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Doses de Smen"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar doses de smen disponveis"})]}),r.jsxs(da,{open:i,onOpenChange:l,children:[r.jsx(ln,{asChild:!0,children:r.jsxs(re,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ar,{className:"w-4 h-4 mr-2"}),"Nova Dose"]})}),r.jsxs(sa,{className:"max-w-md",children:[r.jsxs(ra,{children:[r.jsx(na,{children:"Criar Nova Dose de Smen"}),r.jsx(ua,{children:"Preencha os dados da dose"})]}),r.jsxs("form",{onSubmit:M,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"nome",children:"Nome *"}),r.jsx(Ee,{id:"nome",value:E.nome,onChange:w=>j({...E,nome:w.target.value}),placeholder:"Nome do touro/reprodutor",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"cliente_id",children:"Cliente"}),r.jsxs(_t,{value:E.cliente_id,onValueChange:w=>j({...E,cliente_id:w}),children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione o cliente"})}),r.jsx(gt,{children:a.map(w=>r.jsx(Ie,{value:w.id,children:w.nome},w.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"raca",children:"Raa"}),r.jsxs(_t,{value:E.raca,onValueChange:w=>j({...E,raca:w}),children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione a raa"})}),r.jsx(gt,{children:g.map(w=>r.jsx(Ie,{value:w,children:w},w))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"tipo_semen",children:"Tipo de Smen"}),r.jsxs(_t,{value:E.tipo_semen,onValueChange:w=>j({...E,tipo_semen:w}),children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione o tipo"})}),r.jsxs(gt,{children:[r.jsx(Ie,{value:"CONVENCIONAL",children:"CONVENCIONAL"}),r.jsx(Ie,{value:"SEXADO",children:"SEXADO"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"quantidade",children:"Quantidade"}),r.jsx(Ee,{id:"quantidade",type:"number",min:"0",value:E.quantidade,onChange:w=>j({...E,quantidade:w.target.value}),placeholder:"Quantidade a ser adicionada",required:!0})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(re,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:p,children:p?"Salvando...":"Salvar"}),r.jsx(re,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:p,children:"Cancelar"})]})]})]})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Lista de Doses de Smen"})}),r.jsxs(ke,{children:[r.jsx("div",{className:"space-y-4 mb-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Filtrar por Touro"}),r.jsx(Ee,{placeholder:"Buscar por nome do touro...",value:R,onChange:w=>T(w.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Filtrar por Tipo"}),r.jsxs(_t,{value:F||"all",onValueChange:w=>U(w==="all"?"":w),children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Todos os tipos"})}),r.jsxs(gt,{children:[r.jsx(Ie,{value:"all",children:"Todos os tipos"}),r.jsx(Ie,{value:"CONVENCIONAL",children:"CONVENCIONAL"}),r.jsx(Ie,{value:"SEXADO",children:"SEXADO"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Filtrar por Raa"}),r.jsxs(_t,{value:Z||"all",onValueChange:w=>ce(w==="all"?"":w),children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Todas as raas"})}),r.jsxs(gt,{children:[r.jsx(Ie,{value:"all",children:"Todas as raas"}),g.map(w=>r.jsx(Ie,{value:w,children:w},w))]})]})]})]})}),r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Nome (Touro)"}),r.jsx(X,{children:"Cliente"}),r.jsx(X,{children:"Raa"}),r.jsx(X,{children:"Tipo"}),r.jsx(X,{children:"Quantidade"}),r.jsx(X,{className:"text-right",children:"Aes"})]})}),r.jsx(Tt,{children:e.filter(w=>{const C=!R||w.nome.toLowerCase().includes(R.toLowerCase()),$=!F||w.tipo_semen===F,O=!Z||w.raca===Z;return C&&$&&O}).length===0?r.jsx(Oe,{children:r.jsx(W,{colSpan:6,className:"text-center text-slate-500",children:"Nenhuma dose cadastrada"})}):e.filter(w=>{const C=!R||w.nome.toLowerCase().includes(R.toLowerCase()),$=!F||w.tipo_semen===F,O=!Z||w.raca===Z;return C&&$&&O}).map(w=>r.jsxs(Oe,{children:[r.jsx(W,{className:"font-medium",children:w.nome}),r.jsx(W,{children:w.cliente_nome||"-"}),r.jsx(W,{children:w.raca||"-"}),r.jsx(W,{children:w.tipo_semen||"-"}),r.jsx(W,{children:w.quantidade??"-"}),r.jsx(W,{className:"text-right",children:r.jsxs("div",{className:"flex gap-1 justify-end",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>A(w),children:r.jsx(od,{className:"w-4 h-4"})}),r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{x(w),h(!0)},children:r.jsx(Df,{className:"w-4 h-4 text-red-600"})})]})})]},w.id))})]})]})]}),r.jsx(da,{open:c,onOpenChange:d,children:r.jsxs(sa,{className:"max-w-md",children:[r.jsxs(ra,{children:[r.jsx(na,{children:"Editar Dose de Smen"}),r.jsx(ua,{children:"Atualizar dados da dose"})]}),r.jsxs("form",{onSubmit:q,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"edit_nome",children:"Nome *"}),r.jsx(Ee,{id:"edit_nome",value:S.nome,onChange:w=>N({...S,nome:w.target.value}),placeholder:"Nome do touro/reprodutor",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"edit_cliente_id",children:"Cliente"}),r.jsxs(_t,{value:S.cliente_id,onValueChange:w=>N({...S,cliente_id:w}),children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione o cliente"})}),r.jsx(gt,{children:a.map(w=>r.jsx(Ie,{value:w.id,children:w.nome},w.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"edit_raca",children:"Raa"}),r.jsxs(_t,{value:S.raca,onValueChange:w=>N({...S,raca:w}),children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione a raa"})}),r.jsx(gt,{children:g.map(w=>r.jsx(Ie,{value:w,children:w},w))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"edit_quantidade",children:"Quantidade"}),r.jsx(Ee,{id:"edit_quantidade",type:"number",min:"0",value:S.quantidade,onChange:w=>N({...S,quantidade:w.target.value}),placeholder:"Quantidade",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"edit_tipo_semen",children:"Tipo de Smen"}),r.jsxs(_t,{value:S.tipo_semen,onValueChange:w=>N({...S,tipo_semen:w}),children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione o tipo"})}),r.jsxs(gt,{children:[r.jsx(Ie,{value:"CONVENCIONAL",children:"CONVENCIONAL"}),r.jsx(Ie,{value:"SEXADO",children:"SEXADO"})]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(re,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:p,children:p?"Salvando...":"Salvar Alteraes"}),r.jsx(re,{type:"button",variant:"outline",onClick:()=>d(!1),disabled:p,children:"Cancelar"})]})]})]})}),r.jsx(_d,{open:f,onOpenChange:h,children:r.jsxs(Cl,{children:[r.jsxs(Al,{children:[r.jsx(Tl,{children:"Confirmar Excluso"}),r.jsxs(Ol,{children:['Tem certeza que deseja excluir a dose "',_==null?void 0:_.nome,'"? Esta ao no pode ser desfeita.']})]}),r.jsxs(Dl,{children:[r.jsx(Ml,{disabled:p,children:"Cancelar"}),r.jsx(Rl,{onClick:I,disabled:p,className:"bg-red-600 hover:bg-red-700",children:p?"Excluindo...":"Excluir"})]})]})})]})}function cb(){var Ft;const{id:e}=fn(),t=$a(),{toast:a}=fa(),[s,n]=u.useState([]),[o,i]=u.useState([]),[l,c]=u.useState([]),[d,f]=u.useState([]),[h,p]=u.useState([]),[m,b]=u.useState([]),[y,_]=u.useState(!0),[x,v]=u.useState(!1),[g,E]=u.useState(!1),[j,S]=u.useState(null),[N,R]=u.useState([]),[T,F]=u.useState(!1),[U,Z]=u.useState({}),[ce,k]=u.useState(!1),[M,A]=u.useState([]),[q,I]=u.useState(!1),[w,C]=u.useState([]),[$,O]=u.useState([]),[L,H]=u.useState([]),[G,te]=u.useState(""),[Y,be]=u.useState([]),[de,V]=u.useState(""),[le,B]=u.useState([]),[ie,xe]=u.useState(""),[pe,Ce]=u.useState(""),[De,he]=u.useState(""),[P,ee]=u.useState(""),[ue,K]=u.useState([]),[ne,D]=u.useState([]),[Q,J]=u.useState([]),[oe,ge]=u.useState([]),[Ne,me]=u.useState(!1),_e=fe=>({[-1]:"Aspirao",0:"Fecundao",1:"Zigoto",2:"Clivagem",3:"Clivagem Avanada",4:"Compactao",5:"Mrula / Blastocisto Inicial",6:"Blastocisto",7:"Blastocisto Expandido",8:"Resgate / Sada Tardia"})[fe]||`Dia ${fe}`,je=fe=>fe===-1?"bg-blue-100 text-blue-800 border-blue-300":fe===0?"bg-green-100 text-green-800 border-green-300":fe>=1&&fe<=3?"bg-yellow-100 text-yellow-800 border-yellow-300":fe>=4&&fe<=5||fe===6?"bg-orange-100 text-orange-800 border-orange-300":fe===7?"bg-purple-100 text-purple-800 border-purple-300":fe===8?"bg-red-100 text-red-800 border-red-300":"bg-slate-100 text-slate-800 border-slate-300",[Ze,it]=u.useState([]),[Je,mt]=u.useState({aspiracao_doadora_id:"",dose_semen_id:"",quantidade_fracionada:"1.0",quantidade_oocitos:"",observacoes:""}),[wt,ka]=u.useState({pacote_aspiracao_id:"",observacoes:"",doses_selecionadas:[]}),[We,Ct]=u.useState(null);u.useEffect(()=>{e?Gt(e):Rt()},[e]),u.useEffect(()=>{let fe=[...s];if(pe&&(fe=fe.filter(Re=>{const Le=ne.find(Qe=>Qe.id===Re.pacote_aspiracao_id);return(Le==null?void 0:Le.fazenda_id)===pe})),P!==""){const Re=parseInt(P);fe=fe.filter(Le=>Le.dia_atual===Re)}K(fe)},[s,pe,P,ne]);const Ke=oe.filter(fe=>fe.nome.toLowerCase().includes(De.toLowerCase()));u.useEffect(()=>{const fe=Re=>{Re.target.closest(".fazenda-busca-container")||me(!1)};if(Ne)return document.addEventListener("mousedown",fe),()=>{document.removeEventListener("mousedown",fe)}},[Ne]);const Rt=async()=>{try{_(!0);const{data:fe,error:Re}=await z.from("pacotes_aspiracao").select("*").eq("status","FINALIZADO").order("data_aspiracao",{ascending:!1});if(Re)throw Re;console.log("Pacotes FINALIZADOS encontrados:",(fe==null?void 0:fe.length)||0),fe&&fe.length>0&&console.log("IDs dos pacotes FINALIZADOS:",fe.map(Te=>Te.id));const{data:Le,error:Qe}=await z.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(Qe)throw Qe;p(Le||[]);const{data:Ye,error:$t}=await z.from("clientes").select("id, nome").order("nome",{ascending:!0});$t?console.error("Erro ao carregar clientes:",$t):it(Ye||[]);const $e=new Map(Le==null?void 0:Le.map(Te=>[Te.id,Te.nome])),rt=new Map,ve=new Map,qe=(fe==null?void 0:fe.map(Te=>Te.id))||[];if(qe.length>0){const{data:Te,error:qt}=await z.from("pacotes_aspiracao_fazendas_destino").select("pacote_aspiracao_id, fazenda_destino_id").in("pacote_aspiracao_id",qe);qt?console.error("Erro ao carregar fazendas destino:",qt):Te&&Te.forEach(Xt=>{const Qa=$e.get(Xt.fazenda_destino_id);if(Qa){const xa=rt.get(Xt.pacote_aspiracao_id)||[];xa.push(Qa),rt.set(Xt.pacote_aspiracao_id,xa)}});const{data:Ve,error:qa}=await z.from("aspiracoes_doadoras").select("pacote_aspiracao_id").in("pacote_aspiracao_id",qe);qa?console.error("Erro ao carregar aspiraes:",qa):Ve&&Ve.forEach(Xt=>{Xt.pacote_aspiracao_id&&ve.set(Xt.pacote_aspiracao_id,(ve.get(Xt.pacote_aspiracao_id)||0)+1)})}const{data:Fe,error:jt}=await z.from("lotes_fiv").select("*").order("data_abertura",{ascending:!1});if(jt)throw jt;const lt=new Set((Fe==null?void 0:Fe.map(Te=>Te.pacote_aspiracao_id).filter(Te=>!!Te))||[]),dt=(fe||[]).filter(Te=>Te.usado_em_lote_fiv!==void 0?!Te.usado_em_lote_fiv:!lt.has(Te.id));console.log("Pacotes j usados em lotes:",Array.from(lt)),console.log("Total de lotes encontrados:",(Fe==null?void 0:Fe.length)||0),console.log("Pacotes disponveis aps filtrar usados:",dt.length);const ba=dt.map(Te=>({...Te,fazenda_nome:$e.get(Te.fazenda_id),fazendas_destino_nomes:rt.get(Te.id)||[],quantidade_doadoras:ve.get(Te.id)||0}));console.log("Pacotes finais para exibir:",ba.length),i(ba);const Jt=Fe||[],Et=(Jt==null?void 0:Jt.map(Te=>Te.id))||[],{data:za,error:as}=await z.from("lote_fiv_acasalamentos").select("lote_fiv_id").in("lote_fiv_id",Et);if(as)throw as;const Hs=new Map;za==null||za.forEach(Te=>{Hs.set(Te.lote_fiv_id,(Hs.get(Te.lote_fiv_id)||0)+1)});const{data:ss,error:Yt}=await z.from("lote_fiv_fazendas_destino").select("lote_fiv_id, fazenda_id").in("lote_fiv_id",Et);if(Yt)throw Yt;const cr=new Map;ss==null||ss.forEach(Te=>{const qt=$e.get(Te.fazenda_id);if(qt){const Ve=cr.get(Te.lote_fiv_id)||[];Ve.push(qt),cr.set(Te.lote_fiv_id,Ve)}});const Mr=new Map(ba.map(Te=>[Te.id,Te]));(fe||[]).forEach(Te=>{Mr.has(Te.id)||Mr.set(Te.id,{...Te,fazenda_nome:$e.get(Te.fazenda_id),fazendas_destino_nomes:rt.get(Te.id)||[],quantidade_doadoras:ve.get(Te.id)||0})});const pn=(Jt||[]).map(Te=>{const qt=Mr.get(Te.pacote_aspiracao_id);let Ve=pr((qt==null?void 0:qt.data_aspiracao)||null);if(!Ve){const Qa=pr(Te.data_abertura);if(Qa){const[xa,Pr,tc]=Qa.split("-").map(Number),go=new Date(xa,Pr-1,tc);go.setDate(go.getDate()-1);const cD=go.getFullYear(),dD=String(go.getMonth()+1).padStart(2,"0"),uD=String(go.getDate()).padStart(2,"0");Ve=`${cD}-${dD}-${uD}`}}const qa=Bc(),Xt=Ve?Math.max(0,Pm(qa,Ve)):0;return{...Te,pacote_nome:qt==null?void 0:qt.fazenda_nome,pacote_data:qt==null?void 0:qt.data_aspiracao,fazendas_destino_nomes:cr.get(Te.id)||[],quantidade_acasalamentos:Hs.get(Te.id)||0,dia_atual:Xt}}),ms=pn.filter(Te=>Te.status==="ABERTO"&&Te.dia_atual!==void 0&&Te.dia_atual>9);if(ms.length>0){const Te=ms.map(qt=>qt.id);z.from("lotes_fiv").update({status:"FECHADO"}).in("id",Te).then(({error:qt})=>{qt?console.error("Erro ao fechar lotes automaticamente:",qt):console.log(`${Te.length} lote(s) fechado(s) automaticamente aps D8`)})}const ec=pn.filter(Te=>Te.status==="FECHADO"?!1:Te.dia_atual!==void 0&&Te.dia_atual<=9);n(pn),K(ec);const Vs=new Set(pn.map(Te=>Te.pacote_aspiracao_id).filter(Te=>!!Te)),kr=[];(fe||[]).forEach(Te=>{Vs.has(Te.id)&&kr.push({...Te,fazenda_nome:$e.get(Te.fazenda_id),fazendas_destino_nomes:rt.get(Te.id)||[],quantidade_doadoras:ve.get(Te.id)||0})}),D(kr);const ps=new Set,zr=new Map;kr.forEach(Te=>{if(Te.data_aspiracao){const qt=Te.data_aspiracao.split("T")[0];ps.add(qt)}Te.fazenda_id&&Te.fazenda_nome&&zr.set(Te.fazenda_id,Te.fazenda_nome)}),J(Array.from(ps).sort().reverse()),ge(Array.from(zr.entries()).map(([Te,qt])=>({id:Te,nome:qt})).sort((Te,qt)=>Te.nome.localeCompare(qt.nome)))}catch(fe){a({title:"Erro ao carregar dados",description:fe instanceof Error?fe.message:"Erro desconhecido",variant:"destructive"})}finally{_(!1)}},Gt=async fe=>{try{_(!0);const{data:Re,error:Le}=await z.from("lotes_fiv").select("*").eq("id",fe).single();if(Le)throw Le;const{data:Qe,error:Ye}=await z.from("pacotes_aspiracao").select("*").eq("id",Re.pacote_aspiracao_id).single();if(Ye)throw Ye;xe(Qe.data_aspiracao);const{data:$t,error:$e}=await z.from("fazendas").select("nome").eq("id",Qe.fazenda_id).single();$e?(console.error("Erro ao carregar fazenda origem:",$e),te("")):te(($t==null?void 0:$t.nome)||"");const{data:rt,error:ve}=await z.from("pacotes_aspiracao_fazendas_destino").select("fazenda_destino_id").eq("pacote_aspiracao_id",Qe.id);ve&&console.error("Erro ao carregar fazendas destino:",ve);let qe=[];if(!rt||rt.length===0?Qe.fazenda_destino_id&&(qe=[Qe.fazenda_destino_id]):qe=rt.map(Ve=>Ve.fazenda_destino_id),A(qe),qe.length>0){const{data:Ve,error:qa}=await z.from("fazendas").select("id, nome").in("id",qe);if(qa)console.error("Erro ao carregar nomes das fazendas destino:",qa),be([]);else if(be((Ve==null?void 0:Ve.map(Xt=>Xt.nome))||[]),Ve){const Xt=[...h];Ve.forEach(Qa=>{Xt.find(xa=>xa.id===Qa.id)||Xt.push(Qa)}),p(Xt)}}else be([]);const{data:Fe,error:jt}=await z.from("lote_fiv_acasalamentos").select("*").eq("lote_fiv_id",fe).order("created_at",{ascending:!0});if(jt)throw jt;const lt=(Fe==null?void 0:Fe.map(Ve=>Ve.aspiracao_doadora_id))||[],{data:dt,error:ba}=await z.from("aspiracoes_doadoras").select("id, doadora_id, viaveis").in("id",lt);if(ba)throw ba;const Jt=[...new Set((dt==null?void 0:dt.map(Ve=>Ve.doadora_id))||[])],{data:Et,error:za}=await z.from("doadoras").select("id, nome, registro").in("id",Jt);if(za)throw za;const as=[...new Set((Fe==null?void 0:Fe.map(Ve=>Ve.dose_semen_id))||[])],{data:Hs,error:ss}=await z.from("doses_semen").select("id, nome").in("id",as);if(ss)throw ss;const Yt=new Map(Et==null?void 0:Et.map(Ve=>[Ve.id,Ve])),cr=new Map(Hs==null?void 0:Hs.map(Ve=>[Ve.id,Ve])),Mr=new Map(dt==null?void 0:dt.map(Ve=>[Ve.id,Ve])),{data:po,error:pn}=await z.from("embrioes").select("lote_fiv_acasalamento_id").eq("lote_fiv_id",fe),ms=new Map;!pn&&po&&po.forEach(Ve=>{Ve.lote_fiv_acasalamento_id&&ms.set(Ve.lote_fiv_acasalamento_id,(ms.get(Ve.lote_fiv_acasalamento_id)||0)+1)});const ec=(Fe||[]).map(Ve=>{const qa=Mr.get(Ve.aspiracao_doadora_id),Xt=qa?Yt.get(qa.doadora_id):void 0,Qa=cr.get(Ve.dose_semen_id);return{...Ve,doadora_nome:(Xt==null?void 0:Xt.nome)||(Xt==null?void 0:Xt.registro),doadora_registro:Xt==null?void 0:Xt.registro,dose_nome:Qa==null?void 0:Qa.nome,viaveis:qa==null?void 0:qa.viaveis,total_embrioes_produzidos:ms.get(Ve.id)||0}});R(ec),S({...Re,pacote_nome:Qe.fazenda_id,pacote_data:Qe.data_aspiracao}),E(!0);const{data:Vs,error:kr}=await z.from("aspiracoes_doadoras").select("id, doadora_id, viaveis").eq("pacote_aspiracao_id",Re.pacote_aspiracao_id);if(kr)console.error("Erro ao carregar todas as aspiraes:",kr);else{const Ve=new Map;Fe==null||Fe.forEach(xa=>{const Pr=xa.aspiracao_doadora_id,tc=xa.quantidade_oocitos||0;Ve.set(Pr,(Ve.get(Pr)||0)+tc)});const Xt=(Vs||[]).filter(xa=>{const Pr=xa.viaveis??0,tc=Ve.get(xa.id)||0,go=Pr-tc;return Pr>0&&go>0}).map(xa=>({...xa,oocitos_disponiveis:(xa.viaveis??0)-(Ve.get(xa.id)||0)}));O(Xt);const Qa=[...new Set((Vs==null?void 0:Vs.map(xa=>xa.doadora_id))||[])];if(Qa.length>0){const{data:xa,error:Pr}=await z.from("doadoras").select("id, nome, registro").in("id",Qa);!Pr&&xa&&b(xa)}}const{data:ps,error:zr}=await z.from("doses_semen").select("id, nome, cliente_id").order("nome",{ascending:!0});if(zr)console.error("Erro ao carregar doses disponveis:",zr),H([]);else try{const Ve=Re.doses_selecionadas;Ve&&Array.isArray(Ve)&&Ve.length>0?H((ps||[]).filter(qa=>Ve.includes(qa.id))):H(ps||[])}catch(Ve){console.warn("Campo doses_selecionadas no encontrado, mostrando todas as doses:",Ve),H(ps||[])}const{data:Te,error:qt}=await z.from("clientes").select("id, nome").order("nome",{ascending:!0});qt?console.error("Erro ao carregar clientes:",qt):it(Te||[]),await ft(fe)}catch(Re){a({title:"Erro ao carregar detalhes do lote",description:Re instanceof Error?Re.message:"Erro desconhecido",variant:"destructive"})}finally{_(!1)}},ft=async fe=>{try{const{data:Re,error:Le}=await z.from("pacotes_aspiracao").select("id, data_aspiracao, observacoes").eq("status","FINALIZADO").like("observacoes",`%Lote FIV ${fe.slice(0,8)}%`).order("data_aspiracao",{ascending:!1});if(Le){console.error("Erro ao carregar histrico de despachos:",Le),C([]);return}if(!Re||Re.length===0){C([]);return}const{data:Qe,error:Ye}=await z.from("embrioes").select("id, lote_fiv_acasalamento_id, created_at").eq("lote_fiv_id",fe).order("created_at",{ascending:!1});if(Ye){console.error("Erro ao carregar embries:",Ye),C([]);return}const $t=new Map;Qe==null||Qe.forEach(ve=>{if(ve.created_at){const qe=ve.created_at.split("T")[0],Fe=$t.get(qe)||[];Fe.push(ve),$t.set(qe,Fe)}});const $e=[...new Set((Qe==null?void 0:Qe.map(ve=>ve.lote_fiv_acasalamento_id).filter(Boolean))||[])];if($e.length>0){const{data:ve,error:qe}=await z.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",$e);if(qe)console.error("Erro ao carregar acasalamentos:",qe);else if(ve){const Fe=[...new Set(ve.map(Yt=>Yt.aspiracao_doadora_id).filter(Boolean))],{data:jt}=await z.from("aspiracoes_doadoras").select("id, doadora_id").in("id",Fe),lt=[...new Set((jt==null?void 0:jt.map(Yt=>Yt.doadora_id).filter(Boolean))||[])],{data:dt}=await z.from("doadoras").select("id, registro, nome").in("id",lt),ba=[...new Set(ve.map(Yt=>Yt.dose_semen_id).filter(Boolean))],{data:Jt}=await z.from("doses_semen").select("id, nome").in("id",ba),Et=new Map((jt==null?void 0:jt.map(Yt=>[Yt.id,Yt]))||[]),za=new Map((dt==null?void 0:dt.map(Yt=>[Yt.id,Yt]))||[]),as=new Map((Jt==null?void 0:Jt.map(Yt=>[Yt.id,Yt]))||[]),Hs=new Map(ve.map(Yt=>[Yt.id,Yt])),ss=Re.map(Yt=>{const cr=Yt.data_aspiracao.split("T")[0],Mr=$t.get(cr)||[],po=new Map;Mr.forEach(ms=>{ms.lote_fiv_acasalamento_id&&po.set(ms.lote_fiv_acasalamento_id,(po.get(ms.lote_fiv_acasalamento_id)||0)+1)});const pn=Array.from(po.entries()).map(([ms,ec])=>{const Vs=Hs.get(ms),kr=Vs?Et.get(Vs.aspiracao_doadora_id):void 0,ps=kr?za.get(kr.doadora_id):void 0,zr=Vs?as.get(Vs.dose_semen_id):void 0;return{acasalamento_id:ms,quantidade:ec,doadora:(ps==null?void 0:ps.registro)||(ps==null?void 0:ps.nome)||"-",dose:(zr==null?void 0:zr.nome)||"-"}});return{id:Yt.id,data_despacho:cr,acasalamentos:pn,pacote_id:Yt.id}});C(ss);return}}const rt=Re.map(ve=>{const qe=ve.data_aspiracao.split("T")[0];return{id:ve.id,data_despacho:qe,acasalamentos:[],pacote_id:ve.id}});C(rt)}catch(Re){console.error("Erro ao carregar histrico:",Re),C([])}},Ge=()=>{I(!0)},Se=async()=>{var fe;if(j)try{F(!0);const Re=o.find(Et=>Et.id===j.pacote_aspiracao_id);let Le=pr((Re==null?void 0:Re.data_aspiracao)||null);if(!Le){const Et=pr(j.data_abertura);if(Et){const[za,as,Hs]=Et.split("-").map(Number),ss=new Date(za,as-1,Hs);ss.setDate(ss.getDate()-1);const Yt=ss.getFullYear(),cr=String(ss.getMonth()+1).padStart(2,"0"),Mr=String(ss.getDate()).padStart(2,"0");Le=`${Yt}-${cr}-${Mr}`}}const Qe=Bc();if((Le?Math.max(0,Pm(Qe,Le)):0)>9){a({title:"Prazo expirado",description:"D8  o ltimo dia. No  possvel criar embries aps o D8. O lote ser fechado e no aparecer mais na lista.",variant:"destructive"}),F(!1);return}const $t=N.filter(Et=>{var as;return parseInt(U[Et.id]||((as=Et.quantidade_embrioes)==null?void 0:as.toString())||"0")>0});if($t.length===0){a({title:"Nenhum embrio para despachar",description:"Preencha a quantidade de embries em pelo menos um acasalamento antes de despachar.",variant:"destructive"});return}const{data:$e}=await z.from("pacotes_aspiracao").select("fazenda_id").eq("id",j.pacote_aspiracao_id).single(),rt=`${G} - ${Y.join(", ")}`,ve=new Date().toISOString().split("T")[0],qe=M.length>0?M[0]:null;if(!qe){a({title:"Erro ao despachar",description:" necessrio ter pelo menos uma fazenda destino configurada no lote.",variant:"destructive"});return}const{data:Fe,error:jt}=await z.from("pacotes_aspiracao").insert([{data_aspiracao:ve,fazenda_id:($e==null?void 0:$e.fazenda_id)||null,fazenda_destino_id:qe,status:"FINALIZADO",observacoes:`Despachado do Lote FIV ${j.id.slice(0,8)}... em ${Lt(ve)}. Pacote: ${rt}`}]).select().single();if(jt)throw console.error("Erro ao criar pacote:",jt),jt;if(M.length>0){const{error:Et}=await z.from("pacotes_aspiracao_fazendas_destino").insert(M.map(za=>({pacote_aspiracao_id:Fe.id,fazenda_destino_id:za})));Et&&console.error("Erro ao associar fazendas destino:",Et)}const lt=[],dt=[];for(const Et of $t){const za=parseInt(U[Et.id]||((fe=Et.quantidade_embrioes)==null?void 0:fe.toString())||"0");if(za>0){for(let as=0;as<za;as++)lt.push({lote_fiv_id:j.id,lote_fiv_acasalamento_id:Et.id,status_atual:"FRESCO"});dt.push({acasalamento_id:Et.id,quantidade:za,doadora:Et.doadora_registro||Et.doadora_nome,dose:Et.dose_nome})}}if(lt.length>0){const{error:Et}=await z.from("embrioes").insert(lt);if(Et)throw console.error("Erro detalhado ao criar embries:",Et),Et}const ba={id:Fe.id,data_despacho:ve,acasalamentos:dt,pacote_id:Fe.id};C([ba,...w]);const Jt=$t.map(Et=>z.from("lote_fiv_acasalamentos").update({quantidade_embrioes:null}).eq("id",Et.id));await Promise.all(Jt),Z({}),a({title:"Embries despachados",description:`${lt.length} embrio(es) foram despachados para o pacote "${rt}".`}),Gt(j.id)}catch(Re){a({title:"Erro ao despachar embries",description:Re instanceof Error?Re.message:"Erro desconhecido",variant:"destructive"})}finally{F(!1)}},at=async fe=>{ka({...wt,pacote_aspiracao_id:fe});const Re=o.find(Le=>Le.id===fe);if(Ct(Re||null),Re){const{data:Le,error:Qe}=await z.from("aspiracoes_doadoras").select("id, doadora_id, viaveis").eq("pacote_aspiracao_id",fe);if(Qe){console.error("Erro ao carregar aspiraes:",Qe);return}c(Le||[]);const Ye=[...new Set((Le==null?void 0:Le.map(rt=>rt.doadora_id))||[])];if(Ye.length>0){const{data:rt,error:ve}=await z.from("doadoras").select("id, nome, registro").in("id",Ye);if(ve){console.error("Erro ao carregar doadoras:",ve);return}b(rt||[])}const{data:$t,error:$e}=await z.from("doses_semen").select("id, nome, cliente_id").order("nome",{ascending:!0});if($e){console.error("Erro ao carregar doses:",$e);return}f($t||[])}},Mt=async fe=>{if(fe.preventDefault(),!j)return;if(!Je.aspiracao_doadora_id){a({title:"Erro de validao",description:"Doadora  obrigatria",variant:"destructive"});return}if(!Je.dose_semen_id){a({title:"Erro de validao",description:"Selecione uma dose de smen",variant:"destructive"});return}const Re=parseFloat(Je.quantidade_fracionada)||0;if(Re<=0){a({title:"Erro de validao",description:"Quantidade fracionada deve ser maior que zero",variant:"destructive"});return}try{F(!0);const Le=$.find(rt=>rt.id===Je.aspiracao_doadora_id),Qe=(Le==null?void 0:Le.oocitos_disponiveis)??0,Ye=parseInt(Je.quantidade_oocitos)||0;if(Ye>Qe){a({title:"Erro de validao",description:`A quantidade de ocitos (${Ye}) no pode ser maior que os ocitos disponveis (${Qe})`,variant:"destructive"});return}const $t={lote_fiv_id:j.id,aspiracao_doadora_id:Je.aspiracao_doadora_id,dose_semen_id:Je.dose_semen_id,quantidade_fracionada:Re,quantidade_oocitos:Ye>0?Ye:null,observacoes:Je.observacoes||null},{error:$e}=await z.from("lote_fiv_acasalamentos").insert([$t]);if($e)throw $e;a({title:"Acasalamento adicionado",description:"Acasalamento adicionado com sucesso"}),k(!1),mt({aspiracao_doadora_id:"",dose_semen_id:"",quantidade_fracionada:"1.0",quantidade_oocitos:"",observacoes:""}),await Gt(j.id)}catch(Le){const Qe=Le instanceof Error?Le.message:"Erro desconhecido";a({title:"Erro ao adicionar acasalamento",description:Qe.includes("RLS")||Qe.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":Qe,variant:"destructive"})}finally{F(!1)}},st=async fe=>{var Re,Le;if(fe.preventDefault(),!wt.pacote_aspiracao_id){a({title:"Erro de validao",description:"Pacote de aspirao  obrigatrio",variant:"destructive"});return}if(!We){a({title:"Erro de validao",description:"Pacote selecionado no encontrado",variant:"destructive"});return}try{F(!0);const{data:Qe,error:Ye}=await z.from("pacotes_aspiracao").select("id, status").eq("id",wt.pacote_aspiracao_id).single();if(Ye||!Qe){a({title:"Erro de validao",description:"Pacote de aspirao no encontrado ou invlido",variant:"destructive"});return}if(Qe.status!=="FINALIZADO"){a({title:"Erro de validao",description:"Apenas pacotes FINALIZADOS podem ser usados para criar lotes FIV",variant:"destructive"});return}const $t=new Date(We.data_aspiracao);$t.setDate($t.getDate()+1);const $e=$t.toISOString().split("T")[0];console.log("Dados que sero enviados:",{pacote_aspiracao_id:wt.pacote_aspiracao_id,data_abertura:$e,data_fecundacao:$e,status:"ABERTO"});const rt={pacote_aspiracao_id:wt.pacote_aspiracao_id,data_abertura:$e,data_fecundacao:$e,status:"ABERTO",observacoes:wt.observacoes||null};if(wt.doses_selecionadas&&wt.doses_selecionadas.length>0)try{rt.doses_selecionadas=wt.doses_selecionadas}catch(lt){console.warn("Campo doses_selecionadas no disponvel no banco:",lt)}let ve;const{data:qe,error:Fe}=await z.from("lotes_fiv").insert([rt]).select().single();if(Fe)if((Re=Fe.message)!=null&&Re.includes("doses_selecionadas")||Fe.code==="42703"){console.warn("Campo doses_selecionadas no existe no banco, criando lote sem ele"),delete rt.doses_selecionadas;const{data:lt,error:dt}=await z.from("lotes_fiv").insert([rt]).select().single();if(dt)throw console.error("Erro detalhado ao criar lote:",{message:dt.message,details:dt.details,hint:dt.hint,code:dt.code}),dt;ve=lt}else throw console.error("Erro detalhado ao criar lote:",{message:Fe.message,details:Fe.details,hint:Fe.hint,code:Fe.code}),Fe;else ve=qe;const jt=(Le=We.fazendas_destino_nomes)==null?void 0:Le.map(lt=>{const dt=h.find(ba=>ba.nome===lt);return dt==null?void 0:dt.id}).filter(lt=>!!lt);if(jt&&jt.length>0){const{error:lt}=await z.from("lote_fiv_fazendas_destino").insert(jt.map(dt=>({lote_fiv_id:ve.id,fazenda_id:dt})));if(lt)throw lt}try{await z.from("pacotes_aspiracao").update({usado_em_lote_fiv:!0}).eq("id",wt.pacote_aspiracao_id)}catch(lt){console.warn("Campo usado_em_lote_fiv no existe no banco:",lt)}a({title:"Lote FIV criado",description:"Lote FIV criado com sucesso. Agora voc pode adicionar acasalamentos."}),v(!1),ka({pacote_aspiracao_id:"",observacoes:"",doses_selecionadas:[]}),Ct(null),c([]),b([]),t(`/lotes-fiv/${ve.id}`)}catch(Qe){const Ye=Qe instanceof Error?Qe.message:"Erro desconhecido";a({title:"Erro ao criar lote",description:Ye.includes("RLS")||Ye.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":Ye,variant:"destructive"})}finally{F(!1)}};if(y&&!j)return r.jsx(Pt,{});if(j&&g){const fe=ve=>ve===0?-1:ve>9?8:ve-1,Re=ve=>({[-1]:"Aspirao",0:"Fecundao",1:"Zigoto",2:"2 Clulas",3:"4 Clulas",4:"8 Clulas",5:"Mrula",6:"Blastocisto",7:"Blastocisto Expandido",8:"Blastocisto Expandido"})[ve]||`D${ve}`;let Le=pr(ie||j.pacote_data||null);if(!Le){const ve=pr(j.data_abertura);if(ve){const[qe,Fe,jt]=ve.split("-").map(Number),lt=new Date(qe,Fe-1,jt);lt.setDate(lt.getDate()-1);const dt=lt.getFullYear(),ba=String(lt.getMonth()+1).padStart(2,"0"),Jt=String(lt.getDate()).padStart(2,"0");Le=`${dt}-${ba}-${Jt}`}}if(!Le)return r.jsx("div",{children:"Erro: Data de aspirao no encontrada"});const Qe=Bc(),Ye=Math.max(0,Pm(Qe,Le)),$t=TM(Le,8),$e=zy($t),rt=OM($t);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{E(!1),S(null),t("/lotes-fiv")},children:r.jsx(us,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Detalhes do Lote FIV"}),r.jsxs("div",{className:"text-slate-600 mt-1 flex items-center gap-2",children:[r.jsxs("span",{children:["Data de fecundao (D0): ",Lt(j.data_abertura)," |",Le&&` Data aspirao (D-1): ${zy(Le)} |`,(()=>{const ve=fe(Ye);return ve===-1?` D-1 - ${Re(ve)} |`:` D${ve} - ${Re(ve)} |`})()," ","Status:"]}),r.jsx(et,{variant:j.status==="FECHADO"?"default":"secondary",children:j.status})]})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Informaes do Lote"})}),r.jsxs(ke,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(ae,{children:"Dia Atual"}),r.jsx("p",{className:"text-2xl font-bold",children:(()=>{const ve=fe(Ye);return ve===-1?r.jsxs(r.Fragment,{children:["D-1 ",r.jsxs("span",{className:"text-lg font-normal text-slate-600",children:["- ",Re(ve)]})]}):r.jsxs(r.Fragment,{children:["D",ve," ",r.jsxs("span",{className:"text-lg font-normal text-slate-600",children:["- ",Re(ve)]})]})})()})]}),r.jsxs("div",{children:[r.jsx(ae,{children:"Data da TE"}),Ye<7?r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:$e}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:rt})]}):Ye===7?r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:$e}),r.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[rt," - Perodo de classificao (hoje)"]})]}):Ye===8?r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:$e}),r.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[rt," - Perodo de classificao (D7 foi ontem, hoje  D8)"]})]}):r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:$e}),r.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[rt," - Prazo encerrado"]})]})]})]}),r.jsxs("div",{className:"border-t pt-4 space-y-3",children:[r.jsxs("div",{children:[r.jsx(ae,{className:"text-slate-500",children:"Fazenda Origem da Aspirao"}),r.jsx("p",{className:"font-medium",children:G||"-"})]}),r.jsxs("div",{children:[r.jsx(ae,{className:"text-slate-500",children:"Fazendas Destino"}),Y.length>0?r.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:Y.map((ve,qe)=>r.jsx(et,{variant:"outline",className:"font-medium",children:ve},qe))}):r.jsx("p",{className:"font-medium text-slate-400",children:"-"})]})]}),j.status==="ABERTO"&&Ye===7&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-blue-800 font-medium",children:[" Este lote est no D6 (",Re(6),"). Voc pode preencher a quantidade de embries (prvia) e gerar um relatrio."]}),r.jsxs(re,{variant:"outline",size:"sm",onClick:Ge,children:[r.jsx(qc,{className:"w-4 h-4 mr-2"}),"Gerar Relatrio de Prvia"]})]})}),(j.status==="ABERTO"&&(Ye===8||Ye===9)||j.status==="FECHADO"&&Ye===9)&&r.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-orange-800 font-medium",children:[" Este lote est no ",Ye===8?"D7":"D8"," (",Re(Ye===8?7:8),"). ",Ye===8?"Informe a quantidade de embries para cada acasalamento e despache os embries.":"Perodo de emergncia (D8). Voc pode adicionar novos acasalamentos e despachar os embries imediatamente."]}),r.jsxs(re,{variant:"default",size:"sm",onClick:Se,disabled:T,className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ex,{className:"w-4 h-4 mr-2"}),T?"Despachando...":"Despachar Todos os Embries"]})]})}),j.status==="ABERTO"&&Ye>9&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-red-800 font-medium",children:" Este lote passou do D8. D8  o ltimo dia. Acima de D8 no existe mais lote FIV. O lote ser fechado automaticamente e no aparecer mais na lista."})})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Acasalamentos"})}),r.jsxs(ke,{children:[N.length===0?r.jsx("div",{className:"text-center text-slate-500 py-8",children:"Nenhum acasalamento cadastrado"}):(()=>{const ve=new Map;N.forEach(Fe=>{const jt=Fe.doadora_nome||Fe.doadora_registro||"Desconhecida";ve.has(jt)||ve.set(jt,[]),ve.get(jt).push(Fe)});const qe=Array.from(ve.entries());return r.jsx("div",{className:"space-y-6",children:qe.map(([Fe,jt])=>{const lt=jt[0],dt=lt.viaveis??0,ba=lt.doadora_nome||lt.doadora_registro||"Doadora desconhecida";return r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"bg-green-100 border border-green-200 rounded-md px-4 py-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-semibold text-slate-900",children:ba}),r.jsxs("span",{className:"text-sm text-slate-700",children:["Total de ocitos: ",dt]})]})}),r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"DOSE DE SMEN (TOURO)"}),r.jsx(X,{className:"text-center",children:"QTD. FRACIONADA (DOSES)"}),r.jsx(X,{className:"text-center",children:"OCITOS USADOS"}),(j.status==="ABERTO"&&(Ye===7||Ye===8||Ye===9)||j.status==="FECHADO")&&r.jsxs(r.Fragment,{children:[r.jsx(X,{className:"text-center",children:"QTD. EMBRIES"}),r.jsx(X,{className:"text-center",children:"TOTAL PRODUZIDOS"})]})]})}),r.jsx(Tt,{children:jt.map(Jt=>r.jsxs(Oe,{children:[r.jsx(W,{children:Jt.dose_nome||"-"}),r.jsx(W,{className:"text-center",children:Jt.quantidade_fracionada??"-"}),r.jsx(W,{className:"text-center",children:Jt.quantidade_oocitos!==void 0&&Jt.quantidade_oocitos!==null?`${Jt.quantidade_oocitos} de ${dt}`:"-"}),(j.status==="ABERTO"&&(Ye===7||Ye===8||Ye===9)||j.status==="FECHADO")&&r.jsxs(r.Fragment,{children:[r.jsx(W,{className:"text-center",children:j.status==="ABERTO"&&(Ye===7||Ye===8||Ye===9)||j.status==="FECHADO"&&Ye===9?r.jsx("div",{className:"flex justify-center",children:r.jsx(Ee,{type:"number",min:"0",value:U[Jt.id]??Jt.quantidade_embrioes??"",onChange:Et=>Z({...U,[Jt.id]:Et.target.value}),className:"w-20 text-center",placeholder:"0"})}):r.jsx("span",{className:"font-medium",children:Jt.quantidade_embrioes??"-"})}),r.jsx(W,{className:"text-center font-semibold text-green-600",children:Jt.total_embrioes_produzidos??0})]})]},Jt.id))})]})]},Fe)})})})(),(j.status==="ABERTO"&&Ye<=9||j.status==="FECHADO"&&Ye===9)&&$.length>0&&r.jsx("div",{className:"mt-4 flex justify-end",children:r.jsxs(da,{open:ce,onOpenChange:ve=>{k(ve),ve||(mt({aspiracao_doadora_id:"",dose_semen_id:"",quantidade_fracionada:"1.0",quantidade_oocitos:"",observacoes:""}),V(""))},children:[r.jsx(ln,{asChild:!0,children:r.jsxs(re,{children:[r.jsx(ar,{className:"w-4 h-4 mr-2"}),"Adicionar Acasalamento"]})}),r.jsxs(sa,{children:[r.jsxs(ra,{children:[r.jsx(na,{children:"Adicionar Acasalamento"}),r.jsx(ua,{children:"Selecione uma doadora do pacote e uma dose de smen. Voc pode adicionar mltiplos acasalamentos para a mesma doadora."})]}),r.jsxs("form",{onSubmit:Mt,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"aspiracao_doadora_id",children:"Doadora *"}),r.jsxs(_t,{value:Je.aspiracao_doadora_id,onValueChange:async ve=>{if($.find(qe=>qe.id===ve),mt({...Je,aspiracao_doadora_id:ve}),ve)try{const{data:qe,error:Fe}=await z.from("aspiracoes_doadoras").select("recomendacao_touro").eq("id",ve).single();Fe?(console.error("Erro ao carregar recomendao:",Fe),V("")):V((qe==null?void 0:qe.recomendacao_touro)||"")}catch(qe){console.error("Erro ao carregar recomendao:",qe),V("")}else V("")},children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione uma doadora"})}),r.jsx(gt,{children:$.map(ve=>{const qe=m.find(ba=>ba.id===ve.doadora_id),Fe=ve.oocitos_disponiveis??0,jt=ve.viaveis??0,lt=jt-Fe,dt=qe?qe.nome&&qe.registro?`${qe.nome} (${qe.registro})`:qe.nome||qe.registro||`Doadora ${ve.doadora_id}`:`Doadora ${ve.doadora_id}`;return r.jsx(Ie,{value:ve.id,children:`${dt} - ${Fe} ocitos disponveis (${jt} total, ${lt} usados)`},ve.id)})})]}),Je.aspiracao_doadora_id&&(()=>{const ve=$.find(lt=>lt.id===Je.aspiracao_doadora_id),qe=(ve==null?void 0:ve.oocitos_disponiveis)??0,Fe=(ve==null?void 0:ve.viaveis)??0,jt=Fe-qe;return r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-sm text-slate-600",children:[r.jsx("strong",{children:"Ocitos disponveis:"})," ",qe," (Total: ",Fe,", J usados: ",jt,")"]}),de&&r.jsxs("div",{className:"mt-2 bg-amber-50 border border-amber-200 rounded-lg p-3",children:[r.jsx("p",{className:"text-sm font-medium text-amber-800 mb-1",children:" Recomendao de Acasalamento:"}),r.jsx("p",{className:"text-sm text-amber-700",children:de})]})]})})()]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"dose_semen_id",children:"Dose de Smen *"}),r.jsxs(_t,{value:Je.dose_semen_id,onValueChange:ve=>{mt({...Je,dose_semen_id:ve})},children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione uma dose de smen"})}),r.jsx(gt,{children:L.map(ve=>{const qe=Ze.find(Fe=>Fe.id===ve.cliente_id);return r.jsxs(Ie,{value:ve.id,children:[ve.nome," ",qe?`(${qe.nome})`:""]},ve.id)})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"quantidade_fracionada",children:"Quantidade Fracionada *"}),r.jsx(Ee,{id:"quantidade_fracionada",type:"number",step:"0.1",min:"0.1",value:Je.quantidade_fracionada,onChange:ve=>{mt({...Je,quantidade_fracionada:ve.target.value})},placeholder:"1.0",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"quantidade_oocitos",children:"Ocitos"}),r.jsx(Ee,{id:"quantidade_oocitos",type:"number",min:"0",value:Je.quantidade_oocitos,onChange:ve=>{mt({...Je,quantidade_oocitos:ve.target.value})},placeholder:"0"})]})]}),Je.aspiracao_doadora_id&&(()=>{const ve=$.find(ba=>ba.id===Je.aspiracao_doadora_id),qe=(ve==null?void 0:ve.oocitos_disponiveis)??0,Fe=(ve==null?void 0:ve.viaveis)??0,jt=Fe-qe,lt=parseInt(Je.quantidade_oocitos)||0,dt=qe-lt;return r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Total de ocitos viveis:"})," ",Fe]}),r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Ocitos j usados em acasalamentos anteriores:"})," ",jt]}),r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Ocitos disponveis:"})," ",qe]}),r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Ocitos sendo distribudos agora:"})," ",lt]}),r.jsxs("p",{className:`text-sm font-medium ${dt<0?"text-red-600":dt===0?"text-green-600":"text-blue-800"}`,children:[r.jsx("strong",{children:"Ocitos restantes aps esta distribuio:"})," ",dt]})]})})(),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Wa,{id:"observacoes",value:Je.observacoes,onChange:ve=>mt({...Je,observacoes:ve.target.value}),placeholder:"Observaes sobre este(s) acasalamento(s)",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(re,{type:"button",variant:"outline",onClick:()=>{k(!1),mt({aspiracao_doadora_id:"",dose_semen_id:"",quantidade_fracionada:"1.0",quantidade_oocitos:"",observacoes:""})},children:"Cancelar"}),r.jsx(re,{type:"submit",disabled:T,children:T?"Adicionando...":"Adicionar"})]})]})]})]})}),w.length>0&&r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Histrico de Despachos"}),r.jsx("div",{className:"space-y-4",children:w.map(ve=>r.jsxs(Me,{className:"border-l-4 border-green-500",children:[r.jsx(ze,{children:r.jsxs(Pe,{className:"text-base",children:["Despacho em ",Lt(ve.data_despacho)]})}),r.jsx(ke,{children:r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Doadora"}),r.jsx(X,{children:"Dose"}),r.jsx(X,{className:"text-center",children:"Quantidade de Embries"})]})}),r.jsx(Tt,{children:ve.acasalamentos.length===0?r.jsx(Oe,{children:r.jsx(W,{colSpan:3,className:"text-center text-slate-500",children:"Nenhum acasalamento registrado"})}):ve.acasalamentos.map((qe,Fe)=>r.jsxs(Oe,{children:[r.jsx(W,{children:qe.doadora||"-"}),r.jsx(W,{children:qe.dose||"-"}),r.jsx(W,{className:"text-center font-semibold",children:qe.quantidade})]},Fe))})]})})]},ve.id))})]})]})]}),r.jsx(da,{open:q,onOpenChange:I,children:r.jsxs(sa,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(ra,{children:[r.jsx(na,{children:"Relatrio de Prvia de Produo - D6"}),r.jsx(ua,{children:"Relatrio somente leitura com as quantidades de embries preenchidas (prvia)"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Lote FIV:"})," ",j.id.slice(0,8),"..."]}),r.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[r.jsx("strong",{children:"Data da Aspirao:"})," ",Lt(ie)]}),r.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[r.jsx("strong",{children:"Fazenda Origem:"})," ",G]}),r.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[r.jsx("strong",{children:"Fazendas Destino:"})," ",Y.join(", ")]})]}),r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Doadora"}),r.jsx(X,{children:"Dose de Smen"}),r.jsx(X,{children:"Quantidade Fracionada"}),r.jsx(X,{children:"Ocitos Viveis"}),r.jsx(X,{children:"Ocitos Usados"}),r.jsx(X,{children:"Quantidade de Embries (Prvia)"})]})}),r.jsx(Tt,{children:N.length===0?r.jsx(Oe,{children:r.jsx(W,{colSpan:6,className:"text-center text-slate-500",children:"Nenhum acasalamento cadastrado"})}):N.map(ve=>{var Fe;const qe=parseInt(U[ve.id]||((Fe=ve.quantidade_embrioes)==null?void 0:Fe.toString())||"0");return r.jsxs(Oe,{children:[r.jsx(W,{className:"font-medium",children:ve.doadora_nome||ve.doadora_registro||"Doadora desconhecida"}),r.jsx(W,{children:ve.dose_nome}),r.jsx(W,{children:ve.quantidade_fracionada}),r.jsx(W,{children:ve.viaveis??"-"}),r.jsx(W,{children:ve.quantidade_oocitos??"-"}),r.jsx(W,{className:"font-semibold",children:qe})]},ve.id)})})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[r.jsx(re,{variant:"outline",onClick:()=>I(!1),children:"Fechar"}),r.jsx(re,{onClick:()=>{window.print()},children:"Imprimir"})]})]})]})})]})}return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Lotes FIV"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar lotes de fecundao in vitro"})]}),r.jsxs(da,{open:x,onOpenChange:v,children:[r.jsx(ln,{asChild:!0,children:r.jsxs(re,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ar,{className:"w-4 h-4 mr-2"}),"Novo Lote"]})}),r.jsxs(sa,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(ra,{children:[r.jsx(na,{children:"Criar Novo Lote FIV"}),r.jsx(ua,{children:"Selecione um pacote de aspirao FINALIZADO para criar o lote"})]}),r.jsxs("form",{onSubmit:st,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"pacote_aspiracao_id",children:"Pacote de Aspirao *"}),o.length===0?r.jsxs("div",{className:"border rounded-lg p-4 bg-yellow-50 border-yellow-200",children:[r.jsx("p",{className:"text-sm text-yellow-800 font-medium mb-2",children:"Nenhum pacote disponvel"}),r.jsxs("p",{className:"text-sm text-yellow-700",children:["Verifique se o pacote de aspirao est com status ",r.jsx("strong",{children:"FINALIZADO"})," e ainda no foi usado para criar um lote FIV."]})]}):r.jsxs(_t,{value:wt.pacote_aspiracao_id,onValueChange:at,children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione o pacote"})}),r.jsx(gt,{children:o.map(fe=>r.jsxs(Ie,{value:fe.id,children:[Lt(fe.data_aspiracao)," - ",fe.fazenda_nome," (",fe.quantidade_doadoras," doadoras)"]},fe.id))})]}),We&&r.jsxs("div",{className:"text-sm text-slate-600 space-y-1 mt-2 p-3 bg-slate-50 rounded-lg",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Data do Pacote:"})," ",Lt(We.data_aspiracao)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Data de Fecundao do Lote:"})," ",(()=>{const fe=new Date(We.data_aspiracao);return fe.setDate(fe.getDate()+1),Lt(fe.toISOString().split("T")[0])})()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Fazendas Destino:"})," ",((Ft=We.fazendas_destino_nomes)==null?void 0:Ft.join(", "))||"Nenhuma"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Quantidade de Doadoras:"})," ",We.quantidade_doadoras||0]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{children:"Doses de Smen Disponveis no Lote *"}),r.jsx("div",{className:"border rounded-lg p-4 max-h-60 overflow-y-auto",children:d.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"Carregando doses..."}):r.jsx("div",{className:"space-y-2",children:d.map(fe=>{const Re=Ze.find(Qe=>Qe.id===fe.cliente_id),Le=wt.doses_selecionadas.includes(fe.id);return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:`dose-${fe.id}`,checked:Le,onChange:Qe=>{Qe.target.checked?ka({...wt,doses_selecionadas:[...wt.doses_selecionadas,fe.id]}):ka({...wt,doses_selecionadas:wt.doses_selecionadas.filter(Ye=>Ye!==fe.id)})},className:"rounded"}),r.jsxs("label",{htmlFor:`dose-${fe.id}`,className:"text-sm cursor-pointer flex-1",children:[r.jsx("span",{className:"font-medium",children:fe.nome}),Re&&r.jsxs("span",{className:"text-slate-500 ml-2",children:["(",Re.nome,")"]})]})]},fe.id)})})}),r.jsx("p",{className:"text-xs text-slate-500",children:"Selecione as doses de smen que estaro disponveis para uso neste lote"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Wa,{id:"observacoes",value:wt.observacoes,onChange:fe=>ka({...wt,observacoes:fe.target.value}),placeholder:"Observaes sobre o lote",rows:3})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(re,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:T,children:T?"Criando...":"Criar Lote"}),r.jsx(re,{type:"button",variant:"outline",onClick:()=>{v(!1),ka({pacote_aspiracao_id:"",observacoes:"",doses_selecionadas:[]}),Ct(null),c([]),b([])},disabled:T,children:"Cancelar"})]})]})]})]})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Lista de Lotes FIV"})}),r.jsxs(ke,{children:[r.jsxs("div",{className:"flex gap-4 mb-6 flex-wrap",children:[r.jsxs("div",{className:"flex-1 min-w-[250px] relative fazenda-busca-container",children:[r.jsx(ae,{htmlFor:"filtro-fazenda-aspirao",children:"Filtrar por Fazenda da Aspirao"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ee,{id:"filtro-fazenda-aspirao",placeholder:"Digite para buscar fazenda...",value:De,onChange:fe=>{he(fe.target.value),me(!0),fe.target.value||Ce("")},onFocus:()=>me(!0)}),pe&&r.jsx(re,{variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-7 w-7 p-0",onClick:()=>{Ce(""),he(""),me(!1)},children:r.jsx(sr,{className:"h-4 w-4"})}),Ne&&Ke.length>0&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg max-h-60 overflow-auto",children:Ke.map(fe=>r.jsx("div",{className:"px-4 py-2 hover:bg-slate-100 cursor-pointer",onClick:()=>{Ce(fe.id),he(fe.nome),me(!1)},children:fe.nome},fe.id))}),Ne&&De&&Ke.length===0&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg p-4 text-sm text-slate-500",children:"Nenhuma fazenda encontrada"})]})]}),r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx(ae,{htmlFor:"filtro-dia-cultivo",children:"Filtrar por Dia do Cultivo"}),r.jsxs(_t,{value:P||void 0,onValueChange:fe=>ee(fe||""),children:[r.jsx(pt,{id:"filtro-dia-cultivo",children:r.jsx(bt,{placeholder:"Todos os dias"})}),r.jsx(gt,{children:[0,1,2,3,4,5,6,7,8].map(fe=>r.jsxs(Ie,{value:fe.toString(),children:["D",fe," - ",_e(fe)]},fe))})]})]}),(pe||P)&&r.jsx("div",{className:"flex items-end",children:r.jsx(re,{variant:"outline",onClick:()=>{Ce(""),he(""),ee(""),me(!1)},children:"Limpar Filtros"})})]}),r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Aspirao"}),r.jsx(X,{children:"Fazendas Destino"}),r.jsx(X,{children:"Dia do Cultivo"}),r.jsx(X,{children:"Acasalamentos"}),r.jsx(X,{className:"text-right",children:"Aes"})]})}),r.jsx(Tt,{children:ue.length===0?r.jsx(Oe,{children:r.jsx(W,{colSpan:5,className:"text-center text-slate-500",children:s.length===0?"Nenhum lote cadastrado":"Nenhum lote encontrado com os filtros selecionados"})}):ue.map(fe=>r.jsxs(Oe,{children:[r.jsxs(W,{children:[fe.pacote_data&&Lt(fe.pacote_data)," - ",fe.pacote_nome]}),r.jsx(W,{children:r.jsx("div",{className:"flex flex-wrap gap-1",children:fe.fazendas_destino_nomes&&fe.fazendas_destino_nomes.length>0?fe.fazendas_destino_nomes.map((Re,Le)=>r.jsx(et,{variant:"outline",className:"text-xs",children:Re},Le)):r.jsx("span",{className:"text-slate-400",children:"-"})})}),r.jsx(W,{children:fe.dia_atual!==void 0?r.jsx(et,{variant:"outline",className:`font-semibold ${je(fe.dia_atual===0?-1:fe.dia_atual>9?8:fe.dia_atual-1)}`,children:(()=>{const Re=fe.dia_atual===0?-1:fe.dia_atual>9?8:fe.dia_atual-1;return Re===-1?`D-1 - ${_e(Re)}`:`D${Re} - ${_e(Re)}`})()}):r.jsx("span",{className:"text-slate-400",children:"-"})}),r.jsx(W,{children:fe.quantidade_acasalamentos??0}),r.jsx(W,{className:"text-right",children:r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>t(`/lotes-fiv/${fe.id}`),children:r.jsx(Xv,{className:"w-4 h-4"})})})]},fe.id))})]})]})]})]})}function GU(){const e=$a(),[t,a]=u.useState([]),[s,n]=u.useState([]),[o,i]=u.useState([]),[l,c]=u.useState(""),[d,f]=u.useState(!1),[h,p]=u.useState(new Set),[m,b]=u.useState(new Set),[y,_]=u.useState(!1),[x,v]=u.useState(!1),[g,E]=u.useState(!1),[j,S]=u.useState(!1),[N,R]=u.useState(!1),[T,F]=u.useState(!1),[U,Z]=u.useState(null),[ce,k]=u.useState(null),[M,A]=u.useState(null),[q,I]=u.useState([]),[w,C]=u.useState(!1),{toast:$}=fa(),[O,L]=u.useState({data_congelamento:new Date().toISOString().split("T")[0],localizacao_atual:""}),[H,G]=u.useState({classificacao:""}),[te,Y]=u.useState({data_descarte:new Date().toISOString().split("T")[0],observacoes:""});u.useEffect(()=>{be()},[]),u.useEffect(()=>{V()},[l]);const be=async()=>{try{const{data:P,error:ee}=await z.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(ee)throw ee;i(P||[])}catch(P){console.error("Erro ao carregar fazendas:",P)}},de=async(P,ee,ue,K,ne,D)=>{try{const{error:Q}=await z.from("historico_embrioes").insert([{embriao_id:P,status_anterior:ee,status_novo:ue,tipo_operacao:K,fazenda_id:ne||null,observacoes:D||null,data_mudanca:new Date().toISOString()}]);Q&&console.error("Erro ao registrar histrico:",Q)}catch(Q){console.error("Erro ao registrar histrico:",Q)}},V=async()=>{try{f(!0);const{data:P,error:ee}=await z.from("embrioes").select("*").in("status_atual",["FRESCO","CONGELADO"]).order("created_at",{ascending:!1});if(ee)throw ee;if(!P||P.length===0){a([]),n([]),f(!1);return}const ue=[...new Set(P.filter(Se=>Se.lote_fiv_acasalamento_id).map(Se=>Se.lote_fiv_acasalamento_id))];if(ue.length===0){a(P),n([]),f(!1);return}const{data:K,error:ne}=await z.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",ue);if(ne)throw ne;const D=[...new Set((K==null?void 0:K.map(Se=>Se.aspiracao_doadora_id))||[])],{data:Q,error:J}=await z.from("aspiracoes_doadoras").select("id, doadora_id, pacote_aspiracao_id").in("id",D);if(J)throw J;const oe=[...new Set((Q==null?void 0:Q.map(Se=>Se.doadora_id))||[])],{data:ge,error:Ne}=await z.from("doadoras").select("id, registro").in("id",oe);if(Ne)throw Ne;const me=[...new Set((K==null?void 0:K.map(Se=>Se.dose_semen_id))||[])],{data:_e,error:je}=await z.from("doses_semen").select("id, nome").in("id",me);if(je)throw je;const Ze=[...new Set(P.filter(Se=>Se.lote_fiv_id).map(Se=>Se.lote_fiv_id))];let it=new Map,Je=new Map,mt=new Map;if(Ze.length>0){const{data:Se,error:at}=await z.from("lotes_fiv").select("id, pacote_aspiracao_id").in("id",Ze);if(!at&&Se){Se.forEach(st=>{st.pacote_aspiracao_id&&Je.set(st.id,st.pacote_aspiracao_id)});const Mt=[...new Set(Se.map(st=>st.pacote_aspiracao_id).filter(Boolean))];if(Mt.length>0){const{data:st,error:Ft}=await z.from("pacotes_aspiracao").select("id, data_aspiracao, fazenda_id, fazenda_destino_id, horario_inicio, veterinario_responsavel, total_oocitos").in("id",Mt);if(!Ft&&st){const[fe,Re]=await Promise.all([z.from("pacotes_aspiracao_fazendas_destino").select("pacote_aspiracao_id, fazenda_destino_id").in("pacote_aspiracao_id",Mt),(async()=>{const $e=new Set;return st.forEach(rt=>{rt.fazenda_id&&$e.add(rt.fazenda_id),rt.fazenda_destino_id&&$e.add(rt.fazenda_destino_id)}),$e.size>0?z.from("fazendas").select("id, nome").in("id",Array.from($e)):{data:null,error:null}})()]),Le=fe.data,Qe=Re.data,Ye=new Map((Qe==null?void 0:Qe.map($e=>[$e.id,$e.nome]))||[]),$t=new Map;Q==null||Q.forEach($e=>{$e.pacote_aspiracao_id&&$t.set($e.pacote_aspiracao_id,($t.get($e.pacote_aspiracao_id)||0)+1)}),Le&&Le.forEach($e=>{const rt=mt.get($e.pacote_aspiracao_id)||[];rt.includes($e.fazenda_destino_id)||rt.push($e.fazenda_destino_id),mt.set($e.pacote_aspiracao_id,rt)}),st.forEach($e=>{if($e.fazenda_destino_id){const rt=mt.get($e.id)||[];rt.includes($e.fazenda_destino_id)||rt.push($e.fazenda_destino_id),mt.set($e.id,rt)}it.set($e.id,{id:$e.id,data_aspiracao:$e.data_aspiracao,fazenda_nome:Ye.get($e.fazenda_id),quantidade_doadoras:$t.get($e.id)||0,horario_inicio:$e.horario_inicio,veterinario_responsavel:$e.veterinario_responsavel,total_oocitos:$e.total_oocitos})})}}}}const wt=new Set;mt.forEach(Se=>{Se.forEach(at=>wt.add(at))}),P.forEach(Se=>{Se.fazenda_destino_id&&wt.add(Se.fazenda_destino_id)});let ka=new Map;if(wt.size>0){const{data:Se,error:at}=await z.from("fazendas").select("id, nome").in("id",Array.from(wt));!at&&Se&&(ka=new Map(Se.map(Mt=>[Mt.id,Mt.nome])))}const We=new Map((Q==null?void 0:Q.map(Se=>[Se.id,Se]))||[]),Ct=new Map((ge==null?void 0:ge.map(Se=>[Se.id,Se]))||[]),Ke=new Map((_e==null?void 0:_e.map(Se=>[Se.id,Se]))||[]),Rt=new Map((K==null?void 0:K.map(Se=>[Se.id,Se]))||[]),Gt=P.map(Se=>{const at=Se.lote_fiv_acasalamento_id?Rt.get(Se.lote_fiv_acasalamento_id):void 0,Mt=at?We.get(at.aspiracao_doadora_id):void 0,st=Mt?Ct.get(Mt.doadora_id):void 0,Ft=at?Ke.get(at.dose_semen_id):void 0,fe=Se.lote_fiv_id?Je.get(Se.lote_fiv_id):void 0,Re=fe?it.get(fe):void 0;return{...Se,doadora_registro:st==null?void 0:st.registro,touro_nome:Ft==null?void 0:Ft.nome,fazenda_destino_nome:Se.fazenda_destino_id?ka.get(Se.fazenda_destino_id):void 0,data_aspiracao:Re==null?void 0:Re.data_aspiracao,pacote_aspiracao_id:fe}});a(Gt);const ft=new Map;Gt.forEach(Se=>{if(!Se.lote_fiv_id||!Se.created_at)return;const at=Se.created_at.split("T")[0],Mt=`${Se.lote_fiv_id}-${at}`;let st=ft.get(Mt);if(!st){const Ft=Je.get(Se.lote_fiv_id),fe=Ft?it.get(Ft):void 0,Re=Ft?mt.get(Ft)||[]:[],Le=Re.map(Qe=>ka.get(Qe)).filter(Qe=>!!Qe);st={id:Mt,lote_fiv_id:Se.lote_fiv_id,data_despacho:at,fazendas_destino_ids:Re,fazendas_destino_nomes:Le,pacote_info:fe||{id:Ft||"",data_aspiracao:at,quantidade_doadoras:0},embrioes:[],total:0,frescos:0,congelados:0,sem_classificacao:0,classificados:{BE:0,BN:0,BX:0,BL:0,BI:0}},ft.set(Mt,st)}if(st.embrioes.push(Se),st.total++,Se.status_atual==="FRESCO"&&st.frescos++,Se.status_atual==="CONGELADO"&&st.congelados++,!Se.classificacao)st.sem_classificacao++;else{const Ft=Se.classificacao.toUpperCase();Ft==="BE"?st.classificados.BE++:Ft==="BN"?st.classificados.BN++:Ft==="BX"?st.classificados.BX++:Ft==="BL"?st.classificados.BL++:Ft==="BI"&&st.classificados.BI++}});let Ge=Array.from(ft.values());l&&(Ge=Ge.filter(Se=>Se.fazendas_destino_ids.includes(l))),Ge.sort((Se,at)=>at.data_despacho.localeCompare(Se.data_despacho)),n(Ge)}catch(P){$({title:"Erro ao carregar dados",description:P instanceof Error?P.message:"Erro desconhecido",variant:"destructive"})}finally{f(!1)}},le=P=>{const ee=new Set(h);ee.has(P)?ee.delete(P):ee.add(P),p(ee)},B=P=>{const ee=new Set(m);ee.has(P)?ee.delete(P):ee.add(P),b(ee),_(ee.size>0)},ie=P=>{const ee=new Set(m);P.embrioes.every(K=>ee.has(K.id))?P.embrioes.forEach(K=>ee.delete(K.id)):P.embrioes.forEach(K=>ee.add(K.id)),b(ee),_(ee.size>0)},xe=async P=>{const ee=U;if(!ee||!H.classificacao){$({title:"Erro de validao",description:"Classificao  obrigatria",variant:"destructive"});return}try{F(!0);const ue=ee.status_atual,K=ee.status_atual,{error:ne}=await z.from("embrioes").update({classificacao:H.classificacao,data_classificacao:new Date().toISOString().split("T")[0]}).eq("id",ee.id);if(ne)throw ne;await de(ee.id,ue,K,"CLASSIFICACAO",null,`Classificao: ${H.classificacao}`),$({title:"Embrio classificado",description:"Classificao salva com sucesso"}),E(!1),Z(null),G({classificacao:""}),b(new Set),_(!1),V()}catch(ue){$({title:"Erro ao classificar embrio",description:ue instanceof Error?ue.message:"Erro desconhecido",variant:"destructive"})}finally{F(!1)}},pe=async()=>{if(m.size===0||!H.classificacao){$({title:"Erro de validao",description:"Selecione pelo menos um embrio e uma classificao",variant:"destructive"});return}try{F(!0);const P=Array.from(m),ee=P.map(ue=>t.find(ne=>ne.id===ue)?z.from("embrioes").update({classificacao:H.classificacao,data_classificacao:new Date().toISOString().split("T")[0]}).eq("id",ue):null).filter(Boolean);await Promise.all(ee);for(const ue of P){const K=t.find(ne=>ne.id===ue);K&&await de(K.id,K.status_atual,K.status_atual,"CLASSIFICACAO",null,`Classificao: ${H.classificacao}`)}$({title:"Embries classificados",description:`${P.length} embrio(es) classificados com sucesso`}),E(!1),G({classificacao:""}),b(new Set),_(!1),V()}catch(P){$({title:"Erro ao classificar embries",description:P instanceof Error?P.message:"Erro desconhecido",variant:"destructive"})}finally{F(!1)}},Ce=async()=>{if(m.size===0||!O.localizacao_atual.trim()){$({title:"Erro de validao",description:"Selecione pelo menos um embrio e informe a localizao",variant:"destructive"});return}try{F(!0);const P=Array.from(m),ee=P.map(ue=>z.from("embrioes").update({status_atual:"CONGELADO",data_congelamento:O.data_congelamento,localizacao_atual:O.localizacao_atual}).eq("id",ue));await Promise.all(ee);for(const ue of P){const K=t.find(ne=>ne.id===ue);K&&await de(K.id,K.status_atual,"CONGELADO","CONGELAMENTO",null,`Localizao: ${O.localizacao_atual}`)}$({title:"Embries congelados",description:`${P.length} embrio(es) congelados com sucesso`}),v(!1),L({data_congelamento:new Date().toISOString().split("T")[0],localizacao_atual:""}),b(new Set),_(!1),V()}catch(P){$({title:"Erro ao congelar embries",description:P instanceof Error?P.message:"Erro desconhecido",variant:"destructive"})}finally{F(!1)}},De=async()=>{if(m.size===0){$({title:"Erro de validao",description:"Selecione pelo menos um embrio",variant:"destructive"});return}try{F(!0);const P=Array.from(m),ee=P.map(ue=>z.from("embrioes").update({status_atual:"DESCARTADO",data_descarte:te.data_descarte}).eq("id",ue));await Promise.all(ee);for(const ue of P){const K=t.find(ne=>ne.id===ue);K&&await de(K.id,K.status_atual,"DESCARTADO","DESCARTE",null,te.observacoes||null)}$({title:"Embries descartados",description:`${P.length} embrio(es) descartados com sucesso`}),S(!1),Y({data_descarte:new Date().toISOString().split("T")[0],observacoes:""}),b(new Set),_(!1),V()}catch(P){$({title:"Erro ao descartar embries",description:P instanceof Error?P.message:"Erro desconhecido",variant:"destructive"})}finally{F(!1)}},he=async P=>{try{C(!0);const{data:ee,error:ue}=await z.from("historico_embrioes").select("*").eq("embriao_id",P).order("data_mudanca",{ascending:!1});if(ue)throw ue;I(ee||[])}catch(ee){console.error("Erro ao carregar histrico:",ee),$({title:"Erro ao carregar histrico",description:ee instanceof Error?ee.message:"Erro desconhecido",variant:"destructive"})}finally{C(!1)}};return d?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Estoque de Embries"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar pacotes de embries para transferncia, congelamento ou descarte"})]})}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Pacotes de Embries"})}),r.jsxs(ke,{children:[r.jsxs("div",{className:"mb-4 space-y-2",children:[r.jsx(ae,{htmlFor:"fazenda_destino",children:"Filtrar por Fazenda Destino"}),r.jsxs(_t,{value:l||"all",onValueChange:P=>c(P==="all"?"":P),children:[r.jsx(pt,{className:"w-full md:w-[300px]",children:r.jsx(bt,{placeholder:"Todas as fazendas"})}),r.jsxs(gt,{children:[r.jsx(Ie,{value:"all",children:"Todas as fazendas"}),o.map(P=>r.jsx(Ie,{value:P.id,children:P.nome},P.id))]})]})]}),s.length===0?r.jsx("div",{className:"text-center text-slate-500 py-12",children:"Nenhum pacote de embries encontrado para esta fazenda destino"}):r.jsx("div",{className:"space-y-4",children:s.map(P=>{const ee=h.has(P.id),ue=P.embrioes.every(ne=>m.has(ne.id)),K=P.embrioes.some(ne=>m.has(ne.id));return r.jsxs(Me,{className:"border-l-4 border-l-green-500",children:[r.jsx(ze,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>le(P.id),className:"p-0 h-auto",children:ee?r.jsx(WE,{className:"w-5 h-5 text-slate-600"}):r.jsx(Zv,{className:"w-5 h-5 text-slate-600"})}),r.jsxs(Pe,{className:"text-lg",children:[P.pacote_info.fazenda_nome||"Fazenda no identificada"," "," ",P.fazendas_destino_nomes&&P.fazendas_destino_nomes.length>0?r.jsx("span",{className:"inline-flex flex-wrap gap-1 items-center",children:P.fazendas_destino_nomes.map((ne,D)=>r.jsx(et,{variant:"outline",className:"text-xs",children:ne},D))}):r.jsx("span",{className:"text-slate-400",children:"Sem destino"})]})]}),r.jsxs("div",{className:"mt-2 ml-7 space-y-1 text-sm text-slate-600",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Data Despacho:"})," ",P.data_despacho?Lt(P.data_despacho):"-"]}),P.pacote_info.horario_inicio&&r.jsxs("p",{children:[r.jsx("strong",{children:"Horrio:"})," ",P.pacote_info.horario_inicio]}),P.pacote_info.veterinario_responsavel&&r.jsxs("p",{children:[r.jsx("strong",{children:"Veterinrio:"})," ",P.pacote_info.veterinario_responsavel]})]})]}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:P.total}),r.jsx("div",{className:"text-sm text-slate-600",children:"embries"}),r.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[P.frescos," frescos, ",P.congelados," congelados"]}),r.jsxs("div",{className:"text-xs text-slate-500",children:[P.sem_classificacao," sem classificao"]}),P.classificados.BE>0||P.classificados.BN>0||P.classificados.BX>0||P.classificados.BL>0||P.classificados.BI>0?r.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["BE: ",P.classificados.BE," | BN: ",P.classificados.BN," | BX: ",P.classificados.BX," | BL: ",P.classificados.BL," | BI: ",P.classificados.BI]}):null]})})]})}),ee&&r.jsxs(ke,{children:[r.jsx("div",{className:"mb-4 flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>ie(P),children:[ue?r.jsx(Oy,{className:"w-4 h-4 mr-2"}):r.jsx(Ry,{className:"w-4 h-4 mr-2"}),ue?"Desmarcar Todos":"Selecionar Todos"]}),r.jsx("span",{className:"text-sm text-slate-600",children:K&&`${P.embrioes.filter(ne=>m.has(ne.id)).length} selecionado(s)`})]})}),r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{className:"w-12"}),r.jsx(X,{className:"text-center w-16",children:"N"}),r.jsx(X,{children:"Doadora"}),r.jsx(X,{children:"Touro"}),r.jsx(X,{children:"Classificao"}),r.jsx(X,{children:"Status"}),r.jsx(X,{children:"Localizao"}),r.jsx(X,{className:"text-right",children:"Aes"})]})}),r.jsx(Tt,{children:(()=>{const ne=Q=>Q&&{BE:1,BN:2,BX:3,BL:4,BI:5}[Q.toUpperCase()]||999;return[...P.embrioes].sort((Q,J)=>{const oe=Q.doadora_registro||"",ge=J.doadora_registro||"";if(oe!==ge)return oe.localeCompare(ge);const Ne=ne(Q.classificacao),me=ne(J.classificacao);return Ne-me}).map((Q,J)=>{const oe=m.has(Q.id);return r.jsxs(Oe,{children:[r.jsx(W,{children:r.jsx(re,{variant:"ghost",size:"sm",className:"p-0 h-auto",onClick:()=>B(Q.id),children:oe?r.jsx(Oy,{className:"w-4 h-4 text-green-600"}):r.jsx(Ry,{className:"w-4 h-4 text-slate-400"})})}),r.jsx(W,{className:"text-center font-medium",children:J+1}),r.jsx(W,{children:Q.doadora_registro||"-"}),r.jsx(W,{children:Q.touro_nome||"-"}),r.jsx(W,{children:Q.classificacao?r.jsx(et,{variant:"outline",children:Q.classificacao}):r.jsx("span",{className:"text-slate-400",children:"-"})}),r.jsx(W,{children:r.jsx(cn,{status:Q.status_atual})}),r.jsx(W,{children:Q.localizacao_atual||"-"}),r.jsx(W,{className:"text-right",children:r.jsxs("div",{className:"flex gap-1 justify-end",children:[!Q.classificacao&&Q.status_atual==="FRESCO"&&r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{Z(Q),G({classificacao:""}),E(!0)},title:"Classificar",children:r.jsx(km,{className:"w-4 h-4 text-purple-600"})}),Q.classificacao&&r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{Z(Q),G({classificacao:Q.classificacao||""}),E(!0)},title:"Editar Classificao",children:r.jsx(km,{className:"w-4 h-4 text-purple-600"})}),Q.status_atual==="FRESCO"&&r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{v(!0),b(new Set([Q.id]))},title:"Congelar",children:r.jsx(Ty,{className:"w-4 h-4 text-blue-600"})}),(Q.status_atual==="FRESCO"||Q.status_atual==="CONGELADO")&&r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>e("/transferencia"),title:"Transferir",children:r.jsx(lh,{className:"w-4 h-4 text-green-600"})}),(Q.status_atual==="FRESCO"||Q.status_atual==="CONGELADO")&&r.jsx(re,{variant:"ghost",size:"sm",onClick:()=>{k(Q),Y({data_descarte:new Date().toISOString().split("T")[0],observacoes:""}),S(!0)},title:"Descartar",children:r.jsx(Df,{className:"w-4 h-4 text-red-600"})}),r.jsx(re,{variant:"ghost",size:"sm",onClick:async()=>{A(Q),R(!0),await he(Q.id)},title:"Ver Histrico",children:r.jsx(Kv,{className:"w-4 h-4 text-slate-600"})})]})})]},Q.id)})})()})]})]})]},P.id)})}),y&&r.jsxs("div",{className:"mt-6 p-4 bg-slate-50 border border-slate-200 rounded-lg flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ex,{className:"w-5 h-5 text-slate-600"}),r.jsxs("span",{className:"font-medium text-slate-900",children:[m.size," embrio(es) selecionado(s)"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>{G({classificacao:""}),E(!0)},children:[r.jsx(km,{className:"w-4 h-4 mr-2"}),"Classificar"]}),r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>{L({data_congelamento:new Date().toISOString().split("T")[0],localizacao_atual:""}),v(!0)},children:[r.jsx(Ty,{className:"w-4 h-4 mr-2"}),"Congelar"]}),r.jsxs(re,{variant:"outline",size:"sm",onClick:()=>{Y({data_descarte:new Date().toISOString().split("T")[0],observacoes:""}),S(!0)},children:[r.jsx(Df,{className:"w-4 h-4 mr-2"}),"Descartar"]}),r.jsx(re,{variant:"outline",size:"sm",onClick:()=>{b(new Set),_(!1)},children:"Cancelar"})]})]})]})]}),r.jsx(da,{open:g&&!!U,onOpenChange:P=>{P||(E(!1),Z(null))},children:r.jsxs(sa,{className:"max-w-md",children:[r.jsxs(ra,{children:[r.jsx(na,{children:"Classificar Embrio"}),r.jsxs(ua,{children:["Classificar embrio ",(U==null?void 0:U.identificacao)||"selecionado"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"classificacao",children:"Classificao *"}),r.jsxs(_t,{value:H.classificacao,onValueChange:P=>G({classificacao:P}),children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione a classificao"})}),r.jsxs(gt,{children:[r.jsx(Ie,{value:"BE",children:"BE (Blastocisto Excelente)"}),r.jsx(Ie,{value:"BN",children:"BN (Blastocisto Normal)"}),r.jsx(Ie,{value:"BX",children:"BX (Blastocisto Regular)"}),r.jsx(Ie,{value:"BL",children:"BL (Blastocisto Limitado)"}),r.jsx(Ie,{value:"BI",children:"BI (Blastocisto Irregular)"})]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(re,{onClick:()=>xe(),className:"flex-1 bg-purple-600 hover:bg-purple-700",disabled:T,children:T?"Salvando...":"Salvar Classificao"}),r.jsx(re,{variant:"outline",onClick:()=>{E(!1),Z(null)},disabled:T,children:"Cancelar"})]})]})]})}),r.jsx(da,{open:g&&!U&&m.size>0,onOpenChange:P=>{P||E(!1)},children:r.jsxs(sa,{className:"max-w-md",children:[r.jsxs(ra,{children:[r.jsxs(na,{children:["Classificar ",m.size," Embrio(es)"]}),r.jsx(ua,{children:"Classificar todos os embries selecionados com a mesma classificao"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"classificacao",children:"Classificao *"}),r.jsxs(_t,{value:H.classificacao,onValueChange:P=>G({classificacao:P}),children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione a classificao"})}),r.jsxs(gt,{children:[r.jsx(Ie,{value:"BE",children:"BE (Blastocisto Excelente)"}),r.jsx(Ie,{value:"BN",children:"BN (Blastocisto Normal)"}),r.jsx(Ie,{value:"BX",children:"BX (Blastocisto Regular)"}),r.jsx(Ie,{value:"BL",children:"BL (Blastocisto Limitado)"}),r.jsx(Ie,{value:"BI",children:"BI (Blastocisto Irregular)"})]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(re,{onClick:pe,className:"flex-1 bg-purple-600 hover:bg-purple-700",disabled:T,children:T?"Salvando...":`Classificar ${m.size} Embrio(es)`}),r.jsx(re,{variant:"outline",onClick:()=>{E(!1)},disabled:T,children:"Cancelar"})]})]})]})}),r.jsx(da,{open:x,onOpenChange:v,children:r.jsxs(sa,{className:"max-w-md",children:[r.jsxs(ra,{children:[r.jsxs(na,{children:["Congelar ",m.size," Embrio(es)"]}),r.jsx(ua,{children:"Registrar congelamento dos embries selecionados"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"data_congelamento",children:"Data de Congelamento *"}),r.jsx(Us,{id:"data_congelamento",value:O.data_congelamento,onChange:P=>L({...O,data_congelamento:P||""}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"localizacao_atual",children:"Localizao (Botijo) *"}),r.jsx(Ee,{id:"localizacao_atual",value:O.localizacao_atual,onChange:P=>L({...O,localizacao_atual:P.target.value}),placeholder:"Ex: Botijo 1, Canister A",required:!0})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(re,{onClick:Ce,className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:T,children:T?"Congelando...":`Congelar ${m.size} Embrio(es)`}),r.jsx(re,{variant:"outline",onClick:()=>v(!1),disabled:T,children:"Cancelar"})]})]})]})}),r.jsx(da,{open:j,onOpenChange:S,children:r.jsxs(sa,{className:"max-w-md",children:[r.jsxs(ra,{children:[r.jsxs(na,{children:["Descartar ",m.size," Embrio(es)"]}),r.jsx(ua,{children:"Descartar os embries selecionados"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"data_descarte",children:"Data de Descarte *"}),r.jsx(Us,{id:"data_descarte",value:te.data_descarte,onChange:P=>Y({...te,data_descarte:P||""}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"observacoes",children:"Observaes / Motivo"}),r.jsx(Wa,{id:"observacoes",value:te.observacoes,onChange:P=>Y({...te,observacoes:P.target.value}),placeholder:"Informe o motivo do descarte (opcional)",rows:4})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(re,{onClick:De,className:"flex-1 bg-red-600 hover:bg-red-700",disabled:T,children:T?"Descartando...":`Descartar ${m.size} Embrio(es)`}),r.jsx(re,{variant:"outline",onClick:()=>S(!1),disabled:T,children:"Cancelar"})]})]})]})}),r.jsx(mC,{open:N,onOpenChange:R,children:r.jsxs(Ix,{className:"w-full sm:max-w-2xl",children:[r.jsxs(Lx,{children:[r.jsx(Fx,{children:"Histrico do Embrio"}),r.jsxs($x,{children:["Histrico completo de eventos do embrio"," ",(M==null?void 0:M.identificacao)||(M==null?void 0:M.id.slice(0,8))]})]}),r.jsx("div",{className:"mt-6",children:w?r.jsx(Pt,{}):q.length===0?r.jsx("p",{className:"text-slate-500 text-center py-8",children:"Nenhum histrico encontrado"}):r.jsx("div",{className:"space-y-4",children:q.map(P=>{const ee={CLASSIFICACAO:"Classificao",DESTINACAO:"Destinao",CONGELAMENTO:"Congelamento",DESCARTE:"Descarte",TRANSFERENCIA:"Transferncia"};return r.jsx(Me,{children:r.jsx(ke,{className:"pt-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:ee[P.tipo_operacao]||P.tipo_operacao}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:P.data_mudanca?Lt(P.data_mudanca):"-"}),P.observacoes&&r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:P.observacoes})]}),r.jsx("div",{className:"text-right",children:r.jsx(cn,{status:P.status_novo||""})})]})})},P.id)})})})]})})]})}function YU(){var de;const[e,t]=u.useState([]),[a,s]=u.useState([]),[n,o]=u.useState([]),[i,l]=u.useState([]),[c,d]=u.useState(!0),[f,h]=u.useState(!1),[p,m]=u.useState(!1),[b,y]=u.useState([]),[_,x]=u.useState([]),[v,g]=u.useState(!1),[E,j]=u.useState([]),[S,N]=u.useState(!1),{toast:R}=fa(),[T,F]=u.useState({fazenda_id:"",pacote_id:"",receptora_id:"",protocolo_receptora_id:"",embriao_id:"",data_te:new Date().toISOString().split("T")[0],veterinario_responsavel:"",tecnico_responsavel:"",observacoes:""}),[U,Z]=u.useState({data_te:"",veterinario_responsavel:"",tecnico_responsavel:""});u.useEffect(()=>{ce(),k()},[]),u.useEffect(()=>{if(T.fazenda_id){const V=a.filter(le=>le.fazendas_destino_ids.includes(T.fazenda_id));o(V)}else o([])},[T.fazenda_id,a]),u.useEffect(()=>{T.fazenda_id&&M(T.fazenda_id)},[p]);const ce=async()=>{try{const{data:V,error:le}=await z.from("v_protocolo_receptoras_status").select("receptora_id").eq("fase_ciclo","SINCRONIZADA");if(le)throw le;if(!V||V.length===0){t([]),d(!1);return}const B=[...new Set(V.map(he=>he.receptora_id))],{data:ie,error:xe}=await z.from("vw_receptoras_fazenda_atual").select("fazenda_id_atual").in("receptora_id",B);if(xe)throw xe;if(!ie||ie.length===0){t([]),d(!1);return}const pe=[...new Set(ie.map(he=>he.fazenda_id_atual).filter(Boolean))];if(pe.length===0){t([]),d(!1);return}const{data:Ce,error:De}=await z.from("fazendas").select("id, nome").in("id",pe).order("nome",{ascending:!0});if(De)throw De;t(Ce||[]),d(!1)}catch(V){console.error("Erro ao carregar fazendas:",V),R({title:"Erro ao carregar fazendas",description:V instanceof Error?V.message:"Erro desconhecido",variant:"destructive"}),d(!1)}},k=async()=>{try{const{data:V,error:le}=await z.from("embrioes").select("*").in("status_atual",["FRESCO","CONGELADO"]).order("created_at",{ascending:!1});if(le)throw le;if(!V||V.length===0){s([]);return}const B=[...new Set(V.filter(D=>D.lote_fiv_id).map(D=>D.lote_fiv_id))];let ie=new Map,xe=new Map,pe=new Map,Ce=new Map;const{data:De}=await z.from("fazendas").select("id, nome");if(De&&(Ce=new Map(De.map(D=>[D.id,D.nome]))),B.length>0){const{data:D,error:Q}=await z.from("lotes_fiv").select("id, pacote_aspiracao_id").in("id",B);if(!Q&&D){D.forEach(oe=>{oe.pacote_aspiracao_id&&xe.set(oe.id,oe.pacote_aspiracao_id)});const J=[...new Set(D.map(oe=>oe.pacote_aspiracao_id).filter(Boolean))];if(J.length>0){const{data:oe,error:ge}=await z.from("pacotes_aspiracao").select("*").in("id",J);if(!ge&&oe){const{data:Ne}=await z.from("pacotes_aspiracao_fazendas_destino").select("pacote_aspiracao_id, fazenda_destino_id").in("pacote_aspiracao_id",J);Ne&&Ne.forEach(me=>{const _e=pe.get(me.pacote_aspiracao_id)||[];_e.includes(me.fazenda_destino_id)||_e.push(me.fazenda_destino_id),pe.set(me.pacote_aspiracao_id,_e)}),oe.forEach(me=>{if(me.fazenda_destino_id){const _e=pe.get(me.id)||[];_e.includes(me.fazenda_destino_id)||_e.push(me.fazenda_destino_id),pe.set(me.id,_e)}ie.set(me.id,{id:me.id,data_aspiracao:me.data_aspiracao,fazenda_nome:Ce.get(me.fazenda_id),quantidade_doadoras:0,horario_inicio:me.horario_inicio,veterinario_responsavel:me.veterinario_responsavel,total_oocitos:me.total_oocitos})})}}}}const he=V.map(D=>D.lote_fiv_acasalamento_id).filter(D=>!!D);let P=new Map,ee=new Map,ue=new Map;if(he.length>0){const{data:D}=await z.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",he);if(D){P=new Map(D.map(oe=>[oe.id,oe]));const Q=[...new Set(D.map(oe=>oe.aspiracao_doadora_id).filter(Boolean))],J=[...new Set(D.map(oe=>oe.dose_semen_id).filter(Boolean))];if(Q.length>0){const{data:oe}=await z.from("aspiracoes_doadoras").select("id, doadora_id").in("id",Q);if(oe){const ge=[...new Set(oe.map(Ne=>Ne.doadora_id))];if(ge.length>0){const{data:Ne}=await z.from("doadoras").select("id, registro").in("id",ge);if(Ne){ee=new Map(Ne.map(_e=>[_e.id,_e.registro]));const me=new Map(oe.map(_e=>[_e.id,_e.doadora_id]));D.forEach(_e=>{if(_e.aspiracao_doadora_id){const je=me.get(_e.aspiracao_doadora_id);if(je){const Ze=ee.get(je);Ze&&P.set(_e.id,{..._e,doadora_registro:Ze})}}})}}}}if(J.length>0){const{data:oe}=await z.from("doses_semen").select("id, nome").in("id",J);oe&&(ue=new Map(oe.map(ge=>[ge.id,ge.nome])),D.forEach(ge=>{if(ge.dose_semen_id){const Ne=ue.get(ge.dose_semen_id);if(Ne){const me=P.get(ge.id);P.set(ge.id,{...me,touro_nome:Ne})}}}))}}}const K=new Map;V.forEach(D=>{if(!D.lote_fiv_id||!D.created_at)return;const Q=D.created_at.split("T")[0],J=`${D.lote_fiv_id}-${Q}`;let oe=K.get(J);if(!oe){const _e=xe.get(D.lote_fiv_id),je=_e?ie.get(_e):void 0,Ze=_e?pe.get(_e)||[]:[],it=Ze.map(Je=>Ce.get(Je)).filter(Je=>!!Je);oe={id:J,lote_fiv_id:D.lote_fiv_id,data_despacho:Q,fazendas_destino_ids:Ze,fazendas_destino_nomes:it,pacote_info:je||{id:_e||"",data_aspiracao:Q,quantidade_doadoras:0},embrioes:[],total:0,frescos:0,congelados:0},K.set(J,oe)}const ge=P.get(D.lote_fiv_acasalamento_id||""),Ne=ge==null?void 0:ge.doadora_registro,me=ge==null?void 0:ge.touro_nome;oe.embrioes.push({...D,doadora_registro:Ne,touro_nome:me}),oe.total++,D.status_atual==="FRESCO"&&oe.frescos++,D.status_atual==="CONGELADO"&&oe.congelados++});const ne=Array.from(K.values());ne.sort((D,Q)=>Q.data_despacho.localeCompare(D.data_despacho)),s(ne)}catch(V){console.error("Erro ao carregar pacotes:",V),R({title:"Erro ao carregar pacotes de embries",description:V instanceof Error?V.message:"Erro desconhecido",variant:"destructive"}),s([])}},M=async V=>{try{const{data:le,error:B}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",V);if(B)throw B;const ie=(le==null?void 0:le.map(me=>me.receptora_id))||[];if(ie.length>0){const{data:me}=await z.from("receptoras").select("id, identificacao, nome").in("id",ie).or("identificacao.ilike.%teste duplo%,nome.ilike.%teste duplo%");me&&me.length>0&&console.log(' DEBUG: Receptora "teste duplo" encontrada na fazenda:',me)}if(ie.length===0){l([]);return}const{data:xe,error:pe}=await z.from("v_protocolo_receptoras_status").select("*").eq("fase_ciclo","SINCRONIZADA").in("receptora_id",ie);if(pe)throw pe;if(xe&&xe.length>0){const me=xe.find(_e=>ie.some(je=>je===_e.receptora_id));if(ie.length>0){const{data:_e}=await z.from("receptoras").select("id, identificacao, nome").in("id",ie).or("identificacao.ilike.%teste duplo%,nome.ilike.%teste duplo%");if(_e&&_e.length>0){const je=_e[0].id,Ze=xe.find(it=>it.receptora_id===je);if(Ze)console.log(' DEBUG: Receptora "teste duplo" encontrada na view v_protocolo_receptoras_status:',Ze);else{console.log(' DEBUG: Receptora "teste duplo" NO encontrada na view v_protocolo_receptoras_status com fase_ciclo=SINCRONIZADA');const{data:it}=await z.from("v_protocolo_receptoras_status").select("*").eq("receptora_id",je);it&&it.length>0&&console.log(" DEBUG: Receptora na view sem filtro de fase_ciclo:",it)}}}}if(!xe||xe.length===0){l([]);return}const Ce=Array.from(new Set(xe.map(me=>me.protocolo_id).filter(Boolean))),De=Array.from(new Set(xe.map(me=>me.receptora_id).filter(Boolean)));let he=new Set;if(Ce.length>0&&De.length>0){const{data:me}=await z.from("protocolo_receptoras").select("receptora_id, status, protocolo_id").in("protocolo_id",Ce).in("receptora_id",De);if(me){const{data:_e}=await z.from("receptoras").select("id, identificacao, nome").in("id",De).or("identificacao.ilike.%teste duplo%,nome.ilike.%teste duplo%");if(_e&&_e.length>0){const je=_e[0].id,Ze=me.find(it=>it.receptora_id===je);Ze&&(console.log(' DEBUG: Status da receptora "teste duplo" em protocolo_receptoras:',Ze),Ze.status==="INAPTA"&&console.log(' DEBUG: Receptora "teste duplo" est como INAPTA e ser filtrada!'))}me.filter(je=>je.status==="INAPTA").forEach(je=>he.add(je.receptora_id))}}const P=xe.filter(me=>!he.has(me.receptora_id)),ee=new Map;if(_.length>0){const{data:me}=await z.from("transferencias_embrioes").select("receptora_id").in("id",_).eq("status_te","REALIZADA");me==null||me.forEach(_e=>{const je=ee.get(_e.receptora_id)||0;ee.set(_e.receptora_id,je+1)})}let ue=P,K=null;p?ue=P.filter(me=>(ee.get(me.receptora_id)||0)<2):ue=P.filter(me=>(ee.get(me.receptora_id)||0)===0);const ne=Array.from(new Set(ue.map(me=>me.protocolo_id).filter(Boolean))),D=ue.map(me=>me.receptora_id).filter(Boolean),Q=ue.some(me=>me.protocolo_receptora_id||me.pr_id);let J=[],oe=new Map,ge=new Map;if(Q){ue.forEach(_e=>{const je=_e.protocolo_receptora_id||_e.pr_id;je&&_e.receptora_id&&_e.protocolo_id&&oe.set(`${_e.receptora_id}-${_e.protocolo_id}`,je)});const me=Array.from(oe.values());if(me.length>0){const{data:_e}=await z.from("protocolo_receptoras").select("id, ciclando_classificacao, qualidade_semaforo").in("id",me);_e==null||_e.forEach(je=>{ge.set(je.id,{ciclando_classificacao:je.ciclando_classificacao,qualidade_semaforo:je.qualidade_semaforo})})}}else if(ne.length>0&&D.length>0){const{data:me,error:_e}=await z.from("protocolo_receptoras").select("id, receptora_id, protocolo_id, ciclando_classificacao, qualidade_semaforo").in("protocolo_id",ne).in("receptora_id",D);if(_e)throw console.error("Erro ao buscar protocolo_receptoras:",_e),_e;J=me||[],oe=new Map(J.map(je=>[`${je.receptora_id}-${je.protocolo_id}`,je.id])),J.forEach(je=>{ge.set(je.id,{ciclando_classificacao:je.ciclando_classificacao,qualidade_semaforo:je.qualidade_semaforo})})}const Ne=ue.map(me=>{const _e=ee.get(me.receptora_id)||0,je=oe.get(`${me.receptora_id}-${me.protocolo_id}`)||"",Ze=ge.get(je)||{};return{receptora_id:me.receptora_id,brinco:me.brinco||me.identificacao||"N/A",protocolo_id:me.protocolo_id,protocolo_receptora_id:je,data_te_prevista:me.data_te_prevista,data_limite_te:me.data_limite_te,quantidade_embrioes:_e,ciclando_classificacao:Ze.ciclando_classificacao,qualidade_semaforo:Ze.qualidade_semaforo}});l(Ne)}catch(le){R({title:"Erro ao recarregar receptoras",description:le instanceof Error?le.message:"Erro desconhecido",variant:"destructive"}),l([])}},A=async V=>{F({...T,fazenda_id:V,pacote_id:"",embriao_id:"",receptora_id:"",protocolo_receptora_id:""}),Z({data_te:"",veterinario_responsavel:"",tecnico_responsavel:""}),y([]),x([]);try{const{data:le,error:B}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",V);if(B)throw B;const ie=(le==null?void 0:le.map(J=>J.receptora_id))||[];if(ie.length===0){l([]);return}const{data:xe,error:pe}=await z.from("v_protocolo_receptoras_status").select("*").eq("fase_ciclo","SINCRONIZADA").in("receptora_id",ie);if(pe)throw console.error("Erro ao buscar receptoras sincronizadas (recarregar):",pe),pe;if(!xe||xe.length===0){l([]);return}const Ce=Array.from(new Set(xe.map(J=>J.protocolo_id).filter(Boolean))),De=Array.from(new Set(xe.map(J=>J.receptora_id).filter(Boolean)));let he=new Set;if(Ce.length>0&&De.length>0){const{data:J}=await z.from("protocolo_receptoras").select("receptora_id, status, protocolo_id").in("protocolo_id",Ce).in("receptora_id",De);J&&J.filter(oe=>oe.status==="INAPTA").forEach(oe=>he.add(oe.receptora_id))}const P=xe.filter(J=>!he.has(J.receptora_id)),{data:ee}=await z.from("transferencias_embrioes").select("receptora_id").eq("status_te","REALIZADA").in("receptora_id",ie),ue=new Map;ee==null||ee.forEach(J=>{const oe=ue.get(J.receptora_id)||0;ue.set(J.receptora_id,oe+1)});let K=P;p?K=P.filter(J=>(ue.get(J.receptora_id)||0)<2):K=P.filter(J=>(ue.get(J.receptora_id)||0)===0);const ne=K.map(J=>J.protocolo_receptora_id||J.pr_id).filter(Boolean),D=new Map;if(ne.length>0){const{data:J}=await z.from("protocolo_receptoras").select("id, ciclando_classificacao, qualidade_semaforo").in("id",ne);J==null||J.forEach(oe=>{D.set(oe.id,{ciclando_classificacao:oe.ciclando_classificacao,qualidade_semaforo:oe.qualidade_semaforo})})}const Q=K.map(J=>{const oe=ue.get(J.receptora_id)||0,ge=J.protocolo_receptora_id||J.pr_id||"",Ne=D.get(ge)||{};return{receptora_id:J.receptora_id,brinco:J.brinco||J.identificacao||"N/A",protocolo_id:J.protocolo_id,protocolo_receptora_id:ge,data_te_prevista:J.data_te_prevista,data_limite_te:J.data_limite_te,quantidade_embrioes:oe,ciclando_classificacao:Ne.ciclando_classificacao,qualidade_semaforo:Ne.qualidade_semaforo}});l(Q)}catch(le){R({title:"Erro ao carregar receptoras",description:le instanceof Error?le.message:"Erro desconhecido",variant:"destructive"}),l([]),setReceptorasComTransferencia(new Set)}},q=V=>{F({...T,pacote_id:V,embriao_id:"",receptora_id:"",protocolo_receptora_id:"",data_te:U.data_te||T.data_te,veterinario_responsavel:U.veterinario_responsavel||T.veterinario_responsavel,tecnico_responsavel:U.tecnico_responsavel||T.tecnico_responsavel})},I=async()=>{if(!T.protocolo_receptora_id||!T.receptora_id){R({title:"Erro",description:"Nenhuma receptora selecionada para descartar",variant:"destructive"});return}const V=i.find(B=>B.receptora_id===T.receptora_id),le=(V==null?void 0:V.brinco)||"Receptora";if(confirm(`Tem certeza que deseja descartar a receptora ${le}? Ela no receber embrio e no poder ser selecionada novamente neste protocolo.`))try{h(!0);const{error:B}=await z.from("protocolo_receptoras").update({status:"INAPTA",motivo_inapta:"Descartada no menu de TE - no recebeu embrio"}).eq("id",T.protocolo_receptora_id);if(B)throw B;if(T.receptora_id){const{error:ie}=await z.from("receptoras").update({status_reprodutivo:"VAZIA"}).eq("id",T.receptora_id);ie?console.error("Erro ao atualizar status da receptora descartada:",ie):console.log(`Status da receptora ${T.receptora_id} atualizado para VAZIA`)}R({title:"Receptora descartada",description:`${le} foi descartada e no receber embrio neste protocolo.`}),F({...T,receptora_id:"",protocolo_receptora_id:""}),T.fazenda_id&&await M(T.fazenda_id)}catch(B){console.error("Erro ao descartar receptora:",B),R({title:"Erro ao descartar receptora",description:B instanceof Error?B.message:"Erro desconhecido",variant:"destructive"})}finally{h(!1)}},w=async V=>{var ie;if(V.preventDefault(),!T.fazenda_id||!T.pacote_id||!T.receptora_id||!T.embriao_id||!T.data_te){R({title:"Erro de validao",description:"Todos os campos obrigatrios devem ser preenchidos",variant:"destructive"});return}const le=i.find(xe=>xe.receptora_id===T.receptora_id),B=(le==null?void 0:le.quantidade_embrioes)||0;if(!p&&B>=1){R({title:"Receptora j utilizada",description:'Esta receptora j recebeu um embrio. Ative o switch "Permitir Transferncias Duplas" para transferir um segundo embrio.',variant:"destructive"});return}if(p&&B>=2){R({title:"Limite atingido",description:"Esta receptora j recebeu o mximo de 2 embries permitidos.",variant:"destructive"});return}if(T.receptora_id){const xe=await Bo(T.receptora_id),pe=Ji(xe,"REALIZAR_TE");if(!pe.valido){R({title:"Erro de validao",description:pe.mensagem||"A receptora no pode receber embrio no estado atual",variant:"destructive"});return}}try{if(h(!0),!T.embriao_id){R({title:"Erro de validao",description:"Embrio no selecionado",variant:"destructive"});return}if(!T.receptora_id){R({title:"Erro de validao",description:"Receptora no selecionada",variant:"destructive"});return}if(!T.data_te){R({title:"Erro de validao",description:"Data da TE no informada",variant:"destructive"});return}const xe={embriao_id:T.embriao_id,receptora_id:T.receptora_id,protocolo_receptora_id:T.protocolo_receptora_id||null,data_te:T.data_te,tipo_te:"FRESCO",veterinario_responsavel:T.veterinario_responsavel||null,tecnico_responsavel:T.tecnico_responsavel||null,status_te:"REALIZADA",observacoes:T.observacoes||null},{data:pe,error:Ce}=await z.from("transferencias_embrioes").insert([xe]).select("id");if(Ce)throw console.error("Erro ao inserir transferncia:",Ce),console.error("Dados tentados:",xe),Ce;pe&&((ie=pe[0])!=null&&ie.id)&&x(ee=>[...ee,pe[0].id]);const{error:De}=await z.from("embrioes").update({status_atual:"TRANSFERIDO"}).eq("id",T.embriao_id);if(De)throw De;const he=await Bo(T.receptora_id),P=Ji(he,"REALIZAR_TE");if(!P.valido)console.warn(`No foi possvel atualizar status da receptora: ${P.mensagem}`);else{const{error:ee}=await Px(T.receptora_id,"SERVIDA");ee&&console.error("Erro ao atualizar status da receptora:",ee)}T.protocolo_receptora_id&&y(ee=>ee.includes(T.protocolo_receptora_id)?ee:[...ee,T.protocolo_receptora_id]),R({title:"Transferncia realizada",description:"Transferncia de embrio registrada com sucesso"}),Z({data_te:T.data_te,veterinario_responsavel:T.veterinario_responsavel,tecnico_responsavel:T.tecnico_responsavel}),F({fazenda_id:T.fazenda_id,pacote_id:T.pacote_id,embriao_id:"",receptora_id:"",protocolo_receptora_id:"",data_te:T.data_te,veterinario_responsavel:T.veterinario_responsavel,tecnico_responsavel:T.tecnico_responsavel,observacoes:""}),k(),T.fazenda_id&&await M(T.fazenda_id)}catch(xe){console.error("Erro completo:",xe),R({title:"Erro ao realizar transferncia",description:xe instanceof Error?xe.message:"Erro desconhecido",variant:"destructive"})}finally{h(!1)}},C=async()=>{if(_.length===0){R({title:"Nenhuma transferncia na sesso",description:"No h transferncias para visualizar.",variant:"destructive"});return}N(!0),await $(!0)},$=async(V=!1)=>{if(!(_.length>0)){V||R({title:"Nenhuma transferncia na sesso",description:"No h transferncias para gerar relatrio.",variant:"destructive"});return}if(!V&&b.length===0){R({title:"Nenhuma transferncia na sesso",description:"No h transferncias para gerar relatrio.",variant:"destructive"});return}try{const{data:B,error:ie}=await z.from("transferencias_embrioes").select(`
          *,
          embrioes (
            id,
            classificacao,
            status_atual,
            lote_fiv_id,
            lote_fiv_acasalamento_id
          ),
          receptoras (
            id,
            identificacao,
            nome
          )
        `).in("id",_).eq("status_te","REALIZADA").order("created_at",{ascending:!0});if(ie)throw ie;if(!B||B.length===0){R({title:"Erro ao gerar relatrio",description:"No foi possvel encontrar as transferncias da sesso.",variant:"destructive"});return}const xe=B.map(he=>{var P;return(P=he.embrioes)==null?void 0:P.lote_fiv_acasalamento_id}).filter(he=>!!he);let pe=new Map,Ce=new Map;if(xe.length>0){const{data:he}=await z.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",xe);if(he){const P=[...new Set(he.map(ue=>ue.aspiracao_doadora_id).filter(Boolean))],ee=[...new Set(he.map(ue=>ue.dose_semen_id).filter(Boolean))];if(P.length>0){const{data:ue}=await z.from("aspiracoes_doadoras").select("id, doadora_id").in("id",P);if(ue){const K=[...new Set(ue.map(ne=>ne.doadora_id))];if(K.length>0){const{data:ne}=await z.from("doadoras").select("id, registro").in("id",K);if(ne){const D=new Map(ue.map(Q=>[Q.id,Q.doadora_id]));ue.forEach(Q=>{const J=D.get(Q.id);if(J){const oe=ne.find(ge=>ge.id===J);oe&&pe.set(Q.id,oe.registro)}})}}}}if(ee.length>0){const{data:ue}=await z.from("doses_semen").select("id, nome").in("id",ee);ue&&ue.forEach(K=>{Ce.set(K.id,K.nome)})}he.forEach(ue=>{const K=ue.aspiracao_doadora_id,ne=ue.dose_semen_id;if(K&&ne){const D=pe.get(K),Q=Ce.get(ne);D&&pe.set(ue.id,D),Q&&Ce.set(ue.id,Q)}})}}const De=B.map(he=>{var ne,D,Q,J;const P=(ne=he.embrioes)==null?void 0:ne.lote_fiv_acasalamento_id,ee=P&&pe.get(P)||"N/A",ue=P&&Ce.get(P)||"N/A";return{numero_embriao:Y&&Y.get(he.embriao_id)?Y.get(he.embriao_id):he.embriao_id?he.embriao_id.substring(0,8):"N/A",doadora:ee,touro:ue,classificacao:((D=he.embrioes)==null?void 0:D.classificacao)||"N/A",receptora_brinco:((Q=he.receptoras)==null?void 0:Q.identificacao)||"N/A",receptora_nome:((J=he.receptoras)==null?void 0:J.nome)||"N/A",data_te:he.data_te,veterinario:he.veterinario_responsavel||"N/A",tecnico:he.tecnico_responsavel||"N/A",observacoes:he.observacoes||""}});j(De),g(!0)}catch(B){console.error("Erro ao gerar relatrio:",B),R({title:"Erro ao gerar relatrio",description:B instanceof Error?B.message:"Erro desconhecido",variant:"destructive"}),N(!1)}},O=async()=>{if(b.length===0){R({title:"Nenhuma transferncia na sesso",description:"No h transferncias para encerrar nesta sesso.",variant:"destructive"});return}try{h(!0);const{error:V}=await z.from("protocolo_receptoras").update({status:"UTILIZADA"}).in("id",b);if(V)throw console.error("Erro ao atualizar protocolos_receptoras:",V),V;R({title:"Sesso encerrada",description:`${b.length} transferncia(s) finalizada(s) com sucesso.`}),F({fazenda_id:"",pacote_id:"",embriao_id:"",receptora_id:"",protocolo_receptora_id:"",data_te:new Date().toISOString().split("T")[0],veterinario_responsavel:"",tecnico_responsavel:"",observacoes:""}),Z({data_te:"",veterinario_responsavel:"",tecnico_responsavel:""});const le=T.fazenda_id;y([]),x([]),m(!1),g(!1),j([]),await k(),le&&await M(le)}catch(V){console.error("Erro ao encerrar sesso:",V),R({title:"Erro ao encerrar sesso",description:V instanceof Error?V.message:"Erro desconhecido",variant:"destructive"})}finally{h(!1)}},L=a.find(V=>V.id===T.pacote_id),H=(L==null?void 0:L.embrioes.filter(V=>V.status_atual==="FRESCO"||V.status_atual==="CONGELADO"))||[],[G,te]=u.useState([]),[Y,be]=u.useState(new Map);return u.useEffect(()=>{T.pacote_id&&L?(async()=>{try{const{data:le,error:B}=await z.from("embrioes").select("*").eq("lote_fiv_id",L.lote_fiv_id).order("created_at",{ascending:!0});if(B)throw B;if(le){const ie=le.map(K=>K.lote_fiv_acasalamento_id).filter(K=>!!K);let xe=new Map,pe=new Map,Ce=new Map;if(ie.length>0){const{data:K}=await z.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",ie);if(K){xe=new Map(K.map(Q=>[Q.id,Q]));const ne=[...new Set(K.map(Q=>Q.aspiracao_doadora_id).filter(Boolean))],D=[...new Set(K.map(Q=>Q.dose_semen_id).filter(Boolean))];if(ne.length>0){const{data:Q}=await z.from("aspiracoes_doadoras").select("id, doadora_id").in("id",ne);if(Q){const J=[...new Set(Q.map(oe=>oe.doadora_id))];if(J.length>0){const{data:oe}=await z.from("doadoras").select("id, registro").in("id",J);if(oe){pe=new Map(oe.map(Ne=>[Ne.id,Ne.registro]));const ge=new Map(Q.map(Ne=>[Ne.id,Ne.doadora_id]));K.forEach(Ne=>{if(Ne.aspiracao_doadora_id){const me=ge.get(Ne.aspiracao_doadora_id);if(me){const _e=pe.get(me);_e&&xe.set(Ne.id,{...Ne,doadora_registro:_e})}}})}}}}if(D.length>0){const{data:Q}=await z.from("doses_semen").select("id, nome").in("id",D);Q&&(Ce=new Map(Q.map(J=>[J.id,J.nome])),K.forEach(J=>{if(J.dose_semen_id){const oe=Ce.get(J.dose_semen_id);if(oe){const ge=xe.get(J.id);xe.set(J.id,{...ge,touro_nome:oe})}}}))}}}const De=le.map(K=>{const ne=xe.get(K.lote_fiv_acasalamento_id||"");return{...K,doadora_registro:ne==null?void 0:ne.doadora_registro,touro_nome:ne==null?void 0:ne.touro_nome}});te(De);const he=new Map,P=new Map;De.forEach(K=>{const ne=K.doadora_registro||"",D=K.touro_nome||"",Q=`${ne}|${D}`;P.has(Q)||P.set(Q,[]),P.get(Q).push(K)});const ee=Array.from(P.entries()).sort(([K],[ne])=>{const[D,Q]=K.split("|"),[J,oe]=ne.split("|");return D!==J?D.localeCompare(J):Q.localeCompare(oe)});ee.forEach(([K,ne])=>{ne.sort((D,Q)=>{const J=D.created_at?new Date(D.created_at).getTime():0,oe=Q.created_at?new Date(Q.created_at).getTime():0;return J-oe})});let ue=1;ee.forEach(([K,ne])=>{ne.forEach(D=>{he.set(D.id,ue),ue++})}),be(he)}}catch(le){console.error("Erro ao carregar todos os embries:",le)}})():(te([]),be(new Map))},[T.pacote_id,L]),c?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Transferncia de Embries (TE)"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Destinar embries para receptoras sincronizadas"})]}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Pe,{className:"flex items-center gap-2",children:[r.jsx(lh,{className:"w-5 h-5"}),"Nova Transferncia"]}),T.fazenda_id&&T.pacote_id&&b.length>0&&r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(re,{type:"button",onClick:C,className:"bg-slate-600 hover:bg-slate-700",disabled:f,variant:"default",title:"Visualizar relatrio da sesso atual sem encerrar",children:[r.jsx(qc,{className:"w-4 h-4 mr-2"}),"Visualizar Relatrio (",b.length," transferncia",b.length>1?"s":"",")"]}),r.jsxs(re,{type:"button",onClick:$,className:"bg-blue-600 hover:bg-blue-700",disabled:f,variant:"default",children:[r.jsx(qc,{className:"w-4 h-4 mr-2"}),f?"Gerando...":`Encerrar Sesso (${b.length} transferncia${b.length>1?"s":""})`]})]})]})}),r.jsx(ke,{children:r.jsxs("form",{onSubmit:w,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4 border-b pb-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"fazenda_id",children:"1. Fazenda onde esto as receptoras *"}),r.jsxs(_t,{value:T.fazenda_id,onValueChange:A,children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione a fazenda"})}),r.jsx(gt,{children:e.map(V=>r.jsx(Ie,{value:V.id,children:V.nome},V.id))})]})]}),T.fazenda_id&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"pacote_id",children:"2. Pacote de Embries *"}),r.jsxs(_t,{value:T.pacote_id,onValueChange:q,disabled:!T.fazenda_id,children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione um pacote"})}),r.jsx(gt,{children:n.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhum pacote disponvel para esta fazenda"}):n.map(V=>r.jsxs(Ie,{value:V.id,children:[Lt(V.data_despacho)," - ",V.total," embrio(es) -",V.frescos>0&&` ${V.frescos} fresco(s)`,V.congelados>0&&` ${V.congelados} congelado(s)`]},V.id))})]})]}),T.fazenda_id&&T.pacote_id&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ae,{htmlFor:"receptora_id",children:"3. Receptora Sincronizada *"}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[r.jsx(zx,{id:"permitir-duplas",checked:p,onCheckedChange:m,className:"scale-75"}),r.jsx(ae,{htmlFor:"permitir-duplas",className:"cursor-pointer text-xs",children:"Permitir duplas"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(_t,{value:T.receptora_id,onValueChange:V=>{const le=i.find(B=>B.receptora_id===V);F({...T,receptora_id:V,protocolo_receptora_id:(le==null?void 0:le.protocolo_receptora_id)||""})},disabled:!T.fazenda_id||!T.pacote_id,className:"flex-1",children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione a receptora"})}),r.jsx(gt,{children:i.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:p?"Nenhuma receptora sincronizada disponvel. Todas j receberam 2 embries ou no esto sincronizadas.":"Nenhuma receptora sincronizada disponvel nesta fazenda"}):i.map(V=>{const le=V.quantidade_embrioes||0,B=le>0;return r.jsx(Ie,{value:V.receptora_id,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:V.brinco}),B&&p&&r.jsx(et,{variant:"outline",className:"bg-orange-100 text-orange-800 border-orange-300 text-xs",children:le===1?"1 embrio":"2 embries"}),V.data_te_prevista&&r.jsxs("span",{className:"text-slate-500 text-xs",children:["(TE prevista: ",Lt(V.data_te_prevista),")"]})]})},V.receptora_id)})})]}),T.receptora_id&&T.protocolo_receptora_id&&r.jsx(re,{type:"button",variant:"destructive",size:"icon",onClick:I,disabled:f,title:"Descartar receptora (no receber embrio)",children:r.jsx(Df,{className:"w-4 h-4"})})]}),T.receptora_id&&(()=>{const V=i.find(ie=>ie.receptora_id===T.receptora_id),le=(V==null?void 0:V.qualidade_semaforo)!==null&&(V==null?void 0:V.qualidade_semaforo)!==void 0,B=(V==null?void 0:V.ciclando_classificacao)!==null&&(V==null?void 0:V.ciclando_classificacao)!==void 0;return le||B?r.jsxs("div",{className:"mt-3 p-3 bg-slate-50 rounded-md border border-slate-200",children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Avaliao da Receptora:"}),r.jsxs("div",{className:"flex items-center gap-4",children:[B&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"Ciclando:"}),r.jsx(Gh,{value:V.ciclando_classificacao,variant:"display",disabled:!0})]}),le&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"Qualidade:"}),r.jsx(Yh,{value:V.qualidade_semaforo,variant:"single",disabled:!0})]})]})]}):null})()]}),T.pacote_id&&r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"data_te",children:"Data da TE *"}),r.jsx(Us,{id:"data_te",value:T.data_te,onChange:V=>{const le=V||"";F({...T,data_te:le}),Z(B=>({...B,data_te:le}))},required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"veterinario_responsavel",children:"Veterinrio Responsvel"}),r.jsx(Ee,{id:"veterinario_responsavel",value:T.veterinario_responsavel,onChange:V=>{const le=V.target.value;F({...T,veterinario_responsavel:le}),Z(B=>({...B,veterinario_responsavel:le}))},placeholder:"Nome do veterinrio"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"tecnico_responsavel",children:"Tcnico Responsvel"}),r.jsx(Ee,{id:"tecnico_responsavel",value:T.tecnico_responsavel,onChange:V=>{const le=V.target.value;F({...T,tecnico_responsavel:le}),Z(B=>({...B,tecnico_responsavel:le}))},placeholder:"Nome do tcnico"})]})]}),T.embriao_id&&T.receptora_id&&r.jsx("div",{className:"flex gap-2 pt-2",children:r.jsxs(re,{type:"submit",className:"bg-green-600 hover:bg-green-700",disabled:f,children:[r.jsx(ex,{className:"w-4 h-4 mr-2"}),f?"Registrando...":"Registrar Transferncia"]})})]}),T.pacote_id&&L&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(ae,{children:"4. Selecionar Embrio do Pacote *"}),r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"font-semibold text-slate-900",children:"Pacote selecionado"}),r.jsxs("p",{className:"text-sm text-slate-600",children:["Data Despacho: ",Lt(L.data_despacho)," | Total: ",L.total," embrio(es)"]})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{className:"w-12"}),r.jsx(X,{className:"text-center w-16",children:"N"}),r.jsx(X,{children:"Doadora"}),r.jsx(X,{children:"Touro"}),r.jsx(X,{children:"Classificao"}),r.jsx(X,{children:"Status"})]})}),r.jsx(Tt,{children:[...H].sort((le,B)=>{const ie=Y.get(le.id)||9999,xe=Y.get(B.id)||9999;return ie-xe}).map(le=>{const B=Y.get(le.id)||0;return r.jsxs(Oe,{className:T.embriao_id===le.id?"bg-green-50":"cursor-pointer hover:bg-slate-50",onClick:()=>F({...T,embriao_id:le.id}),children:[r.jsx(W,{children:r.jsx("input",{type:"radio",name:"embriao",value:le.id,checked:T.embriao_id===le.id,onChange:()=>F({...T,embriao_id:le.id}),className:"w-4 h-4"})}),r.jsx(W,{className:"text-center font-medium",children:B}),r.jsx(W,{children:le.doadora_registro||"-"}),r.jsx(W,{children:le.touro_nome||"-"}),r.jsx(W,{children:le.classificacao?r.jsx(et,{variant:"outline",children:le.classificacao}):r.jsx("span",{className:"text-slate-400",children:"-"})}),r.jsx(W,{children:r.jsx(cn,{status:le.status_atual})})]},le.id)})})]})})]})]}),T.embriao_id&&T.receptora_id&&r.jsx("div",{className:"space-y-4 border-t pt-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Wa,{id:"observacoes",value:T.observacoes,onChange:V=>F({...T,observacoes:V.target.value}),placeholder:"Observaes sobre a transferncia",rows:3})]})})]})})]}),r.jsx(da,{open:v,onOpenChange:g,children:r.jsxs(sa,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(ra,{children:[r.jsxs(na,{className:"flex items-center gap-2",children:[r.jsx(qc,{className:"w-5 h-5"}),"Relatrio da Sesso de Transferncia de Embries"]}),r.jsxs(ua,{children:["Fazenda: ",((de=e.find(V=>V.id===T.fazenda_id))==null?void 0:de.nome)||"N/A"," | Data da TE: ",T.data_te?Lt(T.data_te):"N/A"," | Total: ",E.length," transferncia(s)"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Veterinrio Responsvel:"})," ",T.veterinario_responsavel||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Tcnico Responsvel:"})," ",T.tecnico_responsavel||"N/A"]})]}),r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{className:"text-center",children:"N Embrio"}),r.jsx(X,{children:"Doadora"}),r.jsx(X,{children:"Touro"}),r.jsx(X,{children:"Classificao"}),r.jsx(X,{children:"Receptora (Brinco)"}),r.jsx(X,{children:"Receptora (Nome)"}),r.jsx(X,{children:"Data TE"}),r.jsx(X,{children:"Observaes"})]})}),r.jsx(Tt,{children:E.map((V,le)=>r.jsxs(Oe,{children:[r.jsx(W,{className:"text-center font-semibold",children:V.numero_embriao}),r.jsx(W,{children:V.doadora}),r.jsx(W,{children:V.touro}),r.jsx(W,{children:V.classificacao}),r.jsx(W,{className:"font-semibold",children:V.receptora_brinco}),r.jsx(W,{children:V.receptora_nome}),r.jsx(W,{children:V.data_te?Lt(V.data_te):"N/A"}),r.jsx(W,{className:"text-sm text-slate-600",children:V.observacoes||"-"})]},le))})]})})]}),r.jsxs(a1,{children:[r.jsx(re,{type:"button",variant:"outline",onClick:()=>{g(!1),N(!1)},children:"Fechar"}),!S&&r.jsx(re,{type:"button",onClick:async()=>{g(!1),N(!1),await O()},className:"bg-blue-600 hover:bg-blue-700",disabled:f,children:f?"Encerrando...":"Confirmar e Encerrar Sesso"})]})]})})]})}function WU(){const[e,t]=u.useState([]),[a,s]=u.useState(""),[n,o]=u.useState([]),[i,l]=u.useState(null),[c,d]=u.useState([]),[f,h]=u.useState(!1),[p,m]=u.useState(!1),[b,y]=u.useState(!1),{toast:_}=fa(),[x,v]=u.useState({}),[g,E]=u.useState({veterinario_responsavel:"",tecnico_responsavel:""}),j=new Date().toISOString().split("T")[0];u.useEffect(()=>{S()},[]),u.useEffect(()=>{a?N(a):(o([]),l(null),d([]),v({}))},[a]),u.useEffect(()=>{i?i.status==="FECHADO"?(E({veterinario_responsavel:i.veterinario_dg||"",tecnico_responsavel:i.tecnico_dg||""}),y(!1),T(i)):i.veterinario_dg&&i.tecnico_dg?(E({veterinario_responsavel:i.veterinario_dg,tecnico_responsavel:i.tecnico_dg}),y(!1),T(i)):(E({veterinario_responsavel:"",tecnico_responsavel:""}),y(!0),d([]),v({})):(d([]),v({}),y(!1))},[i]);const S=async()=>{try{const{data:k,error:M}=await z.from("fazendas").select("*").order("nome",{ascending:!0});if(M)throw M;t(k||[])}catch(k){_({title:"Erro ao carregar fazendas",description:k instanceof Error?k.message:"Erro desconhecido",variant:"destructive"})}},N=async k=>{try{h(!0);const{data:M,error:A}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",k);if(A)throw A;const q=(M==null?void 0:M.map(te=>te.receptora_id))||[];if(q.length===0){o([]);return}const{data:I}=await z.from("receptoras").select("id, status_reprodutivo").in("id",q).eq("status_reprodutivo","SERVIDA"),w=(I==null?void 0:I.map(te=>te.id))||[];if(w.length===0){o([]);return}const{data:C,error:$}=await z.from("transferencias_embrioes").select("id, receptora_id, data_te").in("receptora_id",w).eq("status_te","REALIZADA").order("data_te",{ascending:!1});if($)throw $;const{data:O}=await z.from("diagnosticos_gestacao").select("receptora_id, data_te, veterinario_responsavel, tecnico_responsavel, data_diagnostico").in("receptora_id",w).eq("tipo_diagnostico","DG").order("data_diagnostico",{ascending:!1}),L=new Map,H=new Map;C==null||C.forEach(te=>{var de;const Y=`${k}-${te.data_te}`,be=`${te.data_te}-${te.receptora_id}`;if(H.has(te.data_te)||H.set(te.data_te,new Set),H.get(te.data_te).add(te.receptora_id),!L.has(Y)){const V=O==null?void 0:O.find(le=>le.data_te===te.data_te);L.set(Y,{id:Y,fazenda_id:k,fazenda_nome:((de=e.find(le=>le.id===k))==null?void 0:de.nome)||"",data_te:te.data_te,quantidade_receptoras:0,veterinario_dg:(V==null?void 0:V.veterinario_responsavel)||void 0,tecnico_dg:(V==null?void 0:V.tecnico_responsavel)||void 0,status:"ABERTO"})}}),L.forEach((te,Y)=>{var V;const be=((V=H.get(te.data_te))==null?void 0:V.size)||0;te.quantidade_receptoras=be;const de=(O==null?void 0:O.filter(le=>le.data_te===te.data_te))||[];de.length>0&&de.length>=be?te.status="FECHADO":te.status="ABERTO"});const G=Array.from(L.values()).sort((te,Y)=>new Date(Y.data_te).getTime()-new Date(te.data_te).getTime());o(G)}catch(M){_({title:"Erro ao carregar lotes",description:M instanceof Error?M.message:"Erro desconhecido",variant:"destructive"}),o([])}finally{h(!1)}},R=async()=>{if(!g.veterinario_responsavel.trim()||!g.tecnico_responsavel.trim()){_({title:"Erro de validao",description:"Veterinrio e tcnico responsveis so obrigatrios",variant:"destructive"});return}if(!i)return;const k={...i,veterinario_dg:g.veterinario_responsavel.trim(),tecnico_dg:g.tecnico_responsavel.trim(),status:"ABERTO"};l(k),y(!1),await T(k)},T=async k=>{try{h(!0);const{data:M,error:A}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",k.fazenda_id);if(A)throw A;const q=(M==null?void 0:M.map(pe=>pe.receptora_id))||[];if(q.length===0){d([]);return}const{data:I,error:w}=await z.from("receptoras").select("id, identificacao, nome, status_reprodutivo").in("id",q).eq("status_reprodutivo","SERVIDA");if(w)throw w;const C=(I==null?void 0:I.map(pe=>pe.id))||[],{data:$,error:O}=await z.from("transferencias_embrioes").select("id, receptora_id, embriao_id, data_te").in("receptora_id",C).eq("data_te",k.data_te).eq("status_te","REALIZADA");if(O)throw O;if(!$||$.length===0){d([]);return}const L=$.map(pe=>pe.embriao_id).filter(Boolean);let H=new Map;if(L.length>0){const{data:pe,error:Ce}=await z.from("embrioes").select("id, identificacao, classificacao, lote_fiv_id, lote_fiv_acasalamento_id").in("id",L);if(Ce)throw Ce;H=new Map((pe==null?void 0:pe.map(De=>[De.id,De]))||[])}const G=[...new Set(Array.from(H.values()).map(pe=>pe.lote_fiv_id).filter(Boolean))];let te=new Map;if(G.length>0){const{data:pe,error:Ce}=await z.from("lotes_fiv").select("id, data_abertura").in("id",G);if(Ce)throw Ce;te=new Map((pe==null?void 0:pe.map(De=>[De.id,De]))||[])}const Y=[...new Set(Array.from(H.values()).map(pe=>pe.lote_fiv_acasalamento_id).filter(Boolean))];let be=new Map,de=new Map;if(Y.length>0){const{data:pe}=await z.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",Y);if(pe){const Ce=[...new Set(pe.map(he=>he.aspiracao_doadora_id).filter(Boolean))],De=[...new Set(pe.map(he=>he.dose_semen_id).filter(Boolean))];if(Ce.length>0){const{data:he}=await z.from("aspiracoes_doadoras").select("id, doadora_id").in("id",Ce);if(he){const P=[...new Set(he.map(ee=>ee.doadora_id))];if(P.length>0){const{data:ee}=await z.from("doadoras").select("id, registro").in("id",P);if(ee){const ue=new Map(ee.map(ne=>[ne.id,ne.registro])),K=new Map(he.map(ne=>[ne.id,ne.doadora_id]));pe.forEach(ne=>{if(ne.aspiracao_doadora_id){const D=K.get(ne.aspiracao_doadora_id);if(D){const Q=ue.get(D);Q&&be.set(ne.id,Q)}}})}}}}if(De.length>0){const{data:he}=await z.from("doses_semen").select("id, nome").in("id",De);he&&(he.forEach(P=>{de.set(P.id,P.nome)}),pe.forEach(P=>{if(P.dose_semen_id){const ee=de.get(P.dose_semen_id);ee&&de.set(P.id,ee)}}))}}}const{data:V}=await z.from("diagnosticos_gestacao").select("*").in("receptora_id",C).eq("tipo_diagnostico","DG").eq("data_te",k.data_te).order("data_diagnostico",{ascending:!1}),le=new Map;V==null||V.forEach(pe=>{le.has(pe.receptora_id)||le.set(pe.receptora_id,pe)});const B=new Map;$.forEach(pe=>{const Ce=`${pe.receptora_id}-${pe.data_te}`;B.has(Ce)||B.set(Ce,[]),B.get(Ce).push(pe)});const ie=[];B.forEach((pe,Ce)=>{const De=pe[0],he=I==null?void 0:I.find(ne=>ne.id===De.receptora_id);if(!he)return;const P=[];let ee=null,ue=null;if(pe.forEach(ne=>{const D=H.get(ne.embriao_id);if(!D)return;const Q=te.get(D.lote_fiv_id);if(!Q)return;if(!ee){ee=Q.data_abertura;const ge=new Date(Q.data_abertura);ue=Math.floor((new Date().getTime()-ge.getTime())/(1e3*60*60*24))}const J=D.lote_fiv_acasalamento_id?be.get(D.lote_fiv_acasalamento_id):void 0,oe=D.lote_fiv_acasalamento_id?de.get(D.lote_fiv_acasalamento_id):void 0;P.push({te_id:ne.id,embriao_id:D.id,embriao_identificacao:D.identificacao,embriao_classificacao:D.classificacao,lote_fiv_id:D.lote_fiv_id,lote_fiv_acasalamento_id:D.lote_fiv_acasalamento_id,doadora_registro:J,touro_nome:oe})}),P.length===0||!ee||ue===null)return;const K=le.get(De.receptora_id);ie.push({receptora_id:De.receptora_id,brinco:he.identificacao,nome:he.nome,data_te:De.data_te,embrioes:P,data_abertura_lote:ee,dias_gestacao:ue,diagnostico_existente:K?{id:K.id,data_diagnostico:K.data_diagnostico,resultado:K.resultado,numero_gestacoes:K.numero_gestacoes||void 0,observacoes:K.observacoes||void 0}:void 0})}),ie.sort((pe,Ce)=>pe.brinco.localeCompare(Ce.brinco)),d(ie);const xe={};ie.forEach(pe=>{var Ce;if(pe.diagnostico_existente){const De=pe.diagnostico_existente.resultado,he=((Ce=pe.diagnostico_existente.numero_gestacoes)==null?void 0:Ce.toString())||(De==="PRENHE"||De==="RETOQUE"?"1":"");xe[pe.receptora_id]={resultado:De,numero_gestacoes:he,observacoes:pe.diagnostico_existente.observacoes||"",data_diagnostico:pe.diagnostico_existente.data_diagnostico}}else xe[pe.receptora_id]={resultado:"",numero_gestacoes:"",observacoes:"",data_diagnostico:j}}),v(xe)}catch(M){_({title:"Erro ao carregar receptoras",description:M instanceof Error?M.message:"Erro desconhecido",variant:"destructive"}),d([])}finally{h(!1)}},F=(k,M)=>{v(A=>{const q=A[k]||{};let I=q.numero_gestacoes||"";return(M==="PRENHE"||M==="RETOQUE")&&!I?I="1":(M==="VAZIA"||M==="")&&(I=""),{...A,[k]:{...q,resultado:M,numero_gestacoes:I}}})},U=(k,M,A)=>{v(q=>({...q,[k]:{...q[k],[M]:A}}))},Z=async()=>{var M,A,q;if(!i)return;if(!g.veterinario_responsavel.trim()||!g.tecnico_responsavel.trim()){_({title:"Erro de validao",description:"Veterinrio e tcnico responsveis so obrigatrios",variant:"destructive"});return}const k=c.filter(I=>{const w=x[I.receptora_id];return!w||!w.resultado||!w.data_diagnostico});if(k.length>0){_({title:"Erro de validao",description:`H ${k.length} receptora(s) sem resultado definido`,variant:"destructive"});return}try{m(!0);for(const O of c){const L=await Bo(O.receptora_id),H=Ji(L,"REALIZAR_DG");if(!H.valido){_({title:"Erro de validao",description:`Receptora ${O.brinco}: ${H.mensagem}`,variant:"destructive"});return}}const I=[],w=[],C=[];if(c.forEach(O=>{var Y,be;const L=x[O.receptora_id];if(!L||!L.resultado)return;if(!L.data_diagnostico){console.warn(`Receptora ${O.brinco} sem data de diagnstico`);return}const H={receptora_id:O.receptora_id,data_te:O.data_te,tipo_diagnostico:"DG",data_diagnostico:L.data_diagnostico,resultado:L.resultado,observacoes:L.observacoes&&L.observacoes.trim()||null};L.resultado==="PRENHE"||L.resultado==="RETOQUE"?L.numero_gestacoes?H.numero_gestacoes=parseInt(L.numero_gestacoes):H.numero_gestacoes=1:H.numero_gestacoes=0,(Y=g.veterinario_responsavel)!=null&&Y.trim()&&(H.veterinario_responsavel=g.veterinario_responsavel.trim()),(be=g.tecnico_responsavel)!=null&&be.trim()&&(H.tecnico_responsavel=g.tecnico_responsavel.trim()),O.diagnostico_existente?w.push({id:O.diagnostico_existente.id,...H}):I.push(H);let G,te=null;if(L.resultado==="PRENHE"){G="PRENHE";const de=new Date(O.data_abertura_lote),V=new Date(de);V.setDate(V.getDate()+275),te=V.toISOString().split("T")[0]}else if(L.resultado==="RETOQUE"){G="PRENHE_RETOQUE";const de=new Date(O.data_abertura_lote),V=new Date(de);V.setDate(V.getDate()+275),te=V.toISOString().split("T")[0]}else G="VAZIA",L.numero_gestacoes="";C.push({receptora_id:O.receptora_id,status:G,dataParto:te})}),I.length>0){const O=I.map(Y=>`${Y.receptora_id}-${Y.data_te}-${Y.tipo_diagnostico}`),{data:L,error:H}=await z.from("diagnosticos_gestacao").select("id, receptora_id, data_te, tipo_diagnostico").in("receptora_id",[...new Set(I.map(Y=>Y.receptora_id))]).eq("tipo_diagnostico","DG");H&&console.warn("Erro ao verificar diagnsticos existentes:",H);const G=new Map;L==null||L.forEach(Y=>{const be=`${Y.receptora_id}-${Y.data_te}-${Y.tipo_diagnostico}`;G.set(be,Y.id)});const te=[];if(I.forEach(Y=>{const be=`${Y.receptora_id}-${Y.data_te}-${Y.tipo_diagnostico}`,de=G.get(be);de?w.push({id:de,...Y}):te.push(Y)}),te.length>0){const{error:Y}=await z.from("diagnosticos_gestacao").insert(te);if(Y)if(console.error("Erro ao inserir diagnsticos:",Y),(M=Y.message)!=null&&M.includes("column")||Y.code==="42703"){console.warn("Campos veterinario_responsavel/tecnico_responsavel no existem, tentando sem eles...");const be=te.map(({veterinario_responsavel:V,tecnico_responsavel:le,...B})=>B),{error:de}=await z.from("diagnosticos_gestacao").insert(be);if(de)throw new Error(`Erro ao inserir diagnsticos: ${de.message}. Verifique se os campos esto corretos no banco de dados.`)}else throw Y.code==="23505"||(A=Y.message)!=null&&A.includes("unique")?new Error("Erro de duplicao: alguns diagnsticos j existem. Recarregue a pgina e tente novamente."):new Error(`Erro ao inserir diagnsticos: ${Y.message||Y.code||"Erro desconhecido"}`)}}if(w.length>0)for(const O of w){const{id:L,...H}=O;let{error:G}=await z.from("diagnosticos_gestacao").update(H).eq("id",L);if(G&&((q=G.message)!=null&&q.includes("column")||G.code==="42703")){console.warn("Campos veterinario_responsavel/tecnico_responsavel no existem, atualizando sem eles...");const{veterinario_responsavel:te,tecnico_responsavel:Y,...be}=H,{error:de}=await z.from("diagnosticos_gestacao").update(be).eq("id",L);if(de)throw new Error(`Erro ao atualizar diagnstico ${L}: ${de.message}`)}else if(G)throw new Error(`Erro ao atualizar diagnstico ${L}: ${G.message||G.code||"Erro desconhecido"}`)}for(const O of C){const L={status_reprodutivo:O.status};O.dataParto?L.data_provavel_parto=O.dataParto:O.status==="VAZIA"&&(L.data_provavel_parto=null);const{error:H}=await z.from("receptoras").update(L).eq("id",O.receptora_id);H&&console.error(`Erro ao atualizar status da receptora ${O.receptora_id}:`,H)}const $=c.every(O=>{const L=x[O.receptora_id];return L&&L.resultado&&L.data_diagnostico});l({...i,veterinario_dg:g.veterinario_responsavel.trim(),tecnico_dg:g.tecnico_responsavel.trim(),status:$?"FECHADO":"ABERTO"}),_({title:"Lote salvo com sucesso",description:$?`${c.length} diagnstico(s) registrado(s). Lote fechado.`:`${c.length} diagnstico(s) registrado(s)`}),await N(a),i&&await T(i)}catch(I){console.error("Erro detalhado ao salvar lote:",I);let w="Erro desconhecido";I instanceof Error&&(w=I.message,I.message.includes("column")&&I.message.includes("does not exist")?w="Os campos veterinario_responsavel e tecnico_responsavel no existem na tabela. Execute o script SQL add_veterinario_tecnico_dg.sql primeiro.":I.message.includes("unique")||I.message.includes("duplicate")?w="J existe um diagnstico para esta receptora nesta data. Tente recarregar a pgina.":(I.message.includes("foreign key")||I.message.includes("constraint"))&&(w="Erro de integridade dos dados. Verifique se todas as informaes esto corretas.")),_({title:"Erro ao salvar lote",description:w,variant:"destructive"})}finally{m(!1)}},ce=c.every(k=>{const M=x[k.receptora_id];return M&&M.resultado&&M.data_diagnostico});return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Diagnstico de Gestao (DG)"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Registrar diagnsticos de gestao por lote de TE"})]})}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Selecionar Fazenda"})}),r.jsx(ke,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"fazenda",children:"Fazenda *"}),r.jsxs(_t,{value:a,onValueChange:s,children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione a fazenda"})}),r.jsx(gt,{children:e.map(k=>r.jsx(Ie,{value:k.id,children:k.nome},k.id))})]})]})})]}),a&&r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Lotes de Transferncia de Embries"})}),r.jsx(ke,{children:f?r.jsx(Pt,{}):n.length===0?r.jsx("p",{className:"text-center text-slate-500 py-8",children:"Nenhum lote de TE encontrado nesta fazenda"}):r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Data TE"}),r.jsx(X,{children:"Quantidade"}),r.jsx(X,{children:"Vet. DG"}),r.jsx(X,{children:"Tc. DG"}),r.jsx(X,{children:"Status"}),r.jsx(X,{className:"text-right",children:"Aes"})]})}),r.jsx(Tt,{children:n.map(k=>r.jsxs(Oe,{className:(i==null?void 0:i.id)===k.id?"bg-blue-50":"",children:[r.jsx(W,{className:"font-medium",children:new Date(k.data_te).toLocaleDateString("pt-BR")}),r.jsxs(W,{children:[k.quantidade_receptoras," receptoras"]}),r.jsx(W,{children:k.veterinario_dg||"-"}),r.jsx(W,{children:k.tecnico_dg||"-"}),r.jsx(W,{children:r.jsx(cn,{status:k.status==="ABERTO"?"ABERTO":"FECHADO"})}),r.jsx(W,{className:"text-right",children:r.jsx(re,{size:"sm",onClick:()=>l(k),variant:(i==null?void 0:i.id)===k.id?"default":"outline",children:(i==null?void 0:i.id)===k.id?"Selecionado":"Selecionar"})})]},k.id))})]})})]}),i&&b&&r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Abrir Lote de DG"})}),r.jsxs(ke,{className:"space-y-4",children:[r.jsxs("p",{className:"text-slate-600",children:["Lote de TE em ",new Date(i.data_te).toLocaleDateString("pt-BR")," - ",i.quantidade_receptoras," receptoras"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"veterinario",children:"Veterinrio Responsvel *"}),r.jsx(Ee,{id:"veterinario",value:g.veterinario_responsavel,onChange:k=>E({...g,veterinario_responsavel:k.target.value}),placeholder:"Nome do veterinrio"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"tecnico",children:"Tcnico Responsvel *"}),r.jsx(Ee,{id:"tecnico",value:g.tecnico_responsavel,onChange:k=>E({...g,tecnico_responsavel:k.target.value}),placeholder:"Nome do tcnico"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(re,{onClick:R,className:"bg-green-600 hover:bg-green-700",disabled:!g.veterinario_responsavel.trim()||!g.tecnico_responsavel.trim(),children:[r.jsx(ch,{className:"w-4 h-4 mr-2"}),"Abrir Lote"]}),r.jsx(re,{variant:"outline",onClick:()=>{y(!1),l(null)},children:"Cancelar"})]})]})]}),i&&!b&&c.length>0&&r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Pe,{children:["Receptoras do Lote - ",c.length," ",c.length===1?"receptora":"receptoras",i.status==="FECHADO"&&r.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"(Lote Fechado - Somente Leitura)"})]}),i.status==="ABERTO"&&r.jsxs(re,{onClick:Z,disabled:!ce||p,className:"bg-green-600 hover:bg-green-700",children:[r.jsx(qd,{className:"w-4 h-4 mr-2"}),p?"Salvando...":"Salvar Lote Completo"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"veterinario_dg",children:"Veterinrio Responsvel (DG) *"}),r.jsx(Ee,{id:"veterinario_dg",value:g.veterinario_responsavel,onChange:k=>E({...g,veterinario_responsavel:k.target.value}),placeholder:"Nome do veterinrio",disabled:i.status==="FECHADO"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"tecnico_dg",children:"Tcnico Responsvel (DG) *"}),r.jsx(Ee,{id:"tecnico_dg",value:g.tecnico_responsavel,onChange:k=>E({...g,tecnico_responsavel:k.target.value}),placeholder:"Nome do tcnico",disabled:i.status==="FECHADO"})]})]})]})}),r.jsx(ke,{children:f?r.jsx(Pt,{}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Receptora"}),r.jsx(X,{children:"Dias Gestao"}),r.jsx(X,{children:"Embrio(es)"}),r.jsx(X,{children:"Doadora / Touro"}),r.jsx(X,{children:"Data DG"}),r.jsx(X,{children:"Resultado"}),r.jsx(X,{children:"N Gest."}),r.jsx(X,{children:"Observaes"})]})}),r.jsx(Tt,{children:c.map(k=>{var q;const M=x[k.receptora_id]||{resultado:"",numero_gestacoes:"",observacoes:"",data_diagnostico:j},A=!!k.diagnostico_existente;return r.jsxs(Oe,{children:[r.jsxs(W,{className:"font-medium",children:[k.brinco,k.nome&&r.jsxs("span",{className:"text-slate-500 text-sm ml-2",children:["(",k.nome,")"]}),A&&r.jsx(cn,{status:((q=k.diagnostico_existente)==null?void 0:q.resultado)||"",className:"ml-2"})]}),r.jsxs(W,{children:[r.jsx("span",{className:"font-semibold",children:k.dias_gestacao})," dias"]}),r.jsx(W,{children:r.jsx("div",{className:"space-y-1",children:k.embrioes.map((I,w)=>r.jsx("div",{className:"text-sm",children:r.jsxs("div",{className:"font-medium",children:[I.embriao_identificacao||`Embrio ${w+1}`,I.embriao_classificacao&&r.jsxs("span",{className:"text-slate-500 ml-2",children:["(",I.embriao_classificacao,")"]})]})},I.te_id))})}),r.jsx(W,{children:r.jsx("div",{className:"space-y-1",children:k.embrioes.map((I,w)=>r.jsx("div",{className:"text-sm",children:r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:I.doadora_registro||"-"}),I.doadora_registro&&I.touro_nome&&"  ",r.jsx("span",{className:"font-medium",children:I.touro_nome||""})]})},I.te_id))})}),r.jsx(W,{children:r.jsx(Us,{value:M.data_diagnostico,onChange:I=>U(k.receptora_id,"data_diagnostico",I||""),className:"w-36",disabled:i.status==="FECHADO"})}),r.jsx(W,{children:r.jsxs(_t,{value:M.resultado,onValueChange:I=>F(k.receptora_id,I),disabled:i.status==="FECHADO",children:[r.jsx(pt,{className:"w-32",children:r.jsx(bt,{placeholder:"Resultado"})}),r.jsxs(gt,{children:[r.jsx(Ie,{value:"PRENHE",children:"PRENHE"}),r.jsx(Ie,{value:"VAZIA",children:"VAZIA"}),r.jsx(Ie,{value:"RETOQUE",children:"RETOQUE"})]})]})}),r.jsx(W,{children:M.resultado==="PRENHE"||M.resultado==="RETOQUE"?r.jsx(Ee,{type:"number",min:"1",max:"3",value:M.numero_gestacoes,onChange:I=>U(k.receptora_id,"numero_gestacoes",I.target.value),placeholder:"1-3",className:"w-20",disabled:i.status==="FECHADO"}):r.jsx("span",{className:"text-slate-400",children:"-"})}),r.jsx(W,{children:r.jsx(Wa,{value:M.observacoes,onChange:I=>U(k.receptora_id,"observacoes",I.target.value),placeholder:"Observaes",rows:2,className:"w-48",disabled:i.status==="FECHADO"})})]},k.receptora_id)})})]})})})]})]})}function QU(){const[e,t]=u.useState([]),[a,s]=u.useState(""),[n,o]=u.useState([]),[i,l]=u.useState(null),[c,d]=u.useState([]),[f,h]=u.useState(!1),[p,m]=u.useState(!1),[b,y]=u.useState(!1),{toast:_}=fa(),[x,v]=u.useState({}),[g,E]=u.useState({veterinario_responsavel:"",tecnico_responsavel:""}),j=new Date().toISOString().split("T")[0];u.useEffect(()=>{S()},[]),u.useEffect(()=>{a?N(a):(o([]),l(null),d([]),v({}))},[a]),u.useEffect(()=>{i?i.status==="FECHADO"?(E({veterinario_responsavel:i.veterinario_sexagem||"",tecnico_responsavel:i.tecnico_sexagem||""}),y(!1),T(i)):i.veterinario_sexagem&&i.tecnico_sexagem?(E({veterinario_responsavel:i.veterinario_sexagem,tecnico_responsavel:i.tecnico_sexagem}),y(!1),T(i)):(E({veterinario_responsavel:"",tecnico_responsavel:""}),y(!0),d([]),v({})):(d([]),v({}),y(!1))},[i]);const S=async()=>{try{const{data:M,error:A}=await z.from("fazendas").select("*").order("nome");if(A)throw A;t(M||[])}catch(M){_({title:"Erro ao carregar fazendas",description:M instanceof Error?M.message:"Erro desconhecido",variant:"destructive"})}},N=async M=>{try{h(!0);const{data:A}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",M),q=(A==null?void 0:A.map(G=>G.receptora_id))||[],{data:I}=await z.from("receptoras").select("id").in("id",q).in("status_reprodutivo",["PRENHE","PRENHE_RETOQUE","PRENHE_FEMEA","PRENHE_MACHO","PRENHE_SEM_SEXO","PRENHE_2_SEXOS"]),w=(I==null?void 0:I.map(G=>G.id))||[],{data:C}=await z.from("transferencias_embrioes").select("id, receptora_id, data_te").in("receptora_id",w).eq("status_te","REALIZADA").order("data_te",{ascending:!1}),{data:$}=await z.from("diagnosticos_gestacao").select("receptora_id, data_te, veterinario_responsavel, tecnico_responsavel, data_diagnostico").in("receptora_id",w).eq("tipo_diagnostico","SEXAGEM").order("data_diagnostico",{ascending:!1}),O=new Map,L=new Map;C==null||C.forEach(G=>{var be;const te=`${M}-${G.data_te}`,Y=`${G.data_te}-${G.receptora_id}`;if(L.has(G.data_te)||L.set(G.data_te,new Set),L.get(G.data_te).add(G.receptora_id),!O.has(te)){const de=$==null?void 0:$.find(V=>V.data_te===G.data_te);O.set(te,{id:te,fazenda_id:M,fazenda_nome:((be=e.find(V=>V.id===M))==null?void 0:be.nome)||"",data_te:G.data_te,quantidade_receptoras:0,veterinario_sexagem:(de==null?void 0:de.veterinario_responsavel)||void 0,tecnico_sexagem:(de==null?void 0:de.tecnico_responsavel)||void 0,status:"ABERTO"})}}),O.forEach(G=>{var be;const te=((be=L.get(G.data_te))==null?void 0:be.size)||0;G.quantidade_receptoras=te;const Y=($==null?void 0:$.filter(de=>de.data_te===G.data_te))||[];Y.length>0&&Y.length>=te&&(G.status="FECHADO")});const H=Array.from(O.values()).sort((G,te)=>new Date(te.data_te).getTime()-new Date(G.data_te).getTime());o(H)}catch(A){_({title:"Erro ao carregar lotes",description:A instanceof Error?A.message:"Erro desconhecido",variant:"destructive"}),o([])}finally{h(!1)}},R=async()=>{if(!g.veterinario_responsavel.trim()||!g.tecnico_responsavel.trim()){_({title:"Erro de validao",description:"Veterinrio e tcnico responsveis so obrigatrios",variant:"destructive"});return}if(!i)return;const M={...i,veterinario_sexagem:g.veterinario_responsavel.trim(),tecnico_sexagem:g.tecnico_responsavel.trim(),status:"ABERTO"};l(M),y(!1),await T(M)},T=async M=>{try{h(!0);const{data:A}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",M.fazenda_id),q=(A==null?void 0:A.map(K=>K.receptora_id))||[],{data:I}=await z.from("receptoras").select("id, identificacao, nome, status_reprodutivo").in("id",q).in("status_reprodutivo",["PRENHE","PRENHE_RETOQUE","PRENHE_FEMEA","PRENHE_MACHO","PRENHE_SEM_SEXO","PRENHE_2_SEXOS"]),w=(I==null?void 0:I.map(K=>K.id))||[];if(w.length===0){d([]);return}const[C,$,O]=await Promise.all([z.from("transferencias_embrioes").select("id, receptora_id, embriao_id, data_te").in("receptora_id",w).eq("data_te",M.data_te).eq("status_te","REALIZADA"),z.from("diagnosticos_gestacao").select("*").in("receptora_id",w).eq("tipo_diagnostico","DG").eq("data_te",M.data_te).order("data_diagnostico",{ascending:!1}),z.from("diagnosticos_gestacao").select("*").in("receptora_id",w).eq("tipo_diagnostico","SEXAGEM").eq("data_te",M.data_te).order("data_diagnostico",{ascending:!1})]),L=C.data,H=$.data,G=O.data;if(!L||L.length===0){d([]);return}const te=L.map(K=>K.embriao_id).filter(Boolean);let Y=new Map;if(te.length>0){const{data:K}=await z.from("embrioes").select("id, identificacao, classificacao, lote_fiv_id, lote_fiv_acasalamento_id").in("id",te);K&&(Y=new Map(K.map(ne=>[ne.id,ne])))}const be=[...new Set(Array.from(Y.values()).map(K=>K.lote_fiv_id).filter(Boolean))],de=[...new Set(Array.from(Y.values()).map(K=>K.lote_fiv_acasalamento_id).filter(Boolean))],[V,le]=await Promise.all([be.length>0?z.from("lotes_fiv").select("id, data_abertura").in("id",be):Promise.resolve({data:null}),de.length>0?z.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",de):Promise.resolve({data:null})]),B=V.data||[],ie=le.data||[],xe=new Map(B.map(K=>[K.id,K]));let pe=new Map,Ce=new Map;if(ie.length>0){const K=[...new Set(ie.map(ge=>ge.aspiracao_doadora_id).filter(Boolean))],ne=[...new Set(ie.map(ge=>ge.dose_semen_id).filter(Boolean))],[D,Q]=await Promise.all([K.length>0?z.from("aspiracoes_doadoras").select("id, doadora_id").in("id",K):Promise.resolve({data:null}),ne.length>0?z.from("doses_semen").select("id, nome").in("id",ne):Promise.resolve({data:null})]),J=D.data||[],oe=Q.data||[];if(J.length>0){const ge=[...new Set(J.map(Ne=>Ne.doadora_id))];if(ge.length>0){const{data:Ne}=await z.from("doadoras").select("id, registro").in("id",ge);if(Ne){const me=new Map(Ne.map(je=>[je.id,je.registro])),_e=new Map(J.map(je=>[je.id,je.doadora_id]));ie.forEach(je=>{if(je.aspiracao_doadora_id){const Ze=_e.get(je.aspiracao_doadora_id);if(Ze){const it=me.get(Ze);it&&pe.set(je.id,it)}}})}}}oe.length>0&&(oe.forEach(ge=>{Ce.set(ge.id,ge.nome)}),ie.forEach(ge=>{if(ge.dose_semen_id){const Ne=Ce.get(ge.dose_semen_id);Ne&&Ce.set(ge.id,Ne)}}))}const De=new Map;H==null||H.forEach(K=>{De.has(K.receptora_id)||De.set(K.receptora_id,K)});const he=new Map;G==null||G.forEach(K=>{he.has(K.receptora_id)||he.set(K.receptora_id,K)});const P=new Map;L.forEach(K=>{const ne=`${K.receptora_id}-${K.data_te}`;P.has(ne)||P.set(ne,[]),P.get(ne).push(K)});const ee=[];P.forEach((K,ne)=>{const D=K[0],Q=I==null?void 0:I.find(me=>me.id===D.receptora_id);if(!Q)return;const J=[];let oe=null,ge=null;if(K.forEach(me=>{const _e=Y.get(me.embriao_id);if(!_e)return;const je=xe.get(_e.lote_fiv_id);if(!je)return;if(!oe){oe=je.data_abertura;const Je=new Date(je.data_abertura);ge=Math.floor((new Date().getTime()-Je.getTime())/(1e3*60*60*24))}const Ze=_e.lote_fiv_acasalamento_id?pe.get(_e.lote_fiv_acasalamento_id):void 0,it=_e.lote_fiv_acasalamento_id?Ce.get(_e.lote_fiv_acasalamento_id):void 0;J.push({te_id:me.id,embriao_id:_e.id,embriao_identificacao:_e.identificacao,embriao_classificacao:_e.classificacao,lote_fiv_id:_e.lote_fiv_id,lote_fiv_acasalamento_id:_e.lote_fiv_acasalamento_id,doadora_registro:Ze,touro_nome:it})}),J.length===0||!oe||ge===null)return;const Ne=De.get(D.receptora_id);!Ne||Ne.resultado==="VAZIA"||ee.push({receptora_id:D.receptora_id,brinco:Q.identificacao,nome:Q.nome,data_te:D.data_te,embrioes:J,data_abertura_lote:oe,dias_gestacao:ge,numero_gestacoes:Ne.numero_gestacoes||1,diagnostico_existente:he.get(D.receptora_id)?{id:he.get(D.receptora_id).id,data_diagnostico:he.get(D.receptora_id).data_diagnostico,resultado:he.get(D.receptora_id).resultado,numero_gestacoes:he.get(D.receptora_id).numero_gestacoes,observacoes:he.get(D.receptora_id).observacoes}:void 0})}),ee.sort((K,ne)=>K.brinco.localeCompare(ne.brinco)),d(ee);const ue={};ee.forEach(K=>{if(K.diagnostico_existente){const ne=he.get(K.receptora_id);let D=new Array(K.numero_gestacoes).fill("").map(()=>""),Q=K.diagnostico_existente.observacoes||"";if(ne!=null&&ne.observacoes){const J=ne.observacoes.match(/SEXAGENS:([^|]+)/);if(J){for(D=J[1].split(",").map(ge=>ge.trim());D.length<K.numero_gestacoes;)D.push("");D=D.slice(0,K.numero_gestacoes),Q=ne.observacoes.replace(/SEXAGENS:[^|]+\|?/,"").trim()}}D.every(J=>!J)&&(ne!=null&&ne.sexagem)&&(D[0]=ne.sexagem),ue[K.receptora_id]={data_sexagem:K.diagnostico_existente.data_diagnostico,sexagens:D,observacoes:Q}}else ue[K.receptora_id]={data_sexagem:j,sexagens:new Array(K.numero_gestacoes).fill("").map(()=>""),observacoes:""}}),v(ue)}catch(A){_({title:"Erro ao carregar receptoras",description:A instanceof Error?A.message:"Erro desconhecido",variant:"destructive"}),d([])}finally{h(!1)}},F=(M,A,q)=>{v(I=>{const w=I[M]||{data_sexagem:j,sexagens:[],observacoes:""},C=[...w.sexagens];return C[A]=q,{...I,[M]:{...w,sexagens:C}}})},U=(M,A,q)=>{v(I=>({...I,[M]:{...I[M],[A]:q}}))},Z=(M,A)=>{const q=M.filter($=>$&&$!=="VAZIA");if(q.length===0)return"VAZIA";const I=q.includes("FEMEA"),w=q.includes("MACHO"),C=q.includes("SEM_SEXO");return I&&!w&&!C?"PRENHE_FEMEA":w&&!I&&!C?"PRENHE_MACHO":I&&w?"PRENHE_2_SEXOS":"PRENHE_SEM_SEXO"},ce=async()=>{if(!i)return;if(!g.veterinario_responsavel.trim()||!g.tecnico_responsavel.trim()){_({title:"Erro de validao",description:"Veterinrio e tcnico responsveis so obrigatrios",variant:"destructive"});return}const M=c.filter(A=>{const q=x[A.receptora_id];return!q||!q.data_sexagem||!q.sexagens||q.sexagens.length===0||q.sexagens.every(I=>!I)});if(M.length>0){_({title:"Erro de validao",description:`H ${M.length} receptora(s) sem sexagem definida`,variant:"destructive"});return}try{m(!0);const A=[],q=[],I=[];if(c.forEach(C=>{var B,ie;const $=x[C.receptora_id];if(!$||!$.data_sexagem)return;const O=$.sexagens.filter(xe=>xe&&xe!=="VAZIA"),L=$.sexagens.every(xe=>!xe||xe==="VAZIA"),H=Z($.sexagens,C.numero_gestacoes),G=H==="VAZIA"?"VAZIA":"PRENHE";let te=null;if(G==="PRENHE"){const xe=O.every(he=>he==="FEMEA")&&O.length>0,pe=O.every(he=>he==="MACHO")&&O.length>0,Ce=O.includes("FEMEA")&&O.includes("MACHO"),De=O.includes("SEM_SEXO");xe?te="FEMEA":pe?te="MACHO":Ce?te=O[0]||"FEMEA":De?te=O.find(P=>P!=="SEM_SEXO")||null:O.length>0?te=O.find(he=>he==="FEMEA"||he==="MACHO")||null:te=null}const Y=G==="VAZIA"?0:O.length;(te==="PRENHE"||te==="SEM_SEXO")&&(te=O.find(pe=>pe==="FEMEA"||pe==="MACHO")||null);let be=$.observacoes?$.observacoes.trim():"";const de=$.sexagens.map(xe=>xe||"").filter(xe=>xe),V=de.length>0?de.join(","):"";V&&(be.includes("SEXAGENS:")?be=be.replace(/SEXAGENS:[^|]+/,`SEXAGENS:${V}`):be=be?`SEXAGENS:${V}|${be}`:`SEXAGENS:${V}`);const le={receptora_id:C.receptora_id,data_te:C.data_te,tipo_diagnostico:"SEXAGEM",data_diagnostico:$.data_sexagem,resultado:G,sexagem:te,numero_gestacoes:Y,observacoes:be||null};(B=g.veterinario_responsavel)!=null&&B.trim()&&(le.veterinario_responsavel=g.veterinario_responsavel.trim()),(ie=g.tecnico_responsavel)!=null&&ie.trim()&&(le.tecnico_responsavel=g.tecnico_responsavel.trim()),C.diagnostico_existente?q.push({id:C.diagnostico_existente.id,...le}):A.push(le),I.push({receptora_id:C.receptora_id,status:H})}),A.length>0){const{error:C}=await z.from("diagnosticos_gestacao").insert(A);if(C)throw console.error("Erro ao inserir sexagens:",C),new Error(`Erro ao inserir sexagens: ${C.message}`)}if(q.length>0)for(const C of q){const{id:$,...O}=C,{error:L}=await z.from("diagnosticos_gestacao").update(O).eq("id",$);if(L)throw console.error("Erro ao atualizar sexagem:",L),new Error(`Erro ao atualizar sexagem: ${L.message}`)}for(const C of I)await Px(C.receptora_id,C.status);const w=c.every(C=>{const $=x[C.receptora_id];return $&&$.data_sexagem&&$.sexagens&&$.sexagens.some(O=>O)});l({...i,veterinario_sexagem:g.veterinario_responsavel.trim(),tecnico_sexagem:g.tecnico_responsavel.trim(),status:w?"FECHADO":"ABERTO"}),_({title:"Lote salvo com sucesso",description:`${c.length} sexagem(ns) registrada(s)`}),await N(a),i&&await T(i)}catch(A){console.error("Erro detalhado ao salvar lote:",A);const q=A instanceof Error?A.message:"Erro desconhecido";_({title:"Erro ao salvar lote",description:q,variant:"destructive"})}finally{m(!1)}},k=c.every(M=>{const A=x[M.receptora_id];return A&&A.data_sexagem&&A.sexagens&&A.sexagens.some(q=>q)});return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Sexagem"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Registrar sexagem fetal por lote de receptoras prenhes"})]})}),r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Selecionar Fazenda"})}),r.jsx(ke,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"fazenda",children:"Fazenda *"}),r.jsxs(_t,{value:a,onValueChange:s,children:[r.jsx(pt,{children:r.jsx(bt,{placeholder:"Selecione a fazenda"})}),r.jsx(gt,{children:e.map(M=>r.jsx(Ie,{value:M.id,children:M.nome},M.id))})]})]})})]}),a&&r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Lotes de Receptoras Prenhes"})}),r.jsx(ke,{children:f?r.jsx(Pt,{}):n.length===0?r.jsx("p",{className:"text-center text-slate-500 py-8",children:"Nenhum lote de receptoras prenhes encontrado nesta fazenda"}):r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Data TE"}),r.jsx(X,{children:"Quantidade"}),r.jsx(X,{children:"Vet. Sexagem"}),r.jsx(X,{children:"Tc. Sexagem"}),r.jsx(X,{children:"Status"}),r.jsx(X,{className:"text-right",children:"Aes"})]})}),r.jsx(Tt,{children:n.map(M=>r.jsxs(Oe,{className:(i==null?void 0:i.id)===M.id?"bg-blue-50":"",children:[r.jsx(W,{className:"font-medium",children:new Date(M.data_te).toLocaleDateString("pt-BR")}),r.jsxs(W,{children:[M.quantidade_receptoras," receptoras"]}),r.jsx(W,{children:M.veterinario_sexagem||"-"}),r.jsx(W,{children:M.tecnico_sexagem||"-"}),r.jsx(W,{children:r.jsx(cn,{status:M.status==="ABERTO"?"ABERTO":"FECHADO"})}),r.jsx(W,{className:"text-right",children:r.jsx(re,{size:"sm",onClick:()=>l(M),variant:(i==null?void 0:i.id)===M.id?"default":"outline",children:(i==null?void 0:i.id)===M.id?"Selecionado":"Selecionar"})})]},M.id))})]})})]}),i&&b&&r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsx(Pe,{children:"Abrir Lote de Sexagem"})}),r.jsxs(ke,{className:"space-y-4",children:[r.jsxs("p",{className:"text-slate-600",children:["Lote de TE em ",new Date(i.data_te).toLocaleDateString("pt-BR")," - ",i.quantidade_receptoras," receptoras prenhes"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"veterinario",children:"Veterinrio Responsvel *"}),r.jsx(Ee,{id:"veterinario",value:g.veterinario_responsavel,onChange:M=>E({...g,veterinario_responsavel:M.target.value}),placeholder:"Nome do veterinrio"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"tecnico",children:"Tcnico Responsvel *"}),r.jsx(Ee,{id:"tecnico",value:g.tecnico_responsavel,onChange:M=>E({...g,tecnico_responsavel:M.target.value}),placeholder:"Nome do tcnico"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(re,{onClick:R,className:"bg-green-600 hover:bg-green-700",disabled:!g.veterinario_responsavel.trim()||!g.tecnico_responsavel.trim(),children:[r.jsx(ch,{className:"w-4 h-4 mr-2"}),"Abrir Lote"]}),r.jsx(re,{variant:"outline",onClick:()=>{y(!1),l(null)},children:"Cancelar"})]})]})]}),i&&!b&&c.length>0&&r.jsxs(Me,{children:[r.jsx(ze,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Pe,{children:["Receptoras Prenhes do Lote - ",c.length," ",c.length===1?"receptora":"receptoras",i.status==="FECHADO"&&r.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"(Lote Fechado - Somente Leitura)"})]}),i.status==="ABERTO"&&r.jsxs(re,{onClick:ce,disabled:!k||p,className:"bg-green-600 hover:bg-green-700",children:[r.jsx(qd,{className:"w-4 h-4 mr-2"}),p?"Salvando...":"Salvar Lote Completo"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"veterinario_sexagem",children:"Veterinrio Responsvel (Sexagem) *"}),r.jsx(Ee,{id:"veterinario_sexagem",value:g.veterinario_responsavel,onChange:M=>E({...g,veterinario_responsavel:M.target.value}),placeholder:"Nome do veterinrio",disabled:i.status==="FECHADO"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{htmlFor:"tecnico_sexagem",children:"Tcnico Responsvel (Sexagem) *"}),r.jsx(Ee,{id:"tecnico_sexagem",value:g.tecnico_responsavel,onChange:M=>E({...g,tecnico_responsavel:M.target.value}),placeholder:"Nome do tcnico",disabled:i.status==="FECHADO"})]})]})]})}),r.jsx(ke,{children:f?r.jsx(Pt,{}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(At,{children:[r.jsx(Dt,{children:r.jsxs(Oe,{children:[r.jsx(X,{children:"Receptora"}),r.jsx(X,{children:"Dias Gestao"}),r.jsx(X,{children:"Embrio(es)"}),r.jsx(X,{children:"Doadora / Touro"}),r.jsx(X,{children:"N Gest."}),r.jsx(X,{children:"Data Sexagem"}),r.jsx(X,{children:"Sexagens"}),r.jsx(X,{children:"Observaes"})]})}),r.jsx(Tt,{children:c.map(M=>{var I;const A=x[M.receptora_id]||{data_sexagem:j,sexagens:new Array(M.numero_gestacoes).fill("").map(()=>""),observacoes:""},q=!!M.diagnostico_existente;return r.jsxs(Oe,{children:[r.jsxs(W,{className:"font-medium",children:[M.brinco,M.nome&&r.jsxs("span",{className:"text-slate-500 text-sm ml-2",children:["(",M.nome,")"]}),q&&r.jsx(cn,{status:((I=M.diagnostico_existente)==null?void 0:I.resultado)||"",className:"ml-2"})]}),r.jsxs(W,{children:[r.jsx("span",{className:"font-semibold",children:M.dias_gestacao})," dias"]}),r.jsx(W,{children:r.jsx("div",{className:"space-y-1",children:M.embrioes.map((w,C)=>r.jsx("div",{className:"text-sm",children:r.jsxs("div",{className:"font-medium",children:[w.embriao_identificacao||`Embrio ${C+1}`,w.embriao_classificacao&&r.jsxs("span",{className:"text-slate-500 ml-2",children:["(",w.embriao_classificacao,")"]})]})},w.te_id))})}),r.jsx(W,{children:r.jsx("div",{className:"space-y-1",children:M.embrioes.map((w,C)=>r.jsx("div",{className:"text-sm",children:r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:w.doadora_registro||"-"}),w.doadora_registro&&w.touro_nome&&"  ",r.jsx("span",{className:"font-medium",children:w.touro_nome||""})]})},w.te_id))})}),r.jsx(W,{className:"font-medium text-center",children:M.numero_gestacoes}),r.jsx(W,{children:r.jsx(Us,{value:A.data_sexagem,onChange:w=>U(M.receptora_id,"data_sexagem",w||""),className:"w-36",disabled:i.status==="FECHADO"})}),r.jsx(W,{children:r.jsx("div",{className:"flex gap-2",children:Array.from({length:M.numero_gestacoes},(w,C)=>{const $=A.sexagens[C]||"",L=$!==""?void 0:M.numero_gestacoes>1?`Gest. ${C+1}`:"Selecione";return r.jsxs(_t,{value:$,onValueChange:H=>F(M.receptora_id,C,H),disabled:i.status==="FECHADO",children:[r.jsx(pt,{className:"w-28",children:r.jsx(bt,{placeholder:L})}),r.jsxs(gt,{children:[r.jsx(Ie,{value:"FEMEA",children:"Fmea"}),r.jsx(Ie,{value:"MACHO",children:"Macho"}),r.jsx(Ie,{value:"SEM_SEXO",children:"Sem sexo"}),r.jsx(Ie,{value:"VAZIA",children:"Vazia"})]})]},C)})})}),r.jsx(W,{children:r.jsx(Wa,{value:A.observacoes,onChange:w=>U(M.receptora_id,"observacoes",w.target.value),placeholder:"Observaes",rows:2,className:"w-48",disabled:i.status==="FECHADO"})})]},M.receptora_id)})})]})})})]})]})}function ZU(){return r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-gray-50 to-blue-50 p-6 text-center",children:r.jsxs("div",{className:"space-y-6 max-w-md",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("h1",{className:"text-8xl font-bold text-blue-600",children:"404"}),r.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Page Not Found"}),r.jsx("p",{className:"text-muted-foreground",children:"The page you're looking for doesn't exist or may have been moved."})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[r.jsx(re,{asChild:!0,children:r.jsx("a",{href:"/",children:"Return Home"})}),r.jsx(re,{variant:"outline",onClick:()=>window.history.back(),children:"Go Back"})]})]})})}const XU=new Uz,KU=()=>r.jsx(Vz,{client:XU,children:r.jsxs(yz,{children:[r.jsx($O,{}),r.jsx(zM,{}),r.jsx(GP,{children:r.jsxs(FP,{children:[r.jsxs(It,{element:r.jsx(KP,{}),children:[r.jsx(It,{path:"/",element:r.jsx(p6,{})}),r.jsx(It,{path:"/clientes",element:r.jsx(x6,{})}),r.jsx(It,{path:"/clientes/novo",element:r.jsx(N_,{})}),r.jsx(It,{path:"/clientes/:id",element:r.jsx(L3,{})}),r.jsx(It,{path:"/clientes/:id/editar",element:r.jsx(N_,{})}),r.jsx(It,{path:"/fazendas",element:r.jsx(F3,{})}),r.jsx(It,{path:"/fazendas/:id",element:r.jsx(q3,{})}),r.jsx(It,{path:"/doadoras",element:r.jsx(y5,{})}),r.jsx(It,{path:"/doadoras/:id",element:r.jsx(N5,{})}),r.jsx(It,{path:"/receptoras",element:r.jsx(AF,{})}),r.jsx(It,{path:"/receptoras/:id/historico",element:r.jsx(gC,{})}),r.jsx(It,{path:"/protocolos",element:r.jsx(VB,{})}),r.jsx(It,{path:"/protocolos/novo",element:r.jsx(zU,{})}),r.jsx(It,{path:"/protocolos/:id",element:r.jsx(PU,{})}),r.jsx(It,{path:"/protocolos/:id/passo2",element:r.jsx(qU,{})}),r.jsx(It,{path:"/protocolos/:id/relatorio",element:r.jsx(lb,{})}),r.jsx(It,{path:"/protocolos/fechados/:id/relatorio",element:r.jsx(lb,{})}),r.jsx(It,{path:"/aspiracoes",element:r.jsx(BU,{})}),r.jsx(It,{path:"/aspiracoes/novo",element:r.jsx(UU,{})}),r.jsx(It,{path:"/aspiracoes/:id",element:r.jsx(HU,{})}),r.jsx(It,{path:"/doses-semen",element:r.jsx(VU,{})}),r.jsx(It,{path:"/lotes-fiv",element:r.jsx(cb,{})}),r.jsx(It,{path:"/lotes-fiv/:id",element:r.jsx(cb,{})}),r.jsx(It,{path:"/embrioes",element:r.jsx(GU,{})}),r.jsx(It,{path:"/transferencia",element:r.jsx(YU,{})}),r.jsx(It,{path:"/dg",element:r.jsx(WU,{})}),r.jsx(It,{path:"/sexagem",element:r.jsx(QU,{})})]}),r.jsx(It,{path:"*",element:r.jsx(ZU,{})})]})})]})});lO.createRoot(document.getElementById("root")).render(r.jsx(KU,{}));
