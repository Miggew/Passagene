import{a as me,r as v,s as d,b as Q,j as e,H as U,S as ae,d as B,D as ue,F as xe,e as pe,f as ge}from"./index-B-7HRnm0.js";import{l as he}from"./logoescrito-8k2gFWOl.js";import{B as F}from"./badge-BCHVCiM7.js";import{S as H}from"./skeleton-Ba6ODj6_.js";import{E as ie}from"./EmptyState-gn01eel2.js";import{u as ce}from"./use-toast-DDUqdzpY.js";import{B as de}from"./beef-Cc-72Nix.js";import{B as J}from"./baby-D2-VQuVM.js";import{M as be}from"./map-pin-B7CeMiQc.js";import{A as O}from"./arrow-right-BdNnsrEd.js";import{t as oe,d as fe}from"./differenceInCalendarDays-CrzntjZV.js";import{U as Y}from"./users-B1VQ-Dt9.js";import{T as ve}from"./triangle-alert-DsRw1gwV.js";import{S as je}from"./stethoscope-CqwDDDR1.js";import{C as Z}from"./calendar-D8momPux.js";import{U as Ne}from"./user-check-BrP8ddMU.js";import{A as le}from"./activity-BuPU1g6A.js";function ye(){var g,f;const{permissions:t}=me(),[x,o]=v.useState([]),[n,c]=v.useState([]),[p,j]=v.useState(!0),m=(t==null?void 0:t.isAdmin)??!1,a=(t==null?void 0:t.isCliente)??!1,b=(g=t==null?void 0:t.profile)==null?void 0:g.id,y=(f=t==null?void 0:t.profile)==null?void 0:f.cliente_id,s=v.useCallback(async()=>{if(!t){j(!1);return}try{if(j(!0),m){const{data:h,error:r}=await d.from("clientes").select("id, nome").order("nome");if(r)throw r;o(h||[]),c((h||[]).map(i=>i.id));return}if(a&&y){const{data:h,error:r}=await d.from("clientes").select("id, nome").eq("id",y).single();if(r)throw r;o(h?[h]:[]),c(h?[h.id]:[]);return}if(b){const{data:h,error:r}=await d.from("user_clientes").select("cliente_id").eq("user_id",b);if(r)throw r;const i=(h||[]).map(N=>N.cliente_id);if(i.length===0){o([]),c([]);return}const{data:C,error:P}=await d.from("clientes").select("id, nome").in("id",i).order("nome");if(P)throw P;o(C||[]),c((C||[]).map(N=>N.id))}}catch(h){console.error("[useUserClientes] Erro ao carregar clientes:",h),o([]),c([])}finally{j(!1)}},[t,m,a,b,y]);return v.useEffect(()=>{s()},[s]),{clientes:x,clienteIds:n,loading:p,reload:s,hasAccess:n.length>0||m,isSingleCliente:n.length===1}}function we({clienteId:t}){const{toast:x}=ce(),o=Q(),[n,c]=v.useState(!0),[p,j]=v.useState({totalFazendas:0,totalReceptoras:0,totalPrenhes:0,totalEmbrioes:0,totalDoses:0}),[m,a]=v.useState([]);v.useEffect(()=>{t&&b()},[t]);const b=async()=>{var s,g;try{c(!0);const{data:f,error:h}=await d.from("fazendas").select("id, nome, localizacao").eq("cliente_id",t).order("nome");if(h)throw h;const r=(f==null?void 0:f.map(u=>u.id))||[],[i,C,P]=await Promise.all([d.from("embrioes").select("id",{count:"exact",head:!0}).eq("cliente_id",t).eq("status_atual","CONGELADO"),d.from("doses_semen").select("id",{count:"exact",head:!0}).eq("cliente_id",t),r.length>0?d.from("vw_receptoras_fazenda_atual").select("receptora_id, fazenda_id_atual").eq("cliente_id",t):Promise.resolve({data:[]})]),N=((s=P.data)==null?void 0:s.map(u=>u.receptora_id))||[];let z=[];if(N.length>0){const{data:u}=await d.from("receptoras").select("id, status_reprodutivo").in("id",N);z=u||[]}const A=new Map;(g=P.data)==null||g.forEach(u=>{var G;const _=z.find(E=>E.id===u.receptora_id);if(_){const E=A.get(u.fazenda_id_atual)||{total:0,prenhes:0};E.total++,(G=_.status_reprodutivo)!=null&&G.includes("PRENHE")&&E.prenhes++,A.set(u.fazenda_id_atual,E)}});let R=0,k=0;A.forEach(u=>{R+=u.total,k+=u.prenhes});const $=(f||[]).map(u=>{const _=A.get(u.id)||{total:0,prenhes:0};return{id:u.id,nome:u.nome,localizacao:u.localizacao,totalReceptoras:_.total,totalPrenhes:_.prenhes}});j({totalFazendas:(f==null?void 0:f.length)||0,totalReceptoras:R,totalPrenhes:k,totalEmbrioes:i.count||0,totalDoses:C.count||0}),a($)}catch(f){x({title:"Erro ao carregar dados",description:f instanceof Error?f.message:"Erro desconhecido",variant:"destructive"})}finally{c(!1)}};if(n)return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[...Array(5)].map((s,g)=>e.jsx(H,{className:"h-20 rounded-xl"},g))}),e.jsx(H,{className:"h-48 rounded-xl"})]});const y=[{label:"Fazendas",value:p.totalFazendas,icon:U,color:"text-emerald-500",bg:"bg-emerald-500/10"},{label:"Receptoras",value:p.totalReceptoras,icon:de,color:"text-orange-500",bg:"bg-orange-500/10"},{label:"Prenhes",value:p.totalPrenhes,icon:J,color:"text-pink-500",bg:"bg-pink-500/10"},{label:"Embriões",value:p.totalEmbrioes,icon:ae,color:"text-cyan-500",bg:"bg-cyan-500/10",sublabel:"congelados"},{label:"Doses",value:p.totalDoses,icon:B,color:"text-indigo-500",bg:"bg-indigo-500/10",sublabel:"sêmen"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-xl border border-border bg-card overflow-hidden",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 divide-x divide-y md:divide-y-0 divide-border/50",children:y.map(s=>e.jsx("div",{className:"p-4 hover:bg-muted/30 transition-colors group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${s.bg} flex items-center justify-center shrink-0 group-hover:scale-105 transition-transform`,children:e.jsx(s.icon,{className:`w-5 h-5 ${s.color}`})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s.label}),e.jsx("p",{className:"text-xl font-bold truncate",children:s.value}),s.sublabel&&e.jsx("p",{className:"text-[10px] text-muted-foreground",children:s.sublabel})]})]})},s.label))})}),e.jsxs("div",{className:"rounded-xl border border-border bg-card overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-border bg-gradient-to-r from-muted/50 to-transparent flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Minhas Fazendas"}),m.length>0&&e.jsxs(F,{variant:"outline",className:"text-xs",children:[m.length," fazenda",m.length!==1?"s":""]})]}),m.length===0?e.jsx("div",{className:"p-8",children:e.jsx(ie,{title:"Nenhuma fazenda",description:"Você ainda não possui fazendas cadastradas"})}):e.jsx("div",{className:"divide-y divide-border/50",children:m.map(s=>e.jsxs("div",{onClick:()=>o(`/fazendas/${s.id}`),className:"flex items-center justify-between p-4 hover:bg-gradient-to-r hover:from-primary/5 hover:to-transparent cursor-pointer group transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-500/10 flex items-center justify-center shrink-0 group-hover:scale-105 transition-transform",children:e.jsx(U,{className:"w-5 h-5 text-emerald-500"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate group-hover:text-primary transition-colors",children:s.nome}),s.localizacao&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1 truncate",children:[e.jsx(be,{className:"w-3 h-3 shrink-0"}),s.localizacao]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"text-center px-3 py-1 rounded-lg bg-muted/50",children:[e.jsx("p",{className:"text-sm font-bold",children:s.totalReceptoras}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"receptoras"})]}),e.jsxs("div",{className:"text-center px-3 py-1 rounded-lg bg-pink-500/10",children:[e.jsx("p",{className:"text-sm font-bold text-pink-600",children:s.totalPrenhes}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"prenhes"})]})]}),e.jsx(O,{className:"w-4 h-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]})]},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>o("/embrioes-congelados"),className:"flex items-center gap-3 p-3 rounded-xl border border-border bg-card hover:border-primary/30 hover:bg-gradient-to-r hover:from-primary/5 hover:to-transparent transition-all group text-left",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-cyan-500/10 flex items-center justify-center shrink-0 group-hover:scale-105 transition-transform",children:e.jsx(ae,{className:"w-5 h-5 text-cyan-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate group-hover:text-primary transition-colors",children:"Embriões"}),e.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[p.totalEmbrioes," congelados"]})]}),e.jsx(O,{className:"w-4 h-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity shrink-0"})]}),e.jsxs("button",{onClick:()=>o("/doses-semen"),className:"flex items-center gap-3 p-3 rounded-xl border border-border bg-card hover:border-primary/30 hover:bg-gradient-to-r hover:from-primary/5 hover:to-transparent transition-all group text-left",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-indigo-500/10 flex items-center justify-center shrink-0 group-hover:scale-105 transition-transform",children:e.jsx(B,{className:"w-5 h-5 text-indigo-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate group-hover:text-primary transition-colors",children:"Doses de Sêmen"}),e.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[p.totalDoses," disponíveis"]})]}),e.jsx(O,{className:"w-4 h-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity shrink-0"})]})]})]})}function K(t,x){const o=oe(t),n=oe(x),c=ne(o,n),p=Math.abs(fe(o,n));o.setDate(o.getDate()-c*p);const j=+(ne(o,n)===-c),m=c*(p-j);return m===0?0:m}function ne(t,x){const o=t.getFullYear()-x.getFullYear()||t.getMonth()-x.getMonth()||t.getDate()-x.getDate()||t.getHours()-x.getHours()||t.getMinutes()-x.getMinutes()||t.getSeconds()-x.getSeconds()||t.getMilliseconds()-x.getMilliseconds();return o<0?-1:o>0?1:o}function _e({clienteIds:t}){const{toast:x}=ce(),o=Q(),[n,c]=v.useState(!0),[p,j]=v.useState({totalClientes:0,totalFazendas:0,totalReceptoras:0,totalPrenhes:0}),[m,a]=v.useState({protocolosPasso2:0,receptorasDG:0,receptorasSexagem:0,partoProximo:0}),[b,y]=v.useState([]);v.useEffect(()=>{t.length>0?s():c(!1)},[t]);const s=async()=>{var r;try{c(!0);const{data:i,error:C}=await d.from("fazendas").select("id, nome, cliente_id, cliente:clientes(nome)").in("cliente_id",t).order("nome");if(C)throw C;const P=(i==null?void 0:i.map(l=>l.id))||[];if(P.length===0){j({totalClientes:t.length,totalFazendas:0,totalReceptoras:0,totalPrenhes:0}),c(!1);return}const{data:N}=await d.from("vw_receptoras_fazenda_atual").select("receptora_id, fazenda_id_atual").in("cliente_id",t),z=(N==null?void 0:N.map(l=>l.receptora_id))||[];let A=[];if(z.length>0){const{data:l}=await d.from("receptoras").select("id, status_reprodutivo, data_provavel_parto").in("id",z);A=l||[]}const{data:R}=await d.from("protocolos_sincronizacao").select("id, fazenda_id").in("fazenda_id",P).eq("status","PASSO1_FECHADO"),{data:k}=await d.from("transferencias_embrioes").select("id, receptora_id, data_te").in("receptora_id",z).eq("status_te","REALIZADA"),$=new Map;N==null||N.forEach(l=>{const w=A.find(D=>D.id===l.receptora_id);if(w){const D=$.get(l.fazenda_id_atual)||[];D.push(w),$.set(l.fazenda_id_atual,D)}});const u=new Map;k==null||k.forEach(l=>{if(l.receptora_id&&l.data_te){const w=u.get(l.receptora_id);(!w||l.data_te>w)&&u.set(l.receptora_id,l.data_te)}});const _=new Date;let G=0,E=0,W=0,X=0,ee=0,te=0;const T=new Map;R==null||R.forEach(l=>{T.set(l.fazenda_id,(T.get(l.fazenda_id)||0)+1),W++});const I=[];for(const l of i||[]){const w=$.get(l.id)||[];G+=w.length;let D=0,L=0,V=0;w.forEach(M=>{const q=M.status_reprodutivo||"VAZIA";if(q.includes("PRENHE")&&E++,q==="SERVIDA"){const S=u.get(M.id);S&&K(_,new Date(S))>=27&&(D++,X++)}if(q==="PRENHE"||q==="PRENHE_RETOQUE"){const S=u.get(M.id);S&&K(_,new Date(S))>=54&&(L++,ee++)}if(M.data_provavel_parto&&q.includes("PRENHE")){const S=K(new Date(M.data_provavel_parto),_);S>=0&&S<=30&&(V++,te++)}});const re=T.get(l.id)||0,se=re+D+L+V;se>0&&I.push({id:l.id,nome:l.nome,cliente_nome:((r=l.cliente)==null?void 0:r.nome)||"",protocolosPasso2:re,receptorasDG:D,receptorasSexagem:L,partoProximo:V,totalPendentes:se})}I.sort((l,w)=>w.totalPendentes-l.totalPendentes),j({totalClientes:t.length,totalFazendas:(i==null?void 0:i.length)||0,totalReceptoras:G,totalPrenhes:E}),a({protocolosPasso2:W,receptorasDG:X,receptorasSexagem:ee,partoProximo:te}),y(I.slice(0,5))}catch(i){x({title:"Erro ao carregar dados",description:i instanceof Error?i.message:"Erro desconhecido",variant:"destructive"})}finally{c(!1)}};if(n)return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[...Array(4)].map((r,i)=>e.jsx(H,{className:"h-20 rounded-xl"},i))}),e.jsx(H,{className:"h-32 rounded-xl"})]});if(t.length===0)return e.jsx("div",{className:"rounded-xl border border-border bg-card p-8",children:e.jsx(ie,{title:"Nenhum cliente vinculado",description:"Você ainda não tem clientes vinculados. Entre em contato com o administrador."})});const g=m.protocolosPasso2+m.receptorasDG+m.receptorasSexagem+m.partoProximo,f=[{label:"Clientes",value:p.totalClientes,icon:Y,color:"text-blue-500",bg:"bg-blue-500/10"},{label:"Fazendas",value:p.totalFazendas,icon:U,color:"text-emerald-500",bg:"bg-emerald-500/10"},{label:"Receptoras",value:p.totalReceptoras,icon:de,color:"text-orange-500",bg:"bg-orange-500/10"},{label:"Prenhes",value:p.totalPrenhes,icon:J,color:"text-pink-500",bg:"bg-pink-500/10"}],h=[{key:"protocolosPasso2",label:"2º Passo",icon:B,color:"text-yellow-600",bg:"bg-yellow-500/10",border:"border-yellow-500/20"},{key:"receptorasDG",label:"DG (≥27d)",icon:je,color:"text-purple-600",bg:"bg-purple-500/10",border:"border-purple-500/20"},{key:"receptorasSexagem",label:"Sexagem (≥54d)",icon:ue,color:"text-pink-600",bg:"bg-pink-500/10",border:"border-pink-500/20"},{key:"partoProximo",label:"Parto ≤30d",icon:Z,color:"text-green-600",bg:"bg-green-500/10",border:"border-green-500/20"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-xl border border-border bg-card overflow-hidden",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 divide-x divide-y md:divide-y-0 divide-border/50",children:f.map(r=>e.jsx("div",{className:"p-4 hover:bg-muted/30 transition-colors group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${r.bg} flex items-center justify-center shrink-0 group-hover:scale-105 transition-transform`,children:e.jsx(r.icon,{className:`w-5 h-5 ${r.color}`})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:r.label}),e.jsx("p",{className:"text-xl font-bold truncate",children:r.value})]})]})},r.label))})}),g>0&&e.jsxs("div",{className:"rounded-xl border border-amber-500/30 bg-gradient-to-r from-amber-500/5 via-card to-card p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ve,{className:"w-5 h-5 text-amber-600"}),e.jsx("h3",{className:"font-semibold text-foreground",children:"Serviços Pendentes"}),e.jsxs(F,{className:"bg-amber-500/15 text-amber-600 border-amber-500/30 ml-auto",children:[g," total"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:h.map(r=>{const i=m[r.key];return i===0?null:e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${r.bg} border ${r.border}`,children:[e.jsx(r.icon,{className:`w-5 h-5 ${r.color}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold",children:i}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.label})]})]},r.key)})})]}),b.length>0&&e.jsxs("div",{className:"rounded-xl border border-border bg-card overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-border bg-gradient-to-r from-muted/50 to-transparent",children:e.jsx("h3",{className:"font-semibold text-sm",children:"Próximos Serviços por Fazenda"})}),e.jsx("div",{className:"divide-y divide-border/50",children:b.map(r=>e.jsxs("div",{onClick:()=>o(`/fazendas/${r.id}`),className:"flex items-center justify-between p-3 hover:bg-muted/30 cursor-pointer group transition-colors",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate group-hover:text-primary transition-colors",children:r.nome}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:r.cliente_nome})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.protocolosPasso2>0&&e.jsxs(F,{variant:"outline",className:"text-[10px] px-1.5 py-0 bg-yellow-500/10 text-yellow-700 border-yellow-500/30",children:[r.protocolosPasso2," 2ºP"]}),r.receptorasDG>0&&e.jsxs(F,{variant:"outline",className:"text-[10px] px-1.5 py-0 bg-purple-500/10 text-purple-700 border-purple-500/30",children:[r.receptorasDG," DG"]}),r.receptorasSexagem>0&&e.jsxs(F,{variant:"outline",className:"text-[10px] px-1.5 py-0 bg-pink-500/10 text-pink-700 border-pink-500/30",children:[r.receptorasSexagem," Sex"]}),r.partoProximo>0&&e.jsxs(F,{variant:"outline",className:"text-[10px] px-1.5 py-0 bg-green-500/10 text-green-700 border-green-500/30",children:[r.partoProximo," Parto"]})]}),e.jsx(O,{className:"w-4 h-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]})]},r.id))})]}),g===0&&b.length===0&&e.jsxs("div",{className:"rounded-xl border border-border bg-card p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/10 flex items-center justify-center mx-auto mb-3",children:e.jsx(Z,{className:"w-6 h-6 text-green-600"})}),e.jsx("p",{className:"font-medium text-foreground",children:"Tudo em dia!"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Não há serviços pendentes no momento"})]})]})}function Pe(){const t=Q(),[x,o]=v.useState(!0),[n,c]=v.useState({totalClientes:0,totalFazendas:0,totalUsuarios:0,usuariosAtivos:0,totalReceptoras:0,totalDoadoras:0,totalEmbrioes:0,protocolosAbertos:0,lotesAbertos:0});v.useEffect(()=>{p()},[]);async function p(){o(!0);try{const[a,b,y,s,g,f,h,r,i]=await Promise.all([d.from("clientes").select("id",{count:"exact",head:!0}),d.from("fazendas").select("id",{count:"exact",head:!0}),d.from("user_profiles").select("id",{count:"exact",head:!0}),d.from("user_profiles").select("id",{count:"exact",head:!0}).eq("active",!0),d.from("receptoras").select("id",{count:"exact",head:!0}),d.from("doadoras").select("id",{count:"exact",head:!0}),d.from("embrioes").select("id",{count:"exact",head:!0}).eq("status_atual","CONGELADO"),d.from("protocolos_sincronizacao").select("id",{count:"exact",head:!0}).eq("status","PASSO1_FECHADO"),d.from("lotes_fiv").select("id",{count:"exact",head:!0}).eq("status","ABERTO")]);c({totalClientes:a.count||0,totalFazendas:b.count||0,totalUsuarios:y.count||0,usuariosAtivos:s.count||0,totalReceptoras:g.count||0,totalDoadoras:f.count||0,totalEmbrioes:h.count||0,protocolosAbertos:r.count||0,lotesAbertos:i.count||0})}catch(a){console.error("[HomeDashboardAdmin] Erro ao carregar dados:",a)}finally{o(!1)}}if(x)return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[...Array(6)].map((a,b)=>e.jsx(H,{className:"h-20 rounded-xl"},b))}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[...Array(4)].map((a,b)=>e.jsx(H,{className:"h-16 rounded-xl"},b))})]});const j=[{label:"Clientes",value:n.totalClientes,icon:Y,color:"text-blue-500",bg:"bg-blue-500/10"},{label:"Fazendas",value:n.totalFazendas,icon:U,color:"text-emerald-500",bg:"bg-emerald-500/10"},{label:"Usuários",value:`${n.usuariosAtivos}/${n.totalUsuarios}`,icon:Ne,color:"text-violet-500",bg:"bg-violet-500/10"},{label:"Receptoras",value:n.totalReceptoras,icon:le,color:"text-pink-500",bg:"bg-pink-500/10"},{label:"Doadoras",value:n.totalDoadoras,icon:le,color:"text-amber-500",bg:"bg-amber-500/10"},{label:"Embriões",value:n.totalEmbrioes,icon:J,color:"text-cyan-500",bg:"bg-cyan-500/10"}],m=[{label:"Protocolos",sublabel:`${n.protocolosAbertos} aguardando 2º passo`,icon:B,color:"text-orange-500",bg:"bg-orange-500/10",href:"/protocolos"},{label:"Lotes FIV",sublabel:`${n.lotesAbertos} abertos`,icon:xe,color:"text-teal-500",bg:"bg-teal-500/10",href:"/lotes-fiv"},{label:"Painel Admin",sublabel:"Clientes e usuários",icon:Y,color:"text-blue-500",bg:"bg-blue-500/10",href:"/administrativo"},{label:"Relatórios",sublabel:"Visão geral",icon:Z,color:"text-purple-500",bg:"bg-purple-500/10",href:"/relatorios"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-xl border border-border bg-card overflow-hidden",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 divide-x divide-y lg:divide-y-0 divide-border/50",children:j.map(a=>e.jsx("div",{className:"p-4 hover:bg-muted/30 transition-colors group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${a.bg} flex items-center justify-center shrink-0 group-hover:scale-105 transition-transform`,children:e.jsx(a.icon,{className:`w-5 h-5 ${a.color}`})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:a.label}),e.jsx("p",{className:"text-xl font-bold truncate",children:a.value})]})]})},a.label))})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:m.map(a=>e.jsxs("button",{onClick:()=>t(a.href),className:"flex items-center gap-3 p-3 rounded-xl border border-border bg-card hover:border-primary/30 hover:bg-gradient-to-r hover:from-primary/5 hover:to-transparent transition-all group text-left",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${a.bg} flex items-center justify-center shrink-0 group-hover:scale-105 transition-transform`,children:e.jsx(a.icon,{className:`w-5 h-5 ${a.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate group-hover:text-primary transition-colors",children:a.label}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:a.sublabel})]}),e.jsx(O,{className:"w-4 h-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity shrink-0"})]},a.label))})]})}function Te(){var y,s;const{isAdmin:t,isCliente:x,isOperacional:o,profile:n,clienteId:c}=pe(),{clienteIds:p,clientes:j,loading:m}=ye(),a=()=>{const g=new Date().getHours();return g<12?"Bom dia":g<18?"Boa tarde":"Boa noite"},b=()=>x?"Acompanhe suas fazendas e animais":o?"Visão geral dos clientes vinculados":"Visão geral do sistema";return(x||o)&&m?e.jsx(ge,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-xl border border-border bg-gradient-to-br from-card via-card to-primary/5 p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-bl from-primary/10 via-transparent to-transparent rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-gradient-to-tr from-primary/5 via-transparent to-transparent rounded-full translate-y-1/2 -translate-x-1/2"}),e.jsxs("div",{className:"relative flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-8 rounded-full bg-primary"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-foreground",children:[a(),", ",((y=n==null?void 0:n.nome)==null?void 0:y.split(" ")[0])||"Usuário"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:b()})]})]})}),e.jsx("div",{className:"flex items-center justify-center md:justify-end",children:e.jsx("div",{className:"bg-card/80 backdrop-blur-sm rounded-xl border border-border/50 p-4 shadow-sm",children:e.jsx("img",{src:he,alt:"PassaGene",className:"h-10 w-auto"})})})]})]}),t&&e.jsx(Pe,{}),o&&!t&&e.jsx(_e,{clienteIds:p}),x&&c&&e.jsx(we,{clienteId:c,clienteNome:(s=j.find(g=>g.id===c))==null?void 0:s.nome})]})}export{Te as default};
