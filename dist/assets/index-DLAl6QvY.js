var jv=e=>{throw TypeError(e)};var Ff=(e,t,a)=>t.has(e)||jv("Cannot "+a);var re=(e,t,a)=>(Ff(e,t,"read from private field"),a?a.call(e):t.get(e)),gt=(e,t,a)=>t.has(e)?jv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),Qe=(e,t,a,s)=>(Ff(e,t,"write to private field"),s?s.call(e,a):t.set(e,a),a),Da=(e,t,a)=>(Ff(e,t,"access private method"),a);var td=(e,t,a,s)=>({set _(n){Qe(e,t,n,a)},get _(){return re(e,t,s)}});function g1(e,t){for(var a=0;a<t.length;a++){const s=t[a];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in e)){const o=Object.getOwnPropertyDescriptor(s,n);o&&Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();var ws=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function v1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var a=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var n=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(a,s,n.get?n:{enumerable:!0,get:function(){return e[s]}})}),a}var Sy={exports:{}},qu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x1=Symbol.for("react.transitional.element"),y1=Symbol.for("react.fragment");function Ey(e,t,a){var s=null;if(a!==void 0&&(s=""+a),t.key!==void 0&&(s=""+t.key),"key"in t){a={};for(var n in t)n!=="key"&&(a[n]=t[n])}else a=t;return t=a.ref,{$$typeof:x1,type:e,key:s,ref:t!==void 0?t:null,props:a}}qu.Fragment=y1;qu.jsx=Ey;qu.jsxs=Ey;Sy.exports=qu;var r=Sy.exports,Ny={exports:{}},Bu={},Cy={exports:{}},Ay={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,V){var F=T.length;T.push(V);e:for(;0<F;){var E=F-1>>>1,O=T[E];if(0<n(O,V))T[E]=V,T[F]=O,F=E;else break e}}function a(T){return T.length===0?null:T[0]}function s(T){if(T.length===0)return null;var V=T[0],F=T.pop();if(F!==V){T[0]=F;e:for(var E=0,O=T.length,U=O>>>1;E<U;){var M=2*(E+1)-1,X=T[M],$=M+1,ne=T[$];if(0>n(X,F))$<O&&0>n(ne,X)?(T[E]=ne,T[$]=F,E=$):(T[E]=X,T[M]=F,E=M);else if($<O&&0>n(ne,F))T[E]=ne,T[$]=F,E=$;else break e}}return V}function n(T,V){var F=T.sortIndex-V.sortIndex;return F!==0?F:T.id-V.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],f=1,h=null,p=3,m=!1,_=!1,g=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function j(T){for(var V=a(d);V!==null;){if(V.callback===null)s(d);else if(V.startTime<=T)s(d),V.sortIndex=V.expirationTime,t(c,V);else break;V=a(d)}}function w(T){if(g=!1,j(T),!_)if(a(c)!==null)_=!0,S||(S=!0,K());else{var V=a(d);V!==null&&H(w,V.startTime-T)}}var S=!1,N=-1,C=5,P=-1;function R(){return x?!0:!(e.unstable_now()-P<C)}function Q(){if(x=!1,S){var T=e.unstable_now();P=T;var V=!0;try{e:{_=!1,g&&(g=!1,v(N),N=-1),m=!0;var F=p;try{t:{for(j(T),h=a(c);h!==null&&!(h.expirationTime>T&&R());){var E=h.callback;if(typeof E=="function"){h.callback=null,p=h.priorityLevel;var O=E(h.expirationTime<=T);if(T=e.unstable_now(),typeof O=="function"){h.callback=O,j(T),V=!0;break t}h===a(c)&&s(c),j(T)}else s(c);h=a(c)}if(h!==null)V=!0;else{var U=a(d);U!==null&&H(w,U.startTime-T),V=!1}}break e}finally{h=null,p=F,m=!1}V=void 0}}finally{V?K():S=!1}}}var K;if(typeof b=="function")K=function(){b(Q)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,L=ce.port2;ce.port1.onmessage=Q,K=function(){L.postMessage(null)}}else K=function(){y(Q,0)};function H(T,V){N=y(function(){T(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(T){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var F=p;p=V;try{return T()}finally{p=F}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(T,V){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var F=p;p=T;try{return V()}finally{p=F}},e.unstable_scheduleCallback=function(T,V,F){var E=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?E+F:E):F=E,T){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=F+O,T={id:f++,callback:V,priorityLevel:T,startTime:F,expirationTime:O,sortIndex:-1},F>E?(T.sortIndex=F,t(d,T),a(c)===null&&T===a(d)&&(g?(v(N),N=-1):g=!0,H(w,F-E))):(T.sortIndex=O,t(c,T),_||m||(_=!0,S||(S=!0,K()))),T},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(T){var V=p;return function(){var F=p;p=V;try{return T.apply(this,arguments)}finally{p=F}}}})(Ay);Cy.exports=Ay;var b1=Cy.exports,Ty={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp=Symbol.for("react.transitional.element"),_1=Symbol.for("react.portal"),j1=Symbol.for("react.fragment"),w1=Symbol.for("react.strict_mode"),S1=Symbol.for("react.profiler"),E1=Symbol.for("react.consumer"),N1=Symbol.for("react.context"),C1=Symbol.for("react.forward_ref"),A1=Symbol.for("react.suspense"),T1=Symbol.for("react.memo"),Dy=Symbol.for("react.lazy"),wv=Symbol.iterator;function D1(e){return e===null||typeof e!="object"?null:(e=wv&&e[wv]||e["@@iterator"],typeof e=="function"?e:null)}var Ry={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Oy=Object.assign,zy={};function Wi(e,t,a){this.props=e,this.context=t,this.refs=zy,this.updater=a||Ry}Wi.prototype.isReactComponent={};Wi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function My(){}My.prototype=Wi.prototype;function _p(e,t,a){this.props=e,this.context=t,this.refs=zy,this.updater=a||Ry}var jp=_p.prototype=new My;jp.constructor=_p;Oy(jp,Wi.prototype);jp.isPureReactComponent=!0;var Sv=Array.isArray,Xt={H:null,A:null,T:null,S:null,V:null},Py=Object.prototype.hasOwnProperty;function wp(e,t,a,s,n,o){return a=o.ref,{$$typeof:bp,type:e,key:t,ref:a!==void 0?a:null,props:o}}function R1(e,t){return wp(e.type,t,void 0,void 0,void 0,e.props)}function Sp(e){return typeof e=="object"&&e!==null&&e.$$typeof===bp}function O1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return t[a]})}var Ev=/\/+/g;function qf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?O1(""+e.key):t.toString(36)}function Nv(){}function z1(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Nv,Nv):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Zo(e,t,a,s,n){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"bigint":case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case bp:case _1:i=!0;break;case Dy:return i=e._init,Zo(i(e._payload),t,a,s,n)}}if(i)return n=n(e),i=s===""?"."+qf(e,0):s,Sv(n)?(a="",i!=null&&(a=i.replace(Ev,"$&/")+"/"),Zo(n,t,a,"",function(d){return d})):n!=null&&(Sp(n)&&(n=R1(n,a+(n.key==null||e&&e.key===n.key?"":(""+n.key).replace(Ev,"$&/")+"/")+i)),t.push(n)),1;i=0;var l=s===""?".":s+":";if(Sv(e))for(var c=0;c<e.length;c++)s=e[c],o=l+qf(s,c),i+=Zo(s,t,a,o,n);else if(c=D1(e),typeof c=="function")for(e=c.call(e),c=0;!(s=e.next()).done;)s=s.value,o=l+qf(s,c++),i+=Zo(s,t,a,o,n);else if(o==="object"){if(typeof e.then=="function")return Zo(z1(e),t,a,s,n);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return i}function ad(e,t,a){if(e==null)return e;var s=[],n=0;return Zo(e,s,"","",function(o){return t.call(a,o,n++)}),s}function M1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(a){(e._status===0||e._status===-1)&&(e._status=1,e._result=a)},function(a){(e._status===0||e._status===-1)&&(e._status=2,e._result=a)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Cv=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function P1(){}nt.Children={map:ad,forEach:function(e,t,a){ad(e,function(){t.apply(this,arguments)},a)},count:function(e){var t=0;return ad(e,function(){t++}),t},toArray:function(e){return ad(e,function(t){return t})||[]},only:function(e){if(!Sp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=Wi;nt.Fragment=j1;nt.Profiler=S1;nt.PureComponent=_p;nt.StrictMode=w1;nt.Suspense=A1;nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Xt;nt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Xt.H.useMemoCache(e)}};nt.cache=function(e){return function(){return e.apply(null,arguments)}};nt.cloneElement=function(e,t,a){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var s=Oy({},e.props),n=e.key,o=void 0;if(t!=null)for(i in t.ref!==void 0&&(o=void 0),t.key!==void 0&&(n=""+t.key),t)!Py.call(t,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&t.ref===void 0||(s[i]=t[i]);var i=arguments.length-2;if(i===1)s.children=a;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];s.children=l}return wp(e.type,n,void 0,void 0,o,s)};nt.createContext=function(e){return e={$$typeof:N1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:E1,_context:e},e};nt.createElement=function(e,t,a){var s,n={},o=null;if(t!=null)for(s in t.key!==void 0&&(o=""+t.key),t)Py.call(t,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(n[s]=t[s]);var i=arguments.length-2;if(i===1)n.children=a;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];n.children=l}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)n[s]===void 0&&(n[s]=i[s]);return wp(e,o,void 0,void 0,null,n)};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:C1,render:e}};nt.isValidElement=Sp;nt.lazy=function(e){return{$$typeof:Dy,_payload:{_status:-1,_result:e},_init:M1}};nt.memo=function(e,t){return{$$typeof:T1,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=Xt.T,a={};Xt.T=a;try{var s=e(),n=Xt.S;n!==null&&n(a,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(P1,Cv)}catch(o){Cv(o)}finally{Xt.T=t}};nt.unstable_useCacheRefresh=function(){return Xt.H.useCacheRefresh()};nt.use=function(e){return Xt.H.use(e)};nt.useActionState=function(e,t,a){return Xt.H.useActionState(e,t,a)};nt.useCallback=function(e,t){return Xt.H.useCallback(e,t)};nt.useContext=function(e){return Xt.H.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e,t){return Xt.H.useDeferredValue(e,t)};nt.useEffect=function(e,t,a){var s=Xt.H;if(typeof a=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(e,t)};nt.useId=function(){return Xt.H.useId()};nt.useImperativeHandle=function(e,t,a){return Xt.H.useImperativeHandle(e,t,a)};nt.useInsertionEffect=function(e,t){return Xt.H.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return Xt.H.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return Xt.H.useMemo(e,t)};nt.useOptimistic=function(e,t){return Xt.H.useOptimistic(e,t)};nt.useReducer=function(e,t,a){return Xt.H.useReducer(e,t,a)};nt.useRef=function(e){return Xt.H.useRef(e)};nt.useState=function(e){return Xt.H.useState(e)};nt.useSyncExternalStore=function(e,t,a){return Xt.H.useSyncExternalStore(e,t,a)};nt.useTransition=function(){return Xt.H.useTransition()};nt.version="19.1.1";Ty.exports=nt;var u=Ty.exports;const fe=wy(u),Ep=g1({__proto__:null,default:fe},[u]);var ky={exports:{}},Ba={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1=u;function Ly(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Gr(){}var qa={d:{f:Gr,r:function(){throw Error(Ly(522))},D:Gr,C:Gr,L:Gr,m:Gr,X:Gr,S:Gr,M:Gr},p:0,findDOMNode:null},L1=Symbol.for("react.portal");function I1(e,t,a){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L1,key:s==null?null:""+s,children:e,containerInfo:t,implementation:a}}var Pl=k1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Uu(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Ba.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=qa;Ba.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Ly(299));return I1(e,t,null,a)};Ba.flushSync=function(e){var t=Pl.T,a=qa.p;try{if(Pl.T=null,qa.p=2,e)return e()}finally{Pl.T=t,qa.p=a,qa.d.f()}};Ba.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,qa.d.C(e,t))};Ba.prefetchDNS=function(e){typeof e=="string"&&qa.d.D(e)};Ba.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var a=t.as,s=Uu(a,t.crossOrigin),n=typeof t.integrity=="string"?t.integrity:void 0,o=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;a==="style"?qa.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:s,integrity:n,fetchPriority:o}):a==="script"&&qa.d.X(e,{crossOrigin:s,integrity:n,fetchPriority:o,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Ba.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var a=Uu(t.as,t.crossOrigin);qa.d.M(e,{crossOrigin:a,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&qa.d.M(e)};Ba.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var a=t.as,s=Uu(a,t.crossOrigin);qa.d.L(e,a,{crossOrigin:s,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Ba.preloadModule=function(e,t){if(typeof e=="string")if(t){var a=Uu(t.as,t.crossOrigin);qa.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:a,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else qa.d.m(e)};Ba.requestFormReset=function(e){qa.d.r(e)};Ba.unstable_batchedUpdates=function(e,t){return e(t)};Ba.useFormState=function(e,t,a){return Pl.H.useFormState(e,t,a)};Ba.useFormStatus=function(){return Pl.H.useHostTransitionStatus()};Ba.version="19.1.1";function Iy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Iy)}catch(e){console.error(e)}}Iy(),ky.exports=Ba;var Oo=ky.exports;const Fy=wy(Oo);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ga=b1,qy=u,F1=Oo;function oe(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function By(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sc(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function Uy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Av(e){if(Sc(e)!==e)throw Error(oe(188))}function q1(e){var t=e.alternate;if(!t){if(t=Sc(e),t===null)throw Error(oe(188));return t!==e?null:e}for(var a=e,s=t;;){var n=a.return;if(n===null)break;var o=n.alternate;if(o===null){if(s=n.return,s!==null){a=s;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===a)return Av(n),e;if(o===s)return Av(n),t;o=o.sibling}throw Error(oe(188))}if(a.return!==s.return)a=n,s=o;else{for(var i=!1,l=n.child;l;){if(l===a){i=!0,a=n,s=o;break}if(l===s){i=!0,s=n,a=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===a){i=!0,a=o,s=n;break}if(l===s){i=!0,s=o,a=n;break}l=l.sibling}if(!i)throw Error(oe(189))}}if(a.alternate!==s)throw Error(oe(190))}if(a.tag!==3)throw Error(oe(188));return a.stateNode.current===a?e:t}function $y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=$y(e),t!==null)return t;e=e.sibling}return null}var Qt=Object.assign,B1=Symbol.for("react.element"),sd=Symbol.for("react.transitional.element"),Al=Symbol.for("react.portal"),si=Symbol.for("react.fragment"),Hy=Symbol.for("react.strict_mode"),Gh=Symbol.for("react.profiler"),U1=Symbol.for("react.provider"),Vy=Symbol.for("react.consumer"),wr=Symbol.for("react.context"),Np=Symbol.for("react.forward_ref"),Yh=Symbol.for("react.suspense"),Qh=Symbol.for("react.suspense_list"),Cp=Symbol.for("react.memo"),an=Symbol.for("react.lazy"),Kh=Symbol.for("react.activity"),$1=Symbol.for("react.memo_cache_sentinel"),Tv=Symbol.iterator;function vl(e){return e===null||typeof e!="object"?null:(e=Tv&&e[Tv]||e["@@iterator"],typeof e=="function"?e:null)}var H1=Symbol.for("react.client.reference");function Xh(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===H1?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case si:return"Fragment";case Gh:return"Profiler";case Hy:return"StrictMode";case Yh:return"Suspense";case Qh:return"SuspenseList";case Kh:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Al:return"Portal";case wr:return(e.displayName||"Context")+".Provider";case Vy:return(e._context.displayName||"Context")+".Consumer";case Np:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cp:return t=e.displayName||null,t!==null?t:Xh(e.type)||"Memo";case an:t=e._payload,e=e._init;try{return Xh(e(t))}catch{}}return null}var Tl=Array.isArray,$e=qy.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt=F1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,io={pending:!1,data:null,method:null,action:null},Zh=[],ri=-1;function ir(e){return{current:e}}function _a(e){0>ri||(e.current=Zh[ri],Zh[ri]=null,ri--)}function Zt(e,t){ri++,Zh[ri]=e.current,e.current=t}var ar=ir(null),Wl=ir(null),_n=ir(null),Kd=ir(null);function Xd(e,t){switch(Zt(_n,t),Zt(Wl,e),Zt(ar,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Mx(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Mx(t),e=lj(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}_a(ar),Zt(ar,e)}function Pi(){_a(ar),_a(Wl),_a(_n)}function Jh(e){e.memoizedState!==null&&Zt(Kd,e);var t=ar.current,a=lj(t,e.type);t!==a&&(Zt(Wl,e),Zt(ar,a))}function Zd(e){Wl.current===e&&(_a(ar),_a(Wl)),Kd.current===e&&(_a(Kd),cc._currentValue=io)}var Wh=Object.prototype.hasOwnProperty,Ap=ga.unstable_scheduleCallback,Bf=ga.unstable_cancelCallback,V1=ga.unstable_shouldYield,G1=ga.unstable_requestPaint,sr=ga.unstable_now,Y1=ga.unstable_getCurrentPriorityLevel,Gy=ga.unstable_ImmediatePriority,Yy=ga.unstable_UserBlockingPriority,Jd=ga.unstable_NormalPriority,Q1=ga.unstable_LowPriority,Qy=ga.unstable_IdlePriority,K1=ga.log,X1=ga.unstable_setDisableYieldValue,Ec=null,ls=null;function gn(e){if(typeof K1=="function"&&X1(e),ls&&typeof ls.setStrictMode=="function")try{ls.setStrictMode(Ec,e)}catch{}}var cs=Math.clz32?Math.clz32:W1,Z1=Math.log,J1=Math.LN2;function W1(e){return e>>>=0,e===0?32:31-(Z1(e)/J1|0)|0}var rd=256,nd=4194304;function Xn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function $u(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var n=0,o=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var l=s&134217727;return l!==0?(s=l&~o,s!==0?n=Xn(s):(i&=l,i!==0?n=Xn(i):a||(a=l&~e,a!==0&&(n=Xn(a))))):(l=s&~o,l!==0?n=Xn(l):i!==0?n=Xn(i):a||(a=s&~e,a!==0&&(n=Xn(a)))),n===0?0:t!==0&&t!==n&&!(t&o)&&(o=n&-n,a=t&-t,o>=a||o===32&&(a&4194048)!==0)?t:n}function Nc(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function eC(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ky(){var e=rd;return rd<<=1,!(rd&4194048)&&(rd=256),e}function Xy(){var e=nd;return nd<<=1,!(nd&62914560)&&(nd=4194304),e}function Uf(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Cc(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function tC(e,t,a,s,n,o){var i=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var l=e.entanglements,c=e.expirationTimes,d=e.hiddenUpdates;for(a=i&~a;0<a;){var f=31-cs(a),h=1<<f;l[f]=0,c[f]=-1;var p=d[f];if(p!==null)for(d[f]=null,f=0;f<p.length;f++){var m=p[f];m!==null&&(m.lane&=-536870913)}a&=~h}s!==0&&Zy(e,s,0),o!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=o&~(i&~t))}function Zy(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-cs(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&4194090}function Jy(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-cs(a),n=1<<s;n&t|e[s]&t&&(e[s]|=t),a&=~n}}function Tp(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Dp(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Wy(){var e=yt.p;return e!==0?e:(e=window.event,e===void 0?32:xj(e.type))}function aC(e,t){var a=yt.p;try{return yt.p=e,t()}finally{yt.p=a}}var Pn=Math.random().toString(36).slice(2),za="__reactFiber$"+Pn,Xa="__reactProps$"+Pn,el="__reactContainer$"+Pn,em="__reactEvents$"+Pn,sC="__reactListeners$"+Pn,rC="__reactHandles$"+Pn,Dv="__reactResources$"+Pn,Ac="__reactMarker$"+Pn;function Rp(e){delete e[za],delete e[Xa],delete e[em],delete e[sC],delete e[rC]}function ni(e){var t=e[za];if(t)return t;for(var a=e.parentNode;a;){if(t=a[el]||a[za]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Lx(e);e!==null;){if(a=e[za])return a;e=Lx(e)}return t}e=a,a=e.parentNode}return null}function tl(e){if(e=e[za]||e[el]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Dl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(oe(33))}function pi(e){var t=e[Dv];return t||(t=e[Dv]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ya(e){e[Ac]=!0}var eb=new Set,tb={};function zo(e,t){ki(e,t),ki(e+"Capture",t)}function ki(e,t){for(tb[e]=t,e=0;e<t.length;e++)eb.add(t[e])}var nC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rv={},Ov={};function oC(e){return Wh.call(Ov,e)?!0:Wh.call(Rv,e)?!1:nC.test(e)?Ov[e]=!0:(Rv[e]=!0,!1)}function Td(e,t,a){if(oC(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function od(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function mr(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}var $f,zv;function Jo(e){if($f===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);$f=t&&t[1]||"",zv=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$f+e+zv}var Hf=!1;function Vf(e,t){if(!e||Hf)return"";Hf=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(m){var p=m}Reflect.construct(e,[],h)}else{try{h.call()}catch(m){p=m}e.call(h.prototype)}}else{try{throw Error()}catch(m){p=m}(h=e())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(m){if(m&&p&&typeof m.stack=="string")return[m.stack,p.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=s.DetermineComponentFrameRoot(),i=o[0],l=o[1];if(i&&l){var c=i.split(`
`),d=l.split(`
`);for(n=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;n<d.length&&!d[n].includes("DetermineComponentFrameRoot");)n++;if(s===c.length||n===d.length)for(s=c.length-1,n=d.length-1;1<=s&&0<=n&&c[s]!==d[n];)n--;for(;1<=s&&0<=n;s--,n--)if(c[s]!==d[n]){if(s!==1||n!==1)do if(s--,n--,0>n||c[s]!==d[n]){var f=`
`+c[s].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=s&&0<=n);break}}}finally{Hf=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Jo(a):""}function iC(e){switch(e.tag){case 26:case 27:case 5:return Jo(e.type);case 16:return Jo("Lazy");case 13:return Jo("Suspense");case 19:return Jo("SuspenseList");case 0:case 15:return Vf(e.type,!1);case 11:return Vf(e.type.render,!1);case 1:return Vf(e.type,!0);case 31:return Jo("Activity");default:return""}}function Mv(e){try{var t="";do t+=iC(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function vs(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ab(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function lC(e){var t=ab(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,o=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wd(e){e._valueTracker||(e._valueTracker=lC(e))}function sb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=ab(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function eu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var cC=/[\n"\\]/g;function bs(e){return e.replace(cC,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function tm(e,t,a,s,n,o,i,l){e.name="",i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.type=i:e.removeAttribute("type"),t!=null?i==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+vs(t)):e.value!==""+vs(t)&&(e.value=""+vs(t)):i!=="submit"&&i!=="reset"||e.removeAttribute("value"),t!=null?am(e,i,vs(t)):a!=null?am(e,i,vs(a)):s!=null&&e.removeAttribute("value"),n==null&&o!=null&&(e.defaultChecked=!!o),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+vs(l):e.removeAttribute("name")}function rb(e,t,a,s,n,o,i,l){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||a!=null){if(!(o!=="submit"&&o!=="reset"||t!=null))return;a=a!=null?""+vs(a):"",t=t!=null?""+vs(t):a,l||t===e.value||(e.value=t),e.defaultValue=t}s=s??n,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=l?e.checked:!!s,e.defaultChecked=!!s,i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.name=i)}function am(e,t,a){t==="number"&&eu(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function gi(e,t,a,s){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&s&&(e[a].defaultSelected=!0)}else{for(a=""+vs(a),t=null,n=0;n<e.length;n++){if(e[n].value===a){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function nb(e,t,a){if(t!=null&&(t=""+vs(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+vs(a):""}function ob(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(oe(92));if(Tl(s)){if(1<s.length)throw Error(oe(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=vs(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s)}function Li(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var dC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pv(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||dC.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function ib(e,t,a){if(t!=null&&typeof t!="object")throw Error(oe(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var n in t)s=t[n],t.hasOwnProperty(n)&&a[n]!==s&&Pv(e,n,s)}else for(var o in t)t.hasOwnProperty(o)&&Pv(e,o,t[o])}function Op(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dd(e){return fC.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var sm=null;function zp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var oi=null,vi=null;function kv(e){var t=tl(e);if(t&&(e=t.stateNode)){var a=e[Xa]||null;e:switch(e=t.stateNode,t.type){case"input":if(tm(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+bs(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var n=s[Xa]||null;if(!n)throw Error(oe(90));tm(s,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&sb(s)}break e;case"textarea":nb(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&gi(e,!!a.multiple,t,!1)}}}var Gf=!1;function lb(e,t,a){if(Gf)return e(t,a);Gf=!0;try{var s=e(t);return s}finally{if(Gf=!1,(oi!==null||vi!==null)&&(Wu(),oi&&(t=oi,e=vi,vi=oi=null,kv(t),e)))for(t=0;t<e.length;t++)kv(e[t])}}function ec(e,t){var a=e.stateNode;if(a===null)return null;var s=a[Xa]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(oe(231,t,typeof a));return a}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rm=!1;if(Rr)try{var xl={};Object.defineProperty(xl,"passive",{get:function(){rm=!0}}),window.addEventListener("test",xl,xl),window.removeEventListener("test",xl,xl)}catch{rm=!1}var vn=null,Mp=null,Rd=null;function cb(){if(Rd)return Rd;var e,t=Mp,a=t.length,s,n="value"in vn?vn.value:vn.textContent,o=n.length;for(e=0;e<a&&t[e]===n[e];e++);var i=a-e;for(s=1;s<=i&&t[a-s]===n[o-s];s++);return Rd=n.slice(e,1<s?1-s:void 0)}function Od(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function id(){return!0}function Lv(){return!1}function Wa(e){function t(a,s,n,o,i){this._reactName=a,this._targetInst=n,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(a=e[l],this[l]=a?a(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?id:Lv,this.isPropagationStopped=Lv,this}return Qt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=id)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=id)},persist:function(){},isPersistent:id}),t}var Mo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hu=Wa(Mo),Tc=Qt({},Mo,{view:0,detail:0}),hC=Wa(Tc),Yf,Qf,yl,Vu=Qt({},Tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yl&&(yl&&e.type==="mousemove"?(Yf=e.screenX-yl.screenX,Qf=e.screenY-yl.screenY):Qf=Yf=0,yl=e),Yf)},movementY:function(e){return"movementY"in e?e.movementY:Qf}}),Iv=Wa(Vu),mC=Qt({},Vu,{dataTransfer:0}),pC=Wa(mC),gC=Qt({},Tc,{relatedTarget:0}),Kf=Wa(gC),vC=Qt({},Mo,{animationName:0,elapsedTime:0,pseudoElement:0}),xC=Wa(vC),yC=Qt({},Mo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bC=Wa(yC),_C=Qt({},Mo,{data:0}),Fv=Wa(_C),jC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=SC[e])?!!t[e]:!1}function Pp(){return EC}var NC=Qt({},Tc,{key:function(e){if(e.key){var t=jC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Od(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pp,charCode:function(e){return e.type==="keypress"?Od(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Od(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),CC=Wa(NC),AC=Qt({},Vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qv=Wa(AC),TC=Qt({},Tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pp}),DC=Wa(TC),RC=Qt({},Mo,{propertyName:0,elapsedTime:0,pseudoElement:0}),OC=Wa(RC),zC=Qt({},Vu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),MC=Wa(zC),PC=Qt({},Mo,{newState:0,oldState:0}),kC=Wa(PC),LC=[9,13,27,32],kp=Rr&&"CompositionEvent"in window,kl=null;Rr&&"documentMode"in document&&(kl=document.documentMode);var IC=Rr&&"TextEvent"in window&&!kl,db=Rr&&(!kp||kl&&8<kl&&11>=kl),Bv=" ",Uv=!1;function ub(e,t){switch(e){case"keyup":return LC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fb(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ii=!1;function FC(e,t){switch(e){case"compositionend":return fb(t);case"keypress":return t.which!==32?null:(Uv=!0,Bv);case"textInput":return e=t.data,e===Bv&&Uv?null:e;default:return null}}function qC(e,t){if(ii)return e==="compositionend"||!kp&&ub(e,t)?(e=cb(),Rd=Mp=vn=null,ii=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return db&&t.locale!=="ko"?null:t.data;default:return null}}var BC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $v(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!BC[e.type]:t==="textarea"}function hb(e,t,a,s){oi?vi?vi.push(s):vi=[s]:oi=s,t=xu(t,"onChange"),0<t.length&&(a=new Hu("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var Ll=null,tc=null;function UC(e){nj(e,0)}function Gu(e){var t=Dl(e);if(sb(t))return e}function Hv(e,t){if(e==="change")return t}var mb=!1;if(Rr){var Xf;if(Rr){var Zf="oninput"in document;if(!Zf){var Vv=document.createElement("div");Vv.setAttribute("oninput","return;"),Zf=typeof Vv.oninput=="function"}Xf=Zf}else Xf=!1;mb=Xf&&(!document.documentMode||9<document.documentMode)}function Gv(){Ll&&(Ll.detachEvent("onpropertychange",pb),tc=Ll=null)}function pb(e){if(e.propertyName==="value"&&Gu(tc)){var t=[];hb(t,tc,e,zp(e)),lb(UC,t)}}function $C(e,t,a){e==="focusin"?(Gv(),Ll=t,tc=a,Ll.attachEvent("onpropertychange",pb)):e==="focusout"&&Gv()}function HC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gu(tc)}function VC(e,t){if(e==="click")return Gu(t)}function GC(e,t){if(e==="input"||e==="change")return Gu(t)}function YC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hs=typeof Object.is=="function"?Object.is:YC;function ac(e,t){if(hs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var n=a[s];if(!Wh.call(t,n)||!hs(e[n],t[n]))return!1}return!0}function Yv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qv(e,t){var a=Yv(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Yv(a)}}function gb(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?gb(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vb(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=eu(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=eu(e.document)}return t}function Lp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var QC=Rr&&"documentMode"in document&&11>=document.documentMode,li=null,nm=null,Il=null,om=!1;function Kv(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;om||li==null||li!==eu(s)||(s=li,"selectionStart"in s&&Lp(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Il&&ac(Il,s)||(Il=s,s=xu(nm,"onSelect"),0<s.length&&(t=new Hu("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=li)))}function Yn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var ci={animationend:Yn("Animation","AnimationEnd"),animationiteration:Yn("Animation","AnimationIteration"),animationstart:Yn("Animation","AnimationStart"),transitionrun:Yn("Transition","TransitionRun"),transitionstart:Yn("Transition","TransitionStart"),transitioncancel:Yn("Transition","TransitionCancel"),transitionend:Yn("Transition","TransitionEnd")},Jf={},xb={};Rr&&(xb=document.createElement("div").style,"AnimationEvent"in window||(delete ci.animationend.animation,delete ci.animationiteration.animation,delete ci.animationstart.animation),"TransitionEvent"in window||delete ci.transitionend.transition);function Po(e){if(Jf[e])return Jf[e];if(!ci[e])return e;var t=ci[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in xb)return Jf[e]=t[a];return e}var yb=Po("animationend"),bb=Po("animationiteration"),_b=Po("animationstart"),KC=Po("transitionrun"),XC=Po("transitionstart"),ZC=Po("transitioncancel"),jb=Po("transitionend"),wb=new Map,im="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");im.push("scrollEnd");function Hs(e,t){wb.set(e,t),zo(t,[e])}var Xv=new WeakMap;function _s(e,t){if(typeof e=="object"&&e!==null){var a=Xv.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Mv(t)},Xv.set(e,t),t)}return{value:e,source:t,stack:Mv(t)}}var gs=[],di=0,Ip=0;function Yu(){for(var e=di,t=Ip=di=0;t<e;){var a=gs[t];gs[t++]=null;var s=gs[t];gs[t++]=null;var n=gs[t];gs[t++]=null;var o=gs[t];if(gs[t++]=null,s!==null&&n!==null){var i=s.pending;i===null?n.next=n:(n.next=i.next,i.next=n),s.pending=n}o!==0&&Sb(a,n,o)}}function Qu(e,t,a,s){gs[di++]=e,gs[di++]=t,gs[di++]=a,gs[di++]=s,Ip|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Fp(e,t,a,s){return Qu(e,t,a,s),tu(e)}function al(e,t){return Qu(e,null,null,t),tu(e)}function Sb(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var n=!1,o=e.return;o!==null;)o.childLanes|=a,s=o.alternate,s!==null&&(s.childLanes|=a),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(n=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,n&&t!==null&&(n=31-cs(a),e=o.hiddenUpdates,s=e[n],s===null?e[n]=[t]:s.push(t),t.lane=a|536870912),o):null}function tu(e){if(50<Ql)throw Ql=0,Am=null,Error(oe(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ui={};function JC(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(e,t,a,s){return new JC(e,t,a,s)}function qp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ar(e,t){var a=e.alternate;return a===null?(a=is(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Eb(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zd(e,t,a,s,n,o){var i=0;if(s=e,typeof e=="function")qp(e)&&(i=1);else if(typeof e=="string")i=e2(e,a,ar.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Kh:return e=is(31,a,t,n),e.elementType=Kh,e.lanes=o,e;case si:return lo(a.children,n,o,t);case Hy:i=8,n|=24;break;case Gh:return e=is(12,a,t,n|2),e.elementType=Gh,e.lanes=o,e;case Yh:return e=is(13,a,t,n),e.elementType=Yh,e.lanes=o,e;case Qh:return e=is(19,a,t,n),e.elementType=Qh,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U1:case wr:i=10;break e;case Vy:i=9;break e;case Np:i=11;break e;case Cp:i=14;break e;case an:i=16,s=null;break e}i=29,a=Error(oe(130,e===null?"null":typeof e,"")),s=null}return t=is(i,a,t,n),t.elementType=e,t.type=s,t.lanes=o,t}function lo(e,t,a,s){return e=is(7,e,s,t),e.lanes=a,e}function Wf(e,t,a){return e=is(6,e,null,t),e.lanes=a,e}function eh(e,t,a){return t=is(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var fi=[],hi=0,au=null,su=0,xs=[],ys=0,co=null,Sr=1,Er="";function Zn(e,t){fi[hi++]=su,fi[hi++]=au,au=e,su=t}function Nb(e,t,a){xs[ys++]=Sr,xs[ys++]=Er,xs[ys++]=co,co=e;var s=Sr;e=Er;var n=32-cs(s)-1;s&=~(1<<n),a+=1;var o=32-cs(t)+n;if(30<o){var i=n-n%5;o=(s&(1<<i)-1).toString(32),s>>=i,n-=i,Sr=1<<32-cs(t)+n|a<<n|s,Er=o+e}else Sr=1<<o|a<<n|s,Er=e}function Bp(e){e.return!==null&&(Zn(e,1),Nb(e,1,0))}function Up(e){for(;e===au;)au=fi[--hi],fi[hi]=null,su=fi[--hi],fi[hi]=null;for(;e===co;)co=xs[--ys],xs[ys]=null,Er=xs[--ys],xs[ys]=null,Sr=xs[--ys],xs[ys]=null}var Fa=null,sa=null,xt=!1,uo=null,Js=!1,lm=Error(oe(519));function go(e){var t=Error(oe(418,""));throw sc(_s(t,e)),lm}function Zv(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[za]=e,t[Xa]=s,a){case"dialog":lt("cancel",t),lt("close",t);break;case"iframe":case"object":case"embed":lt("load",t);break;case"video":case"audio":for(a=0;a<oc.length;a++)lt(oc[a],t);break;case"source":lt("error",t);break;case"img":case"image":case"link":lt("error",t),lt("load",t);break;case"details":lt("toggle",t);break;case"input":lt("invalid",t),rb(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),Wd(t);break;case"select":lt("invalid",t);break;case"textarea":lt("invalid",t),ob(t,s.value,s.defaultValue,s.children),Wd(t)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||ij(t.textContent,a)?(s.popover!=null&&(lt("beforetoggle",t),lt("toggle",t)),s.onScroll!=null&&lt("scroll",t),s.onScrollEnd!=null&&lt("scrollend",t),s.onClick!=null&&(t.onclick=af),t=!0):t=!1,t||go(e)}function Jv(e){for(Fa=e.return;Fa;)switch(Fa.tag){case 5:case 13:Js=!1;return;case 27:case 3:Js=!0;return;default:Fa=Fa.return}}function bl(e){if(e!==Fa)return!1;if(!xt)return Jv(e),xt=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Mm(e.type,e.memoizedProps)),a=!a),a&&sa&&go(e),Jv(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){sa=qs(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}sa=null}}else t===27?(t=sa,kn(e.type)?(e=Lm,Lm=null,sa=e):sa=t):sa=Fa?qs(e.stateNode.nextSibling):null;return!0}function Dc(){sa=Fa=null,xt=!1}function Wv(){var e=uo;return e!==null&&(Ya===null?Ya=e:Ya.push.apply(Ya,e),uo=null),e}function sc(e){uo===null?uo=[e]:uo.push(e)}var cm=ir(null),ko=null,Nr=null;function nn(e,t,a){Zt(cm,t._currentValue),t._currentValue=a}function Tr(e){e._currentValue=cm.current,_a(cm)}function dm(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function um(e,t,a,s){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var o=n.dependencies;if(o!==null){var i=n.child;o=o.firstContext;e:for(;o!==null;){var l=o;o=n;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=a,l=o.alternate,l!==null&&(l.lanes|=a),dm(o.return,a,e),s||(i=null);break e}o=l.next}}else if(n.tag===18){if(i=n.return,i===null)throw Error(oe(341));i.lanes|=a,o=i.alternate,o!==null&&(o.lanes|=a),dm(i,a,e),i=null}else i=n.child;if(i!==null)i.return=n;else for(i=n;i!==null;){if(i===e){i=null;break}if(n=i.sibling,n!==null){n.return=i.return,i=n;break}i=i.return}n=i}}function Rc(e,t,a,s){e=null;for(var n=t,o=!1;n!==null;){if(!o){if(n.flags&524288)o=!0;else if(n.flags&262144)break}if(n.tag===10){var i=n.alternate;if(i===null)throw Error(oe(387));if(i=i.memoizedProps,i!==null){var l=n.type;hs(n.pendingProps.value,i.value)||(e!==null?e.push(l):e=[l])}}else if(n===Kd.current){if(i=n.alternate,i===null)throw Error(oe(387));i.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(cc):e=[cc])}n=n.return}e!==null&&um(t,e,a,s),t.flags|=262144}function ru(e){for(e=e.firstContext;e!==null;){if(!hs(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function vo(e){ko=e,Nr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ma(e){return Cb(ko,e)}function ld(e,t){return ko===null&&vo(e),Cb(e,t)}function Cb(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Nr===null){if(e===null)throw Error(oe(308));Nr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Nr=Nr.next=t;return a}var WC=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},eA=ga.unstable_scheduleCallback,tA=ga.unstable_NormalPriority,ma={$$typeof:wr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $p(){return{controller:new WC,data:new Map,refCount:0}}function Oc(e){e.refCount--,e.refCount===0&&eA(tA,function(){e.controller.abort()})}var Fl=null,fm=0,Ii=0,xi=null;function aA(e,t){if(Fl===null){var a=Fl=[];fm=0,Ii=fg(),xi={status:"pending",value:void 0,then:function(s){a.push(s)}}}return fm++,t.then(ex,ex),t}function ex(){if(--fm===0&&Fl!==null){xi!==null&&(xi.status="fulfilled");var e=Fl;Fl=null,Ii=0,xi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function sA(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(n){a.push(n)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var n=0;n<a.length;n++)(0,a[n])(t)},function(n){for(s.status="rejected",s.reason=n,n=0;n<a.length;n++)(0,a[n])(void 0)}),s}var tx=$e.S;$e.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&aA(e,t),tx!==null&&tx(e,t)};var fo=ir(null);function Hp(){var e=fo.current;return e!==null?e:Vt.pooledCache}function Md(e,t){t===null?Zt(fo,fo.current):Zt(fo,t.pool)}function Ab(){var e=Hp();return e===null?null:{parent:ma._currentValue,pool:e}}var zc=Error(oe(460)),Tb=Error(oe(474)),Ku=Error(oe(542)),hm={then:function(){}};function ax(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cd(){}function Db(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(cd,cd),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,rx(e),e;default:if(typeof t.status=="string")t.then(cd,cd);else{if(e=Vt,e!==null&&100<e.shellSuspendCounter)throw Error(oe(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=s}},function(s){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,rx(e),e}throw ql=t,zc}}var ql=null;function sx(){if(ql===null)throw Error(oe(459));var e=ql;return ql=null,e}function rx(e){if(e===zc||e===Ku)throw Error(oe(483))}var sn=!1;function Vp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function jn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wn(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Ot&2){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,t=tu(e),Sb(e,null,a),t}return Qu(e,s,t,a),tu(e)}function Bl(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Jy(e,a)}}function th(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var n=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var i={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};o===null?n=o=i:o=o.next=i,a=a.next}while(a!==null);o===null?n=o=t:o=o.next=t}else n=o=t;a={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var pm=!1;function Ul(){if(pm){var e=xi;if(e!==null)throw e}}function $l(e,t,a,s){pm=!1;var n=e.updateQueue;sn=!1;var o=n.firstBaseUpdate,i=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==i&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(o!==null){var h=n.baseState;i=0,f=d=c=null,l=o;do{var p=l.lane&-536870913,m=p!==l.lane;if(m?(pt&p)===p:(s&p)===p){p!==0&&p===Ii&&(pm=!0),f!==null&&(f=f.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var _=e,g=l;p=t;var x=a;switch(g.tag){case 1:if(_=g.payload,typeof _=="function"){h=_.call(x,h,p);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=g.payload,p=typeof _=="function"?_.call(x,h,p):_,p==null)break e;h=Qt({},h,p);break e;case 2:sn=!0}}p=l.callback,p!==null&&(e.flags|=64,m&&(e.flags|=8192),m=n.callbacks,m===null?n.callbacks=[p]:m.push(p))}else m={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=m,c=h):f=f.next=m,i|=p;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;m=l,l=m.next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}while(!0);f===null&&(c=h),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=f,o===null&&(n.shared.lanes=0),On|=i,e.lanes=i,e.memoizedState=h}}function Rb(e,t){if(typeof e!="function")throw Error(oe(191,e));e.call(t)}function Ob(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Rb(a[e],t)}var Fi=ir(null),nu=ir(0);function nx(e,t){e=Mr,Zt(nu,e),Zt(Fi,t),Mr=e|t.baseLanes}function gm(){Zt(nu,Mr),Zt(Fi,Fi.current)}function Gp(){Mr=nu.current,_a(Fi),_a(nu)}var Dn=0,ot=null,It=null,da=null,ou=!1,yi=!1,xo=!1,iu=0,rc=0,bi=null,rA=0;function oa(){throw Error(oe(321))}function Yp(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!hs(e[a],t[a]))return!1;return!0}function Qp(e,t,a,s,n,o){return Dn=o,ot=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$e.H=e===null||e.memoizedState===null?c_:d_,xo=!1,o=a(s,n),xo=!1,yi&&(o=Mb(t,a,s,n)),zb(e),o}function zb(e){$e.H=lu;var t=It!==null&&It.next!==null;if(Dn=0,da=It=ot=null,ou=!1,rc=0,bi=null,t)throw Error(oe(300));e===null||ba||(e=e.dependencies,e!==null&&ru(e)&&(ba=!0))}function Mb(e,t,a,s){ot=e;var n=0;do{if(yi&&(bi=null),rc=0,yi=!1,25<=n)throw Error(oe(301));if(n+=1,da=It=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}$e.H=uA,o=t(a,s)}while(yi);return o}function nA(){var e=$e.H,t=e.useState()[0];return t=typeof t.then=="function"?Mc(t):t,e=e.useState()[0],(It!==null?It.memoizedState:null)!==e&&(ot.flags|=1024),t}function Kp(){var e=iu!==0;return iu=0,e}function Xp(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Zp(e){if(ou){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ou=!1}Dn=0,da=It=ot=null,yi=!1,rc=iu=0,bi=null}function Va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return da===null?ot.memoizedState=da=e:da=da.next=e,da}function ua(){if(It===null){var e=ot.alternate;e=e!==null?e.memoizedState:null}else e=It.next;var t=da===null?ot.memoizedState:da.next;if(t!==null)da=t,It=e;else{if(e===null)throw ot.alternate===null?Error(oe(467)):Error(oe(310));It=e,e={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},da===null?ot.memoizedState=da=e:da=da.next=e}return da}function Jp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mc(e){var t=rc;return rc+=1,bi===null&&(bi=[]),e=Db(bi,e,t),t=ot,(da===null?t.memoizedState:da.next)===null&&(t=t.alternate,$e.H=t===null||t.memoizedState===null?c_:d_),e}function Xu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Mc(e);if(e.$$typeof===wr)return Ma(e)}throw Error(oe(438,String(e)))}function Wp(e){var t=null,a=ot.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=ot.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Jp(),ot.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=$1;return t.index++,a}function Or(e,t){return typeof t=="function"?t(e):t}function Pd(e){var t=ua();return eg(t,It,e)}function eg(e,t,a){var s=e.queue;if(s===null)throw Error(oe(311));s.lastRenderedReducer=a;var n=e.baseQueue,o=s.pending;if(o!==null){if(n!==null){var i=n.next;n.next=o.next,o.next=i}t.baseQueue=n=o,s.pending=null}if(o=e.baseState,n===null)e.memoizedState=o;else{t=n.next;var l=i=null,c=null,d=t,f=!1;do{var h=d.lane&-536870913;if(h!==d.lane?(pt&h)===h:(Dn&h)===h){var p=d.revertLane;if(p===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Ii&&(f=!0);else if((Dn&p)===p){d=d.next,p===Ii&&(f=!0);continue}else h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=h,i=o):c=c.next=h,ot.lanes|=p,On|=p;h=d.action,xo&&a(o,h),o=d.hasEagerState?d.eagerState:a(o,h)}else p={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=p,i=o):c=c.next=p,ot.lanes|=h,On|=h;d=d.next}while(d!==null&&d!==t);if(c===null?i=o:c.next=l,!hs(o,e.memoizedState)&&(ba=!0,f&&(a=xi,a!==null)))throw a;e.memoizedState=o,e.baseState=i,e.baseQueue=c,s.lastRenderedState=o}return n===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function ah(e){var t=ua(),a=t.queue;if(a===null)throw Error(oe(311));a.lastRenderedReducer=e;var s=a.dispatch,n=a.pending,o=t.memoizedState;if(n!==null){a.pending=null;var i=n=n.next;do o=e(o,i.action),i=i.next;while(i!==n);hs(o,t.memoizedState)||(ba=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),a.lastRenderedState=o}return[o,s]}function Pb(e,t,a){var s=ot,n=ua(),o=xt;if(o){if(a===void 0)throw Error(oe(407));a=a()}else a=t();var i=!hs((It||n).memoizedState,a);i&&(n.memoizedState=a,ba=!0),n=n.queue;var l=Ib.bind(null,s,n,e);if(Pc(2048,8,l,[e]),n.getSnapshot!==t||i||da!==null&&da.memoizedState.tag&1){if(s.flags|=2048,qi(9,Zu(),Lb.bind(null,s,n,a,t),null),Vt===null)throw Error(oe(349));o||Dn&124||kb(s,t,a)}return a}function kb(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ot.updateQueue,t===null?(t=Jp(),ot.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Lb(e,t,a,s){t.value=a,t.getSnapshot=s,Fb(t)&&qb(e)}function Ib(e,t,a){return a(function(){Fb(t)&&qb(e)})}function Fb(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!hs(e,a)}catch{return!0}}function qb(e){var t=al(e,2);t!==null&&us(t,e,2)}function vm(e){var t=Va();if(typeof e=="function"){var a=e;if(e=a(),xo){gn(!0);try{a()}finally{gn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:e},t}function Bb(e,t,a,s){return e.baseState=a,eg(e,It,typeof s=="function"?s:Or)}function oA(e,t,a,s,n){if(Ju(e))throw Error(oe(485));if(e=t.action,e!==null){var o={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(i){o.listeners.push(i)}};$e.T!==null?a(!0):o.isTransition=!1,s(o),a=t.pending,a===null?(o.next=t.pending=o,Ub(t,o)):(o.next=a.next,t.pending=a.next=o)}}function Ub(e,t){var a=t.action,s=t.payload,n=e.state;if(t.isTransition){var o=$e.T,i={};$e.T=i;try{var l=a(n,s),c=$e.S;c!==null&&c(i,l),ox(e,t,l)}catch(d){xm(e,t,d)}finally{$e.T=o}}else try{o=a(n,s),ox(e,t,o)}catch(d){xm(e,t,d)}}function ox(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){ix(e,t,s)},function(s){return xm(e,t,s)}):ix(e,t,a)}function ix(e,t,a){t.status="fulfilled",t.value=a,$b(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Ub(e,a)))}function xm(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,$b(t),t=t.next;while(t!==s)}e.action=null}function $b(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Hb(e,t){return t}function lx(e,t){if(xt){var a=Vt.formState;if(a!==null){e:{var s=ot;if(xt){if(sa){t:{for(var n=sa,o=Js;n.nodeType!==8;){if(!o){n=null;break t}if(n=qs(n.nextSibling),n===null){n=null;break t}}o=n.data,n=o==="F!"||o==="F"?n:null}if(n){sa=qs(n.nextSibling),s=n.data==="F!";break e}}go(s)}s=!1}s&&(t=a[0])}}return a=Va(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hb,lastRenderedState:t},a.queue=s,a=o_.bind(null,ot,s),s.dispatch=a,s=vm(!1),o=rg.bind(null,ot,!1,s.queue),s=Va(),n={state:t,dispatch:null,action:e,pending:null},s.queue=n,a=oA.bind(null,ot,n,o,a),n.dispatch=a,s.memoizedState=e,[t,a,!1]}function cx(e){var t=ua();return Vb(t,It,e)}function Vb(e,t,a){if(t=eg(e,t,Hb)[0],e=Pd(Or)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Mc(t)}catch(i){throw i===zc?Ku:i}else s=t;t=ua();var n=t.queue,o=n.dispatch;return a!==t.memoizedState&&(ot.flags|=2048,qi(9,Zu(),iA.bind(null,n,a),null)),[s,o,e]}function iA(e,t){e.action=t}function dx(e){var t=ua(),a=It;if(a!==null)return Vb(t,a,e);ua(),t=t.memoizedState,a=ua();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function qi(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=ot.updateQueue,t===null&&(t=Jp(),ot.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Zu(){return{destroy:void 0,resource:void 0}}function Gb(){return ua().memoizedState}function kd(e,t,a,s){var n=Va();s=s===void 0?null:s,ot.flags|=e,n.memoizedState=qi(1|t,Zu(),a,s)}function Pc(e,t,a,s){var n=ua();s=s===void 0?null:s;var o=n.memoizedState.inst;It!==null&&s!==null&&Yp(s,It.memoizedState.deps)?n.memoizedState=qi(t,o,a,s):(ot.flags|=e,n.memoizedState=qi(1|t,o,a,s))}function ux(e,t){kd(8390656,8,e,t)}function Yb(e,t){Pc(2048,8,e,t)}function Qb(e,t){return Pc(4,2,e,t)}function Kb(e,t){return Pc(4,4,e,t)}function Xb(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zb(e,t,a){a=a!=null?a.concat([e]):null,Pc(4,4,Xb.bind(null,t,e),a)}function tg(){}function Jb(e,t){var a=ua();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&Yp(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function Wb(e,t){var a=ua();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&Yp(t,s[1]))return s[0];if(s=e(),xo){gn(!0);try{e()}finally{gn(!1)}}return a.memoizedState=[s,t],s}function ag(e,t,a){return a===void 0||Dn&1073741824?e.memoizedState=t:(e.memoizedState=a,e=$_(),ot.lanes|=e,On|=e,a)}function e_(e,t,a,s){return hs(a,t)?a:Fi.current!==null?(e=ag(e,a,s),hs(e,t)||(ba=!0),e):Dn&42?(e=$_(),ot.lanes|=e,On|=e,t):(ba=!0,e.memoizedState=a)}function t_(e,t,a,s,n){var o=yt.p;yt.p=o!==0&&8>o?o:8;var i=$e.T,l={};$e.T=l,rg(e,!1,t,a);try{var c=n(),d=$e.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=sA(c,s);Hl(e,t,f,ds(e))}else Hl(e,t,s,ds(e))}catch(h){Hl(e,t,{then:function(){},status:"rejected",reason:h},ds())}finally{yt.p=o,$e.T=i}}function lA(){}function ym(e,t,a,s){if(e.tag!==5)throw Error(oe(476));var n=a_(e).queue;t_(e,n,t,io,a===null?lA:function(){return s_(e),a(s)})}function a_(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:io,baseState:io,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:io},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function s_(e){var t=a_(e).next.queue;Hl(e,t,{},ds())}function sg(){return Ma(cc)}function r_(){return ua().memoizedState}function n_(){return ua().memoizedState}function cA(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=ds();e=jn(a);var s=wn(t,e,a);s!==null&&(us(s,t,a),Bl(s,t,a)),t={cache:$p()},e.payload=t;return}t=t.return}}function dA(e,t,a){var s=ds();a={lane:s,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ju(e)?i_(t,a):(a=Fp(e,t,a,s),a!==null&&(us(a,e,s),l_(a,t,s)))}function o_(e,t,a){var s=ds();Hl(e,t,a,s)}function Hl(e,t,a,s){var n={lane:s,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ju(e))i_(t,n);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,a);if(n.hasEagerState=!0,n.eagerState=l,hs(l,i))return Qu(e,t,n,0),Vt===null&&Yu(),!1}catch{}finally{}if(a=Fp(e,t,n,s),a!==null)return us(a,e,s),l_(a,t,s),!0}return!1}function rg(e,t,a,s){if(s={lane:2,revertLane:fg(),action:s,hasEagerState:!1,eagerState:null,next:null},Ju(e)){if(t)throw Error(oe(479))}else t=Fp(e,a,s,2),t!==null&&us(t,e,2)}function Ju(e){var t=e.alternate;return e===ot||t!==null&&t===ot}function i_(e,t){yi=ou=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function l_(e,t,a){if(a&4194048){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Jy(e,a)}}var lu={readContext:Ma,use:Xu,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useLayoutEffect:oa,useInsertionEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useDeferredValue:oa,useTransition:oa,useSyncExternalStore:oa,useId:oa,useHostTransitionStatus:oa,useFormState:oa,useActionState:oa,useOptimistic:oa,useMemoCache:oa,useCacheRefresh:oa},c_={readContext:Ma,use:Xu,useCallback:function(e,t){return Va().memoizedState=[e,t===void 0?null:t],e},useContext:Ma,useEffect:ux,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,kd(4194308,4,Xb.bind(null,t,e),a)},useLayoutEffect:function(e,t){return kd(4194308,4,e,t)},useInsertionEffect:function(e,t){kd(4,2,e,t)},useMemo:function(e,t){var a=Va();t=t===void 0?null:t;var s=e();if(xo){gn(!0);try{e()}finally{gn(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=Va();if(a!==void 0){var n=a(t);if(xo){gn(!0);try{a(t)}finally{gn(!1)}}}else n=t;return s.memoizedState=s.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=dA.bind(null,ot,e),[s.memoizedState,e]},useRef:function(e){var t=Va();return e={current:e},t.memoizedState=e},useState:function(e){e=vm(e);var t=e.queue,a=o_.bind(null,ot,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:tg,useDeferredValue:function(e,t){var a=Va();return ag(a,e,t)},useTransition:function(){var e=vm(!1);return e=t_.bind(null,ot,e.queue,!0,!1),Va().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=ot,n=Va();if(xt){if(a===void 0)throw Error(oe(407));a=a()}else{if(a=t(),Vt===null)throw Error(oe(349));pt&124||kb(s,t,a)}n.memoizedState=a;var o={value:a,getSnapshot:t};return n.queue=o,ux(Ib.bind(null,s,o,e),[e]),s.flags|=2048,qi(9,Zu(),Lb.bind(null,s,o,a,t),null),a},useId:function(){var e=Va(),t=Vt.identifierPrefix;if(xt){var a=Er,s=Sr;a=(s&~(1<<32-cs(s)-1)).toString(32)+a,t=""+t+"R"+a,a=iu++,0<a&&(t+="H"+a.toString(32)),t+=""}else a=rA++,t=""+t+"r"+a.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:sg,useFormState:lx,useActionState:lx,useOptimistic:function(e){var t=Va();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=rg.bind(null,ot,!0,a),a.dispatch=t,[e,t]},useMemoCache:Wp,useCacheRefresh:function(){return Va().memoizedState=cA.bind(null,ot)}},d_={readContext:Ma,use:Xu,useCallback:Jb,useContext:Ma,useEffect:Yb,useImperativeHandle:Zb,useInsertionEffect:Qb,useLayoutEffect:Kb,useMemo:Wb,useReducer:Pd,useRef:Gb,useState:function(){return Pd(Or)},useDebugValue:tg,useDeferredValue:function(e,t){var a=ua();return e_(a,It.memoizedState,e,t)},useTransition:function(){var e=Pd(Or)[0],t=ua().memoizedState;return[typeof e=="boolean"?e:Mc(e),t]},useSyncExternalStore:Pb,useId:r_,useHostTransitionStatus:sg,useFormState:cx,useActionState:cx,useOptimistic:function(e,t){var a=ua();return Bb(a,It,e,t)},useMemoCache:Wp,useCacheRefresh:n_},uA={readContext:Ma,use:Xu,useCallback:Jb,useContext:Ma,useEffect:Yb,useImperativeHandle:Zb,useInsertionEffect:Qb,useLayoutEffect:Kb,useMemo:Wb,useReducer:ah,useRef:Gb,useState:function(){return ah(Or)},useDebugValue:tg,useDeferredValue:function(e,t){var a=ua();return It===null?ag(a,e,t):e_(a,It.memoizedState,e,t)},useTransition:function(){var e=ah(Or)[0],t=ua().memoizedState;return[typeof e=="boolean"?e:Mc(e),t]},useSyncExternalStore:Pb,useId:r_,useHostTransitionStatus:sg,useFormState:dx,useActionState:dx,useOptimistic:function(e,t){var a=ua();return It!==null?Bb(a,It,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Wp,useCacheRefresh:n_},_i=null,nc=0;function dd(e){var t=nc;return nc+=1,_i===null&&(_i=[]),Db(_i,e,t)}function _l(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ud(e,t){throw t.$$typeof===B1?Error(oe(525)):(e=Object.prototype.toString.call(t),Error(oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function fx(e){var t=e._init;return t(e._payload)}function u_(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function a(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function s(y){for(var v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function n(y,v){return y=Ar(y,v),y.index=0,y.sibling=null,y}function o(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=67108866,v):b):(y.flags|=67108866,v)):(y.flags|=1048576,v)}function i(y){return e&&y.alternate===null&&(y.flags|=67108866),y}function l(y,v,b,j){return v===null||v.tag!==6?(v=Wf(b,y.mode,j),v.return=y,v):(v=n(v,b),v.return=y,v)}function c(y,v,b,j){var w=b.type;return w===si?f(y,v,b.props.children,j,b.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===an&&fx(w)===v.type)?(v=n(v,b.props),_l(v,b),v.return=y,v):(v=zd(b.type,b.key,b.props,null,y.mode,j),_l(v,b),v.return=y,v)}function d(y,v,b,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=eh(b,y.mode,j),v.return=y,v):(v=n(v,b.children||[]),v.return=y,v)}function f(y,v,b,j,w){return v===null||v.tag!==7?(v=lo(b,y.mode,j,w),v.return=y,v):(v=n(v,b),v.return=y,v)}function h(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=Wf(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case sd:return b=zd(v.type,v.key,v.props,null,y.mode,b),_l(b,v),b.return=y,b;case Al:return v=eh(v,y.mode,b),v.return=y,v;case an:var j=v._init;return v=j(v._payload),h(y,v,b)}if(Tl(v)||vl(v))return v=lo(v,y.mode,b,null),v.return=y,v;if(typeof v.then=="function")return h(y,dd(v),b);if(v.$$typeof===wr)return h(y,ld(y,v),b);ud(y,v)}return null}function p(y,v,b,j){var w=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return w!==null?null:l(y,v,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case sd:return b.key===w?c(y,v,b,j):null;case Al:return b.key===w?d(y,v,b,j):null;case an:return w=b._init,b=w(b._payload),p(y,v,b,j)}if(Tl(b)||vl(b))return w!==null?null:f(y,v,b,j,null);if(typeof b.then=="function")return p(y,v,dd(b),j);if(b.$$typeof===wr)return p(y,v,ld(y,b),j);ud(y,b)}return null}function m(y,v,b,j,w){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return y=y.get(b)||null,l(v,y,""+j,w);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case sd:return y=y.get(j.key===null?b:j.key)||null,c(v,y,j,w);case Al:return y=y.get(j.key===null?b:j.key)||null,d(v,y,j,w);case an:var S=j._init;return j=S(j._payload),m(y,v,b,j,w)}if(Tl(j)||vl(j))return y=y.get(b)||null,f(v,y,j,w,null);if(typeof j.then=="function")return m(y,v,b,dd(j),w);if(j.$$typeof===wr)return m(y,v,b,ld(v,j),w);ud(v,j)}return null}function _(y,v,b,j){for(var w=null,S=null,N=v,C=v=0,P=null;N!==null&&C<b.length;C++){N.index>C?(P=N,N=null):P=N.sibling;var R=p(y,N,b[C],j);if(R===null){N===null&&(N=P);break}e&&N&&R.alternate===null&&t(y,N),v=o(R,v,C),S===null?w=R:S.sibling=R,S=R,N=P}if(C===b.length)return a(y,N),xt&&Zn(y,C),w;if(N===null){for(;C<b.length;C++)N=h(y,b[C],j),N!==null&&(v=o(N,v,C),S===null?w=N:S.sibling=N,S=N);return xt&&Zn(y,C),w}for(N=s(N);C<b.length;C++)P=m(N,y,C,b[C],j),P!==null&&(e&&P.alternate!==null&&N.delete(P.key===null?C:P.key),v=o(P,v,C),S===null?w=P:S.sibling=P,S=P);return e&&N.forEach(function(Q){return t(y,Q)}),xt&&Zn(y,C),w}function g(y,v,b,j){if(b==null)throw Error(oe(151));for(var w=null,S=null,N=v,C=v=0,P=null,R=b.next();N!==null&&!R.done;C++,R=b.next()){N.index>C?(P=N,N=null):P=N.sibling;var Q=p(y,N,R.value,j);if(Q===null){N===null&&(N=P);break}e&&N&&Q.alternate===null&&t(y,N),v=o(Q,v,C),S===null?w=Q:S.sibling=Q,S=Q,N=P}if(R.done)return a(y,N),xt&&Zn(y,C),w;if(N===null){for(;!R.done;C++,R=b.next())R=h(y,R.value,j),R!==null&&(v=o(R,v,C),S===null?w=R:S.sibling=R,S=R);return xt&&Zn(y,C),w}for(N=s(N);!R.done;C++,R=b.next())R=m(N,y,C,R.value,j),R!==null&&(e&&R.alternate!==null&&N.delete(R.key===null?C:R.key),v=o(R,v,C),S===null?w=R:S.sibling=R,S=R);return e&&N.forEach(function(K){return t(y,K)}),xt&&Zn(y,C),w}function x(y,v,b,j){if(typeof b=="object"&&b!==null&&b.type===si&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case sd:e:{for(var w=b.key;v!==null;){if(v.key===w){if(w=b.type,w===si){if(v.tag===7){a(y,v.sibling),j=n(v,b.props.children),j.return=y,y=j;break e}}else if(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===an&&fx(w)===v.type){a(y,v.sibling),j=n(v,b.props),_l(j,b),j.return=y,y=j;break e}a(y,v);break}else t(y,v);v=v.sibling}b.type===si?(j=lo(b.props.children,y.mode,j,b.key),j.return=y,y=j):(j=zd(b.type,b.key,b.props,null,y.mode,j),_l(j,b),j.return=y,y=j)}return i(y);case Al:e:{for(w=b.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){a(y,v.sibling),j=n(v,b.children||[]),j.return=y,y=j;break e}else{a(y,v);break}else t(y,v);v=v.sibling}j=eh(b,y.mode,j),j.return=y,y=j}return i(y);case an:return w=b._init,b=w(b._payload),x(y,v,b,j)}if(Tl(b))return _(y,v,b,j);if(vl(b)){if(w=vl(b),typeof w!="function")throw Error(oe(150));return b=w.call(b),g(y,v,b,j)}if(typeof b.then=="function")return x(y,v,dd(b),j);if(b.$$typeof===wr)return x(y,v,ld(y,b),j);ud(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,v!==null&&v.tag===6?(a(y,v.sibling),j=n(v,b),j.return=y,y=j):(a(y,v),j=Wf(b,y.mode,j),j.return=y,y=j),i(y)):a(y,v)}return function(y,v,b,j){try{nc=0;var w=x(y,v,b,j);return _i=null,w}catch(N){if(N===zc||N===Ku)throw N;var S=is(29,N,null,y.mode);return S.lanes=j,S.return=y,S}finally{}}}var Bi=u_(!0),f_=u_(!1),Ss=ir(null),rr=null;function on(e){var t=e.alternate;Zt(pa,pa.current&1),Zt(Ss,e),rr===null&&(t===null||Fi.current!==null||t.memoizedState!==null)&&(rr=e)}function h_(e){if(e.tag===22){if(Zt(pa,pa.current),Zt(Ss,e),rr===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(rr=e)}}else ln()}function ln(){Zt(pa,pa.current),Zt(Ss,Ss.current)}function Cr(e){_a(Ss),rr===e&&(rr=null),_a(pa)}var pa=ir(0);function cu(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||km(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function sh(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:Qt({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var bm={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=ds(),n=jn(s);n.payload=t,a!=null&&(n.callback=a),t=wn(e,n,s),t!==null&&(us(t,e,s),Bl(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=ds(),n=jn(s);n.tag=1,n.payload=t,a!=null&&(n.callback=a),t=wn(e,n,s),t!==null&&(us(t,e,s),Bl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=ds(),s=jn(a);s.tag=2,t!=null&&(s.callback=t),t=wn(e,s,a),t!==null&&(us(t,e,a),Bl(t,e,a))}};function hx(e,t,a,s,n,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,i):t.prototype&&t.prototype.isPureReactComponent?!ac(a,s)||!ac(n,o):!0}function mx(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&bm.enqueueReplaceState(t,t.state,null)}function yo(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=Qt({},a));for(var n in e)a[n]===void 0&&(a[n]=e[n])}return a}var du=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function m_(e){du(e)}function p_(e){console.error(e)}function g_(e){du(e)}function uu(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function px(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function _m(e,t,a){return a=jn(a),a.tag=3,a.payload={element:null},a.callback=function(){uu(e,t)},a}function v_(e){return e=jn(e),e.tag=3,e}function x_(e,t,a,s){var n=a.type.getDerivedStateFromError;if(typeof n=="function"){var o=s.value;e.payload=function(){return n(o)},e.callback=function(){px(t,a,s)}}var i=a.stateNode;i!==null&&typeof i.componentDidCatch=="function"&&(e.callback=function(){px(t,a,s),typeof n!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function fA(e,t,a,s,n){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&Rc(t,a,n,!0),a=Ss.current,a!==null){switch(a.tag){case 13:return rr===null?Tm():a.alternate===null&&ra===0&&(ra=3),a.flags&=-257,a.flags|=65536,a.lanes=n,s===hm?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),mh(e,s,n)),!1;case 22:return a.flags|=65536,s===hm?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),mh(e,s,n)),!1}throw Error(oe(435,a.tag))}return mh(e,s,n),Tm(),!1}if(xt)return t=Ss.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=n,s!==lm&&(e=Error(oe(422),{cause:s}),sc(_s(e,a)))):(s!==lm&&(t=Error(oe(423),{cause:s}),sc(_s(t,a))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,s=_s(s,a),n=_m(e.stateNode,s,n),th(e,n),ra!==4&&(ra=2)),!1;var o=Error(oe(520),{cause:s});if(o=_s(o,a),Yl===null?Yl=[o]:Yl.push(o),ra!==4&&(ra=2),t===null)return!0;s=_s(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=n&-n,a.lanes|=e,e=_m(a.stateNode,s,e),th(a,e),!1;case 1:if(t=a.type,o=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(Sn===null||!Sn.has(o))))return a.flags|=65536,n&=-n,a.lanes|=n,n=v_(n),x_(n,e,a,s),th(a,n),!1}a=a.return}while(a!==null);return!1}var y_=Error(oe(461)),ba=!1;function Sa(e,t,a,s){t.child=e===null?f_(t,null,a,s):Bi(t,e.child,a,s)}function gx(e,t,a,s,n){a=a.render;var o=t.ref;if("ref"in s){var i={};for(var l in s)l!=="ref"&&(i[l]=s[l])}else i=s;return vo(t),s=Qp(e,t,a,i,o,n),l=Kp(),e!==null&&!ba?(Xp(e,t,n),zr(e,t,n)):(xt&&l&&Bp(t),t.flags|=1,Sa(e,t,s,n),t.child)}function vx(e,t,a,s,n){if(e===null){var o=a.type;return typeof o=="function"&&!qp(o)&&o.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=o,b_(e,t,o,s,n)):(e=zd(a.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!ng(e,n)){var i=o.memoizedProps;if(a=a.compare,a=a!==null?a:ac,a(i,s)&&e.ref===t.ref)return zr(e,t,n)}return t.flags|=1,e=Ar(o,s),e.ref=t.ref,e.return=t,t.child=e}function b_(e,t,a,s,n){if(e!==null){var o=e.memoizedProps;if(ac(o,s)&&e.ref===t.ref)if(ba=!1,t.pendingProps=s=o,ng(e,n))e.flags&131072&&(ba=!0);else return t.lanes=e.lanes,zr(e,t,n)}return jm(e,t,a,s,n)}function __(e,t,a){var s=t.pendingProps,n=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if(t.flags&128){if(s=o!==null?o.baseLanes|a:a,e!==null){for(n=t.child=e.child,o=0;n!==null;)o=o|n.lanes|n.childLanes,n=n.sibling;t.childLanes=o&~s}else t.childLanes=0,t.child=null;return xx(e,t,s,a)}if(a&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Md(t,o!==null?o.cachePool:null),o!==null?nx(t,o):gm(),h_(t);else return t.lanes=t.childLanes=536870912,xx(e,t,o!==null?o.baseLanes|a:a,a)}else o!==null?(Md(t,o.cachePool),nx(t,o),ln(),t.memoizedState=null):(e!==null&&Md(t,null),gm(),ln());return Sa(e,t,n,a),t.child}function xx(e,t,a,s){var n=Hp();return n=n===null?null:{parent:ma._currentValue,pool:n},t.memoizedState={baseLanes:a,cachePool:n},e!==null&&Md(t,null),gm(),h_(t),e!==null&&Rc(e,t,s,!0),null}function Ld(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(oe(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function jm(e,t,a,s,n){return vo(t),a=Qp(e,t,a,s,void 0,n),s=Kp(),e!==null&&!ba?(Xp(e,t,n),zr(e,t,n)):(xt&&s&&Bp(t),t.flags|=1,Sa(e,t,a,n),t.child)}function yx(e,t,a,s,n,o){return vo(t),t.updateQueue=null,a=Mb(t,s,a,n),zb(e),s=Kp(),e!==null&&!ba?(Xp(e,t,o),zr(e,t,o)):(xt&&s&&Bp(t),t.flags|=1,Sa(e,t,a,o),t.child)}function bx(e,t,a,s,n){if(vo(t),t.stateNode===null){var o=ui,i=a.contextType;typeof i=="object"&&i!==null&&(o=Ma(i)),o=new a(s,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=bm,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=s,o.state=t.memoizedState,o.refs={},Vp(t),i=a.contextType,o.context=typeof i=="object"&&i!==null?Ma(i):ui,o.state=t.memoizedState,i=a.getDerivedStateFromProps,typeof i=="function"&&(sh(t,a,i,s),o.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(i=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),i!==o.state&&bm.enqueueReplaceState(o,o.state,null),$l(t,s,o,n),Ul(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){o=t.stateNode;var l=t.memoizedProps,c=yo(a,l);o.props=c;var d=o.context,f=a.contextType;i=ui,typeof f=="object"&&f!==null&&(i=Ma(f));var h=a.getDerivedStateFromProps;f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l||d!==i)&&mx(t,o,s,i),sn=!1;var p=t.memoizedState;o.state=p,$l(t,s,o,n),Ul(),d=t.memoizedState,l||p!==d||sn?(typeof h=="function"&&(sh(t,a,h,s),d=t.memoizedState),(c=sn||hx(t,a,c,s,p,d,i))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=d),o.props=s,o.state=d,o.context=i,s=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,mm(e,t),i=t.memoizedProps,f=yo(a,i),o.props=f,h=t.pendingProps,p=o.context,d=a.contextType,c=ui,typeof d=="object"&&d!==null&&(c=Ma(d)),l=a.getDerivedStateFromProps,(d=typeof l=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==h||p!==c)&&mx(t,o,s,c),sn=!1,p=t.memoizedState,o.state=p,$l(t,s,o,n),Ul();var m=t.memoizedState;i!==h||p!==m||sn||e!==null&&e.dependencies!==null&&ru(e.dependencies)?(typeof l=="function"&&(sh(t,a,l,s),m=t.memoizedState),(f=sn||hx(t,a,f,s,p,m,c)||e!==null&&e.dependencies!==null&&ru(e.dependencies))?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=m),o.props=s,o.state=m,o.context=c,s=f):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),s=!1)}return o=s,Ld(e,t),s=(t.flags&128)!==0,o||s?(o=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&s?(t.child=Bi(t,e.child,null,n),t.child=Bi(t,null,a,n)):Sa(e,t,a,n),t.memoizedState=o.state,e=t.child):e=zr(e,t,n),e}function _x(e,t,a,s){return Dc(),t.flags|=256,Sa(e,t,a,s),t.child}var rh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nh(e){return{baseLanes:e,cachePool:Ab()}}function oh(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=js),e}function j_(e,t,a){var s=t.pendingProps,n=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(pa.current&2)!==0),i&&(n=!0,t.flags&=-129),i=(t.flags&32)!==0,t.flags&=-33,e===null){if(xt){if(n?on(t):ln(),xt){var l=sa,c;if(c=l){e:{for(c=l,l=Js;c.nodeType!==8;){if(!l){l=null;break e}if(c=qs(c.nextSibling),c===null){l=null;break e}}l=c}l!==null?(t.memoizedState={dehydrated:l,treeContext:co!==null?{id:Sr,overflow:Er}:null,retryLane:536870912,hydrationErrors:null},c=is(18,null,null,0),c.stateNode=l,c.return=t,t.child=c,Fa=t,sa=null,c=!0):c=!1}c||go(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return km(l)?t.lanes=32:t.lanes=536870912,null;Cr(t)}return l=s.children,s=s.fallback,n?(ln(),n=t.mode,l=fu({mode:"hidden",children:l},n),s=lo(s,n,a,null),l.return=t,s.return=t,l.sibling=s,t.child=l,n=t.child,n.memoizedState=nh(a),n.childLanes=oh(e,i,a),t.memoizedState=rh,s):(on(t),wm(t,l))}if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null)){if(o)t.flags&256?(on(t),t.flags&=-257,t=ih(e,t,a)):t.memoizedState!==null?(ln(),t.child=e.child,t.flags|=128,t=null):(ln(),n=s.fallback,l=t.mode,s=fu({mode:"visible",children:s.children},l),n=lo(n,l,a,null),n.flags|=2,s.return=t,n.return=t,s.sibling=n,t.child=s,Bi(t,e.child,null,a),s=t.child,s.memoizedState=nh(a),s.childLanes=oh(e,i,a),t.memoizedState=rh,t=n);else if(on(t),km(l)){if(i=l.nextSibling&&l.nextSibling.dataset,i)var d=i.dgst;i=d,s=Error(oe(419)),s.stack="",s.digest=i,sc({value:s,source:null,stack:null}),t=ih(e,t,a)}else if(ba||Rc(e,t,a,!1),i=(a&e.childLanes)!==0,ba||i){if(i=Vt,i!==null&&(s=a&-a,s=s&42?1:Tp(s),s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==c.retryLane))throw c.retryLane=s,al(e,s),us(i,e,s),y_;l.data==="$?"||Tm(),t=ih(e,t,a)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,sa=qs(l.nextSibling),Fa=t,xt=!0,uo=null,Js=!1,e!==null&&(xs[ys++]=Sr,xs[ys++]=Er,xs[ys++]=co,Sr=e.id,Er=e.overflow,co=t),t=wm(t,s.children),t.flags|=4096);return t}return n?(ln(),n=s.fallback,l=t.mode,c=e.child,d=c.sibling,s=Ar(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,d!==null?n=Ar(d,n):(n=lo(n,l,a,null),n.flags|=2),n.return=t,s.return=t,s.sibling=n,t.child=s,s=n,n=t.child,l=e.child.memoizedState,l===null?l=nh(a):(c=l.cachePool,c!==null?(d=ma._currentValue,c=c.parent!==d?{parent:d,pool:d}:c):c=Ab(),l={baseLanes:l.baseLanes|a,cachePool:c}),n.memoizedState=l,n.childLanes=oh(e,i,a),t.memoizedState=rh,s):(on(t),a=e.child,e=a.sibling,a=Ar(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a)}function wm(e,t){return t=fu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function fu(e,t){return e=is(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function ih(e,t,a){return Bi(t,e.child,null,a),e=wm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jx(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),dm(e.return,t,a)}function lh(e,t,a,s,n){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=a,o.tailMode=n)}function w_(e,t,a){var s=t.pendingProps,n=s.revealOrder,o=s.tail;if(Sa(e,t,s.children,a),s=pa.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jx(e,a,t);else if(e.tag===19)jx(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(Zt(pa,s),n){case"forwards":for(a=t.child,n=null;a!==null;)e=a.alternate,e!==null&&cu(e)===null&&(n=a),a=a.sibling;a=n,a===null?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),lh(t,!1,n,a,o);break;case"backwards":for(a=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&cu(e)===null){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}lh(t,!0,a,null,o);break;case"together":lh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zr(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),On|=t.lanes,!(a&t.childLanes))if(e!==null){if(Rc(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(oe(153));if(t.child!==null){for(e=t.child,a=Ar(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Ar(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function ng(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&ru(e)))}function hA(e,t,a){switch(t.tag){case 3:Xd(t,t.stateNode.containerInfo),nn(t,ma,e.memoizedState.cache),Dc();break;case 27:case 5:Jh(t);break;case 4:Xd(t,t.stateNode.containerInfo);break;case 10:nn(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(on(t),t.flags|=128,null):a&t.child.childLanes?j_(e,t,a):(on(t),e=zr(e,t,a),e!==null?e.sibling:null);on(t);break;case 19:var n=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(Rc(e,t,a,!1),s=(a&t.childLanes)!==0),n){if(s)return w_(e,t,a);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Zt(pa,pa.current),s)break;return null;case 22:case 23:return t.lanes=0,__(e,t,a);case 24:nn(t,ma,e.memoizedState.cache)}return zr(e,t,a)}function S_(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)ba=!0;else{if(!ng(e,a)&&!(t.flags&128))return ba=!1,hA(e,t,a);ba=!!(e.flags&131072)}else ba=!1,xt&&t.flags&1048576&&Nb(t,su,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,n=s._init;if(s=n(s._payload),t.type=s,typeof s=="function")qp(s)?(e=yo(s,e),t.tag=1,t=bx(null,t,s,e,a)):(t.tag=0,t=jm(null,t,s,e,a));else{if(s!=null){if(n=s.$$typeof,n===Np){t.tag=11,t=gx(null,t,s,e,a);break e}else if(n===Cp){t.tag=14,t=vx(null,t,s,e,a);break e}}throw t=Xh(s)||s,Error(oe(306,t,""))}}return t;case 0:return jm(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,n=yo(s,t.pendingProps),bx(e,t,s,n,a);case 3:e:{if(Xd(t,t.stateNode.containerInfo),e===null)throw Error(oe(387));s=t.pendingProps;var o=t.memoizedState;n=o.element,mm(e,t),$l(t,s,null,a);var i=t.memoizedState;if(s=i.cache,nn(t,ma,s),s!==o.cache&&um(t,[ma],a,!0),Ul(),s=i.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=_x(e,t,s,a);break e}else if(s!==n){n=_s(Error(oe(424)),t),sc(n),t=_x(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(sa=qs(e.firstChild),Fa=t,xt=!0,uo=null,Js=!0,a=f_(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Dc(),s===n){t=zr(e,t,a);break e}Sa(e,t,s,a)}t=t.child}return t;case 26:return Ld(e,t),e===null?(a=Fx(t.type,null,t.pendingProps,null))?t.memoizedState=a:xt||(a=t.type,e=t.pendingProps,s=yu(_n.current).createElement(a),s[za]=t,s[Xa]=e,Na(s,a,e),ya(s),t.stateNode=s):t.memoizedState=Fx(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Jh(t),e===null&&xt&&(s=t.stateNode=dj(t.type,t.pendingProps,_n.current),Fa=t,Js=!0,n=sa,kn(t.type)?(Lm=n,sa=qs(s.firstChild)):sa=n),Sa(e,t,t.pendingProps.children,a),Ld(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&xt&&((n=s=sa)&&(s=BA(s,t.type,t.pendingProps,Js),s!==null?(t.stateNode=s,Fa=t,sa=qs(s.firstChild),Js=!1,n=!0):n=!1),n||go(t)),Jh(t),n=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,Mm(n,o)?s=null:i!==null&&Mm(n,i)&&(t.flags|=32),t.memoizedState!==null&&(n=Qp(e,t,nA,null,null,a),cc._currentValue=n),Ld(e,t),Sa(e,t,s,a),t.child;case 6:return e===null&&xt&&((e=a=sa)&&(a=UA(a,t.pendingProps,Js),a!==null?(t.stateNode=a,Fa=t,sa=null,e=!0):e=!1),e||go(t)),null;case 13:return j_(e,t,a);case 4:return Xd(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Bi(t,null,s,a):Sa(e,t,s,a),t.child;case 11:return gx(e,t,t.type,t.pendingProps,a);case 7:return Sa(e,t,t.pendingProps,a),t.child;case 8:return Sa(e,t,t.pendingProps.children,a),t.child;case 12:return Sa(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,nn(t,t.type,s.value),Sa(e,t,s.children,a),t.child;case 9:return n=t.type._context,s=t.pendingProps.children,vo(t),n=Ma(n),s=s(n),t.flags|=1,Sa(e,t,s,a),t.child;case 14:return vx(e,t,t.type,t.pendingProps,a);case 15:return b_(e,t,t.type,t.pendingProps,a);case 19:return w_(e,t,a);case 31:return s=t.pendingProps,a=t.mode,s={mode:s.mode,children:s.children},e===null?(a=fu(s,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=Ar(e.child,s),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return __(e,t,a);case 24:return vo(t),s=Ma(ma),e===null?(n=Hp(),n===null&&(n=Vt,o=$p(),n.pooledCache=o,o.refCount++,o!==null&&(n.pooledCacheLanes|=a),n=o),t.memoizedState={parent:s,cache:n},Vp(t),nn(t,ma,n)):(e.lanes&a&&(mm(e,t),$l(t,null,null,a),Ul()),n=e.memoizedState,o=t.memoizedState,n.parent!==s?(n={parent:s,cache:s},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),nn(t,ma,s)):(s=o.cache,nn(t,ma,s),s!==n.cache&&um(t,[ma],a,!0))),Sa(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(oe(156,t.tag))}function pr(e){e.flags|=4}function wx(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!hj(t)){if(t=Ss.current,t!==null&&((pt&4194048)===pt?rr!==null:(pt&62914560)!==pt&&!(pt&536870912)||t!==rr))throw ql=hm,Tb;e.flags|=8192}}function fd(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Xy():536870912,e.lanes|=t,Ui|=t)}function jl(e,t){if(!xt)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ea(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var n=e.child;n!==null;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags&65011712,s|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function mA(e,t,a){var s=t.pendingProps;switch(Up(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ea(t),null;case 1:return ea(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Tr(ma),Pi(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(bl(t)?pr(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wv())),ea(t),null;case 26:return a=t.memoizedState,e===null?(pr(t),a!==null?(ea(t),wx(t,a)):(ea(t),t.flags&=-16777217)):a?a!==e.memoizedState?(pr(t),ea(t),wx(t,a)):(ea(t),t.flags&=-16777217):(e.memoizedProps!==s&&pr(t),ea(t),t.flags&=-16777217),null;case 27:Zd(t),a=_n.current;var n=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&pr(t);else{if(!s){if(t.stateNode===null)throw Error(oe(166));return ea(t),null}e=ar.current,bl(t)?Zv(t):(e=dj(n,s,a),t.stateNode=e,pr(t))}return ea(t),null;case 5:if(Zd(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&pr(t);else{if(!s){if(t.stateNode===null)throw Error(oe(166));return ea(t),null}if(e=ar.current,bl(t))Zv(t);else{switch(n=yu(_n.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?n.createElement("select",{is:s.is}):n.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?n.createElement(a,{is:s.is}):n.createElement(a)}}e[za]=t,e[Xa]=s;e:for(n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.tag!==27&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}t.stateNode=e;e:switch(Na(e,a,s),a){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&pr(t)}}return ea(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&pr(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(oe(166));if(e=_n.current,bl(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,n=Fa,n!==null)switch(n.tag){case 27:case 5:s=n.memoizedProps}e[za]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||ij(e.nodeValue,a)),e||go(t)}else e=yu(e).createTextNode(s),e[za]=t,t.stateNode=e}return ea(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=bl(t),s!==null&&s.dehydrated!==null){if(e===null){if(!n)throw Error(oe(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(oe(317));n[za]=t}else Dc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ea(t),n=!1}else n=Wv(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(Cr(t),t):(Cr(t),null)}if(Cr(t),t.flags&128)return t.lanes=a,t;if(a=s!==null,e=e!==null&&e.memoizedState!==null,a){s=t.child,n=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(n=s.alternate.memoizedState.cachePool.pool);var o=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==n&&(s.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),fd(t,t.updateQueue),ea(t),null;case 4:return Pi(),e===null&&hg(t.stateNode.containerInfo),ea(t),null;case 10:return Tr(t.type),ea(t),null;case 19:if(_a(pa),n=t.memoizedState,n===null)return ea(t),null;if(s=(t.flags&128)!==0,o=n.rendering,o===null)if(s)jl(n,!1);else{if(ra!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=cu(e),o!==null){for(t.flags|=128,jl(n,!1),e=o.updateQueue,t.updateQueue=e,fd(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Eb(a,e),a=a.sibling;return Zt(pa,pa.current&1|2),t.child}e=e.sibling}n.tail!==null&&sr()>mu&&(t.flags|=128,s=!0,jl(n,!1),t.lanes=4194304)}else{if(!s)if(e=cu(o),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,fd(t,e),jl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!xt)return ea(t),null}else 2*sr()-n.renderingStartTime>mu&&a!==536870912&&(t.flags|=128,s=!0,jl(n,!1),t.lanes=4194304);n.isBackwards?(o.sibling=t.child,t.child=o):(e=n.last,e!==null?e.sibling=o:t.child=o,n.last=o)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=sr(),t.sibling=null,e=pa.current,Zt(pa,s?e&1|2:e&1),t):(ea(t),null);case 22:case 23:return Cr(t),Gp(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?a&536870912&&!(t.flags&128)&&(ea(t),t.subtreeFlags&6&&(t.flags|=8192)):ea(t),a=t.updateQueue,a!==null&&fd(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&_a(fo),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Tr(ma),ea(t),null;case 25:return null;case 30:return null}throw Error(oe(156,t.tag))}function pA(e,t){switch(Up(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Tr(ma),Pi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Zd(t),null;case 13:if(Cr(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(oe(340));Dc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _a(pa),null;case 4:return Pi(),null;case 10:return Tr(t.type),null;case 22:case 23:return Cr(t),Gp(),e!==null&&_a(fo),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Tr(ma),null;case 25:return null;default:return null}}function E_(e,t){switch(Up(t),t.tag){case 3:Tr(ma),Pi();break;case 26:case 27:case 5:Zd(t);break;case 4:Pi();break;case 13:Cr(t);break;case 19:_a(pa);break;case 10:Tr(t.type);break;case 22:case 23:Cr(t),Gp(),e!==null&&_a(fo);break;case 24:Tr(ma)}}function kc(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var n=s.next;a=n;do{if((a.tag&e)===e){s=void 0;var o=a.create,i=a.inst;s=o(),i.destroy=s}a=a.next}while(a!==n)}}catch(l){Ut(t,t.return,l)}}function Rn(e,t,a){try{var s=t.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var o=n.next;s=o;do{if((s.tag&e)===e){var i=s.inst,l=i.destroy;if(l!==void 0){i.destroy=void 0,n=t;var c=a,d=l;try{d()}catch(f){Ut(n,c,f)}}}s=s.next}while(s!==o)}}catch(f){Ut(t,t.return,f)}}function N_(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Ob(t,a)}catch(s){Ut(e,e.return,s)}}}function C_(e,t,a){a.props=yo(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){Ut(e,t,s)}}function Vl(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(n){Ut(e,t,n)}}function er(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(n){Ut(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(n){Ut(e,t,n)}else a.current=null}function A_(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(n){Ut(e,e.return,n)}}function ch(e,t,a){try{var s=e.stateNode;kA(s,e.type,a,t),s[Xa]=t}catch(n){Ut(e,e.return,n)}}function T_(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&kn(e.type)||e.tag===4}function dh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||T_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&kn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sm(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=af));else if(s!==4&&(s===27&&kn(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Sm(e,t,a),e=e.sibling;e!==null;)Sm(e,t,a),e=e.sibling}function hu(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&kn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(hu(e,t,a),e=e.sibling;e!==null;)hu(e,t,a),e=e.sibling}function D_(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Na(t,s,a),t[za]=e,t[Xa]=a}catch(o){Ut(e,e.return,o)}}var jr=!1,ia=!1,uh=!1,Sx=typeof WeakSet=="function"?WeakSet:Set,xa=null;function gA(e,t){if(e=e.containerInfo,Om=wu,e=vb(e),Lp(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var n=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var i=0,l=-1,c=-1,d=0,f=0,h=e,p=null;t:for(;;){for(var m;h!==a||n!==0&&h.nodeType!==3||(l=i+n),h!==o||s!==0&&h.nodeType!==3||(c=i+s),h.nodeType===3&&(i+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===e)break t;if(p===a&&++d===n&&(l=i),p===o&&++f===s&&(c=i),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}a=l===-1||c===-1?null:{start:l,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(zm={focusedElem:e,selectionRange:a},wu=!1,xa=t;xa!==null;)if(t=xa,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,xa=e;else for(;xa!==null;){switch(t=xa,o=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,a=t,n=o.memoizedProps,o=o.memoizedState,s=a.stateNode;try{var _=yo(a.type,n,a.elementType===a.type);e=s.getSnapshotBeforeUpdate(_,o),s.__reactInternalSnapshotBeforeUpdate=e}catch(g){Ut(a,a.return,g)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Pm(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Pm(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(oe(163))}if(e=t.sibling,e!==null){e.return=t.return,xa=e;break}xa=t.return}}function R_(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:Yr(e,a),s&4&&kc(5,a);break;case 1:if(Yr(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(i){Ut(a,a.return,i)}else{var n=yo(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){Ut(a,a.return,i)}}s&64&&N_(a),s&512&&Vl(a,a.return);break;case 3:if(Yr(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Ob(e,t)}catch(i){Ut(a,a.return,i)}}break;case 27:t===null&&s&4&&D_(a);case 26:case 5:Yr(e,a),t===null&&s&4&&A_(a),s&512&&Vl(a,a.return);break;case 12:Yr(e,a);break;case 13:Yr(e,a),s&4&&M_(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=EA.bind(null,a),$A(e,a))));break;case 22:if(s=a.memoizedState!==null||jr,!s){t=t!==null&&t.memoizedState!==null||ia,n=jr;var o=ia;jr=s,(ia=t)&&!o?Jr(e,a,(a.subtreeFlags&8772)!==0):Yr(e,a),jr=n,ia=o}break;case 30:break;default:Yr(e,a)}}function O_(e){var t=e.alternate;t!==null&&(e.alternate=null,O_(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Rp(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Kt=null,Ga=!1;function gr(e,t,a){for(a=a.child;a!==null;)z_(e,t,a),a=a.sibling}function z_(e,t,a){if(ls&&typeof ls.onCommitFiberUnmount=="function")try{ls.onCommitFiberUnmount(Ec,a)}catch{}switch(a.tag){case 26:ia||er(a,t),gr(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ia||er(a,t);var s=Kt,n=Ga;kn(a.type)&&(Kt=a.stateNode,Ga=!1),gr(e,t,a),Kl(a.stateNode),Kt=s,Ga=n;break;case 5:ia||er(a,t);case 6:if(s=Kt,n=Ga,Kt=null,gr(e,t,a),Kt=s,Ga=n,Kt!==null)if(Ga)try{(Kt.nodeType===9?Kt.body:Kt.nodeName==="HTML"?Kt.ownerDocument.body:Kt).removeChild(a.stateNode)}catch(o){Ut(a,t,o)}else try{Kt.removeChild(a.stateNode)}catch(o){Ut(a,t,o)}break;case 18:Kt!==null&&(Ga?(e=Kt,kx(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),fc(e)):kx(Kt,a.stateNode));break;case 4:s=Kt,n=Ga,Kt=a.stateNode.containerInfo,Ga=!0,gr(e,t,a),Kt=s,Ga=n;break;case 0:case 11:case 14:case 15:ia||Rn(2,a,t),ia||Rn(4,a,t),gr(e,t,a);break;case 1:ia||(er(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&C_(a,t,s)),gr(e,t,a);break;case 21:gr(e,t,a);break;case 22:ia=(s=ia)||a.memoizedState!==null,gr(e,t,a),ia=s;break;default:gr(e,t,a)}}function M_(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{fc(e)}catch(a){Ut(t,t.return,a)}}function vA(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Sx),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Sx),t;default:throw Error(oe(435,e.tag))}}function fh(e,t){var a=vA(e);t.forEach(function(s){var n=NA.bind(null,e,s);a.has(s)||(a.add(s),s.then(n,n))})}function ss(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var n=a[s],o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 27:if(kn(l.type)){Kt=l.stateNode,Ga=!1;break e}break;case 5:Kt=l.stateNode,Ga=!1;break e;case 3:case 4:Kt=l.stateNode.containerInfo,Ga=!0;break e}l=l.return}if(Kt===null)throw Error(oe(160));z_(o,i,n),Kt=null,Ga=!1,o=n.alternate,o!==null&&(o.return=null),n.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)P_(t,e),t=t.sibling}var Is=null;function P_(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ss(t,e),rs(e),s&4&&(Rn(3,e,e.return),kc(3,e),Rn(5,e,e.return));break;case 1:ss(t,e),rs(e),s&512&&(ia||a===null||er(a,a.return)),s&64&&jr&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var n=Is;if(ss(t,e),rs(e),s&512&&(ia||a===null||er(a,a.return)),s&4){var o=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,n=n.ownerDocument||n;t:switch(s){case"title":o=n.getElementsByTagName("title")[0],(!o||o[Ac]||o[za]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=n.createElement(s),n.head.insertBefore(o,n.querySelector("head > title"))),Na(o,s,a),o[za]=e,ya(o),s=o;break e;case"link":var i=Bx("link","href",n).get(s+(a.href||""));if(i){for(var l=0;l<i.length;l++)if(o=i[l],o.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&o.getAttribute("rel")===(a.rel==null?null:a.rel)&&o.getAttribute("title")===(a.title==null?null:a.title)&&o.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){i.splice(l,1);break t}}o=n.createElement(s),Na(o,s,a),n.head.appendChild(o);break;case"meta":if(i=Bx("meta","content",n).get(s+(a.content||""))){for(l=0;l<i.length;l++)if(o=i[l],o.getAttribute("content")===(a.content==null?null:""+a.content)&&o.getAttribute("name")===(a.name==null?null:a.name)&&o.getAttribute("property")===(a.property==null?null:a.property)&&o.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&o.getAttribute("charset")===(a.charSet==null?null:a.charSet)){i.splice(l,1);break t}}o=n.createElement(s),Na(o,s,a),n.head.appendChild(o);break;default:throw Error(oe(468,s))}o[za]=e,ya(o),s=o}e.stateNode=s}else Ux(n,e.type,e.stateNode);else e.stateNode=qx(n,s,e.memoizedProps);else o!==s?(o===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):o.count--,s===null?Ux(n,e.type,e.stateNode):qx(n,s,e.memoizedProps)):s===null&&e.stateNode!==null&&ch(e,e.memoizedProps,a.memoizedProps)}break;case 27:ss(t,e),rs(e),s&512&&(ia||a===null||er(a,a.return)),a!==null&&s&4&&ch(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ss(t,e),rs(e),s&512&&(ia||a===null||er(a,a.return)),e.flags&32){n=e.stateNode;try{Li(n,"")}catch(m){Ut(e,e.return,m)}}s&4&&e.stateNode!=null&&(n=e.memoizedProps,ch(e,n,a!==null?a.memoizedProps:n)),s&1024&&(uh=!0);break;case 6:if(ss(t,e),rs(e),s&4){if(e.stateNode===null)throw Error(oe(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(m){Ut(e,e.return,m)}}break;case 3:if(qd=null,n=Is,Is=bu(t.containerInfo),ss(t,e),Is=n,rs(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{fc(t.containerInfo)}catch(m){Ut(e,e.return,m)}uh&&(uh=!1,k_(e));break;case 4:s=Is,Is=bu(e.stateNode.containerInfo),ss(t,e),rs(e),Is=s;break;case 12:ss(t,e),rs(e);break;case 13:ss(t,e),rs(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(dg=sr()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,fh(e,s)));break;case 22:n=e.memoizedState!==null;var c=a!==null&&a.memoizedState!==null,d=jr,f=ia;if(jr=d||n,ia=f||c,ss(t,e),ia=f,jr=d,rs(e),s&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(a===null||c||jr||ia||Jn(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){c=a=t;try{if(o=c.stateNode,n)i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=h!=null&&h.hasOwnProperty("display")?h.display:null;l.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(m){Ut(c,c.return,m)}}}else if(t.tag===6){if(a===null){c=t;try{c.stateNode.nodeValue=n?"":c.memoizedProps}catch(m){Ut(c,c.return,m)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,fh(e,a))));break;case 19:ss(t,e),rs(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,fh(e,s)));break;case 30:break;case 21:break;default:ss(t,e),rs(e)}}function rs(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(T_(s)){a=s;break}s=s.return}if(a==null)throw Error(oe(160));switch(a.tag){case 27:var n=a.stateNode,o=dh(e);hu(e,o,n);break;case 5:var i=a.stateNode;a.flags&32&&(Li(i,""),a.flags&=-33);var l=dh(e);hu(e,l,i);break;case 3:case 4:var c=a.stateNode.containerInfo,d=dh(e);Sm(e,d,c);break;default:throw Error(oe(161))}}catch(f){Ut(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function k_(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;k_(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Yr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)R_(e,t.alternate,t),t=t.sibling}function Jn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Rn(4,t,t.return),Jn(t);break;case 1:er(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&C_(t,t.return,a),Jn(t);break;case 27:Kl(t.stateNode);case 26:case 5:er(t,t.return),Jn(t);break;case 22:t.memoizedState===null&&Jn(t);break;case 30:Jn(t);break;default:Jn(t)}e=e.sibling}}function Jr(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,n=e,o=t,i=o.flags;switch(o.tag){case 0:case 11:case 15:Jr(n,o,a),kc(4,o);break;case 1:if(Jr(n,o,a),s=o,n=s.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(d){Ut(s,s.return,d)}if(s=o,n=s.updateQueue,n!==null){var l=s.stateNode;try{var c=n.shared.hiddenCallbacks;if(c!==null)for(n.shared.hiddenCallbacks=null,n=0;n<c.length;n++)Rb(c[n],l)}catch(d){Ut(s,s.return,d)}}a&&i&64&&N_(o),Vl(o,o.return);break;case 27:D_(o);case 26:case 5:Jr(n,o,a),a&&s===null&&i&4&&A_(o),Vl(o,o.return);break;case 12:Jr(n,o,a);break;case 13:Jr(n,o,a),a&&i&4&&M_(n,o);break;case 22:o.memoizedState===null&&Jr(n,o,a),Vl(o,o.return);break;case 30:break;default:Jr(n,o,a)}t=t.sibling}}function og(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Oc(a))}function ig(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Oc(e))}function Ys(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)L_(e,t,a,s),t=t.sibling}function L_(e,t,a,s){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Ys(e,t,a,s),n&2048&&kc(9,t);break;case 1:Ys(e,t,a,s);break;case 3:Ys(e,t,a,s),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Oc(e)));break;case 12:if(n&2048){Ys(e,t,a,s),e=t.stateNode;try{var o=t.memoizedProps,i=o.id,l=o.onPostCommit;typeof l=="function"&&l(i,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){Ut(t,t.return,c)}}else Ys(e,t,a,s);break;case 13:Ys(e,t,a,s);break;case 23:break;case 22:o=t.stateNode,i=t.alternate,t.memoizedState!==null?o._visibility&2?Ys(e,t,a,s):Gl(e,t):o._visibility&2?Ys(e,t,a,s):(o._visibility|=2,Wo(e,t,a,s,(t.subtreeFlags&10256)!==0)),n&2048&&og(i,t);break;case 24:Ys(e,t,a,s),n&2048&&ig(t.alternate,t);break;default:Ys(e,t,a,s)}}function Wo(e,t,a,s,n){for(n=n&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var o=e,i=t,l=a,c=s,d=i.flags;switch(i.tag){case 0:case 11:case 15:Wo(o,i,l,c,n),kc(8,i);break;case 23:break;case 22:var f=i.stateNode;i.memoizedState!==null?f._visibility&2?Wo(o,i,l,c,n):Gl(o,i):(f._visibility|=2,Wo(o,i,l,c,n)),n&&d&2048&&og(i.alternate,i);break;case 24:Wo(o,i,l,c,n),n&&d&2048&&ig(i.alternate,i);break;default:Wo(o,i,l,c,n)}t=t.sibling}}function Gl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,n=s.flags;switch(s.tag){case 22:Gl(a,s),n&2048&&og(s.alternate,s);break;case 24:Gl(a,s),n&2048&&ig(s.alternate,s);break;default:Gl(a,s)}t=t.sibling}}var Rl=8192;function qo(e){if(e.subtreeFlags&Rl)for(e=e.child;e!==null;)I_(e),e=e.sibling}function I_(e){switch(e.tag){case 26:qo(e),e.flags&Rl&&e.memoizedState!==null&&a2(Is,e.memoizedState,e.memoizedProps);break;case 5:qo(e);break;case 3:case 4:var t=Is;Is=bu(e.stateNode.containerInfo),qo(e),Is=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Rl,Rl=16777216,qo(e),Rl=t):qo(e));break;default:qo(e)}}function F_(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function wl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];xa=s,B_(s,e)}F_(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)q_(e),e=e.sibling}function q_(e){switch(e.tag){case 0:case 11:case 15:wl(e),e.flags&2048&&Rn(9,e,e.return);break;case 3:wl(e);break;case 12:wl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Id(e)):wl(e);break;default:wl(e)}}function Id(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];xa=s,B_(s,e)}F_(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Rn(8,t,t.return),Id(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Id(t));break;default:Id(t)}e=e.sibling}}function B_(e,t){for(;xa!==null;){var a=xa;switch(a.tag){case 0:case 11:case 15:Rn(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Oc(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,xa=s;else e:for(a=e;xa!==null;){s=xa;var n=s.sibling,o=s.return;if(O_(s),s===a){xa=null;break e}if(n!==null){n.return=o,xa=n;break e}xa=o}}}var xA={getCacheForType:function(e){var t=Ma(ma),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},yA=typeof WeakMap=="function"?WeakMap:Map,Ot=0,Vt=null,ct=null,pt=0,Rt=0,ns=null,xn=!1,sl=!1,lg=!1,Mr=0,ra=0,On=0,ho=0,cg=0,js=0,Ui=0,Yl=null,Ya=null,Em=!1,dg=0,mu=1/0,pu=null,Sn=null,Ea=0,En=null,$i=null,ji=0,Nm=0,Cm=null,U_=null,Ql=0,Am=null;function ds(){if(Ot&2&&pt!==0)return pt&-pt;if($e.T!==null){var e=Ii;return e!==0?e:fg()}return Wy()}function $_(){js===0&&(js=!(pt&536870912)||xt?Ky():536870912);var e=Ss.current;return e!==null&&(e.flags|=32),js}function us(e,t,a){(e===Vt&&(Rt===2||Rt===9)||e.cancelPendingCommit!==null)&&(Hi(e,0),yn(e,pt,js,!1)),Cc(e,a),(!(Ot&2)||e!==Vt)&&(e===Vt&&(!(Ot&2)&&(ho|=a),ra===4&&yn(e,pt,js,!1)),lr(e))}function H_(e,t,a){if(Ot&6)throw Error(oe(327));var s=!a&&(t&124)===0&&(t&e.expiredLanes)===0||Nc(e,t),n=s?jA(e,t):hh(e,t,!0),o=s;do{if(n===0){sl&&!s&&yn(e,t,0,!1);break}else{if(a=e.current.alternate,o&&!bA(a)){n=hh(e,t,!1),o=!1;continue}if(n===2){if(o=t,e.errorRecoveryDisabledLanes&o)var i=0;else i=e.pendingLanes&-536870913,i=i!==0?i:i&536870912?536870912:0;if(i!==0){t=i;e:{var l=e;n=Yl;var c=l.current.memoizedState.isDehydrated;if(c&&(Hi(l,i).flags|=256),i=hh(l,i,!1),i!==2){if(lg&&!c){l.errorRecoveryDisabledLanes|=o,ho|=o,n=4;break e}o=Ya,Ya=n,o!==null&&(Ya===null?Ya=o:Ya.push.apply(Ya,o))}n=i}if(o=!1,n!==2)continue}}if(n===1){Hi(e,0),yn(e,t,0,!0);break}e:{switch(s=e,o=n,o){case 0:case 1:throw Error(oe(345));case 4:if((t&4194048)!==t)break;case 6:yn(s,t,js,!xn);break e;case 2:Ya=null;break;case 3:case 5:break;default:throw Error(oe(329))}if((t&62914560)===t&&(n=dg+300-sr(),10<n)){if(yn(s,t,js,!xn),$u(s,0,!0)!==0)break e;s.timeoutHandle=cj(Ex.bind(null,s,a,Ya,pu,Em,t,js,ho,Ui,xn,o,2,-0,0),n);break e}Ex(s,a,Ya,pu,Em,t,js,ho,Ui,xn,o,0,-0,0)}}break}while(!0);lr(e)}function Ex(e,t,a,s,n,o,i,l,c,d,f,h,p,m){if(e.timeoutHandle=-1,h=t.subtreeFlags,(h&8192||(h&16785408)===16785408)&&(lc={stylesheets:null,count:0,unsuspend:t2},I_(t),h=s2(),h!==null)){e.cancelPendingCommit=h(Cx.bind(null,e,t,o,a,s,n,i,l,c,f,1,p,m)),yn(e,o,i,!d);return}Cx(e,t,o,a,s,n,i,l,c)}function bA(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var n=a[s],o=n.getSnapshot;n=n.value;try{if(!hs(o(),n))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yn(e,t,a,s){t&=~cg,t&=~ho,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var n=t;0<n;){var o=31-cs(n),i=1<<o;s[o]=-1,n&=~i}a!==0&&Zy(e,a,t)}function Wu(){return Ot&6?!0:(Lc(0),!1)}function ug(){if(ct!==null){if(Rt===0)var e=ct.return;else e=ct,Nr=ko=null,Zp(e),_i=null,nc=0,e=ct;for(;e!==null;)E_(e.alternate,e),e=e.return;ct=null}}function Hi(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,IA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ug(),Vt=e,ct=a=Ar(e.current,null),pt=t,Rt=0,ns=null,xn=!1,sl=Nc(e,t),lg=!1,Ui=js=cg=ho=On=ra=0,Ya=Yl=null,Em=!1,t&8&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var n=31-cs(s),o=1<<n;t|=e[n],s&=~o}return Mr=t,Yu(),a}function V_(e,t){ot=null,$e.H=lu,t===zc||t===Ku?(t=sx(),Rt=3):t===Tb?(t=sx(),Rt=4):Rt=t===y_?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ns=t,ct===null&&(ra=1,uu(e,_s(t,e.current)))}function G_(){var e=$e.H;return $e.H=lu,e===null?lu:e}function Y_(){var e=$e.A;return $e.A=xA,e}function Tm(){ra=4,xn||(pt&4194048)!==pt&&Ss.current!==null||(sl=!0),!(On&134217727)&&!(ho&134217727)||Vt===null||yn(Vt,pt,js,!1)}function hh(e,t,a){var s=Ot;Ot|=2;var n=G_(),o=Y_();(Vt!==e||pt!==t)&&(pu=null,Hi(e,t)),t=!1;var i=ra;e:do try{if(Rt!==0&&ct!==null){var l=ct,c=ns;switch(Rt){case 8:ug(),i=6;break e;case 3:case 2:case 9:case 6:Ss.current===null&&(t=!0);var d=Rt;if(Rt=0,ns=null,mi(e,l,c,d),a&&sl){i=0;break e}break;default:d=Rt,Rt=0,ns=null,mi(e,l,c,d)}}_A(),i=ra;break}catch(f){V_(e,f)}while(!0);return t&&e.shellSuspendCounter++,Nr=ko=null,Ot=s,$e.H=n,$e.A=o,ct===null&&(Vt=null,pt=0,Yu()),i}function _A(){for(;ct!==null;)Q_(ct)}function jA(e,t){var a=Ot;Ot|=2;var s=G_(),n=Y_();Vt!==e||pt!==t?(pu=null,mu=sr()+500,Hi(e,t)):sl=Nc(e,t);e:do try{if(Rt!==0&&ct!==null){t=ct;var o=ns;t:switch(Rt){case 1:Rt=0,ns=null,mi(e,t,o,1);break;case 2:case 9:if(ax(o)){Rt=0,ns=null,Nx(t);break}t=function(){Rt!==2&&Rt!==9||Vt!==e||(Rt=7),lr(e)},o.then(t,t);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:ax(o)?(Rt=0,ns=null,Nx(t)):(Rt=0,ns=null,mi(e,t,o,7));break;case 5:var i=null;switch(ct.tag){case 26:i=ct.memoizedState;case 5:case 27:var l=ct;if(!i||hj(i)){Rt=0,ns=null;var c=l.sibling;if(c!==null)ct=c;else{var d=l.return;d!==null?(ct=d,ef(d)):ct=null}break t}}Rt=0,ns=null,mi(e,t,o,5);break;case 6:Rt=0,ns=null,mi(e,t,o,6);break;case 8:ug(),ra=6;break e;default:throw Error(oe(462))}}wA();break}catch(f){V_(e,f)}while(!0);return Nr=ko=null,$e.H=s,$e.A=n,Ot=a,ct!==null?0:(Vt=null,pt=0,Yu(),ra)}function wA(){for(;ct!==null&&!V1();)Q_(ct)}function Q_(e){var t=S_(e.alternate,e,Mr);e.memoizedProps=e.pendingProps,t===null?ef(e):ct=t}function Nx(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=yx(a,t,t.pendingProps,t.type,void 0,pt);break;case 11:t=yx(a,t,t.pendingProps,t.type.render,t.ref,pt);break;case 5:Zp(t);default:E_(a,t),t=ct=Eb(t,Mr),t=S_(a,t,Mr)}e.memoizedProps=e.pendingProps,t===null?ef(e):ct=t}function mi(e,t,a,s){Nr=ko=null,Zp(t),_i=null,nc=0;var n=t.return;try{if(fA(e,n,t,a,pt)){ra=1,uu(e,_s(a,e.current)),ct=null;return}}catch(o){if(n!==null)throw ct=n,o;ra=1,uu(e,_s(a,e.current)),ct=null;return}t.flags&32768?(xt||s===1?e=!0:sl||pt&536870912?e=!1:(xn=e=!0,(s===2||s===9||s===3||s===6)&&(s=Ss.current,s!==null&&s.tag===13&&(s.flags|=16384))),K_(t,e)):ef(t)}function ef(e){var t=e;do{if(t.flags&32768){K_(t,xn);return}e=t.return;var a=mA(t.alternate,t,Mr);if(a!==null){ct=a;return}if(t=t.sibling,t!==null){ct=t;return}ct=t=e}while(t!==null);ra===0&&(ra=5)}function K_(e,t){do{var a=pA(e.alternate,e);if(a!==null){a.flags&=32767,ct=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ct=e;return}ct=e=a}while(e!==null);ra=6,ct=null}function Cx(e,t,a,s,n,o,i,l,c){e.cancelPendingCommit=null;do tf();while(Ea!==0);if(Ot&6)throw Error(oe(327));if(t!==null){if(t===e.current)throw Error(oe(177));if(o=t.lanes|t.childLanes,o|=Ip,tC(e,a,o,i,l,c),e===Vt&&(ct=Vt=null,pt=0),$i=t,En=e,ji=a,Nm=o,Cm=n,U_=s,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,CA(Jd,function(){return ej(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,t.subtreeFlags&13878||s){s=$e.T,$e.T=null,n=yt.p,yt.p=2,i=Ot,Ot|=4;try{gA(e,t,a)}finally{Ot=i,yt.p=n,$e.T=s}}Ea=1,X_(),Z_(),J_()}}function X_(){if(Ea===1){Ea=0;var e=En,t=$i,a=(t.flags&13878)!==0;if(t.subtreeFlags&13878||a){a=$e.T,$e.T=null;var s=yt.p;yt.p=2;var n=Ot;Ot|=4;try{P_(t,e);var o=zm,i=vb(e.containerInfo),l=o.focusedElem,c=o.selectionRange;if(i!==l&&l&&l.ownerDocument&&gb(l.ownerDocument.documentElement,l)){if(c!==null&&Lp(l)){var d=c.start,f=c.end;if(f===void 0&&(f=d),"selectionStart"in l)l.selectionStart=d,l.selectionEnd=Math.min(f,l.value.length);else{var h=l.ownerDocument||document,p=h&&h.defaultView||window;if(p.getSelection){var m=p.getSelection(),_=l.textContent.length,g=Math.min(c.start,_),x=c.end===void 0?g:Math.min(c.end,_);!m.extend&&g>x&&(i=x,x=g,g=i);var y=Qv(l,g),v=Qv(l,x);if(y&&v&&(m.rangeCount!==1||m.anchorNode!==y.node||m.anchorOffset!==y.offset||m.focusNode!==v.node||m.focusOffset!==v.offset)){var b=h.createRange();b.setStart(y.node,y.offset),m.removeAllRanges(),g>x?(m.addRange(b),m.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),m.addRange(b))}}}}for(h=[],m=l;m=m.parentNode;)m.nodeType===1&&h.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<h.length;l++){var j=h[l];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}wu=!!Om,zm=Om=null}finally{Ot=n,yt.p=s,$e.T=a}}e.current=t,Ea=2}}function Z_(){if(Ea===2){Ea=0;var e=En,t=$i,a=(t.flags&8772)!==0;if(t.subtreeFlags&8772||a){a=$e.T,$e.T=null;var s=yt.p;yt.p=2;var n=Ot;Ot|=4;try{R_(e,t.alternate,t)}finally{Ot=n,yt.p=s,$e.T=a}}Ea=3}}function J_(){if(Ea===4||Ea===3){Ea=0,G1();var e=En,t=$i,a=ji,s=U_;t.subtreeFlags&10256||t.flags&10256?Ea=5:(Ea=0,$i=En=null,W_(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(Sn=null),Dp(a),t=t.stateNode,ls&&typeof ls.onCommitFiberRoot=="function")try{ls.onCommitFiberRoot(Ec,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=$e.T,n=yt.p,yt.p=2,$e.T=null;try{for(var o=e.onRecoverableError,i=0;i<s.length;i++){var l=s[i];o(l.value,{componentStack:l.stack})}}finally{$e.T=t,yt.p=n}}ji&3&&tf(),lr(e),n=e.pendingLanes,a&4194090&&n&42?e===Am?Ql++:(Ql=0,Am=e):Ql=0,Lc(0)}}function W_(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Oc(t)))}function tf(e){return X_(),Z_(),J_(),ej()}function ej(){if(Ea!==5)return!1;var e=En,t=Nm;Nm=0;var a=Dp(ji),s=$e.T,n=yt.p;try{yt.p=32>a?32:a,$e.T=null,a=Cm,Cm=null;var o=En,i=ji;if(Ea=0,$i=En=null,ji=0,Ot&6)throw Error(oe(331));var l=Ot;if(Ot|=4,q_(o.current),L_(o,o.current,i,a),Ot=l,Lc(0,!1),ls&&typeof ls.onPostCommitFiberRoot=="function")try{ls.onPostCommitFiberRoot(Ec,o)}catch{}return!0}finally{yt.p=n,$e.T=s,W_(e,t)}}function Ax(e,t,a){t=_s(a,t),t=_m(e.stateNode,t,2),e=wn(e,t,2),e!==null&&(Cc(e,2),lr(e))}function Ut(e,t,a){if(e.tag===3)Ax(e,e,a);else for(;t!==null;){if(t.tag===3){Ax(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Sn===null||!Sn.has(s))){e=_s(a,e),a=v_(2),s=wn(t,a,2),s!==null&&(x_(a,s,t,e),Cc(s,2),lr(s));break}}t=t.return}}function mh(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new yA;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(a)||(lg=!0,n.add(a),e=SA.bind(null,e,t,a),t.then(e,e))}function SA(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Vt===e&&(pt&a)===a&&(ra===4||ra===3&&(pt&62914560)===pt&&300>sr()-dg?!(Ot&2)&&Hi(e,0):cg|=a,Ui===pt&&(Ui=0)),lr(e)}function tj(e,t){t===0&&(t=Xy()),e=al(e,t),e!==null&&(Cc(e,t),lr(e))}function EA(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),tj(e,a)}function NA(e,t){var a=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(a=n.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(oe(314))}s!==null&&s.delete(t),tj(e,a)}function CA(e,t){return Ap(e,t)}var gu=null,ei=null,Dm=!1,vu=!1,ph=!1,mo=0;function lr(e){e!==ei&&e.next===null&&(ei===null?gu=ei=e:ei=ei.next=e),vu=!0,Dm||(Dm=!0,TA())}function Lc(e,t){if(!ph&&vu){ph=!0;do for(var a=!1,s=gu;s!==null;){if(e!==0){var n=s.pendingLanes;if(n===0)var o=0;else{var i=s.suspendedLanes,l=s.pingedLanes;o=(1<<31-cs(42|e)+1)-1,o&=n&~(i&~l),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(a=!0,Tx(s,o))}else o=pt,o=$u(s,s===Vt?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(o&3)||Nc(s,o)||(a=!0,Tx(s,o));s=s.next}while(a);ph=!1}}function AA(){aj()}function aj(){vu=Dm=!1;var e=0;mo!==0&&(LA()&&(e=mo),mo=0);for(var t=sr(),a=null,s=gu;s!==null;){var n=s.next,o=sj(s,t);o===0?(s.next=null,a===null?gu=n:a.next=n,n===null&&(ei=a)):(a=s,(e!==0||o&3)&&(vu=!0)),s=n}Lc(e)}function sj(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var i=31-cs(o),l=1<<i,c=n[i];c===-1?(!(l&a)||l&s)&&(n[i]=eC(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}if(t=Vt,a=pt,a=$u(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(Rt===2||Rt===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Bf(s),e.callbackNode=null,e.callbackPriority=0;if(!(a&3)||Nc(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&Bf(s),Dp(a)){case 2:case 8:a=Yy;break;case 32:a=Jd;break;case 268435456:a=Qy;break;default:a=Jd}return s=rj.bind(null,e),a=Ap(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&Bf(s),e.callbackPriority=2,e.callbackNode=null,2}function rj(e,t){if(Ea!==0&&Ea!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(tf()&&e.callbackNode!==a)return null;var s=pt;return s=$u(e,e===Vt?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(H_(e,s,t),sj(e,sr()),e.callbackNode!=null&&e.callbackNode===a?rj.bind(null,e):null)}function Tx(e,t){if(tf())return null;H_(e,t,!0)}function TA(){FA(function(){Ot&6?Ap(Gy,AA):aj()})}function fg(){return mo===0&&(mo=Ky()),mo}function Dx(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Dd(""+e)}function Rx(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function DA(e,t,a,s,n){if(t==="submit"&&a&&a.stateNode===n){var o=Dx((n[Xa]||null).action),i=s.submitter;i&&(t=(t=i[Xa]||null)?Dx(t.formAction):i.getAttribute("formAction"),t!==null&&(o=t,i=null));var l=new Hu("action","action",null,s,n);e.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(mo!==0){var c=i?Rx(n,i):new FormData(n);ym(a,{pending:!0,data:c,method:n.method,action:o},null,c)}}else typeof o=="function"&&(l.preventDefault(),c=i?Rx(n,i):new FormData(n),ym(a,{pending:!0,data:c,method:n.method,action:o},o,c))},currentTarget:n}]})}}for(var gh=0;gh<im.length;gh++){var vh=im[gh],RA=vh.toLowerCase(),OA=vh[0].toUpperCase()+vh.slice(1);Hs(RA,"on"+OA)}Hs(yb,"onAnimationEnd");Hs(bb,"onAnimationIteration");Hs(_b,"onAnimationStart");Hs("dblclick","onDoubleClick");Hs("focusin","onFocus");Hs("focusout","onBlur");Hs(KC,"onTransitionRun");Hs(XC,"onTransitionStart");Hs(ZC,"onTransitionCancel");Hs(jb,"onTransitionEnd");ki("onMouseEnter",["mouseout","mouseover"]);ki("onMouseLeave",["mouseout","mouseover"]);ki("onPointerEnter",["pointerout","pointerover"]);ki("onPointerLeave",["pointerout","pointerover"]);zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zo("onBeforeInput",["compositionend","keypress","textInput","paste"]);zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oc));function nj(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],n=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var i=s.length-1;0<=i;i--){var l=s[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&n.isPropagationStopped())break e;o=l,n.currentTarget=d;try{o(n)}catch(f){du(f)}n.currentTarget=null,o=c}else for(i=0;i<s.length;i++){if(l=s[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&n.isPropagationStopped())break e;o=l,n.currentTarget=d;try{o(n)}catch(f){du(f)}n.currentTarget=null,o=c}}}}function lt(e,t){var a=t[em];a===void 0&&(a=t[em]=new Set);var s=e+"__bubble";a.has(s)||(oj(t,e,2,!1),a.add(s))}function xh(e,t,a){var s=0;t&&(s|=4),oj(a,e,s,t)}var hd="_reactListening"+Math.random().toString(36).slice(2);function hg(e){if(!e[hd]){e[hd]=!0,eb.forEach(function(a){a!=="selectionchange"&&(zA.has(a)||xh(a,!1,e),xh(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hd]||(t[hd]=!0,xh("selectionchange",!1,t))}}function oj(e,t,a,s){switch(xj(t)){case 2:var n=o2;break;case 8:n=i2;break;default:n=vg}a=n.bind(null,t,a,e),n=void 0,!rm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):n!==void 0?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function yh(e,t,a,s,n){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var l=s.stateNode.containerInfo;if(l===n)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&i.stateNode.containerInfo===n)return;i=i.return}for(;l!==null;){if(i=ni(l),i===null)return;if(c=i.tag,c===5||c===6||c===26||c===27){s=o=i;continue e}l=l.parentNode}}s=s.return}lb(function(){var d=o,f=zp(a),h=[];e:{var p=wb.get(e);if(p!==void 0){var m=Hu,_=e;switch(e){case"keypress":if(Od(a)===0)break e;case"keydown":case"keyup":m=CC;break;case"focusin":_="focus",m=Kf;break;case"focusout":_="blur",m=Kf;break;case"beforeblur":case"afterblur":m=Kf;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Iv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=pC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=DC;break;case yb:case bb:case _b:m=xC;break;case jb:m=OC;break;case"scroll":case"scrollend":m=hC;break;case"wheel":m=MC;break;case"copy":case"cut":case"paste":m=bC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=qv;break;case"toggle":case"beforetoggle":m=kC}var g=(t&4)!==0,x=!g&&(e==="scroll"||e==="scrollend"),y=g?p!==null?p+"Capture":null:p;g=[];for(var v=d,b;v!==null;){var j=v;if(b=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||b===null||y===null||(j=ec(v,y),j!=null&&g.push(ic(v,j,b))),x)break;v=v.return}0<g.length&&(p=new m(p,_,null,a,f),h.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&a!==sm&&(_=a.relatedTarget||a.fromElement)&&(ni(_)||_[el]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(_=a.relatedTarget||a.toElement,m=d,_=_?ni(_):null,_!==null&&(x=Sc(_),g=_.tag,_!==x||g!==5&&g!==27&&g!==6)&&(_=null)):(m=null,_=d),m!==_)){if(g=Iv,j="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=qv,j="onPointerLeave",y="onPointerEnter",v="pointer"),x=m==null?p:Dl(m),b=_==null?p:Dl(_),p=new g(j,v+"leave",m,a,f),p.target=x,p.relatedTarget=b,j=null,ni(f)===d&&(g=new g(y,v+"enter",_,a,f),g.target=b,g.relatedTarget=x,j=g),x=j,m&&_)t:{for(g=m,y=_,v=0,b=g;b;b=Bo(b))v++;for(b=0,j=y;j;j=Bo(j))b++;for(;0<v-b;)g=Bo(g),v--;for(;0<b-v;)y=Bo(y),b--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=Bo(g),y=Bo(y)}g=null}else g=null;m!==null&&Ox(h,p,m,g,!1),_!==null&&x!==null&&Ox(h,x,_,g,!0)}}e:{if(p=d?Dl(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var w=Hv;else if($v(p))if(mb)w=GC;else{w=HC;var S=$C}else m=p.nodeName,!m||m.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?d&&Op(d.elementType)&&(w=Hv):w=VC;if(w&&(w=w(e,d))){hb(h,w,a,f);break e}S&&S(e,p,d),e==="focusout"&&d&&p.type==="number"&&d.memoizedProps.value!=null&&am(p,"number",p.value)}switch(S=d?Dl(d):window,e){case"focusin":($v(S)||S.contentEditable==="true")&&(li=S,nm=d,Il=null);break;case"focusout":Il=nm=li=null;break;case"mousedown":om=!0;break;case"contextmenu":case"mouseup":case"dragend":om=!1,Kv(h,a,f);break;case"selectionchange":if(QC)break;case"keydown":case"keyup":Kv(h,a,f)}var N;if(kp)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ii?ub(e,a)&&(C="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(C="onCompositionStart");C&&(db&&a.locale!=="ko"&&(ii||C!=="onCompositionStart"?C==="onCompositionEnd"&&ii&&(N=cb()):(vn=f,Mp="value"in vn?vn.value:vn.textContent,ii=!0)),S=xu(d,C),0<S.length&&(C=new Fv(C,e,null,a,f),h.push({event:C,listeners:S}),N?C.data=N:(N=fb(a),N!==null&&(C.data=N)))),(N=IC?FC(e,a):qC(e,a))&&(C=xu(d,"onBeforeInput"),0<C.length&&(S=new Fv("onBeforeInput","beforeinput",null,a,f),h.push({event:S,listeners:C}),S.data=N)),DA(h,e,d,a,f)}nj(h,t)})}function ic(e,t,a){return{instance:e,listener:t,currentTarget:a}}function xu(e,t){for(var a=t+"Capture",s=[];e!==null;){var n=e,o=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||o===null||(n=ec(e,a),n!=null&&s.unshift(ic(e,n,o)),n=ec(e,t),n!=null&&s.push(ic(e,n,o))),e.tag===3)return s;e=e.return}return[]}function Bo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ox(e,t,a,s,n){for(var o=t._reactName,i=[];a!==null&&a!==s;){var l=a,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||d===null||(c=d,n?(d=ec(a,o),d!=null&&i.unshift(ic(a,d,c))):n||(d=ec(a,o),d!=null&&i.push(ic(a,d,c)))),a=a.return}i.length!==0&&e.push({event:t,listeners:i})}var MA=/\r\n?/g,PA=/\u0000|\uFFFD/g;function zx(e){return(typeof e=="string"?e:""+e).replace(MA,`
`).replace(PA,"")}function ij(e,t){return t=zx(t),zx(e)===t}function af(){}function Lt(e,t,a,s,n,o){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Li(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Li(e,""+s);break;case"className":od(e,"class",s);break;case"tabIndex":od(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":od(e,a,s);break;case"style":ib(e,s,o);break;case"data":if(t!=="object"){od(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Dd(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(a==="formAction"?(t!=="input"&&Lt(e,t,"name",n.name,n,null),Lt(e,t,"formEncType",n.formEncType,n,null),Lt(e,t,"formMethod",n.formMethod,n,null),Lt(e,t,"formTarget",n.formTarget,n,null)):(Lt(e,t,"encType",n.encType,n,null),Lt(e,t,"method",n.method,n,null),Lt(e,t,"target",n.target,n,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Dd(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=af);break;case"onScroll":s!=null&&lt("scroll",e);break;case"onScrollEnd":s!=null&&lt("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(oe(61));if(a=s.__html,a!=null){if(n.children!=null)throw Error(oe(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=Dd(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":lt("beforetoggle",e),lt("toggle",e),Td(e,"popover",s);break;case"xlinkActuate":mr(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":mr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":mr(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":mr(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":mr(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":mr(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":mr(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":mr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":mr(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Td(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=uC.get(a)||a,Td(e,a,s))}}function Rm(e,t,a,s,n,o){switch(a){case"style":ib(e,s,o);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(oe(61));if(a=s.__html,a!=null){if(n.children!=null)throw Error(oe(60));e.innerHTML=a}}break;case"children":typeof s=="string"?Li(e,s):(typeof s=="number"||typeof s=="bigint")&&Li(e,""+s);break;case"onScroll":s!=null&&lt("scroll",e);break;case"onScrollEnd":s!=null&&lt("scrollend",e);break;case"onClick":s!=null&&(e.onclick=af);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tb.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(n=a.endsWith("Capture"),t=a.slice(2,n?a.length-7:void 0),o=e[Xa]||null,o=o!=null?o[a]:null,typeof o=="function"&&e.removeEventListener(t,o,n),typeof s=="function")){typeof o!="function"&&o!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,n);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):Td(e,a,s)}}}function Na(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lt("error",e),lt("load",e);var s=!1,n=!1,o;for(o in a)if(a.hasOwnProperty(o)){var i=a[o];if(i!=null)switch(o){case"src":s=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(oe(137,t));default:Lt(e,t,o,i,a,null)}}n&&Lt(e,t,"srcSet",a.srcSet,a,null),s&&Lt(e,t,"src",a.src,a,null);return;case"input":lt("invalid",e);var l=o=i=n=null,c=null,d=null;for(s in a)if(a.hasOwnProperty(s)){var f=a[s];if(f!=null)switch(s){case"name":n=f;break;case"type":i=f;break;case"checked":c=f;break;case"defaultChecked":d=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(oe(137,t));break;default:Lt(e,t,s,f,a,null)}}rb(e,o,l,c,d,i,n,!1),Wd(e);return;case"select":lt("invalid",e),s=i=o=null;for(n in a)if(a.hasOwnProperty(n)&&(l=a[n],l!=null))switch(n){case"value":o=l;break;case"defaultValue":i=l;break;case"multiple":s=l;default:Lt(e,t,n,l,a,null)}t=o,a=i,e.multiple=!!s,t!=null?gi(e,!!s,t,!1):a!=null&&gi(e,!!s,a,!0);return;case"textarea":lt("invalid",e),o=n=s=null;for(i in a)if(a.hasOwnProperty(i)&&(l=a[i],l!=null))switch(i){case"value":s=l;break;case"defaultValue":n=l;break;case"children":o=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(oe(91));break;default:Lt(e,t,i,l,a,null)}ob(e,s,n,o),Wd(e);return;case"option":for(c in a)if(a.hasOwnProperty(c)&&(s=a[c],s!=null))switch(c){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Lt(e,t,c,s,a,null)}return;case"dialog":lt("beforetoggle",e),lt("toggle",e),lt("cancel",e),lt("close",e);break;case"iframe":case"object":lt("load",e);break;case"video":case"audio":for(s=0;s<oc.length;s++)lt(oc[s],e);break;case"image":lt("error",e),lt("load",e);break;case"details":lt("toggle",e);break;case"embed":case"source":case"link":lt("error",e),lt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in a)if(a.hasOwnProperty(d)&&(s=a[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(oe(137,t));default:Lt(e,t,d,s,a,null)}return;default:if(Op(t)){for(f in a)a.hasOwnProperty(f)&&(s=a[f],s!==void 0&&Rm(e,t,f,s,a,void 0));return}}for(l in a)a.hasOwnProperty(l)&&(s=a[l],s!=null&&Lt(e,t,l,s,a,null))}function kA(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,o=null,i=null,l=null,c=null,d=null,f=null;for(m in a){var h=a[m];if(a.hasOwnProperty(m)&&h!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":c=h;default:s.hasOwnProperty(m)||Lt(e,t,m,null,s,h)}}for(var p in s){var m=s[p];if(h=a[p],s.hasOwnProperty(p)&&(m!=null||h!=null))switch(p){case"type":o=m;break;case"name":n=m;break;case"checked":d=m;break;case"defaultChecked":f=m;break;case"value":i=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(oe(137,t));break;default:m!==h&&Lt(e,t,p,m,s,h)}}tm(e,i,l,c,d,f,o,n);return;case"select":m=i=l=p=null;for(o in a)if(c=a[o],a.hasOwnProperty(o)&&c!=null)switch(o){case"value":break;case"multiple":m=c;default:s.hasOwnProperty(o)||Lt(e,t,o,null,s,c)}for(n in s)if(o=s[n],c=a[n],s.hasOwnProperty(n)&&(o!=null||c!=null))switch(n){case"value":p=o;break;case"defaultValue":l=o;break;case"multiple":i=o;default:o!==c&&Lt(e,t,n,o,s,c)}t=l,a=i,s=m,p!=null?gi(e,!!a,p,!1):!!s!=!!a&&(t!=null?gi(e,!!a,t,!0):gi(e,!!a,a?[]:"",!1));return;case"textarea":m=p=null;for(l in a)if(n=a[l],a.hasOwnProperty(l)&&n!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Lt(e,t,l,null,s,n)}for(i in s)if(n=s[i],o=a[i],s.hasOwnProperty(i)&&(n!=null||o!=null))switch(i){case"value":p=n;break;case"defaultValue":m=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(oe(91));break;default:n!==o&&Lt(e,t,i,n,s,o)}nb(e,p,m);return;case"option":for(var _ in a)if(p=a[_],a.hasOwnProperty(_)&&p!=null&&!s.hasOwnProperty(_))switch(_){case"selected":e.selected=!1;break;default:Lt(e,t,_,null,s,p)}for(c in s)if(p=s[c],m=a[c],s.hasOwnProperty(c)&&p!==m&&(p!=null||m!=null))switch(c){case"selected":e.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Lt(e,t,c,p,s,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in a)p=a[g],a.hasOwnProperty(g)&&p!=null&&!s.hasOwnProperty(g)&&Lt(e,t,g,null,s,p);for(d in s)if(p=s[d],m=a[d],s.hasOwnProperty(d)&&p!==m&&(p!=null||m!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(oe(137,t));break;default:Lt(e,t,d,p,s,m)}return;default:if(Op(t)){for(var x in a)p=a[x],a.hasOwnProperty(x)&&p!==void 0&&!s.hasOwnProperty(x)&&Rm(e,t,x,void 0,s,p);for(f in s)p=s[f],m=a[f],!s.hasOwnProperty(f)||p===m||p===void 0&&m===void 0||Rm(e,t,f,p,s,m);return}}for(var y in a)p=a[y],a.hasOwnProperty(y)&&p!=null&&!s.hasOwnProperty(y)&&Lt(e,t,y,null,s,p);for(h in s)p=s[h],m=a[h],!s.hasOwnProperty(h)||p===m||p==null&&m==null||Lt(e,t,h,p,s,m)}var Om=null,zm=null;function yu(e){return e.nodeType===9?e:e.ownerDocument}function Mx(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lj(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Mm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bh=null;function LA(){var e=window.event;return e&&e.type==="popstate"?e===bh?!1:(bh=e,!0):(bh=null,!1)}var cj=typeof setTimeout=="function"?setTimeout:void 0,IA=typeof clearTimeout=="function"?clearTimeout:void 0,Px=typeof Promise=="function"?Promise:void 0,FA=typeof queueMicrotask=="function"?queueMicrotask:typeof Px<"u"?function(e){return Px.resolve(null).then(e).catch(qA)}:cj;function qA(e){setTimeout(function(){throw e})}function kn(e){return e==="head"}function kx(e,t){var a=t,s=0,n=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(0<s&&8>s){a=s;var i=e.ownerDocument;if(a&1&&Kl(i.documentElement),a&2&&Kl(i.body),a&4)for(a=i.head,Kl(a),i=a.firstChild;i;){var l=i.nextSibling,c=i.nodeName;i[Ac]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&i.rel.toLowerCase()==="stylesheet"||a.removeChild(i),i=l}}if(n===0){e.removeChild(o),fc(t);return}n--}else a==="$"||a==="$?"||a==="$!"?n++:s=a.charCodeAt(0)-48;else s=0;a=o}while(a);fc(t)}function Pm(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Pm(a),Rp(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function BA(e,t,a,s){for(;e.nodeType===1;){var n=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Ac])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=qs(e.nextSibling),e===null)break}return null}function UA(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=qs(e.nextSibling),e===null))return null;return e}function km(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function $A(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function qs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Lm=null;function Lx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function dj(e,t,a){switch(t=yu(a),e){case"html":if(e=t.documentElement,!e)throw Error(oe(452));return e;case"head":if(e=t.head,!e)throw Error(oe(453));return e;case"body":if(e=t.body,!e)throw Error(oe(454));return e;default:throw Error(oe(451))}}function Kl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Rp(e)}var Es=new Map,Ix=new Set;function bu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Fr=yt.d;yt.d={f:HA,r:VA,D:GA,C:YA,L:QA,m:KA,X:ZA,S:XA,M:JA};function HA(){var e=Fr.f(),t=Wu();return e||t}function VA(e){var t=tl(e);t!==null&&t.tag===5&&t.type==="form"?s_(t):Fr.r(e)}var rl=typeof document>"u"?null:document;function uj(e,t,a){var s=rl;if(s&&typeof t=="string"&&t){var n=bs(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof a=="string"&&(n+='[crossorigin="'+a+'"]'),Ix.has(n)||(Ix.add(n),e={rel:e,crossOrigin:a,href:t},s.querySelector(n)===null&&(t=s.createElement("link"),Na(t,"link",e),ya(t),s.head.appendChild(t)))}}function GA(e){Fr.D(e),uj("dns-prefetch",e,null)}function YA(e,t){Fr.C(e,t),uj("preconnect",e,t)}function QA(e,t,a){Fr.L(e,t,a);var s=rl;if(s&&e&&t){var n='link[rel="preload"][as="'+bs(t)+'"]';t==="image"&&a&&a.imageSrcSet?(n+='[imagesrcset="'+bs(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(n+='[imagesizes="'+bs(a.imageSizes)+'"]')):n+='[href="'+bs(e)+'"]';var o=n;switch(t){case"style":o=Vi(e);break;case"script":o=nl(e)}Es.has(o)||(e=Qt({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Es.set(o,e),s.querySelector(n)!==null||t==="style"&&s.querySelector(Ic(o))||t==="script"&&s.querySelector(Fc(o))||(t=s.createElement("link"),Na(t,"link",e),ya(t),s.head.appendChild(t)))}}function KA(e,t){Fr.m(e,t);var a=rl;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+bs(s)+'"][href="'+bs(e)+'"]',o=n;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=nl(e)}if(!Es.has(o)&&(e=Qt({rel:"modulepreload",href:e},t),Es.set(o,e),a.querySelector(n)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Fc(o)))return}s=a.createElement("link"),Na(s,"link",e),ya(s),a.head.appendChild(s)}}}function XA(e,t,a){Fr.S(e,t,a);var s=rl;if(s&&e){var n=pi(s).hoistableStyles,o=Vi(e);t=t||"default";var i=n.get(o);if(!i){var l={loading:0,preload:null};if(i=s.querySelector(Ic(o)))l.loading=5;else{e=Qt({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Es.get(o))&&mg(e,a);var c=i=s.createElement("link");ya(c),Na(c,"link",e),c._p=new Promise(function(d,f){c.onload=d,c.onerror=f}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Fd(i,t,s)}i={type:"stylesheet",instance:i,count:1,state:l},n.set(o,i)}}}function ZA(e,t){Fr.X(e,t);var a=rl;if(a&&e){var s=pi(a).hoistableScripts,n=nl(e),o=s.get(n);o||(o=a.querySelector(Fc(n)),o||(e=Qt({src:e,async:!0},t),(t=Es.get(n))&&pg(e,t),o=a.createElement("script"),ya(o),Na(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(n,o))}}function JA(e,t){Fr.M(e,t);var a=rl;if(a&&e){var s=pi(a).hoistableScripts,n=nl(e),o=s.get(n);o||(o=a.querySelector(Fc(n)),o||(e=Qt({src:e,async:!0,type:"module"},t),(t=Es.get(n))&&pg(e,t),o=a.createElement("script"),ya(o),Na(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(n,o))}}function Fx(e,t,a,s){var n=(n=_n.current)?bu(n):null;if(!n)throw Error(oe(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Vi(a.href),a=pi(n).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Vi(a.href);var o=pi(n).hoistableStyles,i=o.get(e);if(i||(n=n.ownerDocument||n,i={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,i),(o=n.querySelector(Ic(e)))&&!o._p&&(i.instance=o,i.state.loading=5),Es.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Es.set(e,a),o||WA(n,e,a,i.state))),t&&s===null)throw Error(oe(528,""));return i}if(t&&s!==null)throw Error(oe(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=nl(a),a=pi(n).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(oe(444,e))}}function Vi(e){return'href="'+bs(e)+'"'}function Ic(e){return'link[rel="stylesheet"]['+e+"]"}function fj(e){return Qt({},e,{"data-precedence":e.precedence,precedence:null})}function WA(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Na(t,"link",a),ya(t),e.head.appendChild(t))}function nl(e){return'[src="'+bs(e)+'"]'}function Fc(e){return"script[async]"+e}function qx(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+bs(a.href)+'"]');if(s)return t.instance=s,ya(s),s;var n=Qt({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),ya(s),Na(s,"style",n),Fd(s,a.precedence,e),t.instance=s;case"stylesheet":n=Vi(a.href);var o=e.querySelector(Ic(n));if(o)return t.state.loading|=4,t.instance=o,ya(o),o;s=fj(a),(n=Es.get(n))&&mg(s,n),o=(e.ownerDocument||e).createElement("link"),ya(o);var i=o;return i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),Na(o,"link",s),t.state.loading|=4,Fd(o,a.precedence,e),t.instance=o;case"script":return o=nl(a.src),(n=e.querySelector(Fc(o)))?(t.instance=n,ya(n),n):(s=a,(n=Es.get(o))&&(s=Qt({},a),pg(s,n)),e=e.ownerDocument||e,n=e.createElement("script"),ya(n),Na(n,"link",s),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(oe(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(s=t.instance,t.state.loading|=4,Fd(s,a.precedence,e));return t.instance}function Fd(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=s.length?s[s.length-1]:null,o=n,i=0;i<s.length;i++){var l=s[i];if(l.dataset.precedence===t)o=l;else if(o!==n)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function mg(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function pg(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var qd=null;function Bx(e,t,a){if(qd===null){var s=new Map,n=qd=new Map;n.set(a,s)}else n=qd,s=n.get(a),s||(s=new Map,n.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),n=0;n<a.length;n++){var o=a[n];if(!(o[Ac]||o[za]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var i=o.getAttribute(t)||"";i=e+i;var l=s.get(i);l?l.push(o):s.set(i,[o])}}return s}function Ux(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function e2(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function hj(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var lc=null;function t2(){}function a2(e,t,a){if(lc===null)throw Error(oe(475));var s=lc;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var n=Vi(a.href),o=e.querySelector(Ic(n));if(o){e=o._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=_u.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=o,ya(o);return}o=e.ownerDocument||e,a=fj(a),(n=Es.get(n))&&mg(a,n),o=o.createElement("link"),ya(o);var i=o;i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),Na(o,"link",a),t.instance=o}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(s.count++,t=_u.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function s2(){if(lc===null)throw Error(oe(475));var e=lc;return e.stylesheets&&e.count===0&&Im(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&Im(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function _u(){if(this.count--,this.count===0){if(this.stylesheets)Im(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ju=null;function Im(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ju=new Map,t.forEach(r2,e),ju=null,_u.call(e))}function r2(e,t){if(!(t.state.loading&4)){var a=ju.get(e);if(a)var s=a.get(null);else{a=new Map,ju.set(e,a);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<n.length;o++){var i=n[o];(i.nodeName==="LINK"||i.getAttribute("media")!=="not all")&&(a.set(i.dataset.precedence,i),s=i)}s&&a.set(null,s)}n=t.instance,i=n.getAttribute("data-precedence"),o=a.get(i)||s,o===s&&a.set(null,n),a.set(i,n),this.count++,s=_u.bind(this),n.addEventListener("load",s),n.addEventListener("error",s),o?o.parentNode.insertBefore(n,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var cc={$$typeof:wr,Provider:null,Consumer:null,_currentValue:io,_currentValue2:io,_threadCount:0};function n2(e,t,a,s,n,o,i,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Uf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uf(0),this.hiddenUpdates=Uf(null),this.identifierPrefix=s,this.onUncaughtError=n,this.onCaughtError=o,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function mj(e,t,a,s,n,o,i,l,c,d,f,h){return e=new n2(e,t,a,i,l,c,d,h),t=1,o===!0&&(t|=24),o=is(3,null,null,t),e.current=o,o.stateNode=e,t=$p(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:s,isDehydrated:a,cache:t},Vp(o),e}function pj(e){return e?(e=ui,e):ui}function gj(e,t,a,s,n,o){n=pj(n),s.context===null?s.context=n:s.pendingContext=n,s=jn(t),s.payload={element:a},o=o===void 0?null:o,o!==null&&(s.callback=o),a=wn(e,s,t),a!==null&&(us(a,e,t),Bl(a,e,t))}function $x(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function gg(e,t){$x(e,t),(e=e.alternate)&&$x(e,t)}function vj(e){if(e.tag===13){var t=al(e,67108864);t!==null&&us(t,e,67108864),gg(e,67108864)}}var wu=!0;function o2(e,t,a,s){var n=$e.T;$e.T=null;var o=yt.p;try{yt.p=2,vg(e,t,a,s)}finally{yt.p=o,$e.T=n}}function i2(e,t,a,s){var n=$e.T;$e.T=null;var o=yt.p;try{yt.p=8,vg(e,t,a,s)}finally{yt.p=o,$e.T=n}}function vg(e,t,a,s){if(wu){var n=Fm(s);if(n===null)yh(e,t,s,Su,a),Hx(e,s);else if(c2(n,e,t,a,s))s.stopPropagation();else if(Hx(e,s),t&4&&-1<l2.indexOf(e)){for(;n!==null;){var o=tl(n);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var i=Xn(o.pendingLanes);if(i!==0){var l=o;for(l.pendingLanes|=2,l.entangledLanes|=2;i;){var c=1<<31-cs(i);l.entanglements[1]|=c,i&=~c}lr(o),!(Ot&6)&&(mu=sr()+500,Lc(0))}}break;case 13:l=al(o,2),l!==null&&us(l,o,2),Wu(),gg(o,2)}if(o=Fm(s),o===null&&yh(e,t,s,Su,a),o===n)break;n=o}n!==null&&s.stopPropagation()}else yh(e,t,s,null,a)}}function Fm(e){return e=zp(e),xg(e)}var Su=null;function xg(e){if(Su=null,e=ni(e),e!==null){var t=Sc(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=Uy(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Su=e,null}function xj(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Y1()){case Gy:return 2;case Yy:return 8;case Jd:case Q1:return 32;case Qy:return 268435456;default:return 32}default:return 32}}var qm=!1,Nn=null,Cn=null,An=null,dc=new Map,uc=new Map,cn=[],l2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hx(e,t){switch(e){case"focusin":case"focusout":Nn=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":dc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":uc.delete(t.pointerId)}}function Sl(e,t,a,s,n,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:o,targetContainers:[n]},t!==null&&(t=tl(t),t!==null&&vj(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function c2(e,t,a,s,n){switch(t){case"focusin":return Nn=Sl(Nn,e,t,a,s,n),!0;case"dragenter":return Cn=Sl(Cn,e,t,a,s,n),!0;case"mouseover":return An=Sl(An,e,t,a,s,n),!0;case"pointerover":var o=n.pointerId;return dc.set(o,Sl(dc.get(o)||null,e,t,a,s,n)),!0;case"gotpointercapture":return o=n.pointerId,uc.set(o,Sl(uc.get(o)||null,e,t,a,s,n)),!0}return!1}function yj(e){var t=ni(e.target);if(t!==null){var a=Sc(t);if(a!==null){if(t=a.tag,t===13){if(t=Uy(a),t!==null){e.blockedOn=t,aC(e.priority,function(){if(a.tag===13){var s=ds();s=Tp(s);var n=al(a,s);n!==null&&us(n,a,s),gg(a,s)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Fm(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);sm=s,a.target.dispatchEvent(s),sm=null}else return t=tl(a),t!==null&&vj(t),e.blockedOn=a,!1;t.shift()}return!0}function Vx(e,t,a){Bd(e)&&a.delete(t)}function d2(){qm=!1,Nn!==null&&Bd(Nn)&&(Nn=null),Cn!==null&&Bd(Cn)&&(Cn=null),An!==null&&Bd(An)&&(An=null),dc.forEach(Vx),uc.forEach(Vx)}function md(e,t){e.blockedOn===t&&(e.blockedOn=null,qm||(qm=!0,ga.unstable_scheduleCallback(ga.unstable_NormalPriority,d2)))}var pd=null;function Gx(e){pd!==e&&(pd=e,ga.unstable_scheduleCallback(ga.unstable_NormalPriority,function(){pd===e&&(pd=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],n=e[t+2];if(typeof s!="function"){if(xg(s||a)===null)continue;break}var o=tl(a);o!==null&&(e.splice(t,3),t-=3,ym(o,{pending:!0,data:n,method:a.method,action:s},s,n))}}))}function fc(e){function t(c){return md(c,e)}Nn!==null&&md(Nn,e),Cn!==null&&md(Cn,e),An!==null&&md(An,e),dc.forEach(t),uc.forEach(t);for(var a=0;a<cn.length;a++){var s=cn[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<cn.length&&(a=cn[0],a.blockedOn===null);)yj(a),a.blockedOn===null&&cn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var n=a[s],o=a[s+1],i=n[Xa]||null;if(typeof o=="function")i||Gx(a);else if(i){var l=null;if(o&&o.hasAttribute("formAction")){if(n=o,i=o[Xa]||null)l=i.formAction;else if(xg(n)!==null)continue}else l=i.action;typeof l=="function"?a[s+1]=l:(a.splice(s,3),s-=3),Gx(a)}}}function yg(e){this._internalRoot=e}sf.prototype.render=yg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(oe(409));var a=t.current,s=ds();gj(a,s,e,t,null,null)};sf.prototype.unmount=yg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gj(e.current,2,null,e,null,null),Wu(),t[el]=null}};function sf(e){this._internalRoot=e}sf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wy();e={blockedOn:null,target:e,priority:t};for(var a=0;a<cn.length&&t!==0&&t<cn[a].priority;a++);cn.splice(a,0,e),a===0&&yj(e)}};var Yx=qy.version;if(Yx!=="19.1.1")throw Error(oe(527,Yx,"19.1.1"));yt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(oe(188)):(e=Object.keys(e).join(","),Error(oe(268,e)));return e=q1(t),e=e!==null?$y(e):null,e=e===null?null:e.stateNode,e};var u2={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:$e,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gd.isDisabled&&gd.supportsFiber)try{Ec=gd.inject(u2),ls=gd}catch{}}Bu.createRoot=function(e,t){if(!By(e))throw Error(oe(299));var a=!1,s="",n=m_,o=p_,i=g_,l=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(i=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=mj(e,1,!1,null,null,a,s,n,o,i,l,null),e[el]=t.current,hg(e),new yg(t)};Bu.hydrateRoot=function(e,t,a){if(!By(e))throw Error(oe(299));var s=!1,n="",o=m_,i=p_,l=g_,c=null,d=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(i=a.onCaughtError),a.onRecoverableError!==void 0&&(l=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(c=a.unstable_transitionCallbacks),a.formState!==void 0&&(d=a.formState)),t=mj(e,1,!0,t,a??null,s,n,o,i,l,c,d),t.context=pj(null),a=t.current,s=ds(),s=Tp(s),n=jn(s),n.callback=null,wn(a,n,s),a=s,t.current.lanes=a,Cc(t,a),lr(t),e[el]=t.current,hg(e),new sf(t)};Bu.version="19.1.1";function bj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bj)}catch(e){console.error(e)}}bj(),Ny.exports=Bu;var f2=Ny.exports,h2=(e,t,a,s,n,o,i,l)=>{let c=document.documentElement,d=["light","dark"];function f(m){(Array.isArray(e)?e:[e]).forEach(_=>{let g=_==="class",x=g&&o?n.map(y=>o[y]||y):n;g?(c.classList.remove(...x),c.classList.add(o&&o[m]?o[m]:m)):c.setAttribute(_,m)}),h(m)}function h(m){l&&d.includes(m)&&(c.style.colorScheme=m)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)f(s);else try{let m=localStorage.getItem(t)||a,_=i&&m==="system"?p():m;f(_)}catch{}},m2=u.createContext(void 0),p2={setTheme:e=>{},themes:[]},g2=()=>{var e;return(e=u.useContext(m2))!=null?e:p2};u.memo(({forcedTheme:e,storageKey:t,attribute:a,enableSystem:s,enableColorScheme:n,defaultTheme:o,value:i,themes:l,nonce:c,scriptProps:d})=>{let f=JSON.stringify([a,t,o,e,l,i,s,n]).slice(1,-1);return u.createElement("script",{...d,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${h2.toString()})(${f})`}})});var v2=e=>{switch(e){case"success":return b2;case"info":return j2;case"warning":return _2;case"error":return w2;default:return null}},x2=Array(12).fill(0),y2=({visible:e,className:t})=>fe.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},fe.createElement("div",{className:"sonner-spinner"},x2.map((a,s)=>fe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),b2=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),_2=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),j2=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),w2=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),S2=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},fe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),fe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),E2=()=>{let[e,t]=fe.useState(document.hidden);return fe.useEffect(()=>{let a=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",a),()=>window.removeEventListener("visibilitychange",a)},[]),e},Bm=1,N2=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:a,...s}=e,n=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Bm++,o=this.toasts.find(l=>l.id===n),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),o?this.toasts=this.toasts.map(l=>l.id===n?(this.publish({...l,...e,id:n,title:a}),{...l,...e,id:n,dismissible:i,title:a}):l):this.addToast({title:a,...s,dismissible:i,id:n}),n},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(a=>a({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let a;t.loading!==void 0&&(a=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),n=a!==void 0,o,i=s.then(async c=>{if(o=["resolve",c],fe.isValidElement(c))n=!1,this.create({id:a,type:"default",message:c});else if(A2(c)&&!c.ok){n=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,f=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:a,type:"error",message:d,description:f})}else if(t.success!==void 0){n=!1;let d=typeof t.success=="function"?await t.success(c):t.success,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:a,type:"success",message:d,description:f})}}).catch(async c=>{if(o=["reject",c],t.error!==void 0){n=!1;let d=typeof t.error=="function"?await t.error(c):t.error,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:a,type:"error",message:d,description:f})}}).finally(()=>{var c;n&&(this.dismiss(a),a=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>i.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof a!="string"&&typeof a!="number"?{unwrap:l}:Object.assign(a,{unwrap:l})},this.custom=(e,t)=>{let a=(t==null?void 0:t.id)||Bm++;return this.create({jsx:e(a),id:a,...t}),a},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Qa=new N2,C2=(e,t)=>{let a=(t==null?void 0:t.id)||Bm++;return Qa.addToast({title:e,...t,id:a}),a},A2=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",T2=C2,D2=()=>Qa.toasts,R2=()=>Qa.getActiveToasts();Object.assign(T2,{success:Qa.success,info:Qa.info,warning:Qa.warning,error:Qa.error,custom:Qa.custom,message:Qa.message,promise:Qa.promise,dismiss:Qa.dismiss,loading:Qa.loading},{getHistory:D2,getToasts:R2});function O2(e,{insertAt:t}={}){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&a.firstChild?a.insertBefore(s,a.firstChild):a.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}O2(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function vd(e){return e.label!==void 0}var z2=3,M2="32px",P2="16px",Qx=4e3,k2=356,L2=14,I2=20,F2=200;function Os(...e){return e.filter(Boolean).join(" ")}function q2(e){let[t,a]=e.split("-"),s=[];return t&&s.push(t),a&&s.push(a),s}var B2=e=>{var t,a,s,n,o,i,l,c,d,f,h;let{invert:p,toast:m,unstyled:_,interacting:g,setHeights:x,visibleToasts:y,heights:v,index:b,toasts:j,expanded:w,removeToast:S,defaultRichColors:N,closeButton:C,style:P,cancelButtonStyle:R,actionButtonStyle:Q,className:K="",descriptionClassName:ce="",duration:L,position:H,gap:T,loadingIcon:V,expandByDefault:F,classNames:E,icons:O,closeButtonAriaLabel:U="Close toast",pauseWhenPageIsHidden:M}=e,[X,$]=fe.useState(null),[ne,le]=fe.useState(null),[z,A]=fe.useState(!1),[J,ee]=fe.useState(!1),[Z,ae]=fe.useState(!1),[ie,pe]=fe.useState(!1),[ge,Le]=fe.useState(!1),[te,xe]=fe.useState(0),[q,he]=fe.useState(0),Se=fe.useRef(m.duration||L||Qx),Ce=fe.useRef(null),we=fe.useRef(null),k=b===0,ue=b+1<=y,Me=m.type,Be=m.dismissible!==!1,Pe=m.className||"",ft=m.descriptionClassName||"",dt=fe.useMemo(()=>v.findIndex(Ue=>Ue.toastId===m.id)||0,[v,m.id]),mt=fe.useMemo(()=>{var Ue;return(Ue=m.closeButton)!=null?Ue:C},[m.closeButton,C]),Wt=fe.useMemo(()=>m.duration||L||Qx,[m.duration,L]),la=fe.useRef(0),ha=fe.useRef(0),bt=fe.useRef(0),ta=fe.useRef(null),[Gt,ms]=H.split("-"),es=fe.useMemo(()=>v.reduce((Ue,me,Ge)=>Ge>=dt?Ue:Ue+me.height,0),[v,dt]),Hr=E2(),Un=m.invert||p,$n=Me==="loading";ha.current=fe.useMemo(()=>dt*T+es,[dt,es]),fe.useEffect(()=>{Se.current=Wt},[Wt]),fe.useEffect(()=>{A(!0)},[]),fe.useEffect(()=>{let Ue=we.current;if(Ue){let me=Ue.getBoundingClientRect().height;return he(me),x(Ge=>[{toastId:m.id,height:me,position:m.position},...Ge]),()=>x(Ge=>Ge.filter(Ft=>Ft.toastId!==m.id))}},[x,m.id]),fe.useLayoutEffect(()=>{if(!z)return;let Ue=we.current,me=Ue.style.height;Ue.style.height="auto";let Ge=Ue.getBoundingClientRect().height;Ue.style.height=me,he(Ge),x(Ft=>Ft.find(We=>We.toastId===m.id)?Ft.map(We=>We.toastId===m.id?{...We,height:Ge}:We):[{toastId:m.id,height:Ge,position:m.position},...Ft])},[z,m.title,m.description,x,m.id]);let Pa=fe.useCallback(()=>{ee(!0),xe(ha.current),x(Ue=>Ue.filter(me=>me.toastId!==m.id)),setTimeout(()=>{S(m)},F2)},[m,S,x,ha]);fe.useEffect(()=>{if(m.promise&&Me==="loading"||m.duration===1/0||m.type==="loading")return;let Ue;return w||g||M&&Hr?(()=>{if(bt.current<la.current){let me=new Date().getTime()-la.current;Se.current=Se.current-me}bt.current=new Date().getTime()})():Se.current!==1/0&&(la.current=new Date().getTime(),Ue=setTimeout(()=>{var me;(me=m.onAutoClose)==null||me.call(m,m),Pa()},Se.current)),()=>clearTimeout(Ue)},[w,g,m,Me,M,Hr,Pa]),fe.useEffect(()=>{m.delete&&Pa()},[Pa,m.delete]);function Hn(){var Ue,me,Ge;return O!=null&&O.loading?fe.createElement("div",{className:Os(E==null?void 0:E.loader,(Ue=m==null?void 0:m.classNames)==null?void 0:Ue.loader,"sonner-loader"),"data-visible":Me==="loading"},O.loading):V?fe.createElement("div",{className:Os(E==null?void 0:E.loader,(me=m==null?void 0:m.classNames)==null?void 0:me.loader,"sonner-loader"),"data-visible":Me==="loading"},V):fe.createElement(y2,{className:Os(E==null?void 0:E.loader,(Ge=m==null?void 0:m.classNames)==null?void 0:Ge.loader),visible:Me==="loading"})}return fe.createElement("li",{tabIndex:0,ref:we,className:Os(K,Pe,E==null?void 0:E.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,E==null?void 0:E.default,E==null?void 0:E[Me],(a=m==null?void 0:m.classNames)==null?void 0:a[Me]),"data-sonner-toast":"","data-rich-colors":(s=m.richColors)!=null?s:N,"data-styled":!(m.jsx||m.unstyled||_),"data-mounted":z,"data-promise":!!m.promise,"data-swiped":ge,"data-removed":J,"data-visible":ue,"data-y-position":Gt,"data-x-position":ms,"data-index":b,"data-front":k,"data-swiping":Z,"data-dismissible":Be,"data-type":Me,"data-invert":Un,"data-swipe-out":ie,"data-swipe-direction":ne,"data-expanded":!!(w||F&&z),style:{"--index":b,"--toasts-before":b,"--z-index":j.length-b,"--offset":`${J?te:ha.current}px`,"--initial-height":F?"auto":`${q}px`,...P,...m.style},onDragEnd:()=>{ae(!1),$(null),ta.current=null},onPointerDown:Ue=>{$n||!Be||(Ce.current=new Date,xe(ha.current),Ue.target.setPointerCapture(Ue.pointerId),Ue.target.tagName!=="BUTTON"&&(ae(!0),ta.current={x:Ue.clientX,y:Ue.clientY}))},onPointerUp:()=>{var Ue,me,Ge,Ft;if(ie||!Be)return;ta.current=null;let We=Number(((Ue=we.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ct=Number(((me=we.current)==null?void 0:me.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),W=new Date().getTime()-((Ge=Ce.current)==null?void 0:Ge.getTime()),ye=X==="x"?We:Ct,Ae=Math.abs(ye)/W;if(Math.abs(ye)>=I2||Ae>.11){xe(ha.current),(Ft=m.onDismiss)==null||Ft.call(m,m),le(X==="x"?We>0?"right":"left":Ct>0?"down":"up"),Pa(),pe(!0),Le(!1);return}ae(!1),$(null)},onPointerMove:Ue=>{var me,Ge,Ft,We;if(!ta.current||!Be||((me=window.getSelection())==null?void 0:me.toString().length)>0)return;let Ct=Ue.clientY-ta.current.y,W=Ue.clientX-ta.current.x,ye=(Ge=e.swipeDirections)!=null?Ge:q2(H);!X&&(Math.abs(W)>1||Math.abs(Ct)>1)&&$(Math.abs(W)>Math.abs(Ct)?"x":"y");let Ae={x:0,y:0};X==="y"?(ye.includes("top")||ye.includes("bottom"))&&(ye.includes("top")&&Ct<0||ye.includes("bottom")&&Ct>0)&&(Ae.y=Ct):X==="x"&&(ye.includes("left")||ye.includes("right"))&&(ye.includes("left")&&W<0||ye.includes("right")&&W>0)&&(Ae.x=W),(Math.abs(Ae.x)>0||Math.abs(Ae.y)>0)&&Le(!0),(Ft=we.current)==null||Ft.style.setProperty("--swipe-amount-x",`${Ae.x}px`),(We=we.current)==null||We.style.setProperty("--swipe-amount-y",`${Ae.y}px`)}},mt&&!m.jsx?fe.createElement("button",{"aria-label":U,"data-disabled":$n,"data-close-button":!0,onClick:$n||!Be?()=>{}:()=>{var Ue;Pa(),(Ue=m.onDismiss)==null||Ue.call(m,m)},className:Os(E==null?void 0:E.closeButton,(n=m==null?void 0:m.classNames)==null?void 0:n.closeButton)},(o=O==null?void 0:O.close)!=null?o:S2):null,m.jsx||u.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:fe.createElement(fe.Fragment,null,Me||m.icon||m.promise?fe.createElement("div",{"data-icon":"",className:Os(E==null?void 0:E.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Hn():null,m.type!=="loading"?m.icon||(O==null?void 0:O[Me])||v2(Me):null):null,fe.createElement("div",{"data-content":"",className:Os(E==null?void 0:E.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},fe.createElement("div",{"data-title":"",className:Os(E==null?void 0:E.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?fe.createElement("div",{"data-description":"",className:Os(ce,ft,E==null?void 0:E.description,(d=m==null?void 0:m.classNames)==null?void 0:d.description)},typeof m.description=="function"?m.description():m.description):null),u.isValidElement(m.cancel)?m.cancel:m.cancel&&vd(m.cancel)?fe.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||R,onClick:Ue=>{var me,Ge;vd(m.cancel)&&Be&&((Ge=(me=m.cancel).onClick)==null||Ge.call(me,Ue),Pa())},className:Os(E==null?void 0:E.cancelButton,(f=m==null?void 0:m.classNames)==null?void 0:f.cancelButton)},m.cancel.label):null,u.isValidElement(m.action)?m.action:m.action&&vd(m.action)?fe.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||Q,onClick:Ue=>{var me,Ge;vd(m.action)&&((Ge=(me=m.action).onClick)==null||Ge.call(me,Ue),!Ue.defaultPrevented&&Pa())},className:Os(E==null?void 0:E.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function Kx(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function U2(e,t){let a={};return[e,t].forEach((s,n)=>{let o=n===1,i=o?"--mobile-offset":"--offset",l=o?P2:M2;function c(d){["top","right","bottom","left"].forEach(f=>{a[`${i}-${f}`]=typeof d=="number"?`${d}px`:d})}typeof s=="number"||typeof s=="string"?c(s):typeof s=="object"?["top","right","bottom","left"].forEach(d=>{s[d]===void 0?a[`${i}-${d}`]=l:a[`${i}-${d}`]=typeof s[d]=="number"?`${s[d]}px`:s[d]}):c(l)}),a}var $2=u.forwardRef(function(e,t){let{invert:a,position:s="bottom-right",hotkey:n=["altKey","KeyT"],expand:o,closeButton:i,className:l,offset:c,mobileOffset:d,theme:f="light",richColors:h,duration:p,style:m,visibleToasts:_=z2,toastOptions:g,dir:x=Kx(),gap:y=L2,loadingIcon:v,icons:b,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:w}=e,[S,N]=fe.useState([]),C=fe.useMemo(()=>Array.from(new Set([s].concat(S.filter(M=>M.position).map(M=>M.position)))),[S,s]),[P,R]=fe.useState([]),[Q,K]=fe.useState(!1),[ce,L]=fe.useState(!1),[H,T]=fe.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),V=fe.useRef(null),F=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=fe.useRef(null),O=fe.useRef(!1),U=fe.useCallback(M=>{N(X=>{var $;return($=X.find(ne=>ne.id===M.id))!=null&&$.delete||Qa.dismiss(M.id),X.filter(({id:ne})=>ne!==M.id)})},[]);return fe.useEffect(()=>Qa.subscribe(M=>{if(M.dismiss){N(X=>X.map($=>$.id===M.id?{...$,delete:!0}:$));return}setTimeout(()=>{Fy.flushSync(()=>{N(X=>{let $=X.findIndex(ne=>ne.id===M.id);return $!==-1?[...X.slice(0,$),{...X[$],...M},...X.slice($+1)]:[M,...X]})})})}),[]),fe.useEffect(()=>{if(f!=="system"){T(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?T("dark"):T("light")),typeof window>"u")return;let M=window.matchMedia("(prefers-color-scheme: dark)");try{M.addEventListener("change",({matches:X})=>{T(X?"dark":"light")})}catch{M.addListener(({matches:$})=>{try{T($?"dark":"light")}catch(ne){console.error(ne)}})}},[f]),fe.useEffect(()=>{S.length<=1&&K(!1)},[S]),fe.useEffect(()=>{let M=X=>{var $,ne;n.every(le=>X[le]||X.code===le)&&(K(!0),($=V.current)==null||$.focus()),X.code==="Escape"&&(document.activeElement===V.current||(ne=V.current)!=null&&ne.contains(document.activeElement))&&K(!1)};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[n]),fe.useEffect(()=>{if(V.current)return()=>{E.current&&(E.current.focus({preventScroll:!0}),E.current=null,O.current=!1)}},[V.current]),fe.createElement("section",{ref:t,"aria-label":`${j} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((M,X)=>{var $;let[ne,le]=M.split("-");return S.length?fe.createElement("ol",{key:M,dir:x==="auto"?Kx():x,tabIndex:-1,ref:V,className:l,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":ne,"data-lifted":Q&&S.length>1&&!o,"data-x-position":le,style:{"--front-toast-height":`${(($=P[0])==null?void 0:$.height)||0}px`,"--width":`${k2}px`,"--gap":`${y}px`,...m,...U2(c,d)},onBlur:z=>{O.current&&!z.currentTarget.contains(z.relatedTarget)&&(O.current=!1,E.current&&(E.current.focus({preventScroll:!0}),E.current=null))},onFocus:z=>{z.target instanceof HTMLElement&&z.target.dataset.dismissible==="false"||O.current||(O.current=!0,E.current=z.relatedTarget)},onMouseEnter:()=>K(!0),onMouseMove:()=>K(!0),onMouseLeave:()=>{ce||K(!1)},onDragEnd:()=>K(!1),onPointerDown:z=>{z.target instanceof HTMLElement&&z.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},S.filter(z=>!z.position&&X===0||z.position===M).map((z,A)=>{var J,ee;return fe.createElement(B2,{key:z.id,icons:b,index:A,toast:z,defaultRichColors:h,duration:(J=g==null?void 0:g.duration)!=null?J:p,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:a,visibleToasts:_,closeButton:(ee=g==null?void 0:g.closeButton)!=null?ee:i,interacting:ce,position:M,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:U,toasts:S.filter(Z=>Z.position==z.position),heights:P.filter(Z=>Z.position==z.position),setHeights:R,expandByDefault:o,gap:y,loadingIcon:v,expanded:Q,pauseWhenPageIsHidden:w,swipeDirections:e.swipeDirections})})):null}))});const H2=({...e})=>{const{theme:t="system"}=g2();return r.jsx($2,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},V2=1,G2=1e6;let _h=0;function Y2(){return _h=(_h+1)%Number.MAX_SAFE_INTEGER,_h.toString()}const jh=new Map,Xx=e=>{if(jh.has(e))return;const t=setTimeout(()=>{jh.delete(e),Xl({type:"REMOVE_TOAST",toastId:e})},G2);jh.set(e,t)},Q2=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,V2)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=t;return a?Xx(a):e.toasts.forEach(s=>{Xx(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===a||a===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(a=>a.id!==t.toastId)}}},Ud=[];let $d={toasts:[]};function Xl(e){$d=Q2($d,e),Ud.forEach(t=>{t($d)})}function K2({...e}){const t=Y2(),a=n=>Xl({type:"UPDATE_TOAST",toast:{...n,id:t}}),s=()=>Xl({type:"DISMISS_TOAST",toastId:t});return Xl({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:n=>{n||s()}}}),{id:t,dismiss:s,update:a}}function Jt(){const[e,t]=u.useState($d);return u.useEffect(()=>(Ud.push(t),()=>{const a=Ud.indexOf(t);a>-1&&Ud.splice(a,1)}),[e]),{...e,toast:K2,dismiss:a=>Xl({type:"DISMISS_TOAST",toastId:a})}}function ke(e,t,{checkForDefaultPrevented:a=!0}={}){return function(n){if(e==null||e(n),a===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function Zx(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function _j(...e){return t=>{let a=!1;const s=e.map(n=>{const o=Zx(n,t);return!a&&typeof o=="function"&&(a=!0),o});if(a)return()=>{for(let n=0;n<s.length;n++){const o=s[n];typeof o=="function"?o():Zx(e[n],null)}}}}function vt(...e){return u.useCallback(_j(...e),e)}function X2(e,t){const a=u.createContext(t),s=o=>{const{children:i,...l}=o,c=u.useMemo(()=>l,Object.values(l));return r.jsx(a.Provider,{value:c,children:i})};s.displayName=e+"Provider";function n(o){const i=u.useContext(a);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,n]}function Ts(e,t=[]){let a=[];function s(o,i){const l=u.createContext(i),c=a.length;a=[...a,i];const d=h=>{var y;const{scope:p,children:m,..._}=h,g=((y=p==null?void 0:p[e])==null?void 0:y[c])||l,x=u.useMemo(()=>_,Object.values(_));return r.jsx(g.Provider,{value:x,children:m})};d.displayName=o+"Provider";function f(h,p){var g;const m=((g=p==null?void 0:p[e])==null?void 0:g[c])||l,_=u.useContext(m);if(_)return _;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[d,f]}const n=()=>{const o=a.map(i=>u.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return u.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return n.scopeName=e,[s,Z2(n,...t)]}function Z2(...e){const t=e[0];if(e.length===1)return t;const a=()=>{const s=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(o){const i=s.reduce((l,{useScope:c,scopeName:d})=>{const h=c(o)[`__scope${d}`];return{...l,...h}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return a.scopeName=t.scopeName,a}function bo(e){const t=W2(e),a=u.forwardRef((s,n)=>{const{children:o,...i}=s,l=u.Children.toArray(o),c=l.find(eT);if(c){const d=c.props.children,f=l.map(h=>h===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...i,ref:n,children:u.isValidElement(d)?u.cloneElement(d,void 0,f):null})}return r.jsx(t,{...i,ref:n,children:o})});return a.displayName=`${e}.Slot`,a}var J2=bo("Slot");function W2(e){const t=u.forwardRef((a,s)=>{const{children:n,...o}=a;if(u.isValidElement(n)){const i=aT(n),l=tT(o,n.props);return n.type!==u.Fragment&&(l.ref=s?_j(s,i):i),u.cloneElement(n,l)}return u.Children.count(n)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var jj=Symbol("radix.slottable");function wj(e){const t=({children:a})=>r.jsx(r.Fragment,{children:a});return t.displayName=`${e}.Slottable`,t.__radixId=jj,t}function eT(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===jj}function tT(e,t){const a={...t};for(const s in t){const n=e[s],o=t[s];/^on[A-Z]/.test(s)?n&&o?a[s]=(...l)=>{const c=o(...l);return n(...l),c}:n&&(a[s]=n):s==="style"?a[s]={...n,...o}:s==="className"&&(a[s]=[n,o].filter(Boolean).join(" "))}return{...e,...a}}function aT(e){var s,n;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,a=t&&"isReactWarning"in t&&t.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}function bg(e){const t=e+"CollectionProvider",[a,s]=Ts(t),[n,o]=a(t,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:x,children:y}=g,v=fe.useRef(null),b=fe.useRef(new Map).current;return r.jsx(n,{scope:x,itemMap:b,collectionRef:v,children:y})};i.displayName=t;const l=e+"CollectionSlot",c=bo(l),d=fe.forwardRef((g,x)=>{const{scope:y,children:v}=g,b=o(l,y),j=vt(x,b.collectionRef);return r.jsx(c,{ref:j,children:v})});d.displayName=l;const f=e+"CollectionItemSlot",h="data-radix-collection-item",p=bo(f),m=fe.forwardRef((g,x)=>{const{scope:y,children:v,...b}=g,j=fe.useRef(null),w=vt(x,j),S=o(f,y);return fe.useEffect(()=>(S.itemMap.set(j,{ref:j,...b}),()=>void S.itemMap.delete(j))),r.jsx(p,{[h]:"",ref:w,children:v})});m.displayName=f;function _(g){const x=o(e+"CollectionConsumer",g);return fe.useCallback(()=>{const v=x.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((S,N)=>b.indexOf(S.ref.current)-b.indexOf(N.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:i,Slot:d,ItemSlot:m},_,s]}var sT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ve=sT.reduce((e,t)=>{const a=bo(`Primitive.${t}`),s=u.forwardRef((n,o)=>{const{asChild:i,...l}=n,c=i?a:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function Sj(e,t){e&&Oo.flushSync(()=>e.dispatchEvent(t))}function Ns(e){const t=u.useRef(e);return u.useEffect(()=>{t.current=e}),u.useMemo(()=>(...a)=>{var s;return(s=t.current)==null?void 0:s.call(t,...a)},[])}function rT(e,t=globalThis==null?void 0:globalThis.document){const a=Ns(e);u.useEffect(()=>{const s=n=>{n.key==="Escape"&&a(n)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[a,t])}var nT="DismissableLayer",Um="dismissableLayer.update",oT="dismissableLayer.pointerDownOutside",iT="dismissableLayer.focusOutside",Jx,Ej=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ol=u.forwardRef((e,t)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:s,onPointerDownOutside:n,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,d=u.useContext(Ej),[f,h]=u.useState(null),p=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=u.useState({}),_=vt(t,N=>h(N)),g=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(x),v=f?g.indexOf(f):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,j=v>=y,w=cT(N=>{const C=N.target,P=[...d.branches].some(R=>R.contains(C));!j||P||(n==null||n(N),i==null||i(N),N.defaultPrevented||l==null||l())},p),S=dT(N=>{const C=N.target;[...d.branches].some(R=>R.contains(C))||(o==null||o(N),i==null||i(N),N.defaultPrevented||l==null||l())},p);return rT(N=>{v===d.layers.size-1&&(s==null||s(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),u.useEffect(()=>{if(f)return a&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Jx=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),Wx(),()=>{a&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Jx)}},[f,p,a,d]),u.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),Wx())},[f,d]),u.useEffect(()=>{const N=()=>m({});return document.addEventListener(Um,N),()=>document.removeEventListener(Um,N)},[]),r.jsx(Ve.div,{...c,ref:_,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:ke(e.onFocusCapture,S.onFocusCapture),onBlurCapture:ke(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:ke(e.onPointerDownCapture,w.onPointerDownCapture)})});ol.displayName=nT;var lT="DismissableLayerBranch",Nj=u.forwardRef((e,t)=>{const a=u.useContext(Ej),s=u.useRef(null),n=vt(t,s);return u.useEffect(()=>{const o=s.current;if(o)return a.branches.add(o),()=>{a.branches.delete(o)}},[a.branches]),r.jsx(Ve.div,{...e,ref:n})});Nj.displayName=lT;function cT(e,t=globalThis==null?void 0:globalThis.document){const a=Ns(e),s=u.useRef(!1),n=u.useRef(()=>{});return u.useEffect(()=>{const o=l=>{if(l.target&&!s.current){let c=function(){Cj(oT,a,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=c,t.addEventListener("click",n.current,{once:!0})):c()}else t.removeEventListener("click",n.current);s.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",n.current)}},[t,a]),{onPointerDownCapture:()=>s.current=!0}}function dT(e,t=globalThis==null?void 0:globalThis.document){const a=Ns(e),s=u.useRef(!1);return u.useEffect(()=>{const n=o=>{o.target&&!s.current&&Cj(iT,a,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,a]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Wx(){const e=new CustomEvent(Um);document.dispatchEvent(e)}function Cj(e,t,a,{discrete:s}){const n=a.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:a});t&&n.addEventListener(e,t,{once:!0}),s?Sj(n,o):n.dispatchEvent(o)}var uT=ol,fT=Nj,Ca=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},hT="Portal",qc=u.forwardRef((e,t)=>{var l;const{container:a,...s}=e,[n,o]=u.useState(!1);Ca(()=>o(!0),[]);const i=a||n&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?Fy.createPortal(r.jsx(Ve.div,{...s,ref:t}),i):null});qc.displayName=hT;function mT(e,t){return u.useReducer((a,s)=>t[a][s]??a,e)}var qr=e=>{const{present:t,children:a}=e,s=pT(t),n=typeof a=="function"?a({present:s.isPresent}):u.Children.only(a),o=vt(s.ref,gT(n));return typeof a=="function"||s.isPresent?u.cloneElement(n,{ref:o}):null};qr.displayName="Presence";function pT(e){const[t,a]=u.useState(),s=u.useRef(null),n=u.useRef(e),o=u.useRef("none"),i=e?"mounted":"unmounted",[l,c]=mT(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const d=xd(s.current);o.current=l==="mounted"?d:"none"},[l]),Ca(()=>{const d=s.current,f=n.current;if(f!==e){const p=o.current,m=xd(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(f&&p!==m?"ANIMATION_OUT":"UNMOUNT"),n.current=e}},[e,c]),Ca(()=>{if(t){let d;const f=t.ownerDocument.defaultView??window,h=m=>{const g=xd(s.current).includes(m.animationName);if(m.target===t&&g&&(c("ANIMATION_END"),!n.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",d=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},p=m=>{m.target===t&&(o.current=xd(s.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:u.useCallback(d=>{s.current=d?getComputedStyle(d):null,a(d)},[])}}function xd(e){return(e==null?void 0:e.animationName)||"none"}function gT(e){var s,n;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,a=t&&"isReactWarning"in t&&t.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}var vT=Ep[" useInsertionEffect ".trim().toString()]||Ca;function Bs({prop:e,defaultProp:t,onChange:a=()=>{},caller:s}){const[n,o,i]=xT({defaultProp:t,onChange:a}),l=e!==void 0,c=l?e:n;{const f=u.useRef(e!==void 0);u.useEffect(()=>{const h=f.current;h!==l&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,s])}const d=u.useCallback(f=>{var h;if(l){const p=yT(f)?f(e):f;p!==e&&((h=i.current)==null||h.call(i,p))}else o(f)},[l,e,o,i]);return[c,d]}function xT({defaultProp:e,onChange:t}){const[a,s]=u.useState(e),n=u.useRef(a),o=u.useRef(t);return vT(()=>{o.current=t},[t]),u.useEffect(()=>{var i;n.current!==a&&((i=o.current)==null||i.call(o,a),n.current=a)},[a,n]),[a,s,o]}function yT(e){return typeof e=="function"}var Aj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),bT="VisuallyHidden",rf=u.forwardRef((e,t)=>r.jsx(Ve.span,{...e,ref:t,style:{...Aj,...e.style}}));rf.displayName=bT;var _T=rf,_g="ToastProvider",[jg,jT,wT]=bg("Toast"),[Tj,z5]=Ts("Toast",[wT]),[ST,nf]=Tj(_g),Dj=e=>{const{__scopeToast:t,label:a="Notification",duration:s=5e3,swipeDirection:n="right",swipeThreshold:o=50,children:i}=e,[l,c]=u.useState(null),[d,f]=u.useState(0),h=u.useRef(!1),p=u.useRef(!1);return a.trim()||console.error(`Invalid prop \`label\` supplied to \`${_g}\`. Expected non-empty \`string\`.`),r.jsx(jg.Provider,{scope:t,children:r.jsx(ST,{scope:t,label:a,duration:s,swipeDirection:n,swipeThreshold:o,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:u.useCallback(()=>f(m=>m+1),[]),onToastRemove:u.useCallback(()=>f(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:i})})};Dj.displayName=_g;var Rj="ToastViewport",ET=["F8"],$m="toast.viewportPause",Hm="toast.viewportResume",Oj=u.forwardRef((e,t)=>{const{__scopeToast:a,hotkey:s=ET,label:n="Notifications ({hotkey})",...o}=e,i=nf(Rj,a),l=jT(a),c=u.useRef(null),d=u.useRef(null),f=u.useRef(null),h=u.useRef(null),p=vt(t,h,i.onViewportChange),m=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=i.toastCount>0;u.useEffect(()=>{const x=y=>{var b;s.length!==0&&s.every(j=>y[j]||y.code===j)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[s]),u.useEffect(()=>{const x=c.current,y=h.current;if(_&&x&&y){const v=()=>{if(!i.isClosePausedRef.current){const S=new CustomEvent($m);y.dispatchEvent(S),i.isClosePausedRef.current=!0}},b=()=>{if(i.isClosePausedRef.current){const S=new CustomEvent(Hm);y.dispatchEvent(S),i.isClosePausedRef.current=!1}},j=S=>{!x.contains(S.relatedTarget)&&b()},w=()=>{x.contains(document.activeElement)||b()};return x.addEventListener("focusin",v),x.addEventListener("focusout",j),x.addEventListener("pointermove",v),x.addEventListener("pointerleave",w),window.addEventListener("blur",v),window.addEventListener("focus",b),()=>{x.removeEventListener("focusin",v),x.removeEventListener("focusout",j),x.removeEventListener("pointermove",v),x.removeEventListener("pointerleave",w),window.removeEventListener("blur",v),window.removeEventListener("focus",b)}}},[_,i.isClosePausedRef]);const g=u.useCallback(({tabbingDirection:x})=>{const v=l().map(b=>{const j=b.ref.current,w=[j,...IT(j)];return x==="forwards"?w:w.reverse()});return(x==="forwards"?v.reverse():v).flat()},[l]);return u.useEffect(()=>{const x=h.current;if(x){const y=v=>{var w,S,N;const b=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!b){const C=document.activeElement,P=v.shiftKey;if(v.target===x&&P){(w=d.current)==null||w.focus();return}const K=g({tabbingDirection:P?"backwards":"forwards"}),ce=K.findIndex(L=>L===C);wh(K.slice(ce+1))?v.preventDefault():P?(S=d.current)==null||S.focus():(N=f.current)==null||N.focus()}};return x.addEventListener("keydown",y),()=>x.removeEventListener("keydown",y)}},[l,g]),r.jsxs(fT,{ref:c,role:"region","aria-label":n.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&r.jsx(Vm,{ref:d,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"forwards"});wh(x)}}),r.jsx(jg.Slot,{scope:a,children:r.jsx(Ve.ol,{tabIndex:-1,...o,ref:p})}),_&&r.jsx(Vm,{ref:f,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"backwards"});wh(x)}})]})});Oj.displayName=Rj;var zj="ToastFocusProxy",Vm=u.forwardRef((e,t)=>{const{__scopeToast:a,onFocusFromOutsideViewport:s,...n}=e,o=nf(zj,a);return r.jsx(rf,{"aria-hidden":!0,tabIndex:0,...n,ref:t,style:{position:"fixed"},onFocus:i=>{var d;const l=i.relatedTarget;!((d=o.viewport)!=null&&d.contains(l))&&s()}})});Vm.displayName=zj;var Bc="Toast",NT="toast.swipeStart",CT="toast.swipeMove",AT="toast.swipeCancel",TT="toast.swipeEnd",Mj=u.forwardRef((e,t)=>{const{forceMount:a,open:s,defaultOpen:n,onOpenChange:o,...i}=e,[l,c]=Bs({prop:s,defaultProp:n??!0,onChange:o,caller:Bc});return r.jsx(qr,{present:a||l,children:r.jsx(OT,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:Ns(e.onPause),onResume:Ns(e.onResume),onSwipeStart:ke(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ke(e.onSwipeMove,d=>{const{x:f,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ke(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ke(e.onSwipeEnd,d=>{const{x:f,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Mj.displayName=Bc;var[DT,RT]=Tj(Bc,{onClose(){}}),OT=u.forwardRef((e,t)=>{const{__scopeToast:a,type:s="foreground",duration:n,open:o,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:f,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:m,..._}=e,g=nf(Bc,a),[x,y]=u.useState(null),v=vt(t,L=>y(L)),b=u.useRef(null),j=u.useRef(null),w=n||g.duration,S=u.useRef(0),N=u.useRef(w),C=u.useRef(0),{onToastAdd:P,onToastRemove:R}=g,Q=Ns(()=>{var H;(x==null?void 0:x.contains(document.activeElement))&&((H=g.viewport)==null||H.focus()),i()}),K=u.useCallback(L=>{!L||L===1/0||(window.clearTimeout(C.current),S.current=new Date().getTime(),C.current=window.setTimeout(Q,L))},[Q]);u.useEffect(()=>{const L=g.viewport;if(L){const H=()=>{K(N.current),d==null||d()},T=()=>{const V=new Date().getTime()-S.current;N.current=N.current-V,window.clearTimeout(C.current),c==null||c()};return L.addEventListener($m,T),L.addEventListener(Hm,H),()=>{L.removeEventListener($m,T),L.removeEventListener(Hm,H)}}},[g.viewport,w,c,d,K]),u.useEffect(()=>{o&&!g.isClosePausedRef.current&&K(w)},[o,w,g.isClosePausedRef,K]),u.useEffect(()=>(P(),()=>R()),[P,R]);const ce=u.useMemo(()=>x?Bj(x):null,[x]);return g.viewport?r.jsxs(r.Fragment,{children:[ce&&r.jsx(zT,{__scopeToast:a,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:ce}),r.jsx(DT,{scope:a,onClose:Q,children:Oo.createPortal(r.jsx(jg.ItemSlot,{scope:a,children:r.jsx(uT,{asChild:!0,onEscapeKeyDown:ke(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||Q(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(Ve.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection,..._,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ke(e.onKeyDown,L=>{L.key==="Escape"&&(l==null||l(L.nativeEvent),L.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,Q()))}),onPointerDown:ke(e.onPointerDown,L=>{L.button===0&&(b.current={x:L.clientX,y:L.clientY})}),onPointerMove:ke(e.onPointerMove,L=>{if(!b.current)return;const H=L.clientX-b.current.x,T=L.clientY-b.current.y,V=!!j.current,F=["left","right"].includes(g.swipeDirection),E=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,O=F?E(0,H):0,U=F?0:E(0,T),M=L.pointerType==="touch"?10:2,X={x:O,y:U},$={originalEvent:L,delta:X};V?(j.current=X,yd(CT,h,$,{discrete:!1})):e0(X,g.swipeDirection,M)?(j.current=X,yd(NT,f,$,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(H)>M||Math.abs(T)>M)&&(b.current=null)}),onPointerUp:ke(e.onPointerUp,L=>{const H=j.current,T=L.target;if(T.hasPointerCapture(L.pointerId)&&T.releasePointerCapture(L.pointerId),j.current=null,b.current=null,H){const V=L.currentTarget,F={originalEvent:L,delta:H};e0(H,g.swipeDirection,g.swipeThreshold)?yd(TT,m,F,{discrete:!0}):yd(AT,p,F,{discrete:!0}),V.addEventListener("click",E=>E.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),zT=e=>{const{__scopeToast:t,children:a,...s}=e,n=nf(Bc,t),[o,i]=u.useState(!1),[l,c]=u.useState(!1);return kT(()=>i(!0)),u.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:r.jsx(qc,{asChild:!0,children:r.jsx(rf,{...s,children:o&&r.jsxs(r.Fragment,{children:[n.label," ",a]})})})},MT="ToastTitle",Pj=u.forwardRef((e,t)=>{const{__scopeToast:a,...s}=e;return r.jsx(Ve.div,{...s,ref:t})});Pj.displayName=MT;var PT="ToastDescription",kj=u.forwardRef((e,t)=>{const{__scopeToast:a,...s}=e;return r.jsx(Ve.div,{...s,ref:t})});kj.displayName=PT;var Lj="ToastAction",Ij=u.forwardRef((e,t)=>{const{altText:a,...s}=e;return a.trim()?r.jsx(qj,{altText:a,asChild:!0,children:r.jsx(wg,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Lj}\`. Expected non-empty \`string\`.`),null)});Ij.displayName=Lj;var Fj="ToastClose",wg=u.forwardRef((e,t)=>{const{__scopeToast:a,...s}=e,n=RT(Fj,a);return r.jsx(qj,{asChild:!0,children:r.jsx(Ve.button,{type:"button",...s,ref:t,onClick:ke(e.onClick,n.onClose)})})});wg.displayName=Fj;var qj=u.forwardRef((e,t)=>{const{__scopeToast:a,altText:s,...n}=e;return r.jsx(Ve.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...n,ref:t})});function Bj(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),LT(s)){const n=s.ariaHidden||s.hidden||s.style.display==="none",o=s.dataset.radixToastAnnounceExclude==="";if(!n)if(o){const i=s.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...Bj(s))}}),t}function yd(e,t,a,{discrete:s}){const n=a.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:a});t&&n.addEventListener(e,t,{once:!0}),s?Sj(n,o):n.dispatchEvent(o)}var e0=(e,t,a=0)=>{const s=Math.abs(e.x),n=Math.abs(e.y),o=s>n;return t==="left"||t==="right"?o&&s>a:!o&&n>a};function kT(e=()=>{}){const t=Ns(e);Ca(()=>{let a=0,s=0;return a=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(a),window.cancelAnimationFrame(s)}},[t])}function LT(e){return e.nodeType===e.ELEMENT_NODE}function IT(e){const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function wh(e){const t=document.activeElement;return e.some(a=>a===t?!0:(a.focus(),document.activeElement!==t))}var FT=Dj,Uj=Oj,$j=Mj,Hj=Pj,Vj=kj,Gj=Ij,Yj=wg;function Qj(e){var t,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(a=Qj(e[t]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function Kj(){for(var e,t,a=0,s="",n=arguments.length;a<n;a++)(e=arguments[a])&&(t=Qj(e))&&(s&&(s+=" "),s+=t);return s}const t0=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,a0=Kj,il=(e,t)=>a=>{var s;if((t==null?void 0:t.variants)==null)return a0(e,a==null?void 0:a.class,a==null?void 0:a.className);const{variants:n,defaultVariants:o}=t,i=Object.keys(n).map(d=>{const f=a==null?void 0:a[d],h=o==null?void 0:o[d];if(f===null)return null;const p=t0(f)||t0(h);return n[d][p]}),l=a&&Object.entries(a).reduce((d,f)=>{let[h,p]=f;return p===void 0||(d[h]=p),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,f)=>{let{class:h,className:p,...m}=f;return Object.entries(m).every(_=>{let[g,x]=_;return Array.isArray(x)?x.includes({...o,...l}[g]):{...o,...l}[g]===x})?[...d,h,p]:d},[]);return a0(e,i,c,a==null?void 0:a.class,a==null?void 0:a.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Xj=(...e)=>e.filter((t,a,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===a).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:n="",children:o,iconNode:i,...l},c)=>u.createElement("svg",{ref:c,...BT,width:t,height:t,stroke:e,strokeWidth:s?Number(a)*24/Number(t):a,className:Xj("lucide",n),...l},[...i.map(([d,f])=>u.createElement(d,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=(e,t)=>{const a=u.forwardRef(({className:s,...n},o)=>u.createElement(UT,{ref:o,iconNode:t,className:Xj(`lucide-${qT(e)}`,s),...n}));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=He("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=He("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=He("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=He("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=He("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=He("Beef",[["circle",{cx:"12.5",cy:"8.5",r:"2.5",key:"9738u8"}],["path",{d:"M12.5 2a6.5 6.5 0 0 0-6.22 4.6c-1.1 3.13-.78 3.9-3.18 6.08A3 3 0 0 0 5 18c4 0 8.4-1.8 11.4-4.3A6.5 6.5 0 0 0 12.5 2Z",key:"o0f6za"}],["path",{d:"m18.5 6 2.19 4.5a6.48 6.48 0 0 1 .31 2 6.49 6.49 0 0 1-2.6 5.2C15.4 20.2 11 22 7 22a3 3 0 0 1-2.68-1.66L2.4 16.5",key:"k7p6i0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=He("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=He("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=He("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=He("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=He("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=He("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=He("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=He("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=He("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=He("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=He("Dna",[["path",{d:"m10 16 1.5 1.5",key:"11lckj"}],["path",{d:"m14 8-1.5-1.5",key:"1ohn8i"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m17 6-2.891-2.891",key:"xu6p2f"}],["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"m20 9 .891.891",key:"3xwk7g"}],["path",{d:"M3.109 14.109 4 15",key:"q76aoh"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m7 18 2.891 2.891",key:"1sisit"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=He("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=He("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=He("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=He("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=He("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=He("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=He("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=He("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=He("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=He("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=He("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=He("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=He("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=He("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=He("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=He("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=He("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=He("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=He("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=He("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=He("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=He("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=He("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=He("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=He("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=He("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=He("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=He("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=He("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=He("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=He("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Og="-",rD=e=>{const t=oD(e),{conflictingClassGroups:a,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:i=>{const l=i.split(Og);return l[0]===""&&l.length!==1&&l.shift(),sw(l,t)||nD(i)},getConflictingClassGroupIds:(i,l)=>{const c=a[i]||[];return l&&s[i]?[...c,...s[i]]:c}}},sw=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const a=e[0],s=t.nextPart.get(a),n=s?sw(e.slice(1),s):void 0;if(n)return n;if(t.validators.length===0)return;const o=e.join(Og);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},i0=/^\[(.+)\]$/,nD=e=>{if(i0.test(e)){const t=i0.exec(e)[1],a=t==null?void 0:t.substring(0,t.indexOf(":"));if(a)return"arbitrary.."+a}},oD=e=>{const{theme:t,prefix:a}=e,s={nextPart:new Map,validators:[]};return lD(Object.entries(e.classGroups),a).forEach(([o,i])=>{Ym(i,s,o,t)}),s},Ym=(e,t,a,s)=>{e.forEach(n=>{if(typeof n=="string"){const o=n===""?t:l0(t,n);o.classGroupId=a;return}if(typeof n=="function"){if(iD(n)){Ym(n(s),t,a,s);return}t.validators.push({validator:n,classGroupId:a});return}Object.entries(n).forEach(([o,i])=>{Ym(i,l0(t,o),a,s)})})},l0=(e,t)=>{let a=e;return t.split(Og).forEach(s=>{a.nextPart.has(s)||a.nextPart.set(s,{nextPart:new Map,validators:[]}),a=a.nextPart.get(s)}),a},iD=e=>e.isThemeGetter,lD=(e,t)=>t?e.map(([a,s])=>{const n=s.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[t+i,l])):o);return[a,n]}):e,cD=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,a=new Map,s=new Map;const n=(o,i)=>{a.set(o,i),t++,t>e&&(t=0,s=a,a=new Map)};return{get(o){let i=a.get(o);if(i!==void 0)return i;if((i=s.get(o))!==void 0)return n(o,i),i},set(o,i){a.has(o)?a.set(o,i):n(o,i)}}},rw="!",dD=e=>{const{separator:t,experimentalParseClassName:a}=e,s=t.length===1,n=t[0],o=t.length,i=l=>{const c=[];let d=0,f=0,h;for(let x=0;x<l.length;x++){let y=l[x];if(d===0){if(y===n&&(s||l.slice(x,x+o)===t)){c.push(l.slice(f,x)),f=x+o;continue}if(y==="/"){h=x;continue}}y==="["?d++:y==="]"&&d--}const p=c.length===0?l:l.substring(f),m=p.startsWith(rw),_=m?p.substring(1):p,g=h&&h>f?h-f:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:_,maybePostfixModifierPosition:g}};return a?l=>a({className:l,parseClassName:i}):i},uD=e=>{if(e.length<=1)return e;const t=[];let a=[];return e.forEach(s=>{s[0]==="["?(t.push(...a.sort(),s),a=[]):a.push(s)}),t.push(...a.sort()),t},fD=e=>({cache:cD(e.cacheSize),parseClassName:dD(e),...rD(e)}),hD=/\s+/,mD=(e,t)=>{const{parseClassName:a,getClassGroupId:s,getConflictingClassGroupIds:n}=t,o=[],i=e.trim().split(hD);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:f,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=a(d);let _=!!m,g=s(_?p.substring(0,m):p);if(!g){if(!_){l=d+(l.length>0?" "+l:l);continue}if(g=s(p),!g){l=d+(l.length>0?" "+l:l);continue}_=!1}const x=uD(f).join(":"),y=h?x+rw:x,v=y+g;if(o.includes(v))continue;o.push(v);const b=n(g,_);for(let j=0;j<b.length;++j){const w=b[j];o.push(y+w)}l=d+(l.length>0?" "+l:l)}return l};function pD(){let e=0,t,a,s="";for(;e<arguments.length;)(t=arguments[e++])&&(a=nw(t))&&(s&&(s+=" "),s+=a);return s}const nw=e=>{if(typeof e=="string")return e;let t,a="";for(let s=0;s<e.length;s++)e[s]&&(t=nw(e[s]))&&(a&&(a+=" "),a+=t);return a};function gD(e,...t){let a,s,n,o=i;function i(c){const d=t.reduce((f,h)=>h(f),e());return a=fD(d),s=a.cache.get,n=a.cache.set,o=l,l(c)}function l(c){const d=s(c);if(d)return d;const f=mD(c,a);return n(c,f),f}return function(){return o(pD.apply(null,arguments))}}const Yt=e=>{const t=a=>a[e]||[];return t.isThemeGetter=!0,t},ow=/^\[(?:([a-z-]+):)?(.+)\]$/i,vD=/^\d+\/\d+$/,xD=new Set(["px","full","screen"]),yD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,bD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_D=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,jD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,wD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vr=e=>wi(e)||xD.has(e)||vD.test(e),Qr=e=>ll(e,"length",RD),wi=e=>!!e&&!Number.isNaN(Number(e)),Sh=e=>ll(e,"number",wi),El=e=>!!e&&Number.isInteger(Number(e)),SD=e=>e.endsWith("%")&&wi(e.slice(0,-1)),tt=e=>ow.test(e),Kr=e=>yD.test(e),ED=new Set(["length","size","percentage"]),ND=e=>ll(e,ED,iw),CD=e=>ll(e,"position",iw),AD=new Set(["image","url"]),TD=e=>ll(e,AD,zD),DD=e=>ll(e,"",OD),Nl=()=>!0,ll=(e,t,a)=>{const s=ow.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):a(s[2]):!1},RD=e=>bD.test(e)&&!_D.test(e),iw=()=>!1,OD=e=>jD.test(e),zD=e=>wD.test(e),MD=()=>{const e=Yt("colors"),t=Yt("spacing"),a=Yt("blur"),s=Yt("brightness"),n=Yt("borderColor"),o=Yt("borderRadius"),i=Yt("borderSpacing"),l=Yt("borderWidth"),c=Yt("contrast"),d=Yt("grayscale"),f=Yt("hueRotate"),h=Yt("invert"),p=Yt("gap"),m=Yt("gradientColorStops"),_=Yt("gradientColorStopPositions"),g=Yt("inset"),x=Yt("margin"),y=Yt("opacity"),v=Yt("padding"),b=Yt("saturate"),j=Yt("scale"),w=Yt("sepia"),S=Yt("skew"),N=Yt("space"),C=Yt("translate"),P=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],Q=()=>["auto",tt,t],K=()=>[tt,t],ce=()=>["",vr,Qr],L=()=>["auto",wi,tt],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],T=()=>["solid","dashed","dotted","double","none"],V=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],E=()=>["","0",tt],O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[wi,tt];return{cacheSize:500,separator:":",theme:{colors:[Nl],spacing:[vr,Qr],blur:["none","",Kr,tt],brightness:U(),borderColor:[e],borderRadius:["none","","full",Kr,tt],borderSpacing:K(),borderWidth:ce(),contrast:U(),grayscale:E(),hueRotate:U(),invert:E(),gap:K(),gradientColorStops:[e],gradientColorStopPositions:[SD,Qr],inset:Q(),margin:Q(),opacity:U(),padding:K(),saturate:U(),scale:U(),sepia:E(),skew:U(),space:K(),translate:K()},classGroups:{aspect:[{aspect:["auto","square","video",tt]}],container:["container"],columns:[{columns:[Kr]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),tt]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",El,tt]}],basis:[{basis:Q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",tt]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",El,tt]}],"grid-cols":[{"grid-cols":[Nl]}],"col-start-end":[{col:["auto",{span:["full",El,tt]},tt]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[Nl]}],"row-start-end":[{row:["auto",{span:[El,tt]},tt]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",tt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",tt]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",tt,t]}],"min-w":[{"min-w":[tt,t,"min","max","fit"]}],"max-w":[{"max-w":[tt,t,"none","full","min","max","fit","prose",{screen:[Kr]},Kr]}],h:[{h:[tt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[tt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[tt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[tt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Kr,Qr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Sh]}],"font-family":[{font:[Nl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",tt]}],"line-clamp":[{"line-clamp":["none",wi,Sh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",vr,tt]}],"list-image":[{"list-image":["none",tt]}],"list-style-type":[{list:["none","disc","decimal",tt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...T(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",vr,Qr]}],"underline-offset":[{"underline-offset":["auto",vr,tt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:K()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),CD]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ND]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},TD]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...T(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:T()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...T()]}],"outline-offset":[{"outline-offset":[vr,tt]}],"outline-w":[{outline:[vr,Qr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[vr,Qr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Kr,DD]}],"shadow-color":[{shadow:[Nl]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...V(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":V()}],filter:[{filter:["","none"]}],blur:[{blur:[a]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Kr,tt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[a]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",tt]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",tt]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",tt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[El,tt]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",tt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":K()}],"scroll-mx":[{"scroll-mx":K()}],"scroll-my":[{"scroll-my":K()}],"scroll-ms":[{"scroll-ms":K()}],"scroll-me":[{"scroll-me":K()}],"scroll-mt":[{"scroll-mt":K()}],"scroll-mr":[{"scroll-mr":K()}],"scroll-mb":[{"scroll-mb":K()}],"scroll-ml":[{"scroll-ml":K()}],"scroll-p":[{"scroll-p":K()}],"scroll-px":[{"scroll-px":K()}],"scroll-py":[{"scroll-py":K()}],"scroll-ps":[{"scroll-ps":K()}],"scroll-pe":[{"scroll-pe":K()}],"scroll-pt":[{"scroll-pt":K()}],"scroll-pr":[{"scroll-pr":K()}],"scroll-pb":[{"scroll-pb":K()}],"scroll-pl":[{"scroll-pl":K()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[vr,Qr,Sh]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},PD=gD(MD);function je(...e){return PD(Kj(e))}function Bt(e){if(!e)return"-";if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e)){const[a,s,n]=e.split("-");return`${n}/${s}/${a}`}return(typeof e=="string"?new Date(e):e).toLocaleDateString("pt-BR")}function Zs(e){if(!e)return null;if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=e.match(/^(\d{4}-\d{2}-\d{2})/);return t?t[1]:null}function kD(e,t){if(!e||!/^\d{4}-\d{2}-\d{2}$/.test(e))throw new Error("Data deve estar no formato YYYY-MM-DD");const[a,s,n]=e.split("-").map(Number),o=new Date(a,s-1,n);o.setDate(o.getDate()+t);const i=o.getFullYear(),l=String(o.getMonth()+1).padStart(2,"0"),c=String(o.getDate()).padStart(2,"0");return`${i}-${l}-${c}`}function Eh(e,t){if(!e||!t)return 0;const a=Zs(e),s=Zs(t);if(!a||!s)return 0;const[n,o,i]=a.split("-").map(Number),[l,c,d]=s.split("-").map(Number),f=new Date(n,o-1,i),h=new Date(l,c-1,d),p=f.getTime()-h.getTime();return Math.floor(p/(1e3*60*60*24))}function Nh(){const e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${s}`}function c0(e){if(!e)return"-";const t=Zs(e);if(!t)return"-";const[a,s,n]=t.split("-");return`${n}/${s}/${a}`}function LD(e){const t=Zs(e);if(!t)return"";const[a,s,n]=t.split("-").map(Number),o=new Date(a,s-1,n);return["Domingo","Segunda-feira","Tera-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sbado"][o.getDay()]}const ID=FT,lw=u.forwardRef(({className:e,...t},a)=>r.jsx(Uj,{ref:a,className:je("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));lw.displayName=Uj.displayName;const FD=il("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),cw=u.forwardRef(({className:e,variant:t,...a},s)=>r.jsx($j,{ref:s,className:je(FD({variant:t}),e),...a}));cw.displayName=$j.displayName;const qD=u.forwardRef(({className:e,...t},a)=>r.jsx(Gj,{ref:a,className:je("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));qD.displayName=Gj.displayName;const dw=u.forwardRef(({className:e,...t},a)=>r.jsx(Yj,{ref:a,className:je("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(Cs,{className:"h-4 w-4"})}));dw.displayName=Yj.displayName;const uw=u.forwardRef(({className:e,...t},a)=>r.jsx(Hj,{ref:a,className:je("text-sm font-semibold",e),...t}));uw.displayName=Hj.displayName;const fw=u.forwardRef(({className:e,...t},a)=>r.jsx(Vj,{ref:a,className:je("text-sm opacity-90",e),...t}));fw.displayName=Vj.displayName;function BD(){const{toasts:e}=Jt();return r.jsxs(ID,{children:[e.map(function({id:t,title:a,description:s,action:n,...o}){return r.jsxs(cw,{...o,children:[r.jsxs("div",{className:"grid gap-1",children:[a&&r.jsx(uw,{children:a}),s&&r.jsx(fw,{children:s})]}),n,r.jsx(dw,{})]},t)}),r.jsx(lw,{})]})}var UD=Ep[" useId ".trim().toString()]||(()=>{}),$D=0;function Dr(e){const[t,a]=u.useState(UD());return Ca(()=>{a(s=>s??String($D++))},[e]),t?`radix-${t}`:""}const HD=["top","right","bottom","left"],zn=Math.min,os=Math.max,Tu=Math.round,bd=Math.floor,nr=e=>({x:e,y:e}),VD={left:"right",right:"left",bottom:"top",top:"bottom"},GD={start:"end",end:"start"};function Qm(e,t,a){return os(e,zn(t,a))}function Pr(e,t){return typeof e=="function"?e(t):e}function kr(e){return e.split("-")[0]}function cl(e){return e.split("-")[1]}function zg(e){return e==="x"?"y":"x"}function Mg(e){return e==="y"?"height":"width"}const YD=new Set(["top","bottom"]);function tr(e){return YD.has(kr(e))?"y":"x"}function Pg(e){return zg(tr(e))}function QD(e,t,a){a===void 0&&(a=!1);const s=cl(e),n=Pg(e),o=Mg(n);let i=n==="x"?s===(a?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Du(i)),[i,Du(i)]}function KD(e){const t=Du(e);return[Km(e),t,Km(t)]}function Km(e){return e.replace(/start|end/g,t=>GD[t])}const d0=["left","right"],u0=["right","left"],XD=["top","bottom"],ZD=["bottom","top"];function JD(e,t,a){switch(e){case"top":case"bottom":return a?t?u0:d0:t?d0:u0;case"left":case"right":return t?XD:ZD;default:return[]}}function WD(e,t,a,s){const n=cl(e);let o=JD(kr(e),a==="start",s);return n&&(o=o.map(i=>i+"-"+n),t&&(o=o.concat(o.map(Km)))),o}function Du(e){return e.replace(/left|right|bottom|top/g,t=>VD[t])}function eR(e){return{top:0,right:0,bottom:0,left:0,...e}}function hw(e){return typeof e!="number"?eR(e):{top:e,right:e,bottom:e,left:e}}function Ru(e){const{x:t,y:a,width:s,height:n}=e;return{width:s,height:n,top:a,left:t,right:t+s,bottom:a+n,x:t,y:a}}function f0(e,t,a){let{reference:s,floating:n}=e;const o=tr(t),i=Pg(t),l=Mg(i),c=kr(t),d=o==="y",f=s.x+s.width/2-n.width/2,h=s.y+s.height/2-n.height/2,p=s[l]/2-n[l]/2;let m;switch(c){case"top":m={x:f,y:s.y-n.height};break;case"bottom":m={x:f,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:h};break;case"left":m={x:s.x-n.width,y:h};break;default:m={x:s.x,y:s.y}}switch(cl(t)){case"start":m[i]-=p*(a&&d?-1:1);break;case"end":m[i]+=p*(a&&d?-1:1);break}return m}const tR=async(e,t,a)=>{const{placement:s="bottom",strategy:n="absolute",middleware:o=[],platform:i}=a,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:n}),{x:f,y:h}=f0(d,s,c),p=s,m={},_=0;for(let g=0;g<l.length;g++){const{name:x,fn:y}=l[g],{x:v,y:b,data:j,reset:w}=await y({x:f,y:h,initialPlacement:s,placement:p,strategy:n,middlewareData:m,rects:d,platform:i,elements:{reference:e,floating:t}});f=v??f,h=b??h,m={...m,[x]:{...m[x],...j}},w&&_<=50&&(_++,typeof w=="object"&&(w.placement&&(p=w.placement),w.rects&&(d=w.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:n}):w.rects),{x:f,y:h}=f0(d,p,c)),g=-1)}return{x:f,y:h,placement:p,strategy:n,middlewareData:m}};async function pc(e,t){var a;t===void 0&&(t={});const{x:s,y:n,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=Pr(t,e),_=hw(m),x=l[p?h==="floating"?"reference":"floating":h],y=Ru(await o.getClippingRect({element:(a=await(o.isElement==null?void 0:o.isElement(x)))==null||a?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:c})),v=h==="floating"?{x:s,y:n,width:i.floating.width,height:i.floating.height}:i.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),j=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},w=Ru(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:b,strategy:c}):v);return{top:(y.top-w.top+_.top)/j.y,bottom:(w.bottom-y.bottom+_.bottom)/j.y,left:(y.left-w.left+_.left)/j.x,right:(w.right-y.right+_.right)/j.x}}const aR=e=>({name:"arrow",options:e,async fn(t){const{x:a,y:s,placement:n,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:f=0}=Pr(e,t)||{};if(d==null)return{};const h=hw(f),p={x:a,y:s},m=Pg(n),_=Mg(m),g=await i.getDimensions(d),x=m==="y",y=x?"top":"left",v=x?"bottom":"right",b=x?"clientHeight":"clientWidth",j=o.reference[_]+o.reference[m]-p[m]-o.floating[_],w=p[m]-o.reference[m],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let N=S?S[b]:0;(!N||!await(i.isElement==null?void 0:i.isElement(S)))&&(N=l.floating[b]||o.floating[_]);const C=j/2-w/2,P=N/2-g[_]/2-1,R=zn(h[y],P),Q=zn(h[v],P),K=R,ce=N-g[_]-Q,L=N/2-g[_]/2+C,H=Qm(K,L,ce),T=!c.arrow&&cl(n)!=null&&L!==H&&o.reference[_]/2-(L<K?R:Q)-g[_]/2<0,V=T?L<K?L-K:L-ce:0;return{[m]:p[m]+V,data:{[m]:H,centerOffset:L-H-V,...T&&{alignmentOffset:V}},reset:T}}}),sR=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var a,s;const{placement:n,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:g=!0,...x}=Pr(e,t);if((a=o.arrow)!=null&&a.alignmentOffset)return{};const y=kr(n),v=tr(l),b=kr(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),w=p||(b||!g?[Du(l)]:KD(l)),S=_!=="none";!p&&S&&w.push(...WD(l,g,_,j));const N=[l,...w],C=await pc(t,x),P=[];let R=((s=o.flip)==null?void 0:s.overflows)||[];if(f&&P.push(C[y]),h){const L=QD(n,i,j);P.push(C[L[0]],C[L[1]])}if(R=[...R,{placement:n,overflows:P}],!P.every(L=>L<=0)){var Q,K;const L=(((Q=o.flip)==null?void 0:Q.index)||0)+1,H=N[L];if(H&&(!(h==="alignment"?v!==tr(H):!1)||R.every(F=>F.overflows[0]>0&&tr(F.placement)===v)))return{data:{index:L,overflows:R},reset:{placement:H}};let T=(K=R.filter(V=>V.overflows[0]<=0).sort((V,F)=>V.overflows[1]-F.overflows[1])[0])==null?void 0:K.placement;if(!T)switch(m){case"bestFit":{var ce;const V=(ce=R.filter(F=>{if(S){const E=tr(F.placement);return E===v||E==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(E=>E>0).reduce((E,O)=>E+O,0)]).sort((F,E)=>F[1]-E[1])[0])==null?void 0:ce[0];V&&(T=V);break}case"initialPlacement":T=l;break}if(n!==T)return{reset:{placement:T}}}return{}}}};function h0(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function m0(e){return HD.some(t=>e[t]>=0)}const rR=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:a}=t,{strategy:s="referenceHidden",...n}=Pr(e,t);switch(s){case"referenceHidden":{const o=await pc(t,{...n,elementContext:"reference"}),i=h0(o,a.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:m0(i)}}}case"escaped":{const o=await pc(t,{...n,altBoundary:!0}),i=h0(o,a.floating);return{data:{escapedOffsets:i,escaped:m0(i)}}}default:return{}}}}},mw=new Set(["left","top"]);async function nR(e,t){const{placement:a,platform:s,elements:n}=e,o=await(s.isRTL==null?void 0:s.isRTL(n.floating)),i=kr(a),l=cl(a),c=tr(a)==="y",d=mw.has(i)?-1:1,f=o&&c?-1:1,h=Pr(t,e);let{mainAxis:p,crossAxis:m,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof _=="number"&&(m=l==="end"?_*-1:_),c?{x:m*f,y:p*d}:{x:p*d,y:m*f}}const oR=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var a,s;const{x:n,y:o,placement:i,middlewareData:l}=t,c=await nR(t,e);return i===((a=l.offset)==null?void 0:a.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:n+c.x,y:o+c.y,data:{...c,placement:i}}}}},iR=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:a,y:s,placement:n}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:x=>{let{x:y,y:v}=x;return{x:y,y:v}}},...c}=Pr(e,t),d={x:a,y:s},f=await pc(t,c),h=tr(kr(n)),p=zg(h);let m=d[p],_=d[h];if(o){const x=p==="y"?"top":"left",y=p==="y"?"bottom":"right",v=m+f[x],b=m-f[y];m=Qm(v,m,b)}if(i){const x=h==="y"?"top":"left",y=h==="y"?"bottom":"right",v=_+f[x],b=_-f[y];_=Qm(v,_,b)}const g=l.fn({...t,[p]:m,[h]:_});return{...g,data:{x:g.x-a,y:g.y-s,enabled:{[p]:o,[h]:i}}}}}},lR=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:a,y:s,placement:n,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Pr(e,t),f={x:a,y:s},h=tr(n),p=zg(h);let m=f[p],_=f[h];const g=Pr(l,t),x=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=p==="y"?"height":"width",j=o.reference[p]-o.floating[b]+x.mainAxis,w=o.reference[p]+o.reference[b]-x.mainAxis;m<j?m=j:m>w&&(m=w)}if(d){var y,v;const b=p==="y"?"width":"height",j=mw.has(kr(n)),w=o.reference[h]-o.floating[b]+(j&&((y=i.offset)==null?void 0:y[h])||0)+(j?0:x.crossAxis),S=o.reference[h]+o.reference[b]+(j?0:((v=i.offset)==null?void 0:v[h])||0)-(j?x.crossAxis:0);_<w?_=w:_>S&&(_=S)}return{[p]:m,[h]:_}}}},cR=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var a,s;const{placement:n,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...d}=Pr(e,t),f=await pc(t,d),h=kr(n),p=cl(n),m=tr(n)==="y",{width:_,height:g}=o.floating;let x,y;h==="top"||h==="bottom"?(x=h,y=p===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(y=h,x=p==="end"?"top":"bottom");const v=g-f.top-f.bottom,b=_-f.left-f.right,j=zn(g-f[x],v),w=zn(_-f[y],b),S=!t.middlewareData.shift;let N=j,C=w;if((a=t.middlewareData.shift)!=null&&a.enabled.x&&(C=b),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(N=v),S&&!p){const R=os(f.left,0),Q=os(f.right,0),K=os(f.top,0),ce=os(f.bottom,0);m?C=_-2*(R!==0||Q!==0?R+Q:os(f.left,f.right)):N=g-2*(K!==0||ce!==0?K+ce:os(f.top,f.bottom))}await c({...t,availableWidth:C,availableHeight:N});const P=await i.getDimensions(l.floating);return _!==P.width||g!==P.height?{reset:{rects:!0}}:{}}}};function cf(){return typeof window<"u"}function dl(e){return pw(e)?(e.nodeName||"").toLowerCase():"#document"}function fs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function cr(e){var t;return(t=(pw(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function pw(e){return cf()?e instanceof Node||e instanceof fs(e).Node:!1}function Us(e){return cf()?e instanceof Element||e instanceof fs(e).Element:!1}function or(e){return cf()?e instanceof HTMLElement||e instanceof fs(e).HTMLElement:!1}function p0(e){return!cf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof fs(e).ShadowRoot}const dR=new Set(["inline","contents"]);function Uc(e){const{overflow:t,overflowX:a,overflowY:s,display:n}=$s(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+a)&&!dR.has(n)}const uR=new Set(["table","td","th"]);function fR(e){return uR.has(dl(e))}const hR=[":popover-open",":modal"];function df(e){return hR.some(t=>{try{return e.matches(t)}catch{return!1}})}const mR=["transform","translate","scale","rotate","perspective"],pR=["transform","translate","scale","rotate","perspective","filter"],gR=["paint","layout","strict","content"];function kg(e){const t=Lg(),a=Us(e)?$s(e):e;return mR.some(s=>a[s]?a[s]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!t&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!t&&(a.filter?a.filter!=="none":!1)||pR.some(s=>(a.willChange||"").includes(s))||gR.some(s=>(a.contain||"").includes(s))}function vR(e){let t=Mn(e);for(;or(t)&&!Gi(t);){if(kg(t))return t;if(df(t))return null;t=Mn(t)}return null}function Lg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const xR=new Set(["html","body","#document"]);function Gi(e){return xR.has(dl(e))}function $s(e){return fs(e).getComputedStyle(e)}function uf(e){return Us(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Mn(e){if(dl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||p0(e)&&e.host||cr(e);return p0(t)?t.host:t}function gw(e){const t=Mn(e);return Gi(t)?e.ownerDocument?e.ownerDocument.body:e.body:or(t)&&Uc(t)?t:gw(t)}function gc(e,t,a){var s;t===void 0&&(t=[]),a===void 0&&(a=!0);const n=gw(e),o=n===((s=e.ownerDocument)==null?void 0:s.body),i=fs(n);if(o){const l=Xm(i);return t.concat(i,i.visualViewport||[],Uc(n)?n:[],l&&a?gc(l):[])}return t.concat(n,gc(n,[],a))}function Xm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function vw(e){const t=$s(e);let a=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const n=or(e),o=n?e.offsetWidth:a,i=n?e.offsetHeight:s,l=Tu(a)!==o||Tu(s)!==i;return l&&(a=o,s=i),{width:a,height:s,$:l}}function Ig(e){return Us(e)?e:e.contextElement}function Si(e){const t=Ig(e);if(!or(t))return nr(1);const a=t.getBoundingClientRect(),{width:s,height:n,$:o}=vw(t);let i=(o?Tu(a.width):a.width)/s,l=(o?Tu(a.height):a.height)/n;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const yR=nr(0);function xw(e){const t=fs(e);return!Lg()||!t.visualViewport?yR:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function bR(e,t,a){return t===void 0&&(t=!1),!a||t&&a!==fs(e)?!1:t}function _o(e,t,a,s){t===void 0&&(t=!1),a===void 0&&(a=!1);const n=e.getBoundingClientRect(),o=Ig(e);let i=nr(1);t&&(s?Us(s)&&(i=Si(s)):i=Si(e));const l=bR(o,a,s)?xw(o):nr(0);let c=(n.left+l.x)/i.x,d=(n.top+l.y)/i.y,f=n.width/i.x,h=n.height/i.y;if(o){const p=fs(o),m=s&&Us(s)?fs(s):s;let _=p,g=Xm(_);for(;g&&s&&m!==_;){const x=Si(g),y=g.getBoundingClientRect(),v=$s(g),b=y.left+(g.clientLeft+parseFloat(v.paddingLeft))*x.x,j=y.top+(g.clientTop+parseFloat(v.paddingTop))*x.y;c*=x.x,d*=x.y,f*=x.x,h*=x.y,c+=b,d+=j,_=fs(g),g=Xm(_)}}return Ru({width:f,height:h,x:c,y:d})}function Fg(e,t){const a=uf(e).scrollLeft;return t?t.left+a:_o(cr(e)).left+a}function yw(e,t,a){a===void 0&&(a=!1);const s=e.getBoundingClientRect(),n=s.left+t.scrollLeft-(a?0:Fg(e,s)),o=s.top+t.scrollTop;return{x:n,y:o}}function _R(e){let{elements:t,rect:a,offsetParent:s,strategy:n}=e;const o=n==="fixed",i=cr(s),l=t?df(t.floating):!1;if(s===i||l&&o)return a;let c={scrollLeft:0,scrollTop:0},d=nr(1);const f=nr(0),h=or(s);if((h||!h&&!o)&&((dl(s)!=="body"||Uc(i))&&(c=uf(s)),or(s))){const m=_o(s);d=Si(s),f.x=m.x+s.clientLeft,f.y=m.y+s.clientTop}const p=i&&!h&&!o?yw(i,c,!0):nr(0);return{width:a.width*d.x,height:a.height*d.y,x:a.x*d.x-c.scrollLeft*d.x+f.x+p.x,y:a.y*d.y-c.scrollTop*d.y+f.y+p.y}}function jR(e){return Array.from(e.getClientRects())}function wR(e){const t=cr(e),a=uf(e),s=e.ownerDocument.body,n=os(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),o=os(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let i=-a.scrollLeft+Fg(e);const l=-a.scrollTop;return $s(s).direction==="rtl"&&(i+=os(t.clientWidth,s.clientWidth)-n),{width:n,height:o,x:i,y:l}}function SR(e,t){const a=fs(e),s=cr(e),n=a.visualViewport;let o=s.clientWidth,i=s.clientHeight,l=0,c=0;if(n){o=n.width,i=n.height;const d=Lg();(!d||d&&t==="fixed")&&(l=n.offsetLeft,c=n.offsetTop)}return{width:o,height:i,x:l,y:c}}const ER=new Set(["absolute","fixed"]);function NR(e,t){const a=_o(e,!0,t==="fixed"),s=a.top+e.clientTop,n=a.left+e.clientLeft,o=or(e)?Si(e):nr(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=n*o.x,d=s*o.y;return{width:i,height:l,x:c,y:d}}function g0(e,t,a){let s;if(t==="viewport")s=SR(e,a);else if(t==="document")s=wR(cr(e));else if(Us(t))s=NR(t,a);else{const n=xw(e);s={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Ru(s)}function bw(e,t){const a=Mn(e);return a===t||!Us(a)||Gi(a)?!1:$s(a).position==="fixed"||bw(a,t)}function CR(e,t){const a=t.get(e);if(a)return a;let s=gc(e,[],!1).filter(l=>Us(l)&&dl(l)!=="body"),n=null;const o=$s(e).position==="fixed";let i=o?Mn(e):e;for(;Us(i)&&!Gi(i);){const l=$s(i),c=kg(i);!c&&l.position==="fixed"&&(n=null),(o?!c&&!n:!c&&l.position==="static"&&!!n&&ER.has(n.position)||Uc(i)&&!c&&bw(e,i))?s=s.filter(f=>f!==i):n=l,i=Mn(i)}return t.set(e,s),s}function AR(e){let{element:t,boundary:a,rootBoundary:s,strategy:n}=e;const i=[...a==="clippingAncestors"?df(t)?[]:CR(t,this._c):[].concat(a),s],l=i[0],c=i.reduce((d,f)=>{const h=g0(t,f,n);return d.top=os(h.top,d.top),d.right=zn(h.right,d.right),d.bottom=zn(h.bottom,d.bottom),d.left=os(h.left,d.left),d},g0(t,l,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function TR(e){const{width:t,height:a}=vw(e);return{width:t,height:a}}function DR(e,t,a){const s=or(t),n=cr(t),o=a==="fixed",i=_o(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=nr(0);function d(){c.x=Fg(n)}if(s||!s&&!o)if((dl(t)!=="body"||Uc(n))&&(l=uf(t)),s){const m=_o(t,!0,o,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else n&&d();o&&!s&&n&&d();const f=n&&!s&&!o?yw(n,l):nr(0),h=i.left+l.scrollLeft-c.x-f.x,p=i.top+l.scrollTop-c.y-f.y;return{x:h,y:p,width:i.width,height:i.height}}function Ch(e){return $s(e).position==="static"}function v0(e,t){if(!or(e)||$s(e).position==="fixed")return null;if(t)return t(e);let a=e.offsetParent;return cr(e)===a&&(a=a.ownerDocument.body),a}function _w(e,t){const a=fs(e);if(df(e))return a;if(!or(e)){let n=Mn(e);for(;n&&!Gi(n);){if(Us(n)&&!Ch(n))return n;n=Mn(n)}return a}let s=v0(e,t);for(;s&&fR(s)&&Ch(s);)s=v0(s,t);return s&&Gi(s)&&Ch(s)&&!kg(s)?a:s||vR(e)||a}const RR=async function(e){const t=this.getOffsetParent||_w,a=this.getDimensions,s=await a(e.floating);return{reference:DR(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function OR(e){return $s(e).direction==="rtl"}const zR={convertOffsetParentRelativeRectToViewportRelativeRect:_R,getDocumentElement:cr,getClippingRect:AR,getOffsetParent:_w,getElementRects:RR,getClientRects:jR,getDimensions:TR,getScale:Si,isElement:Us,isRTL:OR};function jw(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function MR(e,t){let a=null,s;const n=cr(e);function o(){var l;clearTimeout(s),(l=a)==null||l.disconnect(),a=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const d=e.getBoundingClientRect(),{left:f,top:h,width:p,height:m}=d;if(l||t(),!p||!m)return;const _=bd(h),g=bd(n.clientWidth-(f+p)),x=bd(n.clientHeight-(h+m)),y=bd(f),b={rootMargin:-_+"px "+-g+"px "+-x+"px "+-y+"px",threshold:os(0,zn(1,c))||1};let j=!0;function w(S){const N=S[0].intersectionRatio;if(N!==c){if(!j)return i();N?i(!1,N):s=setTimeout(()=>{i(!1,1e-7)},1e3)}N===1&&!jw(d,e.getBoundingClientRect())&&i(),j=!1}try{a=new IntersectionObserver(w,{...b,root:n.ownerDocument})}catch{a=new IntersectionObserver(w,b)}a.observe(e)}return i(!0),o}function PR(e,t,a,s){s===void 0&&(s={});const{ancestorScroll:n=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=Ig(e),f=n||o?[...d?gc(d):[],...gc(t)]:[];f.forEach(y=>{n&&y.addEventListener("scroll",a,{passive:!0}),o&&y.addEventListener("resize",a)});const h=d&&l?MR(d,a):null;let p=-1,m=null;i&&(m=new ResizeObserver(y=>{let[v]=y;v&&v.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(t)})),a()}),d&&!c&&m.observe(d),m.observe(t));let _,g=c?_o(e):null;c&&x();function x(){const y=_o(e);g&&!jw(g,y)&&a(),g=y,_=requestAnimationFrame(x)}return a(),()=>{var y;f.forEach(v=>{n&&v.removeEventListener("scroll",a),o&&v.removeEventListener("resize",a)}),h==null||h(),(y=m)==null||y.disconnect(),m=null,c&&cancelAnimationFrame(_)}}const kR=oR,LR=iR,IR=sR,FR=cR,qR=rR,x0=aR,BR=lR,UR=(e,t,a)=>{const s=new Map,n={platform:zR,...a},o={...n.platform,_c:s};return tR(e,t,{...n,platform:o})};var $R=typeof document<"u",HR=function(){},Vd=$R?u.useLayoutEffect:HR;function Ou(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let a,s,n;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(a=e.length,a!==t.length)return!1;for(s=a;s--!==0;)if(!Ou(e[s],t[s]))return!1;return!0}if(n=Object.keys(e),a=n.length,a!==Object.keys(t).length)return!1;for(s=a;s--!==0;)if(!{}.hasOwnProperty.call(t,n[s]))return!1;for(s=a;s--!==0;){const o=n[s];if(!(o==="_owner"&&e.$$typeof)&&!Ou(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function ww(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function y0(e,t){const a=ww(e);return Math.round(t*a)/a}function Ah(e){const t=u.useRef(e);return Vd(()=>{t.current=e}),t}function VR(e){e===void 0&&(e={});const{placement:t="bottom",strategy:a="absolute",middleware:s=[],platform:n,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[f,h]=u.useState({x:0,y:0,strategy:a,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=u.useState(s);Ou(p,s)||m(s);const[_,g]=u.useState(null),[x,y]=u.useState(null),v=u.useCallback(F=>{F!==S.current&&(S.current=F,g(F))},[]),b=u.useCallback(F=>{F!==N.current&&(N.current=F,y(F))},[]),j=o||_,w=i||x,S=u.useRef(null),N=u.useRef(null),C=u.useRef(f),P=c!=null,R=Ah(c),Q=Ah(n),K=Ah(d),ce=u.useCallback(()=>{if(!S.current||!N.current)return;const F={placement:t,strategy:a,middleware:p};Q.current&&(F.platform=Q.current),UR(S.current,N.current,F).then(E=>{const O={...E,isPositioned:K.current!==!1};L.current&&!Ou(C.current,O)&&(C.current=O,Oo.flushSync(()=>{h(O)}))})},[p,t,a,Q,K]);Vd(()=>{d===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[d]);const L=u.useRef(!1);Vd(()=>(L.current=!0,()=>{L.current=!1}),[]),Vd(()=>{if(j&&(S.current=j),w&&(N.current=w),j&&w){if(R.current)return R.current(j,w,ce);ce()}},[j,w,ce,R,P]);const H=u.useMemo(()=>({reference:S,floating:N,setReference:v,setFloating:b}),[v,b]),T=u.useMemo(()=>({reference:j,floating:w}),[j,w]),V=u.useMemo(()=>{const F={position:a,left:0,top:0};if(!T.floating)return F;const E=y0(T.floating,f.x),O=y0(T.floating,f.y);return l?{...F,transform:"translate("+E+"px, "+O+"px)",...ww(T.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:E,top:O}},[a,l,T.floating,f.x,f.y]);return u.useMemo(()=>({...f,update:ce,refs:H,elements:T,floatingStyles:V}),[f,ce,H,T,V])}const GR=e=>{function t(a){return{}.hasOwnProperty.call(a,"current")}return{name:"arrow",options:e,fn(a){const{element:s,padding:n}=typeof e=="function"?e(a):e;return s&&t(s)?s.current!=null?x0({element:s.current,padding:n}).fn(a):{}:s?x0({element:s,padding:n}).fn(a):{}}}},YR=(e,t)=>({...kR(e),options:[e,t]}),QR=(e,t)=>({...LR(e),options:[e,t]}),KR=(e,t)=>({...BR(e),options:[e,t]}),XR=(e,t)=>({...IR(e),options:[e,t]}),ZR=(e,t)=>({...FR(e),options:[e,t]}),JR=(e,t)=>({...qR(e),options:[e,t]}),WR=(e,t)=>({...GR(e),options:[e,t]});var eO="Arrow",Sw=u.forwardRef((e,t)=>{const{children:a,width:s=10,height:n=5,...o}=e;return r.jsx(Ve.svg,{...o,ref:t,width:s,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?a:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});Sw.displayName=eO;var tO=Sw;function Ew(e){const[t,a]=u.useState(void 0);return Ca(()=>{if(e){a({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const o=n[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;a({width:i,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else a(void 0)},[e]),t}var qg="Popper",[Nw,ul]=Ts(qg),[aO,Cw]=Nw(qg),Aw=e=>{const{__scopePopper:t,children:a}=e,[s,n]=u.useState(null);return r.jsx(aO,{scope:t,anchor:s,onAnchorChange:n,children:a})};Aw.displayName=qg;var Tw="PopperAnchor",Dw=u.forwardRef((e,t)=>{const{__scopePopper:a,virtualRef:s,...n}=e,o=Cw(Tw,a),i=u.useRef(null),l=vt(t,i);return u.useEffect(()=>{o.onAnchorChange((s==null?void 0:s.current)||i.current)}),s?null:r.jsx(Ve.div,{...n,ref:l})});Dw.displayName=Tw;var Bg="PopperContent",[sO,rO]=Nw(Bg),Rw=u.forwardRef((e,t)=>{var z,A,J,ee,Z,ae;const{__scopePopper:a,side:s="bottom",sideOffset:n=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:_,...g}=e,x=Cw(Bg,a),[y,v]=u.useState(null),b=vt(t,ie=>v(ie)),[j,w]=u.useState(null),S=Ew(j),N=(S==null?void 0:S.width)??0,C=(S==null?void 0:S.height)??0,P=s+(o!=="center"?"-"+o:""),R=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},Q=Array.isArray(d)?d:[d],K=Q.length>0,ce={padding:R,boundary:Q.filter(oO),altBoundary:K},{refs:L,floatingStyles:H,placement:T,isPositioned:V,middlewareData:F}=VR({strategy:"fixed",placement:P,whileElementsMounted:(...ie)=>PR(...ie,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[YR({mainAxis:n+C,alignmentAxis:i}),c&&QR({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?KR():void 0,...ce}),c&&XR({...ce}),ZR({...ce,apply:({elements:ie,rects:pe,availableWidth:ge,availableHeight:Le})=>{const{width:te,height:xe}=pe.reference,q=ie.floating.style;q.setProperty("--radix-popper-available-width",`${ge}px`),q.setProperty("--radix-popper-available-height",`${Le}px`),q.setProperty("--radix-popper-anchor-width",`${te}px`),q.setProperty("--radix-popper-anchor-height",`${xe}px`)}}),j&&WR({element:j,padding:l}),iO({arrowWidth:N,arrowHeight:C}),p&&JR({strategy:"referenceHidden",...ce})]}),[E,O]=Mw(T),U=Ns(_);Ca(()=>{V&&(U==null||U())},[V,U]);const M=(z=F.arrow)==null?void 0:z.x,X=(A=F.arrow)==null?void 0:A.y,$=((J=F.arrow)==null?void 0:J.centerOffset)!==0,[ne,le]=u.useState();return Ca(()=>{y&&le(window.getComputedStyle(y).zIndex)},[y]),r.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:V?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ne,"--radix-popper-transform-origin":[(ee=F.transformOrigin)==null?void 0:ee.x,(Z=F.transformOrigin)==null?void 0:Z.y].join(" "),...((ae=F.hide)==null?void 0:ae.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(sO,{scope:a,placedSide:E,onArrowChange:w,arrowX:M,arrowY:X,shouldHideArrow:$,children:r.jsx(Ve.div,{"data-side":E,"data-align":O,...g,ref:b,style:{...g.style,animation:V?void 0:"none"}})})})});Rw.displayName=Bg;var Ow="PopperArrow",nO={top:"bottom",right:"left",bottom:"top",left:"right"},zw=u.forwardRef(function(t,a){const{__scopePopper:s,...n}=t,o=rO(Ow,s),i=nO[o.placedSide];return r.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:r.jsx(tO,{...n,ref:a,style:{...n.style,display:"block"}})})});zw.displayName=Ow;function oO(e){return e!==null}var iO=e=>({name:"transformOrigin",options:e,fn(t){var x,y,v;const{placement:a,rects:s,middlewareData:n}=t,i=((x=n.arrow)==null?void 0:x.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,f]=Mw(a),h={start:"0%",center:"50%",end:"100%"}[f],p=(((y=n.arrow)==null?void 0:y.x)??0)+l/2,m=(((v=n.arrow)==null?void 0:v.y)??0)+c/2;let _="",g="";return d==="bottom"?(_=i?h:`${p}px`,g=`${-c}px`):d==="top"?(_=i?h:`${p}px`,g=`${s.floating.height+c}px`):d==="right"?(_=`${-c}px`,g=i?h:`${m}px`):d==="left"&&(_=`${s.floating.width+c}px`,g=i?h:`${m}px`),{data:{x:_,y:g}}}});function Mw(e){const[t,a="center"]=e.split("-");return[t,a]}var Pw=Aw,ff=Dw,Ug=Rw,$g=zw,[hf,M5]=Ts("Tooltip",[ul]),Hg=ul(),kw="TooltipProvider",lO=700,b0="tooltip.open",[cO,Lw]=hf(kw),Iw=e=>{const{__scopeTooltip:t,delayDuration:a=lO,skipDelayDuration:s=300,disableHoverableContent:n=!1,children:o}=e,i=u.useRef(!0),l=u.useRef(!1),c=u.useRef(0);return u.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(cO,{scope:t,isOpenDelayedRef:i,delayDuration:a,onOpen:u.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:u.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:u.useCallback(d=>{l.current=d},[]),disableHoverableContent:n,children:o})};Iw.displayName=kw;var Fw="Tooltip",[P5,mf]=hf(Fw),Zm="TooltipTrigger",dO=u.forwardRef((e,t)=>{const{__scopeTooltip:a,...s}=e,n=mf(Zm,a),o=Lw(Zm,a),i=Hg(a),l=u.useRef(null),c=vt(t,l,n.onTriggerChange),d=u.useRef(!1),f=u.useRef(!1),h=u.useCallback(()=>d.current=!1,[]);return u.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),r.jsx(ff,{asChild:!0,...i,children:r.jsx(Ve.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...s,ref:c,onPointerMove:ke(e.onPointerMove,p=>{p.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(n.onTriggerEnter(),f.current=!0)}),onPointerLeave:ke(e.onPointerLeave,()=>{n.onTriggerLeave(),f.current=!1}),onPointerDown:ke(e.onPointerDown,()=>{n.open&&n.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ke(e.onFocus,()=>{d.current||n.onOpen()}),onBlur:ke(e.onBlur,n.onClose),onClick:ke(e.onClick,n.onClose)})})});dO.displayName=Zm;var uO="TooltipPortal",[k5,fO]=hf(uO,{forceMount:void 0}),Yi="TooltipContent",qw=u.forwardRef((e,t)=>{const a=fO(Yi,e.__scopeTooltip),{forceMount:s=a.forceMount,side:n="top",...o}=e,i=mf(Yi,e.__scopeTooltip);return r.jsx(qr,{present:s||i.open,children:i.disableHoverableContent?r.jsx(Bw,{side:n,...o,ref:t}):r.jsx(hO,{side:n,...o,ref:t})})}),hO=u.forwardRef((e,t)=>{const a=mf(Yi,e.__scopeTooltip),s=Lw(Yi,e.__scopeTooltip),n=u.useRef(null),o=vt(t,n),[i,l]=u.useState(null),{trigger:c,onClose:d}=a,f=n.current,{onPointerInTransitChange:h}=s,p=u.useCallback(()=>{l(null),h(!1)},[h]),m=u.useCallback((_,g)=>{const x=_.currentTarget,y={x:_.clientX,y:_.clientY},v=xO(y,x.getBoundingClientRect()),b=yO(y,v),j=bO(g.getBoundingClientRect()),w=jO([...b,...j]);l(w),h(!0)},[h]);return u.useEffect(()=>()=>p(),[p]),u.useEffect(()=>{if(c&&f){const _=x=>m(x,f),g=x=>m(x,c);return c.addEventListener("pointerleave",_),f.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",_),f.removeEventListener("pointerleave",g)}}},[c,f,m,p]),u.useEffect(()=>{if(i){const _=g=>{const x=g.target,y={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(x))||(f==null?void 0:f.contains(x)),b=!_O(y,i);v?p():b&&(p(),d())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[c,f,i,d,p]),r.jsx(Bw,{...e,ref:o})}),[mO,pO]=hf(Fw,{isInside:!1}),gO=wj("TooltipContent"),Bw=u.forwardRef((e,t)=>{const{__scopeTooltip:a,children:s,"aria-label":n,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=mf(Yi,a),d=Hg(a),{onClose:f}=c;return u.useEffect(()=>(document.addEventListener(b0,f),()=>document.removeEventListener(b0,f)),[f]),u.useEffect(()=>{if(c.trigger){const h=p=>{const m=p.target;m!=null&&m.contains(c.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,f]),r.jsx(ol,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:r.jsxs(Ug,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(gO,{children:s}),r.jsx(mO,{scope:a,isInside:!0,children:r.jsx(_T,{id:c.contentId,role:"tooltip",children:n||s})})]})})});qw.displayName=Yi;var Uw="TooltipArrow",vO=u.forwardRef((e,t)=>{const{__scopeTooltip:a,...s}=e,n=Hg(a);return pO(Uw,a).isInside?null:r.jsx($g,{...n,...s,ref:t})});vO.displayName=Uw;function xO(e,t){const a=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(a,s,n,o)){case o:return"left";case n:return"right";case a:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function yO(e,t,a=5){const s=[];switch(t){case"top":s.push({x:e.x-a,y:e.y+a},{x:e.x+a,y:e.y+a});break;case"bottom":s.push({x:e.x-a,y:e.y-a},{x:e.x+a,y:e.y-a});break;case"left":s.push({x:e.x+a,y:e.y-a},{x:e.x+a,y:e.y+a});break;case"right":s.push({x:e.x-a,y:e.y-a},{x:e.x-a,y:e.y+a});break}return s}function bO(e){const{top:t,right:a,bottom:s,left:n}=e;return[{x:n,y:t},{x:a,y:t},{x:a,y:s},{x:n,y:s}]}function _O(e,t){const{x:a,y:s}=e;let n=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],d=l.x,f=l.y,h=c.x,p=c.y;f>s!=p>s&&a<(h-d)*(s-f)/(p-f)+d&&(n=!n)}return n}function jO(e){const t=e.slice();return t.sort((a,s)=>a.x<s.x?-1:a.x>s.x?1:a.y<s.y?-1:a.y>s.y?1:0),wO(t)}function wO(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const n=e[s];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(n.y-i.y)>=(o.y-i.y)*(n.x-i.x))t.pop();else break}t.push(n)}t.pop();const a=[];for(let s=e.length-1;s>=0;s--){const n=e[s];for(;a.length>=2;){const o=a[a.length-1],i=a[a.length-2];if((o.x-i.x)*(n.y-i.y)>=(o.y-i.y)*(n.x-i.x))a.pop();else break}a.push(n)}return a.pop(),t.length===1&&a.length===1&&t[0].x===a[0].x&&t[0].y===a[0].y?t:t.concat(a)}var SO=Iw,$w=qw;const EO=SO,NO=u.forwardRef(({className:e,sideOffset:t=4,...a},s)=>r.jsx($w,{ref:s,sideOffset:t,className:je("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a}));NO.displayName=$w.displayName;var pf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gf=typeof window>"u"||"Deno"in globalThis;function Ps(){}function CO(e,t){return typeof e=="function"?e(t):e}function AO(e){return typeof e=="number"&&e>=0&&e!==1/0}function TO(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Jm(e,t){return typeof e=="function"?e(t):e}function DO(e,t){return typeof e=="function"?e(t):e}function _0(e,t){const{type:a="all",exact:s,fetchStatus:n,predicate:o,queryKey:i,stale:l}=e;if(i){if(s){if(t.queryHash!==Vg(i,t.options))return!1}else if(!xc(t.queryKey,i))return!1}if(a!=="all"){const c=t.isActive();if(a==="active"&&!c||a==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||n&&n!==t.state.fetchStatus||o&&!o(t))}function j0(e,t){const{exact:a,status:s,predicate:n,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(a){if(vc(t.options.mutationKey)!==vc(o))return!1}else if(!xc(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||n&&!n(t))}function Vg(e,t){return((t==null?void 0:t.queryKeyHashFn)||vc)(e)}function vc(e){return JSON.stringify(e,(t,a)=>Wm(a)?Object.keys(a).sort().reduce((s,n)=>(s[n]=a[n],s),{}):a)}function xc(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(a=>xc(e[a],t[a])):!1}function Hw(e,t){if(e===t)return e;const a=w0(e)&&w0(t);if(a||Wm(e)&&Wm(t)){const s=a?e:Object.keys(e),n=s.length,o=a?t:Object.keys(t),i=o.length,l=a?[]:{},c=new Set(s);let d=0;for(let f=0;f<i;f++){const h=a?f:o[f];(!a&&c.has(h)||a)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,d++):(l[h]=Hw(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&d++)}return n===i&&d===n?e:l}return t}function w0(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Wm(e){if(!S0(e))return!1;const t=e.constructor;if(t===void 0)return!0;const a=t.prototype;return!(!S0(a)||!a.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function S0(e){return Object.prototype.toString.call(e)==="[object Object]"}function RO(e){return new Promise(t=>{setTimeout(t,e)})}function OO(e,t,a){return typeof a.structuralSharing=="function"?a.structuralSharing(e,t):a.structuralSharing!==!1?Hw(e,t):t}function zO(e,t,a=0){const s=[...e,t];return a&&s.length>a?s.slice(1):s}function MO(e,t,a=0){const s=[t,...e];return a&&s.length>a?s.slice(0,-1):s}var Gg=Symbol();function Vw(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Gg?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var to,un,Ci,py,PO=(py=class extends pf{constructor(){super();gt(this,to);gt(this,un);gt(this,Ci);Qe(this,Ci,t=>{if(!gf&&window.addEventListener){const a=()=>t();return window.addEventListener("visibilitychange",a,!1),()=>{window.removeEventListener("visibilitychange",a)}}})}onSubscribe(){re(this,un)||this.setEventListener(re(this,Ci))}onUnsubscribe(){var t;this.hasListeners()||((t=re(this,un))==null||t.call(this),Qe(this,un,void 0))}setEventListener(t){var a;Qe(this,Ci,t),(a=re(this,un))==null||a.call(this),Qe(this,un,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){re(this,to)!==t&&(Qe(this,to,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(a=>{a(t)})}isFocused(){var t;return typeof re(this,to)=="boolean"?re(this,to):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},to=new WeakMap,un=new WeakMap,Ci=new WeakMap,py),Gw=new PO,Ai,fn,Ti,gy,kO=(gy=class extends pf{constructor(){super();gt(this,Ai,!0);gt(this,fn);gt(this,Ti);Qe(this,Ti,t=>{if(!gf&&window.addEventListener){const a=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",a,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",s)}}})}onSubscribe(){re(this,fn)||this.setEventListener(re(this,Ti))}onUnsubscribe(){var t;this.hasListeners()||((t=re(this,fn))==null||t.call(this),Qe(this,fn,void 0))}setEventListener(t){var a;Qe(this,Ti,t),(a=re(this,fn))==null||a.call(this),Qe(this,fn,t(this.setOnline.bind(this)))}setOnline(t){re(this,Ai)!==t&&(Qe(this,Ai,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return re(this,Ai)}},Ai=new WeakMap,fn=new WeakMap,Ti=new WeakMap,gy),zu=new kO;function LO(){let e,t;const a=new Promise((n,o)=>{e=n,t=o});a.status="pending",a.catch(()=>{});function s(n){Object.assign(a,n),delete a.resolve,delete a.reject}return a.resolve=n=>{s({status:"fulfilled",value:n}),e(n)},a.reject=n=>{s({status:"rejected",reason:n}),t(n)},a}function IO(e){return Math.min(1e3*2**e,3e4)}function Yw(e){return(e??"online")==="online"?zu.isOnline():!0}var Qw=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Th(e){return e instanceof Qw}function Kw(e){let t=!1,a=0,s=!1,n;const o=LO(),i=g=>{var x;s||(p(new Qw(g)),(x=e.abort)==null||x.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>Gw.isFocused()&&(e.networkMode==="always"||zu.isOnline())&&e.canRun(),f=()=>Yw(e.networkMode)&&e.canRun(),h=g=>{var x;s||(s=!0,(x=e.onSuccess)==null||x.call(e,g),n==null||n(),o.resolve(g))},p=g=>{var x;s||(s=!0,(x=e.onError)==null||x.call(e,g),n==null||n(),o.reject(g))},m=()=>new Promise(g=>{var x;n=y=>{(s||d())&&g(y)},(x=e.onPause)==null||x.call(e)}).then(()=>{var g;n=void 0,s||(g=e.onContinue)==null||g.call(e)}),_=()=>{if(s)return;let g;const x=a===0?e.initialPromise:void 0;try{g=x??e.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var S;if(s)return;const v=e.retry??(gf?0:3),b=e.retryDelay??IO,j=typeof b=="function"?b(a,y):b,w=v===!0||typeof v=="number"&&a<v||typeof v=="function"&&v(a,y);if(t||!w){p(y);return}a++,(S=e.onFail)==null||S.call(e,a,y),RO(j).then(()=>d()?void 0:m()).then(()=>{t?p(y):_()})})};return{promise:o,cancel:i,continue:()=>(n==null||n(),o),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?_():m().then(_),o)}}var FO=e=>setTimeout(e,0);function qO(){let e=[],t=0,a=l=>{l()},s=l=>{l()},n=FO;const o=l=>{t?e.push(l):n(()=>{a(l)})},i=()=>{const l=e;e=[],l.length&&n(()=>{s(()=>{l.forEach(c=>{a(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{a=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{n=l}}}var Ia=qO(),ao,vy,Xw=(vy=class{constructor(){gt(this,ao)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),AO(this.gcTime)&&Qe(this,ao,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(gf?1/0:5*60*1e3))}clearGcTimeout(){re(this,ao)&&(clearTimeout(re(this,ao)),Qe(this,ao,void 0))}},ao=new WeakMap,vy),Di,so,ps,ro,Oa,jc,no,ks,xr,xy,BO=(xy=class extends Xw{constructor(t){super();gt(this,ks);gt(this,Di);gt(this,so);gt(this,ps);gt(this,ro);gt(this,Oa);gt(this,jc);gt(this,no);Qe(this,no,!1),Qe(this,jc,t.defaultOptions),this.setOptions(t.options),this.observers=[],Qe(this,ro,t.client),Qe(this,ps,re(this,ro).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Qe(this,Di,$O(this.options)),this.state=t.state??re(this,Di),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=re(this,Oa))==null?void 0:t.promise}setOptions(t){this.options={...re(this,jc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&re(this,ps).remove(this)}setData(t,a){const s=OO(this.state.data,t,this.options);return Da(this,ks,xr).call(this,{data:s,type:"success",dataUpdatedAt:a==null?void 0:a.updatedAt,manual:a==null?void 0:a.manual}),s}setState(t,a){Da(this,ks,xr).call(this,{type:"setState",state:t,setStateOptions:a})}cancel(t){var s,n;const a=(s=re(this,Oa))==null?void 0:s.promise;return(n=re(this,Oa))==null||n.cancel(t),a?a.then(Ps).catch(Ps):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(re(this,Di))}isActive(){return this.observers.some(t=>DO(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Gg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Jm(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!TO(this.state.dataUpdatedAt,t)}onFocus(){var a;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(a=re(this,Oa))==null||a.continue()}onOnline(){var a;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(a=re(this,Oa))==null||a.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),re(this,ps).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(a=>a!==t),this.observers.length||(re(this,Oa)&&(re(this,no)?re(this,Oa).cancel({revert:!0}):re(this,Oa).cancelRetry()),this.scheduleGc()),re(this,ps).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Da(this,ks,xr).call(this,{type:"invalidate"})}fetch(t,a){var d,f,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(a!=null&&a.cancelRefetch))this.cancel({silent:!0});else if(re(this,Oa))return re(this,Oa).continueRetry(),re(this,Oa).promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(m=>m.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,n=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Qe(this,no,!0),s.signal)})},o=()=>{const p=Vw(this.options,a),_=(()=>{const g={client:re(this,ro),queryKey:this.queryKey,meta:this.meta};return n(g),g})();return Qe(this,no,!1),this.options.persister?this.options.persister(p,_,this):p(_)},l=(()=>{const p={fetchOptions:a,options:this.options,queryKey:this.queryKey,client:re(this,ro),state:this.state,fetchFn:o};return n(p),p})();(d=this.options.behavior)==null||d.onFetch(l,this),Qe(this,so,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&Da(this,ks,xr).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=p=>{var m,_,g,x;Th(p)&&p.silent||Da(this,ks,xr).call(this,{type:"error",error:p}),Th(p)||((_=(m=re(this,ps).config).onError)==null||_.call(m,p,this),(x=(g=re(this,ps).config).onSettled)==null||x.call(g,this.state.data,p,this)),this.scheduleGc()};return Qe(this,Oa,Kw({initialPromise:a==null?void 0:a.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var m,_,g,x;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(y){c(y);return}(_=(m=re(this,ps).config).onSuccess)==null||_.call(m,p,this),(x=(g=re(this,ps).config).onSettled)==null||x.call(g,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,m)=>{Da(this,ks,xr).call(this,{type:"failed",failureCount:p,error:m})},onPause:()=>{Da(this,ks,xr).call(this,{type:"pause"})},onContinue:()=>{Da(this,ks,xr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),re(this,Oa).start()}},Di=new WeakMap,so=new WeakMap,ps=new WeakMap,ro=new WeakMap,Oa=new WeakMap,jc=new WeakMap,no=new WeakMap,ks=new WeakSet,xr=function(t){const a=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...UO(s.data,this.options),fetchMeta:t.meta??null};case"success":return Qe(this,so,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return Th(n)&&n.revert&&re(this,so)?{...re(this,so),fetchStatus:"idle"}:{...s,error:n,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=a(this.state),Ia.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),re(this,ps).notify({query:this,type:"updated",action:t})})},xy);function UO(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Yw(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function $O(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,a=t!==void 0,s=a?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:a?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}var Qs,yy,HO=(yy=class extends pf{constructor(t={}){super();gt(this,Qs);this.config=t,Qe(this,Qs,new Map)}build(t,a,s){const n=a.queryKey,o=a.queryHash??Vg(n,a);let i=this.get(o);return i||(i=new BO({client:t,queryKey:n,queryHash:o,options:t.defaultQueryOptions(a),state:s,defaultOptions:t.getQueryDefaults(n)}),this.add(i)),i}add(t){re(this,Qs).has(t.queryHash)||(re(this,Qs).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const a=re(this,Qs).get(t.queryHash);a&&(t.destroy(),a===t&&re(this,Qs).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ia.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return re(this,Qs).get(t)}getAll(){return[...re(this,Qs).values()]}find(t){const a={exact:!0,...t};return this.getAll().find(s=>_0(a,s))}findAll(t={}){const a=this.getAll();return Object.keys(t).length>0?a.filter(s=>_0(t,s)):a}notify(t){Ia.batch(()=>{this.listeners.forEach(a=>{a(t)})})}onFocus(){Ia.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ia.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Qs=new WeakMap,yy),Ks,La,oo,Xs,Wr,by,VO=(by=class extends Xw{constructor(t){super();gt(this,Xs);gt(this,Ks);gt(this,La);gt(this,oo);this.mutationId=t.mutationId,Qe(this,La,t.mutationCache),Qe(this,Ks,[]),this.state=t.state||GO(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){re(this,Ks).includes(t)||(re(this,Ks).push(t),this.clearGcTimeout(),re(this,La).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Qe(this,Ks,re(this,Ks).filter(a=>a!==t)),this.scheduleGc(),re(this,La).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){re(this,Ks).length||(this.state.status==="pending"?this.scheduleGc():re(this,La).remove(this))}continue(){var t;return((t=re(this,oo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,i,l,c,d,f,h,p,m,_,g,x,y,v,b,j,w,S,N,C;const a=()=>{Da(this,Xs,Wr).call(this,{type:"continue"})};Qe(this,oo,Kw({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(P,R)=>{Da(this,Xs,Wr).call(this,{type:"failed",failureCount:P,error:R})},onPause:()=>{Da(this,Xs,Wr).call(this,{type:"pause"})},onContinue:a,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>re(this,La).canRun(this)}));const s=this.state.status==="pending",n=!re(this,oo).canStart();try{if(s)a();else{Da(this,Xs,Wr).call(this,{type:"pending",variables:t,isPaused:n}),await((i=(o=re(this,La).config).onMutate)==null?void 0:i.call(o,t,this));const R=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));R!==this.state.context&&Da(this,Xs,Wr).call(this,{type:"pending",context:R,variables:t,isPaused:n})}const P=await re(this,oo).start();return await((f=(d=re(this,La).config).onSuccess)==null?void 0:f.call(d,P,t,this.state.context,this)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,P,t,this.state.context)),await((_=(m=re(this,La).config).onSettled)==null?void 0:_.call(m,P,null,this.state.variables,this.state.context,this)),await((x=(g=this.options).onSettled)==null?void 0:x.call(g,P,null,t,this.state.context)),Da(this,Xs,Wr).call(this,{type:"success",data:P}),P}catch(P){try{throw await((v=(y=re(this,La).config).onError)==null?void 0:v.call(y,P,t,this.state.context,this)),await((j=(b=this.options).onError)==null?void 0:j.call(b,P,t,this.state.context)),await((S=(w=re(this,La).config).onSettled)==null?void 0:S.call(w,void 0,P,this.state.variables,this.state.context,this)),await((C=(N=this.options).onSettled)==null?void 0:C.call(N,void 0,P,t,this.state.context)),P}finally{Da(this,Xs,Wr).call(this,{type:"error",error:P})}}finally{re(this,La).runNext(this)}}},Ks=new WeakMap,La=new WeakMap,oo=new WeakMap,Xs=new WeakSet,Wr=function(t){const a=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=a(this.state),Ia.batch(()=>{re(this,Ks).forEach(s=>{s.onMutationUpdate(t)}),re(this,La).notify({mutation:this,type:"updated",action:t})})},by);function GO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _r,Ls,wc,_y,YO=(_y=class extends pf{constructor(t={}){super();gt(this,_r);gt(this,Ls);gt(this,wc);this.config=t,Qe(this,_r,new Set),Qe(this,Ls,new Map),Qe(this,wc,0)}build(t,a,s){const n=new VO({mutationCache:this,mutationId:++td(this,wc)._,options:t.defaultMutationOptions(a),state:s});return this.add(n),n}add(t){re(this,_r).add(t);const a=_d(t);if(typeof a=="string"){const s=re(this,Ls).get(a);s?s.push(t):re(this,Ls).set(a,[t])}this.notify({type:"added",mutation:t})}remove(t){if(re(this,_r).delete(t)){const a=_d(t);if(typeof a=="string"){const s=re(this,Ls).get(a);if(s)if(s.length>1){const n=s.indexOf(t);n!==-1&&s.splice(n,1)}else s[0]===t&&re(this,Ls).delete(a)}}this.notify({type:"removed",mutation:t})}canRun(t){const a=_d(t);if(typeof a=="string"){const s=re(this,Ls).get(a),n=s==null?void 0:s.find(o=>o.state.status==="pending");return!n||n===t}else return!0}runNext(t){var s;const a=_d(t);if(typeof a=="string"){const n=(s=re(this,Ls).get(a))==null?void 0:s.find(o=>o!==t&&o.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ia.batch(()=>{re(this,_r).forEach(t=>{this.notify({type:"removed",mutation:t})}),re(this,_r).clear(),re(this,Ls).clear()})}getAll(){return Array.from(re(this,_r))}find(t){const a={exact:!0,...t};return this.getAll().find(s=>j0(a,s))}findAll(t={}){return this.getAll().filter(a=>j0(t,a))}notify(t){Ia.batch(()=>{this.listeners.forEach(a=>{a(t)})})}resumePausedMutations(){const t=this.getAll().filter(a=>a.state.isPaused);return Ia.batch(()=>Promise.all(t.map(a=>a.continue().catch(Ps))))}},_r=new WeakMap,Ls=new WeakMap,wc=new WeakMap,_y);function _d(e){var t;return(t=e.options.scope)==null?void 0:t.id}function E0(e){return{onFetch:(t,a)=>{var f,h,p,m,_;const s=t.options,n=(p=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,o=((m=t.state.data)==null?void 0:m.pages)||[],i=((_=t.state.data)==null?void 0:_.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const x=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},y=Vw(t.options,t.fetchOptions),v=async(b,j,w)=>{if(g)return Promise.reject();if(j==null&&b.pages.length)return Promise.resolve(b);const N=(()=>{const Q={client:t.client,queryKey:t.queryKey,pageParam:j,direction:w?"backward":"forward",meta:t.options.meta};return x(Q),Q})(),C=await y(N),{maxPages:P}=t.options,R=w?MO:zO;return{pages:R(b.pages,C,P),pageParams:R(b.pageParams,j,P)}};if(n&&o.length){const b=n==="backward",j=b?QO:N0,w={pages:o,pageParams:i},S=j(s,w);l=await v(w,S,b)}else{const b=e??o.length;do{const j=c===0?i[0]??s.initialPageParam:N0(s,l);if(c>0&&j==null)break;l=await v(l,j),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var g,x;return(x=(g=t.options).persister)==null?void 0:x.call(g,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},a)}:t.fetchFn=d}}}function N0(e,{pages:t,pageParams:a}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,a[s],a):void 0}function QO(e,{pages:t,pageParams:a}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,a[0],a):void 0}var aa,hn,mn,Ri,Oi,pn,zi,Mi,jy,KO=(jy=class{constructor(e={}){gt(this,aa);gt(this,hn);gt(this,mn);gt(this,Ri);gt(this,Oi);gt(this,pn);gt(this,zi);gt(this,Mi);Qe(this,aa,e.queryCache||new HO),Qe(this,hn,e.mutationCache||new YO),Qe(this,mn,e.defaultOptions||{}),Qe(this,Ri,new Map),Qe(this,Oi,new Map),Qe(this,pn,0)}mount(){td(this,pn)._++,re(this,pn)===1&&(Qe(this,zi,Gw.subscribe(async e=>{e&&(await this.resumePausedMutations(),re(this,aa).onFocus())})),Qe(this,Mi,zu.subscribe(async e=>{e&&(await this.resumePausedMutations(),re(this,aa).onOnline())})))}unmount(){var e,t;td(this,pn)._--,re(this,pn)===0&&((e=re(this,zi))==null||e.call(this),Qe(this,zi,void 0),(t=re(this,Mi))==null||t.call(this),Qe(this,Mi,void 0))}isFetching(e){return re(this,aa).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return re(this,hn).findAll({...e,status:"pending"}).length}getQueryData(e){var a;const t=this.defaultQueryOptions({queryKey:e});return(a=re(this,aa).get(t.queryHash))==null?void 0:a.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),a=re(this,aa).build(this,t),s=a.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&a.isStaleByTime(Jm(t.staleTime,a))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return re(this,aa).findAll(e).map(({queryKey:t,state:a})=>{const s=a.data;return[t,s]})}setQueryData(e,t,a){const s=this.defaultQueryOptions({queryKey:e}),n=re(this,aa).get(s.queryHash),o=n==null?void 0:n.state.data,i=CO(t,o);if(i!==void 0)return re(this,aa).build(this,s).setData(i,{...a,manual:!0})}setQueriesData(e,t,a){return Ia.batch(()=>re(this,aa).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,a)]))}getQueryState(e){var a;const t=this.defaultQueryOptions({queryKey:e});return(a=re(this,aa).get(t.queryHash))==null?void 0:a.state}removeQueries(e){const t=re(this,aa);Ia.batch(()=>{t.findAll(e).forEach(a=>{t.remove(a)})})}resetQueries(e,t){const a=re(this,aa);return Ia.batch(()=>(a.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const a={revert:!0,...t},s=Ia.batch(()=>re(this,aa).findAll(e).map(n=>n.cancel(a)));return Promise.all(s).then(Ps).catch(Ps)}invalidateQueries(e,t={}){return Ia.batch(()=>(re(this,aa).findAll(e).forEach(a=>{a.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const a={...t,cancelRefetch:t.cancelRefetch??!0},s=Ia.batch(()=>re(this,aa).findAll(e).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let o=n.fetch(void 0,a);return a.throwOnError||(o=o.catch(Ps)),n.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(Ps)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const a=re(this,aa).build(this,t);return a.isStaleByTime(Jm(t.staleTime,a))?a.fetch(t):Promise.resolve(a.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ps).catch(Ps)}fetchInfiniteQuery(e){return e.behavior=E0(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ps).catch(Ps)}ensureInfiniteQueryData(e){return e.behavior=E0(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return zu.isOnline()?re(this,hn).resumePausedMutations():Promise.resolve()}getQueryCache(){return re(this,aa)}getMutationCache(){return re(this,hn)}getDefaultOptions(){return re(this,mn)}setDefaultOptions(e){Qe(this,mn,e)}setQueryDefaults(e,t){re(this,Ri).set(vc(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...re(this,Ri).values()],a={};return t.forEach(s=>{xc(e,s.queryKey)&&Object.assign(a,s.defaultOptions)}),a}setMutationDefaults(e,t){re(this,Oi).set(vc(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...re(this,Oi).values()],a={};return t.forEach(s=>{xc(e,s.mutationKey)&&Object.assign(a,s.defaultOptions)}),a}defaultQueryOptions(e){if(e._defaulted)return e;const t={...re(this,mn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Vg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Gg&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...re(this,mn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){re(this,aa).clear(),re(this,hn).clear()}},aa=new WeakMap,hn=new WeakMap,mn=new WeakMap,Ri=new WeakMap,Oi=new WeakMap,pn=new WeakMap,zi=new WeakMap,Mi=new WeakMap,jy),XO=u.createContext(void 0),ZO=({client:e,children:t})=>(u.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(XO.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yc(){return yc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},yc.apply(this,arguments)}var bn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(bn||(bn={}));const C0="popstate";function JO(e){e===void 0&&(e={});function t(n,o){let{pathname:i="/",search:l="",hash:c=""}=Lo(n.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),ep("",{pathname:i,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function a(n,o){let i=n.document.querySelector("base"),l="";if(i&&i.getAttribute("href")){let c=n.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof o=="string"?o:Mu(o))}function s(n,o){Yg(n.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return ez(t,a,s,e)}function fa(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Yg(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function WO(){return Math.random().toString(36).substr(2,8)}function A0(e,t){return{usr:e.state,key:e.key,idx:t}}function ep(e,t,a,s){return a===void 0&&(a=null),yc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Lo(t):t,{state:a,key:t&&t.key||s||WO()})}function Mu(e){let{pathname:t="/",search:a="",hash:s=""}=e;return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Lo(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substr(a),e=e.substr(0,a));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function ez(e,t,a,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:o=!1}=s,i=n.history,l=bn.Pop,c=null,d=f();d==null&&(d=0,i.replaceState(yc({},i.state,{idx:d}),""));function f(){return(i.state||{idx:null}).idx}function h(){l=bn.Pop;let x=f(),y=x==null?null:x-d;d=x,c&&c({action:l,location:g.location,delta:y})}function p(x,y){l=bn.Push;let v=ep(g.location,x,y);a&&a(v,x),d=f()+1;let b=A0(v,d),j=g.createHref(v);try{i.pushState(b,"",j)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;n.location.assign(j)}o&&c&&c({action:l,location:g.location,delta:1})}function m(x,y){l=bn.Replace;let v=ep(g.location,x,y);a&&a(v,x),d=f();let b=A0(v,d),j=g.createHref(v);i.replaceState(b,"",j),o&&c&&c({action:l,location:g.location,delta:0})}function _(x){let y=n.location.origin!=="null"?n.location.origin:n.location.href,v=typeof x=="string"?x:Mu(x);return v=v.replace(/ $/,"%20"),fa(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let g={get action(){return l},get location(){return e(n,i)},listen(x){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(C0,h),c=x,()=>{n.removeEventListener(C0,h),c=null}},createHref(x){return t(n,x)},createURL:_,encodeLocation(x){let y=_(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:m,go(x){return i.go(x)}};return g}var T0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(T0||(T0={}));function tz(e,t,a){return a===void 0&&(a="/"),az(e,t,a)}function az(e,t,a,s){let n=typeof t=="string"?Lo(t):t,o=Qg(n.pathname||"/",a);if(o==null)return null;let i=Zw(e);sz(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=pz(o);l=fz(i[c],d)}return l}function Zw(e,t,a,s){t===void 0&&(t=[]),a===void 0&&(a=[]),s===void 0&&(s="");let n=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(fa(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=Tn([s,c.relativePath]),f=a.concat(c);o.children&&o.children.length>0&&(fa(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Zw(o.children,t,f,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:dz(d,o.index),routesMeta:f})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))n(o,i);else for(let c of Jw(o.path))n(o,i,c)}),t}function Jw(e){let t=e.split("/");if(t.length===0)return[];let[a,...s]=t,n=a.endsWith("?"),o=a.replace(/\?$/,"");if(s.length===0)return n?[o,""]:[o];let i=Jw(s.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),n&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function sz(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:uz(t.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}const rz=/^:[\w-]+$/,nz=3,oz=2,iz=1,lz=10,cz=-2,D0=e=>e==="*";function dz(e,t){let a=e.split("/"),s=a.length;return a.some(D0)&&(s+=cz),t&&(s+=oz),a.filter(n=>!D0(n)).reduce((n,o)=>n+(rz.test(o)?nz:o===""?iz:lz),s)}function uz(e,t){return e.length===t.length&&e.slice(0,-1).every((s,n)=>s===t[n])?e[e.length-1]-t[t.length-1]:0}function fz(e,t,a){let{routesMeta:s}=e,n={},o="/",i=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,f=o==="/"?t:t.slice(o.length)||"/",h=hz({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),p=c.route;if(!h)return null;Object.assign(n,h.params),i.push({params:n,pathname:Tn([o,h.pathname]),pathnameBase:yz(Tn([o,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(o=Tn([o,h.pathnameBase]))}return i}function hz(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,s]=mz(e.path,e.caseSensitive,e.end),n=t.match(a);if(!n)return null;let o=n[0],i=o.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((d,f,h)=>{let{paramName:p,isOptional:m}=f;if(p==="*"){let g=l[h]||"";i=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const _=l[h];return m&&!_?d[p]=void 0:d[p]=(_||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:e}}function mz(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!0),Yg(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}function pz(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Yg(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Qg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,s=e.charAt(a);return s&&s!=="/"?null:e.slice(a)||"/"}function gz(e,t){t===void 0&&(t="/");let{pathname:a,search:s="",hash:n=""}=typeof e=="string"?Lo(e):e;return{pathname:a?a.startsWith("/")?a:vz(a,t):t,search:bz(s),hash:_z(n)}}function vz(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?a.length>1&&a.pop():n!=="."&&a.push(n)}),a.length>1?a.join("/"):"/"}function Dh(e,t,a,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xz(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function Ww(e,t){let a=xz(e);return t?a.map((s,n)=>n===a.length-1?s.pathname:s.pathnameBase):a.map(s=>s.pathnameBase)}function eS(e,t,a,s){s===void 0&&(s=!1);let n;typeof e=="string"?n=Lo(e):(n=yc({},e),fa(!n.pathname||!n.pathname.includes("?"),Dh("?","pathname","search",n)),fa(!n.pathname||!n.pathname.includes("#"),Dh("#","pathname","hash",n)),fa(!n.search||!n.search.includes("#"),Dh("#","search","hash",n)));let o=e===""||n.pathname==="",i=o?"/":n.pathname,l;if(i==null)l=a;else{let h=t.length-1;if(!s&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),h-=1;n.pathname=p.join("/")}l=h>=0?t[h]:"/"}let c=gz(n,l),d=i&&i!=="/"&&i.endsWith("/"),f=(o||i===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const Tn=e=>e.join("/").replace(/\/\/+/g,"/"),yz=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bz=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_z=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function jz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const tS=["post","put","patch","delete"];new Set(tS);const wz=["get",...tS];new Set(wz);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bc(){return bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},bc.apply(this,arguments)}const Kg=u.createContext(null),Sz=u.createContext(null),Io=u.createContext(null),vf=u.createContext(null),Br=u.createContext({outlet:null,matches:[],isDataRoute:!1}),aS=u.createContext(null);function Ez(e,t){let{relative:a}=t===void 0?{}:t;$c()||fa(!1);let{basename:s,navigator:n}=u.useContext(Io),{hash:o,pathname:i,search:l}=rS(e,{relative:a}),c=i;return s!=="/"&&(c=i==="/"?s:Tn([s,i])),n.createHref({pathname:c,search:l,hash:o})}function $c(){return u.useContext(vf)!=null}function Hc(){return $c()||fa(!1),u.useContext(vf).location}function sS(e){u.useContext(Io).static||u.useLayoutEffect(e)}function Aa(){let{isDataRoute:e}=u.useContext(Br);return e?qz():Nz()}function Nz(){$c()||fa(!1);let e=u.useContext(Kg),{basename:t,future:a,navigator:s}=u.useContext(Io),{matches:n}=u.useContext(Br),{pathname:o}=Hc(),i=JSON.stringify(Ww(n,a.v7_relativeSplatPath)),l=u.useRef(!1);return sS(()=>{l.current=!0}),u.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let h=eS(d,JSON.parse(i),o,f.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Tn([t,h.pathname])),(f.replace?s.replace:s.push)(h,f.state,f)},[t,s,i,o,e])}const Cz=u.createContext(null);function Az(e){let t=u.useContext(Br).outlet;return t&&u.createElement(Cz.Provider,{value:e},t)}function Ur(){let{matches:e}=u.useContext(Br),t=e[e.length-1];return t?t.params:{}}function rS(e,t){let{relative:a}=t===void 0?{}:t,{future:s}=u.useContext(Io),{matches:n}=u.useContext(Br),{pathname:o}=Hc(),i=JSON.stringify(Ww(n,s.v7_relativeSplatPath));return u.useMemo(()=>eS(e,JSON.parse(i),o,a==="path"),[e,i,o,a])}function Tz(e,t){return Dz(e,t)}function Dz(e,t,a,s){$c()||fa(!1);let{navigator:n}=u.useContext(Io),{matches:o}=u.useContext(Br),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Hc(),f;if(t){var h;let x=typeof t=="string"?Lo(t):t;c==="/"||(h=x.pathname)!=null&&h.startsWith(c)||fa(!1),f=x}else f=d;let p=f.pathname||"/",m=p;if(c!=="/"){let x=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let _=tz(e,{pathname:m}),g=Pz(_&&_.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Tn([c,n.encodeLocation?n.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Tn([c,n.encodeLocation?n.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,a,s);return t&&g?u.createElement(vf.Provider,{value:{location:bc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:bn.Pop}},g):g}function Rz(){let e=Fz(),t=jz(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),a?u.createElement("pre",{style:n},a):null,null)}const Oz=u.createElement(Rz,null);class zz extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?u.createElement(Br.Provider,{value:this.props.routeContext},u.createElement(aS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mz(e){let{routeContext:t,match:a,children:s}=e,n=u.useContext(Kg);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),u.createElement(Br.Provider,{value:t},s)}function Pz(e,t,a,s){var n;if(t===void 0&&(t=[]),a===void 0&&(a=null),s===void 0&&(s=null),e==null){var o;if(!a)return null;if(a.errors)e=a.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let i=e,l=(n=a)==null?void 0:n.errors;if(l!=null){let f=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);f>=0||fa(!1),i=i.slice(0,Math.min(i.length,f+1))}let c=!1,d=-1;if(a&&s&&s.v7_partialHydration)for(let f=0;f<i.length;f++){let h=i[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=f),h.route.id){let{loaderData:p,errors:m}=a,_=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||_){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((f,h,p)=>{let m,_=!1,g=null,x=null;a&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||Oz,c&&(d<0&&p===0?(Bz("route-fallback"),_=!0,x=null):d===p&&(_=!0,x=h.route.hydrateFallbackElement||null)));let y=t.concat(i.slice(0,p+1)),v=()=>{let b;return m?b=g:_?b=x:h.route.Component?b=u.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=f,u.createElement(Mz,{match:h,routeContext:{outlet:f,matches:y,isDataRoute:a!=null},children:b})};return a&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?u.createElement(zz,{location:a.location,revalidation:a.revalidation,component:g,error:m,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var nS=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(nS||{}),oS=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(oS||{});function kz(e){let t=u.useContext(Kg);return t||fa(!1),t}function Lz(e){let t=u.useContext(Sz);return t||fa(!1),t}function Iz(e){let t=u.useContext(Br);return t||fa(!1),t}function iS(e){let t=Iz(),a=t.matches[t.matches.length-1];return a.route.id||fa(!1),a.route.id}function Fz(){var e;let t=u.useContext(aS),a=Lz(),s=iS();return t!==void 0?t:(e=a.errors)==null?void 0:e[s]}function qz(){let{router:e}=kz(nS.UseNavigateStable),t=iS(oS.UseNavigateStable),a=u.useRef(!1);return sS(()=>{a.current=!0}),u.useCallback(function(n,o){o===void 0&&(o={}),a.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,bc({fromRouteId:t},o)))},[e,t])}const R0={};function Bz(e,t,a){R0[e]||(R0[e]=!0)}function Uz(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function $z(e){return Az(e.context)}function Dt(e){fa(!1)}function Hz(e){let{basename:t="/",children:a=null,location:s,navigationType:n=bn.Pop,navigator:o,static:i=!1,future:l}=e;$c()&&fa(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:o,static:i,future:bc({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof s=="string"&&(s=Lo(s));let{pathname:f="/",search:h="",hash:p="",state:m=null,key:_="default"}=s,g=u.useMemo(()=>{let x=Qg(f,c);return x==null?null:{location:{pathname:x,search:h,hash:p,state:m,key:_},navigationType:n}},[c,f,h,p,m,_,n]);return g==null?null:u.createElement(Io.Provider,{value:d},u.createElement(vf.Provider,{children:a,value:g}))}function Vz(e){let{children:t,location:a}=e;return Tz(tp(t),a)}new Promise(()=>{});function tp(e,t){t===void 0&&(t=[]);let a=[];return u.Children.forEach(e,(s,n)=>{if(!u.isValidElement(s))return;let o=[...t,n];if(s.type===u.Fragment){a.push.apply(a,tp(s.props.children,o));return}s.type!==Dt&&fa(!1),!s.props.index||!s.props.children||fa(!1);let i={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=tp(s.props.children,o)),a.push(i)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ap(){return ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ap.apply(this,arguments)}function Gz(e,t){if(e==null)return{};var a={},s=Object.keys(e),n,o;for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&(a[n]=e[n]);return a}function Yz(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Qz(e,t){return e.button===0&&(!t||t==="_self")&&!Yz(e)}const Kz=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Xz="6";try{window.__reactRouterVersion=Xz}catch{}const Zz="startTransition",O0=Ep[Zz];function Jz(e){let{basename:t,children:a,future:s,window:n}=e,o=u.useRef();o.current==null&&(o.current=JO({window:n,v5Compat:!0}));let i=o.current,[l,c]=u.useState({action:i.action,location:i.location}),{v7_startTransition:d}=s||{},f=u.useCallback(h=>{d&&O0?O0(()=>c(h)):c(h)},[c,d]);return u.useLayoutEffect(()=>i.listen(f),[i,f]),u.useEffect(()=>Uz(s),[s]),u.createElement(Hz,{basename:t,children:a,location:l.location,navigationType:l.action,navigator:i,future:s})}const Wz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qi=u.forwardRef(function(t,a){let{onClick:s,relative:n,reloadDocument:o,replace:i,state:l,target:c,to:d,preventScrollReset:f,viewTransition:h}=t,p=Gz(t,Kz),{basename:m}=u.useContext(Io),_,g=!1;if(typeof d=="string"&&eM.test(d)&&(_=d,Wz))try{let b=new URL(window.location.href),j=d.startsWith("//")?new URL(b.protocol+d):new URL(d),w=Qg(j.pathname,m);j.origin===b.origin&&w!=null?d=w+j.search+j.hash:g=!0}catch{}let x=Ez(d,{relative:n}),y=tM(d,{replace:i,state:l,target:c,preventScrollReset:f,relative:n,viewTransition:h});function v(b){s&&s(b),b.defaultPrevented||y(b)}return u.createElement("a",ap({},p,{href:_||x,onClick:g||o?s:v,ref:a,target:c}))});var z0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(z0||(z0={}));var M0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(M0||(M0={}));function tM(e,t){let{target:a,replace:s,state:n,preventScrollReset:o,relative:i,viewTransition:l}=t===void 0?{}:t,c=Aa(),d=Hc(),f=rS(e,{relative:i});return u.useCallback(h=>{if(Qz(h,a)){h.preventDefault();let p=s!==void 0?s:Mu(d)===Mu(f);c(e,{replace:p,state:n,preventScrollReset:o,relative:i,viewTransition:l})}},[d,c,f,s,n,a,e,o,i,l])}const aM=[{path:"/",label:"Dashboard",icon:ZT},{path:"/clientes",label:"Clientes",icon:sD},{path:"/fazendas",label:"Fazendas",icon:tw},{path:"/doadoras",label:"Doadoras",icon:po},{path:"/receptoras",label:"Receptoras",icon:Jj},{path:"/protocolos",label:"Protocolos",icon:Rg},{path:"/aspiracoes",label:"Aspiraes",icon:Nu},{path:"/doses-semen",label:"Doses de Smen",icon:po},{path:"/lotes-fiv",label:"Lotes FIV",icon:Nu},{path:"/embrioes",label:"Embries/Estoque",icon:po},{path:"/transferencia",label:"Transferncia (TE)",icon:of},{path:"/dg",label:"DG",icon:Dg},{path:"/sexagem",label:"Sexagem",icon:Sg}];function sM(){const e=Hc();return r.jsxs("div",{className:"w-64 bg-slate-900 text-white min-h-screen p-4 flex flex-col",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-green-400",children:"FIV/TE Bovina"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Sistema de Controle"})]}),r.jsx("nav",{className:"flex-1 space-y-1",children:aM.map(t=>{const a=t.icon,s=e.pathname===t.path;return r.jsxs(Qi,{to:t.path,className:je("flex items-center gap-3 px-3 py-2 rounded-lg transition-colors",s?"bg-green-600 text-white":"text-slate-300 hover:bg-slate-800 hover:text-white"),children:[r.jsx(a,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:t.label})]},t.path)})}),r.jsx("div",{className:"pt-4 border-t border-slate-800",children:r.jsx("p",{className:"text-xs text-slate-500 text-center",children:" 2024 FIV/TE System"})})]})}function rM(){return r.jsxs("div",{className:"flex min-h-screen bg-slate-50",children:[r.jsx(sM,{}),r.jsx("main",{className:"flex-1 p-8",children:r.jsx($z,{})})]})}const Ee=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:je("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Ee.displayName="Card";const Re=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:je("flex flex-col space-y-1.5 p-6",e),...t}));Re.displayName="CardHeader";const Oe=u.forwardRef(({className:e,...t},a)=>r.jsx("h3",{ref:a,className:je("text-2xl font-semibold leading-none tracking-tight",e),...t}));Oe.displayName="CardTitle";const Ol=u.forwardRef(({className:e,...t},a)=>r.jsx("p",{ref:a,className:je("text-sm text-muted-foreground",e),...t}));Ol.displayName="CardDescription";const Ne=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:je("p-6 pt-0",e),...t}));Ne.displayName="CardContent";const nM=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:je("flex items-center p-6 pt-0",e),...t}));nM.displayName="CardFooter";const Xg=il("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),G=u.forwardRef(({className:e,variant:t,size:a,asChild:s=!1,...n},o)=>{const i=s?J2:"button";return r.jsx(i,{className:je(Xg({variant:t,size:a,className:e})),ref:o,...n})});G.displayName="Button";const oM="modulepreload",iM=function(e){return"/Passagene/"+e},P0={},Vc=function(t,a,s){let n=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(a.map(c=>{if(c=iM(c),c in P0)return;P0[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":oM,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return n.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},lM=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...a)=>Vc(async()=>{const{default:s}=await Promise.resolve().then(()=>fl);return{default:s}},void 0).then(({default:s})=>s(...a)):t=fetch,(...a)=>t(...a)};class Zg extends Error{constructor(t,a="FunctionsError",s){super(t),this.name=a,this.context=s}}class cM extends Zg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class k0 extends Zg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class L0 extends Zg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var sp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(sp||(sp={}));var dM=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class uM{constructor(t,{headers:a={},customFetch:s,region:n=sp.Any}={}){this.url=t,this.headers=a,this.region=n,this.fetch=lM(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,a={}){var s;return dM(this,void 0,void 0,function*(){try{const{headers:n,method:o,body:i}=a;let l={},{region:c}=a;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let f;i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=i):typeof i=="string"?(l["Content-Type"]="text/plain",f=i):typeof FormData<"u"&&i instanceof FormData?f=i:(l["Content-Type"]="application/json",f=JSON.stringify(i)));const h=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:f}).catch(g=>{throw new cM(g)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new k0(h);if(!h.ok)throw new L0(h);let m=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return m==="application/json"?_=yield h.json():m==="application/octet-stream"?_=yield h.blob():m==="text/event-stream"?_=h:m==="multipart/form-data"?_=yield h.formData():_=yield h.text(),{data:_,error:null,response:h}}catch(n){return{data:null,error:n,response:n instanceof L0||n instanceof k0?n.context:void 0}}})}}var Ka={},Jg={},xf={},Gc={},yf={},bf={},fM=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ki=fM();const hM=Ki.fetch,lS=Ki.fetch.bind(Ki),cS=Ki.Headers,mM=Ki.Request,pM=Ki.Response,fl=Object.freeze(Object.defineProperty({__proto__:null,Headers:cS,Request:mM,Response:pM,default:lS,fetch:hM},Symbol.toStringTag,{value:"Module"})),gM=v1(fl);var _f={};Object.defineProperty(_f,"__esModule",{value:!0});let vM=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};_f.default=vM;var dS=ws&&ws.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bf,"__esModule",{value:!0});const xM=dS(gM),yM=dS(_f);let bM=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=xM.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,a){return this.headers=Object.assign({},this.headers),this.headers[t]=a,this}then(t,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,l,c;let d=null,f=null,h=null,p=o.status,m=o.statusText;if(o.ok){if(this.method!=="HEAD"){const y=await o.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=y:f=JSON.parse(y))}const g=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),x=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");g&&x&&x.length>1&&(h=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,p=406,m="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const g=await o.text();try{d=JSON.parse(g),Array.isArray(d)&&o.status===404&&(f=[],d=null,p=200,m="OK")}catch{o.status===404&&g===""?(p=204,m="No Content"):d={message:g}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,p=200,m="OK"),d&&this.shouldThrowOnError)throw new yM.default(d)}return{error:d,data:f,count:h,status:p,statusText:m}});return this.shouldThrowOnError||(n=n.catch(o=>{var i,l,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,a)}returns(){return this}overrideTypes(){return this}};bf.default=bM;var _M=ws&&ws.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yf,"__esModule",{value:!0});const jM=_M(bf);let wM=class extends jM.default{select(t){let a=!1;const s=(t??"*").split("").map(n=>/\s/.test(n)&&!a?"":(n==='"'&&(a=!a),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:a=!0,nullsFirst:s,foreignTable:n,referencedTable:o=n}={}){const i=o?`${o}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${t}.${a?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:a,referencedTable:s=a}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,a,{foreignTable:s,referencedTable:n=s}={}){const o=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${a-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:a=!1,settings:s=!1,buffers:n=!1,wal:o=!1,format:i="text"}={}){var l;const c=[t?"analyze":null,a?"verbose":null,s?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${d}"; options=${c};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};yf.default=wM;var SM=ws&&ws.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gc,"__esModule",{value:!0});const EM=SM(yf);let NM=class extends EM.default{eq(t,a){return this.url.searchParams.append(t,`eq.${a}`),this}neq(t,a){return this.url.searchParams.append(t,`neq.${a}`),this}gt(t,a){return this.url.searchParams.append(t,`gt.${a}`),this}gte(t,a){return this.url.searchParams.append(t,`gte.${a}`),this}lt(t,a){return this.url.searchParams.append(t,`lt.${a}`),this}lte(t,a){return this.url.searchParams.append(t,`lte.${a}`),this}like(t,a){return this.url.searchParams.append(t,`like.${a}`),this}likeAllOf(t,a){return this.url.searchParams.append(t,`like(all).{${a.join(",")}}`),this}likeAnyOf(t,a){return this.url.searchParams.append(t,`like(any).{${a.join(",")}}`),this}ilike(t,a){return this.url.searchParams.append(t,`ilike.${a}`),this}ilikeAllOf(t,a){return this.url.searchParams.append(t,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(t,a){return this.url.searchParams.append(t,`ilike(any).{${a.join(",")}}`),this}is(t,a){return this.url.searchParams.append(t,`is.${a}`),this}in(t,a){const s=Array.from(new Set(a)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cs.{${a.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(a)}`),this}containedBy(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cd.{${a.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(a)}`),this}rangeGt(t,a){return this.url.searchParams.append(t,`sr.${a}`),this}rangeGte(t,a){return this.url.searchParams.append(t,`nxl.${a}`),this}rangeLt(t,a){return this.url.searchParams.append(t,`sl.${a}`),this}rangeLte(t,a){return this.url.searchParams.append(t,`nxr.${a}`),this}rangeAdjacent(t,a){return this.url.searchParams.append(t,`adj.${a}`),this}overlaps(t,a){return typeof a=="string"?this.url.searchParams.append(t,`ov.${a}`):this.url.searchParams.append(t,`ov.{${a.join(",")}}`),this}textSearch(t,a,{config:s,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const i=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${o}fts${i}.${a}`),this}match(t){return Object.entries(t).forEach(([a,s])=>{this.url.searchParams.append(a,`eq.${s}`)}),this}not(t,a,s){return this.url.searchParams.append(t,`not.${a}.${s}`),this}or(t,{foreignTable:a,referencedTable:s=a}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,a,s){return this.url.searchParams.append(t,`${a}.${s}`),this}};Gc.default=NM;var CM=ws&&ws.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xf,"__esModule",{value:!0});const Cl=CM(Gc);let AM=class{constructor(t,{headers:a={},schema:s,fetch:n}){this.url=t,this.headers=a,this.schema=s,this.fetch=n}select(t,{head:a=!1,count:s}={}){const n=a?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),s&&(this.headers.Prefer=`count=${s}`),new Cl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:a,defaultToNull:s=!0}={}){const n="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),a&&o.push(`count=${a}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const i=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Cl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:a,ignoreDuplicates:s=!1,count:n,defaultToNull:o=!0}={}){const i="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new Cl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:a}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),a&&n.push(`count=${a}`),this.headers.Prefer=n.join(","),new Cl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const a="DELETE",s=[];return t&&s.push(`count=${t}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Cl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};xf.default=AM;var jf={},wf={};Object.defineProperty(wf,"__esModule",{value:!0});wf.version=void 0;wf.version="0.0.0-automated";Object.defineProperty(jf,"__esModule",{value:!0});jf.DEFAULT_HEADERS=void 0;const TM=wf;jf.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${TM.version}`};var uS=ws&&ws.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jg,"__esModule",{value:!0});const DM=uS(xf),RM=uS(Gc),OM=jf;let zM=class fS{constructor(t,{headers:a={},schema:s,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},OM.DEFAULT_HEADERS),a),this.schemaName=s,this.fetch=n}from(t){const a=new URL(`${this.url}/${t}`);return new DM.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new fS(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,a={},{head:s=!1,get:n=!1,count:o}={}){let i;const l=new URL(`${this.url}/rpc/${t}`);let c;s||n?(i=s?"HEAD":"GET",Object.entries(a).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{l.searchParams.append(f,h)})):(i="POST",c=a);const d=Object.assign({},this.headers);return o&&(d.Prefer=`count=${o}`),new RM.default({method:i,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Jg.default=zM;var hl=ws&&ws.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.PostgrestError=Ka.PostgrestBuilder=Ka.PostgrestTransformBuilder=Ka.PostgrestFilterBuilder=Ka.PostgrestQueryBuilder=Ka.PostgrestClient=void 0;const hS=hl(Jg);Ka.PostgrestClient=hS.default;const mS=hl(xf);Ka.PostgrestQueryBuilder=mS.default;const pS=hl(Gc);Ka.PostgrestFilterBuilder=pS.default;const gS=hl(yf);Ka.PostgrestTransformBuilder=gS.default;const vS=hl(bf);Ka.PostgrestBuilder=vS.default;const xS=hl(_f);Ka.PostgrestError=xS.default;var MM=Ka.default={PostgrestClient:hS.default,PostgrestQueryBuilder:mS.default,PostgrestFilterBuilder:pS.default,PostgrestTransformBuilder:gS.default,PostgrestBuilder:vS.default,PostgrestError:xS.default};const{PostgrestClient:PM,PostgrestQueryBuilder:U5,PostgrestFilterBuilder:$5,PostgrestTransformBuilder:H5,PostgrestBuilder:V5,PostgrestError:G5}=MM;function kM(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const LM=kM(),IM="2.11.15",FM=`realtime-js/${IM}`,qM="1.0.0",yS=1e4,BM=1e3;var Zl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Zl||(Zl={}));var Ra;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ra||(Ra={}));var Fs;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Fs||(Fs={}));var rp;(function(e){e.websocket="websocket"})(rp||(rp={}));var eo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(eo||(eo={}));class UM{constructor(){this.HEADER_LENGTH=1}decode(t,a){return t.constructor===ArrayBuffer?a(this._binaryDecode(t)):a(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const a=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,a,s)}_decodeBroadcast(t,a,s){const n=a.getUint8(1),o=a.getUint8(2);let i=this.HEADER_LENGTH+2;const l=s.decode(t.slice(i,i+n));i=i+n;const c=s.decode(t.slice(i,i+o));i=i+o;const d=JSON.parse(s.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class bS{constructor(t,a){this.callback=t,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ht;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ht||(Ht={}));const I0=(e,t,a={})=>{var s;const n=(s=a.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((o,i)=>(o[i]=$M(i,e,t,n),o),{})},$M=(e,t,a,s)=>{const n=t.find(l=>l.name===e),o=n==null?void 0:n.type,i=a[e];return o&&!s.includes(o)?_S(o,i):np(i)},_S=(e,t)=>{if(e.charAt(0)==="_"){const a=e.slice(1,e.length);return YM(t,a)}switch(e){case Ht.bool:return HM(t);case Ht.float4:case Ht.float8:case Ht.int2:case Ht.int4:case Ht.int8:case Ht.numeric:case Ht.oid:return VM(t);case Ht.json:case Ht.jsonb:return GM(t);case Ht.timestamp:return QM(t);case Ht.abstime:case Ht.date:case Ht.daterange:case Ht.int4range:case Ht.int8range:case Ht.money:case Ht.reltime:case Ht.text:case Ht.time:case Ht.timestamptz:case Ht.timetz:case Ht.tsrange:case Ht.tstzrange:return np(t);default:return np(t)}},np=e=>e,HM=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},VM=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},GM=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},YM=(e,t)=>{if(typeof e!="string")return e;const a=e.length-1,s=e[a];if(e[0]==="{"&&s==="}"){let o;const i=e.slice(1,a);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>_S(t,l))}return e},QM=e=>typeof e=="string"?e.replace(" ","T"):e,jS=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Rh{constructor(t,a,s={},n=yS){this.channel=t,this.event=a,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,a){var s;return this._hasReceived(t)&&a((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:a}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(a))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var F0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(F0||(F0={}));class Jl{constructor(t,a){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jl.syncState(this.state,n,o,i),this.pendingDiffs.forEach(c=>{this.state=Jl.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Jl.syncDiff(this.state,n,o,i),l())}),this.onJoin((n,o,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:o,newPresences:i})}),this.onLeave((n,o,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,a,s,n){const o=this.cloneDeep(t),i=this.transformState(a),l={},c={};return this.map(o,(d,f)=>{i[d]||(c[d]=f)}),this.map(i,(d,f)=>{const h=o[d];if(h){const p=f.map(x=>x.presence_ref),m=h.map(x=>x.presence_ref),_=f.filter(x=>m.indexOf(x.presence_ref)<0),g=h.filter(x=>p.indexOf(x.presence_ref)<0);_.length>0&&(l[d]=_),g.length>0&&(c[d]=g)}else l[d]=f}),this.syncDiff(o,{joins:l,leaves:c},s,n)}static syncDiff(t,a,s,n){const{joins:o,leaves:i}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(o,(l,c)=>{var d;const f=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),f.length>0){const h=t[l].map(m=>m.presence_ref),p=f.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...p)}s(l,f,c)}),this.map(i,(l,c)=>{let d=t[l];if(!d)return;const f=c.map(h=>h.presence_ref);d=d.filter(h=>f.indexOf(h.presence_ref)<0),t[l]=d,n(l,d,c),d.length===0&&delete t[l]}),t}static map(t,a){return Object.getOwnPropertyNames(t).map(s=>a(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((a,s)=>{const n=t[s];return"metas"in n?a[s]=n.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):a[s]=n,a},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var q0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(q0||(q0={}));var B0;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(B0||(B0={}));var br;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(br||(br={}));class Wg{constructor(t,a={config:{}},s){this.topic=t,this.params=a,this.socket=s,this.bindings={},this.state=Ra.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new Rh(this,Fs.join,this.params,this.timeout),this.rejoinTimer=new bS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ra.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ra.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ra.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ra.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fs.reply,{},(n,o)=>{this._trigger(this._replyEventName(o),n)}),this.presence=new Jl(this),this.broadcastEndpointURL=jS(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,a=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==Ra.closed){const{config:{broadcast:o,presence:i,private:l}}=this.params;this._onError(f=>t==null?void 0:t(br.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(br.CLOSED));const c={},d={broadcast:o,presence:i,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(f=>f.filter))!==null&&n!==void 0?n:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:f})=>{var h;if(this.socket.setAuth(),f===void 0){t==null||t(br.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,m=(h=p==null?void 0:p.length)!==null&&h!==void 0?h:0,_=[];for(let g=0;g<m;g++){const x=p[g],{filter:{event:y,schema:v,table:b,filter:j}}=x,w=f&&f[g];if(w&&w.event===y&&w.schema===v&&w.table===b&&w.filter===j)_.push(Object.assign(Object.assign({},x),{id:w.id}));else{this.unsubscribe(),this.state=Ra.errored,t==null||t(br.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(br.SUBSCRIBED);return}}).receive("error",f=>{this.state=Ra.errored,t==null||t(br.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(br.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,a={}){return await this.send({type:"presence",event:"track",payload:t},a.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,a,s){return this._on(t,a,s)}async send(t,a={}){var s,n;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=a.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const d=this._push(t.type,t,a.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ra.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fs.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new Rh(this,Fs.leave,{},t),s.receive("ok",()=>{a(),n("ok")}).receive("timeout",()=>{a(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,a,s){const n=new AbortController,o=setTimeout(()=>n.abort(),s),i=await this.socket.fetch(t,Object.assign(Object.assign({},a),{signal:n.signal}));return clearTimeout(o),i}_push(t,a,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Rh(this,t,a,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,a,s){return a}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,a,s){var n,o;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:f}=Fs;if(s&&[l,c,d,f].indexOf(i)>=0&&s!==this._joinRef())return;let p=this._onMessage(i,a,s);if(a&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(m=>{var _,g,x;return((_=m.filter)===null||_===void 0?void 0:_.event)==="*"||((x=(g=m.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===i}).map(m=>m.callback(p,s)):(o=this.bindings[i])===null||o===void 0||o.filter(m=>{var _,g,x,y,v,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const j=m.id,w=(_=m.filter)===null||_===void 0?void 0:_.event;return j&&((g=a.ids)===null||g===void 0?void 0:g.includes(j))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((x=a.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const j=(v=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return j==="*"||j===((b=a==null?void 0:a.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof p=="object"&&"ids"in p){const _=p.data,{schema:g,table:x,commit_timestamp:y,type:v,errors:b}=_;p=Object.assign(Object.assign({},{schema:g,table:x,commit_timestamp:y,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(_))}m.callback(p,s)})}_isClosed(){return this.state===Ra.closed}_isJoined(){return this.state===Ra.joined}_isJoining(){return this.state===Ra.joining}_isLeaving(){return this.state===Ra.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,a,s){const n=t.toLocaleLowerCase(),o={type:n,filter:a,callback:s};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(t,a){const s=t.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var o;return!(((o=n.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&Wg.isEqual(n.filter,a))}),this}static isEqual(t,a){if(Object.keys(t).length!==Object.keys(a).length)return!1;for(const s in t)if(t[s]!==a[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Fs.close,{},t)}_onError(t){this._on(Fs.error,{},a=>t(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ra.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const a={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(a.new=I0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(a.old=I0(t.columns,t.old_record)),a}}const U0=()=>{},KM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class XM{constructor(t,a){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yS,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=U0,this.ref=0,this.logger=U0,this.conn=null,this.sendBuffer=[],this.serializer=new UM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...l)=>Vc(async()=>{const{default:c}=await Promise.resolve().then(()=>fl);return{default:c}},void 0).then(({default:c})=>c(...l)):i=fetch,(...l)=>i(...l)},this.endPoint=`${t}/${rp.websocket}`,this.httpEndpoint=jS(t),a!=null&&a.transport?this.transport=a.transport:this.transport=null,a!=null&&a.params&&(this.params=a.params),a!=null&&a.timeout&&(this.timeout=a.timeout),a!=null&&a.logger&&(this.logger=a.logger),(a!=null&&a.logLevel||a!=null&&a.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),a!=null&&a.heartbeatIntervalMs&&(this.heartbeatIntervalMs=a.heartbeatIntervalMs);const n=(s=a==null?void 0:a.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=a!=null&&a.reconnectAfterMs?a.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=a!=null&&a.encode?a.encode:(o,i)=>i(JSON.stringify(o)),this.decode=a!=null&&a.decode?a.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new bS(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(a==null?void 0:a.fetch),a!=null&&a.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(a==null?void 0:a.worker)||!1,this.workerUrl=a==null?void 0:a.workerUrl}this.accessToken=(a==null?void 0:a.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=LM),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:qM}))}disconnect(t,a){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,a??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(t){const a=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const t=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,a,s){this.logger(t,a,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Zl.connecting:return eo.Connecting;case Zl.open:return eo.Open;case Zl.closing:return eo.Closing;default:return eo.Closed}}isConnected(){return this.connectionState()===eo.Open}channel(t,a={config:{}}){const s=`realtime:${t}`,n=this.getChannels().find(o=>o.topic===s);if(n)return n;{const o=new Wg(`realtime:${t}`,a,this);return this.channels.push(o),o}}push(t){const{topic:a,event:s,payload:n,ref:o}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${a} ${s} (${o})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let a=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(s=>{const n={access_token:a,version:FM};a&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(Fs.access_token,{access_token:a})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(BM,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let a=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${t}"`),a.unsubscribe())}_remove(t){this.channels=this.channels.filter(a=>a.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,a=>{let{topic:s,event:n,payload:o,ref:i}=a;s==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(a.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${s} ${n} ${i&&"("+i+")"||""}`,o),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,o,i)),this.stateChangeCallbacks.message.forEach(l=>l(a))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(a=>a(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(a=>a(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Fs.error))}_appendParams(t,a){if(Object.keys(a).length===0)return t;const s=t.match(/\?/)?"&":"?",n=new URLSearchParams(a);return`${t}${s}${n}`}_workerObjectUrl(t){let a;if(t)a=t;else{const s=new Blob([KM],{type:"application/javascript"});a=URL.createObjectURL(s)}return a}}class ev extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function va(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class ZM extends ev{constructor(t,a){super(t),this.name="StorageApiError",this.status=a}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class op extends ev{constructor(t,a){super(t),this.name="StorageUnknownError",this.originalError=a}}var JM=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const wS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...a)=>Vc(async()=>{const{default:s}=await Promise.resolve().then(()=>fl);return{default:s}},void 0).then(({default:s})=>s(...a)):t=fetch,(...a)=>t(...a)},WM=()=>JM(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vc(()=>Promise.resolve().then(()=>fl),void 0)).Response:Response}),ip=e=>{if(Array.isArray(e))return e.map(a=>ip(a));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([a,s])=>{const n=a.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[n]=ip(s)}),t};var Fo=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const Oh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),e4=(e,t,a)=>Fo(void 0,void 0,void 0,function*(){const s=yield WM();e instanceof s&&!(a!=null&&a.noResolveJson)?e.json().then(n=>{t(new ZM(Oh(n),e.status||500))}).catch(n=>{t(new op(Oh(n),n))}):t(new op(Oh(e),e))}),t4=(e,t,a,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),a))};function Yc(e,t,a,s,n,o){return Fo(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(a,t4(t,s,n,o)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>e4(c,l,s))})})}function Pu(e,t,a,s){return Fo(this,void 0,void 0,function*(){return Yc(e,"GET",t,a,s)})}function rn(e,t,a,s,n){return Fo(this,void 0,void 0,function*(){return Yc(e,"POST",t,s,n,a)})}function a4(e,t,a,s,n){return Fo(this,void 0,void 0,function*(){return Yc(e,"PUT",t,s,n,a)})}function s4(e,t,a,s){return Fo(this,void 0,void 0,function*(){return Yc(e,"HEAD",t,Object.assign(Object.assign({},a),{noResolveJson:!0}),s)})}function SS(e,t,a,s,n){return Fo(this,void 0,void 0,function*(){return Yc(e,"DELETE",t,s,n,a)})}var Ha=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const r4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class n4{constructor(t,a={},s,n){this.url=t,this.headers=a,this.bucketId=s,this.fetch=wS(n)}uploadOrUpdate(t,a,s,n){return Ha(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},$0),n);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=s,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(a),f=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:t,body:o,headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{})),p=yield h.json();return h.ok?{data:{path:d,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(o){if(va(o))return{data:null,error:o};throw o}})}upload(t,a,s){return Ha(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,a,s)})}uploadToSignedUrl(t,a,s,n){return Ha(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",a);try{let c;const d=Object.assign({upsert:$0.upsert},n),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:f}),p=yield h.json();return h.ok?{data:{path:o,fullPath:p.Key},error:null}:{data:null,error:p}}catch(c){if(va(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,a){return Ha(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const n=Object.assign({},this.headers);a!=null&&a.upsert&&(n["x-upsert"]="true");const o=yield rn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new ev("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(s){if(va(s))return{data:null,error:s};throw s}})}update(t,a,s){return Ha(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,a,s)})}move(t,a,s){return Ha(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(va(n))return{data:null,error:n};throw n}})}copy(t,a,s){return Ha(this,void 0,void 0,function*(){try{return{data:{path:(yield rn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(va(n))return{data:null,error:n};throw n}})}createSignedUrl(t,a,s){return Ha(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),o=yield rn(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:a},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(n){if(va(n))return{data:null,error:n};throw n}})}createSignedUrls(t,a,s){return Ha(this,void 0,void 0,function*(){try{const n=yield rn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:t},{headers:this.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(n){if(va(n))return{data:null,error:n};throw n}})}download(t,a){return Ha(this,void 0,void 0,function*(){const n=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),i=o?`?${o}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Pu(this.fetch,`${this.url}/${n}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(va(l))return{data:null,error:l};throw l}})}info(t){return Ha(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{const s=yield Pu(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:ip(s),error:null}}catch(s){if(va(s))return{data:null,error:s};throw s}})}exists(t){return Ha(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{return yield s4(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(va(s)&&s instanceof op){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,a){const s=this._getFinalPath(t),n=[],o=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";o!==""&&n.push(o);const l=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(t){return Ha(this,void 0,void 0,function*(){try{return{data:yield SS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(a){if(va(a))return{data:null,error:a};throw a}})}list(t,a,s){return Ha(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},r4),a),{prefix:t||""});return{data:yield rn(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(va(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const a=[];return t.width&&a.push(`width=${t.width}`),t.height&&a.push(`height=${t.height}`),t.resize&&a.push(`resize=${t.resize}`),t.format&&a.push(`format=${t.format}`),t.quality&&a.push(`quality=${t.quality}`),a.join("&")}}const o4="2.7.1",i4={"X-Client-Info":`storage-js/${o4}`};var $o=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class l4{constructor(t,a={},s){this.url=t,this.headers=Object.assign(Object.assign({},i4),a),this.fetch=wS(s)}listBuckets(){return $o(this,void 0,void 0,function*(){try{return{data:yield Pu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(va(t))return{data:null,error:t};throw t}})}getBucket(t){return $o(this,void 0,void 0,function*(){try{return{data:yield Pu(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(a){if(va(a))return{data:null,error:a};throw a}})}createBucket(t,a={public:!1}){return $o(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(va(s))return{data:null,error:s};throw s}})}updateBucket(t,a){return $o(this,void 0,void 0,function*(){try{return{data:yield a4(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(va(s))return{data:null,error:s};throw s}})}emptyBucket(t){return $o(this,void 0,void 0,function*(){try{return{data:yield rn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(va(a))return{data:null,error:a};throw a}})}deleteBucket(t){return $o(this,void 0,void 0,function*(){try{return{data:yield SS(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(a){if(va(a))return{data:null,error:a};throw a}})}}class c4 extends l4{constructor(t,a={},s){super(t,a,s)}from(t){return new n4(this.url,this.headers,t,this.fetch)}}const d4="2.52.0";let zl="";typeof Deno<"u"?zl="deno":typeof document<"u"?zl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zl="react-native":zl="node";const u4={"X-Client-Info":`supabase-js-${zl}/${d4}`},f4={headers:u4},h4={schema:"public"},m4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},p4={};var g4=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const v4=e=>{let t;return e?t=e:typeof fetch>"u"?t=lS:t=fetch,(...a)=>t(...a)},x4=()=>typeof Headers>"u"?cS:Headers,y4=(e,t,a)=>{const s=v4(a),n=x4();return(o,i)=>g4(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new n(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(o,Object.assign(Object.assign({},i),{headers:d}))})};var b4=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};function _4(e){return e.endsWith("/")?e:e+"/"}function j4(e,t){var a,s;const{db:n,auth:o,realtime:i,global:l}=e,{db:c,auth:d,realtime:f,global:h}=t,p={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},f),i),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(a=h==null?void 0:h.headers)!==null&&a!==void 0?a:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>b4(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const ES="2.71.1",ti=30*1e3,lp=3,zh=lp*ti,w4="http://localhost:9999",S4="supabase.auth.token",E4={"X-Client-Info":`gotrue-js/${ES}`},cp="X-Supabase-Api-Version",NS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},N4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,C4=10*60*1e3;class tv extends Error{constructor(t,a,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=s}}function Ke(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class A4 extends tv{constructor(t,a,s){super(t,a,s),this.name="AuthApiError",this.status=a,this.code=s}}function T4(e){return Ke(e)&&e.name==="AuthApiError"}class CS extends tv{constructor(t,a){super(t),this.name="AuthUnknownError",this.originalError=a}}class Ln extends tv{constructor(t,a,s,n){super(t,s,n),this.name=a,this.status=s}}class en extends Ln{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function D4(e){return Ke(e)&&e.name==="AuthSessionMissingError"}class jd extends Ln{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class wd extends Ln{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Sd extends Ln{constructor(t,a=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function R4(e){return Ke(e)&&e.name==="AuthImplicitGrantRedirectError"}class H0 extends Ln{constructor(t,a=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dp extends Ln{constructor(t,a){super(t,"AuthRetryableFetchError",a,void 0)}}function Mh(e){return Ke(e)&&e.name==="AuthRetryableFetchError"}class V0 extends Ln{constructor(t,a,s){super(t,"AuthWeakPasswordError",a,"weak_password"),this.reasons=s}}class up extends Ln{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ku="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),G0=` 	
\r=`.split(""),O4=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<G0.length;t+=1)e[G0[t].charCodeAt(0)]=-2;for(let t=0;t<ku.length;t+=1)e[ku[t].charCodeAt(0)]=t;return e})();function Y0(e,t,a){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;a(ku[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;a(ku[s]),t.queuedBits-=6}}function AS(e,t,a){const s=O4[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)a(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Q0(e){const t=[],a=i=>{t.push(String.fromCodePoint(i))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},o=i=>{P4(i,s,a)};for(let i=0;i<e.length;i+=1)AS(e.charCodeAt(i),n,o);return t.join("")}function z4(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function M4(e,t){for(let a=0;a<e.length;a+=1){let s=e.charCodeAt(a);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(e.charCodeAt(a+1)-56320&65535|n)+65536,a+=1}z4(s,t)}}function P4(e,t,a){if(t.utf8seq===0){if(e<=127){a(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&a(t.codepoint)}}function k4(e){const t=[],a={queue:0,queuedBits:0},s=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)AS(e.charCodeAt(n),a,s);return new Uint8Array(t)}function L4(e){const t=[];return M4(e,a=>t.push(a)),new Uint8Array(t)}function I4(e){const t=[],a={queue:0,queuedBits:0},s=n=>{t.push(n)};return e.forEach(n=>Y0(n,a,s)),Y0(null,a,s),t.join("")}function F4(e){return Math.round(Date.now()/1e3)+e}function q4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const zs=()=>typeof window<"u"&&typeof document<"u",Qn={tested:!1,writable:!1},TS=()=>{if(!zs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qn.tested)return Qn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Qn.tested=!0,Qn.writable=!0}catch{Qn.tested=!0,Qn.writable=!1}return Qn.writable};function B4(e){const t={},a=new URL(e);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((n,o)=>{t[o]=n})}catch{}return a.searchParams.forEach((s,n)=>{t[n]=s}),t}const DS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...a)=>Vc(async()=>{const{default:s}=await Promise.resolve().then(()=>fl);return{default:s}},void 0).then(({default:s})=>s(...a)):t=fetch,(...a)=>t(...a)},U4=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ai=async(e,t,a)=>{await e.setItem(t,JSON.stringify(a))},Kn=async(e,t)=>{const a=await e.getItem(t);if(!a)return null;try{return JSON.parse(a)}catch{return a}},Xr=async(e,t)=>{await e.removeItem(t)};class Sf{constructor(){this.promise=new Sf.promiseConstructor((t,a)=>{this.resolve=t,this.reject=a})}}Sf.promiseConstructor=Promise;function Ph(e){const t=e.split(".");if(t.length!==3)throw new up("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!N4.test(t[s]))throw new up("JWT not in base64url format");return{header:JSON.parse(Q0(t[0])),payload:JSON.parse(Q0(t[1])),signature:k4(t[2]),raw:{header:t[0],payload:t[1]}}}async function $4(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function H4(e,t){return new Promise((s,n)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){s(i);return}}catch(i){if(!t(o,i)){n(i);return}}})()})}function V4(e){return("0"+e.toString(16)).substr(-2)}function G4(){const t=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=a.length;let n="";for(let o=0;o<56;o++)n+=a.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(t),Array.from(t,V4).join("")}async function Y4(e){const a=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",a),n=new Uint8Array(s);return Array.from(n).map(o=>String.fromCharCode(o)).join("")}async function Q4(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const a=await Y4(e);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ho(e,t,a=!1){const s=G4();let n=s;a&&(n+="/PASSWORD_RECOVERY"),await ai(e,`${t}-code-verifier`,n);const o=await Q4(s);return[o,s===o?"plain":"s256"]}const K4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function X4(e){const t=e.headers.get(cp);if(!t||!t.match(K4))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Z4(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function J4(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const W4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vo(e){if(!W4.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kh(){const e={};return new Proxy(e,{get:(t,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const s=a.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function K0(e){return JSON.parse(JSON.stringify(e))}var eP=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]]);return a};const Wn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),tP=[502,503,504];async function X0(e){var t;if(!U4(e))throw new dp(Wn(e),0);if(tP.includes(e.status))throw new dp(Wn(e),e.status);let a;try{a=await e.json()}catch(o){throw new CS(Wn(o),o)}let s;const n=X4(e);if(n&&n.getTime()>=NS["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?s=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(s=a.error_code),s){if(s==="weak_password")throw new V0(Wn(a),e.status,((t=a.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new en}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new V0(Wn(a),e.status,a.weak_password.reasons);throw new A4(Wn(a),e.status||500,s)}const aP=(e,t,a,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),a))};async function it(e,t,a,s){var n;const o=Object.assign({},s==null?void 0:s.headers);o[cp]||(o[cp]=NS["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const i=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(i.redirect_to=s.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await sP(e,t,a+l,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function sP(e,t,a,s,n,o){const i=aP(t,s,n,o);let l;try{l=await e(a,Object.assign({},i))}catch(c){throw console.error(c),new dp(Wn(c),0)}if(l.ok||await X0(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await X0(c)}}function yr(e){var t;let a=null;iP(e)&&(a=Object.assign({},e),e.expires_at||(a.expires_at=F4(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:a,user:s},error:null}}function Z0(e){const t=yr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function dn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function rP(e){return{data:e,error:null}}function nP(e){const{action_link:t,email_otp:a,hashed_token:s,redirect_to:n,verification_type:o}=e,i=eP(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:a,hashed_token:s,redirect_to:n,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function oP(e){return e}function iP(e){return e.access_token&&e.refresh_token&&e.expires_in}const Lh=["global","local","others"];var lP=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]]);return a};class cP{constructor({url:t="",headers:a={},fetch:s}){this.url=t,this.headers=a,this.fetch=DS(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,a=Lh[0]){if(Lh.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Lh.join(", ")}`);try{return await it(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ke(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,a={}){try{return await it(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:dn})}catch(s){if(Ke(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:a}=t,s=lP(t,["options"]),n=Object.assign(Object.assign({},s),a);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await it(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:nP,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(Ke(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(t){try{return await it(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:dn})}catch(a){if(Ke(a))return{data:{user:null},error:a};throw a}}async listUsers(t){var a,s,n,o,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},f=await it(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:"",per_page:(o=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:oP});if(f.error)throw f.error;const h=await f.json(),p=(i=f.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(_=>{const g=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(_.split(";")[1].split("=")[1]);d[`${x}Page`]=g}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(Ke(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Vo(t);try{return await it(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:dn})}catch(a){if(Ke(a))return{data:{user:null},error:a};throw a}}async updateUserById(t,a){Vo(t);try{return await it(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:a,headers:this.headers,xform:dn})}catch(s){if(Ke(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,a=!1){Vo(t);try{return await it(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:a},xform:dn})}catch(s){if(Ke(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Vo(t.userId);try{const{data:a,error:s}=await it(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:a,error:s}}catch(a){if(Ke(a))return{data:null,error:a};throw a}}async _deleteFactor(t){Vo(t.userId),Vo(t.id);try{return{data:await it(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(a){if(Ke(a))return{data:null,error:a};throw a}}}function J0(e={}){return{getItem:t=>e[t]||null,setItem:(t,a)=>{e[t]=a},removeItem:t=>{delete e[t]}}}function dP(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Go={debug:!!(globalThis&&TS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class RS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class uP extends RS{}async function fP(e,t,a){Go.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Go.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Go.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await a()}finally{Go.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw Go.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new uP(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Go.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}dP();const hP={url:w4,storageKey:S4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:E4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function W0(e,t,a){return await a()}const Yo={};class _c{constructor(t){var a,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_c.nextInstanceID,_c.nextInstanceID+=1,this.instanceID>0&&zs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},hP),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new cP({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=DS(n.fetch),this.lock=n.lock||W0,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:zs()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=fP:this.lock=W0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:TS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=J0(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=J0(this.memoryStorage)),zs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,a;return(a=(t=Yo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(t){Yo[this.storageKey]=Object.assign(Object.assign({},Yo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,a;return(a=(t=Yo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Yo[this.storageKey]=Object.assign(Object.assign({},Yo[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ES}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const a=B4(window.location.href);let s="none";if(this._isImplicitGrantCallback(a)?s="implicit":await this._isPKCECallback(a)&&(s="pkce"),zs()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:o}=await this._getSessionFromURL(a,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),R4(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return Ke(a)?{error:a}:{error:new CS("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var a,s,n;try{const o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:yr}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(Ke(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var a,s,n;try{let o;if("email"in t){const{email:f,password:h,options:p}=t;let m=null,_=null;this.flowType==="pkce"&&([m,_]=await Ho(this.storage,this.storageKey)),o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:f,password:h,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:_},xform:yr})}else if("phone"in t){const{phone:f,password:h,options:p}=t;o=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:h,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},channel:(n=p==null?void 0:p.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:yr})}else throw new wd("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(Ke(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let a;if("email"in t){const{email:o,password:i,options:l}=t;a=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Z0})}else if("phone"in t){const{phone:o,password:i,options:l}=t;a=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Z0})}else throw new wd("You must provide either an email or phone number and a password");const{data:s,error:n}=a;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new jd}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(a){if(Ke(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(t){var a,s,n,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:a}=t;if(a==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}async signInWithSolana(t){var a,s,n,o,i,l,c,d,f,h,p,m;let _,g;if("message"in t)_=t.message,g=t.signature;else{const{chain:x,wallet:y,statement:v,options:b}=t;let j;if(zs())if(typeof y=="object")j=y;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))j=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=y}const w=new URL((a=b==null?void 0:b.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in j&&j.signIn){const S=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),v?{statement:v}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)_=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${w.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(n=(s=b==null?void 0:b.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(f=b==null?void 0:b.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await j.signMessage(new TextEncoder().encode(_),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:x,error:y}=await it(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:I4(g)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:yr});if(y)throw y;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new jd}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:y})}catch(x){if(Ke(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const a=await Kn(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(a??"").split("/");try{const{data:o,error:i}=await it(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:yr});if(await Xr(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new jd}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:n??null}),error:i})}catch(o){if(Ke(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:a,provider:s,token:n,access_token:o,nonce:i}=t,l=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:yr}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new jd}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(a){if(Ke(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(t){var a,s,n,o,i;try{if("email"in t){const{email:l,options:c}=t;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Ho(this.storage,this.storageKey));const{error:h}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:f}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f}}throw new wd("You must provide either an email or phone number.")}catch(l){if(Ke(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var a,s;try{let n,o;"options"in t&&(n=(a=t.options)===null||a===void 0?void 0:a.redirectTo,o=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:i,error:l}=await it(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:n,xform:yr});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(Ke(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var a,s,n;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Ho(this.storage,this.storageKey)),await it(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(a=t.options)===null||a===void 0?void 0:a.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:rP})}catch(o){if(Ke(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:a},error:s}=t;if(s)throw s;if(!a)throw new en;const{error:n}=await it(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(Ke(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const a=`${this.url}/resend`;if("email"in t){const{email:s,type:n,options:o}=t,{error:i}=await it(this.fetch,"POST",a,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:s,type:n,options:o}=t,{data:i,error:l}=await it(this.fetch,"POST",a,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new wd("You must provide either an email or phone number and a type")}catch(a){if(Ke(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(t,a){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await a()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=a();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await t(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const a=await Kn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?t=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<zh:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const i=await Kn(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=kh()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,f)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,f))})}return{data:{session:t},error:null}}const{session:n,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:dn}):await this._useSession(async a=>{var s,n,o;const{data:i,error:l}=a;if(l)throw l;return!(!((s=i.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new en}:await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0,xform:dn})})}catch(a){if(Ke(a))return D4(a)&&(await this._removeSession(),await Xr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(t,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,a))}async _updateUser(t,a={}){try{return await this._useSession(async s=>{const{data:n,error:o}=s;if(o)throw o;if(!n.session)throw new en;const i=n.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ho(this.storage,this.storageKey));const{data:d,error:f}=await it(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:dn});if(f)throw f;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(s){if(Ke(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new en;const a=Date.now()/1e3;let s=a,n=!0,o=null;const{payload:i}=Ph(t.access_token);if(i.exp&&(s=i.exp,n=s<=a),n){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:s-a,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(a){if(Ke(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async a=>{var s;if(!t){const{data:i,error:l}=a;if(l)throw l;t=(s=i.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new en;const{session:n,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(Ke(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(t,a){try{if(!zs())throw new Sd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Sd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new H0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Sd("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new H0("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=t;if(!o||!l||!i||!d)throw new Sd("No session defined in URL");const f=Math.round(Date.now()/1e3),h=parseInt(l);let p=f+h;c&&(p=parseInt(c));const m=p-f;m*1e3<=ti&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const _=p-h;f-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,p,f):f-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,p,f);const{data:g,error:x}=await this._getUser(o);if(x)throw x;const y={provider_token:s,provider_refresh_token:n,access_token:o,expires_in:h,expires_at:p,refresh_token:i,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(s){if(Ke(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const a=await Kn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&a)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async a=>{var s;const{data:n,error:o}=a;if(o)return{error:o};const i=(s=n.session)===null||s===void 0?void 0:s.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(T4(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Xr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const a=q4(),s={id:a,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async a=>{var s,n;try{const{data:{session:o},error:i}=a;if(i)throw i;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,a={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Ho(this.storage,this.storageKey,!0));try{return await it(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(o){if(Ke(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:a,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=a.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(a){if(Ke(a))return{data:null,error:a};throw a}}async linkIdentity(t){var a;try{const{data:s,error:n}=await this._useSession(async o=>{var i,l,c,d,f;const{data:h,error:p}=o;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await it(this.fetch,"GET",m,{headers:this.headers,jwt:(f=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(n)throw n;return zs()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(Ke(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async a=>{var s,n;const{data:o,error:i}=a;if(i)throw i;return await it(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(a){if(Ke(a))return{data:null,error:a};throw a}}async _refreshAccessToken(t){const a=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{const s=Date.now();return await H4(async n=>(n>0&&await $4(200*Math.pow(2,n-1)),this._debug(a,"refreshing attempt",n),await it(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:yr})),(n,o)=>{const i=200*Math.pow(2,n);return o&&Mh(o)&&Date.now()+i-s<ti})}catch(s){if(this._debug(a,"error",s),Ke(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(a,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,a){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",a,"url",s),zs()&&!a.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,a;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Kn(this.storage,this.storageKey);if(n&&this.userStorage){let i=await Kn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:n.user},await ai(this.userStorage,this.storageKey+"-user",i)),n.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:kh()}else if(n&&!n.user&&!n.user){const i=await Kn(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(n.user=i.user,await Xr(this.storage,this.storageKey+"-user"),await ai(this.storage,this.storageKey,n)):n.user=kh()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const o=((a=n.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<zh;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${zh}s`),o){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Mh(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(n.access_token);!l&&(i!=null&&i.user)?(n.user=i.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(s,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var a,s;if(!t)throw new en;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Sf;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new en;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(n,"error",o),Ke(o)){const i={session:null,error:o};return Mh(o)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(i),i}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,a,s=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",a,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:a});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,a)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const a=Object.assign({},t),s=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&a.user&&await ai(this.userStorage,this.storageKey+"-user",{user:a.user});const n=Object.assign({},a);delete n.user;const o=K0(n);await ai(this.storage,this.storageKey,o)}else{const n=K0(a);await ai(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await Xr(this.storage,this.storageKey),await Xr(this.storage,this.storageKey+"-code-verifier"),await Xr(this.storage,this.storageKey+"-user"),this.userStorage&&await Xr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&zs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ti);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async a=>{const{data:{session:s}}=a;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-t)/ti);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${ti}ms, refresh threshold is ${lp} ticks`),n<=lp&&await this._callRefreshToken(s.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof RS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const a=`#_onVisibilityChanged(${t})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,a,s){const n=[`provider=${encodeURIComponent(a)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,i]=await Ho(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);n.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async a=>{var s;const{data:n,error:o}=a;return o?{data:null,error:o}:await it(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(a){if(Ke(a))return{data:null,error:a};throw a}}async _enroll(t){try{return await this._useSession(async a=>{var s,n;const{data:o,error:i}=a;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await it(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(a){if(Ke(a))return{data:null,error:a};throw a}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var s;const{data:n,error:o}=a;if(o)return{data:null,error:o};const{data:i,error:l}=await it(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(a){if(Ke(a))return{data:null,error:a};throw a}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var s;const{data:n,error:o}=a;return o?{data:null,error:o}:await it(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(a){if(Ke(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(t){const{data:a,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:a.id,code:t.code})}async _listFactors(){const{data:{user:t},error:a}=await this.getUser();if(a)return{data:null,error:a};const s=(t==null?void 0:t.factors)||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=s.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:s,totp:n,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var a,s;const{data:{session:n},error:o}=t;if(o)return{data:null,error:o};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Ph(n.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((s=(a=n.user.factors)===null||a===void 0?void 0:a.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const f=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,a={keys:[]}){let s=a.keys.find(l=>l.kid===t);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+C4>n)return s;const{data:o,error:i}=await it(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=n,s=o.keys.find(l=>l.kid===t),!s)?null:s}async getClaims(t,a={}){try{let s=t;if(!s){const{data:m,error:_}=await this.getSession();if(_||!m.session)return{data:null,error:_};s=m.session.access_token}const{header:n,payload:o,signature:i,raw:{header:l,payload:c}}=Ph(s);a!=null&&a.allowExpired||Z4(o.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!d){const{error:m}=await this.getUser(s);if(m)throw m;return{data:{claims:o,header:n,signature:i},error:null}}const f=J4(n.alg),h=await crypto.subtle.importKey("jwk",d,f,!0,["verify"]);if(!await crypto.subtle.verify(f,h,i,L4(`${l}.${c}`)))throw new up("Invalid JWT signature");return{data:{claims:o,header:n,signature:i},error:null}}catch(s){if(Ke(s))return{data:null,error:s};throw s}}}_c.nextInstanceID=0;const mP=_c;class pP extends mP{constructor(t){super(t)}}var gP=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class vP{constructor(t,a,s){var n,o,i;if(this.supabaseUrl=t,this.supabaseKey=a,!t)throw new Error("supabaseUrl is required.");if(!a)throw new Error("supabaseKey is required.");const l=_4(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:h4,realtime:p4,auth:Object.assign(Object.assign({},m4),{storageKey:d}),global:f4},h=j4(s??{},f);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=h.auth)!==null&&i!==void 0?i:{},this.headers,h.global.fetch),this.fetch=y4(a,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new PM(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new uM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new c4(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,a={},s={}){return this.rest.rpc(t,a,s)}channel(t,a={config:{}}){return this.realtime.channel(t,a)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,a;return gP(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(a=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&a!==void 0?a:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:a,detectSessionInUrl:s,storage:n,storageKey:o,flowType:i,lock:l,debug:c},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pP({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:t,persistSession:a,detectSessionInUrl:s,storage:n,flowType:i,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new XM(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,s)=>{this._handleTokenChanged(a,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,a,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const xP=(e,t,a)=>new vP(e,t,a),yP="https://twsnzfzjtjdamwwembzp.supabase.co",bP="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3c256ZnpqdGpkYW13d2VtYnpwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczMDczODEsImV4cCI6MjA4Mjg4MzM4MX0.EFmjLPT_Mnl4cv2qcH5vq5_zmo47fGWFjQdGGwidsNY",D=xP(yP,bP);function Pt({className:e,size:t=24}){return r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx(JT,{className:je("animate-spin text-green-600",e),size:t})})}function _P(){const[e,t]=u.useState({protocolosAbertos:0,receptorasSincronizadas:0,embrioesFrescosDisponiveis:0,embrioesCongeladosEstoque:0}),[a,s]=u.useState(!0);u.useEffect(()=>{n()},[]);const n=async()=>{try{const{count:i}=await D.from("protocolos_sincronizacao").select("*",{count:"exact",head:!0}).is("data_retirada",null),{count:l}=await D.from("protocolo_receptoras").select("*",{count:"exact",head:!0}).in("status",["APTA","SINCRONIZADA"]),{count:c}=await D.from("v_embrioes_disponiveis_te").select("*",{count:"exact",head:!0}).eq("disponivel_fresco_hoje",!0),{count:d}=await D.from("v_embrioes_disponiveis_te").select("*",{count:"exact",head:!0}).eq("disponivel_congelado",!0);t({protocolosAbertos:i||0,receptorasSincronizadas:l||0,embrioesFrescosDisponiveis:c||0,embrioesCongeladosEstoque:d||0})}catch(i){console.error("Erro ao carregar estatsticas:",i)}finally{s(!1)}},o=[{label:"Novo Protocolo",path:"/protocolos/novo",icon:Rg,color:"bg-green-600 hover:bg-green-700"},{label:"Registrar Retirada",path:"/protocolos",icon:QT,color:"bg-blue-600 hover:bg-blue-700"},{label:"Nova Aspirao",path:"/aspiracoes/novo",icon:Nu,color:"bg-purple-600 hover:bg-purple-700"},{label:"Criar Lote FIV",path:"/lotes-fiv/novo",icon:Nu,color:"bg-indigo-600 hover:bg-indigo-700"},{label:"Gerar Embries",path:"/embrioes/novo",icon:po,color:"bg-pink-600 hover:bg-pink-700"},{label:"TE do Protocolo",path:"/transferencia",icon:of,color:"bg-orange-600 hover:bg-orange-700"},{label:"Lanar DG",path:"/dg",icon:Dg,color:"bg-teal-600 hover:bg-teal-700"},{label:"Lanar Sexagem",path:"/sexagem",icon:Sg,color:"bg-cyan-600 hover:bg-cyan-700"}];return a?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Dashboard"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Viso geral do sistema de FIV/TE"})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Aes Rpidas"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.map(i=>{const l=i.icon;return r.jsx(Qi,{to:i.path,children:r.jsxs(G,{className:`w-full h-24 flex flex-col items-center justify-center gap-2 ${i.color} text-white`,children:[r.jsx(l,{className:"w-6 h-6"}),r.jsx("span",{className:"text-sm font-medium text-center",children:i.label})]})},i.path)})})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Estatsticas"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(Ee,{children:[r.jsxs(Re,{children:[r.jsx(Oe,{className:"text-lg",children:"Protocolos Abertos"}),r.jsx(Ol,{children:"Em andamento"})]}),r.jsx(Ne,{children:r.jsx("p",{className:"text-4xl font-bold text-green-600",children:e.protocolosAbertos})})]}),r.jsxs(Ee,{children:[r.jsxs(Re,{children:[r.jsx(Oe,{className:"text-lg",children:"Receptoras Sincronizadas"}),r.jsx(Ol,{children:"Aptas para TE"})]}),r.jsx(Ne,{children:r.jsx("p",{className:"text-4xl font-bold text-blue-600",children:e.receptorasSincronizadas})})]}),r.jsxs(Ee,{children:[r.jsxs(Re,{children:[r.jsx(Oe,{className:"text-lg",children:"Embries Frescos"}),r.jsx(Ol,{children:"Disponveis hoje (D7/D8)"})]}),r.jsx(Ne,{children:r.jsx("p",{className:"text-4xl font-bold text-purple-600",children:e.embrioesFrescosDisponiveis})})]}),r.jsxs(Ee,{children:[r.jsxs(Re,{children:[r.jsx(Oe,{className:"text-lg",children:"Embries Congelados"}),r.jsx(Ol,{children:"Em estoque"})]}),r.jsx(Ne,{children:r.jsx("p",{className:"text-4xl font-bold text-cyan-600",children:e.embrioesCongeladosEstoque})})]})]})]})]})}const _t=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:a,className:je("w-full caption-bottom text-sm",e),...t})}));_t.displayName="Table";const jt=u.forwardRef(({className:e,...t},a)=>r.jsx("thead",{ref:a,className:je("[&_tr]:border-b",e),...t}));jt.displayName="TableHeader";const wt=u.forwardRef(({className:e,...t},a)=>r.jsx("tbody",{ref:a,className:je("[&_tr:last-child]:border-0",e),...t}));wt.displayName="TableBody";const jP=u.forwardRef(({className:e,...t},a)=>r.jsx("tfoot",{ref:a,className:je("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));jP.displayName="TableFooter";const be=u.forwardRef(({className:e,...t},a)=>r.jsx("tr",{ref:a,className:je("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));be.displayName="TableRow";const Y=u.forwardRef(({className:e,...t},a)=>r.jsx("th",{ref:a,className:je("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Y.displayName="TableHead";const I=u.forwardRef(({className:e,...t},a)=>r.jsx("td",{ref:a,className:je("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));I.displayName="TableCell";const wP=u.forwardRef(({className:e,...t},a)=>r.jsx("caption",{ref:a,className:je("mt-4 text-sm text-muted-foreground",e),...t}));wP.displayName="TableCaption";function SP(){const[e,t]=u.useState([]),[a,s]=u.useState(!0),{toast:n}=Jt();u.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:i,error:l}=await D.from("clientes").select("*").order("nome",{ascending:!0});if(l)throw l;t(i||[])}catch(i){n({title:"Erro ao carregar clientes",description:i instanceof Error?i.message:"Erro desconhecido",variant:"destructive"})}finally{s(!1)}};return a?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Clientes"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar clientes do sistema"})]}),r.jsx(Qi,{to:"/clientes/novo",children:r.jsxs(G,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Ja,{className:"w-4 h-4 mr-2"}),"Novo Cliente"]})})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Lista de Clientes"})}),r.jsx(Ne,{children:r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Nome"}),r.jsx(Y,{children:"Telefone"}),r.jsx(Y,{children:"Endereo"}),r.jsx(Y,{children:"Cadastrado em"}),r.jsx(Y,{className:"text-right",children:"Aes"})]})}),r.jsx(wt,{children:e.length===0?r.jsx(be,{children:r.jsx(I,{colSpan:5,className:"text-center text-slate-500",children:"Nenhum cliente cadastrado"})}):e.map(i=>r.jsxs(be,{children:[r.jsx(I,{className:"font-medium",children:i.nome}),r.jsx(I,{children:i.telefone||"-"}),r.jsx(I,{children:i.endereco||"-"}),r.jsx(I,{children:i.created_at?new Date(i.created_at).toLocaleDateString("pt-BR"):"-"}),r.jsx(I,{className:"text-right",children:r.jsx(Qi,{to:`/clientes/${i.id}`,children:r.jsx(G,{variant:"ghost",size:"sm",children:r.jsx(hc,{className:"w-4 h-4"})})})})]},i.id))})]})})]})]})}const de=u.forwardRef(({className:e,type:t,...a},s)=>r.jsx("input",{type:t,className:je("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...a}));de.displayName="Input";var EP="Label",OS=u.forwardRef((e,t)=>r.jsx(Ve.label,{...e,ref:t,onMouseDown:a=>{var n;a.target.closest("button, input, select, textarea")||((n=e.onMouseDown)==null||n.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));OS.displayName=EP;var zS=OS;const NP=il("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),B=u.forwardRef(({className:e,...t},a)=>r.jsx(zS,{ref:a,className:je(NP(),e),...t}));B.displayName=zS.displayName;const ja=u.forwardRef(({className:e,...t},a)=>r.jsx("textarea",{className:je("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));ja.displayName="Textarea";function ey(){const{id:e}=Ur(),t=Aa(),{toast:a}=Jt(),[s,n]=u.useState(!1),[o,i]=u.useState({nome:"",telefone:"",endereco:""});u.useEffect(()=>{e&&l()},[e]);const l=async()=>{try{n(!0);const{data:d,error:f}=await D.from("clientes").select("*").eq("id",e).single();if(f)throw f;d&&i({nome:d.nome||"",telefone:d.telefone||"",endereco:d.endereco||""})}catch(d){a({title:"Erro ao carregar cliente",description:d instanceof Error?d.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},c=async d=>{if(d.preventDefault(),!o.nome.trim()){a({title:"Erro de validao",description:"Nome  obrigatrio",variant:"destructive"});return}try{if(n(!0),e){const{error:f}=await D.from("clientes").update(o).eq("id",e);if(f)throw f;a({title:"Cliente atualizado",description:"Cliente atualizado com sucesso"})}else{const{error:f}=await D.from("clientes").insert([o]);if(f)throw f;a({title:"Cliente criado",description:"Cliente criado com sucesso"})}t("/clientes")}catch(f){a({title:"Erro ao salvar cliente",description:f instanceof Error?f.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}};return s&&e?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>t("/clientes"),children:r.jsx(Za,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:e?"Editar Cliente":"Novo Cliente"}),r.jsx("p",{className:"text-slate-600 mt-1",children:e?"Atualizar informaes do cliente":"Cadastrar novo cliente"})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Informaes do Cliente"})}),r.jsx(Ne,{children:r.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"nome",children:"Nome *"}),r.jsx(de,{id:"nome",value:o.nome,onChange:d=>i({...o,nome:d.target.value}),placeholder:"Nome do cliente",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"telefone",children:"Telefone"}),r.jsx(de,{id:"telefone",value:o.telefone,onChange:d=>i({...o,telefone:d.target.value}),placeholder:"(00) 00000-0000"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"endereco",children:"Endereo"}),r.jsx(ja,{id:"endereco",value:o.endereco,onChange:d=>i({...o,endereco:d.target.value}),placeholder:"Endereo completo",rows:3})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx(G,{type:"submit",className:"bg-green-600 hover:bg-green-700",disabled:s,children:s?"Salvando...":"Salvar"}),r.jsx(G,{type:"button",variant:"outline",onClick:()=>t("/clientes"),disabled:s,children:"Cancelar"})]})]})})]})]})}var Ih="focusScope.autoFocusOnMount",Fh="focusScope.autoFocusOnUnmount",ty={bubbles:!1,cancelable:!0},CP="FocusScope",Ef=u.forwardRef((e,t)=>{const{loop:a=!1,trapped:s=!1,onMountAutoFocus:n,onUnmountAutoFocus:o,...i}=e,[l,c]=u.useState(null),d=Ns(n),f=Ns(o),h=u.useRef(null),p=vt(t,g=>c(g)),m=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(s){let g=function(b){if(m.paused||!l)return;const j=b.target;l.contains(j)?h.current=j:tn(h.current,{select:!0})},x=function(b){if(m.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||tn(h.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const w of b)w.removedNodes.length>0&&tn(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",x);const v=new MutationObserver(y);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",x),v.disconnect()}}},[s,l,m.paused]),u.useEffect(()=>{if(l){sy.add(m);const g=document.activeElement;if(!l.contains(g)){const y=new CustomEvent(Ih,ty);l.addEventListener(Ih,d),l.dispatchEvent(y),y.defaultPrevented||(AP(zP(MS(l)),{select:!0}),document.activeElement===g&&tn(l))}return()=>{l.removeEventListener(Ih,d),setTimeout(()=>{const y=new CustomEvent(Fh,ty);l.addEventListener(Fh,f),l.dispatchEvent(y),y.defaultPrevented||tn(g??document.body,{select:!0}),l.removeEventListener(Fh,f),sy.remove(m)},0)}}},[l,d,f,m]);const _=u.useCallback(g=>{if(!a&&!s||m.paused)return;const x=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(x&&y){const v=g.currentTarget,[b,j]=TP(v);b&&j?!g.shiftKey&&y===j?(g.preventDefault(),a&&tn(b,{select:!0})):g.shiftKey&&y===b&&(g.preventDefault(),a&&tn(j,{select:!0})):y===v&&g.preventDefault()}},[a,s,m.paused]);return r.jsx(Ve.div,{tabIndex:-1,...i,ref:p,onKeyDown:_})});Ef.displayName=CP;function AP(e,{select:t=!1}={}){const a=document.activeElement;for(const s of e)if(tn(s,{select:t}),document.activeElement!==a)return}function TP(e){const t=MS(e),a=ay(t,e),s=ay(t.reverse(),e);return[a,s]}function MS(e){const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function ay(e,t){for(const a of e)if(!DP(a,{upTo:t}))return a}function DP(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function RP(e){return e instanceof HTMLInputElement&&"select"in e}function tn(e,{select:t=!1}={}){if(e&&e.focus){const a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&RP(e)&&t&&e.select()}}var sy=OP();function OP(){let e=[];return{add(t){const a=e[0];t!==a&&(a==null||a.pause()),e=ry(e,t),e.unshift(t)},remove(t){var a;e=ry(e,t),(a=e[0])==null||a.resume()}}}function ry(e,t){const a=[...e],s=a.indexOf(t);return s!==-1&&a.splice(s,1),a}function zP(e){return e.filter(t=>t.tagName!=="A")}var qh=0;function av(){u.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??ny()),document.body.insertAdjacentElement("beforeend",e[1]??ny()),qh++,()=>{qh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),qh--}},[])}function ny(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ws=function(){return Ws=Object.assign||function(t){for(var a,s=1,n=arguments.length;s<n;s++){a=arguments[s];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},Ws.apply(this,arguments)};function PS(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]]);return a}function MP(e,t,a){if(a||arguments.length===2)for(var s=0,n=t.length,o;s<n;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var Gd="right-scroll-bar-position",Yd="width-before-scroll-bar",PP="with-scroll-bars-hidden",kP="--removed-body-scroll-bar-size";function Bh(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function LP(e,t){var a=u.useState(function(){return{value:e,callback:t,facade:{get current(){return a.value},set current(s){var n=a.value;n!==s&&(a.value=s,a.callback(s,n))}}}})[0];return a.callback=t,a.facade}var IP=typeof window<"u"?u.useLayoutEffect:u.useEffect,oy=new WeakMap;function FP(e,t){var a=LP(null,function(s){return e.forEach(function(n){return Bh(n,s)})});return IP(function(){var s=oy.get(a);if(s){var n=new Set(s),o=new Set(e),i=a.current;n.forEach(function(l){o.has(l)||Bh(l,null)}),o.forEach(function(l){n.has(l)||Bh(l,i)})}oy.set(a,e)},[e]),a}function qP(e){return e}function BP(e,t){t===void 0&&(t=qP);var a=[],s=!1,n={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:e},useMedium:function(o){var i=t(o,s);return a.push(i),function(){a=a.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(s=!0;a.length;){var i=a;a=[],i.forEach(o)}a={push:function(l){return o(l)},filter:function(){return a}}},assignMedium:function(o){s=!0;var i=[];if(a.length){var l=a;a=[],l.forEach(o),i=a}var c=function(){var f=i;i=[],f.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),a={push:function(f){i.push(f),d()},filter:function(f){return i=i.filter(f),a}}}};return n}function UP(e){e===void 0&&(e={});var t=BP(null);return t.options=Ws({async:!0,ssr:!1},e),t}var kS=function(e){var t=e.sideCar,a=PS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return u.createElement(s,Ws({},a))};kS.isSideCarExport=!0;function $P(e,t){return e.useMedium(t),kS}var LS=UP(),Uh=function(){},Nf=u.forwardRef(function(e,t){var a=u.useRef(null),s=u.useState({onScrollCapture:Uh,onWheelCapture:Uh,onTouchMoveCapture:Uh}),n=s[0],o=s[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,f=e.enabled,h=e.shards,p=e.sideCar,m=e.noRelative,_=e.noIsolation,g=e.inert,x=e.allowPinchZoom,y=e.as,v=y===void 0?"div":y,b=e.gapMode,j=PS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,S=FP([a,t]),N=Ws(Ws({},j),n);return u.createElement(u.Fragment,null,f&&u.createElement(w,{sideCar:LS,removeScrollBar:d,shards:h,noRelative:m,noIsolation:_,inert:g,setCallbacks:o,allowPinchZoom:!!x,lockRef:a,gapMode:b}),i?u.cloneElement(u.Children.only(l),Ws(Ws({},N),{ref:S})):u.createElement(v,Ws({},N,{className:c,ref:S}),l))});Nf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Nf.classNames={fullWidth:Yd,zeroRight:Gd};var HP=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function VP(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=HP();return t&&e.setAttribute("nonce",t),e}function GP(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function YP(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var QP=function(){var e=0,t=null;return{add:function(a){e==0&&(t=VP())&&(GP(t,a),YP(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},KP=function(){var e=QP();return function(t,a){u.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&a])}},IS=function(){var e=KP(),t=function(a){var s=a.styles,n=a.dynamic;return e(s,n),null};return t},XP={left:0,top:0,right:0,gap:0},$h=function(e){return parseInt(e||"",10)||0},ZP=function(e){var t=window.getComputedStyle(document.body),a=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],n=t[e==="padding"?"paddingRight":"marginRight"];return[$h(a),$h(s),$h(n)]},JP=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return XP;var t=ZP(e),a=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-a+t[2]-t[0])}},WP=IS(),Ei="data-scroll-locked",ek=function(e,t,a,s){var n=e.left,o=e.top,i=e.right,l=e.gap;return a===void 0&&(a="margin"),`
  .`.concat(PP,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Ei,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),a==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),a==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Gd,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Yd,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Gd," .").concat(Gd,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Yd," .").concat(Yd,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Ei,`] {
    `).concat(kP,": ").concat(l,`px;
  }
`)},iy=function(){var e=parseInt(document.body.getAttribute(Ei)||"0",10);return isFinite(e)?e:0},tk=function(){u.useEffect(function(){return document.body.setAttribute(Ei,(iy()+1).toString()),function(){var e=iy()-1;e<=0?document.body.removeAttribute(Ei):document.body.setAttribute(Ei,e.toString())}},[])},ak=function(e){var t=e.noRelative,a=e.noImportant,s=e.gapMode,n=s===void 0?"margin":s;tk();var o=u.useMemo(function(){return JP(n)},[n]);return u.createElement(WP,{styles:ek(o,!t,n,a?"":"!important")})},fp=!1;if(typeof window<"u")try{var Ed=Object.defineProperty({},"passive",{get:function(){return fp=!0,!0}});window.addEventListener("test",Ed,Ed),window.removeEventListener("test",Ed,Ed)}catch{fp=!1}var Qo=fp?{passive:!1}:!1,sk=function(e){return e.tagName==="TEXTAREA"},FS=function(e,t){if(!(e instanceof Element))return!1;var a=window.getComputedStyle(e);return a[t]!=="hidden"&&!(a.overflowY===a.overflowX&&!sk(e)&&a[t]==="visible")},rk=function(e){return FS(e,"overflowY")},nk=function(e){return FS(e,"overflowX")},ly=function(e,t){var a=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var n=qS(e,s);if(n){var o=BS(e,s),i=o[1],l=o[2];if(i>l)return!0}s=s.parentNode}while(s&&s!==a.body);return!1},ok=function(e){var t=e.scrollTop,a=e.scrollHeight,s=e.clientHeight;return[t,a,s]},ik=function(e){var t=e.scrollLeft,a=e.scrollWidth,s=e.clientWidth;return[t,a,s]},qS=function(e,t){return e==="v"?rk(t):nk(t)},BS=function(e,t){return e==="v"?ok(t):ik(t)},lk=function(e,t){return e==="h"&&t==="rtl"?-1:1},ck=function(e,t,a,s,n){var o=lk(e,window.getComputedStyle(t).direction),i=o*s,l=a.target,c=t.contains(l),d=!1,f=i>0,h=0,p=0;do{if(!l)break;var m=BS(e,l),_=m[0],g=m[1],x=m[2],y=g-x-o*_;(_||y)&&qS(e,l)&&(h+=y,p+=_);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&Math.abs(h)<1||!f&&Math.abs(p)<1)&&(d=!0),d},Nd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},cy=function(e){return[e.deltaX,e.deltaY]},dy=function(e){return e&&"current"in e?e.current:e},dk=function(e,t){return e[0]===t[0]&&e[1]===t[1]},uk=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},fk=0,Ko=[];function hk(e){var t=u.useRef([]),a=u.useRef([0,0]),s=u.useRef(),n=u.useState(fk++)[0],o=u.useState(IS)[0],i=u.useRef(e);u.useEffect(function(){i.current=e},[e]),u.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(n));var g=MP([e.lockRef.current],(e.shards||[]).map(dy),!0).filter(Boolean);return g.forEach(function(x){return x.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),g.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(n))})}}},[e.inert,e.lockRef.current,e.shards]);var l=u.useCallback(function(g,x){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var y=Nd(g),v=a.current,b="deltaX"in g?g.deltaX:v[0]-y[0],j="deltaY"in g?g.deltaY:v[1]-y[1],w,S=g.target,N=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in g&&N==="h"&&S.type==="range")return!1;var C=ly(N,S);if(!C)return!0;if(C?w=N:(w=N==="v"?"h":"v",C=ly(N,S)),!C)return!1;if(!s.current&&"changedTouches"in g&&(b||j)&&(s.current=w),!w)return!0;var P=s.current||w;return ck(P,x,g,P==="h"?b:j)},[]),c=u.useCallback(function(g){var x=g;if(!(!Ko.length||Ko[Ko.length-1]!==o)){var y="deltaY"in x?cy(x):Nd(x),v=t.current.filter(function(w){return w.name===x.type&&(w.target===x.target||x.target===w.shadowParent)&&dk(w.delta,y)})[0];if(v&&v.should){x.cancelable&&x.preventDefault();return}if(!v){var b=(i.current.shards||[]).map(dy).filter(Boolean).filter(function(w){return w.contains(x.target)}),j=b.length>0?l(x,b[0]):!i.current.noIsolation;j&&x.cancelable&&x.preventDefault()}}},[]),d=u.useCallback(function(g,x,y,v){var b={name:g,delta:x,target:y,should:v,shadowParent:mk(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),f=u.useCallback(function(g){a.current=Nd(g),s.current=void 0},[]),h=u.useCallback(function(g){d(g.type,cy(g),g.target,l(g,e.lockRef.current))},[]),p=u.useCallback(function(g){d(g.type,Nd(g),g.target,l(g,e.lockRef.current))},[]);u.useEffect(function(){return Ko.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Qo),document.addEventListener("touchmove",c,Qo),document.addEventListener("touchstart",f,Qo),function(){Ko=Ko.filter(function(g){return g!==o}),document.removeEventListener("wheel",c,Qo),document.removeEventListener("touchmove",c,Qo),document.removeEventListener("touchstart",f,Qo)}},[]);var m=e.removeScrollBar,_=e.inert;return u.createElement(u.Fragment,null,_?u.createElement(o,{styles:uk(n)}):null,m?u.createElement(ak,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function mk(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const pk=$P(LS,hk);var Cf=u.forwardRef(function(e,t){return u.createElement(Nf,Ws({},e,{ref:t,sideCar:pk}))});Cf.classNames=Nf.classNames;var gk=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Xo=new WeakMap,Cd=new WeakMap,Ad={},Hh=0,US=function(e){return e&&(e.host||US(e.parentNode))},vk=function(e,t){return t.map(function(a){if(e.contains(a))return a;var s=US(a);return s&&e.contains(s)?s:(console.error("aria-hidden",a,"in not contained inside",e,". Doing nothing"),null)}).filter(function(a){return!!a})},xk=function(e,t,a,s){var n=vk(t,Array.isArray(e)?e:[e]);Ad[a]||(Ad[a]=new WeakMap);var o=Ad[a],i=[],l=new Set,c=new Set(n),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};n.forEach(d);var f=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(p){if(l.has(p))f(p);else try{var m=p.getAttribute(s),_=m!==null&&m!=="false",g=(Xo.get(p)||0)+1,x=(o.get(p)||0)+1;Xo.set(p,g),o.set(p,x),i.push(p),g===1&&_&&Cd.set(p,!0),x===1&&p.setAttribute(a,"true"),_||p.setAttribute(s,"true")}catch(y){console.error("aria-hidden: cannot operate on ",p,y)}})};return f(t),l.clear(),Hh++,function(){i.forEach(function(h){var p=Xo.get(h)-1,m=o.get(h)-1;Xo.set(h,p),o.set(h,m),p||(Cd.has(h)||h.removeAttribute(s),Cd.delete(h)),m||h.removeAttribute(a)}),Hh--,Hh||(Xo=new WeakMap,Xo=new WeakMap,Cd=new WeakMap,Ad={})}},sv=function(e,t,a){a===void 0&&(a="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),n=gk(e);return n?(s.push.apply(s,Array.from(n.querySelectorAll("[aria-live], script"))),xk(s,n,a,"aria-hidden")):function(){return null}},Af="Dialog",[$S,HS]=Ts(Af),[yk,Vs]=$S(Af),VS=e=>{const{__scopeDialog:t,children:a,open:s,defaultOpen:n,onOpenChange:o,modal:i=!0}=e,l=u.useRef(null),c=u.useRef(null),[d,f]=Bs({prop:s,defaultProp:n??!1,onChange:o,caller:Af});return r.jsx(yk,{scope:t,triggerRef:l,contentRef:c,contentId:Dr(),titleId:Dr(),descriptionId:Dr(),open:d,onOpenChange:f,onOpenToggle:u.useCallback(()=>f(h=>!h),[f]),modal:i,children:a})};VS.displayName=Af;var GS="DialogTrigger",YS=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=Vs(GS,a),o=vt(t,n.triggerRef);return r.jsx(Ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":ov(n.open),...s,ref:o,onClick:ke(e.onClick,n.onOpenToggle)})});YS.displayName=GS;var rv="DialogPortal",[bk,QS]=$S(rv,{forceMount:void 0}),KS=e=>{const{__scopeDialog:t,forceMount:a,children:s,container:n}=e,o=Vs(rv,t);return r.jsx(bk,{scope:t,forceMount:a,children:u.Children.map(s,i=>r.jsx(qr,{present:a||o.open,children:r.jsx(qc,{asChild:!0,container:n,children:i})}))})};KS.displayName=rv;var Lu="DialogOverlay",XS=u.forwardRef((e,t)=>{const a=QS(Lu,e.__scopeDialog),{forceMount:s=a.forceMount,...n}=e,o=Vs(Lu,e.__scopeDialog);return o.modal?r.jsx(qr,{present:s||o.open,children:r.jsx(jk,{...n,ref:t})}):null});XS.displayName=Lu;var _k=bo("DialogOverlay.RemoveScroll"),jk=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=Vs(Lu,a);return r.jsx(Cf,{as:_k,allowPinchZoom:!0,shards:[n.contentRef],children:r.jsx(Ve.div,{"data-state":ov(n.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),jo="DialogContent",ZS=u.forwardRef((e,t)=>{const a=QS(jo,e.__scopeDialog),{forceMount:s=a.forceMount,...n}=e,o=Vs(jo,e.__scopeDialog);return r.jsx(qr,{present:s||o.open,children:o.modal?r.jsx(wk,{...n,ref:t}):r.jsx(Sk,{...n,ref:t})})});ZS.displayName=jo;var wk=u.forwardRef((e,t)=>{const a=Vs(jo,e.__scopeDialog),s=u.useRef(null),n=vt(t,a.contentRef,s);return u.useEffect(()=>{const o=s.current;if(o)return sv(o)},[]),r.jsx(JS,{...e,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ke(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=a.triggerRef.current)==null||i.focus()}),onPointerDownOutside:ke(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:ke(e.onFocusOutside,o=>o.preventDefault())})}),Sk=u.forwardRef((e,t)=>{const a=Vs(jo,e.__scopeDialog),s=u.useRef(!1),n=u.useRef(!1);return r.jsx(JS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=a.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const i=o.target;((d=a.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&n.current&&o.preventDefault()}})}),JS=u.forwardRef((e,t)=>{const{__scopeDialog:a,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:o,...i}=e,l=Vs(jo,a),c=u.useRef(null),d=vt(t,c);return av(),r.jsxs(r.Fragment,{children:[r.jsx(Ef,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:o,children:r.jsx(ol,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ov(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(Nk,{titleId:l.titleId}),r.jsx(Ak,{contentRef:c,descriptionId:l.descriptionId})]})]})}),nv="DialogTitle",WS=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=Vs(nv,a);return r.jsx(Ve.h2,{id:n.titleId,...s,ref:t})});WS.displayName=nv;var eE="DialogDescription",tE=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=Vs(eE,a);return r.jsx(Ve.p,{id:n.descriptionId,...s,ref:t})});tE.displayName=eE;var aE="DialogClose",sE=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=Vs(aE,a);return r.jsx(Ve.button,{type:"button",...s,ref:t,onClick:ke(e.onClick,()=>n.onOpenChange(!1))})});sE.displayName=aE;function ov(e){return e?"open":"closed"}var rE="DialogTitleWarning",[Ek,nE]=X2(rE,{contentName:jo,titleName:nv,docsSlug:"dialog"}),Nk=({titleId:e})=>{const t=nE(rE),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return u.useEffect(()=>{e&&(document.getElementById(e)||console.error(a))},[a,e]),null},Ck="DialogDescriptionWarning",Ak=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${nE(Ck).contentName}}.`;return u.useEffect(()=>{var o;const n=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&n&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},iv=VS,oE=YS,lv=KS,Qc=XS,Kc=ZS,Xc=WS,Zc=tE,Tf=sE;const zt=iv,As=oE,Tk=lv,iE=u.forwardRef(({className:e,...t},a)=>r.jsx(Qc,{ref:a,className:je("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));iE.displayName=Qc.displayName;const St=u.forwardRef(({className:e,children:t,...a},s)=>r.jsxs(Tk,{children:[r.jsx(iE,{}),r.jsxs(Kc,{ref:s,className:je("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,r.jsxs(Tf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(Cs,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));St.displayName=Kc.displayName;const Et=({className:e,...t})=>r.jsx("div",{className:je("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Et.displayName="DialogHeader";const Nt=u.forwardRef(({className:e,...t},a)=>r.jsx(Xc,{ref:a,className:je("text-lg font-semibold leading-none tracking-tight",e),...t}));Nt.displayName=Xc.displayName;const Mt=u.forwardRef(({className:e,...t},a)=>r.jsx(Zc,{ref:a,className:je("text-sm text-muted-foreground",e),...t}));Mt.displayName=Zc.displayName;var Dk=u.createContext(void 0);function Df(e){const t=u.useContext(Dk);return e||t||"ltr"}var Vh="rovingFocusGroup.onEntryFocus",Rk={bubbles:!1,cancelable:!0},Jc="RovingFocusGroup",[hp,lE,Ok]=bg(Jc),[zk,Rf]=Ts(Jc,[Ok]),[Mk,Pk]=zk(Jc),cE=u.forwardRef((e,t)=>r.jsx(hp.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(hp.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(kk,{...e,ref:t})})}));cE.displayName=Jc;var kk=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,orientation:s,loop:n=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...h}=e,p=u.useRef(null),m=vt(t,p),_=Df(o),[g,x]=Bs({prop:i,defaultProp:l??null,onChange:c,caller:Jc}),[y,v]=u.useState(!1),b=Ns(d),j=lE(a),w=u.useRef(!1),[S,N]=u.useState(0);return u.useEffect(()=>{const C=p.current;if(C)return C.addEventListener(Vh,b),()=>C.removeEventListener(Vh,b)},[b]),r.jsx(Mk,{scope:a,orientation:s,dir:_,loop:n,currentTabStopId:g,onItemFocus:u.useCallback(C=>x(C),[x]),onItemShiftTab:u.useCallback(()=>v(!0),[]),onFocusableItemAdd:u.useCallback(()=>N(C=>C+1),[]),onFocusableItemRemove:u.useCallback(()=>N(C=>C-1),[]),children:r.jsx(Ve.div,{tabIndex:y||S===0?-1:0,"data-orientation":s,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:ke(e.onMouseDown,()=>{w.current=!0}),onFocus:ke(e.onFocus,C=>{const P=!w.current;if(C.target===C.currentTarget&&P&&!y){const R=new CustomEvent(Vh,Rk);if(C.currentTarget.dispatchEvent(R),!R.defaultPrevented){const Q=j().filter(T=>T.focusable),K=Q.find(T=>T.active),ce=Q.find(T=>T.id===g),H=[K,ce,...Q].filter(Boolean).map(T=>T.ref.current);fE(H,f)}}w.current=!1}),onBlur:ke(e.onBlur,()=>v(!1))})})}),dE="RovingFocusGroupItem",uE=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,focusable:s=!0,active:n=!1,tabStopId:o,children:i,...l}=e,c=Dr(),d=o||c,f=Pk(dE,a),h=f.currentTabStopId===d,p=lE(a),{onFocusableItemAdd:m,onFocusableItemRemove:_,currentTabStopId:g}=f;return u.useEffect(()=>{if(s)return m(),()=>_()},[s,m,_]),r.jsx(hp.ItemSlot,{scope:a,id:d,focusable:s,active:n,children:r.jsx(Ve.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:ke(e.onMouseDown,x=>{s?f.onItemFocus(d):x.preventDefault()}),onFocus:ke(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:ke(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){f.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const y=Fk(x,f.orientation,f.dir);if(y!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let b=p().filter(j=>j.focusable).map(j=>j.ref.current);if(y==="last")b.reverse();else if(y==="prev"||y==="next"){y==="prev"&&b.reverse();const j=b.indexOf(x.currentTarget);b=f.loop?qk(b,j+1):b.slice(j+1)}setTimeout(()=>fE(b))}}),children:typeof i=="function"?i({isCurrentTabStop:h,hasTabStop:g!=null}):i})})});uE.displayName=dE;var Lk={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ik(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Fk(e,t,a){const s=Ik(e.key,a);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Lk[s]}function fE(e,t=!1){const a=document.activeElement;for(const s of e)if(s===a||(s.focus({preventScroll:t}),document.activeElement!==a))return}function qk(e,t){return e.map((a,s)=>e[(t+s)%e.length])}var hE=cE,mE=uE,Of="Tabs",[Bk,Y5]=Ts(Of,[Rf]),pE=Rf(),[Uk,cv]=Bk(Of),gE=u.forwardRef((e,t)=>{const{__scopeTabs:a,value:s,onValueChange:n,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...d}=e,f=Df(l),[h,p]=Bs({prop:s,onChange:n,defaultProp:o??"",caller:Of});return r.jsx(Uk,{scope:a,baseId:Dr(),value:h,onValueChange:p,orientation:i,dir:f,activationMode:c,children:r.jsx(Ve.div,{dir:f,"data-orientation":i,...d,ref:t})})});gE.displayName=Of;var vE="TabsList",xE=u.forwardRef((e,t)=>{const{__scopeTabs:a,loop:s=!0,...n}=e,o=cv(vE,a),i=pE(a);return r.jsx(hE,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:s,children:r.jsx(Ve.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:t})})});xE.displayName=vE;var yE="TabsTrigger",bE=u.forwardRef((e,t)=>{const{__scopeTabs:a,value:s,disabled:n=!1,...o}=e,i=cv(yE,a),l=pE(a),c=wE(i.baseId,s),d=SE(i.baseId,s),f=s===i.value;return r.jsx(mE,{asChild:!0,...l,focusable:!n,active:f,children:r.jsx(Ve.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:c,...o,ref:t,onMouseDown:ke(e.onMouseDown,h=>{!n&&h.button===0&&h.ctrlKey===!1?i.onValueChange(s):h.preventDefault()}),onKeyDown:ke(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(s)}),onFocus:ke(e.onFocus,()=>{const h=i.activationMode!=="manual";!f&&!n&&h&&i.onValueChange(s)})})})});bE.displayName=yE;var _E="TabsContent",jE=u.forwardRef((e,t)=>{const{__scopeTabs:a,value:s,forceMount:n,children:o,...i}=e,l=cv(_E,a),c=wE(l.baseId,s),d=SE(l.baseId,s),f=s===l.value,h=u.useRef(f);return u.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),r.jsx(qr,{present:n||f,children:({present:p})=>r.jsx(Ve.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&o})})});jE.displayName=_E;function wE(e,t){return`${e}-trigger-${t}`}function SE(e,t){return`${e}-content-${t}`}var $k=gE,EE=xE,NE=bE,CE=jE;const zf=$k,Wc=u.forwardRef(({className:e,...t},a)=>r.jsx(EE,{ref:a,className:je("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Wc.displayName=EE.displayName;const Lr=u.forwardRef(({className:e,...t},a)=>r.jsx(NE,{ref:a,className:je("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Lr.displayName=NE.displayName;const Ir=u.forwardRef(({className:e,...t},a)=>r.jsx(CE,{ref:a,className:je("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ir.displayName=CE.displayName;function Hk(){const{id:e}=Ur(),t=Aa(),{toast:a}=Jt(),[s,n]=u.useState(!0),[o,i]=u.useState(null),[l,c]=u.useState([]),[d,f]=u.useState([]),[h,p]=u.useState(!1),[m,_]=u.useState(!1),[g,x]=u.useState({nome:"",localizacao:"",latitude:"",longitude:"",responsavel:"",contato_responsavel:""});u.useEffect(()=>{e&&y()},[e]);const y=async()=>{try{n(!0);const{data:w,error:S}=await D.from("clientes").select("*").eq("id",e).single();if(S)throw S;i(w);const{data:N,error:C}=await D.from("fazendas").select("*").eq("cliente_id",e).order("nome",{ascending:!0});if(C)throw C;c(N||[]);const{data:P,error:R}=await D.from("doses_semen").select("*").eq("cliente_id",e).order("nome",{ascending:!0});if(R)throw R;f(P||[])}catch(w){a({title:"Erro ao carregar dados",description:w instanceof Error?w.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},v=w=>w.latitude&&w.longitude?`https://www.google.com/maps?q=${w.latitude},${w.longitude}`:w.localizacao?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(w.localizacao)}`:null,b=w=>w.latitude&&w.longitude?`https://waze.com/ul?ll=${w.latitude},${w.longitude}&navigate=yes`:w.localizacao?v(w):null,j=async w=>{if(w.preventDefault(),!g.nome.trim()){a({title:"Erro de validao",description:"Nome da fazenda  obrigatrio",variant:"destructive"});return}try{_(!0);const S={cliente_id:e,nome:g.nome,localizacao:g.localizacao.trim()||null,latitude:g.latitude?parseFloat(g.latitude):null,longitude:g.longitude?parseFloat(g.longitude):null,responsavel:g.responsavel.trim()||null,contato_responsavel:g.contato_responsavel.trim()||null},{error:N}=await D.from("fazendas").insert([S]);if(N)throw N;a({title:"Fazenda criada",description:"Fazenda criada com sucesso"}),p(!1),x({nome:"",localizacao:"",latitude:"",longitude:"",responsavel:"",contato_responsavel:""}),y()}catch(S){const N=S instanceof Error?S.message:"Erro desconhecido";a({title:"Erro ao criar fazenda",description:N.includes("RLS")||N.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":N,variant:"destructive"})}finally{_(!1)}};return s?r.jsx(Pt,{}):o?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>t("/clientes"),children:r.jsx(Za,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:o.nome}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Detalhes do cliente"})]})]}),r.jsx(Qi,{to:`/clientes/${e}/editar`,children:r.jsxs(G,{variant:"outline",children:[r.jsx(mc,{className:"w-4 h-4 mr-2"}),"Editar"]})})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Informaes do Cliente"})}),r.jsxs(Ne,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Nome"}),r.jsx("p",{className:"text-base text-slate-900",children:o.nome})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Telefone"}),r.jsx("p",{className:"text-base text-slate-900",children:o.telefone||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Endereo"}),r.jsx("p",{className:"text-base text-slate-900",children:o.endereco||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Cadastrado em"}),r.jsx("p",{className:"text-base text-slate-900",children:o.created_at?new Date(o.created_at).toLocaleDateString("pt-BR"):"-"})]})]})]}),r.jsxs(zf,{defaultValue:"fazendas",className:"w-full",children:[r.jsxs(Wc,{children:[r.jsxs(Lr,{value:"fazendas",children:[r.jsx(tw,{className:"w-4 h-4 mr-2"}),"Fazendas (",l.length,")"]}),r.jsxs(Lr,{value:"doses",children:[r.jsx(po,{className:"w-4 h-4 mr-2"}),"Doses de Smen (",d.length,")"]})]}),r.jsx(Ir,{value:"fazendas",children:r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Oe,{children:"Fazendas do Cliente"}),r.jsxs(zt,{open:h,onOpenChange:p,children:[r.jsx(As,{asChild:!0,children:r.jsxs(G,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Ja,{className:"w-4 h-4 mr-2"}),"Nova Fazenda"]})}),r.jsxs(St,{className:"max-w-md",children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Criar Nova Fazenda"}),r.jsxs(Mt,{children:["Criar fazenda para ",o.nome]})]}),r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"nome",children:"Nome da Fazenda *"}),r.jsx(de,{id:"nome",value:g.nome,onChange:w=>x({...g,nome:w.target.value}),placeholder:"Nome da fazenda",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"localizacao",children:"Localizao"}),r.jsx(de,{id:"localizacao",value:g.localizacao,onChange:w=>x({...g,localizacao:w.target.value}),placeholder:"Cidade, Estado"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"latitude",children:"Latitude"}),r.jsx(de,{id:"latitude",type:"number",step:"any",value:g.latitude,onChange:w=>x({...g,latitude:w.target.value}),placeholder:"-23.550520"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"longitude",children:"Longitude"}),r.jsx(de,{id:"longitude",type:"number",step:"any",value:g.longitude,onChange:w=>x({...g,longitude:w.target.value}),placeholder:"-46.633308"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"responsavel",children:"Responsvel"}),r.jsx(de,{id:"responsavel",value:g.responsavel,onChange:w=>x({...g,responsavel:w.target.value}),placeholder:"Nome do responsvel"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"contato_responsavel",children:"Contato do Responsvel"}),r.jsx(de,{id:"contato_responsavel",value:g.contato_responsavel,onChange:w=>x({...g,contato_responsavel:w.target.value}),placeholder:"Telefone ou email"})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(G,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:m,children:m?"Salvando...":"Criar Fazenda"}),r.jsx(G,{type:"button",variant:"outline",onClick:()=>p(!1),disabled:m,children:"Cancelar"})]})]})]})]})]})}),r.jsx(Ne,{children:r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Nome"}),r.jsx(Y,{children:"Localizao"}),r.jsx(Y,{children:"Responsvel"}),r.jsx(Y,{children:"Contato"}),r.jsx(Y,{className:"text-right",children:"Aes"})]})}),r.jsx(wt,{children:l.length===0?r.jsx(be,{children:r.jsx(I,{colSpan:5,className:"text-center text-slate-500",children:"Nenhuma fazenda cadastrada"})}):l.map(w=>r.jsxs(be,{children:[r.jsx(I,{className:"font-medium",children:r.jsx(Qi,{to:`/fazendas/${w.id}`,className:"text-green-600 hover:text-green-700 hover:underline",children:w.nome})}),r.jsx(I,{children:w.localizacao||"-"}),r.jsx(I,{children:w.responsavel||"-"}),r.jsx(I,{children:w.contato_responsavel||"-"}),r.jsx(I,{className:"text-right",children:r.jsxs("div",{className:"flex gap-2 justify-end",children:[v(w)&&r.jsxs(G,{variant:"outline",size:"sm",onClick:()=>window.open(v(w),"_blank"),children:[r.jsx(Cg,{className:"w-4 h-4 mr-1"}),"Maps"]}),b(w)&&r.jsxs(G,{variant:"outline",size:"sm",onClick:()=>window.open(b(w),"_blank"),children:[r.jsx(aw,{className:"w-4 h-4 mr-1"}),"Waze"]})]})})]},w.id))})]})})]})}),r.jsx(Ir,{value:"doses",children:r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Doses de Smen"})}),r.jsx(Ne,{children:r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Nome (Touro)"}),r.jsx(Y,{children:"Raa"}),r.jsx(Y,{children:"Tipo"}),r.jsx(Y,{children:"Quantidade"})]})}),r.jsx(wt,{children:d.length===0?r.jsx(be,{children:r.jsx(I,{colSpan:4,className:"text-center text-slate-500",children:"Nenhuma dose de smen cadastrada"})}):d.map(w=>r.jsxs(be,{children:[r.jsx(I,{className:"font-medium",children:w.nome}),r.jsx(I,{children:w.raca||"-"}),r.jsx(I,{children:w.tipo_semen||"-"}),r.jsx(I,{children:w.quantidade??"-"})]},w.id))})]})})]})})]})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Cliente no encontrado"}),r.jsx(G,{onClick:()=>t("/clientes"),className:"mt-4",children:"Voltar para Clientes"})]})}function Vk(){const[e,t]=u.useState([]),[a,s]=u.useState(!0),{toast:n}=Jt(),o=Aa();u.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const{data:l,error:c}=await D.from("fazendas").select("*").order("nome",{ascending:!0});if(c)throw c;const d=[...new Set(l==null?void 0:l.map(_=>_.cliente_id))],{data:f,error:h}=await D.from("clientes").select("id, nome").in("id",d);if(h)throw h;const p=new Map(f==null?void 0:f.map(_=>[_.id,_.nome])),m=l==null?void 0:l.map(_=>({..._,cliente_nome:p.get(_.cliente_id)}));t(m||[])}catch(l){n({title:"Erro ao carregar dados",description:l instanceof Error?l.message:"Erro desconhecido",variant:"destructive"})}finally{s(!1)}};return a?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Fazendas"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar fazendas do sistema"})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Lista de Fazendas"})}),r.jsx(Ne,{children:r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Nome"}),r.jsx(Y,{children:"Cliente"}),r.jsx(Y,{children:"Responsvel"}),r.jsx(Y,{children:"Contato"}),r.jsx(Y,{children:"Localizao"})]})}),r.jsx(wt,{children:e.length===0?r.jsx(be,{children:r.jsx(I,{colSpan:5,className:"text-center text-slate-500",children:"Nenhuma fazenda cadastrada"})}):e.map(l=>r.jsxs(be,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>o(`/fazendas/${l.id}`),children:[r.jsx(I,{className:"font-medium text-green-600",children:l.nome}),r.jsx(I,{children:l.cliente_nome||"-"}),r.jsx(I,{children:l.responsavel||"-"}),r.jsx(I,{children:l.contato_responsavel||"-"}),r.jsx(I,{children:l.localizacao||"-"})]},l.id))})]})})]})]})}const Gk=il("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Xe({className:e,variant:t,...a}){return r.jsx("div",{className:je(Gk({variant:t}),e),...a})}function Yk(){const{id:e}=Ur(),t=Aa(),{toast:a}=Jt(),[s,n]=u.useState(!0),[o,i]=u.useState(null),[l,c]=u.useState(""),[d,f]=u.useState([]),[h,p]=u.useState([]),[m,_]=u.useState([]),[g,x]=u.useState([]),[y,v]=u.useState({total_ultimos_60_dias:0,sem_diagnostico:0});u.useEffect(()=>{e&&b()},[e]);const b=async()=>{try{n(!0);const{data:S,error:N}=await D.from("fazendas").select("*").eq("id",e).single();if(N)throw N;i(S);const{data:C,error:P}=await D.from("clientes").select("nome").eq("id",S.cliente_id).single();if(P)throw P;c(C.nome);const{data:R,error:Q}=await D.from("protocolos_sincronizacao").select("id, data_inicio, data_retirada, status").eq("fazenda_id",e).eq("status","ABERTO").order("data_inicio",{ascending:!1});if(Q)throw Q;f(R||[]);try{const{data:X,error:$}=await D.from("v_protocolo_receptoras_status").select("*").in("protocolo_id",(R==null?void 0:R.map(ne=>ne.id))||[]).eq("fase_ciclo","SINCRONIZADA");!$&&X&&p(X.map(ne=>({brinco:ne.brinco,fase_ciclo:ne.fase_ciclo,status_efetivo:ne.status_efetivo,motivo_efetivo:ne.motivo_efetivo,data_te_prevista:ne.data_te_prevista,data_limite_te:ne.data_limite_te})))}catch{console.log("View v_protocolo_receptoras_status not available")}const{data:K,error:ce}=await D.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",e);if(ce)throw ce;const L=(K==null?void 0:K.map(X=>X.receptora_id))||[],H=new Date;H.setDate(H.getDate()-60);const{data:T,error:V}=await D.from("transferencias_embrioes").select("id, receptora_id, data_te").in("receptora_id",L.length>0?L:["00000000-0000-0000-0000-000000000000"]).gte("data_te",H.toISOString().split("T")[0]);if(V)throw V;const F=(T==null?void 0:T.length)||0;if(T&&T.length>0){const X=T.map(le=>le.receptora_id),{data:$,error:ne}=await D.from("diagnosticos_gestacao").select("receptora_id").in("receptora_id",X);if(!ne){const le=new Set($==null?void 0:$.map(A=>A.receptora_id)),z=T.filter(A=>!le.has(A.receptora_id)).length;v({total_ultimos_60_dias:F,sem_diagnostico:z})}}const{data:E,error:O}=await D.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",e);if(!O&&E){const X=E.map($=>$.receptora_id);if(X.length>0){const{data:$,error:ne}=await D.from("receptoras").select("id, identificacao, nome, status_reprodutivo").in("id",X).order("identificacao",{ascending:!0});ne||_(($==null?void 0:$.map(le=>({receptora_id:le.id,brinco:le.identificacao,nome:le.nome,status_reprodutivo:le.status_reprodutivo})))||[])}else _([])}const{data:U,error:M}=await D.from("doadoras").select("*").eq("fazenda_id",e).order("registro",{ascending:!0});if(M)throw M;x(U||[])}catch(S){a({title:"Erro ao carregar dados",description:S instanceof Error?S.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},j=()=>o?o.latitude&&o.longitude?`https://www.google.com/maps?q=${o.latitude},${o.longitude}`:o.localizacao?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(o.localizacao)}`:null:null,w=()=>o?o.latitude&&o.longitude?`https://waze.com/ul?ll=${o.latitude},${o.longitude}&navigate=yes`:o.localizacao?j():null:null;return s?r.jsx(Pt,{}):o?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>t("/fazendas"),children:r.jsx(Za,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:o.nome}),r.jsxs("p",{className:"text-slate-600 mt-1",children:["Cliente: ",l]})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Informaes da Fazenda"})}),r.jsxs(Ne,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Nome"}),r.jsx("p",{className:"text-base text-slate-900",children:o.nome})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Cliente"}),r.jsx("p",{className:"text-base text-slate-900",children:l})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Localizao"}),r.jsx("p",{className:"text-base text-slate-900",children:o.localizacao||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Coordenadas"}),r.jsx("p",{className:"text-base text-slate-900",children:o.latitude&&o.longitude?`${o.latitude}, ${o.longitude}`:"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Responsvel"}),r.jsx("p",{className:"text-base text-slate-900",children:o.responsavel||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Contato"}),r.jsx("p",{className:"text-base text-slate-900",children:o.contato_responsavel||"-"})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[j()&&r.jsxs(G,{variant:"outline",onClick:()=>window.open(j(),"_blank"),children:[r.jsx(Cg,{className:"w-4 h-4 mr-2"}),"Abrir no Google Maps"]}),w()&&r.jsxs(G,{variant:"outline",onClick:()=>window.open(w(),"_blank"),children:[r.jsx(aw,{className:"w-4 h-4 mr-2"}),"Abrir no Waze"]})]})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Servios Ativos na Fazenda"})}),r.jsxs(Ne,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[r.jsx(Wj,{className:"w-5 h-5"}),"Protocolos em Andamento (",d.length,")"]}),d.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"Nenhum protocolo ativo"}):r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"ID"}),r.jsx(Y,{children:"Data Incio"}),r.jsx(Y,{children:"Data Retirada"}),r.jsx(Y,{children:"Status"})]})}),r.jsx(wt,{children:d.map(S=>r.jsxs(be,{children:[r.jsx(I,{className:"font-mono text-xs",children:S.id.substring(0,8)}),r.jsx(I,{children:new Date(S.data_inicio).toLocaleDateString("pt-BR")}),r.jsx(I,{children:S.data_retirada?new Date(S.data_retirada).toLocaleDateString("pt-BR"):"-"}),r.jsx(I,{children:r.jsx(Xe,{variant:"default",children:S.status||"ABERTO"})})]},S.id))})]})]}),h.length>0&&r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-3",children:["Receptoras Sincronizadas Aguardando TE (",h.length,")"]}),r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Brinco"}),r.jsx(Y,{children:"Fase"}),r.jsx(Y,{children:"Status"}),r.jsx(Y,{children:"Data TE Prevista"})]})}),r.jsx(wt,{children:h.map((S,N)=>r.jsxs(be,{children:[r.jsx(I,{className:"font-medium",children:S.brinco}),r.jsx(I,{children:S.fase_ciclo||"-"}),r.jsx(I,{children:S.status_efetivo||"-"}),r.jsx(I,{children:S.data_te_prevista?new Date(S.data_te_prevista).toLocaleDateString("pt-BR"):"-"})]},N))})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Transferncias Recentes"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(Ee,{children:r.jsxs(Ne,{className:"pt-6",children:[r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:y.total_ultimos_60_dias}),r.jsx("p",{className:"text-sm text-slate-500",children:"ltimos 60 dias"})]})}),r.jsx(Ee,{children:r.jsxs(Ne,{className:"pt-6",children:[r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:y.sem_diagnostico}),r.jsx("p",{className:"text-sm text-slate-500",children:"Aguardando diagnstico"})]})})]})]})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsxs(Oe,{className:"flex items-center gap-2",children:[r.jsx(Jj,{className:"w-5 h-5"}),"Receptoras da Fazenda (",m.length,")"]})}),r.jsx(Ne,{children:m.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"Nenhuma receptora vinculada"}):r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Brinco"}),r.jsx(Y,{children:"Nome"}),r.jsx(Y,{children:"Status Reprodutivo"})]})}),r.jsx(wt,{children:m.map(S=>r.jsxs(be,{children:[r.jsx(I,{className:"font-medium",children:S.brinco}),r.jsx(I,{children:S.nome||"-"}),r.jsx(I,{children:S.status_reprodutivo||"-"})]},S.receptora_id))})]})})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsxs(Oe,{className:"flex items-center gap-2",children:[r.jsx(po,{className:"w-5 h-5"}),"Doadoras da Fazenda (",g.length,")"]})}),r.jsx(Ne,{children:g.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"Nenhuma doadora cadastrada"}):r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Registro"}),r.jsx(Y,{children:"Nome"}),r.jsx(Y,{children:"Raa"}),r.jsx(Y,{children:"GPTA"}),r.jsx(Y,{children:"Controle Leiteiro"}),r.jsx(Y,{children:"Beta Casena"})]})}),r.jsx(wt,{children:g.map(S=>r.jsxs(be,{children:[r.jsx(I,{className:"font-medium",children:S.registro}),r.jsx(I,{children:S.nome||"-"}),r.jsx(I,{children:S.raca||"-"}),r.jsx(I,{children:S.gpta||"-"}),r.jsx(I,{children:S.controle_leiteiro||"-"}),r.jsx(I,{children:S.beta_caseina||"-"})]},S.id))})]})})]})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Fazenda no encontrada"}),r.jsx(G,{onClick:()=>t("/fazendas"),className:"mt-4",children:"Voltar para Fazendas"})]})}function uy(e,[t,a]){return Math.min(a,Math.max(t,e))}function AE(e){const t=u.useRef({value:e,previous:e});return u.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Qk=[" ","Enter","ArrowUp","ArrowDown"],Kk=[" ","Enter"],wo="Select",[Mf,Pf,Xk]=bg(wo),[ml,Q5]=Ts(wo,[Xk,ul]),kf=ul(),[Zk,In]=ml(wo),[Jk,Wk]=ml(wo),TE=e=>{const{__scopeSelect:t,children:a,open:s,defaultOpen:n,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:d,name:f,autoComplete:h,disabled:p,required:m,form:_}=e,g=kf(t),[x,y]=u.useState(null),[v,b]=u.useState(null),[j,w]=u.useState(!1),S=Df(d),[N,C]=Bs({prop:s,defaultProp:n??!1,onChange:o,caller:wo}),[P,R]=Bs({prop:i,defaultProp:l,onChange:c,caller:wo}),Q=u.useRef(null),K=x?_||!!x.closest("form"):!0,[ce,L]=u.useState(new Set),H=Array.from(ce).map(T=>T.props.value).join(";");return r.jsx(Pw,{...g,children:r.jsxs(Zk,{required:m,scope:t,trigger:x,onTriggerChange:y,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:j,onValueNodeHasChildrenChange:w,contentId:Dr(),value:P,onValueChange:R,open:N,onOpenChange:C,dir:S,triggerPointerDownPosRef:Q,disabled:p,children:[r.jsx(Mf.Provider,{scope:t,children:r.jsx(Jk,{scope:e.__scopeSelect,onNativeOptionAdd:u.useCallback(T=>{L(V=>new Set(V).add(T))},[]),onNativeOptionRemove:u.useCallback(T=>{L(V=>{const F=new Set(V);return F.delete(T),F})},[]),children:a})}),K?r.jsxs(WE,{"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:h,value:P,onChange:T=>R(T.target.value),disabled:p,form:_,children:[P===void 0?r.jsx("option",{value:""}):null,Array.from(ce)]},H):null]})})};TE.displayName=wo;var DE="SelectTrigger",RE=u.forwardRef((e,t)=>{const{__scopeSelect:a,disabled:s=!1,...n}=e,o=kf(a),i=In(DE,a),l=i.disabled||s,c=vt(t,i.onTriggerChange),d=Pf(a),f=u.useRef("touch"),[h,p,m]=tN(g=>{const x=d().filter(b=>!b.disabled),y=x.find(b=>b.value===i.value),v=aN(x,g,y);v!==void 0&&i.onValueChange(v.value)}),_=g=>{l||(i.onOpenChange(!0),m()),g&&(i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return r.jsx(ff,{asChild:!0,...o,children:r.jsx(Ve.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":eN(i.value)?"":void 0,...n,ref:c,onClick:ke(n.onClick,g=>{g.currentTarget.focus(),f.current!=="mouse"&&_(g)}),onPointerDown:ke(n.onPointerDown,g=>{f.current=g.pointerType;const x=g.target;x.hasPointerCapture(g.pointerId)&&x.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(_(g),g.preventDefault())}),onKeyDown:ke(n.onKeyDown,g=>{const x=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(x&&g.key===" ")&&Qk.includes(g.key)&&(_(),g.preventDefault())})})})});RE.displayName=DE;var OE="SelectValue",zE=u.forwardRef((e,t)=>{const{__scopeSelect:a,className:s,style:n,children:o,placeholder:i="",...l}=e,c=In(OE,a),{onValueNodeHasChildrenChange:d}=c,f=o!==void 0,h=vt(t,c.onValueNodeChange);return Ca(()=>{d(f)},[d,f]),r.jsx(Ve.span,{...l,ref:h,style:{pointerEvents:"none"},children:eN(c.value)?r.jsx(r.Fragment,{children:i}):o})});zE.displayName=OE;var e6="SelectIcon",ME=u.forwardRef((e,t)=>{const{__scopeSelect:a,children:s,...n}=e;return r.jsx(Ve.span,{"aria-hidden":!0,...n,ref:t,children:s||""})});ME.displayName=e6;var t6="SelectPortal",PE=e=>r.jsx(qc,{asChild:!0,...e});PE.displayName=t6;var So="SelectContent",kE=u.forwardRef((e,t)=>{const a=In(So,e.__scopeSelect),[s,n]=u.useState();if(Ca(()=>{n(new DocumentFragment)},[]),!a.open){const o=s;return o?Oo.createPortal(r.jsx(LE,{scope:e.__scopeSelect,children:r.jsx(Mf.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),o):null}return r.jsx(IE,{...e,ref:t})});kE.displayName=So;var Ms=10,[LE,Fn]=ml(So),a6="SelectContentImpl",s6=bo("SelectContent.RemoveScroll"),IE=u.forwardRef((e,t)=>{const{__scopeSelect:a,position:s="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:_,hideWhenDetached:g,avoidCollisions:x,...y}=e,v=In(So,a),[b,j]=u.useState(null),[w,S]=u.useState(null),N=vt(t,z=>j(z)),[C,P]=u.useState(null),[R,Q]=u.useState(null),K=Pf(a),[ce,L]=u.useState(!1),H=u.useRef(!1);u.useEffect(()=>{if(b)return sv(b)},[b]),av();const T=u.useCallback(z=>{const[A,...J]=K().map(ae=>ae.ref.current),[ee]=J.slice(-1),Z=document.activeElement;for(const ae of z)if(ae===Z||(ae==null||ae.scrollIntoView({block:"nearest"}),ae===A&&w&&(w.scrollTop=0),ae===ee&&w&&(w.scrollTop=w.scrollHeight),ae==null||ae.focus(),document.activeElement!==Z))return},[K,w]),V=u.useCallback(()=>T([C,b]),[T,C,b]);u.useEffect(()=>{ce&&V()},[ce,V]);const{onOpenChange:F,triggerPointerDownPosRef:E}=v;u.useEffect(()=>{if(b){let z={x:0,y:0};const A=ee=>{var Z,ae;z={x:Math.abs(Math.round(ee.pageX)-(((Z=E.current)==null?void 0:Z.x)??0)),y:Math.abs(Math.round(ee.pageY)-(((ae=E.current)==null?void 0:ae.y)??0))}},J=ee=>{z.x<=10&&z.y<=10?ee.preventDefault():b.contains(ee.target)||F(!1),document.removeEventListener("pointermove",A),E.current=null};return E.current!==null&&(document.addEventListener("pointermove",A),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",J,{capture:!0})}}},[b,F,E]),u.useEffect(()=>{const z=()=>F(!1);return window.addEventListener("blur",z),window.addEventListener("resize",z),()=>{window.removeEventListener("blur",z),window.removeEventListener("resize",z)}},[F]);const[O,U]=tN(z=>{const A=K().filter(Z=>!Z.disabled),J=A.find(Z=>Z.ref.current===document.activeElement),ee=aN(A,z,J);ee&&setTimeout(()=>ee.ref.current.focus())}),M=u.useCallback((z,A,J)=>{const ee=!H.current&&!J;(v.value!==void 0&&v.value===A||ee)&&(P(z),ee&&(H.current=!0))},[v.value]),X=u.useCallback(()=>b==null?void 0:b.focus(),[b]),$=u.useCallback((z,A,J)=>{const ee=!H.current&&!J;(v.value!==void 0&&v.value===A||ee)&&Q(z)},[v.value]),ne=s==="popper"?mp:FE,le=ne===mp?{side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:_,hideWhenDetached:g,avoidCollisions:x}:{};return r.jsx(LE,{scope:a,content:b,viewport:w,onViewportChange:S,itemRefCallback:M,selectedItem:C,onItemLeave:X,itemTextRefCallback:$,focusSelectedItem:V,selectedItemText:R,position:s,isPositioned:ce,searchRef:O,children:r.jsx(Cf,{as:s6,allowPinchZoom:!0,children:r.jsx(Ef,{asChild:!0,trapped:v.open,onMountAutoFocus:z=>{z.preventDefault()},onUnmountAutoFocus:ke(n,z=>{var A;(A=v.trigger)==null||A.focus({preventScroll:!0}),z.preventDefault()}),children:r.jsx(ol,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:z=>z.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:r.jsx(ne,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:z=>z.preventDefault(),...y,...le,onPlaced:()=>L(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:ke(y.onKeyDown,z=>{const A=z.ctrlKey||z.altKey||z.metaKey;if(z.key==="Tab"&&z.preventDefault(),!A&&z.key.length===1&&U(z.key),["ArrowUp","ArrowDown","Home","End"].includes(z.key)){let ee=K().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);if(["ArrowUp","End"].includes(z.key)&&(ee=ee.slice().reverse()),["ArrowUp","ArrowDown"].includes(z.key)){const Z=z.target,ae=ee.indexOf(Z);ee=ee.slice(ae+1)}setTimeout(()=>T(ee)),z.preventDefault()}})})})})})})});IE.displayName=a6;var r6="SelectItemAlignedPosition",FE=u.forwardRef((e,t)=>{const{__scopeSelect:a,onPlaced:s,...n}=e,o=In(So,a),i=Fn(So,a),[l,c]=u.useState(null),[d,f]=u.useState(null),h=vt(t,N=>f(N)),p=Pf(a),m=u.useRef(!1),_=u.useRef(!0),{viewport:g,selectedItem:x,selectedItemText:y,focusSelectedItem:v}=i,b=u.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&g&&x&&y){const N=o.trigger.getBoundingClientRect(),C=d.getBoundingClientRect(),P=o.valueNode.getBoundingClientRect(),R=y.getBoundingClientRect();if(o.dir!=="rtl"){const Z=R.left-C.left,ae=P.left-Z,ie=N.left-ae,pe=N.width+ie,ge=Math.max(pe,C.width),Le=window.innerWidth-Ms,te=uy(ae,[Ms,Math.max(Ms,Le-ge)]);l.style.minWidth=pe+"px",l.style.left=te+"px"}else{const Z=C.right-R.right,ae=window.innerWidth-P.right-Z,ie=window.innerWidth-N.right-ae,pe=N.width+ie,ge=Math.max(pe,C.width),Le=window.innerWidth-Ms,te=uy(ae,[Ms,Math.max(Ms,Le-ge)]);l.style.minWidth=pe+"px",l.style.right=te+"px"}const Q=p(),K=window.innerHeight-Ms*2,ce=g.scrollHeight,L=window.getComputedStyle(d),H=parseInt(L.borderTopWidth,10),T=parseInt(L.paddingTop,10),V=parseInt(L.borderBottomWidth,10),F=parseInt(L.paddingBottom,10),E=H+T+ce+F+V,O=Math.min(x.offsetHeight*5,E),U=window.getComputedStyle(g),M=parseInt(U.paddingTop,10),X=parseInt(U.paddingBottom,10),$=N.top+N.height/2-Ms,ne=K-$,le=x.offsetHeight/2,z=x.offsetTop+le,A=H+T+z,J=E-A;if(A<=$){const Z=Q.length>0&&x===Q[Q.length-1].ref.current;l.style.bottom="0px";const ae=d.clientHeight-g.offsetTop-g.offsetHeight,ie=Math.max(ne,le+(Z?X:0)+ae+V),pe=A+ie;l.style.height=pe+"px"}else{const Z=Q.length>0&&x===Q[0].ref.current;l.style.top="0px";const ie=Math.max($,H+g.offsetTop+(Z?M:0)+le)+J;l.style.height=ie+"px",g.scrollTop=A-$+g.offsetTop}l.style.margin=`${Ms}px 0`,l.style.minHeight=O+"px",l.style.maxHeight=K+"px",s==null||s(),requestAnimationFrame(()=>m.current=!0)}},[p,o.trigger,o.valueNode,l,d,g,x,y,o.dir,s]);Ca(()=>b(),[b]);const[j,w]=u.useState();Ca(()=>{d&&w(window.getComputedStyle(d).zIndex)},[d]);const S=u.useCallback(N=>{N&&_.current===!0&&(b(),v==null||v(),_.current=!1)},[b,v]);return r.jsx(o6,{scope:a,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:r.jsx(Ve.div,{...n,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});FE.displayName=r6;var n6="SelectPopperPosition",mp=u.forwardRef((e,t)=>{const{__scopeSelect:a,align:s="start",collisionPadding:n=Ms,...o}=e,i=kf(a);return r.jsx(Ug,{...i,...o,ref:t,align:s,collisionPadding:n,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});mp.displayName=n6;var[o6,dv]=ml(So,{}),pp="SelectViewport",qE=u.forwardRef((e,t)=>{const{__scopeSelect:a,nonce:s,...n}=e,o=Fn(pp,a),i=dv(pp,a),l=vt(t,o.onViewportChange),c=u.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(Mf.Slot,{scope:a,children:r.jsx(Ve.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:ke(n.onScroll,d=>{const f=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=i;if(p!=null&&p.current&&h){const m=Math.abs(c.current-f.scrollTop);if(m>0){const _=window.innerHeight-Ms*2,g=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),y=Math.max(g,x);if(y<_){const v=y+m,b=Math.min(_,v),j=v-b;h.style.height=b+"px",h.style.bottom==="0px"&&(f.scrollTop=j>0?j:0,h.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});qE.displayName=pp;var BE="SelectGroup",[i6,l6]=ml(BE),c6=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e,n=Dr();return r.jsx(i6,{scope:a,id:n,children:r.jsx(Ve.div,{role:"group","aria-labelledby":n,...s,ref:t})})});c6.displayName=BE;var UE="SelectLabel",$E=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e,n=l6(UE,a);return r.jsx(Ve.div,{id:n.id,...s,ref:t})});$E.displayName=UE;var Iu="SelectItem",[d6,HE]=ml(Iu),VE=u.forwardRef((e,t)=>{const{__scopeSelect:a,value:s,disabled:n=!1,textValue:o,...i}=e,l=In(Iu,a),c=Fn(Iu,a),d=l.value===s,[f,h]=u.useState(o??""),[p,m]=u.useState(!1),_=vt(t,v=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,v,s,n)}),g=Dr(),x=u.useRef("touch"),y=()=>{n||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(d6,{scope:a,value:s,disabled:n,textId:g,isSelected:d,onItemTextChange:u.useCallback(v=>{h(b=>b||((v==null?void 0:v.textContent)??"").trim())},[]),children:r.jsx(Mf.ItemSlot,{scope:a,value:s,disabled:n,textValue:f,children:r.jsx(Ve.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...i,ref:_,onFocus:ke(i.onFocus,()=>m(!0)),onBlur:ke(i.onBlur,()=>m(!1)),onClick:ke(i.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:ke(i.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:ke(i.onPointerDown,v=>{x.current=v.pointerType}),onPointerMove:ke(i.onPointerMove,v=>{var b;x.current=v.pointerType,n?(b=c.onItemLeave)==null||b.call(c):x.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ke(i.onPointerLeave,v=>{var b;v.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:ke(i.onKeyDown,v=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&v.key===" "||(Kk.includes(v.key)&&y(),v.key===" "&&v.preventDefault())})})})})});VE.displayName=Iu;var Ml="SelectItemText",GE=u.forwardRef((e,t)=>{const{__scopeSelect:a,className:s,style:n,...o}=e,i=In(Ml,a),l=Fn(Ml,a),c=HE(Ml,a),d=Wk(Ml,a),[f,h]=u.useState(null),p=vt(t,y=>h(y),c.onItemTextChange,y=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,y,c.value,c.disabled)}),m=f==null?void 0:f.textContent,_=u.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:x}=d;return Ca(()=>(g(_),()=>x(_)),[g,x,_]),r.jsxs(r.Fragment,{children:[r.jsx(Ve.span,{id:c.textId,...o,ref:p}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Oo.createPortal(o.children,i.valueNode):null]})});GE.displayName=Ml;var YE="SelectItemIndicator",QE=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e;return HE(YE,a).isSelected?r.jsx(Ve.span,{"aria-hidden":!0,...s,ref:t}):null});QE.displayName=YE;var gp="SelectScrollUpButton",KE=u.forwardRef((e,t)=>{const a=Fn(gp,e.__scopeSelect),s=dv(gp,e.__scopeSelect),[n,o]=u.useState(!1),i=vt(t,s.onScrollButtonChange);return Ca(()=>{if(a.viewport&&a.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=a.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[a.viewport,a.isPositioned]),n?r.jsx(ZE,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=a;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});KE.displayName=gp;var vp="SelectScrollDownButton",XE=u.forwardRef((e,t)=>{const a=Fn(vp,e.__scopeSelect),s=dv(vp,e.__scopeSelect),[n,o]=u.useState(!1),i=vt(t,s.onScrollButtonChange);return Ca(()=>{if(a.viewport&&a.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<d;o(f)};const c=a.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[a.viewport,a.isPositioned]),n?r.jsx(ZE,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=a;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});XE.displayName=vp;var ZE=u.forwardRef((e,t)=>{const{__scopeSelect:a,onAutoScroll:s,...n}=e,o=Fn("SelectScrollButton",a),i=u.useRef(null),l=Pf(a),c=u.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return u.useEffect(()=>()=>c(),[c]),Ca(()=>{var f;const d=l().find(h=>h.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),r.jsx(Ve.div,{"aria-hidden":!0,...n,ref:t,style:{flexShrink:0,...n.style},onPointerDown:ke(n.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(s,50))}),onPointerMove:ke(n.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),i.current===null&&(i.current=window.setInterval(s,50))}),onPointerLeave:ke(n.onPointerLeave,()=>{c()})})}),u6="SelectSeparator",JE=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e;return r.jsx(Ve.div,{"aria-hidden":!0,...s,ref:t})});JE.displayName=u6;var xp="SelectArrow",f6=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e,n=kf(a),o=In(xp,a),i=Fn(xp,a);return o.open&&i.position==="popper"?r.jsx($g,{...n,...s,ref:t}):null});f6.displayName=xp;var h6="SelectBubbleInput",WE=u.forwardRef(({__scopeSelect:e,value:t,...a},s)=>{const n=u.useRef(null),o=vt(s,n),i=AE(t);return u.useEffect(()=>{const l=n.current;if(!l)return;const c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&f){const h=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(h)}},[i,t]),r.jsx(Ve.select,{...a,style:{...Aj,...a.style},ref:o,defaultValue:t})});WE.displayName=h6;function eN(e){return e===""||e===void 0}function tN(e){const t=Ns(e),a=u.useRef(""),s=u.useRef(0),n=u.useCallback(i=>{const l=a.current+i;t(l),function c(d){a.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=u.useCallback(()=>{a.current="",window.clearTimeout(s.current)},[]);return u.useEffect(()=>()=>window.clearTimeout(s.current),[]),[a,n,o]}function aN(e,t,a){const n=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=a?e.indexOf(a):-1;let i=m6(e,Math.max(o,0));n.length===1&&(i=i.filter(d=>d!==a));const c=i.find(d=>d.textValue.toLowerCase().startsWith(n.toLowerCase()));return c!==a?c:void 0}function m6(e,t){return e.map((a,s)=>e[(t+s)%e.length])}var p6=TE,sN=RE,g6=zE,v6=ME,x6=PE,rN=kE,y6=qE,nN=$E,oN=VE,b6=GE,_6=QE,iN=KE,lN=XE,cN=JE;const at=p6,st=g6,Ze=u.forwardRef(({className:e,children:t,...a},s)=>r.jsxs(sN,{ref:s,className:je("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,r.jsx(v6,{asChild:!0,children:r.jsx(Eg,{className:"h-4 w-4 opacity-50"})})]}));Ze.displayName=sN.displayName;const dN=u.forwardRef(({className:e,...t},a)=>r.jsx(iN,{ref:a,className:je("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(ew,{className:"h-4 w-4"})}));dN.displayName=iN.displayName;const uN=u.forwardRef(({className:e,...t},a)=>r.jsx(lN,{ref:a,className:je("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(Eg,{className:"h-4 w-4"})}));uN.displayName=lN.displayName;const Je=u.forwardRef(({className:e,children:t,position:a="popper",...s},n)=>r.jsx(x6,{children:r.jsxs(rN,{ref:n,className:je("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...s,children:[r.jsx(dN,{}),r.jsx(y6,{className:je("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(uN,{})]})}));Je.displayName=rN.displayName;const j6=u.forwardRef(({className:e,...t},a)=>r.jsx(nN,{ref:a,className:je("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));j6.displayName=nN.displayName;const _e=u.forwardRef(({className:e,children:t,...a},s)=>r.jsxs(oN,{ref:s,className:je("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(_6,{children:r.jsx(Eu,{className:"h-4 w-4"})})}),r.jsx(b6,{children:t})]}));_e.displayName=oN.displayName;const w6=u.forwardRef(({className:e,...t},a)=>r.jsx(cN,{ref:a,className:je("-mx-1 my-1 h-px bg-muted",e),...t}));w6.displayName=cN.displayName;function S6({doadoraId:e,doadoraNome:t,open:a,onClose:s}){const[n,o]=u.useState([]),[i,l]=u.useState(!1),{toast:c}=Jt();u.useEffect(()=>{a&&e&&d()},[a,e]);const d=async()=>{try{l(!0);const{data:f,error:h}=await D.from("aspiracoes_doadoras").select("*").eq("doadora_id",e).order("data_aspiracao",{ascending:!1});if(h)throw h;o(f||[])}catch(f){c({title:"Erro ao carregar histrico",description:f instanceof Error?f.message:"Erro desconhecido",variant:"destructive"})}finally{l(!1)}};return r.jsx(zt,{open:a,onOpenChange:s,children:r.jsxs(St,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Histrico de Aspiraes"}),r.jsx(Mt,{children:t?`Aspiraes da doadora: ${t}`:"Histrico completo de aspiraes"})]}),i?r.jsx("div",{className:"py-8",children:r.jsx(Pt,{})}):r.jsx("div",{className:"mt-4",children:n.length===0?r.jsx("p",{className:"text-center text-slate-500 py-8",children:"Nenhuma aspirao registrada para esta doadora"}):r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Data"}),r.jsx(Y,{children:"Quantidade de Ocitos"}),r.jsx(Y,{children:"Veterinrio"}),r.jsx(Y,{children:"Tcnico"})]})}),r.jsx(wt,{children:n.map(f=>r.jsxs(be,{children:[r.jsx(I,{children:Bt(f.data_aspiracao)}),r.jsx(I,{className:"font-medium",children:f.total_oocitos??"-"}),r.jsx(I,{children:f.veterinario_responsavel||"-"}),r.jsx(I,{children:f.tecnico_responsavel||"-"})]},f.id))})]})})]})})}function E6(){var V,F;const e=Aa(),[t,a]=u.useState([]),[s,n]=u.useState([]),[o,i]=u.useState(null),[l,c]=u.useState([]),[d,f]=u.useState(""),[h,p]=u.useState(""),[m,_]=u.useState(!0),[g,x]=u.useState(!1),[y,v]=u.useState(!1),{toast:b}=Jt(),[j,w]=u.useState({registro:"",raca:"",racaCustom:""}),S=["Holandesa","Jersey","Gir","Girolando"],[N,C]=u.useState("");u.useEffect(()=>{R()},[]),u.useEffect(()=>{d?Q():(a([]),n([]))},[d]),u.useEffect(()=>{P()},[h,t]);const P=()=>{if(!h.trim()){n(t);return}const E=h.toLowerCase(),O=t.filter(U=>{var M,X,$;return((M=U.nome)==null?void 0:M.toLowerCase().includes(E))||((X=U.registro)==null?void 0:X.toLowerCase().includes(E))||(($=U.raca)==null?void 0:$.toLowerCase().includes(E))});n(O)},R=async()=>{try{_(!0);const{data:E,error:O}=await D.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(O)throw O;c(E||[])}catch(E){b({title:"Erro ao carregar fazendas",description:E instanceof Error?E.message:"Erro desconhecido",variant:"destructive"})}finally{_(!1)}},Q=async()=>{try{_(!0);const{data:E,error:O}=await D.from("doadoras").select("*").eq("fazenda_id",d).order("created_at",{ascending:!1});if(O)throw O;const U=await Promise.all((E||[]).map(async M=>{const{data:X,error:$}=await D.from("aspiracoes_doadoras").select("total_oocitos, data_aspiracao").eq("doadora_id",M.id).order("data_aspiracao",{ascending:!1}).limit(1).maybeSingle();return $||!X?{...M,ultima_aspiracao_total_oocitos:void 0,ultima_aspiracao_data:void 0}:{...M,ultima_aspiracao_total_oocitos:X.total_oocitos,ultima_aspiracao_data:X.data_aspiracao}}));a(U),n(U)}catch(E){b({title:"Erro ao carregar doadoras",description:E instanceof Error?E.message:"Erro desconhecido",variant:"destructive"})}finally{_(!1)}},K=E=>{if(!E)return"-";switch(E){case"1_estrela":return r.jsx("div",{className:"flex items-center gap-1",children:r.jsx(Uo,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})});case"2_estrelas":return r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Uo,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),r.jsx(Uo,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})]});case"3_estrelas":return r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Uo,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),r.jsx(Uo,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),r.jsx(Uo,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})]});case"diamante":return r.jsx("div",{className:"flex items-center gap-1",children:r.jsx(XT,{className:"w-4 h-4 fill-blue-500 text-blue-500"})});default:return"-"}},ce=E=>{if(E.raca==="Gir"){const O=[];return E.gpta&&O.push(`GPTA: ${E.gpta}`),E.controle_leiteiro&&O.push(`Controle Leiteiro: ${E.controle_leiteiro}`),E.beta_caseina&&O.push(`Beta Casena: ${E.beta_caseina}`),E.link_abcz&&O.push("Link ABCZ"),O.length>0?O.join(", "):null}return null},L=()=>{w({registro:"",raca:"",racaCustom:""}),C("")},H=async E=>{if(E.preventDefault(),!d){b({title:"Erro de validao",description:"Selecione a fazenda primeiro",variant:"destructive"});return}if(!j.registro.trim()){b({title:"Erro de validao",description:"Registro  obrigatrio",variant:"destructive"});return}if(!(N==="Outra"?j.racaCustom.trim():j.raca.trim())){b({title:"Erro de validao",description:"Raa  obrigatria",variant:"destructive"});return}try{v(!0);const U=N==="Outra"?j.racaCustom.trim():j.raca.trim(),M={fazenda_id:d,registro:j.registro.trim(),raca:U},{data:X,error:$}=await D.from("doadoras").insert([M]).select().single();if($)throw $;b({title:"Doadora criada",description:"Doadora criada com sucesso"}),x(!1),L(),Q(),X!=null&&X.id&&e(`/doadoras/${X.id}`)}catch(U){const M=U instanceof Error?U.message:"Erro desconhecido";b({title:"Erro ao criar doadora",description:M.includes("RLS")||M.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":M,variant:"destructive"})}finally{v(!1)}},T=E=>{x(E),E||L()};return m&&l.length===0?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Doadoras"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar doadoras do sistema"})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Selecione a Fazenda"})}),r.jsx(Ne,{children:r.jsxs(at,{value:d,onValueChange:f,children:[r.jsx(Ze,{className:"w-full",children:r.jsx(st,{placeholder:"Selecione uma fazenda para visualizar doadoras"})}),r.jsx(Je,{children:l.map(E=>r.jsx(_e,{value:E.id,children:E.nome},E.id))})]})})]}),d?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-4 flex-1",children:r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Tg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),r.jsx(de,{placeholder:"Buscar por nome ou registro...",value:h,onChange:E=>p(E.target.value),className:"pl-10"})]})}),r.jsxs(zt,{open:g,onOpenChange:T,children:[r.jsx(As,{asChild:!0,children:r.jsxs(G,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Ja,{className:"w-4 h-4 mr-2"}),"Nova Doadora"]})}),r.jsxs(St,{className:"max-w-md",children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Criar Nova Doadora"}),r.jsx(Mt,{children:"Preencha os campos bsicos. As informaes detalhadas podem ser preenchidas aps a criao."})]}),r.jsxs("form",{onSubmit:H,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"registro",children:"Registro *"}),r.jsx(de,{id:"registro",value:j.registro,onChange:E=>w({...j,registro:E.target.value}),placeholder:"Registro da doadora",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"raca",children:"Raa *"}),r.jsxs(at,{value:N,onValueChange:E=>{C(E),w(E==="Outra"?{...j,raca:"",racaCustom:""}:{...j,raca:E,racaCustom:""})},children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione a raa"})}),r.jsxs(Je,{children:[S.map(E=>r.jsx(_e,{value:E,children:E},E)),r.jsx(_e,{value:"Outra",children:"Outra"})]})]}),N==="Outra"&&r.jsx(de,{id:"raca_custom",value:j.racaCustom,onChange:E=>w({...j,racaCustom:E.target.value,raca:E.target.value}),placeholder:"Digite a raa",className:"mt-2",required:!0})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(G,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:y,children:y?"Salvando...":"Criar Doadora"}),r.jsx(G,{type:"button",variant:"outline",onClick:()=>T(!1),disabled:y,children:"Cancelar"})]})]})]})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Lista de Doadoras"})}),r.jsx(Ne,{children:m?r.jsx("div",{className:"py-8",children:r.jsx(Pt,{})}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Registro"}),r.jsx(Y,{children:"Nome"}),r.jsx(Y,{children:"ltima Aspirao"}),r.jsx(Y,{children:"Ocitos"}),r.jsx(Y,{children:"Estado"}),r.jsx(Y,{children:"Raa (Campos Especiais)"}),r.jsx(Y,{children:"Classificao"}),r.jsx(Y,{className:"text-right",children:"Aes"})]})}),r.jsx(wt,{children:s.length===0?r.jsx(be,{children:r.jsx(I,{colSpan:8,className:"text-center text-slate-500",children:h?"Nenhuma doadora encontrada":"Nenhuma doadora cadastrada nesta fazenda"})}):s.map(E=>{const O=ce(E);return r.jsxs(be,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>e(`/doadoras/${E.id}`),children:[r.jsx(I,{className:"font-medium",children:E.registro}),r.jsx(I,{children:E.nome||"-"}),r.jsx(I,{children:E.ultima_aspiracao_data?Bt(E.ultima_aspiracao_data):"-"}),r.jsx(I,{children:E.ultima_aspiracao_total_oocitos??"-"}),r.jsx(I,{children:r.jsx(Xe,{variant:E.disponivel_aspiracao?"default":"secondary",children:E.disponivel_aspiracao?"Disponvel":"Indisponvel"})}),r.jsx(I,{children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:E.raca||"-"}),O&&r.jsx("span",{className:"text-xs text-slate-500",children:O})]})}),r.jsx(I,{children:K(E.classificacao_genetica)}),r.jsx(I,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(G,{variant:"ghost",size:"sm",onClick:U=>{U.stopPropagation(),i(E.id)},title:"Ver histrico de aspiraes",children:r.jsx(Ng,{className:"w-4 h-4"})}),r.jsx(G,{variant:"ghost",size:"sm",onClick:U=>{U.stopPropagation(),e(`/doadoras/${E.id}`)},title:"Editar doadora",children:r.jsx(WT,{className:"w-4 h-4"})})]})})]},E.id)})})]})})})]}),o&&r.jsx(S6,{doadoraId:o,doadoraNome:((V=s.find(E=>E.id===o))==null?void 0:V.nome)||((F=s.find(E=>E.id===o))==null?void 0:F.registro),open:!!o,onClose:()=>i(null)})]}):r.jsx(Ee,{children:r.jsx(Ne,{className:"py-12 text-center",children:r.jsx("p",{className:"text-slate-500",children:"Selecione uma fazenda para visualizar e gerenciar doadoras"})})})]})}var Lf="Switch",[N6,K5]=Ts(Lf),[C6,A6]=N6(Lf),fN=u.forwardRef((e,t)=>{const{__scopeSwitch:a,name:s,checked:n,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:d,form:f,...h}=e,[p,m]=u.useState(null),_=vt(t,b=>m(b)),g=u.useRef(!1),x=p?f||!!p.closest("form"):!0,[y,v]=Bs({prop:n,defaultProp:o??!1,onChange:d,caller:Lf});return r.jsxs(C6,{scope:a,checked:y,disabled:l,children:[r.jsx(Ve.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":gN(y),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:_,onClick:ke(e.onClick,b=>{v(j=>!j),x&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),x&&r.jsx(pN,{control:p,bubbles:!g.current,name:s,value:c,checked:y,required:i,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});fN.displayName=Lf;var hN="SwitchThumb",mN=u.forwardRef((e,t)=>{const{__scopeSwitch:a,...s}=e,n=A6(hN,a);return r.jsx(Ve.span,{"data-state":gN(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:t})});mN.displayName=hN;var T6="SwitchBubbleInput",pN=u.forwardRef(({__scopeSwitch:e,control:t,checked:a,bubbles:s=!0,...n},o)=>{const i=u.useRef(null),l=vt(i,o),c=AE(a),d=Ew(t);return u.useEffect(()=>{const f=i.current;if(!f)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==a&&m){const _=new Event("click",{bubbles:s});m.call(f,a),f.dispatchEvent(_)}},[c,a,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:l,style:{...n.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});pN.displayName=T6;function gN(e){return e?"checked":"unchecked"}var vN=fN,D6=mN;const uv=u.forwardRef(({className:e,...t},a)=>r.jsx(vN,{className:je("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:a,children:r.jsx(D6,{className:je("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));uv.displayName=vN.displayName;function R6({value:e,onChange:t,doadoraNome:a,doadoraRegistro:s}){const n=(o,i,l)=>{t({...e,[o]:{...e[o],[i]:l}})};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Genealogia"}),r.jsx("div",{className:"bg-slate-50 rounded-lg p-6 border border-slate-200",children:r.jsxs("div",{className:"flex flex-col items-center gap-6",children:[r.jsx("div",{className:"flex flex-col items-center",children:r.jsxs("div",{className:"bg-white border-2 border-slate-400 rounded-lg p-4 shadow-sm min-w-[200px] text-center",children:[r.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-1",children:a||"Doadora"}),r.jsx("div",{className:"text-xs text-slate-600",children:s||"REGISTRO"})]})}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-3 shadow-sm min-w-[180px]",children:[r.jsx(B,{className:"text-xs text-blue-700 font-medium mb-2 block",children:"Pai"}),r.jsx(de,{placeholder:"Nome",value:e.pai.nome,onChange:o=>n("pai","nome",o.target.value),className:"mb-2 text-sm"}),r.jsx(de,{placeholder:"Registro",value:e.pai.registro,onChange:o=>n("pai","registro",o.target.value),className:"text-xs"})]}),r.jsxs("div",{className:"bg-white border-2 border-red-500 rounded-lg p-3 shadow-sm min-w-[180px]",children:[r.jsx(B,{className:"text-xs text-red-700 font-medium mb-2 block",children:"Me"}),r.jsx(de,{placeholder:"Nome",value:e.mae.nome,onChange:o=>n("mae","nome",o.target.value),className:"mb-2 text-sm"}),r.jsx(de,{placeholder:"Registro",value:e.mae.registro,onChange:o=>n("mae","registro",o.target.value),className:"text-xs"})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-3 shadow-sm min-w-[160px]",children:[r.jsx(B,{className:"text-xs text-blue-700 font-medium mb-2 block",children:"Av Paterno"}),r.jsx(de,{placeholder:"Nome",value:e.pai_pai.nome,onChange:o=>n("pai_pai","nome",o.target.value),className:"mb-2 text-xs"}),r.jsx(de,{placeholder:"Registro",value:e.pai_pai.registro,onChange:o=>n("pai_pai","registro",o.target.value),className:"text-xs"})]}),r.jsxs("div",{className:"bg-white border-2 border-red-500 rounded-lg p-3 shadow-sm min-w-[160px]",children:[r.jsx(B,{className:"text-xs text-red-700 font-medium mb-2 block",children:"Av Paterna"}),r.jsx(de,{placeholder:"Nome",value:e.pai_mae.nome,onChange:o=>n("pai_mae","nome",o.target.value),className:"mb-2 text-xs"}),r.jsx(de,{placeholder:"Registro",value:e.pai_mae.registro,onChange:o=>n("pai_mae","registro",o.target.value),className:"text-xs"})]}),r.jsxs("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-3 shadow-sm min-w-[160px]",children:[r.jsx(B,{className:"text-xs text-blue-700 font-medium mb-2 block",children:"Av Materno"}),r.jsx(de,{placeholder:"Nome",value:e.mae_pai.nome,onChange:o=>n("mae_pai","nome",o.target.value),className:"mb-2 text-xs"}),r.jsx(de,{placeholder:"Registro",value:e.mae_pai.registro,onChange:o=>n("mae_pai","registro",o.target.value),className:"text-xs"})]}),r.jsxs("div",{className:"bg-white border-2 border-red-500 rounded-lg p-3 shadow-sm min-w-[160px]",children:[r.jsx(B,{className:"text-xs text-red-700 font-medium mb-2 block",children:"Av Materna"}),r.jsx(de,{placeholder:"Nome",value:e.mae_mae.nome,onChange:o=>n("mae_mae","nome",o.target.value),className:"mb-2 text-xs"}),r.jsx(de,{placeholder:"Registro",value:e.mae_mae.registro,onChange:o=>n("mae_mae","registro",o.target.value),className:"text-xs"})]})]})]})})]})}function O6(){const{id:e}=Ur(),t=Aa(),{toast:a}=Jt(),[s,n]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(null),h=["Holandesa","Jersey","Gir","Girolando"],[p,m]=u.useState(""),[_,g]=u.useState({registro:"",nome:"",raca:"",racaCustom:"",genealogia_texto:"",foto_url:"",gpta:"",controle_leiteiro:"",beta_caseina:"",link_abcz:"",disponivel_aspiracao:!0,classificacao_genetica:""}),[x,y]=u.useState({pai:{nome:"",registro:""},mae:{nome:"",registro:""},pai_pai:{nome:"",registro:""},pai_mae:{nome:"",registro:""},mae_pai:{nome:"",registro:""},mae_mae:{nome:"",registro:""}});u.useEffect(()=>{e&&v()},[e]);const v=async()=>{var j,w;try{n(!0);const{data:S,error:N}=await D.from("doadoras").select("*").eq("id",e).single();if(N)throw N;if(c(S),S.fazenda_id){const{data:K,error:ce}=await D.from("fazendas").select("*").eq("id",S.fazenda_id).single();if(ce)throw ce;f(K)}const C=S.raca||"",P=h.includes(C);m(P?C:"Outra");let R={pai:{nome:S.pai_nome||"",registro:S.pai_registro||""},mae:{nome:S.mae_nome||"",registro:S.mae_registro||""},pai_pai:{nome:"",registro:""},pai_mae:{nome:"",registro:""},mae_pai:{nome:"",registro:""},mae_mae:{nome:"",registro:""}},Q=S.genealogia_texto||"";if(Q.includes("[GENEALOGIA_JSON]"))try{const K=Q.match(/\[GENEALOGIA_JSON\](.*?)\[\/GENEALOGIA_JSON\]/s);if(K){const ce=JSON.parse(K[1]);R={pai:ce.pai||R.pai,mae:ce.mae||R.mae,pai_pai:ce.pai_pai||R.pai_pai,pai_mae:ce.pai_mae||R.pai_mae,mae_pai:ce.mae_pai||R.mae_pai,mae_mae:ce.mae_mae||R.mae_mae},Q=Q.replace(/\[GENEALOGIA_JSON\].*?\[\/GENEALOGIA_JSON\]/s,"").trim()}}catch(K){console.warn("Erro ao parsear genealogia JSON:",K)}g({registro:S.registro||"",nome:S.nome||"",raca:P?C:"",racaCustom:P?"":C,genealogia_texto:Q,foto_url:S.foto_url||"",gpta:((j=S.gpta)==null?void 0:j.toString())||"",controle_leiteiro:((w=S.controle_leiteiro)==null?void 0:w.toString())||"",beta_caseina:S.beta_caseina||"",link_abcz:S.link_abcz||"",disponivel_aspiracao:S.disponivel_aspiracao??!0,classificacao_genetica:S.classificacao_genetica||""}),y(R)}catch(S){a({title:"Erro ao carregar dados",description:S instanceof Error?S.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},b=async j=>{if(j.preventDefault(),!_.registro.trim()){a({title:"Erro de validao",description:"Registro  obrigatrio",variant:"destructive"});return}if(!(p==="Outra"?_.racaCustom.trim():_.raca.trim())){a({title:"Erro de validao",description:"Raa  obrigatria",variant:"destructive"});return}try{i(!0);const S=p==="Outra"?_.racaCustom.trim():_.raca.trim(),N={registro:_.registro.trim(),nome:_.nome.trim()||null,raca:S,pai_registro:x.pai.registro.trim()||null,pai_nome:x.pai.nome.trim()||null,mae_registro:x.mae.registro.trim()||null,mae_nome:x.mae.nome.trim()||null,foto_url:_.foto_url.trim()||null,gpta:_.gpta?parseFloat(_.gpta):null,controle_leiteiro:_.controle_leiteiro?parseFloat(_.controle_leiteiro):null,beta_caseina:_.beta_caseina.trim()||null,link_abcz:_.link_abcz.trim()||null,disponivel_aspiracao:_.disponivel_aspiracao,classificacao_genetica:_.classificacao_genetica||null},C={pai:x.pai,mae:x.mae,pai_pai:x.pai_pai,pai_mae:x.pai_mae,mae_pai:x.mae_pai,mae_mae:x.mae_mae};if(Object.values(C).some(Q=>Q.nome.trim()||Q.registro.trim())){const Q=JSON.stringify(C);N.genealogia_texto=_.genealogia_texto.trim()?`${_.genealogia_texto}

[GENEALOGIA_JSON]${Q}[/GENEALOGIA_JSON]`:`[GENEALOGIA_JSON]${Q}[/GENEALOGIA_JSON]`}else N.genealogia_texto=_.genealogia_texto.trim()||null;const{error:R}=await D.from("doadoras").update(N).eq("id",e);if(R)throw R;a({title:"Doadora atualizada",description:"Doadora atualizada com sucesso"}),v()}catch(S){const N=S instanceof Error?S.message:"Erro desconhecido";a({title:"Erro ao atualizar doadora",description:N.includes("RLS")||N.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":N,variant:"destructive"})}finally{i(!1)}};return s?r.jsx(Pt,{}):l?r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(G,{onClick:()=>t("/doadoras"),variant:"outline",size:"icon",children:r.jsx(Za,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-2",children:[r.jsx(po,{className:"w-8 h-8"}),_.nome||_.registro]}),r.jsxs("p",{className:"text-slate-600 mt-1",children:[_.registro," ",d&&` ${d.nome}`]})]})]})}),r.jsxs("form",{onSubmit:b,className:"space-y-6",children:[r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Informaes Bsicas"})}),r.jsx(Ne,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"registro",children:"Registro *"}),r.jsx(de,{id:"registro",value:_.registro,onChange:j=>g({..._,registro:j.target.value}),placeholder:"Registro da doadora",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"nome",children:"Nome"}),r.jsx(de,{id:"nome",value:_.nome,onChange:j=>g({..._,nome:j.target.value}),placeholder:"Nome da doadora"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"raca",children:"Raa *"}),r.jsxs(at,{value:p,onValueChange:j=>{m(j),g(j==="Outra"?{..._,raca:"",racaCustom:""}:{..._,raca:j,racaCustom:""})},children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione a raa"})}),r.jsxs(Je,{children:[h.map(j=>r.jsx(_e,{value:j,children:j},j)),r.jsx(_e,{value:"Outra",children:"Outra"})]})]}),p==="Outra"&&r.jsx(de,{id:"raca_custom",value:_.racaCustom,onChange:j=>g({..._,racaCustom:j.target.value,raca:j.target.value}),placeholder:"Digite a raa",className:"mt-2",required:!0}),p&&p!=="Outra"&&r.jsx("div",{className:"mt-2 text-xs text-slate-500"})]})]})})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Genealogia"})}),r.jsxs(Ne,{children:[r.jsx(R6,{value:x,onChange:y,doadoraNome:_.nome||_.registro,doadoraRegistro:_.registro}),r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsx(B,{htmlFor:"genealogia_texto",children:"Observaes sobre Genealogia"}),r.jsx(ja,{id:"genealogia_texto",value:_.genealogia_texto,onChange:j=>g({..._,genealogia_texto:j.target.value}),placeholder:"Informaes adicionais sobre genealogia (opcional)",rows:3})]})]})]}),p==="Gir"&&r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Informaes Especficas - Raa Gir"})}),r.jsxs(Ne,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"gpta",children:"GPTA"}),r.jsx(de,{id:"gpta",type:"number",value:_.gpta,onChange:j=>g({..._,gpta:j.target.value}),placeholder:"GPTA"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"controle_leiteiro",children:"Controle Leiteiro"}),r.jsx(de,{id:"controle_leiteiro",type:"number",value:_.controle_leiteiro,onChange:j=>g({..._,controle_leiteiro:j.target.value}),placeholder:"Controle Leiteiro"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"beta_caseina",children:"Beta Casena"}),r.jsx(de,{id:"beta_caseina",value:_.beta_caseina,onChange:j=>g({..._,beta_caseina:j.target.value}),placeholder:"Beta Casena"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"link_abcz",children:"Link ABCZ"}),r.jsx(de,{id:"link_abcz",type:"url",value:_.link_abcz,onChange:j=>g({..._,link_abcz:j.target.value}),placeholder:"URL do link ABCZ"})]})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Informaes Adicionais"})}),r.jsxs(Ne,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(B,{htmlFor:"disponivel_aspiracao",children:"Disponvel para Aspirao"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Indica se a doadora est disponvel para aspirao"})]}),r.jsx(uv,{id:"disponivel_aspiracao",checked:_.disponivel_aspiracao,onCheckedChange:j=>g({..._,disponivel_aspiracao:j})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"classificacao_genetica",children:"Classificao Gentica"}),r.jsxs(at,{value:_.classificacao_genetica,onValueChange:j=>g({..._,classificacao_genetica:j}),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione a classificao"})}),r.jsxs(Je,{children:[r.jsx(_e,{value:"1_estrela",children:"1 Estrela"}),r.jsx(_e,{value:"2_estrelas",children:"2 Estrelas"}),r.jsx(_e,{value:"3_estrelas",children:"3 Estrelas"}),r.jsx(_e,{value:"diamante",children:"Diamante"})]})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"Classificao opcional do preo da gentica"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"foto_url",children:"Foto"}),r.jsx(de,{id:"foto_url",type:"url",value:_.foto_url,onChange:j=>g({..._,foto_url:j.target.value}),placeholder:"URL da foto"})]})]})]}),r.jsxs("div",{className:"flex gap-4 justify-end",children:[r.jsx(G,{type:"button",variant:"outline",onClick:()=>t("/doadoras"),children:"Cancelar"}),r.jsxs(G,{type:"submit",className:"bg-green-600 hover:bg-green-700",disabled:o,children:[r.jsx(tD,{className:"w-4 h-4 mr-2"}),o?"Salvando...":"Salvar Alteraes"]})]})]})]}):r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-500",children:"Doadora no encontrada"}),r.jsxs(G,{onClick:()=>t("/doadoras"),className:"mt-4",variant:"outline",children:[r.jsx(Za,{className:"w-4 h-4 mr-2"}),"Voltar para Doadoras"]})]})})}async function Qd(e){try{const{data:t,error:a}=await D.from("v_tentativas_te_status").select("*").eq("receptora_id",e).order("data_te",{ascending:!1}).limit(1);if(a&&console.error("Error fetching v_tentativas_te_status:",a),t&&t.length>0){const o=t[0],i={PRENHE_FEMEA:"PRENHE (FMEA)",PRENHE_MACHO:"PRENHE (MACHO)",PRENHE_SEM_SEXO:"PRENHE (SEM SEXO)",PRENHE:"PRENHE",VAZIA:"VAZIA",RETOQUE:"SERVIDA",SEM_DIAGNOSTICO:"SERVIDA"};if(i[o.status_tentativa])return i[o.status_tentativa]}const{data:s,error:n}=await D.from("protocolo_receptoras").select("status, protocolo_id").eq("receptora_id",e);if(n&&console.error("Error fetching protocolo_receptoras:",n),s&&s.length>0){const o=s.map(h=>h.protocolo_id),{data:i,error:l}=await D.from("protocolos_sincronizacao").select("id, status").in("id",o);l&&console.error("Error fetching protocolos_sincronizacao:",l);const c=new Map((i||[]).map(h=>[h.id,h.status])),d=s.filter(h=>{const p=c.get(h.protocolo_id),m=h.status;return p==="PASSO2_FECHADO"?!1:(m==="APTA"||m==="INICIADA")&&p!=="PASSO2_FECHADO"});if(d.length>0)return d.some(p=>p.status==="APTA")?"SINCRONIZADA":"EM SINCRONIZAO";if(s.filter(h=>c.get(h.protocolo_id)==="PASSO2_FECHADO"&&h.status==="APTA").length>0)return"SINCRONIZADA"}return"VAZIA"}catch(t){return console.error("Error calculating receptora status:",t),"VAZIA"}}async function z6(e){if(e.length===0)return new Map;const t=new Map;try{const{data:a,error:s}=await D.from("v_tentativas_te_status").select("receptora_id, status_tentativa, data_te").in("receptora_id",e).order("data_te",{ascending:!1});s&&console.error("Error fetching v_tentativas_te_status:",s);const{data:n,error:o}=await D.from("protocolo_receptoras").select("receptora_id, status, protocolo_id").in("receptora_id",e);o&&console.error("Error fetching protocolo_receptoras:",o);const i=[...new Set((n==null?void 0:n.map(p=>p.protocolo_id))||[])];let l=[];if(i.length>0){const{data:p,error:m}=await D.from("protocolos_sincronizacao").select("id, status").in("id",i);m?console.error("Error fetching protocolos_sincronizacao:",m):l=p||[]}const c=new Map((l==null?void 0:l.map(p=>[p.id,p.status]))||[]),d=new Map;a==null||a.forEach(p=>{d.has(p.receptora_id)||d.set(p.receptora_id,p)});const f={PRENHE_FEMEA:"PRENHE (FMEA)",PRENHE_MACHO:"PRENHE (MACHO)",PRENHE_SEM_SEXO:"PRENHE (SEM SEXO)",PRENHE:"PRENHE",VAZIA:"VAZIA",RETOQUE:"SERVIDA",SEM_DIAGNOSTICO:"SERVIDA"},h=new Map;n==null||n.forEach(p=>{h.has(p.receptora_id)||h.set(p.receptora_id,[]),h.get(p.receptora_id).push(p)}),e.forEach(p=>{const m=d.get(p);if(m&&f[m.status_tentativa]){t.set(p,f[m.status_tentativa]);return}const _=h.get(p)||[],g=_.filter(y=>c.get(y.protocolo_id)!=="PASSO2_FECHADO"&&(y.status==="APTA"||y.status==="INICIADA"));if(g.length>0){t.set(p,g.some(y=>y.status==="APTA")?"SINCRONIZADA":"EM SINCRONIZAO");return}if(_.filter(y=>c.get(y.protocolo_id)==="PASSO2_FECHADO"&&y.status==="APTA").length>0){t.set(p,"SINCRONIZADA");return}t.set(p,"VAZIA")})}catch(a){console.error("Error calculating receptoras status:",a),e.forEach(s=>t.set(s,"VAZIA"))}return t}const xN=iv,M6=lv,yN=u.forwardRef(({className:e,...t},a)=>r.jsx(Qc,{className:je("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));yN.displayName=Qc.displayName;const P6=il("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),fv=u.forwardRef(({side:e="right",className:t,children:a,...s},n)=>r.jsxs(M6,{children:[r.jsx(yN,{}),r.jsxs(Kc,{ref:n,className:je(P6({side:e}),t),...s,children:[a,r.jsxs(Tf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[r.jsx(Cs,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));fv.displayName=Kc.displayName;const hv=({className:e,...t})=>r.jsx("div",{className:je("flex flex-col space-y-2 text-center sm:text-left",e),...t});hv.displayName="SheetHeader";const mv=u.forwardRef(({className:e,...t},a)=>r.jsx(Xc,{ref:a,className:je("text-lg font-semibold text-foreground",e),...t}));mv.displayName=Xc.displayName;const pv=u.forwardRef(({className:e,...t},a)=>r.jsx(Zc,{ref:a,className:je("text-sm text-muted-foreground",e),...t}));pv.displayName=Zc.displayName;const Zr=e=>{if(!e||/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=e.match(/^(\d{4}-\d{2}-\d{2})/);if(t)return t[1];try{const a=new Date(e);if(isNaN(a.getTime()))return e;const s=a.getUTCFullYear(),n=String(a.getUTCMonth()+1).padStart(2,"0"),o=String(a.getUTCDate()).padStart(2,"0");return`${s}-${n}-${o}`}catch{return e}};function bN({receptoraId:e,open:t,onClose:a}){const{toast:s}=Jt(),[n,o]=u.useState(!0),[i,l]=u.useState(null),[c,d]=u.useState([]);u.useEffect(()=>{t&&e&&f()},[t,e]);const f=async()=>{try{o(!0);const{data:m,error:_}=await D.from("receptoras").select("*").eq("id",e).single();if(_)throw _;l(m);const g=[],{data:x,error:y}=await D.from("receptora_fazenda_historico").select(`
          id,
          fazenda_id,
          data_inicio,
          data_fim,
          observacoes
        `).eq("receptora_id",e).order("data_inicio",{ascending:!1});if(!y&&x&&x.length>0){const w=[...x].sort((R,Q)=>new Date(R.data_inicio).getTime()-new Date(Q.data_inicio).getTime()),N=w[0].id,C=new Set;for(const R of x)R.fazenda_id&&C.add(R.fazenda_id);const P=new Map;if(C.size>0){const{data:R}=await D.from("fazendas").select("id, nome").in("id",Array.from(C));if(R)for(const Q of R)P.set(Q.id,Q.nome)}for(let R=0;R<w.length;R++){const Q=w[R],K=P.get(Q.fazenda_id)||"Fazenda desconhecida";if(R===0)g.push({tipo:"CADASTRO",data:Zr(Q.data_inicio),descricao:"Cadastro da Receptora",detalhes:`Receptora cadastrada no sistema | Fazenda: ${K}${Q.observacoes?` | Observaes: ${Q.observacoes}`:""}`});else{const L=w[R-1],H=P.get(L.fazenda_id)||"Fazenda desconhecida";g.push({tipo:"MUDANCA_FAZENDA",data:Zr(Q.data_inicio),descricao:"Mudana de Fazenda",detalhes:`De: ${H}  Para: ${K}${Q.observacoes?` | Observaes: ${Q.observacoes}`:""}`})}}}try{const{data:w,error:S}=await D.from("receptora_renomeacoes_historico").select("*").eq("receptora_id",e).order("data_renomeacao",{ascending:!1});if(S&&S.code!=="42P01"&&console.error("Erro ao buscar renomeaes:",S),!S&&w&&w.length>0)for(const N of w){const P={MUDANCA_FAZENDA:"Mudana de Fazenda",EDICAO_MANUAL:"Edio Manual"}[N.motivo]||N.motivo||"Renomeao";g.push({tipo:"RENOMEACAO",data:Zr(N.data_renomeacao),descricao:"Renomeao de Brinco",detalhes:`De: "${N.brinco_anterior}"  Para: "${N.brinco_novo}" | Motivo: ${P}${N.observacoes?` | ${N.observacoes}`:""}`})}}catch{console.warn("Tabela receptora_renomeacoes_historico no encontrada. Execute criar_tabela_historico_renomeacoes.sql")}const{data:v,error:b}=await D.from("protocolo_receptoras").select(`
          id,
          protocolo_id,
          evento_fazenda_id,
          data_inclusao,
          status,
          motivo_inapta,
          ciclando_classificacao,
          qualidade_semaforo,
          protocolos_sincronizacao (
            id,
            data_inicio,
            responsavel_inicio,
            passo2_data,
            passo2_tecnico_responsavel,
            fazenda_id
          )
        `).eq("receptora_id",e).order("data_inclusao",{ascending:!1});if(b)throw console.error("Erro ao buscar protocolos:",b),b;if(v&&v.length>0){const w=C=>{if(!C)return{veterinario:null,tecnico:null};const P=C.match(/VET:\s*(.+?)(?:\s*\||$)/i),R=C.match(/TEC:\s*(.+?)(?:\s*\||$)/i);return{veterinario:P?P[1].trim():null,tecnico:R?R[1].trim():null}},S=new Set;for(const C of v){C.evento_fazenda_id&&S.add(C.evento_fazenda_id);try{const P=Array.isArray(C.protocolos_sincronizacao)?C.protocolos_sincronizacao[0]:C.protocolos_sincronizacao;P&&P.fazenda_id&&S.add(P.fazenda_id)}catch(P){console.warn("Erro ao acessar protocolo:",P)}}const N=new Map;if(S.size>0){const{data:C,error:P}=await D.from("fazendas").select("id, nome").in("id",Array.from(S));if(P)console.error("Erro ao buscar fazendas:",P);else if(C)for(const R of C)N.set(R.id,R.nome)}for(const C of v)try{let P=null;if(Array.isArray(C.protocolos_sincronizacao)?P=C.protocolos_sincronizacao[0]:P=C.protocolos_sincronizacao,!P||!P.id){console.warn("Protocolo no encontrado para protocolo_receptora:",C.id);continue}let R="";C.evento_fazenda_id&&P.fazenda_id&&C.evento_fazenda_id!==P.fazenda_id&&(R=` (Fazenda: ${N.get(C.evento_fazenda_id)||"Fazenda desconhecida"})`);const Q=w(P.responsavel_inicio);if(!P.data_inicio){console.warn("Protocolo sem data_inicio:",P.id);continue}const K=Zr(P.data_inicio);let L=`1 Passo realizado em ${new Date(K+"T12:00:00").toLocaleDateString("pt-BR")}`;if(Q.veterinario&&(L+=` | Veterinrio: ${Q.veterinario}`),Q.tecnico&&(L+=` | Tcnico: ${Q.tecnico}`),L+=R,g.push({tipo:"PROTOCOLO",data:K,descricao:"Protocolo de Sincronizao - 1 Passo",detalhes:L}),P.passo2_data){const H=Zr(P.passo2_data);let V=`2 Passo realizado em ${new Date(H+"T12:00:00").toLocaleDateString("pt-BR")}`;if(P.passo2_tecnico_responsavel&&(V+=` | Responsvel: ${P.passo2_tecnico_responsavel}`),C.evento_fazenda_id&&P.fazenda_id&&C.evento_fazenda_id!==P.fazenda_id){const E=N.get(C.evento_fazenda_id)||"Fazenda desconhecida";V+=` (Fazenda: ${E})`}const F=[];C.ciclando_classificacao&&F.push(`Classificao: ${C.ciclando_classificacao}`),C.qualidade_semaforo&&F.push(`Nota: ${C.qualidade_semaforo}`),F.length>0&&(V+=` | ${F.join(" | ")}`),C.status&&(C.status==="APTA"?V+=" | Resultado: APTA para transferncia de embries":C.status==="INAPTA"?(V+=" | Resultado: DESCARTADA",C.motivo_inapta&&(V+=` (Motivo: ${C.motivo_inapta})`)):V+=` | Status: ${C.status}`),g.push({tipo:"PROTOCOLO",data:H,descricao:"Protocolo de Sincronizao - 2 Passo",detalhes:V})}}catch(P){console.error("Erro ao processar protocolo_receptora:",C.id,P);continue}}const{data:j}=await D.from("v_tentativas_te_status").select("*").eq("receptora_id",e).order("data_te",{ascending:!1});if(j&&j.length>0)for(const w of j){const S=Zr(w.data_te);if(g.push({tipo:"TE",data:S,descricao:"Transferncia de Embrio",detalhes:`Status: ${w.status_tentativa}`}),w.data_dg){const N=Zr(w.data_dg);g.push({tipo:"DG",data:N,descricao:"Diagnstico de Gestao",detalhes:`Resultado: ${w.resultado_dg||"N/A"}`})}if(w.sexagem){const N=w.data_dg?Zr(w.data_dg):S;g.push({tipo:"SEXAGEM",data:N,descricao:"Sexagem",detalhes:`Sexo: ${w.sexagem}`})}}g.sort((w,S)=>S.data>w.data?1:S.data<w.data?-1:0),d(g)}catch(m){s({title:"Erro ao carregar histrico",description:m instanceof Error?m.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},h=m=>({PROTOCOLO:r.jsx(Wj,{className:"w-5 h-5 text-blue-600"}),TE:r.jsx(Rg,{className:"w-5 h-5 text-green-600"}),DG:r.jsx(Sg,{className:"w-5 h-5 text-purple-600"}),SEXAGEM:r.jsx(Zj,{className:"w-5 h-5 text-pink-600"}),MUDANCA_FAZENDA:r.jsx(Cg,{className:"w-5 h-5 text-orange-600"}),CADASTRO:r.jsx(Au,{className:"w-5 h-5 text-indigo-600"}),RENOMEACAO:r.jsx(Hd,{className:"w-5 h-5 text-amber-600"})})[m],p=m=>({PROTOCOLO:r.jsx(Xe,{variant:"default",className:"bg-blue-600",children:"Protocolo"}),TE:r.jsx(Xe,{variant:"default",className:"bg-green-600",children:"TE"}),DG:r.jsx(Xe,{variant:"default",className:"bg-purple-600",children:"DG"}),SEXAGEM:r.jsx(Xe,{variant:"default",className:"bg-pink-600",children:"Sexagem"}),MUDANCA_FAZENDA:r.jsx(Xe,{variant:"default",className:"bg-orange-600",children:"Mudana de Fazenda"}),CADASTRO:r.jsx(Xe,{variant:"default",className:"bg-indigo-600",children:"Cadastro"}),RENOMEACAO:r.jsx(Xe,{variant:"default",className:"bg-amber-600",children:"Renomeao"})})[m]||r.jsx(Xe,{children:m});return r.jsx(xN,{open:t,onOpenChange:a,children:r.jsxs(fv,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[r.jsxs(hv,{children:[r.jsx(mv,{children:"Histrico da Receptora"}),r.jsx(pv,{children:i?`Brinco ${i.identificacao} ${i.nome?`- ${i.nome}`:""}`:"Carregando..."})]}),n?r.jsx("div",{className:"py-8",children:r.jsx(Pt,{})}):r.jsxs("div",{className:"mt-6 space-y-6",children:[i&&r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{className:"text-base",children:"Dados da Receptora"})}),r.jsxs(Ne,{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Brinco"}),r.jsx("p",{className:"text-base text-slate-900",children:i.identificacao})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Nome"}),r.jsx("p",{className:"text-base text-slate-900",children:i.nome||"-"})]})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsxs(Oe,{className:"text-base",children:["Linha do Tempo (",c.length," eventos)"]})}),r.jsx(Ne,{children:c.length===0?r.jsx("div",{className:"text-center py-8 text-slate-500",children:"Nenhum evento registrado para esta receptora"}):r.jsx("div",{className:"space-y-4",children:c.map((m,_)=>r.jsxs("div",{className:"flex gap-4 pb-4 border-b last:border-b-0",children:[r.jsx("div",{className:"flex-shrink-0 mt-1",children:h(m.tipo)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-start justify-between mb-1",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-900",children:m.descricao}),r.jsx("p",{className:"text-sm text-slate-600",children:new Date(m.data+"T12:00:00").toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"})})]}),p(m.tipo)]}),m.detalhes&&r.jsx("p",{className:"text-sm text-slate-600 mt-2",children:m.detalhes})]})]},_))})})]})]})]})})}function k6(){const[e,t]=u.useState([]),[a,s]=u.useState([]),[n,o]=u.useState([]),[i,l]=u.useState(""),[c,d]=u.useState(""),[f,h]=u.useState("all"),[p,m]=u.useState([]),[_,g]=u.useState(!0),[x,y]=u.useState(!1),[v,b]=u.useState(!1),[j,w]=u.useState(!1),[S,N]=u.useState(!1),[C,P]=u.useState(!1),[R,Q]=u.useState(""),[K,ce]=u.useState(!1),[L,H]=u.useState(!1),[T,V]=u.useState(null),[F,E]=u.useState(""),[O,U]=u.useState(""),[M,X]=u.useState(!1),{toast:$}=Jt(),[ne,le]=u.useState({identificacao:"",nome:""}),[z,A]=u.useState({identificacao:"",nome:""});u.useEffect(()=>{ee()},[]),u.useEffect(()=>{i?Z():(t([]),s([]))},[i]),u.useEffect(()=>{J()},[c,f,e]);const J=()=>{let te=e;if(f!=="all"&&(te=te.filter(xe=>xe.status_calculado===f)),c.trim()){const xe=c.toLowerCase();te=te.filter(q=>{var he;return q.identificacao.toLowerCase().includes(xe)||((he=q.nome)==null?void 0:he.toLowerCase().includes(xe))})}s(te)},ee=async()=>{try{g(!0);const{data:te,error:xe}=await D.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(xe)throw xe;o(te||[])}catch(te){$({title:"Erro ao carregar fazendas",description:te instanceof Error?te.message:"Erro desconhecido",variant:"destructive"})}finally{g(!1)}},Z=async()=>{try{y(!0);const{data:te,error:xe}=await D.from("vw_receptoras_fazenda_atual").select("receptora_id, fazenda_nome_atual").eq("fazenda_id_atual",i);if(xe)throw xe;const q=(te==null?void 0:te.map(Pe=>Pe.receptora_id))||[];if(q.length===0){t([]),s([]),m([]);return}const{data:he,error:Se}=await D.from("receptoras").select("*").in("id",q).order("identificacao",{ascending:!0});if(Se)throw Se;const Ce=new Map((te==null?void 0:te.map(Pe=>[Pe.receptora_id,Pe.fazenda_nome_atual]))||[]),we=(he||[]).map(Pe=>({...Pe,fazenda_nome_atual:Ce.get(Pe.id)})),k=we.map(Pe=>Pe.id),ue=await z6(k),Me=we.map(Pe=>({...Pe,status_calculado:ue.get(Pe.id)||"VAZIA"})),Be=Array.from(new Set(Me.map(Pe=>Pe.status_calculado))).filter(Pe=>Pe).sort();m(Be),t(Me),s(Me),h("all")}catch(te){$({title:"Erro ao carregar receptoras",description:te instanceof Error?te.message:"Erro desconhecido",variant:"destructive"})}finally{y(!1)}},ae=async te=>{if(te.preventDefault(),!ne.identificacao.trim()){$({title:"Erro de validao",description:"Identificao (brinco)  obrigatria",variant:"destructive"});return}if(!i){$({title:"Erro de validao",description:"Selecione uma fazenda primeiro",variant:"destructive"});return}try{ce(!0);const xe={identificacao:ne.identificacao};ne.nome.trim()&&(xe.nome=ne.nome);const{data:q,error:he}=await D.from("receptoras").insert([xe]).select().single();if(he)throw he.code==="23505"?new Error("J existe uma receptora com esse brinco nesta fazenda."):he;const{error:Se}=await D.from("receptora_fazenda_historico").insert([{receptora_id:q.id,fazenda_id:i,data_inicio:new Date().toISOString().split("T")[0],data_fim:null}]);Se&&console.error("Erro ao criar histrico de fazenda:",Se),$({title:"Receptora criada",description:"Receptora criada com sucesso"}),b(!1),le({identificacao:"",nome:""}),Z()}catch(xe){$({title:"Erro ao criar receptora",description:xe instanceof Error?xe.message:"Erro desconhecido",variant:"destructive"})}finally{ce(!1)}},ie=te=>{V(te),A({identificacao:te.identificacao,nome:te.nome||""}),w(!0)},pe=async te=>{if(te.preventDefault(),!!T){if(!z.identificacao.trim()){$({title:"Erro de validao",description:"Identificao (brinco)  obrigatria",variant:"destructive"});return}try{ce(!0);const xe=T.identificacao,q=z.identificacao.trim(),he=xe!==q,Se={identificacao:q,nome:z.nome.trim()||null},{error:Ce}=await D.from("receptoras").update(Se).eq("id",T.id);if(Ce)throw Ce.code==="23505"?new Error("J existe uma receptora com esse brinco nesta fazenda."):Ce;if(he)try{const{error:we}=await D.from("receptora_renomeacoes_historico").insert([{receptora_id:T.id,brinco_anterior:xe,brinco_novo:q,data_renomeacao:new Date().toISOString(),motivo:"EDICAO_MANUAL",observacoes:null}]);we&&(we.code==="42P01"?console.warn("Tabela receptora_renomeacoes_historico no existe. Execute o script criar_tabela_historico_renomeacoes.sql"):console.error("Erro ao registrar renomeao no histrico:",we))}catch(we){console.error("Erro ao registrar renomeao no histrico:",we)}$({title:"Receptora atualizada",description:he?`Receptora atualizada. Brinco alterado de "${xe}" para "${q}".`:"Receptora atualizada com sucesso"}),w(!1),V(null),Z()}catch(xe){$({title:"Erro ao atualizar receptora",description:xe instanceof Error?xe.message:"Erro desconhecido",variant:"destructive"})}finally{ce(!1)}}};u.useEffect(()=>{(async()=>{if(!T||!F){X(!1),U("");return}try{const{data:xe,error:q}=await D.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",F);if(q){console.error("Erro ao verificar receptoras na fazenda destino:",q);return}const he=(xe==null?void 0:xe.map(we=>we.receptora_id))||[];if(he.length===0){X(!1),U("");return}const{data:Se,error:Ce}=await D.from("receptoras").select("id, identificacao").in("id",he).eq("identificacao",T.identificacao);if(Ce){console.error("Erro ao verificar brinco:",Ce);return}if(Se&&Se.length>0){X(!0);const we=async(k,ue=0)=>{if(ue>10)throw new Error("No foi possvel gerar um brinco disponvel aps vrias tentativas");const Me=new Date,Be=String(Me.getDate()).padStart(2,"0"),Pe=String(Me.getMonth()+1).padStart(2,"0"),ft=ue===0?`-MOV${Be}${Pe}`:`-MOV${Be}${Pe}-${ue}`,dt=`${k}${ft}`,{data:mt,error:Wt}=await D.from("receptoras").select("id, identificacao").in("id",he).eq("identificacao",dt);return Wt?(console.error("Erro ao verificar novo brinco:",Wt),dt):mt&&mt.length>0?we(k,ue+1):dt};try{const k=await we(T.identificacao);U(k)}catch(k){console.error("Erro ao gerar brinco disponvel:",k);const ue=new Date,Me=String(ue.getDate()).padStart(2,"0"),Be=String(ue.getMonth()+1).padStart(2,"0"),Pe=`-MOV${Me}${Be}`;U(`${T.identificacao}${Pe}`)}}else X(!1),U("")}catch(xe){console.error("Erro ao verificar conflito de brinco:",xe)}})()},[T,F]);const ge=async()=>{if(!T||!F){$({title:"Erro de validao",description:"Selecione uma fazenda de destino",variant:"destructive"});return}try{H(!0);const te=T.identificacao;let xe=te;if(M&&O){const{data:Se,error:Ce}=await D.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",F);if(!Ce&&Se){const k=Se.map(ue=>ue.receptora_id);if(k.length>0){const{data:ue,error:Me}=await D.from("receptoras").select("id, identificacao").in("id",k).eq("identificacao",O);if(!Me&&ue&&ue.length>0){let Be=1,Pe=O;for(;Be<=10;){const ft=new Date,dt=String(ft.getDate()).padStart(2,"0"),mt=String(ft.getMonth()+1).padStart(2,"0"),Wt=`-MOV${dt}${mt}-${Be}`;Pe=`${te}${Wt}`;const{data:la,error:ha}=await D.from("receptoras").select("id").in("id",k).eq("identificacao",Pe);if(!ha&&(!la||la.length===0))break;Be++}xe=Pe}else xe=O}else xe=O}else xe=O;const{error:we}=await D.from("receptoras").update({identificacao:xe}).eq("id",T.id);if(we)throw new Error(`Erro ao atualizar brinco: ${we.message}`);try{const{error:k}=await D.from("receptora_renomeacoes_historico").insert([{receptora_id:T.id,brinco_anterior:te,brinco_novo:xe,data_renomeacao:new Date().toISOString(),motivo:"MUDANCA_FAZENDA",observacoes:"Renomeao automtica devido a conflito de brinco na fazenda destino"}]);k&&(k.code==="42P01"?console.warn("Tabela receptora_renomeacoes_historico no existe. Execute o script criar_tabela_historico_renomeacoes.sql"):console.error("Erro ao registrar renomeao no histrico:",k))}catch(k){console.error("Erro ao registrar renomeao no histrico:",k)}T.identificacao=xe}const{data:q,error:he}=await D.rpc("mover_receptora_fazenda",{p_receptora_id:T.id,p_nova_fazenda_id:F,p_data_mudanca:new Date().toISOString().split("T")[0],p_observacoes:null});if(he){console.error("Erro ao mover receptora:",he),console.error("Receptora ID:",T.id),console.error("Nova Fazenda ID:",F),console.error("Error code:",he.code),console.error("Error message:",he.message),console.error("Error details:",he.details);let Se="Erro ao mover receptora";he.message?Se=he.message:he.details&&(Se=he.details),$({title:"Erro ao mover receptora",description:Se,variant:"destructive"}),H(!1);return}$({title:"Receptora movida",description:M?`Receptora movida com sucesso. Brinco atualizado de "${te}" para "${T.identificacao}" devido a conflito na fazenda destino.`:"Receptora movida para a nova fazenda com sucesso. Protocolos e histrico no foram afetados."}),N(!1),w(!1),V(null),E(""),X(!1),U(""),Z()}catch(te){console.error("Erro catch ao mover receptora:",te);const xe=te instanceof Error?te.message:"Erro desconhecido ao mover receptora";$({title:"Erro ao mover receptora",description:xe,variant:"destructive"})}finally{H(!1)}},Le=te=>{const q={VAZIA:{variant:"outline"},"EM SINCRONIZAO":{variant:"secondary"},SINCRONIZADA:{variant:"default"},SERVIDA:{variant:"default",className:"bg-blue-600"},PRENHE:{variant:"default",className:"bg-green-600"},"PRENHE (FMEA)":{variant:"default",className:"bg-pink-600"},"PRENHE (MACHO)":{variant:"default",className:"bg-blue-700"},"PRENHE (SEM SEXO)":{variant:"default",className:"bg-purple-600"}}[te]||{variant:"outline"};return r.jsx(Xe,{variant:q.variant,className:q.className,children:te})};return _?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Receptoras"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar receptoras por fazenda"})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Selecione a Fazenda *"})}),r.jsx(Ne,{children:r.jsxs(at,{value:i,onValueChange:l,children:[r.jsx(Ze,{className:"w-full",children:r.jsx(st,{placeholder:"Selecione uma fazenda para listar receptoras"})}),r.jsx(Je,{children:n.map(te=>r.jsx(_e,{value:te.id,children:te.nome},te.id))})]})})]}),i?r.jsxs(r.Fragment,{children:[r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Filtros"})}),r.jsx(Ne,{children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 max-w-md",children:[r.jsx(B,{htmlFor:"filtro-status",children:"Status"}),r.jsxs(at,{value:f,onValueChange:h,children:[r.jsx(Ze,{id:"filtro-status",children:r.jsx(st,{placeholder:"Todas"})}),r.jsxs(Je,{children:[r.jsx(_e,{value:"all",children:"Todas"}),p.map(te=>r.jsx(_e,{value:te,children:te},te))]})]})]}),r.jsxs("div",{className:"flex-1 max-w-md",children:[r.jsx(B,{htmlFor:"busca",children:"Buscar por brinco ou nome"}),r.jsxs("div",{className:"relative",children:[r.jsx(Tg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),r.jsx(de,{id:"busca",placeholder:"Buscar por brinco ou nome...",value:c,onChange:te=>d(te.target.value),className:"pl-10"})]})]})]})})]}),r.jsx("div",{className:"flex items-center justify-end",children:r.jsxs(zt,{open:v,onOpenChange:b,children:[r.jsx(As,{asChild:!0,children:r.jsxs(G,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Ja,{className:"w-4 h-4 mr-2"}),"Nova Receptora"]})}),r.jsxs(St,{className:"max-w-md",children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Criar Nova Receptora"}),r.jsx(Mt,{children:"Criar receptora na fazenda selecionada"})]}),r.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"identificacao",children:"Identificao (Brinco) *"}),r.jsx(de,{id:"identificacao",value:ne.identificacao,onChange:te=>le({...ne,identificacao:te.target.value}),placeholder:"Nmero do brinco",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"nome",children:"Nome"}),r.jsx(de,{id:"nome",value:ne.nome,onChange:te=>le({...ne,nome:te.target.value}),placeholder:"Nome da receptora (opcional)"})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(G,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:K,children:K?"Salvando...":"Salvar"}),r.jsx(G,{type:"button",variant:"outline",onClick:()=>b(!1),disabled:K,children:"Cancelar"})]})]})]})]})}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsxs(Oe,{children:["Lista de Receptoras (",a.length,")"]})}),r.jsx(Ne,{children:x?r.jsx("div",{className:"py-8",children:r.jsx(Pt,{})}):r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Brinco"}),r.jsx(Y,{children:"Nome"}),r.jsx(Y,{children:"Status Atual"}),r.jsx(Y,{className:"text-right",children:"Aes"})]})}),r.jsx(wt,{children:a.length===0?r.jsx(be,{children:r.jsx(I,{colSpan:4,className:"text-center text-slate-500",children:c?"Nenhuma receptora encontrada":"Nenhuma receptora cadastrada nesta fazenda"})}):a.map(te=>r.jsxs(be,{children:[r.jsx(I,{className:"font-medium",children:te.identificacao}),r.jsx(I,{children:te.nome||"-"}),r.jsx(I,{children:Le(te.status_calculado)}),r.jsx(I,{className:"text-right",children:r.jsxs("div",{className:"flex gap-1 justify-end",children:[r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>ie(te),title:"Editar",children:r.jsx(mc,{className:"w-4 h-4"})}),r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{Q(te.id),P(!0)},title:"Ver histrico",children:r.jsx(Ng,{className:"w-4 h-4"})})]})})]},te.id))})]})})]})]}):r.jsx(Ee,{children:r.jsx(Ne,{className:"py-12 text-center",children:r.jsx("p",{className:"text-slate-500 text-lg",children:"Selecione uma fazenda para listar receptoras"})})}),r.jsx(zt,{open:j,onOpenChange:w,children:r.jsxs(St,{className:"max-w-md",children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Editar Receptora"}),r.jsx(Mt,{children:"Atualizar dados da receptora"})]}),r.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"edit_identificacao",children:"Identificao (Brinco) *"}),r.jsx(de,{id:"edit_identificacao",value:z.identificacao,onChange:te=>A({...z,identificacao:te.target.value}),placeholder:"Nmero do brinco",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"edit_nome",children:"Nome"}),r.jsx(de,{id:"edit_nome",value:z.nome,onChange:te=>A({...z,nome:te.target.value}),placeholder:"Nome da receptora (opcional)"})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(G,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:K,children:K?"Salvando...":"Salvar Alteraes"}),r.jsx(G,{type:"button",variant:"outline",onClick:()=>w(!1),disabled:K,children:"Cancelar"})]})]}),r.jsxs("div",{className:"relative my-4",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("span",{className:"w-full border-t"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-white px-2 text-slate-500",children:"Ou"})})]}),r.jsxs(G,{type:"button",variant:"outline",className:"w-full",onClick:()=>{N(!0),E("")},disabled:K,children:[r.jsx($T,{className:"w-4 h-4 mr-2"}),"Mover para outra fazenda"]})]})}),r.jsx(zt,{open:S,onOpenChange:te=>{N(te),te||(X(!1),U(""))},children:r.jsxs(St,{className:"max-w-md",children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Mover Receptora"}),r.jsxs(Mt,{children:["Mover ",T==null?void 0:T.identificacao," para outra fazenda. Protocolos e histrico reprodutivo no sero afetados."]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"nova_fazenda",children:"Nova Fazenda *"}),r.jsxs(at,{value:F,onValueChange:E,children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione a fazenda de destino"})}),r.jsx(Je,{children:n.filter(te=>te.id!==i).map(te=>r.jsx(_e,{value:te.id,children:te.nome},te.id))})]})]}),M&&O&&r.jsxs("div",{className:"space-y-2 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:[r.jsx("div",{className:"flex items-start gap-2",children:r.jsx("div",{className:"text-yellow-800 text-sm font-medium",children:" Conflito de Brinco Detectado"})}),r.jsxs("div",{className:"text-yellow-700 text-sm",children:['J existe uma receptora com o brinco "',T==null?void 0:T.identificacao,'" na fazenda destino.']}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(B,{className:"text-yellow-800 text-sm font-medium",children:"Novo Brinco Proposto:"}),r.jsx("div",{className:"p-2 bg-white border border-yellow-300 rounded text-sm font-mono text-yellow-900",children:O}),r.jsx("div",{className:"text-yellow-600 text-xs",children:"O brinco ser automaticamente atualizado para permitir a movimentao."})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(G,{type:"button",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:ge,disabled:L||!F,children:L?"Movendo...":"Confirmar Movimentao"}),r.jsx(G,{type:"button",variant:"outline",onClick:()=>{N(!1),X(!1),U("")},disabled:L,children:"Cancelar"})]})]})]})}),r.jsx(bN,{receptoraId:R,open:C,onClose:()=>P(!1)})]})]})}function L6(){const e=Aa(),{toast:t}=Jt(),[a,s]=u.useState(!0),[n,o]=u.useState([]),[i,l]=u.useState([]),[c,d]=u.useState([]),[f,h]=u.useState(""),[p,m]=u.useState(""),[_,g]=u.useState(""),[x,y]=u.useState(""),[v,b]=u.useState(!1),[j,w]=u.useState(1),[S,N]=u.useState(0),C=50,[P,R]=u.useState(!1),[Q,K]=u.useState(null),[ce,L]=u.useState({data:new Date().toISOString().split("T")[0],tecnico:""}),[H,T]=u.useState(!1);u.useEffect(()=>{V()},[]);const V=async()=>{try{s(!0),await Promise.all([E(),O()])}catch(M){t({title:"Erro ao carregar dados",description:M instanceof Error?M.message:"Erro desconhecido",variant:"destructive"})}finally{s(!1)}},F=async M=>{if(!p||p==="all"||!_||!x){t({title:"Filtros obrigatrios",description:"Fazenda, data inicial e data final so obrigatrios para buscar no histrico",variant:"destructive"});return}try{b(!0);const $=((M!==void 0?M:j)-1)*C,ne=$+C*2-1;let le=D.from("protocolos_sincronizacao").select("*",{count:"exact"}).eq("fazenda_id",p).gte("data_inicio",_).lte("data_inicio",x).order("data_inicio",{ascending:!1}).range($,ne);const{data:z,error:A,count:J}=await le;if(A)throw A;const{data:ee}=await D.from("fazendas").select("nome").eq("id",p).single(),Z=(ee==null?void 0:ee.nome)||"N/A",ie=(await Promise.all((z||[]).map(async pe=>{const{count:ge,error:Le}=await D.from("protocolo_receptoras").select("*",{count:"exact",head:!0}).eq("protocolo_id",pe.id);return Le?(console.error("Erro ao contar receptoras:",Le),null):!ge||ge===0?null:{...pe,fazenda_nome:Z,receptoras_count:ge}}))).filter(pe=>pe!==null).slice(0,C);l(ie),N(J||0)}catch(X){console.error("Erro ao carregar histrico:",X),t({title:"Erro ao carregar histrico",description:X instanceof Error?X.message:"Erro desconhecido",variant:"destructive"}),l([])}finally{b(!1)}},E=async()=>{const{data:M,error:X}=await D.from("fazendas").select("*").order("nome",{ascending:!0});if(X)throw X;d(M||[])},O=async()=>{try{const{data:M,error:X}=await D.from("protocolos_sincronizacao").select("*").in("status",["PASSO1_FECHADO","PRIMEIRO_PASSO_FECHADO"]).order("data_inicio",{ascending:!1});if(X)throw X;const $=[];for(const ne of M||[]){const{data:le}=await D.from("fazendas").select("nome").eq("id",ne.fazenda_id).single(),{count:z}=await D.from("protocolo_receptoras").select("*",{count:"exact",head:!0}).eq("protocolo_id",ne.id).eq("status","INICIADA");$.push({...ne,fazenda_nome:(le==null?void 0:le.nome)||"N/A",receptoras_count:z||0})}o($)}catch(M){console.error("Error loading protocolos passo 2:",M)}},U=f&&f!=="all"?n.filter(M=>M.fazenda_id===f):n;return a?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Protocolos de Sincronizao"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar protocolos em 2 passos"})]}),r.jsxs(G,{onClick:()=>e("/protocolos/novo"),className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Ja,{className:"w-4 h-4 mr-2"}),"Novo Protocolo (1 Passo)"]})]}),r.jsxs(zf,{defaultValue:"aguardando",className:"w-full",children:[r.jsxs(Wc,{className:"grid w-full grid-cols-2",children:[r.jsxs(Lr,{value:"aguardando",children:["Aguardando 2 Passo - ",n.length]}),r.jsx(Lr,{value:"historico",children:"Histrico"})]}),r.jsxs(Ir,{value:"aguardando",className:"space-y-4",children:[r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Filtrar por Fazenda"})}),r.jsx(Ne,{children:r.jsxs(at,{value:f||"all",onValueChange:M=>h(M==="all"?"":M),children:[r.jsx(Ze,{className:"w-full md:w-[300px]",children:r.jsx(st,{placeholder:"Todas as fazendas"})}),r.jsxs(Je,{children:[r.jsx(_e,{value:"all",children:"Todas as fazendas"}),c.map(M=>r.jsx(_e,{value:M.id,children:M.nome},M.id))]})]})})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Protocolos Aguardando 2 Passo"})}),r.jsx(Ne,{children:r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Fazenda"}),r.jsx(Y,{children:"Data Incio"}),r.jsx(Y,{children:"Responsvel"}),r.jsx(Y,{children:"Receptoras Pendentes"}),r.jsx(Y,{children:"Status"}),r.jsx(Y,{className:"text-right",children:"Aes"})]})}),r.jsx(wt,{children:U.length===0?r.jsx(be,{children:r.jsx(I,{colSpan:6,className:"text-center text-slate-500",children:f?"Nenhum protocolo aguardando 2 passo nesta fazenda":"Nenhum protocolo aguardando 2 passo"})}):U.map(M=>r.jsxs(be,{children:[r.jsx(I,{className:"font-medium",children:M.fazenda_nome}),r.jsx(I,{children:Bt(M.data_inicio)}),r.jsx(I,{children:M.responsavel_inicio}),r.jsx(I,{children:M.receptoras_count}),r.jsx(I,{children:r.jsx(Xe,{variant:"secondary",children:"Aguardando 2 Passo"})}),r.jsx(I,{className:"text-right",children:r.jsxs(G,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",onClick:()=>{K(M.id),L({data:new Date().toISOString().split("T")[0],tecnico:""}),R(!0)},children:[r.jsx(GT,{className:"w-4 h-4 mr-2"}),"INICIAR 2 PASSO"]})})]},M.id))})]})})]})]}),r.jsxs(Ir,{value:"historico",className:"space-y-4",children:[r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Filtros de Busca (Obrigatrios)"})}),r.jsxs(Ne,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Fazenda *"}),r.jsxs(at,{value:p||"all",onValueChange:M=>{m(M==="all"?"":M),w(1)},children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione a fazenda"})}),r.jsxs(Je,{children:[r.jsx(_e,{value:"all",children:"Selecione..."}),c.map(M=>r.jsx(_e,{value:M.id,children:M.nome},M.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Data Incio (de) *"}),r.jsx(de,{type:"date",value:_,onChange:M=>{g(M.target.value),w(1)},placeholder:"Data inicial"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Data Incio (at) *"}),r.jsx(de,{type:"date",value:x,onChange:M=>{y(M.target.value),w(1)},placeholder:"Data final"})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx(B,{className:"w-full text-sm font-medium text-slate-700",children:"Atalhos rpidos:"}),r.jsx(G,{type:"button",variant:"outline",size:"sm",onClick:()=>{const M=new Date,X=new Date(M);X.setDate(M.getDate()-7),g(X.toISOString().split("T")[0]),y(M.toISOString().split("T")[0]),w(1)},children:"ltimos 7 dias"}),r.jsx(G,{type:"button",variant:"outline",size:"sm",onClick:()=>{const M=new Date,X=new Date(M);X.setDate(M.getDate()-30),g(X.toISOString().split("T")[0]),y(M.toISOString().split("T")[0]),w(1)},children:"ltimos 30 dias"}),r.jsx(G,{type:"button",variant:"outline",size:"sm",onClick:()=>{const M=new Date,X=new Date(M);X.setDate(M.getDate()-90),g(X.toISOString().split("T")[0]),y(M.toISOString().split("T")[0]),w(1)},children:"ltimos 90 dias"})]})]}),r.jsxs(G,{onClick:()=>{w(1),F()},className:"w-full md:w-auto",disabled:v||!p||p==="all"||!_||!x,children:[r.jsx(Tg,{className:"w-4 h-4 mr-2"}),v?"Buscando...":"Buscar Protocolos"]})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsxs(Oe,{children:["Histrico de Protocolos (",i.length,")"]})}),r.jsxs(Ne,{children:[v?r.jsx("div",{className:"py-8",children:r.jsx(Pt,{})}):i.length===0?r.jsxs("div",{className:"py-12 text-center text-slate-500",children:[r.jsx("p",{className:"text-lg",children:"Nenhum protocolo encontrado"}),r.jsx("p",{className:"text-sm mt-2",children:'Preencha os filtros obrigatrios e clique em "Buscar Protocolos"'})]}):r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Fazenda"}),r.jsx(Y,{children:"Data Incio"}),r.jsx(Y,{children:"Data 2 Passo"}),r.jsx(Y,{children:"Tcnico 2 Passo"}),r.jsx(Y,{children:"Receptoras"}),r.jsx(Y,{children:"Status"}),r.jsx(Y,{className:"text-right",children:"Aes"})]})}),r.jsx(wt,{children:i.map(M=>r.jsxs(be,{children:[r.jsx(I,{className:"font-medium",children:M.fazenda_nome}),r.jsx(I,{children:Bt(M.data_inicio)}),r.jsx(I,{children:M.passo2_data?Bt(M.passo2_data):"-"}),r.jsx(I,{children:M.passo2_tecnico_responsavel||"-"}),r.jsx(I,{children:M.receptoras_count}),r.jsx(I,{children:r.jsx(Xe,{variant:M.status==="PASSO2_FECHADO"?"secondary":"default",children:M.status==="PASSO2_FECHADO"?"Fechado":M.status||"N/A"})}),r.jsx(I,{className:"text-right",children:M.status==="PASSO2_FECHADO"?r.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>e(`/protocolos/fechados/${M.id}/relatorio`),children:[r.jsx(hc,{className:"w-4 h-4 mr-2"}),"Ver Relatrio"]}):r.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>{M.status==="PASSO1_FECHADO"||M.status==="PRIMEIRO_PASSO_FECHADO"?(K(M.id),L({data:new Date().toISOString().split("T")[0],tecnico:""}),R(!0)):e(`/protocolos/${M.id}`)},children:[r.jsx(hc,{className:"w-4 h-4 mr-2"}),"Ver Detalhes"]})})]},M.id))})]}),i.length>0&&r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[r.jsxs("div",{className:"text-sm text-slate-600",children:["Pgina ",j," - Mostrando ",i.length," protocolos"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(G,{variant:"outline",size:"sm",onClick:async()=>{const M=Math.max(1,j-1);w(M),await F(M)},disabled:j===1||v,children:[r.jsx(HT,{className:"w-4 h-4"}),"Anterior"]}),r.jsxs(G,{variant:"outline",size:"sm",onClick:async()=>{const M=j+1;w(M),await F(M)},disabled:i.length<C||v,children:["Prxima",r.jsx(VT,{className:"w-4 h-4"})]})]})]})]})]})]})]}),r.jsx(zt,{open:P,onOpenChange:R,children:r.jsxs(St,{children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Iniciar 2 Passo"}),r.jsx(Mt,{children:"Informe a data de realizao do 2 passo e o tcnico responsvel"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"passo2_data",children:"Data de Realizao do 2 Passo *"}),r.jsx(de,{id:"passo2_data",type:"date",value:ce.data,onChange:M=>L({...ce,data:M.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"passo2_tecnico",children:"Tcnico Responsvel *"}),r.jsx(de,{id:"passo2_tecnico",value:ce.tecnico,onChange:M=>L({...ce,tecnico:M.target.value}),placeholder:"Nome do tcnico responsvel",required:!0})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(G,{onClick:async()=>{if(!ce.data||!ce.tecnico.trim()){t({title:"Erro de validao",description:"Data e tcnico so obrigatrios",variant:"destructive"});return}if(!H)try{T(!0);const{count:M,error:X}=await D.from("protocolo_receptoras").select("*",{count:"exact",head:!0}).eq("protocolo_id",Q);if(X)throw console.error("Erro ao verificar receptoras:",X),new Error("Erro ao verificar receptoras vinculadas ao protocolo");if(!M||M===0){t({title:"Erro: Protocolo sem receptoras",description:"Este protocolo no possui receptoras vinculadas. No  possvel iniciar o 2 passo.",variant:"destructive"}),T(!1);return}const{error:$}=await D.from("protocolos_sincronizacao").update({passo2_data:ce.data,passo2_tecnico_responsavel:ce.tecnico.trim()}).eq("id",Q);if($)throw $;t({title:"2 passo iniciado",description:"Dados do 2 passo registrados com sucesso"}),R(!1),e(`/protocolos/${Q}/passo2`)}catch(M){console.error("Erro ao iniciar 2 passo:",M),t({title:"Erro ao iniciar 2 passo",description:M instanceof Error?M.message:"Erro desconhecido",variant:"destructive"})}finally{T(!1)}},className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:H,children:H?"Salvando...":"Confirmar e Iniciar"}),r.jsx(G,{variant:"outline",onClick:()=>R(!1),disabled:H,children:"Cancelar"})]})]})]})})]})}var _N="AlertDialog",[I6,X5]=Ts(_N,[HS]),$r=HS(),jN=e=>{const{__scopeAlertDialog:t,...a}=e,s=$r(t);return r.jsx(iv,{...s,...a,modal:!0})};jN.displayName=_N;var F6="AlertDialogTrigger",wN=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=$r(a);return r.jsx(oE,{...n,...s,ref:t})});wN.displayName=F6;var q6="AlertDialogPortal",SN=e=>{const{__scopeAlertDialog:t,...a}=e,s=$r(t);return r.jsx(lv,{...s,...a})};SN.displayName=q6;var B6="AlertDialogOverlay",EN=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=$r(a);return r.jsx(Qc,{...n,...s,ref:t})});EN.displayName=B6;var Ni="AlertDialogContent",[U6,$6]=I6(Ni),H6=wj("AlertDialogContent"),NN=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,children:s,...n}=e,o=$r(a),i=u.useRef(null),l=vt(t,i),c=u.useRef(null);return r.jsx(Ek,{contentName:Ni,titleName:CN,docsSlug:"alert-dialog",children:r.jsx(U6,{scope:a,cancelRef:c,children:r.jsxs(Kc,{role:"alertdialog",...o,...n,ref:l,onOpenAutoFocus:ke(n.onOpenAutoFocus,d=>{var f;d.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(H6,{children:s}),r.jsx(G6,{contentRef:i})]})})})});NN.displayName=Ni;var CN="AlertDialogTitle",AN=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=$r(a);return r.jsx(Xc,{...n,...s,ref:t})});AN.displayName=CN;var TN="AlertDialogDescription",DN=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=$r(a);return r.jsx(Zc,{...n,...s,ref:t})});DN.displayName=TN;var V6="AlertDialogAction",RN=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=$r(a);return r.jsx(Tf,{...n,...s,ref:t})});RN.displayName=V6;var ON="AlertDialogCancel",zN=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,{cancelRef:n}=$6(ON,a),o=$r(a),i=vt(t,n);return r.jsx(Tf,{...o,...s,ref:i})});zN.displayName=ON;var G6=({contentRef:e})=>{const t=`\`${Ni}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ni}\` by passing a \`${TN}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ni}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return u.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Y6=jN,Q6=wN,K6=SN,MN=EN,PN=NN,kN=RN,LN=zN,IN=AN,FN=DN;const Xi=Y6,X6=Q6,Z6=K6,qN=u.forwardRef(({className:e,...t},a)=>r.jsx(MN,{className:je("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));qN.displayName=MN.displayName;const Eo=u.forwardRef(({className:e,...t},a)=>r.jsxs(Z6,{children:[r.jsx(qN,{}),r.jsx(PN,{ref:a,className:je("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Eo.displayName=PN.displayName;const No=({className:e,...t})=>r.jsx("div",{className:je("flex flex-col space-y-2 text-center sm:text-left",e),...t});No.displayName="AlertDialogHeader";const Co=({className:e,...t})=>r.jsx("div",{className:je("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Co.displayName="AlertDialogFooter";const Ao=u.forwardRef(({className:e,...t},a)=>r.jsx(IN,{ref:a,className:je("text-lg font-semibold",e),...t}));Ao.displayName=IN.displayName;const To=u.forwardRef(({className:e,...t},a)=>r.jsx(FN,{ref:a,className:je("text-sm text-muted-foreground",e),...t}));To.displayName=FN.displayName;const Do=u.forwardRef(({className:e,...t},a)=>r.jsx(kN,{ref:a,className:je(Xg(),e),...t}));Do.displayName=kN.displayName;const Ro=u.forwardRef(({className:e,...t},a)=>r.jsx(LN,{ref:a,className:je(Xg({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Ro.displayName=LN.displayName;var If="Popover",[BN,Z5]=Ts(If,[ul]),ed=ul(),[J6,qn]=BN(If),UN=e=>{const{__scopePopover:t,children:a,open:s,defaultOpen:n,onOpenChange:o,modal:i=!1}=e,l=ed(t),c=u.useRef(null),[d,f]=u.useState(!1),[h,p]=Bs({prop:s,defaultProp:n??!1,onChange:o,caller:If});return r.jsx(Pw,{...l,children:r.jsx(J6,{scope:t,contentId:Dr(),triggerRef:c,open:h,onOpenChange:p,onOpenToggle:u.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:d,onCustomAnchorAdd:u.useCallback(()=>f(!0),[]),onCustomAnchorRemove:u.useCallback(()=>f(!1),[]),modal:i,children:a})})};UN.displayName=If;var $N="PopoverAnchor",W6=u.forwardRef((e,t)=>{const{__scopePopover:a,...s}=e,n=qn($N,a),o=ed(a),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=n;return u.useEffect(()=>(i(),()=>l()),[i,l]),r.jsx(ff,{...o,...s,ref:t})});W6.displayName=$N;var HN="PopoverTrigger",VN=u.forwardRef((e,t)=>{const{__scopePopover:a,...s}=e,n=qn(HN,a),o=ed(a),i=vt(t,n.triggerRef),l=r.jsx(Ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":XN(n.open),...s,ref:i,onClick:ke(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?l:r.jsx(ff,{asChild:!0,...o,children:l})});VN.displayName=HN;var gv="PopoverPortal",[e5,t5]=BN(gv,{forceMount:void 0}),GN=e=>{const{__scopePopover:t,forceMount:a,children:s,container:n}=e,o=qn(gv,t);return r.jsx(e5,{scope:t,forceMount:a,children:r.jsx(qr,{present:a||o.open,children:r.jsx(qc,{asChild:!0,container:n,children:s})})})};GN.displayName=gv;var Zi="PopoverContent",YN=u.forwardRef((e,t)=>{const a=t5(Zi,e.__scopePopover),{forceMount:s=a.forceMount,...n}=e,o=qn(Zi,e.__scopePopover);return r.jsx(qr,{present:s||o.open,children:o.modal?r.jsx(s5,{...n,ref:t}):r.jsx(r5,{...n,ref:t})})});YN.displayName=Zi;var a5=bo("PopoverContent.RemoveScroll"),s5=u.forwardRef((e,t)=>{const a=qn(Zi,e.__scopePopover),s=u.useRef(null),n=vt(t,s),o=u.useRef(!1);return u.useEffect(()=>{const i=s.current;if(i)return sv(i)},[]),r.jsx(Cf,{as:a5,allowPinchZoom:!0,children:r.jsx(QN,{...e,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ke(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=a.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ke(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:ke(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),r5=u.forwardRef((e,t)=>{const a=qn(Zi,e.__scopePopover),s=u.useRef(!1),n=u.useRef(!1);return r.jsx(QN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=a.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const i=o.target;((d=a.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&n.current&&o.preventDefault()}})}),QN=u.forwardRef((e,t)=>{const{__scopePopover:a,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:f,...h}=e,p=qn(Zi,a),m=ed(a);return av(),r.jsx(Ef,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:o,children:r.jsx(ol,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:r.jsx(Ug,{"data-state":XN(p.open),role:"dialog",id:p.contentId,...m,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),KN="PopoverClose",n5=u.forwardRef((e,t)=>{const{__scopePopover:a,...s}=e,n=qn(KN,a);return r.jsx(Ve.button,{type:"button",...s,ref:t,onClick:ke(e.onClick,()=>n.onOpenChange(!1))})});n5.displayName=KN;var o5="PopoverArrow",i5=u.forwardRef((e,t)=>{const{__scopePopover:a,...s}=e,n=ed(a);return r.jsx($g,{...n,...s,ref:t})});i5.displayName=o5;function XN(e){return e?"open":"closed"}var l5=UN,c5=VN,d5=GN,ZN=YN;const JN=l5,WN=c5,vv=u.forwardRef(({className:e,align:t="center",sideOffset:a=4,...s},n)=>r.jsx(d5,{children:r.jsx(ZN,{ref:n,align:t,sideOffset:a,className:je("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));vv.displayName=ZN.displayName;function xv({value:e,onChange:t,disabled:a=!1,variant:s="display"}){return s==="editable"&&t&&!a?r.jsxs(JN,{children:[r.jsx(WN,{asChild:!0,children:r.jsxs(G,{variant:"outline",size:"sm",className:"h-7 px-3",disabled:a,children:[e==="N"&&r.jsx(Xe,{variant:"outline",className:"bg-slate-100 text-slate-700 border-0",children:"N"}),e==="CL"&&r.jsx(Xe,{variant:"outline",className:"bg-blue-100 text-blue-700 border-0",children:"CL"}),!e&&r.jsx("span",{className:"text-slate-400 text-sm",children:"Selecionar"})]})}),r.jsx(vv,{className:"w-auto p-2",align:"start",children:r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs(G,{variant:e==="N"?"default":"outline",size:"sm",className:"justify-start",onClick:()=>t("N"),children:[r.jsx(Xe,{variant:"outline",className:"bg-slate-100 text-slate-700 border-0 mr-2",children:"N"}),e==="N"&&r.jsx(Eu,{className:"w-4 h-4 ml-auto"})]}),r.jsxs(G,{variant:e==="CL"?"default":"outline",size:"sm",className:"justify-start",onClick:()=>t("CL"),children:[r.jsx(Xe,{variant:"outline",className:"bg-blue-100 text-blue-700 border-0 mr-2",children:"CL"}),e==="CL"&&r.jsx(Eu,{className:"w-4 h-4 ml-auto"})]}),e&&r.jsxs(G,{variant:"ghost",size:"sm",className:"justify-start text-slate-500",onClick:()=>t(null),children:[r.jsx(Cs,{className:"w-4 h-4 mr-2"}),"Limpar"]})]})})]}):e==="N"?r.jsx(Xe,{variant:"outline",className:"bg-slate-100 text-slate-700 text-xs",children:"N"}):e==="CL"?r.jsx(Xe,{variant:"outline",className:"bg-blue-100 text-blue-700 text-xs",children:"CL"}):r.jsx("span",{className:"text-slate-300 text-xs",children:""})}function yv({value:e,onChange:t,disabled:a=!1,variant:s="single"}){const n=s==="row"&&t&&!a,o=l=>{switch(l){case 1:return"bg-red-500";case 2:return"bg-yellow-500";case 3:return"bg-green-500"}},i=(l,c)=>r.jsx("div",{className:je("w-6 h-6 rounded-full border-2 transition-all",o(l),c?"border-slate-900 scale-110":"border-slate-300",n&&!a&&"cursor-pointer hover:scale-125"),onClick:()=>n&&(t==null?void 0:t(l)),title:`Qualidade ${l}`});return s==="single"?e?r.jsx("div",{className:"flex items-center gap-1.5",children:r.jsx("div",{className:je("w-4 h-4 rounded-full border-2",o(e),"border-slate-300"),title:`Qualidade ${e}`})}):r.jsx("span",{className:"text-slate-300 text-xs",children:""}):r.jsxs(JN,{children:[r.jsx(WN,{asChild:!0,children:r.jsx(G,{variant:"outline",size:"sm",className:"h-7 px-3",disabled:a,children:r.jsx("div",{className:"flex items-center gap-1",children:e?r.jsxs(r.Fragment,{children:[i(e,!1),r.jsx("span",{className:"text-sm text-slate-600 ml-1",children:e})]}):r.jsx("span",{className:"text-slate-400 text-sm",children:"Selecionar"})})})}),r.jsx(vv,{className:"w-auto p-3",align:"start",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx("div",{className:"flex items-center gap-3",children:[1,2,3].map(l=>r.jsxs("button",{type:"button",className:je("flex items-center gap-2 p-2 rounded-md transition-all","hover:bg-slate-100",e===l&&"bg-slate-100"),onClick:()=>t(l),disabled:a,children:[i(l,e===l),r.jsx("span",{className:"text-sm text-slate-700",children:l}),e===l&&r.jsx(Eu,{className:"w-4 h-4 text-green-600"})]},l))}),e&&r.jsxs(G,{variant:"ghost",size:"sm",className:"justify-start text-slate-500",onClick:()=>t(null),disabled:a,children:[r.jsx(Cs,{className:"w-4 h-4 mr-2"}),"Limpar"]})]})})]})}var e1="Toggle",bv=u.forwardRef((e,t)=>{const{pressed:a,defaultPressed:s,onPressedChange:n,...o}=e,[i,l]=Bs({prop:a,onChange:n,defaultProp:s??!1,caller:e1});return r.jsx(Ve.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...o,ref:t,onClick:ke(e.onClick,()=>{e.disabled||l(!i)})})});bv.displayName=e1;var t1=bv,Bn="ToggleGroup",[a1,J5]=Ts(Bn,[Rf]),s1=Rf(),_v=fe.forwardRef((e,t)=>{const{type:a,...s}=e;if(a==="single"){const n=s;return r.jsx(u5,{...n,ref:t})}if(a==="multiple"){const n=s;return r.jsx(f5,{...n,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Bn}\``)});_v.displayName=Bn;var[r1,n1]=a1(Bn),u5=fe.forwardRef((e,t)=>{const{value:a,defaultValue:s,onValueChange:n=()=>{},...o}=e,[i,l]=Bs({prop:a,defaultProp:s??"",onChange:n,caller:Bn});return r.jsx(r1,{scope:e.__scopeToggleGroup,type:"single",value:fe.useMemo(()=>i?[i]:[],[i]),onItemActivate:l,onItemDeactivate:fe.useCallback(()=>l(""),[l]),children:r.jsx(o1,{...o,ref:t})})}),f5=fe.forwardRef((e,t)=>{const{value:a,defaultValue:s,onValueChange:n=()=>{},...o}=e,[i,l]=Bs({prop:a,defaultProp:s??[],onChange:n,caller:Bn}),c=fe.useCallback(f=>l((h=[])=>[...h,f]),[l]),d=fe.useCallback(f=>l((h=[])=>h.filter(p=>p!==f)),[l]);return r.jsx(r1,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:d,children:r.jsx(o1,{...o,ref:t})})});_v.displayName=Bn;var[h5,m5]=a1(Bn),o1=fe.forwardRef((e,t)=>{const{__scopeToggleGroup:a,disabled:s=!1,rovingFocus:n=!0,orientation:o,dir:i,loop:l=!0,...c}=e,d=s1(a),f=Df(i),h={role:"group",dir:f,...c};return r.jsx(h5,{scope:a,rovingFocus:n,disabled:s,children:n?r.jsx(hE,{asChild:!0,...d,orientation:o,dir:f,loop:l,children:r.jsx(Ve.div,{...h,ref:t})}):r.jsx(Ve.div,{...h,ref:t})})}),Fu="ToggleGroupItem",i1=fe.forwardRef((e,t)=>{const a=n1(Fu,e.__scopeToggleGroup),s=m5(Fu,e.__scopeToggleGroup),n=s1(e.__scopeToggleGroup),o=a.value.includes(e.value),i=s.disabled||e.disabled,l={...e,pressed:o,disabled:i},c=fe.useRef(null);return s.rovingFocus?r.jsx(mE,{asChild:!0,...n,focusable:!i,active:o,ref:c,children:r.jsx(fy,{...l,ref:t})}):r.jsx(fy,{...l,ref:t})});i1.displayName=Fu;var fy=fe.forwardRef((e,t)=>{const{__scopeToggleGroup:a,value:s,...n}=e,o=n1(Fu,a),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=o.type==="single"?i:void 0;return r.jsx(bv,{...l,...n,ref:t,onPressedChange:c=>{c?o.onItemActivate(s):o.onItemDeactivate(s)}})}),l1=_v,c1=i1;const d1=il("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),p5=u.forwardRef(({className:e,variant:t,size:a,...s},n)=>r.jsx(t1,{ref:n,className:je(d1({variant:t,size:a,className:e})),...s}));p5.displayName=t1.displayName;const u1=u.createContext({size:"default",variant:"default"}),f1=u.forwardRef(({className:e,variant:t,size:a,children:s,...n},o)=>r.jsx(l1,{ref:o,className:je("flex items-center justify-center gap-1",e),...n,children:r.jsx(u1.Provider,{value:{variant:t,size:a},children:s})}));f1.displayName=l1.displayName;const yp=u.forwardRef(({className:e,children:t,variant:a,size:s,...n},o)=>{const i=u.useContext(u1);return r.jsx(c1,{ref:o,className:je(d1({variant:i.variant||a,size:i.size||s}),e),...n,children:t})});yp.displayName=c1.displayName;function hy({ciclandoValue:e,qualidadeValue:t,onChangeCiclando:a,onChangeQualidade:s,disabled:n=!1,size:o="sm"}){const i=o==="sm"?"text-xs":"text-sm",l=o==="sm"?"w-4 h-4":"w-5 h-5",c=d=>{switch(d){case 1:return"bg-red-500";case 2:return"bg-yellow-500";case 3:return"bg-green-500"}};return r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-slate-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:je("text-slate-500 font-medium",i),children:"Ciclo:"}),r.jsxs(f1,{type:"single",value:e||void 0,onValueChange:d=>{n||a(d==="CL"||d==="N"?d:null)},disabled:n,className:"gap-1",children:[r.jsx(yp,{value:"CL","aria-label":"CL",size:"sm",variant:"outline",className:je("h-7 px-2 text-xs",e==="CL"&&"bg-blue-100 text-blue-700 border-blue-300 data-[state=on]:bg-blue-100",n&&"opacity-60"),children:"CL"}),r.jsx(yp,{value:"N","aria-label":"N",size:"sm",variant:"outline",className:je("h-7 px-2 text-xs",e==="N"&&"bg-slate-100 text-slate-700 border-slate-300 data-[state=on]:bg-slate-100",n&&"opacity-60"),children:"N"})]}),e&&!n&&r.jsx(G,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-slate-400 hover:text-slate-600",onClick:()=>a(null),type:"button",children:r.jsx(Cs,{className:"w-3 h-3"})}),!e&&r.jsx("span",{className:je("text-slate-300",i),children:""})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:je("text-slate-500 font-medium",i),children:"Qualidade:"}),r.jsx("div",{className:"flex items-center gap-1.5",children:[1,2,3].map(d=>r.jsx("button",{type:"button",disabled:n,onClick:()=>{n||s(t===d?null:d)},className:je(l,"rounded-full border-2 transition-all",c(d),t===d?"border-slate-900 scale-110 ring-2 ring-slate-300":"border-slate-300 opacity-50 hover:opacity-75 hover:scale-105",n&&"opacity-40 cursor-not-allowed",!n&&"cursor-pointer"),title:`Qualidade ${d}`},d))}),t&&!n&&r.jsx(G,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-slate-400 hover:text-slate-600",onClick:()=>s(null),type:"button",children:r.jsx(Cs,{className:"w-3 h-3"})}),!t&&r.jsx("span",{className:je("text-slate-300",i),children:""})]})]})}function g5(){var le;const e=Aa(),{toast:t}=Jt(),[a,s]=u.useState(!1),[n,o]=u.useState(!1),i=u.useRef(!1),[l,c]=u.useState("form"),[d,f]=u.useState([]),[h,p]=u.useState([]),[m,_]=u.useState(!1),[g,x]=u.useState(!1),[y,v]=u.useState(!1),[b,j]=u.useState(!1),[w,S]=u.useState({fazenda_id:"",data_inicio:new Date().toISOString().split("T")[0],veterinario:"",tecnico:"",observacoes:""}),[N,C]=u.useState([]),[P,R]=u.useState({receptora_id:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),[Q,K]=u.useState({identificacao:"",nome:"",observacoes:""});u.useEffect(()=>{ce()},[]),u.useEffect(()=>{l==="receptoras"&&w.fazenda_id?L(w.fazenda_id):l!=="receptoras"&&p([])},[l,w.fazenda_id]);const ce=async()=>{try{const{data:z,error:A}=await D.from("fazendas").select("*").order("nome",{ascending:!0});if(A)throw A;f(z||[])}catch(z){t({title:"Erro ao carregar fazendas",description:z instanceof Error?z.message:"Erro desconhecido",variant:"destructive"})}},L=async z=>{try{_(!0);const{data:A,error:J}=await D.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",z);if(J)throw J;const ee=(A==null?void 0:A.map(te=>te.receptora_id))||[];if(ee.length===0){p([]);return}const{data:Z,error:ae}=await D.from("receptoras").select("id, identificacao, nome").in("id",ee).order("identificacao",{ascending:!0});if(ae)throw ae;const pe=(Z||[]||[]).filter(te=>(te.id?String(te.id).trim():"")!=="").map(async te=>{const xe=te.id?String(te.id).trim():"";return xe&&await Qd(xe)==="VAZIA"?te:null}),Le=(await Promise.all(pe)).filter(te=>te!==null);p(Le)}catch(A){console.error("Error loading receptoras:",A),t({title:"Erro ao carregar receptoras",description:A instanceof Error?A.message:"Erro desconhecido",variant:"destructive"})}finally{_(!1)}},H=u.useMemo(()=>new Set(N.filter(z=>z.id&&z.id.trim()!==""&&z.id!==null&&z.id!==void 0).map(z=>String(z.id).trim())),[N]),T=u.useMemo(()=>h.filter(z=>{const A=z.id?String(z.id).trim():"";return A!==""&&!H.has(A)}),[h,H]),V=u.useMemo(()=>{const z=Array.from(H).sort();return z.length>0?z.join("|"):"empty"},[N]),F=()=>{if(!w.fazenda_id||!w.data_inicio||!w.veterinario.trim()||!w.tecnico.trim()){t({title:"Erro de validao",description:"Fazenda, data de incio, veterinrio e tcnico so obrigatrios",variant:"destructive"});return}c("receptoras")},E=()=>{var J;const z=((J=P.receptora_id)==null?void 0:J.trim())||"";if(!z){t({title:"Erro",description:"Selecione uma receptora",variant:"destructive"});return}const A=h.find(ee=>(ee.id?String(ee.id).trim():"")===z);if(!A||!A.id){t({title:"Erro",description:"Receptora no encontrada ou invlida",variant:"destructive"});return}if(H.has(z)){t({title:"Receptora j adicionada",description:"Esta receptora j est na lista de selecionadas",variant:"destructive"});return}C(ee=>{var ae;return ee.some(ie=>(ie.id?String(ie.id).trim():"")===z)?ee:[...ee,{id:A.id,identificacao:A.identificacao,nome:A.nome,observacoes:((ae=P.observacoes)==null?void 0:ae.trim())||void 0,ciclando_classificacao:P.ciclando_classificacao||null,qualidade_semaforo:P.qualidade_semaforo||null}]}),R({receptora_id:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),v(!1)},O=async()=>{var z;if(!Q.identificacao.trim()){t({title:"Erro de validao",description:"Identificao (brinco)  obrigatria",variant:"destructive"});return}try{o(!0);const A={identificacao:Q.identificacao};Q.nome.trim()&&(A.nome=Q.nome);const{data:J,error:ee}=await D.from("receptoras").insert([A]).select().single();if(ee)throw ee.code==="23505"?new Error("J existe uma receptora com esse brinco nesta fazenda."):ee;const{error:Z}=await D.from("receptora_fazenda_historico").insert([{receptora_id:J.id,fazenda_id:w.fazenda_id,data_inicio:new Date().toISOString().split("T")[0],data_fim:null}]);Z&&((z=Z.message)!=null&&z.includes("brinco")||Z.code==="P0001"||console.error("Erro ao criar histrico de fazenda:",Z)),C([...N,{id:J.id,identificacao:J.identificacao,nome:J.nome,observacoes:Q.observacoes||void 0,ciclando_classificacao:Q.ciclando_classificacao||null,qualidade_semaforo:Q.qualidade_semaforo||null,isNew:!0}]),K({identificacao:"",nome:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),j(!1),L(w.fazenda_id)}catch(A){t({title:"Erro ao criar receptora",description:A instanceof Error?A.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},U=z=>{C(N.filter((A,J)=>J!==z))},M=async()=>{if(i.current||n)return;if(N.length===0){t({title:"Erro de validao",description:"Adicione pelo menos 1 receptora antes de finalizar o 1 passo",variant:"destructive"});return}const z=N.filter(ie=>!ie.id||ie.id===""||ie.id===null||ie.id===void 0);if(z.length>0){console.error("Receptoras com IDs invlidos:",z),t({title:"Erro de validao",description:"Seleo de receptora invlida. Refaa a seleo.",variant:"destructive"});return}const A=N.filter(ie=>ie.id&&ie.id!==""&&ie.id!==null&&ie.id!==void 0);if(A.length!==N.length||A.length===0){console.error("Receptoras invlidas ou nenhuma vlida aps validao"),t({title:"Erro de validao",description:"Seleo de receptora invlida. Refaa a seleo.",variant:"destructive"});return}const J=A.map(ie=>ie.id),ee=A.map(ie=>ie.observacoes||null),Z=A.map(ie=>ie.ciclando_classificacao||null),ae=A.map(ie=>ie.qualidade_semaforo||null);try{i.current=!0,o(!0);const ie=`VET: ${w.veterinario.trim()} | TEC: ${w.tecnico.trim()}`,{data:pe,error:ge}=await D.rpc("criar_protocolo_passo1_atomico",{p_fazenda_id:w.fazenda_id,p_data_inicio:w.data_inicio,p_responsavel_inicio:ie,p_receptoras_ids:J,p_data_inclusao:w.data_inicio,p_observacoes:w.observacoes.trim()||null,p_receptoras_observacoes:ee});if(ge)throw console.error("Erro ao criar protocolo (RPC):",ge),ge;if(!pe)throw new Error("Protocolo criado mas ID no retornado");const{data:Le,error:te}=await D.from("protocolo_receptoras").select("id, receptora_id").eq("protocolo_id",pe).in("receptora_id",J);if(te)console.error("Erro ao buscar receptoras do protocolo:",te);else if(Le&&Le.length>0){const xe=new Map(J.map((he,Se)=>[he,Se])),q=Le.map(async he=>{const Se=xe.get(he.receptora_id);if(Se===void 0)return;const Ce=Z[Se],we=ae[Se],{error:k}=await D.from("protocolo_receptoras").update({ciclando_classificacao:Ce,qualidade_semaforo:we}).eq("id",he.id);k&&console.error(`Erro ao atualizar classificaes da receptora ${he.receptora_id}:`,k)});await Promise.allSettled(q)}t({title:"Protocolo criado com sucesso",description:`${N.length} receptoras adicionadas ao protocolo`}),e("/protocolos")}catch(ie){console.error("Erro ao finalizar protocolo:",ie);const pe=ie instanceof Error?ie.message:"Erro desconhecido ao finalizar protocolo";t({title:"Erro ao finalizar protocolo",description:pe,variant:"destructive"})}finally{o(!1),i.current=!1}},X=()=>{l==="form"?e("/protocolos"):c("form")},$=()=>{w.fazenda_id||N.length>0?x(!0):e("/protocolos")},ne=()=>{x(!1),e("/protocolos")};return l==="form"?r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(G,{variant:"ghost",size:"sm",onClick:$,children:r.jsx(Za,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Novo Protocolo"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Primeira visita - Cadastrar novo protocolo de sincronizao"})]})]})}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Informaes do Protocolo"})}),r.jsx(Ne,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"fazenda_id",children:"Fazenda *"}),r.jsxs(at,{value:w.fazenda_id,onValueChange:z=>S({...w,fazenda_id:z}),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione a fazenda"})}),r.jsx(Je,{children:d.map(z=>r.jsx(_e,{value:z.id,children:z.nome},z.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"data_inicio",children:"Data de Incio *"}),r.jsx(de,{id:"data_inicio",type:"date",value:w.data_inicio,onChange:z=>S({...w,data_inicio:z.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"veterinario",children:"Veterinrio Responsvel *"}),r.jsx(de,{id:"veterinario",value:w.veterinario,onChange:z=>S({...w,veterinario:z.target.value}),placeholder:"Nome do veterinrio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"tecnico",children:"Tcnico Responsvel *"}),r.jsx(de,{id:"tecnico",value:w.tecnico,onChange:z=>S({...w,tecnico:z.target.value}),placeholder:"Nome do tcnico/funcionrio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(ja,{id:"observacoes",value:w.observacoes,onChange:z=>S({...w,observacoes:z.target.value}),placeholder:"Observaes sobre o protocolo",rows:3})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx(G,{onClick:F,className:"bg-green-600 hover:bg-green-700",disabled:a,children:"Continuar para Receptoras"}),r.jsx(G,{type:"button",variant:"outline",onClick:$,disabled:a,children:"Sair"})]})]})})]}),r.jsx(Xi,{open:g,onOpenChange:x,children:r.jsxs(Eo,{children:[r.jsxs(No,{children:[r.jsx(Ao,{children:"Sair sem finalizar?"}),r.jsx(To,{children:"Se voc sair agora, nenhum protocolo ser criado. Todos os dados preenchidos sero perdidos."})]}),r.jsxs(Co,{children:[r.jsx(Ro,{children:"Cancelar"}),r.jsx(Do,{onClick:ne,children:"Sim, sair"})]})]})})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(G,{variant:"ghost",size:"sm",onClick:X,children:r.jsx(Za,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Adicionar Receptoras"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Selecione as receptoras para este protocolo"})]})]}),r.jsxs(G,{variant:"ghost",onClick:$,children:[r.jsx(Cs,{className:"w-4 h-4 mr-2"}),"Sair"]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Informaes do Protocolo"})}),r.jsxs(Ne,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:((le=d.find(z=>z.id===w.fazenda_id))==null?void 0:le.nome)||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data Incio"}),r.jsx("p",{className:"text-base text-slate-900",children:w.data_inicio})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Veterinrio"}),r.jsx("p",{className:"text-base text-slate-900",children:w.veterinario})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tcnico"}),r.jsx("p",{className:"text-base text-slate-900",children:w.tecnico})]})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Oe,{children:["Receptoras do Protocolo (",N.length,")"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(zt,{open:y,onOpenChange:z=>{v(z),z||R({receptora_id:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null})},children:[r.jsx(As,{asChild:!0,children:r.jsxs(G,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Ja,{className:"w-4 h-4 mr-2"}),"Adicionar Receptora"]})}),r.jsxs(St,{className:"max-w-lg",children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Adicionar Receptora ao Protocolo"}),r.jsx(Mt,{children:"Selecione uma receptora VAZIA da fazenda ou cadastre uma nova"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Receptora *"}),r.jsxs(at,{value:P.receptora_id||"",onValueChange:z=>{const A=(z==null?void 0:z.trim())||"";R({...P,receptora_id:A})},children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione uma receptora VAZIA"})}),r.jsx(Je,{children:m?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Carregando receptoras..."}):T.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhuma receptora VAZIA disponvel nesta fazenda"}):T.map(z=>{const A=z.id?String(z.id).trim():"";return A?r.jsxs(_e,{value:A,children:[z.identificacao," ",z.nome?`- ${z.nome}`:""]},z.id):null}).filter(z=>z!==null)},V)]})]}),r.jsx("div",{className:"space-y-2",children:r.jsx(hy,{ciclandoValue:P.ciclando_classificacao,qualidadeValue:P.qualidade_semaforo,onChangeCiclando:z=>R({...P,ciclando_classificacao:z}),onChangeQualidade:z=>R({...P,qualidade_semaforo:z}),size:"sm"})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Observaes"}),r.jsx(ja,{value:P.observacoes,onChange:z=>R({...P,observacoes:z.target.value}),placeholder:"Observaes sobre a incluso",rows:2})]}),r.jsx(G,{onClick:E,className:"w-full bg-green-600 hover:bg-green-700",disabled:T.length===0||m||!P.receptora_id,children:"Adicionar"})]})]})]}),r.jsxs(zt,{open:b,onOpenChange:z=>{j(z),z||K({identificacao:"",nome:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null})},children:[r.jsx(As,{asChild:!0,children:r.jsxs(G,{variant:"outline",children:[r.jsx(Au,{className:"w-4 h-4 mr-2"}),"Cadastrar Nova"]})}),r.jsxs(St,{children:[r.jsx(Et,{children:r.jsx(Nt,{children:"Cadastrar Nova Receptora"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Identificao (Brinco) *"}),r.jsx(de,{value:Q.identificacao,onChange:z=>K({...Q,identificacao:z.target.value}),placeholder:"Nmero do brinco"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Nome"}),r.jsx(de,{value:Q.nome,onChange:z=>K({...Q,nome:z.target.value}),placeholder:"Nome da receptora (opcional)"})]}),r.jsx("div",{className:"space-y-2",children:r.jsx(hy,{ciclandoValue:Q.ciclando_classificacao,qualidadeValue:Q.qualidade_semaforo,onChangeCiclando:z=>K({...Q,ciclando_classificacao:z}),onChangeQualidade:z=>K({...Q,qualidade_semaforo:z}),size:"sm"})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Observaes"}),r.jsx(ja,{value:Q.observacoes,onChange:z=>K({...Q,observacoes:z.target.value}),placeholder:"Observaes sobre a receptora",rows:2})]}),r.jsxs(G,{onClick:O,className:"w-full bg-blue-600 hover:bg-blue-700",disabled:n,children:[r.jsx(Au,{className:"w-4 h-4 mr-2"}),n?"Criando...":"Criar e Adicionar"]})]})]})]})]})]})}),r.jsx(Ne,{children:N.length===0?r.jsx("div",{className:"text-center py-8 text-slate-500",children:"Nenhuma receptora adicionada. Adicione pelo menos uma antes de finalizar."}):r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Brinco"}),r.jsx(Y,{children:"Nome"}),r.jsx(Y,{children:"Ciclando"}),r.jsx(Y,{children:"Qualidade"}),r.jsx(Y,{children:"Observaes"}),r.jsx(Y,{className:"text-right",children:"Aes"})]})}),r.jsx(wt,{children:N.map((z,A)=>{const J=z.id&&z.id.trim()!==""?z.id:`new-${A}`,ee=ae=>{C(ie=>ie.map((pe,ge)=>ge===A?{...pe,ciclando_classificacao:ae}:pe))},Z=ae=>{C(ie=>ie.map((pe,ge)=>ge===A?{...pe,qualidade_semaforo:ae}:pe))};return r.jsxs(be,{children:[r.jsx(I,{className:"font-medium",children:z.identificacao}),r.jsx(I,{children:z.nome||"-"}),r.jsx(I,{children:r.jsx(xv,{value:z.ciclando_classificacao,onChange:ee,variant:"editable"})}),r.jsx(I,{children:r.jsx(yv,{value:z.qualidade_semaforo,onChange:Z,variant:"row"})}),r.jsx(I,{children:z.observacoes||"-"}),r.jsx(I,{className:"text-right",children:r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>U(A),children:r.jsx(Cs,{className:"w-4 h-4"})})})]},J)})})]})})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs(G,{onClick:M,disabled:N.length===0||n||i.current,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(lf,{className:"w-4 h-4 mr-2"}),n||i.current?"Finalizando...":"Finalizar 1 Passo"]}),r.jsx(G,{variant:"outline",onClick:X,disabled:n||i.current,children:"Voltar"})]}),r.jsx(Xi,{open:g,onOpenChange:x,children:r.jsxs(Eo,{children:[r.jsxs(No,{children:[r.jsx(Ao,{children:"Sair sem finalizar?"}),r.jsx(To,{children:"Se voc sair agora, nenhum protocolo ser criado. Todos os dados preenchidos sero perdidos."})]}),r.jsxs(Co,{children:[r.jsx(Ro,{children:"Cancelar"}),r.jsx(Do,{onClick:ne,children:"Sim, sair"})]})]})})]})}function v5(){const{id:e}=Ur(),t=Aa(),{toast:a}=Jt(),[s,n]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(""),[h,p]=u.useState([]),[m,_]=u.useState([]),g=u.useRef(!1),[x,y]=u.useState(!1),[v,b]=u.useState(!1),[j,w]=u.useState(!1),[S,N]=u.useState({receptora_id:"",observacoes:""}),[C,P]=u.useState({identificacao:"",nome:"",observacoes:""});u.useEffect(()=>{e&&R()},[e]);const R=async()=>{try{n(!0);const{data:E,error:O}=await D.from("protocolos_sincronizacao").select("*").eq("id",e).single();if(O)throw O;c(E);const{data:U,error:M}=await D.from("fazendas").select("nome").eq("id",E.fazenda_id).single();if(M)throw M;f(U.nome),await Q(),await K(E.fazenda_id)}catch(E){a({title:"Erro ao carregar dados",description:E instanceof Error?E.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},Q=async()=>{try{const{data:E,error:O}=await D.from("protocolo_receptoras").select("*").eq("protocolo_id",e);if(O)throw O;if(!E||E.length===0){p([]);return}const U=E.map(le=>le.receptora_id),{data:M,error:X}=await D.from("receptoras").select("*").in("id",U);if(X)throw X;const $=new Map((M==null?void 0:M.map(le=>[le.id,le]))||[]),ne=E.map(le=>{const z=$.get(le.receptora_id);return z?{...z,pr_id:le.id,pr_status:le.status,pr_motivo_inapta:le.motivo_inapta,pr_observacoes:le.observacoes}:(console.warn(`Receptora ${le.receptora_id} no encontrada`),null)}).filter(le=>le!==null);p(ne)}catch(E){console.error("Error loading receptoras:",E)}},K=async E=>{try{const{data:O,error:U}=await D.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",E);if(U)throw U;const M=(O==null?void 0:O.map(ae=>ae.receptora_id))||[];if(M.length===0){_([]);return}const{data:X,error:$}=await D.from("receptoras").select("id, identificacao, nome").in("id",M).order("identificacao",{ascending:!0});if($)throw $;const ne=X||[],{data:le,error:z}=await D.from("protocolo_receptoras").select("receptora_id").eq("protocolo_id",e);if(z)throw z;const A=(le==null?void 0:le.map(ae=>ae.receptora_id))||[],J=(ne||[]).filter(ae=>!A.includes(ae.id)).map(async ae=>await Qd(ae.id)==="VAZIA"?ae:null),Z=(await Promise.all(J)).filter(ae=>ae!==null);_(Z)}catch(O){console.error("Error loading receptoras disponiveis:",O)}},ce=async()=>{var E,O,U;if(!(o||g.current)){if(!S.receptora_id){a({title:"Erro",description:"Selecione uma receptora",variant:"destructive"});return}try{g.current=!0,i(!0);const{data:M,error:X}=await D.from("receptoras").select("id, identificacao").eq("id",S.receptora_id).single();if(X)throw X;const{data:$,error:ne}=await D.from("protocolo_receptoras").select("receptora_id").eq("protocolo_id",e);if(ne&&console.error("Erro ao verificar receptoras no protocolo:",ne),$&&$.length>0){const ae=$.map(Le=>Le.receptora_id);if(ae.includes(S.receptora_id)){a({title:"Receptora j est no protocolo",description:"Essa receptora j est adicionada a este protocolo.",variant:"destructive"}),i(!1),g.current=!1;return}const{data:ie,error:pe}=await D.from("receptoras").select("id, identificacao").in("id",ae);if(pe&&console.error("Erro ao buscar receptoras do protocolo:",pe),ie==null?void 0:ie.find(Le=>Le.identificacao===M.identificacao)){a({title:"Brinco j est no protocolo",description:`J existe uma receptora com o brinco "${M.identificacao}" neste protocolo. No  possvel adicionar outra receptora com o mesmo brinco.`,variant:"destructive"}),i(!1),g.current=!1;return}}const{data:le,error:z}=await D.from("protocolo_receptoras").select(`
          id,
          protocolo_id,
          status,
          motivo_inapta,
          protocolos_sincronizacao!inner (
            id,
            status,
            data_inicio
          )
        `).eq("receptora_id",S.receptora_id).neq("protocolos_sincronizacao.status","PASSO2_FECHADO");if(z&&console.error("Erro ao verificar protocolos ativos:",z),le&&le.length>0){const ae=le.find(pe=>pe.protocolo_id===e);if(ae){a({title:"Receptora j est no protocolo",description:`Esta receptora j foi adicionada a este protocolo anteriormente (Status: ${ae.status}). Recarregue a pgina para ver a lista atualizada.`,variant:"destructive"}),i(!1),g.current=!1,R();return}const ie=le.filter(pe=>{var te;const ge=(te=pe.protocolos_sincronizacao)==null?void 0:te.status,Le=pe.status;return Le==="INAPTA"?!1:(Le==="APTA"||Le==="INICIADA")&&ge!=="PASSO2_FECHADO"});if(ie.length>0){const pe=ie[0],ge=pe.protocolos_sincronizacao,Le=((E=ge==null?void 0:ge.id)==null?void 0:E.substring(0,8))||"N/A",te=(ge==null?void 0:ge.status)||"N/A",xe=pe.status;a({title:"Receptora em outro protocolo ativo",description:`Esta receptora est vinculada a outro protocolo ativo (ID: ${Le}, Status do protocolo: ${te}, Status da receptora: ${xe}). Uma receptora s pode estar em um protocolo ativo por vez. Finalize ou feche o protocolo anterior antes de adicionar a um novo.`,variant:"destructive"}),i(!1),g.current=!1;return}}const A=await Qd(S.receptora_id);if(A!=="VAZIA"){a({title:"Receptora no disponvel",description:{"EM SINCRONIZAO":"J est em protocolo em andamento.",SINCRONIZADA:"J est sincronizada aguardando TE.",SERVIDA:"J recebeu embrio e aguarda diagnstico/sexagem.",PRENHE:"Est prenhe.","PRENHE (FMEA)":"Est prenhe.","PRENHE (MACHO)":"Est prenhe.","PRENHE (SEM SEXO)":"Est prenhe."}[A]||"Receptora no est disponvel.",variant:"destructive"}),i(!1),g.current=!1;return}const J={protocolo_id:e,receptora_id:S.receptora_id,evento_fazenda_id:l==null?void 0:l.fazenda_id,data_inclusao:l==null?void 0:l.data_inicio,status:"INICIADA",observacoes:S.observacoes||null},{error:ee,data:Z}=await D.from("protocolo_receptoras").insert([J]).select();if(ee){if(console.error("Erro ao inserir receptora:",ee),console.error("Dados tentados:",J),console.error("Cdigo do erro:",ee.code),console.error("Mensagem do erro:",ee.message),ee.code==="409"||ee.code==="23505"||(O=ee.message)!=null&&O.includes("duplicate")||(U=ee.message)!=null&&U.includes("unique")){const{data:ae,error:ie}=await D.from("protocolo_receptoras").select(`
              id,
              protocolo_id,
              receptora_id,
              status,
              data_inclusao,
              protocolos_sincronizacao!inner (
                id,
                status,
                data_inicio,
                fazenda_id
              )
            `).eq("receptora_id",S.receptora_id);ie&&console.error("Erro ao buscar protocolos da receptora:",ie);const pe=ae==null?void 0:ae.find(ge=>ge.protocolo_id===e);if(pe)a({title:"Receptora j est no protocolo",description:`Esta receptora j foi adicionada a este protocolo anteriormente (Status: ${pe.status}). Recarregue a pgina para ver a lista atualizada.`,variant:"destructive"});else{const ge=(ae==null?void 0:ae.filter(Le=>Le.protocolo_id!==e))||[];if(ge.length>0){const Le=ge.map(te=>{var xe,q,he;return`Protocolo ${(q=(xe=te.protocolos_sincronizacao)==null?void 0:xe.id)==null?void 0:q.substring(0,8)} (${((he=te.protocolos_sincronizacao)==null?void 0:he.status)||"N/A"})`}).join(", ");a({title:"Receptora vinculada a outro(s) protocolo(s)",description:`Esta receptora est vinculada a outro(s) protocolo(s): ${Le}. Ela precisa estar disponvel (sem vnculos ativos) para ser adicionada a um novo protocolo.`,variant:"destructive"})}else a({title:"Erro ao adicionar receptora",description:`No foi possvel adicionar esta receptora. Cdigo de erro: ${ee.code||"DESCONHECIDO"}. Verifique o histrico da receptora ou entre em contato com o suporte.`,variant:"destructive"})}i(!1),g.current=!1;return}throw ee}a({title:"Receptora adicionada",description:"Receptora adicionada ao protocolo com sucesso"}),y(!1),N({receptora_id:"",observacoes:""}),R()}catch(M){a({title:"Erro ao adicionar receptora",description:M instanceof Error?M.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1),g.current=!1}}},L=async()=>{var E;if(!C.identificacao.trim()){a({title:"Erro de validao",description:"Identificao (brinco)  obrigatria",variant:"destructive"});return}try{i(!0);const{data:O,error:U}=await D.from("receptoras").select("id, identificacao").eq("identificacao",C.identificacao.trim());if(U&&console.error("Erro ao verificar receptoras com brinco:",U),O&&O.length>0){const Z=O.map(Le=>Le.id),{data:ae,error:ie}=await D.from("protocolo_receptoras").select("receptora_id, status").eq("protocolo_id",e);if(ie&&console.error("Erro ao verificar receptoras no protocolo:",ie),ae&&ae.length>0){const Le=ae.map(Ce=>Ce.receptora_id),te=ae.find(Ce=>Z.includes(Ce.receptora_id));if(te){a({title:"Receptora j est no protocolo",description:`Esta receptora j foi adicionada a este protocolo (Status: ${te.status}).`,variant:"destructive"}),i(!1);return}const{data:xe,error:q}=await D.from("receptoras").select("id, identificacao").in("id",Le);q&&console.error("Erro ao buscar receptoras do protocolo:",q);const he=C.identificacao.trim(),Se=xe==null?void 0:xe.find(Ce=>Ce.identificacao===he);if(Se){const Ce=ae.find(k=>k.receptora_id===Se.id),we=(Ce==null?void 0:Ce.status)||"N/A";a({title:"Brinco j est no protocolo",description:`J existe uma receptora com o brinco "${he}" neste protocolo (Status: ${we}). No  possvel criar ou adicionar outra receptora com o mesmo brinco.`,variant:"destructive"}),i(!1);return}}for(const Le of O){const te=await Qd(Le.id);if(te!=="VAZIA"){const q={"EM SINCRONIZAO":"J est em protocolo em andamento.",SINCRONIZADA:"J est sincronizada aguardando TE.",SERVIDA:"J recebeu embrio e aguarda diagnstico/sexagem.",PRENHE:"Est prenhe.","PRENHE (FMEA)":"Est prenhe.","PRENHE (MACHO)":"Est prenhe."}[te]||`Status: ${te}`;a({title:"Receptora no disponvel",description:`J existe uma receptora com esse brinco que est ${q} No  possvel criar uma nova receptora com o mesmo brinco.`,variant:"destructive"}),i(!1);return}}const{data:pe,error:ge}=await D.from("receptora_fazenda_historico").select("receptora_id, fazenda_id").in("receptora_id",Z).eq("fazenda_id",l.fazenda_id).is("data_fim",null);if(ge&&console.error("Erro ao verificar histrico de fazendas:",ge),pe&&pe.length>0){const Le=pe[0].receptora_id,te=O.find(xe=>xe.id===Le);if(te){const xe={protocolo_id:e,receptora_id:te.id,evento_fazenda_id:l==null?void 0:l.fazenda_id,data_inclusao:l==null?void 0:l.data_inicio,status:"INICIADA",observacoes:C.observacoes||null},{error:q}=await D.from("protocolo_receptoras").insert([xe]);if(q){if(q.code==="23505"){a({title:"Receptora j est no protocolo",description:"Esta receptora j foi adicionada a este protocolo.",variant:"destructive"}),i(!1),await R();return}throw q}a({title:"Receptora adicionada",description:"Receptora existente foi adicionada ao protocolo com sucesso"}),b(!1),P({identificacao:"",nome:"",observacoes:""}),await R(),i(!1);return}}}const M={identificacao:C.identificacao.trim()};C.nome.trim()&&(M.nome=C.nome.trim());const{data:X,error:$}=await D.from("receptoras").insert([M]).select().single();if($)throw $.code==="23505"?new Error("J existe uma receptora com esse brinco. Verifique se ela j est na fazenda."):$;const{data:ne,error:le}=await D.from("receptora_fazenda_historico").select("id").eq("receptora_id",X.id).eq("fazenda_id",l.fazenda_id).is("data_fim",null).maybeSingle();if(le&&console.error("Erro ao verificar histrico existente:",le),!ne){const{error:Z}=await D.from("receptora_fazenda_historico").insert([{receptora_id:X.id,fazenda_id:l.fazenda_id,data_inicio:new Date().toISOString().split("T")[0],data_fim:null}]);if(Z){if((E=Z.message)!=null&&E.includes("brinco")||Z.code==="P0001"){await D.from("receptoras").delete().eq("id",X.id);const{data:ae}=await D.from("receptoras").select("id").eq("identificacao",C.identificacao.trim()).neq("id",X.id);if(ae&&ae.length>0){const ie=ae[0].id,{data:pe}=await D.from("protocolo_receptoras").select("id, status").eq("protocolo_id",e).eq("receptora_id",ie).maybeSingle();if(pe)a({title:"Receptora j est no protocolo",description:`Esta receptora j foi adicionada a este protocolo (Status: ${pe.status}).`});else{const{error:ge}=await D.from("protocolo_receptoras").insert([{protocolo_id:e,receptora_id:ie,evento_fazenda_id:l==null?void 0:l.fazenda_id,data_inclusao:l==null?void 0:l.data_inicio,status:"INICIADA",observacoes:C.observacoes||null}]);if(ge)throw ge;a({title:"Receptora adicionada",description:"Receptora existente foi adicionada ao protocolo com sucesso"})}b(!1),P({identificacao:"",nome:"",observacoes:""}),await R(),i(!1);return}throw new Error("J existe uma receptora com esse brinco nesta fazenda.")}throw Z}}const{data:z,error:A}=await D.from("receptora_fazenda_historico").select("id").eq("receptora_id",X.id).eq("fazenda_id",l.fazenda_id).is("data_fim",null).maybeSingle();if(A&&console.error("Erro ao verificar histrico aps criao:",A),!z){await D.from("receptoras").delete().eq("id",X.id),a({title:"Erro ao criar receptora",description:"No foi possvel vincular a receptora  fazenda. Verifique se j existe uma receptora com esse brinco.",variant:"destructive"}),i(!1);return}const J={protocolo_id:e,receptora_id:X.id,evento_fazenda_id:l==null?void 0:l.fazenda_id,data_inclusao:l==null?void 0:l.data_inicio,status:"INICIADA",observacoes:C.observacoes||null},{error:ee}=await D.from("protocolo_receptoras").insert([J]);if(ee){if(await D.from("receptoras").delete().eq("id",X.id),ee.code==="23505"){a({title:"Receptora j est no protocolo",description:"Esta receptora j foi adicionada a este protocolo.",variant:"destructive"}),i(!1),await R();return}throw ee}a({title:"Receptora criada e adicionada",description:"Receptora criada e adicionada ao protocolo com sucesso"}),b(!1),P({identificacao:"",nome:"",observacoes:""}),await R()}catch(O){a({title:"Erro ao criar receptora",description:O instanceof Error?O.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},H=async()=>{if(!(l!=null&&l.fazenda_id)||!(l!=null&&l.data_inicio)||!(l!=null&&l.responsavel_inicio)){a({title:"Erro de validao",description:"Protocolo incompleto: faltam dados obrigatrios",variant:"destructive"});return}if(h.length===0){a({title:"Erro de validao",description:"Adicione pelo menos 1 receptora antes de finalizar o 1 passo",variant:"destructive"});return}try{i(!0);const{error:E}=await D.from("protocolos_sincronizacao").update({status:"PASSO1_FECHADO"}).eq("id",e);if(E)throw E;await R(),w(!0)}catch(E){a({title:"Erro ao finalizar 1 passo",description:E instanceof Error?E.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},T=async()=>{try{i(!0);const{error:E}=await D.from("protocolo_receptoras").delete().eq("protocolo_id",e);if(E)throw E;const{error:O}=await D.from("protocolos_sincronizacao").delete().eq("id",e);if(O)throw O;a({title:"Protocolo cancelado",description:"Protocolo cancelado com sucesso"}),t("/protocolos")}catch(E){a({title:"Erro ao cancelar protocolo",description:E instanceof Error?E.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},V=()=>{w(!1),a({title:"1 passo concludo com sucesso",description:`${h.length} receptoras em sincronizao`}),t("/protocolos")};if(s)return r.jsx(Pt,{});if(!l)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Protocolo no encontrado"}),r.jsx(G,{onClick:()=>t("/protocolos"),className:"mt-4",children:"Voltar para Protocolos"})]});const F=l.status==="PASSO1_ABERTO"||l.status==="ABERTO";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>t("/protocolos"),children:r.jsx(Za,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["Protocolo - ",d]}),r.jsx("p",{className:"text-slate-600 mt-1",children:F?"Gerenciar receptoras do 1 passo":"Protocolo finalizado"})]})]}),r.jsx("div",{className:"flex gap-2",children:F&&r.jsxs(r.Fragment,{children:[r.jsxs(zt,{open:x,onOpenChange:y,children:[r.jsx(As,{asChild:!0,children:r.jsxs(G,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Ja,{className:"w-4 h-4 mr-2"}),"Adicionar Receptora"]})}),r.jsxs(St,{className:"max-w-lg",children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Adicionar Receptora ao Protocolo"}),r.jsxs(Mt,{children:["Selecione uma receptora VAZIA da fazenda ",d," ou cadastre uma nova"]})]}),r.jsxs(zf,{defaultValue:"existing",className:"w-full",children:[r.jsxs(Wc,{className:"grid w-full grid-cols-2",children:[r.jsx(Lr,{value:"existing",children:"Receptora Existente"}),r.jsx(Lr,{value:"new",children:"Cadastrar Nova"})]}),r.jsxs(Ir,{value:"existing",className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Receptora *"}),r.jsxs(at,{value:S.receptora_id,onValueChange:E=>N({...S,receptora_id:E}),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione uma receptora VAZIA"})}),r.jsx(Je,{children:m.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhuma receptora VAZIA disponvel nesta fazenda"}):m.map(E=>r.jsxs(_e,{value:E.id,children:[E.identificacao," ",E.nome?`- ${E.nome}`:""]},E.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Observaes"}),r.jsx(ja,{value:S.observacoes,onChange:E=>N({...S,observacoes:E.target.value}),placeholder:"Observaes sobre a incluso",rows:2})]}),r.jsx(G,{onClick:ce,className:"w-full bg-green-600 hover:bg-green-700",disabled:o||m.length===0,children:o?"Adicionando...":"Adicionar"})]}),r.jsxs(Ir,{value:"new",className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Identificao (Brinco) *"}),r.jsx(de,{value:C.identificacao,onChange:E=>P({...C,identificacao:E.target.value}),placeholder:"Nmero do brinco"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Nome"}),r.jsx(de,{value:C.nome,onChange:E=>P({...C,nome:E.target.value}),placeholder:"Nome da receptora (opcional)"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Observaes"}),r.jsx(ja,{value:C.observacoes,onChange:E=>P({...C,observacoes:E.target.value}),placeholder:"Observaes sobre a receptora",rows:2})]}),r.jsxs(G,{onClick:L,className:"w-full bg-blue-600 hover:bg-blue-700",disabled:o,children:[r.jsx(Au,{className:"w-4 h-4 mr-2"}),o?"Criando...":"Criar e Adicionar"]})]})]})]})]}),r.jsxs(G,{onClick:H,disabled:h.length===0||o,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(lf,{className:"w-4 h-4 mr-2"}),o?"Finalizando...":"Finalizar 1 Passo"]}),r.jsxs(Xi,{children:[r.jsx(X6,{asChild:!0,children:r.jsxs(G,{variant:"outline",className:"border-red-600 text-red-600 hover:bg-red-50",children:[r.jsx(Cu,{className:"w-4 h-4 mr-2"}),"Cancelar"]})}),r.jsxs(Eo,{children:[r.jsxs(No,{children:[r.jsx(Ao,{children:"Cancelar Protocolo"}),r.jsx(To,{children:"Tem certeza que deseja cancelar este protocolo? Esta ao no pode ser desfeita. Todas as receptoras vinculadas sero removidas do protocolo."})]}),r.jsxs(Co,{children:[r.jsx(Ro,{children:"No, manter protocolo"}),r.jsx(Do,{onClick:T,className:"bg-red-600 hover:bg-red-700",children:"Sim, cancelar protocolo"})]})]})]})]})})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Informaes do Protocolo"})}),r.jsxs(Ne,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:d})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data Incio"}),r.jsx("p",{className:"text-base text-slate-900",children:Bt(l.data_inicio)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Responsvel"}),r.jsx("p",{className:"text-base text-slate-900",children:l.responsavel_inicio})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Status"}),r.jsx("div",{className:"text-base text-slate-900",children:F?r.jsx(Xe,{variant:"default",children:"1 Passo"}):r.jsx(Xe,{variant:"secondary",children:"1 Passo Concludo"})})]})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsxs(Oe,{children:["Receptoras do Protocolo (",h.length,")"]})}),r.jsx(Ne,{children:r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Brinco"}),r.jsx(Y,{children:"Nome"}),r.jsx(Y,{children:"Status"}),r.jsx(Y,{children:"Observaes"})]})}),r.jsx(wt,{children:h.length===0?r.jsx(be,{children:r.jsx(I,{colSpan:4,className:"text-center text-slate-500",children:"Nenhuma receptora adicionada ao protocolo"})}):h.map(E=>r.jsxs(be,{children:[r.jsx(I,{className:"font-medium",children:E.identificacao}),r.jsx(I,{children:E.nome||"-"}),r.jsx(I,{children:r.jsx(Xe,{variant:"secondary",children:E.pr_status==="INICIADA"?"Em Sincronizao":E.pr_status})}),r.jsx(I,{className:"max-w-xs truncate",children:E.pr_observacoes||"-"})]},E.id))})]})})]}),r.jsx(zt,{open:j,onOpenChange:w,children:r.jsxs(St,{className:"max-w-2xl",children:[r.jsxs(Et,{children:[r.jsxs(Nt,{className:"flex items-center gap-2",children:[r.jsx(Gm,{className:"w-6 h-6 text-green-600"}),"Resumo do 1 Passo"]}),r.jsx(Mt,{children:"1 passo concludo com sucesso"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:d})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data do 1 Passo"}),r.jsx("p",{className:"text-base text-slate-900",children:l&&Bt(l.data_inicio)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Responsvel"}),r.jsx("p",{className:"text-base text-slate-900",children:l==null?void 0:l.responsavel_inicio})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total de Receptoras"}),r.jsx("p",{className:"text-base text-slate-900 font-bold",children:h.length})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Receptoras em Sincronizao:"}),r.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-lg",children:r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Brinco"}),r.jsx(Y,{children:"Nome"})]})}),r.jsx(wt,{children:h.map(E=>r.jsxs(be,{children:[r.jsx(I,{className:"font-medium",children:E.identificacao}),r.jsx(I,{children:E.nome||"-"})]},E.id))})]})})]}),r.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Prximo passo:"}),' Acesse a aba "2 Passo (para confirmar)" na tela de Protocolos e clique em "INICIAR 2 PASSO" para revisar e confirmar as receptoras.']})}),r.jsx(G,{onClick:V,className:"w-full bg-green-600 hover:bg-green-700",children:"OK - Voltar para Protocolos"})]})]})})]})}function x5(){const{id:e}=Ur(),t=Aa(),{toast:a}=Jt(),[s,n]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(""),[h,p]=u.useState([]),[m,_]=u.useState(!1),[g,x]=u.useState(!1),[y,v]=u.useState(!1),[b,j]=u.useState(!1),[w,S]=u.useState(""),[N,C]=u.useState(""),[P,R]=u.useState(!1),[Q,K]=u.useState(!1),[ce,L]=u.useState({motivo_inapta:""});u.useEffect(()=>{e&&T()},[e]),u.useEffect(()=>{const A=h.filter(J=>J.pr_status==="INICIADA");K(A.length>0&&(l==null?void 0:l.status)!=="PASSO2_FECHADO")},[h,l]);const H=u.useRef(!1);u.useEffect(()=>{if(!Q){H.current=!1;return}H.current=!0;const A=ee=>(ee.preventDefault(),ee.returnValue="Voc tem receptoras pendentes de reviso. Tem certeza que deseja sair?",ee.returnValue),J=ee=>{Q&&(ee.preventDefault(),window.history.pushState(null,"",window.location.href),j(!0))};return window.history.pushState(null,"",window.location.href),window.addEventListener("beforeunload",A),window.addEventListener("popstate",J),()=>{window.removeEventListener("beforeunload",A),window.removeEventListener("popstate",J)}},[Q]);const T=async()=>{try{n(!0);const{data:A,error:J}=await D.from("protocolos_sincronizacao").select("*").eq("id",e).single();if(J)throw J;if(A.status!=="PASSO1_FECHADO"&&A.status!=="PRIMEIRO_PASSO_FECHADO"&&A.status!=="PASSO2_FECHADO"){a({title:"Erro",description:"Este protocolo no est aguardando o 2 passo",variant:"destructive"}),t("/protocolos");return}c(A);const{data:ee,error:Z}=await D.from("fazendas").select("nome").eq("id",A.fazenda_id).single();if(Z)throw Z;f(ee.nome),await V()}catch(A){a({title:"Erro ao carregar dados",description:A instanceof Error?A.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},V=async()=>{try{if(!e){console.error("ID do protocolo no fornecido"),a({title:"Erro",description:"ID do protocolo no encontrado",variant:"destructive"});return}const{data:A,error:J}=await D.from("protocolo_receptoras").select("*").eq("protocolo_id",e);if(J){console.error("Erro ao carregar receptoras do protocolo:",J),console.error("Protocolo ID:",e),console.error("Cdigo do erro:",J.code),console.error("Mensagem do erro:",J.message),console.error("Detalhes:",J.details),a({title:"Erro ao carregar receptoras",description:J.message||"Erro desconhecido ao carregar receptoras do protocolo",variant:"destructive"}),p([]);return}if(console.log("=== DEBUG loadReceptoras ==="),console.log("Protocolo ID:",e),console.log("Receptoras retornadas:",(A==null?void 0:A.length)||0),A&&A.length>0?console.log("Primeira receptora:",{id:A[0].id,protocolo_id:A[0].protocolo_id,receptora_id:A[0].receptora_id,status:A[0].status}):console.warn("Nenhuma receptora retornada pela query"),!A||A.length===0){console.error("Protocolo sem receptoras vinculadas - inconsistncia detectada"),console.error("Protocolo ID:",e);const{count:Z,error:ae}=await D.from("protocolo_receptoras").select("*",{count:"exact",head:!0}).eq("protocolo_id",e);console.error("Tentativa de count direto - resultado:",Z),ae&&console.error("Erro ao fazer count:",ae),a({title:"Erro: Protocolo inconsistente",description:`Este protocolo no possui receptoras vinculadas (ID: ${e}). Verifique no banco de dados se h receptoras vinculadas a este protocolo.`,variant:"destructive"}),p([]);return}const ee=[];for(const Z of A){const{data:ae,error:ie}=await D.from("receptoras").select("*").eq("id",Z.receptora_id).single();if(ie){console.error("Error loading receptora:",ie);continue}ee.push({...ae,pr_id:Z.id,pr_status:Z.status,pr_motivo_inapta:Z.motivo_inapta,pr_observacoes:Z.observacoes,pr_ciclando_classificacao:"ciclando_classificacao"in Z&&(Z.ciclando_classificacao==="CL"||Z.ciclando_classificacao==="N")?Z.ciclando_classificacao:null,pr_qualidade_semaforo:"qualidade_semaforo"in Z&&typeof Z.qualidade_semaforo=="number"&&Z.qualidade_semaforo>=1&&Z.qualidade_semaforo<=3?Z.qualidade_semaforo:null})}p(ee)}catch(A){console.error("Error loading receptoras:",A),a({title:"Erro ao carregar receptoras",description:A instanceof Error?A.message:"Erro desconhecido",variant:"destructive"})}},F=async()=>{if(!(P||o))try{R(!0);const{error:A}=await D.from("protocolo_receptoras").update({status:"APTA",motivo_inapta:null}).eq("protocolo_id",e).eq("receptora_id",w);if(A)throw console.error("Erro ao confirmar receptora:",A),A;a({title:"Receptora confirmada",description:`${N} foi confirmada e segue para TE`}),_(!1),S(""),C(""),T()}catch(A){console.error("Erro ao confirmar receptora:",A),a({title:"Erro ao confirmar receptora",description:A instanceof Error?A.message:"Erro desconhecido",variant:"destructive"})}finally{R(!1)}},E=async()=>{if(!o)try{i(!0);const{error:A}=await D.from("protocolo_receptoras").update({status:"INAPTA",motivo_inapta:ce.motivo_inapta.trim()||null}).eq("protocolo_id",e).eq("receptora_id",w);if(A)throw console.error("Erro ao descartar receptora:",A),A;a({title:"Receptora descartada",description:`${N} foi descartada do protocolo`}),x(!1),S(""),C(""),L({motivo_inapta:""}),T()}catch(A){console.error("Erro ao descartar receptora:",A),a({title:"Erro ao descartar receptora",description:A instanceof Error?A.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},O=async()=>{if(o)return;const A=h.filter(J=>J.pr_status==="INICIADA");if(A.length>0){a({title:"Erro",description:`Ainda h ${A.length} receptora(s) pendente(s) de reviso`,variant:"destructive"});return}if(h.length===0){a({title:"Erro",description:"No  possvel finalizar protocolo sem receptoras vinculadas",variant:"destructive"});return}try{i(!0);const J=new Date,ee=`${J.getFullYear()}-${String(J.getMonth()+1).padStart(2,"0")}-${String(J.getDate()).padStart(2,"0")}`,{error:Z}=await D.from("protocolos_sincronizacao").update({status:"PASSO2_FECHADO",data_retirada:ee,responsavel_retirada:(l==null?void 0:l.responsavel_inicio)||null}).eq("id",e);if(Z)throw console.error("Erro ao finalizar 2 passo:",Z),Z;c({...l,status:"PASSO2_FECHADO",data_retirada:ee,responsavel_retirada:(l==null?void 0:l.responsavel_inicio)||null}),K(!1),H.current=!1,v(!0)}catch(J){console.error("Erro ao finalizar 2 passo:",J),a({title:"Erro ao finalizar 2 passo",description:J instanceof Error?J.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},U=()=>{v(!1),a({title:"2 passo concludo com sucesso",description:`${h.filter(A=>A.pr_status==="APTA").length} receptoras confirmadas para TE`}),t("/protocolos")},M=async()=>{try{i(!0);const{error:A}=await D.from("protocolos_sincronizacao").update({passo2_data:null,passo2_tecnico_responsavel:null,status:"PASSO1_FECHADO"}).eq("id",e);if(A)throw A;a({title:"2 passo cancelado",description:"O protocolo voltou para o status de aguardando 2 passo"}),j(!1),K(!1),H.current=!1,t("/protocolos")}catch(A){console.error("Erro ao cancelar 2 passo:",A),a({title:"Erro ao cancelar 2 passo",description:A instanceof Error?A.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},X=()=>{Q?j(!0):(H.current=!1,t("/protocolos"))},$=A=>{const ee={INICIADA:{label:"Aguardando Reviso",variant:"secondary"},APTA:{label:"Confirmada",variant:"default"},INAPTA:{label:"Descartada",variant:"destructive"}}[A]||{label:A,variant:"outline"};return r.jsx(Xe,{variant:ee.variant,children:ee.label})};if(s)return r.jsx(Pt,{});if(!l)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Protocolo no encontrado"}),r.jsx(G,{onClick:()=>t("/protocolos"),className:"mt-4",children:"Voltar para Protocolos"})]});if(h.length===0&&!s)return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(G,{variant:"ghost",size:"sm",onClick:X,children:r.jsx(Za,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["2 Passo - ",d]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Revisar e confirmar receptoras"})]})]})}),r.jsxs(Ee,{className:"border-red-200 bg-red-50",children:[r.jsx(Re,{children:r.jsx(Oe,{className:"text-red-700",children:" Protocolo Inconsistente"})}),r.jsxs(Ne,{className:"space-y-4",children:[r.jsx("p",{className:"text-red-800",children:"Este protocolo no possui receptoras vinculadas. No  possvel prosseguir com o 2 passo."}),r.jsx("p",{className:"text-sm text-red-700",children:"Isso pode ter ocorrido devido a um erro durante a criao do protocolo ou excluso acidental de dados."}),r.jsx(G,{onClick:()=>t("/protocolos"),variant:"outline",className:"mt-4",children:"Voltar para Protocolos"})]})]})]});const ne=h.filter(A=>A.pr_status==="INICIADA"),le=h.filter(A=>A.pr_status==="APTA"),z=h.filter(A=>A.pr_status==="INAPTA");return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(G,{variant:"ghost",size:"sm",onClick:X,children:r.jsx(Za,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["2 Passo - ",d]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Revisar e confirmar receptoras"})]})]}),r.jsxs(G,{onClick:O,disabled:ne.length>0||o,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(lf,{className:"w-4 h-4 mr-2"}),o?"Finalizando...":"Finalizar 2 Passo"]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Informaes do Protocolo"})}),r.jsxs(Ne,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:d})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data Incio"}),r.jsx("p",{className:"text-base text-slate-900",children:Bt(l.data_inicio)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data do 2 Passo"}),r.jsx("p",{className:"text-base text-slate-900",children:l.passo2_data?Bt(l.passo2_data):"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tcnico 2 Passo"}),r.jsx("p",{className:"text-base text-slate-900",children:l.passo2_tecnico_responsavel||"-"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(Ee,{children:[r.jsx(Re,{className:"pb-3",children:r.jsx(Oe,{className:"text-base",children:"Aguardando Reviso"})}),r.jsx(Ne,{children:r.jsx("p",{className:"text-3xl font-bold text-slate-900",children:ne.length})})]}),r.jsxs(Ee,{children:[r.jsx(Re,{className:"pb-3",children:r.jsx(Oe,{className:"text-base",children:"Confirmadas"})}),r.jsx(Ne,{children:r.jsx("p",{className:"text-3xl font-bold text-green-600",children:le.length})})]}),r.jsxs(Ee,{children:[r.jsx(Re,{className:"pb-3",children:r.jsx(Oe,{className:"text-base",children:"Descartadas"})}),r.jsx(Ne,{children:r.jsx("p",{className:"text-3xl font-bold text-red-600",children:z.length})})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsxs(Oe,{children:["Receptoras para Reviso (",h.length,")"]})}),r.jsx(Ne,{children:r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Brinco"}),r.jsx(Y,{children:"Nome"}),r.jsx(Y,{children:"Ciclando"}),r.jsx(Y,{children:"Qualidade"}),r.jsx(Y,{children:"Status"}),r.jsx(Y,{children:"Motivo"}),r.jsx(Y,{className:"text-right",children:"Aes"})]})}),r.jsx(wt,{children:h.length===0?r.jsx(be,{children:r.jsx(I,{colSpan:7,className:"text-center text-slate-500",children:"Nenhuma receptora no protocolo"})}):h.map(A=>r.jsxs(be,{children:[r.jsx(I,{className:"font-medium",children:A.identificacao}),r.jsx(I,{children:A.nome||"-"}),r.jsx(I,{children:r.jsx(xv,{value:A.pr_ciclando_classificacao,variant:"display",disabled:!0})}),r.jsx(I,{children:r.jsx(yv,{value:A.pr_qualidade_semaforo,variant:"single",disabled:!0})}),r.jsx(I,{children:$(A.pr_status)}),r.jsx(I,{children:A.pr_motivo_inapta||"-"}),r.jsx(I,{className:"text-right",children:A.pr_status==="INICIADA"&&r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsxs(G,{variant:"default",size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>{S(A.id),C(A.identificacao),_(!0)},disabled:P||o,children:[r.jsx(Gm,{className:"w-4 h-4 mr-1"}),"Confirmar"]}),r.jsxs(G,{variant:"destructive",size:"sm",onClick:()=>{S(A.id),C(A.identificacao),L({motivo_inapta:""}),x(!0)},disabled:P||o,children:[r.jsx(YT,{className:"w-4 h-4 mr-1"}),"Descartar"]})]})})]},A.id))})]})})]}),r.jsx(zt,{open:m,onOpenChange:A=>{!A&&!P&&(_(!1),S(""),C(""))},children:r.jsxs(St,{children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Confirmar Receptora"}),r.jsxs(Mt,{children:["Tem certeza que deseja confirmar a receptora ",r.jsx("strong",{children:N}),"?"]})]}),r.jsxs("p",{className:"text-sm text-slate-600",children:["A receptora ser marcada como ",r.jsx("strong",{children:"APTA"})," e seguir para Transferncia de Embries."]}),r.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[r.jsx(G,{variant:"outline",onClick:()=>{_(!1),S(""),C("")},disabled:P,children:"Cancelar"}),r.jsx(G,{onClick:F,className:"bg-green-600 hover:bg-green-700 text-white",disabled:P,children:P?"Confirmando...":"Confirmar"})]})]})}),r.jsx(zt,{open:g,onOpenChange:A=>{!A&&!o&&(x(!1),S(""),C(""),L({motivo_inapta:""}))},children:r.jsxs(St,{children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Descartar Receptora"}),r.jsxs(Mt,{children:["Descartar a receptora ",r.jsx("strong",{children:N})," do protocolo?"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Motivo do descarte (opcional)"}),r.jsxs(at,{value:ce.motivo_inapta||"none",onValueChange:A=>L({motivo_inapta:A==="none"?"":A}),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione o motivo (opcional)"})}),r.jsxs(Je,{children:[r.jsx(_e,{value:"none",children:"Sem motivo"}),r.jsx(_e,{value:"Descartada no 2 passo: Morreu",children:"Morreu"}),r.jsx(_e,{value:"Descartada no 2 passo: Doente",children:"Doente"}),r.jsx(_e,{value:"Descartada no 2 passo: Sumiu",children:"Sumiu"}),r.jsx(_e,{value:"Descartada no 2 passo: Perdeu P4",children:"Perdeu P4"}),r.jsx(_e,{value:"Descartada no 2 passo: No respondeu",children:"No respondeu"}),r.jsx(_e,{value:"Descartada no 2 passo: Outro",children:"Outro"})]})]})]}),r.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[r.jsx(G,{variant:"outline",onClick:()=>{x(!1),S(""),C(""),L({motivo_inapta:""})},disabled:o,children:"Cancelar"}),r.jsx(G,{onClick:E,variant:"destructive",disabled:o,children:o?"Descartando...":"Descartar"})]})]})]})}),r.jsx(zt,{open:y,onOpenChange:v,children:r.jsxs(St,{className:"max-w-2xl",children:[r.jsxs(Et,{children:[r.jsxs(Nt,{className:"flex items-center gap-2",children:[r.jsx(Gm,{className:"w-6 h-6 text-green-600"}),"Resumo do 2 Passo"]}),r.jsx(Mt,{children:"2 passo concludo com sucesso"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:d})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data do Protocolo"}),r.jsx("p",{className:"text-base text-slate-900",children:l&&Bt(l.data_inicio)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total de Receptoras"}),r.jsx("p",{className:"text-base text-slate-900 font-bold",children:h.length})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Confirmadas para TE"}),r.jsx("p",{className:"text-base text-green-600 font-bold",children:le.length})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-green-700 mb-2",children:"Receptoras Confirmadas"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:le.length})]}),r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-red-700 mb-2",children:"Receptoras Descartadas"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:z.length})]})]}),r.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Protocolo concludo!"})," As receptoras confirmadas (APTA) esto prontas para transferncia de embries."]})}),r.jsx(G,{onClick:U,className:"w-full bg-green-600 hover:bg-green-700",children:"OK - Voltar para Protocolos"})]})]})}),r.jsx(zt,{open:b,onOpenChange:A=>{!A&&!o&&(j(!1),H.current=!1)},children:r.jsxs(St,{children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Cancelar 2 Passo?"}),r.jsxs(Mt,{children:["Voc tem ",ne.length," receptora(s) pendente(s) de reviso.",r.jsx("br",{}),r.jsx("br",{}),'Ao cancelar, o protocolo voltar para o status de "Aguardando 2 Passo" e voc precisar iniciar o 2 passo novamente.']})]}),r.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[r.jsx(G,{variant:"outline",onClick:()=>{j(!1),H.current=!1},disabled:o,children:"No, continuar reviso"}),r.jsx(G,{variant:"destructive",onClick:M,disabled:o,children:o?"Cancelando...":"Sim, cancelar 2 passo"})]})]})})]})}function y5(){const{id:e}=Ur(),t=Aa(),[a,s]=u.useState(!0),[n,o]=u.useState(null),[i,l]=u.useState(""),[c,d]=u.useState([]),[f,h]=u.useState({totalIniciaram:0,totalConcluiram:0,totalDescartadas:0,totalConfirmadas:0}),p=async v=>{try{const{data:b}=await D.from("protocolo_receptoras").select("receptora_id").eq("protocolo_id",v.id).limit(1);if(!b||b.length===0)return v.observacoes||"";const j=b[0].receptora_id,{data:w}=await D.from("receptora_fazenda_historico").select(`
          fazenda_id,
          data_inicio
        `).eq("receptora_id",j).order("data_inicio",{ascending:!0});if(!w||w.length<2)return v.observacoes||"";const S=new Set;for(const T of w)T.fazenda_id&&S.add(T.fazenda_id);const{data:N}=await D.from("fazendas").select("id, nome").in("id",Array.from(S)),C=new Map;if(N)for(const T of N)C.set(T.id,T.nome);const P=v.data_inicio.split("T")[0],[R,Q,K]=P.split("-").map(Number),ce=new Date(R,Q-1,K);let L=null,H=1/0;for(let T=1;T<w.length;T++){const V=w[T],F=w[T-1],E=V.data_inicio.split("T")[0],[O,U,M]=E.split("-").map(Number),X=new Date(O,U-1,M),$=Math.abs((X.getTime()-ce.getTime())/(1e3*60*60*24));$<=1&&$<H&&(H=$,L={fazendaOrigem:C.get(F.fazenda_id)||"Fazenda desconhecida",fazendaDestino:C.get(V.fazenda_id)||"Fazenda desconhecida",dataMudanca:V.data_inicio})}if(!L&&w.length>1)for(let T=w.length-1;T>=1;T--){const V=w[T],F=w[T-1],E=V.data_inicio.split("T")[0],[O,U,M]=E.split("-").map(Number),X=new Date(O,U-1,M);if(X<=ce&&(ce.getTime()-X.getTime())/(1e3*60*60*24)<=2){L={fazendaOrigem:C.get(F.fazenda_id)||"Fazenda desconhecida",fazendaDestino:C.get(V.fazenda_id)||"Fazenda desconhecida",dataMudanca:V.data_inicio};break}}if(L){const T=new Date(L.dataMudanca).toLocaleDateString("pt-BR");return`${v.observacoes} (Mudana: ${L.fazendaOrigem}  ${L.fazendaDestino} em ${T})`}return v.observacoes||""}catch(b){return console.error("Erro ao enriquecer observaes:",b),v.observacoes||""}};u.useEffect(()=>{e&&m()},[e]);const m=async()=>{try{s(!0);const{data:v,error:b}=await D.from("protocolos_sincronizacao").select("*").eq("id",e).single();if(b)throw b;if(v.status!=="PASSO2_FECHADO"){t("/protocolos");return}let j=v.observacoes;v.observacoes&&v.observacoes.includes("Protocolo criado automaticamente")&&(j=await p(v)),o({...v,observacoes:j});const{data:w,error:S}=await D.from("fazendas").select("nome").eq("id",v.fazenda_id).single();if(S)throw S;l(w.nome),await _({...v,observacoes:j})}catch(v){console.error("Erro ao carregar dados:",v)}finally{s(!1)}},_=async v=>{try{const{data:b,error:j}=await D.from("protocolo_receptoras").select("*").eq("protocolo_id",v.id).order("data_inclusao",{ascending:!0});if(j)throw j;const w=[];for(const R of b||[]){const{data:Q,error:K}=await D.from("receptoras").select("*").eq("id",R.receptora_id).single();if(K){console.error("Erro ao carregar receptora:",K);continue}w.push({...Q,pr_id:R.id,pr_status:R.status,pr_motivo_inapta:R.motivo_inapta,pr_data_inclusao:R.data_inclusao,pr_data_retirada:R.data_retirada,pr_ciclando_classificacao:R.ciclando_classificacao,pr_qualidade_semaforo:R.qualidade_semaforo})}d(w);const S=w.length,N=w.filter(R=>R.pr_status==="APTA").length,C=w.filter(R=>R.pr_status==="INAPTA").length;h({totalIniciaram:S,totalConcluiram:N,totalDescartadas:C,totalConfirmadas:N})}catch(b){console.error("Erro ao carregar receptoras:",b)}},g=v=>{if(!v)return{veterinario:null,tecnico:null};const b=v.match(/VET:\s*(.+?)(?:\s*\||$)/i),j=v.match(/TEC:\s*(.+?)(?:\s*\||$)/i);return{veterinario:b?b[1].trim():null,tecnico:j?j[1].trim():null}},x=v=>v==="APTA"?r.jsx(Xe,{variant:"default",className:"bg-green-600",children:"Confirmada"}):v==="INAPTA"?r.jsx(Xe,{variant:"destructive",children:"Descartada"}):r.jsx(Xe,{variant:"secondary",children:v}),y=()=>{window.print()};return a?r.jsx(Pt,{}):n?r.jsxs("div",{className:"space-y-6 print:space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between print:hidden",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>t("/protocolos"),children:r.jsx(Za,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Relatrio do Protocolo"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Visualizao somente leitura"})]})]}),r.jsxs(G,{onClick:y,variant:"outline",children:[r.jsx(eD,{className:"w-4 h-4 mr-2"}),"Imprimir"]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Informaes do Protocolo"})}),r.jsxs(Ne,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:i||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data incio"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:n.data_inicio?Bt(n.data_inicio):""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Vet responsvel pelo incio"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:g(n.responsavel_inicio).veterinario||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tec responsvel pelo incio"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:g(n.responsavel_inicio).tecnico||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data segundo passo"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:n.passo2_data?Bt(n.passo2_data):""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Responsvel pelo segundo passo"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:n.passo2_tecnico_responsavel||""})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(Ee,{children:[r.jsx(Re,{className:"pb-3",children:r.jsx(Oe,{className:"text-base",children:"Total Iniciaram"})}),r.jsx(Ne,{children:r.jsx("p",{className:"text-3xl font-bold text-slate-900",children:f.totalIniciaram})})]}),r.jsxs(Ee,{children:[r.jsx(Re,{className:"pb-3",children:r.jsx(Oe,{className:"text-base",children:"Confirmadas"})}),r.jsx(Ne,{children:r.jsx("p",{className:"text-3xl font-bold text-green-600",children:f.totalConfirmadas})})]}),r.jsxs(Ee,{children:[r.jsx(Re,{className:"pb-3",children:r.jsx(Oe,{className:"text-base",children:"Descartadas"})}),r.jsx(Ne,{children:r.jsx("p",{className:"text-3xl font-bold text-red-600",children:f.totalDescartadas})})]}),r.jsxs(Ee,{children:[r.jsx(Re,{className:"pb-3",children:r.jsx(Oe,{className:"text-base",children:"Taxa de Sucesso"})}),r.jsx(Ne,{children:r.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[f.totalIniciaram>0?Math.round(f.totalConfirmadas/f.totalIniciaram*100):0,"%"]})})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Receptoras e Resultado Final"})}),r.jsx(Ne,{children:c.length===0?r.jsx("p",{className:"text-slate-500 text-center py-4",children:"Nenhuma receptora no protocolo"}):r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Identificao"}),r.jsx(Y,{children:"Ciclando"}),r.jsx(Y,{children:"Qualidade"}),r.jsx(Y,{children:"Resultado Final"}),r.jsx(Y,{children:"Motivo do Descarte"})]})}),r.jsx(wt,{children:c.map(v=>r.jsxs(be,{children:[r.jsxs(I,{className:"font-medium",children:[v.identificacao,v.nome?` - ${v.nome}`:""]}),r.jsx(I,{children:r.jsx(xv,{value:v.pr_ciclando_classificacao,variant:"display",disabled:!0})}),r.jsx(I,{children:r.jsx(yv,{value:v.pr_qualidade_semaforo,variant:"single",disabled:!0})}),r.jsx(I,{children:x(v.pr_status)}),r.jsx(I,{children:v.pr_motivo_inapta||""})]},v.id))})]})})]}),n.observacoes&&r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Observaes"})}),r.jsx(Ne,{children:r.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:n.observacoes})})]})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Protocolo no encontrado"}),r.jsx(G,{onClick:()=>t("/protocolos"),className:"mt-4",children:"Voltar para Protocolos"})]})}function b5(){const e=Aa(),{toast:t}=Jt(),[a,s]=u.useState([]),[n,o]=u.useState([]),[i,l]=u.useState([]),[c,d]=u.useState(!1),[f,h]=u.useState(!0),[p,m]=u.useState(!1),[_,g]=u.useState(""),[x,y]=u.useState(""),[v,b]=u.useState("");u.useEffect(()=>{j()},[]);const j=async()=>{try{h(!0);const{data:S,error:N}=await D.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(N)throw N;l(S||[])}catch(S){t({title:"Erro ao carregar fazendas",description:S instanceof Error?S.message:"Erro desconhecido",variant:"destructive"})}finally{h(!1)}},w=async()=>{try{d(!0);const{data:S,error:N}=await D.from("pacotes_aspiracao").select("*").order("data_aspiracao",{ascending:!1}).order("created_at",{ascending:!1});if(N)throw N;const C=new Map(i.map(T=>[T.id,T.nome])),P=(S==null?void 0:S.map(T=>T.id))||[],{data:R,error:Q}=await D.from("aspiracoes_doadoras").select("pacote_aspiracao_id").in("pacote_aspiracao_id",P);if(Q)throw Q;const K=new Map;R==null||R.forEach(T=>{T.pacote_aspiracao_id&&K.set(T.pacote_aspiracao_id,(K.get(T.pacote_aspiracao_id)||0)+1)});const{data:ce}=await D.from("pacotes_aspiracao_fazendas_destino").select("pacote_aspiracao_id, fazenda_destino_id").in("pacote_aspiracao_id",P),L=new Map;ce==null||ce.forEach(T=>{const V=L.get(T.pacote_aspiracao_id)||[],F=C.get(T.fazenda_destino_id);F&&!V.includes(F)&&V.push(F),L.set(T.pacote_aspiracao_id,V)});const H=(S||[]).map(T=>{let V=L.get(T.id);if(!V||V.length===0)if(T.fazenda_destino_id){const F=C.get(T.fazenda_destino_id);V=F?[F]:[]}else V=[];return{...T,fazenda_nome:C.get(T.fazenda_id),fazendas_destino_nomes:V,quantidade_doadoras:K.get(T.id)||0}});s(H),m(!0)}catch(S){t({title:"Erro ao carregar dados",description:S instanceof Error?S.message:"Erro desconhecido",variant:"destructive"})}finally{d(!1)}};return u.useEffect(()=>{if(x&&v){if(x>v){o([]),s([]),m(!1);return}!p&&a.length===0&&w()}else o([]),s([]),m(!1)},[x,v]),u.useEffect(()=>{if(a.length>0&&x&&v){let S=[...a];S=S.filter(N=>{const C=N.data_aspiracao.split("T")[0];return C>=x&&C<=v}),_&&(S=S.filter(N=>N.fazenda_id===_)),o(S)}},[a,_,x,v]),f?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Aspiraes"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar aspiraes"})]}),r.jsxs(G,{onClick:()=>e("/aspiracoes/novo"),className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Ja,{className:"w-4 h-4 mr-2"}),"Nova Aspirao"]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Oe,{children:"Lista de Aspiraes"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(s0,{className:"w-4 h-4 text-slate-500"}),r.jsx("span",{className:"text-sm text-slate-500",children:"Filtros"})]})]})}),r.jsxs(Ne,{children:[r.jsxs("div",{className:"mb-4 flex gap-4 items-end",children:[r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx(B,{children:"Filtrar por Fazenda"}),r.jsxs(at,{value:_||void 0,onValueChange:S=>g(S||""),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Todas as fazendas"})}),r.jsx(Je,{children:i.map(S=>r.jsx(_e,{value:S.id,children:S.nome},S.id))})]})]}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx(B,{children:"Data Inicial *"}),r.jsx(de,{type:"date",value:x,onChange:S=>y(S.target.value),max:v||void 0}),x&&v&&x>v&&r.jsx("p",{className:"text-sm text-red-500",children:"A data inicial deve ser anterior ou igual  data final"})]}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx(B,{children:"Data Final *"}),r.jsx(de,{type:"date",value:v,onChange:S=>b(S.target.value),min:x||void 0})]}),(x||v)&&r.jsxs(G,{variant:"outline",size:"sm",onClick:()=>{g(""),y(""),b("")},children:[r.jsx(Cs,{className:"w-4 h-4 mr-1"}),"Limpar Filtros"]})]}),r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Data"}),r.jsx(Y,{children:"Fazenda"}),r.jsx(Y,{children:"Fazenda Destino"}),r.jsx(Y,{children:"Horrio Incio"}),r.jsx(Y,{children:"Doadoras"}),r.jsx(Y,{children:"Total Ocitos"}),r.jsx(Y,{children:"Veterinrio"}),r.jsx(Y,{children:"Status"}),r.jsx(Y,{children:"Usado em Lote FIV"}),r.jsx(Y,{className:"text-right",children:"Aes"})]})}),r.jsx(wt,{children:!x||!v?r.jsx(be,{children:r.jsx(I,{colSpan:11,className:"text-center text-slate-500 py-12",children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(s0,{className:"w-8 h-8 text-slate-400"}),r.jsx("p",{className:"text-lg font-medium",children:"Aplique filtros para visualizar as aspiraes"}),r.jsx("p",{className:"text-sm",children:"Selecione um intervalo de datas (data inicial e data final) para buscar aspiraes"})]})})}):c?r.jsx(be,{children:r.jsx(I,{colSpan:11,className:"text-center text-slate-500 py-12",children:r.jsx(Pt,{})})}):n.length===0?r.jsx(be,{children:r.jsx(I,{colSpan:11,className:"text-center text-slate-500 py-12",children:"Nenhuma aspirao encontrada com os filtros aplicados"})}):n.map(S=>r.jsxs(be,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>e(`/aspiracoes/${S.id}`),children:[r.jsx(I,{children:Bt(S.data_aspiracao)}),r.jsx(I,{className:"font-medium",children:S.fazenda_nome||"-"}),r.jsx(I,{children:r.jsx("div",{className:"flex flex-wrap gap-1",children:S.fazendas_destino_nomes&&S.fazendas_destino_nomes.length>0?S.fazendas_destino_nomes.map((N,C)=>r.jsx(Xe,{variant:"outline",className:"text-xs",children:N},C)):r.jsx("span",{className:"text-slate-400",children:"-"})})}),r.jsx(I,{children:S.horario_inicio||"-"}),r.jsx(I,{children:S.quantidade_doadoras||0}),r.jsx(I,{className:"font-medium",children:S.total_oocitos||0}),r.jsx(I,{children:S.veterinario_responsavel||"-"}),r.jsx(I,{children:r.jsx(Xe,{variant:S.status==="FINALIZADO"?"default":"secondary",children:S.status==="FINALIZADO"?"FINALIZADO":"EM ANDAMENTO"})}),r.jsx(I,{children:S.usado_em_lote_fiv?r.jsx(Xe,{variant:"destructive",children:"Usado"}):r.jsx(Xe,{variant:"outline",children:"Disponvel"})}),r.jsx(I,{className:"text-right",onClick:N=>N.stopPropagation(),children:r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>e(`/aspiracoes/${S.id}`),children:r.jsx(hc,{className:"w-4 h-4"})})})]},S.id))})]})]})]})]})}function _5(){const e=Aa(),{toast:t}=Jt(),[a,s]=u.useState(!0),[n,o]=u.useState(!1),[i,l]=u.useState([]),[c,d]=u.useState({fazenda_id:"",fazendas_destino_ids:[],data_aspiracao:new Date().toISOString().split("T")[0],horario_inicio:"",veterinario_responsavel:"",tecnico_responsavel:"",observacoes:""}),[f,h]=u.useState("");u.useEffect(()=>{p()},[]);const p=async()=>{try{s(!0);const{data:_,error:g}=await D.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(g)throw g;l(_||[])}catch(_){t({title:"Erro ao carregar fazendas",description:_ instanceof Error?_.message:"Erro desconhecido",variant:"destructive"})}finally{s(!1)}},m=async _=>{if(_.preventDefault(),!c.fazenda_id||c.fazendas_destino_ids.length===0||!c.data_aspiracao){t({title:"Erro de validao",description:"Fazenda, pelo menos uma fazenda destino e data so obrigatrios",variant:"destructive"});return}if(!c.veterinario_responsavel.trim()){t({title:"Erro de validao",description:"Veterinrio responsvel  obrigatrio",variant:"destructive"});return}if(!c.tecnico_responsavel.trim()){t({title:"Erro de validao",description:"Tcnico responsvel  obrigatrio",variant:"destructive"});return}try{o(!0);const g=c.fazendas_destino_ids[0],x={fazenda_id:c.fazenda_id,fazenda_destino_id:g,data_aspiracao:c.data_aspiracao,horario_inicio:c.horario_inicio||null,veterinario_responsavel:c.veterinario_responsavel.trim(),tecnico_responsavel:c.tecnico_responsavel.trim(),observacoes:c.observacoes.trim()||null,status:"EM_ANDAMENTO"},{data:y,error:v}=await D.from("pacotes_aspiracao").insert([x]).select().single();if(v)throw v;const b=c.fazendas_destino_ids.map(w=>({pacote_aspiracao_id:y.id,fazenda_destino_id:w})),{error:j}=await D.from("pacotes_aspiracao_fazendas_destino").insert(b);if(j)throw j;t({title:"Aspirao criada",description:"Aspirao criada com sucesso"}),e(`/aspiracoes/${y.id}`)}catch(g){t({title:"Erro ao criar aspirao",description:g instanceof Error?g.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}};return a?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(G,{onClick:()=>e("/aspiracoes"),variant:"outline",size:"icon",children:r.jsx(Za,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Nova Aspirao"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Criar nova aspirao"})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Informaes da Aspirao"})}),r.jsx(Ne,{children:r.jsxs("form",{onSubmit:m,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"fazenda_id",children:"Fazenda da Aspirao *"}),r.jsxs(at,{value:c.fazenda_id,onValueChange:_=>d({...c,fazenda_id:_}),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione a fazenda"})}),r.jsx(Je,{children:i.map(_=>r.jsx(_e,{value:_.id,children:_.nome},_.id))})]})]}),r.jsxs("div",{className:"space-y-2 col-span-2",children:[r.jsx(B,{children:"Fazendas Destino *"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(de,{placeholder:"Buscar fazenda destino...",value:f,onChange:_=>h(_.target.value),className:"mb-2"}),r.jsxs(at,{value:"",onValueChange:_=>{_&&!c.fazendas_destino_ids.includes(_)&&(d({...c,fazendas_destino_ids:[...c.fazendas_destino_ids,_]}),h(""))},children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione uma fazenda destino para adicionar"})}),r.jsx(Je,{children:i.filter(_=>!c.fazendas_destino_ids.includes(_.id)).filter(_=>f.trim()===""?!0:_.nome.toLowerCase().includes(f.toLowerCase())).map(_=>r.jsx(_e,{value:_.id,children:_.nome},_.id))})]})]}),c.fazendas_destino_ids.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.fazendas_destino_ids.map(_=>{const g=i.find(x=>x.id===_);return g?r.jsxs(Xe,{variant:"outline",className:"flex items-center gap-1 pr-1",children:[g.nome,r.jsx("button",{type:"button",onClick:x=>{x.preventDefault(),d({...c,fazendas_destino_ids:c.fazendas_destino_ids.filter(y=>y!==_)})},className:"ml-1 hover:bg-slate-200 rounded-full p-0.5",children:r.jsx(Cs,{className:"w-3 h-3"})})]},_):null})}),c.fazendas_destino_ids.length===0&&r.jsx("p",{className:"text-sm text-slate-500",children:"Selecione pelo menos uma fazenda destino"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"data_aspiracao",children:"Data da Aspirao *"}),r.jsx(de,{id:"data_aspiracao",type:"date",value:c.data_aspiracao,onChange:_=>d({...c,data_aspiracao:_.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"horario_inicio",children:"Horrio de Incio"}),r.jsx(de,{id:"horario_inicio",type:"time",value:c.horario_inicio,onChange:_=>d({...c,horario_inicio:_.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"veterinario_responsavel",children:"Veterinrio Responsvel *"}),r.jsx(de,{id:"veterinario_responsavel",value:c.veterinario_responsavel,onChange:_=>d({...c,veterinario_responsavel:_.target.value}),placeholder:"Nome do veterinrio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"tecnico_responsavel",children:"Tcnico Responsvel *"}),r.jsx(de,{id:"tecnico_responsavel",value:c.tecnico_responsavel,onChange:_=>d({...c,tecnico_responsavel:_.target.value}),placeholder:"Nome do tcnico",required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(ja,{id:"observacoes",value:c.observacoes,onChange:_=>d({...c,observacoes:_.target.value}),placeholder:"Observaes sobre a aspirao",rows:3})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx(G,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:n,children:n?"Criando...":"Criar Aspirao"}),r.jsx(G,{type:"button",variant:"outline",onClick:()=>e("/aspiracoes"),disabled:n,children:"Cancelar"})]})]})})]})]})}function j5(){const{id:e}=Ur(),t=Aa(),{toast:a}=Jt(),[s,n]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(""),[h,p]=u.useState([]),[m,_]=u.useState([]),[g,x]=u.useState([]),y=u.useRef(!1),[v,b]=u.useState(!1),[j,w]=u.useState(!1),[S,N]=u.useState(!1),[C,P]=u.useState(!1),[R,Q]=u.useState(null),[K,ce]=u.useState(!1),[L,H]=u.useState(null),[T,V]=u.useState(!1),[F,E]=u.useState({veterinario_responsavel:"",tecnico_responsavel:""}),[O,U]=u.useState({doadora_id:"",horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""}),[M,X]=u.useState({registro:"",raca:"",racaCustom:""}),[$,ne]=u.useState({horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""}),le=["Holandesa","Jersey","Gir","Girolando"],[z,A]=u.useState("");u.useEffect(()=>{e&&J()},[e]);const J=async()=>{try{n(!0);const{data:k,error:ue}=await D.from("pacotes_aspiracao").select("*").eq("id",e).single();if(ue)throw ue;c(k),E({veterinario_responsavel:k.veterinario_responsavel||"",tecnico_responsavel:k.tecnico_responsavel||""});const{data:Me,error:Be}=await D.from("fazendas").select("nome").eq("id",k.fazenda_id).single();if(Be)throw Be;f(Me.nome);const{data:Pe,error:ft}=await D.from("pacotes_aspiracao_fazendas_destino").select("fazenda_destino_id").eq("pacote_aspiracao_id",e);if(ft&&console.warn("Erro ao carregar fazendas destino:",ft),!Pe||Pe.length===0){if(k.fazenda_destino_id){const{data:dt,error:mt}=await D.from("fazendas").select("nome").eq("id",k.fazenda_destino_id).single();!mt&&dt&&p([dt.nome])}}else{const dt=Pe.map(la=>la.fazenda_destino_id),{data:mt,error:Wt}=await D.from("fazendas").select("id, nome").in("id",dt);if(!Wt&&mt){const la=mt.map(ha=>ha.nome).filter(Boolean);p(la)}}await ee(),k.status==="EM_ANDAMENTO"&&await Z(k.fazenda_id)}catch(k){a({title:"Erro ao carregar dados",description:k instanceof Error?k.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},ee=async()=>{try{const{data:k,error:ue}=await D.from("aspiracoes_doadoras").select("*").eq("pacote_aspiracao_id",e).order("created_at",{ascending:!0});if(ue)throw ue;if(!k||k.length===0){_([]);return}const Me=k.map(mt=>mt.doadora_id),{data:Be,error:Pe}=await D.from("doadoras").select("id, registro, nome").in("id",Me);if(Pe)throw Pe;const ft=new Map((Be==null?void 0:Be.map(mt=>[mt.id,mt]))||[]),dt=k.map(mt=>{const Wt=ft.get(mt.doadora_id);return{...mt,doadora_nome:Wt==null?void 0:Wt.nome,doadora_registro:Wt==null?void 0:Wt.registro}});_(dt)}catch(k){console.error("Error loading aspiracoes:",k)}},Z=async k=>{try{const{data:ue,error:Me}=await D.from("aspiracoes_doadoras").select("doadora_id").eq("pacote_aspiracao_id",e);Me&&console.error("Error loading aspiracoes for filtering:",Me);const Be=new Set((ue==null?void 0:ue.map(mt=>mt.doadora_id))||[]),{data:Pe,error:ft}=await D.from("doadoras").select("id, registro, nome").eq("fazenda_id",k).order("registro",{ascending:!0});if(ft)throw ft;const dt=(Pe||[]).filter(mt=>!Be.has(mt.id));x(dt)}catch(ue){console.error("Error loading doadoras disponiveis:",ue)}},ae=k=>{const ue=parseInt(k.atresicos)||0,Me=parseInt(k.degenerados)||0,Be=parseInt(k.expandidos)||0,Pe=parseInt(k.desnudos)||0,ft=parseInt(k.viaveis)||0;return ue+Me+Be+Pe+ft},ie=m.reduce((k,ue)=>k+(ue.total_oocitos||0),0),pe=(k,ue)=>{if(!k)return"";const[Me,Be]=k.split(":").map(Number),Pe=Me*60+Be+ue*60,ft=Math.floor(Pe/60)%24,dt=Pe%60;return`${String(ft).padStart(2,"0")}:${String(dt).padStart(2,"0")}`};u.useEffect(()=>{if(v&&l)if(Z(l.fazenda_id),m.length>0){const k=m[m.length-1];k.hora_final&&U(ue=>({...ue,horario_aspiracao:k.hora_final||"",hora_final:pe(k.hora_final||"",1)}))}else l!=null&&l.horario_inicio&&U(k=>({...k,horario_aspiracao:l.horario_inicio||"",hora_final:pe(l.horario_inicio||"",1)}))},[v,m,l]);const ge=async()=>{if(o||y.current)return;if(!O.doadora_id){a({title:"Erro",description:"Selecione uma doadora",variant:"destructive"});return}if(!O.hora_final.trim()){a({title:"Erro de validao",description:"Hora final  obrigatria",variant:"destructive"});return}if(!(l!=null&&l.veterinario_responsavel)||!(l!=null&&l.tecnico_responsavel)){a({title:"Erro de validao",description:"A aspirao deve ter veterinrio e tcnico responsveis preenchidos. Por favor, edite a aspirao primeiro.",variant:"destructive"});return}if(m.find(Me=>Me.doadora_id===O.doadora_id)){a({title:"Erro",description:"Esta doadora j foi aspirada nesta aspirao",variant:"destructive"});return}if(ae(O)===0){H("add"),ce(!0);return}await Le()},Le=async()=>{if(!(o||y.current))try{y.current=!0,i(!0);const k=ae(O),ue={pacote_aspiracao_id:e,doadora_id:O.doadora_id,fazenda_id:l.fazenda_id,data_aspiracao:l.data_aspiracao,horario_aspiracao:O.horario_aspiracao||null,hora_final:O.hora_final,atresicos:parseInt(O.atresicos)||0,degenerados:parseInt(O.degenerados)||0,expandidos:parseInt(O.expandidos)||0,desnudos:parseInt(O.desnudos)||0,viaveis:parseInt(O.viaveis)||0,total_oocitos:k,veterinario_responsavel:l.veterinario_responsavel,tecnico_responsavel:l.tecnico_responsavel,recomendacao_touro:O.recomendacao_touro.trim()||null,observacoes:O.observacoes.trim()||null},{error:Me}=await D.from("aspiracoes_doadoras").insert([ue]);if(Me){if(Me.code==="23505"){a({title:"Erro",description:"Esta doadora j foi aspirada nesta aspirao",variant:"destructive"}),i(!1),y.current=!1,J();return}throw Me}const Be=ie+k;await D.from("pacotes_aspiracao").update({total_oocitos:Be}).eq("id",e),a({title:"Doadora adicionada",description:"Doadora adicionada  aspirao com sucesso"}),b(!1),U({doadora_id:"",horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""}),J()}catch(k){a({title:"Erro ao adicionar doadora",description:k instanceof Error?k.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1),y.current=!1}},te=async()=>{if(!M.registro.trim()){a({title:"Erro de validao",description:"Registro  obrigatrio",variant:"destructive"});return}if(!(z==="Outra"?M.racaCustom.trim():M.raca.trim())){a({title:"Erro de validao",description:"Raa  obrigatria",variant:"destructive"});return}if(!O.hora_final.trim()){a({title:"Erro de validao",description:"Hora final  obrigatria",variant:"destructive"});return}if(!(l!=null&&l.veterinario_responsavel)||!(l!=null&&l.tecnico_responsavel)){a({title:"Erro de validao",description:"A aspirao deve ter veterinrio e tcnico responsveis preenchidos. Por favor, edite a aspirao primeiro.",variant:"destructive"});return}if(ae(O)===0){H("create"),ce(!0);return}await xe()},xe=async()=>{try{i(!0);const k=z==="Outra"?M.racaCustom.trim():M.raca.trim(),ue=M.registro.trim().toUpperCase(),{data:Me,error:Be}=await D.from("doadoras").select("id, registro, raca").ilike("registro",ue).eq("raca",k);if(Be&&Be.code!=="PGRST116")throw Be;if(Me&&Me.length>0){a({title:"Erro",description:`J existe uma doadora com o registro ${M.registro.trim()} e raa ${k}`,variant:"destructive"}),i(!1);return}const Pe={fazenda_id:l.fazenda_id,registro:ue,raca:k},{data:ft,error:dt}=await D.from("doadoras").insert([Pe]).select().single();if(dt){if(dt.code==="23505"){a({title:"Erro",description:`J existe uma doadora com o registro ${M.registro.trim()} nesta fazenda`,variant:"destructive"}),i(!1);return}throw dt}const mt=ae(O),Wt={pacote_aspiracao_id:e,doadora_id:ft.id,fazenda_id:l.fazenda_id,data_aspiracao:l.data_aspiracao,horario_aspiracao:O.horario_aspiracao||null,hora_final:O.hora_final,atresicos:parseInt(O.atresicos)||0,degenerados:parseInt(O.degenerados)||0,expandidos:parseInt(O.expandidos)||0,desnudos:parseInt(O.desnudos)||0,viaveis:parseInt(O.viaveis)||0,total_oocitos:mt,veterinario_responsavel:l.veterinario_responsavel,tecnico_responsavel:l.tecnico_responsavel,recomendacao_touro:O.recomendacao_touro.trim()||null,observacoes:O.observacoes.trim()||null},{error:la}=await D.from("aspiracoes_doadoras").insert([Wt]);if(la){if(la.code==="23505"){a({title:"Erro",description:"Esta doadora j foi aspirada nesta aspirao",variant:"destructive"}),i(!1),J();return}throw la}const ha=ie+mt;await D.from("pacotes_aspiracao").update({total_oocitos:ha}).eq("id",e),a({title:"Doadora criada e adicionada",description:"Doadora criada e adicionada  aspirao com sucesso"}),w(!1),X({registro:"",raca:"",racaCustom:""}),A(""),J()}catch(k){a({title:"Erro ao criar doadora",description:k instanceof Error?k.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},q=k=>{var ue,Me,Be,Pe,ft;Q(k),ne({horario_aspiracao:k.horario_aspiracao||"",hora_final:k.hora_final||"",atresicos:((ue=k.atresicos)==null?void 0:ue.toString())||"",degenerados:((Me=k.degenerados)==null?void 0:Me.toString())||"",expandidos:((Be=k.expandidos)==null?void 0:Be.toString())||"",desnudos:((Pe=k.desnudos)==null?void 0:Pe.toString())||"",viaveis:((ft=k.viaveis)==null?void 0:ft.toString())||"",recomendacao_touro:k.recomendacao_touro||"",observacoes:k.observacoes||""}),P(!0)},he=async()=>{if(R){if(!$.hora_final.trim()){a({title:"Erro de validao",description:"Hora final  obrigatria",variant:"destructive"});return}try{i(!0);const k=ae($),ue=R.total_oocitos||0,Me=k-ue,Be={horario_aspiracao:$.horario_aspiracao||null,hora_final:$.hora_final,atresicos:parseInt($.atresicos)||0,degenerados:parseInt($.degenerados)||0,expandidos:parseInt($.expandidos)||0,desnudos:parseInt($.desnudos)||0,viaveis:parseInt($.viaveis)||0,total_oocitos:k,recomendacao_touro:$.recomendacao_touro.trim()||null,observacoes:$.observacoes.trim()||null},{error:Pe}=await D.from("aspiracoes_doadoras").update(Be).eq("id",R.id);if(Pe)throw Pe;const ft=ie+Me;await D.from("pacotes_aspiracao").update({total_oocitos:ft}).eq("id",e),a({title:"Aspirao atualizada",description:"Aspirao da doadora atualizada com sucesso"}),P(!1),Q(null),J()}catch(k){a({title:"Erro ao atualizar aspirao",description:k instanceof Error?k.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}}},Se=async()=>{if(!F.veterinario_responsavel.trim()){a({title:"Erro de validao",description:"Veterinrio responsvel  obrigatrio",variant:"destructive"});return}if(!F.tecnico_responsavel.trim()){a({title:"Erro de validao",description:"Tcnico responsvel  obrigatrio",variant:"destructive"});return}try{i(!0);const{error:k}=await D.from("pacotes_aspiracao").update({veterinario_responsavel:F.veterinario_responsavel.trim(),tecnico_responsavel:F.tecnico_responsavel.trim(),updated_at:new Date().toISOString()}).eq("id",e);if(k)throw k;a({title:"Aspirao atualizada",description:"Informaes da aspirao atualizadas com sucesso"}),V(!1),J()}catch(k){a({title:"Erro ao atualizar aspirao",description:k instanceof Error?k.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},Ce=async()=>{try{i(!0);const{error:k}=await D.from("pacotes_aspiracao").update({status:"FINALIZADO",updated_at:new Date().toISOString()}).eq("id",e);if(k)throw k;a({title:"Aspirao finalizada",description:"Aspirao finalizada com sucesso"}),N(!1),t("/aspiracoes")}catch(k){a({title:"Erro ao finalizar aspirao",description:k instanceof Error?k.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}};if(s)return r.jsx(Pt,{});if(!l)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Aspirao no encontrada"}),r.jsx(G,{onClick:()=>t("/aspiracoes"),className:"mt-4",children:"Voltar para Aspiraes"})]});const we=l.status==="FINALIZADO";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>t("/aspiracoes"),children:r.jsx(Za,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["Aspirao - ",d]}),r.jsx("p",{className:"text-slate-600 mt-1",children:we?"Aspirao finalizada":"Gerenciar doadoras da aspirao"})]})]}),!we&&r.jsxs(G,{onClick:()=>N(!0),disabled:o||m.length===0,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(lf,{className:"w-4 h-4 mr-2"}),o?"Finalizando...":"Finalizar Pacote"]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Oe,{children:"Informaes da Aspirao"}),!we&&r.jsxs(G,{variant:"outline",size:"sm",onClick:()=>V(!0),children:[r.jsx(mc,{className:"w-4 h-4 mr-2"}),"Editar"]})]})}),r.jsx(Ne,{children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(B,{className:"text-slate-500",children:"Fazenda da Aspirao"}),r.jsx("p",{className:"font-medium",children:d})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(B,{className:"text-slate-500",children:"Fazendas Destino"}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:h.length>0?h.map((k,ue)=>r.jsx(Xe,{variant:"outline",className:"font-medium",children:k},ue)):r.jsx("p",{className:"font-medium text-slate-400",children:"-"})})]}),r.jsxs("div",{children:[r.jsx(B,{className:"text-slate-500",children:"Data da Aspirao"}),r.jsx("p",{className:"font-medium",children:Bt(l.data_aspiracao)})]}),r.jsxs("div",{children:[r.jsx(B,{className:"text-slate-500",children:"Horrio de Incio"}),r.jsx("p",{className:"font-medium",children:l.horario_inicio||"-"})]}),r.jsxs("div",{children:[r.jsx(B,{className:"text-slate-500",children:"Veterinrio Responsvel"}),r.jsx("p",{className:"font-medium",children:l.veterinario_responsavel||"-"})]}),r.jsxs("div",{children:[r.jsx(B,{className:"text-slate-500",children:"Tcnico Responsvel"}),r.jsx("p",{className:"font-medium",children:l.tecnico_responsavel||"-"})]}),r.jsxs("div",{children:[r.jsx(B,{className:"text-slate-500",children:"Status"}),r.jsx("div",{children:r.jsx(Xe,{variant:we?"default":"secondary",children:we?"FINALIZADO":"EM ANDAMENTO"})})]}),r.jsxs("div",{children:[r.jsx(B,{className:"text-slate-500",children:"Total de Ocitos"}),r.jsx("p",{className:"font-medium text-lg",children:ie})]})]})})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Oe,{children:["Doadoras Aspiradas (",m.length,")"]}),!we&&r.jsxs(zt,{open:v,onOpenChange:k=>{b(k),k||U({doadora_id:"",horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""})},children:[r.jsx(As,{asChild:!0,children:r.jsxs(G,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Ja,{className:"w-4 h-4 mr-2"}),"Adicionar Doadora"]})}),r.jsxs(St,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Adicionar Doadora  Aspirao"}),r.jsx(Mt,{children:"Selecione uma doadora existente ou cadastre uma nova"})]}),r.jsxs(zf,{defaultValue:"existing",className:"w-full",children:[r.jsxs(Wc,{className:"grid w-full grid-cols-2",children:[r.jsx(Lr,{value:"existing",children:"Doadora Existente"}),r.jsx(Lr,{value:"new",children:"Cadastrar Nova"})]}),r.jsxs(Ir,{value:"existing",className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Doadora *"}),r.jsxs(at,{value:O.doadora_id,onValueChange:k=>U({...O,doadora_id:k}),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione uma doadora"})}),r.jsx(Je,{children:g.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhuma doadora disponvel nesta fazenda"}):g.map(k=>r.jsxs(_e,{value:k.id,children:[k.registro," ",k.nome?`- ${k.nome}`:""]},k.id))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Horrio de Aspirao"}),r.jsx(de,{type:"time",value:O.horario_aspiracao,onChange:k=>U({...O,horario_aspiracao:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Hora Final *"}),r.jsx(de,{type:"time",value:O.hora_final,onChange:k=>U({...O,hora_final:k.target.value}),required:!0})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Contagem de Ocitos"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Atrsicos"}),r.jsx(de,{type:"number",min:"0",value:O.atresicos,onChange:k=>U({...O,atresicos:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Degenerados"}),r.jsx(de,{type:"number",min:"0",value:O.degenerados,onChange:k=>U({...O,degenerados:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Expandidos"}),r.jsx(de,{type:"number",min:"0",value:O.expandidos,onChange:k=>U({...O,expandidos:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Desnudos"}),r.jsx(de,{type:"number",min:"0",value:O.desnudos,onChange:k=>U({...O,desnudos:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Viveis"}),r.jsx(de,{type:"number",min:"0",value:O.viaveis,onChange:k=>U({...O,viaveis:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Total"}),r.jsx(de,{value:ae(O),disabled:!0})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Recomendao de Touro"}),r.jsx(de,{value:O.recomendacao_touro,onChange:k=>U({...O,recomendacao_touro:k.target.value}),placeholder:"Recomendao de touro para esta doadora"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Observaes"}),r.jsx(ja,{value:O.observacoes,onChange:k=>U({...O,observacoes:k.target.value}),placeholder:"Observaes sobre esta aspirao",rows:2})]}),r.jsx(G,{onClick:ge,className:"w-full bg-green-600 hover:bg-green-700",disabled:o||g.length===0,children:o?"Adicionando...":"Adicionar"})]}),r.jsxs(Ir,{value:"new",className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Registro *"}),r.jsx(de,{value:M.registro,onChange:k=>X({...M,registro:k.target.value}),placeholder:"Registro da doadora"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Raa *"}),r.jsxs(at,{value:z,onValueChange:k=>{A(k),X(k==="Outra"?{...M,raca:"",racaCustom:""}:{...M,raca:k,racaCustom:""})},children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione a raa"})}),r.jsxs(Je,{children:[le.map(k=>r.jsx(_e,{value:k,children:k},k)),r.jsx(_e,{value:"Outra",children:"Outra"})]})]})]}),z==="Outra"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Raa Customizada *"}),r.jsx(de,{value:M.racaCustom,onChange:k=>X({...M,racaCustom:k.target.value}),placeholder:"Digite a raa"})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Contagem de Ocitos"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Atrsicos"}),r.jsx(de,{type:"number",min:"0",value:O.atresicos,onChange:k=>U({...O,atresicos:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Degenerados"}),r.jsx(de,{type:"number",min:"0",value:O.degenerados,onChange:k=>U({...O,degenerados:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Expandidos"}),r.jsx(de,{type:"number",min:"0",value:O.expandidos,onChange:k=>U({...O,expandidos:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Desnudos"}),r.jsx(de,{type:"number",min:"0",value:O.desnudos,onChange:k=>U({...O,desnudos:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Viveis"}),r.jsx(de,{type:"number",min:"0",value:O.viaveis,onChange:k=>U({...O,viaveis:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Total"}),r.jsx(de,{value:ae(O),disabled:!0})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Recomendao de Touro"}),r.jsx(de,{value:O.recomendacao_touro,onChange:k=>U({...O,recomendacao_touro:k.target.value}),placeholder:"Recomendao de touro para esta doadora"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Horrio de Aspirao"}),r.jsx(de,{type:"time",value:O.horario_aspiracao,onChange:k=>U({...O,horario_aspiracao:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Hora Final *"}),r.jsx(de,{type:"time",value:O.hora_final,onChange:k=>U({...O,hora_final:k.target.value}),required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Observaes"}),r.jsx(ja,{value:O.observacoes,onChange:k=>U({...O,observacoes:k.target.value}),placeholder:"Observaes sobre esta aspirao",rows:2})]}),r.jsx(G,{onClick:te,className:"w-full bg-green-600 hover:bg-green-700",disabled:o,children:o?"Criando...":"Criar e Adicionar"})]})]})]})]})]})}),r.jsx(Ne,{children:r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Doadora"}),r.jsx(Y,{children:"Registro"}),r.jsx(Y,{children:"Horrio"}),r.jsx(Y,{children:"Viveis"}),r.jsx(Y,{children:"Total Ocitos"}),r.jsx(Y,{children:"Recomendao Touro"}),r.jsx(Y,{children:"Observaes"}),!we&&r.jsx(Y,{className:"text-right",children:"Aes"})]})}),r.jsx(wt,{children:m.length===0?r.jsx(be,{children:r.jsx(I,{colSpan:we?7:8,className:"text-center text-slate-500",children:"Nenhuma doadora adicionada  aspirao"})}):m.map(k=>r.jsxs(be,{children:[r.jsx(I,{className:"font-medium",children:k.doadora_nome||"-"}),r.jsx(I,{children:k.doadora_registro||"-"}),r.jsx(I,{children:k.horario_aspiracao?`${k.horario_aspiracao}${k.hora_final?` - ${k.hora_final}`:""}`:"-"}),r.jsx(I,{className:"font-medium",children:k.viaveis||0}),r.jsx(I,{children:k.total_oocitos||0}),r.jsx(I,{children:k.recomendacao_touro||"-"}),r.jsx(I,{children:k.observacoes||"-"}),!we&&r.jsx(I,{className:"text-right",children:r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>q(k),children:r.jsx(mc,{className:"w-4 h-4"})})})]},k.id))})]})})]}),r.jsx(zt,{open:C,onOpenChange:k=>{P(k),k||(Q(null),ne({horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""}))},children:r.jsxs(St,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Et,{children:[r.jsxs(Nt,{children:["Editar Aspirao - ",(R==null?void 0:R.doadora_nome)||(R==null?void 0:R.doadora_registro)||"Doadora"]}),r.jsx(Mt,{children:"Edite os dados da aspirao da doadora"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Horrio de Aspirao"}),r.jsx(de,{type:"time",value:$.horario_aspiracao,onChange:k=>ne({...$,horario_aspiracao:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Hora Final *"}),r.jsx(de,{type:"time",value:$.hora_final,onChange:k=>ne({...$,hora_final:k.target.value}),required:!0})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Contagem de Ocitos"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Atrsicos"}),r.jsx(de,{type:"number",min:"0",value:$.atresicos,onChange:k=>ne({...$,atresicos:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Degenerados"}),r.jsx(de,{type:"number",min:"0",value:$.degenerados,onChange:k=>ne({...$,degenerados:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Expandidos"}),r.jsx(de,{type:"number",min:"0",value:$.expandidos,onChange:k=>ne({...$,expandidos:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Desnudos"}),r.jsx(de,{type:"number",min:"0",value:$.desnudos,onChange:k=>ne({...$,desnudos:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Viveis"}),r.jsx(de,{type:"number",min:"0",value:$.viaveis,onChange:k=>ne({...$,viaveis:k.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Total"}),r.jsx(de,{value:ae($),disabled:!0})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Recomendao de Touro"}),r.jsx(de,{value:$.recomendacao_touro,onChange:k=>ne({...$,recomendacao_touro:k.target.value}),placeholder:"Recomendao de touro para esta doadora"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Observaes"}),r.jsx(ja,{value:$.observacoes,onChange:k=>ne({...$,observacoes:k.target.value}),placeholder:"Observaes sobre esta aspirao",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(G,{variant:"outline",onClick:()=>{P(!1),Q(null)},disabled:o,children:"Cancelar"}),r.jsx(G,{onClick:he,className:"bg-blue-600 hover:bg-blue-700",disabled:o,children:o?"Salvando...":"Salvar Alteraes"})]})]})]})}),r.jsx(Xi,{open:K,onOpenChange:ce,children:r.jsxs(Eo,{children:[r.jsxs(No,{children:[r.jsx(Ao,{children:"Confirmar Adio de Doadora sem Ocitos"}),r.jsxs(To,{children:["Esta doadora no possui nenhum ocito (total = 0). Deseja realmente adicion-la  aspirao?",r.jsx("br",{}),r.jsx("br",{}),r.jsx("strong",{children:"Ateno:"})," Doadoras sem ocitos podem no ser teis para o processo de FIV."]})]}),r.jsxs(Co,{children:[r.jsx(Ro,{disabled:o,children:"Cancelar"}),r.jsx(Do,{onClick:async()=>{ce(!1),L==="add"?await Le():L==="create"&&await xe(),H(null)},disabled:o,className:"bg-orange-600 hover:bg-orange-700",children:o?"Adicionando...":"Sim, Adicionar Mesmo Assim"})]})]})}),r.jsx(zt,{open:T,onOpenChange:V,children:r.jsxs(St,{children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Editar Aspirao"}),r.jsx(Mt,{children:"Atualize as informaes da aspirao"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Veterinrio Responsvel *"}),r.jsx(de,{value:F.veterinario_responsavel,onChange:k=>E({...F,veterinario_responsavel:k.target.value}),placeholder:"Nome do veterinrio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Tcnico Responsvel *"}),r.jsx(de,{value:F.tecnico_responsavel,onChange:k=>E({...F,tecnico_responsavel:k.target.value}),placeholder:"Nome do tcnico",required:!0})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(G,{variant:"outline",onClick:()=>V(!1),disabled:o,children:"Cancelar"}),r.jsx(G,{onClick:Se,className:"bg-blue-600 hover:bg-blue-700",disabled:o,children:o?"Salvando...":"Salvar"})]})]})]})}),r.jsx(Xi,{open:S,onOpenChange:N,children:r.jsxs(Eo,{children:[r.jsxs(No,{children:[r.jsx(Ao,{children:"Finalizar Aspirao"}),r.jsxs(To,{children:["Tem certeza que deseja finalizar esta aspirao? Esta ao no pode ser desfeita.",r.jsx("br",{}),r.jsx("br",{}),r.jsx("strong",{children:"Ateno:"})," Aps finalizar, a aspirao ficar apenas como histrico e no poder ser editada.",r.jsx("br",{}),r.jsx("br",{}),"Total de ocitos na aspirao: ",r.jsx("strong",{children:ie})]})]}),r.jsxs(Co,{children:[r.jsx(Ro,{disabled:o,children:"Cancelar"}),r.jsx(Do,{onClick:Ce,disabled:o,className:"bg-blue-600 hover:bg-blue-700",children:o?"Finalizando...":"Finalizar Aspirao"})]})]})})]})}function w5(){const[e,t]=u.useState([]),[a,s]=u.useState([]),[n,o]=u.useState(!0),[i,l]=u.useState(!1),[c,d]=u.useState(!1),[f,h]=u.useState(!1),[p,m]=u.useState(!1),[_,g]=u.useState(null),[x,y]=u.useState(null),{toast:v}=Jt(),b=["Holandesa","Jersey","Gir","Girolando","Nelore","Angus","Brahman","Hereford","Simmental","Tabapu","Sindi","Caracu","Canchim","Senepol","Brangus"],[j,w]=u.useState({cliente_id:"",nome:"",raca:"",tipo_semen:"",quantidade:""}),[S,N]=u.useState({cliente_id:"",nome:"",raca:"",tipo_semen:"",quantidade:""}),[C,P]=u.useState(""),[R,Q]=u.useState(""),[K,ce]=u.useState("");u.useEffect(()=>{L()},[]);const L=async()=>{try{o(!0);const{data:E,error:O}=await D.from("clientes").select("id, nome").order("nome",{ascending:!0});if(O)throw O;s(E||[]);const{data:U,error:M}=await D.from("doses_semen").select("*").order("nome",{ascending:!0});if(M)throw M;const X=new Map(E==null?void 0:E.map(ne=>[ne.id,ne.nome])),$=U==null?void 0:U.map(ne=>({...ne,cliente_nome:ne.cliente_id?X.get(ne.cliente_id):void 0}));t($||[])}catch(E){v({title:"Erro ao carregar dados",description:E instanceof Error?E.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},H=async E=>{if(E.preventDefault(),!j.nome.trim()){v({title:"Erro de validao",description:"Nome  obrigatrio",variant:"destructive"});return}try{m(!0);const O={nome:j.nome,cliente_id:j.cliente_id||null,raca:j.raca||null,tipo_semen:j.tipo_semen||null,quantidade:parseInt(j.quantidade)||0};console.log("Dados sendo inseridos:",O);const{error:U,data:M}=await D.from("doses_semen").insert([O]).select();if(U)throw console.error("Erro detalhado:",U),U;v({title:"Dose criada",description:"Dose de smen criada com sucesso"}),l(!1),w({cliente_id:"",nome:"",raca:"",tipo_semen:"",quantidade:""}),L()}catch(O){console.error("Erro completo:",O);let U="Erro desconhecido";O instanceof Error?U=O.message:typeof O=="object"&&O!==null&&(U=JSON.stringify(O,null,2)),v({title:"Erro ao criar dose",description:U.includes("RLS")||U.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":U.length>200?U.substring(0,200)+"...":U,variant:"destructive"})}finally{m(!1)}},T=E=>{var O;g(E),N({cliente_id:E.cliente_id||"",nome:E.nome,raca:E.raca||"",tipo_semen:E.tipo_semen||"",quantidade:((O=E.quantidade)==null?void 0:O.toString())||""}),d(!0)},V=async E=>{if(E.preventDefault(),!!_){if(!S.nome.trim()){v({title:"Erro de validao",description:"Nome  obrigatrio",variant:"destructive"});return}try{m(!0);const O={nome:S.nome,cliente_id:S.cliente_id||null,raca:S.raca||null,tipo_semen:S.tipo_semen||null,quantidade:parseInt(S.quantidade)||0},{error:U}=await D.from("doses_semen").update(O).eq("id",_.id);if(U)throw U;v({title:"Dose atualizada",description:"Dose de smen atualizada com sucesso"}),d(!1),g(null),L()}catch(O){const U=O instanceof Error?O.message:"Erro desconhecido";v({title:"Erro ao atualizar dose",description:U.includes("RLS")||U.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":U,variant:"destructive"})}finally{m(!1)}}},F=async()=>{if(x)try{m(!0);const{error:E}=await D.from("doses_semen").delete().eq("id",x.id);if(E)throw E;v({title:"Dose excluda",description:"Dose de smen excluda com sucesso"}),h(!1),y(null),L()}catch(E){const O=E instanceof Error?E.message:"Erro desconhecido";v({title:"Erro ao excluir dose",description:O,variant:"destructive"})}finally{m(!1)}};return n?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Doses de Smen"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar doses de smen disponveis"})]}),r.jsxs(zt,{open:i,onOpenChange:l,children:[r.jsx(As,{asChild:!0,children:r.jsxs(G,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Ja,{className:"w-4 h-4 mr-2"}),"Nova Dose"]})}),r.jsxs(St,{className:"max-w-md",children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Criar Nova Dose de Smen"}),r.jsx(Mt,{children:"Preencha os dados da dose"})]}),r.jsxs("form",{onSubmit:H,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"nome",children:"Nome *"}),r.jsx(de,{id:"nome",value:j.nome,onChange:E=>w({...j,nome:E.target.value}),placeholder:"Nome do touro/reprodutor",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"cliente_id",children:"Cliente"}),r.jsxs(at,{value:j.cliente_id,onValueChange:E=>w({...j,cliente_id:E}),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione o cliente"})}),r.jsx(Je,{children:a.map(E=>r.jsx(_e,{value:E.id,children:E.nome},E.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"raca",children:"Raa"}),r.jsxs(at,{value:j.raca,onValueChange:E=>w({...j,raca:E}),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione a raa"})}),r.jsx(Je,{children:b.map(E=>r.jsx(_e,{value:E,children:E},E))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"tipo_semen",children:"Tipo de Smen"}),r.jsxs(at,{value:j.tipo_semen,onValueChange:E=>w({...j,tipo_semen:E}),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione o tipo"})}),r.jsxs(Je,{children:[r.jsx(_e,{value:"CONVENCIONAL",children:"CONVENCIONAL"}),r.jsx(_e,{value:"SEXADO",children:"SEXADO"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"quantidade",children:"Quantidade"}),r.jsx(de,{id:"quantidade",type:"number",min:"0",value:j.quantidade,onChange:E=>w({...j,quantidade:E.target.value}),placeholder:"Quantidade a ser adicionada",required:!0})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(G,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:p,children:p?"Salvando...":"Salvar"}),r.jsx(G,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:p,children:"Cancelar"})]})]})]})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Lista de Doses de Smen"})}),r.jsxs(Ne,{children:[r.jsx("div",{className:"space-y-4 mb-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Filtrar por Touro"}),r.jsx(de,{placeholder:"Buscar por nome do touro...",value:C,onChange:E=>P(E.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Filtrar por Tipo"}),r.jsxs(at,{value:R||"all",onValueChange:E=>Q(E==="all"?"":E),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Todos os tipos"})}),r.jsxs(Je,{children:[r.jsx(_e,{value:"all",children:"Todos os tipos"}),r.jsx(_e,{value:"CONVENCIONAL",children:"CONVENCIONAL"}),r.jsx(_e,{value:"SEXADO",children:"SEXADO"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Filtrar por Raa"}),r.jsxs(at,{value:K||"all",onValueChange:E=>ce(E==="all"?"":E),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Todas as raas"})}),r.jsxs(Je,{children:[r.jsx(_e,{value:"all",children:"Todas as raas"}),b.map(E=>r.jsx(_e,{value:E,children:E},E))]})]})]})]})}),r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Nome (Touro)"}),r.jsx(Y,{children:"Cliente"}),r.jsx(Y,{children:"Raa"}),r.jsx(Y,{children:"Tipo"}),r.jsx(Y,{children:"Quantidade"}),r.jsx(Y,{className:"text-right",children:"Aes"})]})}),r.jsx(wt,{children:e.filter(E=>{const O=!C||E.nome.toLowerCase().includes(C.toLowerCase()),U=!R||E.tipo_semen===R,M=!K||E.raca===K;return O&&U&&M}).length===0?r.jsx(be,{children:r.jsx(I,{colSpan:6,className:"text-center text-slate-500",children:"Nenhuma dose cadastrada"})}):e.filter(E=>{const O=!C||E.nome.toLowerCase().includes(C.toLowerCase()),U=!R||E.tipo_semen===R,M=!K||E.raca===K;return O&&U&&M}).map(E=>r.jsxs(be,{children:[r.jsx(I,{className:"font-medium",children:E.nome}),r.jsx(I,{children:E.cliente_nome||"-"}),r.jsx(I,{children:E.raca||"-"}),r.jsx(I,{children:E.tipo_semen||"-"}),r.jsx(I,{children:E.quantidade??"-"}),r.jsx(I,{className:"text-right",children:r.jsxs("div",{className:"flex gap-1 justify-end",children:[r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>T(E),children:r.jsx(mc,{className:"w-4 h-4"})}),r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{y(E),h(!0)},children:r.jsx(Cu,{className:"w-4 h-4 text-red-600"})})]})})]},E.id))})]})]})]}),r.jsx(zt,{open:c,onOpenChange:d,children:r.jsxs(St,{className:"max-w-md",children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Editar Dose de Smen"}),r.jsx(Mt,{children:"Atualizar dados da dose"})]}),r.jsxs("form",{onSubmit:V,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"edit_nome",children:"Nome *"}),r.jsx(de,{id:"edit_nome",value:S.nome,onChange:E=>N({...S,nome:E.target.value}),placeholder:"Nome do touro/reprodutor",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"edit_cliente_id",children:"Cliente"}),r.jsxs(at,{value:S.cliente_id,onValueChange:E=>N({...S,cliente_id:E}),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione o cliente"})}),r.jsx(Je,{children:a.map(E=>r.jsx(_e,{value:E.id,children:E.nome},E.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"edit_raca",children:"Raa"}),r.jsxs(at,{value:S.raca,onValueChange:E=>N({...S,raca:E}),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione a raa"})}),r.jsx(Je,{children:b.map(E=>r.jsx(_e,{value:E,children:E},E))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"edit_quantidade",children:"Quantidade"}),r.jsx(de,{id:"edit_quantidade",type:"number",min:"0",value:S.quantidade,onChange:E=>N({...S,quantidade:E.target.value}),placeholder:"Quantidade",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"edit_tipo_semen",children:"Tipo de Smen"}),r.jsxs(at,{value:S.tipo_semen,onValueChange:E=>N({...S,tipo_semen:E}),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione o tipo"})}),r.jsxs(Je,{children:[r.jsx(_e,{value:"CONVENCIONAL",children:"CONVENCIONAL"}),r.jsx(_e,{value:"SEXADO",children:"SEXADO"})]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(G,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:p,children:p?"Salvando...":"Salvar Alteraes"}),r.jsx(G,{type:"button",variant:"outline",onClick:()=>d(!1),disabled:p,children:"Cancelar"})]})]})]})}),r.jsx(Xi,{open:f,onOpenChange:h,children:r.jsxs(Eo,{children:[r.jsxs(No,{children:[r.jsx(Ao,{children:"Confirmar Excluso"}),r.jsxs(To,{children:['Tem certeza que deseja excluir a dose "',x==null?void 0:x.nome,'"? Esta ao no pode ser desfeita.']})]}),r.jsxs(Co,{children:[r.jsx(Ro,{disabled:p,children:"Cancelar"}),r.jsx(Do,{onClick:F,disabled:p,className:"bg-red-600 hover:bg-red-700",children:p?"Excluindo...":"Excluir"})]})]})})]})}function my(){var Ct;const{id:e}=Ur(),t=Aa(),{toast:a}=Jt(),[s,n]=u.useState([]),[o,i]=u.useState([]),[l,c]=u.useState([]),[d,f]=u.useState([]),[h,p]=u.useState([]),[m,_]=u.useState([]),[g,x]=u.useState(!0),[y,v]=u.useState(!1),[b,j]=u.useState(!1),[w,S]=u.useState(null),[N,C]=u.useState([]),[P,R]=u.useState(!1),[Q,K]=u.useState({}),[ce,L]=u.useState(!1),[H,T]=u.useState([]),[V,F]=u.useState(!1),[E,O]=u.useState([]),[U,M]=u.useState([]),[X,$]=u.useState([]),[ne,le]=u.useState(""),[z,A]=u.useState([]),[J,ee]=u.useState(""),[Z,ae]=u.useState([]),[ie,pe]=u.useState(""),[ge,Le]=u.useState(""),[te,xe]=u.useState(""),[q,he]=u.useState(""),[Se,Ce]=u.useState([]),[we,k]=u.useState([]),[ue,Me]=u.useState([]),[Be,Pe]=u.useState([]),[ft,dt]=u.useState(!1),mt=W=>({[-1]:"Aspirao",0:"Fecundao",1:"Zigoto",2:"Clivagem",3:"Clivagem Avanada",4:"Compactao",5:"Mrula / Blastocisto Inicial",6:"Blastocisto",7:"Blastocisto Expandido",8:"Resgate / Sada Tardia"})[W]||`Dia ${W}`,Wt=W=>W===-1?"bg-blue-100 text-blue-800 border-blue-300":W===0?"bg-green-100 text-green-800 border-green-300":W>=1&&W<=3?"bg-yellow-100 text-yellow-800 border-yellow-300":W>=4&&W<=5||W===6?"bg-orange-100 text-orange-800 border-orange-300":W===7?"bg-purple-100 text-purple-800 border-purple-300":W===8?"bg-red-100 text-red-800 border-red-300":"bg-slate-100 text-slate-800 border-slate-300",[la,ha]=u.useState([]),[bt,ta]=u.useState({aspiracao_doadora_id:"",dose_semen_id:"",quantidade_fracionada:"1.0",quantidade_oocitos:"",observacoes:""}),[Gt,ms]=u.useState({pacote_aspiracao_id:"",observacoes:"",doses_selecionadas:[]}),[es,Hr]=u.useState(null);u.useEffect(()=>{e?Pa(e):$n()},[e]),u.useEffect(()=>{let W=[...s];if(ge&&(W=W.filter(ye=>{const Ae=we.find(qe=>qe.id===ye.pacote_aspiracao_id);return(Ae==null?void 0:Ae.fazenda_id)===ge})),q!==""){const ye=parseInt(q);W=W.filter(Ae=>Ae.dia_atual===ye)}Ce(W)},[s,ge,q,we]);const Un=Be.filter(W=>W.nome.toLowerCase().includes(te.toLowerCase()));u.useEffect(()=>{const W=ye=>{ye.target.closest(".fazenda-busca-container")||dt(!1)};if(ft)return document.addEventListener("mousedown",W),()=>{document.removeEventListener("mousedown",W)}},[ft]);const $n=async()=>{try{x(!0);const{data:W,error:ye}=await D.from("pacotes_aspiracao").select("*").eq("status","FINALIZADO").order("data_aspiracao",{ascending:!1});if(ye)throw ye;console.log("Pacotes FINALIZADOS encontrados:",(W==null?void 0:W.length)||0),W&&W.length>0&&console.log("IDs dos pacotes FINALIZADOS:",W.map(ve=>ve.id));const{data:Ae,error:qe}=await D.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(qe)throw qe;p(Ae||[]);const{data:Fe,error:At}=await D.from("clientes").select("id, nome").order("nome",{ascending:!0});At?console.error("Erro ao carregar clientes:",At):ha(Fe||[]);const De=new Map(Ae==null?void 0:Ae.map(ve=>[ve.id,ve.nome])),Ye=new Map,se=new Map,ze=(W==null?void 0:W.map(ve=>ve.id))||[];if(ze.length>0){const{data:ve,error:Tt}=await D.from("pacotes_aspiracao_fazendas_destino").select("pacote_aspiracao_id, fazenda_destino_id").in("pacote_aspiracao_id",ze);Tt?console.error("Erro ao carregar fazendas destino:",Tt):ve&&ve.forEach(qt=>{const ka=De.get(qt.fazenda_destino_id);if(ka){const na=Ye.get(qt.pacote_aspiracao_id)||[];na.push(ka),Ye.set(qt.pacote_aspiracao_id,na)}});const{data:Ie,error:Ta}=await D.from("aspiracoes_doadoras").select("pacote_aspiracao_id").in("pacote_aspiracao_id",ze);Ta?console.error("Erro ao carregar aspiraes:",Ta):Ie&&Ie.forEach(qt=>{qt.pacote_aspiracao_id&&se.set(qt.pacote_aspiracao_id,(se.get(qt.pacote_aspiracao_id)||0)+1)})}const{data:Te,error:ut}=await D.from("lotes_fiv").select("*").order("data_abertura",{ascending:!1});if(ut)throw ut;const et=new Set((Te==null?void 0:Te.map(ve=>ve.pacote_aspiracao_id).filter(ve=>!!ve))||[]),rt=(W||[]).filter(ve=>ve.usado_em_lote_fiv!==void 0?!ve.usado_em_lote_fiv:!et.has(ve.id));console.log("Pacotes j usados em lotes:",Array.from(et)),console.log("Total de lotes encontrados:",(Te==null?void 0:Te.length)||0),console.log("Pacotes disponveis aps filtrar usados:",rt.length);const ca=rt.map(ve=>({...ve,fazenda_nome:De.get(ve.fazenda_id),fazendas_destino_nomes:Ye.get(ve.id)||[],quantidade_doadoras:se.get(ve.id)||0}));console.log("Pacotes finais para exibir:",ca.length),i(ca);const $t=Te||[],ht=($t==null?void 0:$t.map(ve=>ve.id))||[],{data:wa,error:Ua}=await D.from("lote_fiv_acasalamentos").select("lote_fiv_id").in("lote_fiv_id",ht);if(Ua)throw Ua;const Ds=new Map;wa==null||wa.forEach(ve=>{Ds.set(ve.lote_fiv_id,(Ds.get(ve.lote_fiv_id)||0)+1)});const{data:$a,error:kt}=await D.from("lote_fiv_fazendas_destino").select("lote_fiv_id, fazenda_id").in("lote_fiv_id",ht);if(kt)throw kt;const Gs=new Map;$a==null||$a.forEach(ve=>{const Tt=De.get(ve.fazenda_id);if(Tt){const Ie=Gs.get(ve.lote_fiv_id)||[];Ie.push(Tt),Gs.set(ve.lote_fiv_id,Ie)}});const dr=new Map(ca.map(ve=>[ve.id,ve]));(W||[]).forEach(ve=>{dr.has(ve.id)||dr.set(ve.id,{...ve,fazenda_nome:De.get(ve.fazenda_id),fazendas_destino_nomes:Ye.get(ve.id)||[],quantidade_doadoras:se.get(ve.id)||0})});const Vr=($t||[]).map(ve=>{const Tt=dr.get(ve.pacote_aspiracao_id);let Ie=Zs((Tt==null?void 0:Tt.data_aspiracao)||null);if(!Ie){const ka=Zs(ve.data_abertura);if(ka){const[na,hr,gl]=ka.split("-").map(Number),Gn=new Date(na,hr-1,gl);Gn.setDate(Gn.getDate()-1);const h1=Gn.getFullYear(),m1=String(Gn.getMonth()+1).padStart(2,"0"),p1=String(Gn.getDate()).padStart(2,"0");Ie=`${h1}-${m1}-${p1}`}}const Ta=Nh(),qt=Ie?Math.max(0,Eh(Ta,Ie)):0;return{...ve,pacote_nome:Tt==null?void 0:Tt.fazenda_nome,pacote_data:Tt==null?void 0:Tt.data_aspiracao,fazendas_destino_nomes:Gs.get(ve.id)||[],quantidade_acasalamentos:Ds.get(ve.id)||0,dia_atual:qt}}),ts=Vr.filter(ve=>ve.status==="ABERTO"&&ve.dia_atual!==void 0&&ve.dia_atual>9);if(ts.length>0){const ve=ts.map(Tt=>Tt.id);D.from("lotes_fiv").update({status:"FECHADO"}).in("id",ve).then(({error:Tt})=>{Tt?console.error("Erro ao fechar lotes automaticamente:",Tt):console.log(`${ve.length} lote(s) fechado(s) automaticamente aps D8`)})}const pl=Vr.filter(ve=>ve.status==="FECHADO"?!1:ve.dia_atual!==void 0&&ve.dia_atual<=9);n(Vr),Ce(pl);const Rs=new Set(Vr.map(ve=>ve.pacote_aspiracao_id).filter(ve=>!!ve)),ur=[];(W||[]).forEach(ve=>{Rs.has(ve.id)&&ur.push({...ve,fazenda_nome:De.get(ve.fazenda_id),fazendas_destino_nomes:Ye.get(ve.id)||[],quantidade_doadoras:se.get(ve.id)||0})}),k(ur);const as=new Set,fr=new Map;ur.forEach(ve=>{if(ve.data_aspiracao){const Tt=ve.data_aspiracao.split("T")[0];as.add(Tt)}ve.fazenda_id&&ve.fazenda_nome&&fr.set(ve.fazenda_id,ve.fazenda_nome)}),Me(Array.from(as).sort().reverse()),Pe(Array.from(fr.entries()).map(([ve,Tt])=>({id:ve,nome:Tt})).sort((ve,Tt)=>ve.nome.localeCompare(Tt.nome)))}catch(W){a({title:"Erro ao carregar dados",description:W instanceof Error?W.message:"Erro desconhecido",variant:"destructive"})}finally{x(!1)}},Pa=async W=>{try{x(!0);const{data:ye,error:Ae}=await D.from("lotes_fiv").select("*").eq("id",W).single();if(Ae)throw Ae;const{data:qe,error:Fe}=await D.from("pacotes_aspiracao").select("*").eq("id",ye.pacote_aspiracao_id).single();if(Fe)throw Fe;pe(qe.data_aspiracao);const{data:At,error:De}=await D.from("fazendas").select("nome").eq("id",qe.fazenda_id).single();De?(console.error("Erro ao carregar fazenda origem:",De),le("")):le((At==null?void 0:At.nome)||"");const{data:Ye,error:se}=await D.from("pacotes_aspiracao_fazendas_destino").select("fazenda_destino_id").eq("pacote_aspiracao_id",qe.id);se&&console.error("Erro ao carregar fazendas destino:",se);let ze=[];if(!Ye||Ye.length===0?qe.fazenda_destino_id&&(ze=[qe.fazenda_destino_id]):ze=Ye.map(Ie=>Ie.fazenda_destino_id),T(ze),ze.length>0){const{data:Ie,error:Ta}=await D.from("fazendas").select("id, nome").in("id",ze);if(Ta)console.error("Erro ao carregar nomes das fazendas destino:",Ta),A([]);else if(A((Ie==null?void 0:Ie.map(qt=>qt.nome))||[]),Ie){const qt=[...h];Ie.forEach(ka=>{qt.find(na=>na.id===ka.id)||qt.push(ka)}),p(qt)}}else A([]);const{data:Te,error:ut}=await D.from("lote_fiv_acasalamentos").select("*").eq("lote_fiv_id",W).order("created_at",{ascending:!0});if(ut)throw ut;const et=(Te==null?void 0:Te.map(Ie=>Ie.aspiracao_doadora_id))||[],{data:rt,error:ca}=await D.from("aspiracoes_doadoras").select("id, doadora_id, viaveis").in("id",et);if(ca)throw ca;const $t=[...new Set((rt==null?void 0:rt.map(Ie=>Ie.doadora_id))||[])],{data:ht,error:wa}=await D.from("doadoras").select("id, nome, registro").in("id",$t);if(wa)throw wa;const Ua=[...new Set((Te==null?void 0:Te.map(Ie=>Ie.dose_semen_id))||[])],{data:Ds,error:$a}=await D.from("doses_semen").select("id, nome").in("id",Ua);if($a)throw $a;const kt=new Map(ht==null?void 0:ht.map(Ie=>[Ie.id,Ie])),Gs=new Map(Ds==null?void 0:Ds.map(Ie=>[Ie.id,Ie])),dr=new Map(rt==null?void 0:rt.map(Ie=>[Ie.id,Ie])),{data:Vn,error:Vr}=await D.from("embrioes").select("lote_fiv_acasalamento_id").eq("lote_fiv_id",W),ts=new Map;!Vr&&Vn&&Vn.forEach(Ie=>{Ie.lote_fiv_acasalamento_id&&ts.set(Ie.lote_fiv_acasalamento_id,(ts.get(Ie.lote_fiv_acasalamento_id)||0)+1)});const pl=(Te||[]).map(Ie=>{const Ta=dr.get(Ie.aspiracao_doadora_id),qt=Ta?kt.get(Ta.doadora_id):void 0,ka=Gs.get(Ie.dose_semen_id);return{...Ie,doadora_nome:(qt==null?void 0:qt.nome)||(qt==null?void 0:qt.registro),doadora_registro:qt==null?void 0:qt.registro,dose_nome:ka==null?void 0:ka.nome,viaveis:Ta==null?void 0:Ta.viaveis,total_embrioes_produzidos:ts.get(Ie.id)||0}});C(pl),S({...ye,pacote_nome:qe.fazenda_id,pacote_data:qe.data_aspiracao}),j(!0);const{data:Rs,error:ur}=await D.from("aspiracoes_doadoras").select("id, doadora_id, viaveis").eq("pacote_aspiracao_id",ye.pacote_aspiracao_id);if(ur)console.error("Erro ao carregar todas as aspiraes:",ur);else{const Ie=new Map;Te==null||Te.forEach(na=>{const hr=na.aspiracao_doadora_id,gl=na.quantidade_oocitos||0;Ie.set(hr,(Ie.get(hr)||0)+gl)});const qt=(Rs||[]).filter(na=>{const hr=na.viaveis??0,gl=Ie.get(na.id)||0,Gn=hr-gl;return hr>0&&Gn>0}).map(na=>({...na,oocitos_disponiveis:(na.viaveis??0)-(Ie.get(na.id)||0)}));M(qt);const ka=[...new Set((Rs==null?void 0:Rs.map(na=>na.doadora_id))||[])];if(ka.length>0){const{data:na,error:hr}=await D.from("doadoras").select("id, nome, registro").in("id",ka);!hr&&na&&_(na)}}const{data:as,error:fr}=await D.from("doses_semen").select("id, nome, cliente_id").order("nome",{ascending:!0});if(fr)console.error("Erro ao carregar doses disponveis:",fr),$([]);else try{const Ie=ye.doses_selecionadas;Ie&&Array.isArray(Ie)&&Ie.length>0?$((as||[]).filter(Ta=>Ie.includes(Ta.id))):$(as||[])}catch(Ie){console.warn("Campo doses_selecionadas no encontrado, mostrando todas as doses:",Ie),$(as||[])}const{data:ve,error:Tt}=await D.from("clientes").select("id, nome").order("nome",{ascending:!0});Tt?console.error("Erro ao carregar clientes:",Tt):ha(ve||[]),await Hn(W)}catch(ye){a({title:"Erro ao carregar detalhes do lote",description:ye instanceof Error?ye.message:"Erro desconhecido",variant:"destructive"})}finally{x(!1)}},Hn=async W=>{try{const{data:ye,error:Ae}=await D.from("pacotes_aspiracao").select("id, data_aspiracao, observacoes").eq("status","FINALIZADO").like("observacoes",`%Lote FIV ${W.slice(0,8)}%`).order("data_aspiracao",{ascending:!1});if(Ae){console.error("Erro ao carregar histrico de despachos:",Ae),O([]);return}if(!ye||ye.length===0){O([]);return}const{data:qe,error:Fe}=await D.from("embrioes").select("id, lote_fiv_acasalamento_id, created_at").eq("lote_fiv_id",W).order("created_at",{ascending:!1});if(Fe){console.error("Erro ao carregar embries:",Fe),O([]);return}const At=new Map;qe==null||qe.forEach(se=>{if(se.created_at){const ze=se.created_at.split("T")[0],Te=At.get(ze)||[];Te.push(se),At.set(ze,Te)}});const De=[...new Set((qe==null?void 0:qe.map(se=>se.lote_fiv_acasalamento_id).filter(Boolean))||[])];if(De.length>0){const{data:se,error:ze}=await D.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",De);if(ze)console.error("Erro ao carregar acasalamentos:",ze);else if(se){const Te=[...new Set(se.map(kt=>kt.aspiracao_doadora_id).filter(Boolean))],{data:ut}=await D.from("aspiracoes_doadoras").select("id, doadora_id").in("id",Te),et=[...new Set((ut==null?void 0:ut.map(kt=>kt.doadora_id).filter(Boolean))||[])],{data:rt}=await D.from("doadoras").select("id, registro, nome").in("id",et),ca=[...new Set(se.map(kt=>kt.dose_semen_id).filter(Boolean))],{data:$t}=await D.from("doses_semen").select("id, nome").in("id",ca),ht=new Map((ut==null?void 0:ut.map(kt=>[kt.id,kt]))||[]),wa=new Map((rt==null?void 0:rt.map(kt=>[kt.id,kt]))||[]),Ua=new Map(($t==null?void 0:$t.map(kt=>[kt.id,kt]))||[]),Ds=new Map(se.map(kt=>[kt.id,kt])),$a=ye.map(kt=>{const Gs=kt.data_aspiracao.split("T")[0],dr=At.get(Gs)||[],Vn=new Map;dr.forEach(ts=>{ts.lote_fiv_acasalamento_id&&Vn.set(ts.lote_fiv_acasalamento_id,(Vn.get(ts.lote_fiv_acasalamento_id)||0)+1)});const Vr=Array.from(Vn.entries()).map(([ts,pl])=>{const Rs=Ds.get(ts),ur=Rs?ht.get(Rs.aspiracao_doadora_id):void 0,as=ur?wa.get(ur.doadora_id):void 0,fr=Rs?Ua.get(Rs.dose_semen_id):void 0;return{acasalamento_id:ts,quantidade:pl,doadora:(as==null?void 0:as.registro)||(as==null?void 0:as.nome)||"-",dose:(fr==null?void 0:fr.nome)||"-"}});return{id:kt.id,data_despacho:Gs,acasalamentos:Vr,pacote_id:kt.id}});O($a);return}}const Ye=ye.map(se=>{const ze=se.data_aspiracao.split("T")[0];return{id:se.id,data_despacho:ze,acasalamentos:[],pacote_id:se.id}});O(Ye)}catch(ye){console.error("Erro ao carregar histrico:",ye),O([])}},Ue=()=>{F(!0)},me=async()=>{var W;if(w)try{R(!0);const ye=o.find(ht=>ht.id===w.pacote_aspiracao_id);let Ae=Zs((ye==null?void 0:ye.data_aspiracao)||null);if(!Ae){const ht=Zs(w.data_abertura);if(ht){const[wa,Ua,Ds]=ht.split("-").map(Number),$a=new Date(wa,Ua-1,Ds);$a.setDate($a.getDate()-1);const kt=$a.getFullYear(),Gs=String($a.getMonth()+1).padStart(2,"0"),dr=String($a.getDate()).padStart(2,"0");Ae=`${kt}-${Gs}-${dr}`}}const qe=Nh();if((Ae?Math.max(0,Eh(qe,Ae)):0)>9){a({title:"Prazo expirado",description:"D8  o ltimo dia. No  possvel criar embries aps o D8. O lote ser fechado e no aparecer mais na lista.",variant:"destructive"}),R(!1);return}const At=N.filter(ht=>{var Ua;return parseInt(Q[ht.id]||((Ua=ht.quantidade_embrioes)==null?void 0:Ua.toString())||"0")>0});if(At.length===0){a({title:"Nenhum embrio para despachar",description:"Preencha a quantidade de embries em pelo menos um acasalamento antes de despachar.",variant:"destructive"});return}const{data:De}=await D.from("pacotes_aspiracao").select("fazenda_id").eq("id",w.pacote_aspiracao_id).single(),Ye=`${ne} - ${z.join(", ")}`,se=new Date().toISOString().split("T")[0],ze=H.length>0?H[0]:null;if(!ze){a({title:"Erro ao despachar",description:" necessrio ter pelo menos uma fazenda destino configurada no lote.",variant:"destructive"});return}const{data:Te,error:ut}=await D.from("pacotes_aspiracao").insert([{data_aspiracao:se,fazenda_id:(De==null?void 0:De.fazenda_id)||null,fazenda_destino_id:ze,status:"FINALIZADO",observacoes:`Despachado do Lote FIV ${w.id.slice(0,8)}... em ${Bt(se)}. Pacote: ${Ye}`}]).select().single();if(ut)throw console.error("Erro ao criar pacote:",ut),ut;if(H.length>0){const{error:ht}=await D.from("pacotes_aspiracao_fazendas_destino").insert(H.map(wa=>({pacote_aspiracao_id:Te.id,fazenda_destino_id:wa})));ht&&console.error("Erro ao associar fazendas destino:",ht)}const et=[],rt=[];for(const ht of At){const wa=parseInt(Q[ht.id]||((W=ht.quantidade_embrioes)==null?void 0:W.toString())||"0");if(wa>0){for(let Ua=0;Ua<wa;Ua++)et.push({lote_fiv_id:w.id,lote_fiv_acasalamento_id:ht.id,status_atual:"FRESCO"});rt.push({acasalamento_id:ht.id,quantidade:wa,doadora:ht.doadora_registro||ht.doadora_nome,dose:ht.dose_nome})}}if(et.length>0){const{error:ht}=await D.from("embrioes").insert(et);if(ht)throw console.error("Erro detalhado ao criar embries:",ht),ht}const ca={id:Te.id,data_despacho:se,acasalamentos:rt,pacote_id:Te.id};O([ca,...E]);const $t=At.map(ht=>D.from("lote_fiv_acasalamentos").update({quantidade_embrioes:null}).eq("id",ht.id));await Promise.all($t),K({}),a({title:"Embries despachados",description:`${et.length} embrio(es) foram despachados para o pacote "${Ye}".`}),Pa(w.id)}catch(ye){a({title:"Erro ao despachar embries",description:ye instanceof Error?ye.message:"Erro desconhecido",variant:"destructive"})}finally{R(!1)}},Ge=async W=>{ms({...Gt,pacote_aspiracao_id:W});const ye=o.find(Ae=>Ae.id===W);if(Hr(ye||null),ye){const{data:Ae,error:qe}=await D.from("aspiracoes_doadoras").select("id, doadora_id, viaveis").eq("pacote_aspiracao_id",W);if(qe){console.error("Erro ao carregar aspiraes:",qe);return}c(Ae||[]);const Fe=[...new Set((Ae==null?void 0:Ae.map(Ye=>Ye.doadora_id))||[])];if(Fe.length>0){const{data:Ye,error:se}=await D.from("doadoras").select("id, nome, registro").in("id",Fe);if(se){console.error("Erro ao carregar doadoras:",se);return}_(Ye||[])}const{data:At,error:De}=await D.from("doses_semen").select("id, nome, cliente_id").order("nome",{ascending:!0});if(De){console.error("Erro ao carregar doses:",De);return}f(At||[])}},Ft=async W=>{if(W.preventDefault(),!w)return;if(!bt.aspiracao_doadora_id){a({title:"Erro de validao",description:"Doadora  obrigatria",variant:"destructive"});return}if(!bt.dose_semen_id){a({title:"Erro de validao",description:"Selecione uma dose de smen",variant:"destructive"});return}const ye=parseFloat(bt.quantidade_fracionada)||0;if(ye<=0){a({title:"Erro de validao",description:"Quantidade fracionada deve ser maior que zero",variant:"destructive"});return}try{R(!0);const Ae=U.find(Ye=>Ye.id===bt.aspiracao_doadora_id),qe=(Ae==null?void 0:Ae.oocitos_disponiveis)??0,Fe=parseInt(bt.quantidade_oocitos)||0;if(Fe>qe){a({title:"Erro de validao",description:`A quantidade de ocitos (${Fe}) no pode ser maior que os ocitos disponveis (${qe})`,variant:"destructive"});return}const At={lote_fiv_id:w.id,aspiracao_doadora_id:bt.aspiracao_doadora_id,dose_semen_id:bt.dose_semen_id,quantidade_fracionada:ye,quantidade_oocitos:Fe>0?Fe:null,observacoes:bt.observacoes||null},{error:De}=await D.from("lote_fiv_acasalamentos").insert([At]);if(De)throw De;a({title:"Acasalamento adicionado",description:"Acasalamento adicionado com sucesso"}),L(!1),ta({aspiracao_doadora_id:"",dose_semen_id:"",quantidade_fracionada:"1.0",quantidade_oocitos:"",observacoes:""}),await Pa(w.id)}catch(Ae){const qe=Ae instanceof Error?Ae.message:"Erro desconhecido";a({title:"Erro ao adicionar acasalamento",description:qe.includes("RLS")||qe.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":qe,variant:"destructive"})}finally{R(!1)}},We=async W=>{var ye,Ae;if(W.preventDefault(),!Gt.pacote_aspiracao_id){a({title:"Erro de validao",description:"Pacote de aspirao  obrigatrio",variant:"destructive"});return}if(!es){a({title:"Erro de validao",description:"Pacote selecionado no encontrado",variant:"destructive"});return}try{R(!0);const{data:qe,error:Fe}=await D.from("pacotes_aspiracao").select("id, status").eq("id",Gt.pacote_aspiracao_id).single();if(Fe||!qe){a({title:"Erro de validao",description:"Pacote de aspirao no encontrado ou invlido",variant:"destructive"});return}if(qe.status!=="FINALIZADO"){a({title:"Erro de validao",description:"Apenas pacotes FINALIZADOS podem ser usados para criar lotes FIV",variant:"destructive"});return}const At=new Date(es.data_aspiracao);At.setDate(At.getDate()+1);const De=At.toISOString().split("T")[0];console.log("Dados que sero enviados:",{pacote_aspiracao_id:Gt.pacote_aspiracao_id,data_abertura:De,data_fecundacao:De,status:"ABERTO"});const Ye={pacote_aspiracao_id:Gt.pacote_aspiracao_id,data_abertura:De,data_fecundacao:De,status:"ABERTO",observacoes:Gt.observacoes||null};if(Gt.doses_selecionadas&&Gt.doses_selecionadas.length>0)try{Ye.doses_selecionadas=Gt.doses_selecionadas}catch(et){console.warn("Campo doses_selecionadas no disponvel no banco:",et)}let se;const{data:ze,error:Te}=await D.from("lotes_fiv").insert([Ye]).select().single();if(Te)if((ye=Te.message)!=null&&ye.includes("doses_selecionadas")||Te.code==="42703"){console.warn("Campo doses_selecionadas no existe no banco, criando lote sem ele"),delete Ye.doses_selecionadas;const{data:et,error:rt}=await D.from("lotes_fiv").insert([Ye]).select().single();if(rt)throw console.error("Erro detalhado ao criar lote:",{message:rt.message,details:rt.details,hint:rt.hint,code:rt.code}),rt;se=et}else throw console.error("Erro detalhado ao criar lote:",{message:Te.message,details:Te.details,hint:Te.hint,code:Te.code}),Te;else se=ze;const ut=(Ae=es.fazendas_destino_nomes)==null?void 0:Ae.map(et=>{const rt=h.find(ca=>ca.nome===et);return rt==null?void 0:rt.id}).filter(et=>!!et);if(ut&&ut.length>0){const{error:et}=await D.from("lote_fiv_fazendas_destino").insert(ut.map(rt=>({lote_fiv_id:se.id,fazenda_id:rt})));if(et)throw et}try{await D.from("pacotes_aspiracao").update({usado_em_lote_fiv:!0}).eq("id",Gt.pacote_aspiracao_id)}catch(et){console.warn("Campo usado_em_lote_fiv no existe no banco:",et)}a({title:"Lote FIV criado",description:"Lote FIV criado com sucesso. Agora voc pode adicionar acasalamentos."}),v(!1),ms({pacote_aspiracao_id:"",observacoes:"",doses_selecionadas:[]}),Hr(null),c([]),_([]),t(`/lotes-fiv/${se.id}`)}catch(qe){const Fe=qe instanceof Error?qe.message:"Erro desconhecido";a({title:"Erro ao criar lote",description:Fe.includes("RLS")||Fe.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":Fe,variant:"destructive"})}finally{R(!1)}};if(g&&!w)return r.jsx(Pt,{});if(w&&b){const W=se=>se===0?-1:se>9?8:se-1,ye=se=>({[-1]:"Aspirao",0:"Fecundao",1:"Zigoto",2:"2 Clulas",3:"4 Clulas",4:"8 Clulas",5:"Mrula",6:"Blastocisto",7:"Blastocisto Expandido",8:"Blastocisto Expandido"})[se]||`D${se}`;let Ae=Zs(ie||w.pacote_data||null);if(!Ae){const se=Zs(w.data_abertura);if(se){const[ze,Te,ut]=se.split("-").map(Number),et=new Date(ze,Te-1,ut);et.setDate(et.getDate()-1);const rt=et.getFullYear(),ca=String(et.getMonth()+1).padStart(2,"0"),$t=String(et.getDate()).padStart(2,"0");Ae=`${rt}-${ca}-${$t}`}}if(!Ae)return r.jsx("div",{children:"Erro: Data de aspirao no encontrada"});const qe=Nh(),Fe=Math.max(0,Eh(qe,Ae)),At=kD(Ae,8),De=c0(At),Ye=LD(At);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{j(!1),S(null),t("/lotes-fiv")},children:r.jsx(Za,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Detalhes do Lote FIV"}),r.jsxs("div",{className:"text-slate-600 mt-1 flex items-center gap-2",children:[r.jsxs("span",{children:["Data de fecundao (D0): ",Bt(w.data_abertura)," |",Ae&&` Data aspirao (D-1): ${c0(Ae)} |`,(()=>{const se=W(Fe);return se===-1?` D-1 - ${ye(se)} |`:` D${se} - ${ye(se)} |`})()," ","Status:"]}),r.jsx(Xe,{variant:w.status==="FECHADO"?"default":"secondary",children:w.status})]})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Informaes do Lote"})}),r.jsxs(Ne,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(B,{children:"Dia Atual"}),r.jsx("p",{className:"text-2xl font-bold",children:(()=>{const se=W(Fe);return se===-1?r.jsxs(r.Fragment,{children:["D-1 ",r.jsxs("span",{className:"text-lg font-normal text-slate-600",children:["- ",ye(se)]})]}):r.jsxs(r.Fragment,{children:["D",se," ",r.jsxs("span",{className:"text-lg font-normal text-slate-600",children:["- ",ye(se)]})]})})()})]}),r.jsxs("div",{children:[r.jsx(B,{children:"Data da TE"}),Fe<7?r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:De}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:Ye})]}):Fe===7?r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:De}),r.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[Ye," - Perodo de classificao (hoje)"]})]}):Fe===8?r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:De}),r.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[Ye," - Perodo de classificao (D7 foi ontem, hoje  D8)"]})]}):r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:De}),r.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[Ye," - Prazo encerrado"]})]})]})]}),r.jsxs("div",{className:"border-t pt-4 space-y-3",children:[r.jsxs("div",{children:[r.jsx(B,{className:"text-slate-500",children:"Fazenda Origem da Aspirao"}),r.jsx("p",{className:"font-medium",children:ne||"-"})]}),r.jsxs("div",{children:[r.jsx(B,{className:"text-slate-500",children:"Fazendas Destino"}),z.length>0?r.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:z.map((se,ze)=>r.jsx(Xe,{variant:"outline",className:"font-medium",children:se},ze))}):r.jsx("p",{className:"font-medium text-slate-400",children:"-"})]})]}),w.status==="ABERTO"&&Fe===7&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-blue-800 font-medium",children:[" Este lote est no D6 (",ye(6),"). Voc pode preencher a quantidade de embries (prvia) e gerar um relatrio."]}),r.jsxs(G,{variant:"outline",size:"sm",onClick:Ue,children:[r.jsx(KT,{className:"w-4 h-4 mr-2"}),"Gerar Relatrio de Prvia"]})]})}),(w.status==="ABERTO"&&(Fe===8||Fe===9)||w.status==="FECHADO"&&Fe===9)&&r.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-orange-800 font-medium",children:[" Este lote est no ",Fe===8?"D7":"D8"," (",ye(Fe===8?7:8),"). ",Fe===8?"Informe a quantidade de embries para cada acasalamento e despache os embries.":"Perodo de emergncia (D8). Voc pode adicionar novos acasalamentos e despachar os embries imediatamente."]}),r.jsxs(G,{variant:"default",size:"sm",onClick:me,disabled:P,className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Ag,{className:"w-4 h-4 mr-2"}),P?"Despachando...":"Despachar Todos os Embries"]})]})}),w.status==="ABERTO"&&Fe>9&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-red-800 font-medium",children:" Este lote passou do D8. D8  o ltimo dia. Acima de D8 no existe mais lote FIV. O lote ser fechado automaticamente e no aparecer mais na lista."})})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Acasalamentos"})}),r.jsxs(Ne,{children:[N.length===0?r.jsx("div",{className:"text-center text-slate-500 py-8",children:"Nenhum acasalamento cadastrado"}):(()=>{const se=new Map;N.forEach(Te=>{const ut=Te.doadora_nome||Te.doadora_registro||"Desconhecida";se.has(ut)||se.set(ut,[]),se.get(ut).push(Te)});const ze=Array.from(se.entries());return r.jsx("div",{className:"space-y-6",children:ze.map(([Te,ut])=>{const et=ut[0],rt=et.viaveis??0,ca=et.doadora_nome||et.doadora_registro||"Doadora desconhecida";return r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"bg-green-100 border border-green-200 rounded-md px-4 py-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-semibold text-slate-900",children:ca}),r.jsxs("span",{className:"text-sm text-slate-700",children:["Total de ocitos: ",rt]})]})}),r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"DOSE DE SMEN (TOURO)"}),r.jsx(Y,{className:"text-center",children:"QTD. FRACIONADA (DOSES)"}),r.jsx(Y,{className:"text-center",children:"OCITOS USADOS"}),(w.status==="ABERTO"&&(Fe===7||Fe===8||Fe===9)||w.status==="FECHADO")&&r.jsxs(r.Fragment,{children:[r.jsx(Y,{className:"text-center",children:"QTD. EMBRIES"}),r.jsx(Y,{className:"text-center",children:"TOTAL PRODUZIDOS"})]})]})}),r.jsx(wt,{children:ut.map($t=>r.jsxs(be,{children:[r.jsx(I,{children:$t.dose_nome||"-"}),r.jsx(I,{className:"text-center",children:$t.quantidade_fracionada??"-"}),r.jsx(I,{className:"text-center",children:$t.quantidade_oocitos!==void 0&&$t.quantidade_oocitos!==null?`${$t.quantidade_oocitos} de ${rt}`:"-"}),(w.status==="ABERTO"&&(Fe===7||Fe===8||Fe===9)||w.status==="FECHADO")&&r.jsxs(r.Fragment,{children:[r.jsx(I,{className:"text-center",children:w.status==="ABERTO"&&(Fe===7||Fe===8||Fe===9)||w.status==="FECHADO"&&Fe===9?r.jsx("div",{className:"flex justify-center",children:r.jsx(de,{type:"number",min:"0",value:Q[$t.id]??$t.quantidade_embrioes??"",onChange:ht=>K({...Q,[$t.id]:ht.target.value}),className:"w-20 text-center",placeholder:"0"})}):r.jsx("span",{className:"font-medium",children:$t.quantidade_embrioes??"-"})}),r.jsx(I,{className:"text-center font-semibold text-green-600",children:$t.total_embrioes_produzidos??0})]})]},$t.id))})]})]},Te)})})})(),(w.status==="ABERTO"&&Fe<=9||w.status==="FECHADO"&&Fe===9)&&U.length>0&&r.jsx("div",{className:"mt-4 flex justify-end",children:r.jsxs(zt,{open:ce,onOpenChange:se=>{L(se),se||(ta({aspiracao_doadora_id:"",dose_semen_id:"",quantidade_fracionada:"1.0",quantidade_oocitos:"",observacoes:""}),ee(""))},children:[r.jsx(As,{asChild:!0,children:r.jsxs(G,{children:[r.jsx(Ja,{className:"w-4 h-4 mr-2"}),"Adicionar Acasalamento"]})}),r.jsxs(St,{children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Adicionar Acasalamento"}),r.jsx(Mt,{children:"Selecione uma doadora do pacote e uma dose de smen. Voc pode adicionar mltiplos acasalamentos para a mesma doadora."})]}),r.jsxs("form",{onSubmit:Ft,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"aspiracao_doadora_id",children:"Doadora *"}),r.jsxs(at,{value:bt.aspiracao_doadora_id,onValueChange:async se=>{if(U.find(ze=>ze.id===se),ta({...bt,aspiracao_doadora_id:se}),se)try{const{data:ze,error:Te}=await D.from("aspiracoes_doadoras").select("recomendacao_touro").eq("id",se).single();Te?(console.error("Erro ao carregar recomendao:",Te),ee("")):ee((ze==null?void 0:ze.recomendacao_touro)||"")}catch(ze){console.error("Erro ao carregar recomendao:",ze),ee("")}else ee("")},children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione uma doadora"})}),r.jsx(Je,{children:U.map(se=>{const ze=m.find(ca=>ca.id===se.doadora_id),Te=se.oocitos_disponiveis??0,ut=se.viaveis??0,et=ut-Te,rt=ze?ze.nome&&ze.registro?`${ze.nome} (${ze.registro})`:ze.nome||ze.registro||`Doadora ${se.doadora_id}`:`Doadora ${se.doadora_id}`;return r.jsx(_e,{value:se.id,children:`${rt} - ${Te} ocitos disponveis (${ut} total, ${et} usados)`},se.id)})})]}),bt.aspiracao_doadora_id&&(()=>{const se=U.find(et=>et.id===bt.aspiracao_doadora_id),ze=(se==null?void 0:se.oocitos_disponiveis)??0,Te=(se==null?void 0:se.viaveis)??0,ut=Te-ze;return r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-sm text-slate-600",children:[r.jsx("strong",{children:"Ocitos disponveis:"})," ",ze," (Total: ",Te,", J usados: ",ut,")"]}),J&&r.jsxs("div",{className:"mt-2 bg-amber-50 border border-amber-200 rounded-lg p-3",children:[r.jsx("p",{className:"text-sm font-medium text-amber-800 mb-1",children:" Recomendao de Acasalamento:"}),r.jsx("p",{className:"text-sm text-amber-700",children:J})]})]})})()]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"dose_semen_id",children:"Dose de Smen *"}),r.jsxs(at,{value:bt.dose_semen_id,onValueChange:se=>{ta({...bt,dose_semen_id:se})},children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione uma dose de smen"})}),r.jsx(Je,{children:X.map(se=>{const ze=la.find(Te=>Te.id===se.cliente_id);return r.jsxs(_e,{value:se.id,children:[se.nome," ",ze?`(${ze.nome})`:""]},se.id)})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"quantidade_fracionada",children:"Quantidade Fracionada *"}),r.jsx(de,{id:"quantidade_fracionada",type:"number",step:"0.1",min:"0.1",value:bt.quantidade_fracionada,onChange:se=>{ta({...bt,quantidade_fracionada:se.target.value})},placeholder:"1.0",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"quantidade_oocitos",children:"Ocitos"}),r.jsx(de,{id:"quantidade_oocitos",type:"number",min:"0",value:bt.quantidade_oocitos,onChange:se=>{ta({...bt,quantidade_oocitos:se.target.value})},placeholder:"0"})]})]}),bt.aspiracao_doadora_id&&(()=>{const se=U.find(ca=>ca.id===bt.aspiracao_doadora_id),ze=(se==null?void 0:se.oocitos_disponiveis)??0,Te=(se==null?void 0:se.viaveis)??0,ut=Te-ze,et=parseInt(bt.quantidade_oocitos)||0,rt=ze-et;return r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Total de ocitos viveis:"})," ",Te]}),r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Ocitos j usados em acasalamentos anteriores:"})," ",ut]}),r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Ocitos disponveis:"})," ",ze]}),r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Ocitos sendo distribudos agora:"})," ",et]}),r.jsxs("p",{className:`text-sm font-medium ${rt<0?"text-red-600":rt===0?"text-green-600":"text-blue-800"}`,children:[r.jsx("strong",{children:"Ocitos restantes aps esta distribuio:"})," ",rt]})]})})(),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(ja,{id:"observacoes",value:bt.observacoes,onChange:se=>ta({...bt,observacoes:se.target.value}),placeholder:"Observaes sobre este(s) acasalamento(s)",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(G,{type:"button",variant:"outline",onClick:()=>{L(!1),ta({aspiracao_doadora_id:"",dose_semen_id:"",quantidade_fracionada:"1.0",quantidade_oocitos:"",observacoes:""})},children:"Cancelar"}),r.jsx(G,{type:"submit",disabled:P,children:P?"Adicionando...":"Adicionar"})]})]})]})]})}),E.length>0&&r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Histrico de Despachos"}),r.jsx("div",{className:"space-y-4",children:E.map(se=>r.jsxs(Ee,{className:"border-l-4 border-green-500",children:[r.jsx(Re,{children:r.jsxs(Oe,{className:"text-base",children:["Despacho em ",Bt(se.data_despacho)]})}),r.jsx(Ne,{children:r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Doadora"}),r.jsx(Y,{children:"Dose"}),r.jsx(Y,{className:"text-center",children:"Quantidade de Embries"})]})}),r.jsx(wt,{children:se.acasalamentos.length===0?r.jsx(be,{children:r.jsx(I,{colSpan:3,className:"text-center text-slate-500",children:"Nenhum acasalamento registrado"})}):se.acasalamentos.map((ze,Te)=>r.jsxs(be,{children:[r.jsx(I,{children:ze.doadora||"-"}),r.jsx(I,{children:ze.dose||"-"}),r.jsx(I,{className:"text-center font-semibold",children:ze.quantidade})]},Te))})]})})]},se.id))})]})]})]}),r.jsx(zt,{open:V,onOpenChange:F,children:r.jsxs(St,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Relatrio de Prvia de Produo - D6"}),r.jsx(Mt,{children:"Relatrio somente leitura com as quantidades de embries preenchidas (prvia)"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Lote FIV:"})," ",w.id.slice(0,8),"..."]}),r.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[r.jsx("strong",{children:"Data da Aspirao:"})," ",Bt(ie)]}),r.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[r.jsx("strong",{children:"Fazenda Origem:"})," ",ne]}),r.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[r.jsx("strong",{children:"Fazendas Destino:"})," ",z.join(", ")]})]}),r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Doadora"}),r.jsx(Y,{children:"Dose de Smen"}),r.jsx(Y,{children:"Quantidade Fracionada"}),r.jsx(Y,{children:"Ocitos Viveis"}),r.jsx(Y,{children:"Ocitos Usados"}),r.jsx(Y,{children:"Quantidade de Embries (Prvia)"})]})}),r.jsx(wt,{children:N.length===0?r.jsx(be,{children:r.jsx(I,{colSpan:6,className:"text-center text-slate-500",children:"Nenhum acasalamento cadastrado"})}):N.map(se=>{var Te;const ze=parseInt(Q[se.id]||((Te=se.quantidade_embrioes)==null?void 0:Te.toString())||"0");return r.jsxs(be,{children:[r.jsx(I,{className:"font-medium",children:se.doadora_nome||se.doadora_registro||"Doadora desconhecida"}),r.jsx(I,{children:se.dose_nome}),r.jsx(I,{children:se.quantidade_fracionada}),r.jsx(I,{children:se.viaveis??"-"}),r.jsx(I,{children:se.quantidade_oocitos??"-"}),r.jsx(I,{className:"font-semibold",children:ze})]},se.id)})})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[r.jsx(G,{variant:"outline",onClick:()=>F(!1),children:"Fechar"}),r.jsx(G,{onClick:()=>{window.print()},children:"Imprimir"})]})]})]})})]})}return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Lotes FIV"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar lotes de fecundao in vitro"})]}),r.jsxs(zt,{open:y,onOpenChange:v,children:[r.jsx(As,{asChild:!0,children:r.jsxs(G,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Ja,{className:"w-4 h-4 mr-2"}),"Novo Lote"]})}),r.jsxs(St,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Criar Novo Lote FIV"}),r.jsx(Mt,{children:"Selecione um pacote de aspirao FINALIZADO para criar o lote"})]}),r.jsxs("form",{onSubmit:We,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"pacote_aspiracao_id",children:"Pacote de Aspirao *"}),o.length===0?r.jsxs("div",{className:"border rounded-lg p-4 bg-yellow-50 border-yellow-200",children:[r.jsx("p",{className:"text-sm text-yellow-800 font-medium mb-2",children:"Nenhum pacote disponvel"}),r.jsxs("p",{className:"text-sm text-yellow-700",children:["Verifique se o pacote de aspirao est com status ",r.jsx("strong",{children:"FINALIZADO"})," e ainda no foi usado para criar um lote FIV."]})]}):r.jsxs(at,{value:Gt.pacote_aspiracao_id,onValueChange:Ge,children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione o pacote"})}),r.jsx(Je,{children:o.map(W=>r.jsxs(_e,{value:W.id,children:[Bt(W.data_aspiracao)," - ",W.fazenda_nome," (",W.quantidade_doadoras," doadoras)"]},W.id))})]}),es&&r.jsxs("div",{className:"text-sm text-slate-600 space-y-1 mt-2 p-3 bg-slate-50 rounded-lg",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Data do Pacote:"})," ",Bt(es.data_aspiracao)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Data de Fecundao do Lote:"})," ",(()=>{const W=new Date(es.data_aspiracao);return W.setDate(W.getDate()+1),Bt(W.toISOString().split("T")[0])})()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Fazendas Destino:"})," ",((Ct=es.fazendas_destino_nomes)==null?void 0:Ct.join(", "))||"Nenhuma"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Quantidade de Doadoras:"})," ",es.quantidade_doadoras||0]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{children:"Doses de Smen Disponveis no Lote *"}),r.jsx("div",{className:"border rounded-lg p-4 max-h-60 overflow-y-auto",children:d.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"Carregando doses..."}):r.jsx("div",{className:"space-y-2",children:d.map(W=>{const ye=la.find(qe=>qe.id===W.cliente_id),Ae=Gt.doses_selecionadas.includes(W.id);return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:`dose-${W.id}`,checked:Ae,onChange:qe=>{qe.target.checked?ms({...Gt,doses_selecionadas:[...Gt.doses_selecionadas,W.id]}):ms({...Gt,doses_selecionadas:Gt.doses_selecionadas.filter(Fe=>Fe!==W.id)})},className:"rounded"}),r.jsxs("label",{htmlFor:`dose-${W.id}`,className:"text-sm cursor-pointer flex-1",children:[r.jsx("span",{className:"font-medium",children:W.nome}),ye&&r.jsxs("span",{className:"text-slate-500 ml-2",children:["(",ye.nome,")"]})]})]},W.id)})})}),r.jsx("p",{className:"text-xs text-slate-500",children:"Selecione as doses de smen que estaro disponveis para uso neste lote"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(ja,{id:"observacoes",value:Gt.observacoes,onChange:W=>ms({...Gt,observacoes:W.target.value}),placeholder:"Observaes sobre o lote",rows:3})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(G,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:P,children:P?"Criando...":"Criar Lote"}),r.jsx(G,{type:"button",variant:"outline",onClick:()=>{v(!1),ms({pacote_aspiracao_id:"",observacoes:"",doses_selecionadas:[]}),Hr(null),c([]),_([])},disabled:P,children:"Cancelar"})]})]})]})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Lista de Lotes FIV"})}),r.jsxs(Ne,{children:[r.jsxs("div",{className:"flex gap-4 mb-6 flex-wrap",children:[r.jsxs("div",{className:"flex-1 min-w-[250px] relative fazenda-busca-container",children:[r.jsx(B,{htmlFor:"filtro-fazenda-aspirao",children:"Filtrar por Fazenda da Aspirao"}),r.jsxs("div",{className:"relative",children:[r.jsx(de,{id:"filtro-fazenda-aspirao",placeholder:"Digite para buscar fazenda...",value:te,onChange:W=>{xe(W.target.value),dt(!0),W.target.value||Le("")},onFocus:()=>dt(!0)}),ge&&r.jsx(G,{variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-7 w-7 p-0",onClick:()=>{Le(""),xe(""),dt(!1)},children:r.jsx(Cs,{className:"h-4 w-4"})}),ft&&Un.length>0&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg max-h-60 overflow-auto",children:Un.map(W=>r.jsx("div",{className:"px-4 py-2 hover:bg-slate-100 cursor-pointer",onClick:()=>{Le(W.id),xe(W.nome),dt(!1)},children:W.nome},W.id))}),ft&&te&&Un.length===0&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg p-4 text-sm text-slate-500",children:"Nenhuma fazenda encontrada"})]})]}),r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx(B,{htmlFor:"filtro-dia-cultivo",children:"Filtrar por Dia do Cultivo"}),r.jsxs(at,{value:q||void 0,onValueChange:W=>he(W||""),children:[r.jsx(Ze,{id:"filtro-dia-cultivo",children:r.jsx(st,{placeholder:"Todos os dias"})}),r.jsx(Je,{children:[0,1,2,3,4,5,6,7,8].map(W=>r.jsxs(_e,{value:W.toString(),children:["D",W," - ",mt(W)]},W))})]})]}),(ge||q)&&r.jsx("div",{className:"flex items-end",children:r.jsx(G,{variant:"outline",onClick:()=>{Le(""),xe(""),he(""),dt(!1)},children:"Limpar Filtros"})})]}),r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Aspirao"}),r.jsx(Y,{children:"Fazendas Destino"}),r.jsx(Y,{children:"Dia do Cultivo"}),r.jsx(Y,{children:"Acasalamentos"}),r.jsx(Y,{className:"text-right",children:"Aes"})]})}),r.jsx(wt,{children:Se.length===0?r.jsx(be,{children:r.jsx(I,{colSpan:5,className:"text-center text-slate-500",children:s.length===0?"Nenhum lote cadastrado":"Nenhum lote encontrado com os filtros selecionados"})}):Se.map(W=>r.jsxs(be,{children:[r.jsxs(I,{children:[W.pacote_data&&Bt(W.pacote_data)," - ",W.pacote_nome]}),r.jsx(I,{children:r.jsx("div",{className:"flex flex-wrap gap-1",children:W.fazendas_destino_nomes&&W.fazendas_destino_nomes.length>0?W.fazendas_destino_nomes.map((ye,Ae)=>r.jsx(Xe,{variant:"outline",className:"text-xs",children:ye},Ae)):r.jsx("span",{className:"text-slate-400",children:"-"})})}),r.jsx(I,{children:W.dia_atual!==void 0?r.jsx(Xe,{variant:"outline",className:`font-semibold ${Wt(W.dia_atual===0?-1:W.dia_atual>9?8:W.dia_atual-1)}`,children:(()=>{const ye=W.dia_atual===0?-1:W.dia_atual>9?8:W.dia_atual-1;return ye===-1?`D-1 - ${mt(ye)}`:`D${ye} - ${mt(ye)}`})()}):r.jsx("span",{className:"text-slate-400",children:"-"})}),r.jsx(I,{children:W.quantidade_acasalamentos??0}),r.jsx(I,{className:"text-right",children:r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>t(`/lotes-fiv/${W.id}`),children:r.jsx(hc,{className:"w-4 h-4"})})})]},W.id))})]})]})]})]})}const S5={APTA:{variant:"default",className:"bg-green-500 hover:bg-green-600"},INAPTA:{variant:"destructive",className:""},INICIADA:{variant:"secondary",className:"bg-blue-500 hover:bg-blue-600 text-white"},UTILIZADA:{variant:"outline",className:"bg-purple-100 text-purple-800 border-purple-300"},NAO_UTILIZADA:{variant:"outline",className:"bg-gray-100 text-gray-800"},SINCRONIZANDO:{variant:"secondary",className:"bg-yellow-500 hover:bg-yellow-600 text-white"},SINCRONIZADA:{variant:"default",className:"bg-green-500 hover:bg-green-600"},PRENHE:{variant:"default",className:"bg-green-600 hover:bg-green-700"},VAZIA:{variant:"destructive",className:""},RETOQUE:{variant:"secondary",className:"bg-orange-500 hover:bg-orange-600 text-white"},TRANSFERIDO:{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-300"},CONGELADO:{variant:"secondary",className:"bg-cyan-500 hover:bg-cyan-600 text-white"},REALIZADA:{variant:"default",className:"bg-green-500 hover:bg-green-600"}};function Ji({status:e,className:t}){const a=S5[e]||{variant:"outline",className:""};return r.jsx(Xe,{variant:a.variant,className:je(a.className,t),children:e})}function E5(){const e=Aa(),[t,a]=u.useState([]),[s,n]=u.useState([]),[o,i]=u.useState([]),[l,c]=u.useState(""),[d,f]=u.useState(!1),[h,p]=u.useState(new Set),[m,_]=u.useState(new Set),[g,x]=u.useState(!1),[y,v]=u.useState(!1),[b,j]=u.useState(!1),[w,S]=u.useState(!1),[N,C]=u.useState(!1),[P,R]=u.useState(!1),[Q,K]=u.useState(null),[ce,L]=u.useState(null),[H,T]=u.useState(null),[V,F]=u.useState([]),[E,O]=u.useState(!1),{toast:U}=Jt(),[M,X]=u.useState({data_congelamento:new Date().toISOString().split("T")[0],localizacao_atual:""}),[$,ne]=u.useState({classificacao:""}),[le,z]=u.useState({data_descarte:new Date().toISOString().split("T")[0],observacoes:""});u.useEffect(()=>{A()},[]),u.useEffect(()=>{ee()},[l]);const A=async()=>{try{const{data:q,error:he}=await D.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(he)throw he;i(q||[])}catch(q){console.error("Erro ao carregar fazendas:",q)}},J=async(q,he,Se,Ce,we,k)=>{try{const{error:ue}=await D.from("historico_embrioes").insert([{embriao_id:q,status_anterior:he,status_novo:Se,tipo_operacao:Ce,fazenda_id:we||null,observacoes:k||null,data_mudanca:new Date().toISOString()}]);ue&&console.error("Erro ao registrar histrico:",ue)}catch(ue){console.error("Erro ao registrar histrico:",ue)}},ee=async()=>{try{f(!0);const{data:q,error:he}=await D.from("embrioes").select("*").in("status_atual",["FRESCO","CONGELADO"]).order("created_at",{ascending:!1});if(he)throw he;if(!q||q.length===0){a([]),n([]),f(!1);return}const Se=[...new Set(q.filter(me=>me.lote_fiv_acasalamento_id).map(me=>me.lote_fiv_acasalamento_id))];if(Se.length===0){a(q),n([]),f(!1);return}const{data:Ce,error:we}=await D.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",Se);if(we)throw we;const k=[...new Set((Ce==null?void 0:Ce.map(me=>me.aspiracao_doadora_id))||[])],{data:ue,error:Me}=await D.from("aspiracoes_doadoras").select("id, doadora_id, pacote_aspiracao_id").in("id",k);if(Me)throw Me;const Be=[...new Set((ue==null?void 0:ue.map(me=>me.doadora_id))||[])],{data:Pe,error:ft}=await D.from("doadoras").select("id, registro").in("id",Be);if(ft)throw ft;const dt=[...new Set((Ce==null?void 0:Ce.map(me=>me.dose_semen_id))||[])],{data:mt,error:Wt}=await D.from("doses_semen").select("id, nome").in("id",dt);if(Wt)throw Wt;const la=[...new Set(q.filter(me=>me.lote_fiv_id).map(me=>me.lote_fiv_id))];let ha=new Map,bt=new Map,ta=new Map;if(la.length>0){const{data:me,error:Ge}=await D.from("lotes_fiv").select("id, pacote_aspiracao_id").in("id",la);if(!Ge&&me){me.forEach(We=>{We.pacote_aspiracao_id&&bt.set(We.id,We.pacote_aspiracao_id)});const Ft=[...new Set(me.map(We=>We.pacote_aspiracao_id).filter(Boolean))];if(Ft.length>0){const{data:We,error:Ct}=await D.from("pacotes_aspiracao").select("id, data_aspiracao, fazenda_id, fazenda_destino_id, horario_inicio, veterinario_responsavel, total_oocitos").in("id",Ft);if(!Ct&&We){const[W,ye]=await Promise.all([D.from("pacotes_aspiracao_fazendas_destino").select("pacote_aspiracao_id, fazenda_destino_id").in("pacote_aspiracao_id",Ft),(async()=>{const De=new Set;return We.forEach(Ye=>{Ye.fazenda_id&&De.add(Ye.fazenda_id),Ye.fazenda_destino_id&&De.add(Ye.fazenda_destino_id)}),De.size>0?D.from("fazendas").select("id, nome").in("id",Array.from(De)):{data:null,error:null}})()]),Ae=W.data,qe=ye.data,Fe=new Map((qe==null?void 0:qe.map(De=>[De.id,De.nome]))||[]),At=new Map;ue==null||ue.forEach(De=>{De.pacote_aspiracao_id&&At.set(De.pacote_aspiracao_id,(At.get(De.pacote_aspiracao_id)||0)+1)}),Ae&&Ae.forEach(De=>{const Ye=ta.get(De.pacote_aspiracao_id)||[];Ye.includes(De.fazenda_destino_id)||Ye.push(De.fazenda_destino_id),ta.set(De.pacote_aspiracao_id,Ye)}),We.forEach(De=>{if(De.fazenda_destino_id){const Ye=ta.get(De.id)||[];Ye.includes(De.fazenda_destino_id)||Ye.push(De.fazenda_destino_id),ta.set(De.id,Ye)}ha.set(De.id,{id:De.id,data_aspiracao:De.data_aspiracao,fazenda_nome:Fe.get(De.fazenda_id),quantidade_doadoras:At.get(De.id)||0,horario_inicio:De.horario_inicio,veterinario_responsavel:De.veterinario_responsavel,total_oocitos:De.total_oocitos})})}}}}const Gt=new Set;ta.forEach(me=>{me.forEach(Ge=>Gt.add(Ge))}),q.forEach(me=>{me.fazenda_destino_id&&Gt.add(me.fazenda_destino_id)});let ms=new Map;if(Gt.size>0){const{data:me,error:Ge}=await D.from("fazendas").select("id, nome").in("id",Array.from(Gt));!Ge&&me&&(ms=new Map(me.map(Ft=>[Ft.id,Ft.nome])))}const es=new Map((ue==null?void 0:ue.map(me=>[me.id,me]))||[]),Hr=new Map((Pe==null?void 0:Pe.map(me=>[me.id,me]))||[]),Un=new Map((mt==null?void 0:mt.map(me=>[me.id,me]))||[]),$n=new Map((Ce==null?void 0:Ce.map(me=>[me.id,me]))||[]),Pa=q.map(me=>{const Ge=me.lote_fiv_acasalamento_id?$n.get(me.lote_fiv_acasalamento_id):void 0,Ft=Ge?es.get(Ge.aspiracao_doadora_id):void 0,We=Ft?Hr.get(Ft.doadora_id):void 0,Ct=Ge?Un.get(Ge.dose_semen_id):void 0,W=me.lote_fiv_id?bt.get(me.lote_fiv_id):void 0,ye=W?ha.get(W):void 0;return{...me,doadora_registro:We==null?void 0:We.registro,touro_nome:Ct==null?void 0:Ct.nome,fazenda_destino_nome:me.fazenda_destino_id?ms.get(me.fazenda_destino_id):void 0,data_aspiracao:ye==null?void 0:ye.data_aspiracao,pacote_aspiracao_id:W}});a(Pa);const Hn=new Map;Pa.forEach(me=>{if(!me.lote_fiv_id||!me.created_at)return;const Ge=me.created_at.split("T")[0],Ft=`${me.lote_fiv_id}-${Ge}`;let We=Hn.get(Ft);if(!We){const Ct=bt.get(me.lote_fiv_id),W=Ct?ha.get(Ct):void 0,ye=Ct?ta.get(Ct)||[]:[],Ae=ye.map(qe=>ms.get(qe)).filter(qe=>!!qe);We={id:Ft,lote_fiv_id:me.lote_fiv_id,data_despacho:Ge,fazendas_destino_ids:ye,fazendas_destino_nomes:Ae,pacote_info:W||{id:Ct||"",data_aspiracao:Ge,quantidade_doadoras:0},embrioes:[],total:0,frescos:0,congelados:0,sem_classificacao:0,classificados:{BE:0,BN:0,BX:0,BL:0,BI:0}},Hn.set(Ft,We)}if(We.embrioes.push(me),We.total++,me.status_atual==="FRESCO"&&We.frescos++,me.status_atual==="CONGELADO"&&We.congelados++,!me.classificacao)We.sem_classificacao++;else{const Ct=me.classificacao.toUpperCase();Ct==="BE"?We.classificados.BE++:Ct==="BN"?We.classificados.BN++:Ct==="BX"?We.classificados.BX++:Ct==="BL"?We.classificados.BL++:Ct==="BI"&&We.classificados.BI++}});let Ue=Array.from(Hn.values());l&&(Ue=Ue.filter(me=>me.fazendas_destino_ids.includes(l))),Ue.sort((me,Ge)=>Ge.data_despacho.localeCompare(me.data_despacho)),n(Ue)}catch(q){U({title:"Erro ao carregar dados",description:q instanceof Error?q.message:"Erro desconhecido",variant:"destructive"})}finally{f(!1)}},Z=q=>{const he=new Set(h);he.has(q)?he.delete(q):he.add(q),p(he)},ae=q=>{const he=new Set(m);he.has(q)?he.delete(q):he.add(q),_(he),x(he.size>0)},ie=q=>{const he=new Set(m);q.embrioes.every(Ce=>he.has(Ce.id))?q.embrioes.forEach(Ce=>he.delete(Ce.id)):q.embrioes.forEach(Ce=>he.add(Ce.id)),_(he),x(he.size>0)},pe=async q=>{const he=Q;if(!he||!$.classificacao){U({title:"Erro de validao",description:"Classificao  obrigatria",variant:"destructive"});return}try{R(!0);const Se=he.status_atual,Ce=he.status_atual,{error:we}=await D.from("embrioes").update({classificacao:$.classificacao,data_classificacao:new Date().toISOString().split("T")[0]}).eq("id",he.id);if(we)throw we;await J(he.id,Se,Ce,"CLASSIFICACAO",null,`Classificao: ${$.classificacao}`),U({title:"Embrio classificado",description:"Classificao salva com sucesso"}),j(!1),K(null),ne({classificacao:""}),_(new Set),x(!1),ee()}catch(Se){U({title:"Erro ao classificar embrio",description:Se instanceof Error?Se.message:"Erro desconhecido",variant:"destructive"})}finally{R(!1)}},ge=async()=>{if(m.size===0||!$.classificacao){U({title:"Erro de validao",description:"Selecione pelo menos um embrio e uma classificao",variant:"destructive"});return}try{R(!0);const q=Array.from(m),he=q.map(Se=>t.find(we=>we.id===Se)?D.from("embrioes").update({classificacao:$.classificacao,data_classificacao:new Date().toISOString().split("T")[0]}).eq("id",Se):null).filter(Boolean);await Promise.all(he);for(const Se of q){const Ce=t.find(we=>we.id===Se);Ce&&await J(Ce.id,Ce.status_atual,Ce.status_atual,"CLASSIFICACAO",null,`Classificao: ${$.classificacao}`)}U({title:"Embries classificados",description:`${q.length} embrio(es) classificados com sucesso`}),j(!1),ne({classificacao:""}),_(new Set),x(!1),ee()}catch(q){U({title:"Erro ao classificar embries",description:q instanceof Error?q.message:"Erro desconhecido",variant:"destructive"})}finally{R(!1)}},Le=async()=>{if(m.size===0||!M.localizacao_atual.trim()){U({title:"Erro de validao",description:"Selecione pelo menos um embrio e informe a localizao",variant:"destructive"});return}try{R(!0);const q=Array.from(m),he=q.map(Se=>D.from("embrioes").update({status_atual:"CONGELADO",data_congelamento:M.data_congelamento,localizacao_atual:M.localizacao_atual}).eq("id",Se));await Promise.all(he);for(const Se of q){const Ce=t.find(we=>we.id===Se);Ce&&await J(Ce.id,Ce.status_atual,"CONGELADO","CONGELAMENTO",null,`Localizao: ${M.localizacao_atual}`)}U({title:"Embries congelados",description:`${q.length} embrio(es) congelados com sucesso`}),v(!1),X({data_congelamento:new Date().toISOString().split("T")[0],localizacao_atual:""}),_(new Set),x(!1),ee()}catch(q){U({title:"Erro ao congelar embries",description:q instanceof Error?q.message:"Erro desconhecido",variant:"destructive"})}finally{R(!1)}},te=async()=>{if(m.size===0){U({title:"Erro de validao",description:"Selecione pelo menos um embrio",variant:"destructive"});return}try{R(!0);const q=Array.from(m),he=q.map(Se=>D.from("embrioes").update({status_atual:"DESCARTADO",data_descarte:le.data_descarte}).eq("id",Se));await Promise.all(he);for(const Se of q){const Ce=t.find(we=>we.id===Se);Ce&&await J(Ce.id,Ce.status_atual,"DESCARTADO","DESCARTE",null,le.observacoes||null)}U({title:"Embries descartados",description:`${q.length} embrio(es) descartados com sucesso`}),S(!1),z({data_descarte:new Date().toISOString().split("T")[0],observacoes:""}),_(new Set),x(!1),ee()}catch(q){U({title:"Erro ao descartar embries",description:q instanceof Error?q.message:"Erro desconhecido",variant:"destructive"})}finally{R(!1)}},xe=async q=>{try{O(!0);const{data:he,error:Se}=await D.from("historico_embrioes").select("*").eq("embriao_id",q).order("data_mudanca",{ascending:!1});if(Se)throw Se;F(he||[])}catch(he){console.error("Erro ao carregar histrico:",he),U({title:"Erro ao carregar histrico",description:he instanceof Error?he.message:"Erro desconhecido",variant:"destructive"})}finally{O(!1)}};return d?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Estoque de Embries"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar pacotes de embries para transferncia, congelamento ou descarte"})]})}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Pacotes de Embries"})}),r.jsxs(Ne,{children:[r.jsxs("div",{className:"mb-4 space-y-2",children:[r.jsx(B,{htmlFor:"fazenda_destino",children:"Filtrar por Fazenda Destino"}),r.jsxs(at,{value:l||"all",onValueChange:q=>c(q==="all"?"":q),children:[r.jsx(Ze,{className:"w-full md:w-[300px]",children:r.jsx(st,{placeholder:"Todas as fazendas"})}),r.jsxs(Je,{children:[r.jsx(_e,{value:"all",children:"Todas as fazendas"}),o.map(q=>r.jsx(_e,{value:q.id,children:q.nome},q.id))]})]})]}),s.length===0?r.jsx("div",{className:"text-center text-slate-500 py-12",children:"Nenhum pacote de embries encontrado para esta fazenda destino"}):r.jsx("div",{className:"space-y-4",children:s.map(q=>{const he=h.has(q.id),Se=q.embrioes.every(we=>m.has(we.id)),Ce=q.embrioes.some(we=>m.has(we.id));return r.jsxs(Ee,{className:"border-l-4 border-l-green-500",children:[r.jsx(Re,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>Z(q.id),className:"p-0 h-auto",children:he?r.jsx(ew,{className:"w-5 h-5 text-slate-600"}):r.jsx(Eg,{className:"w-5 h-5 text-slate-600"})}),r.jsxs(Oe,{className:"text-lg",children:[q.pacote_info.fazenda_nome||"Fazenda no identificada"," "," ",q.fazendas_destino_nomes&&q.fazendas_destino_nomes.length>0?r.jsx("span",{className:"inline-flex flex-wrap gap-1 items-center",children:q.fazendas_destino_nomes.map((we,k)=>r.jsx(Xe,{variant:"outline",className:"text-xs",children:we},k))}):r.jsx("span",{className:"text-slate-400",children:"Sem destino"})]})]}),r.jsxs("div",{className:"mt-2 ml-7 space-y-1 text-sm text-slate-600",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Data Despacho:"})," ",q.data_despacho?Bt(q.data_despacho):"-"]}),q.pacote_info.horario_inicio&&r.jsxs("p",{children:[r.jsx("strong",{children:"Horrio:"})," ",q.pacote_info.horario_inicio]}),q.pacote_info.veterinario_responsavel&&r.jsxs("p",{children:[r.jsx("strong",{children:"Veterinrio:"})," ",q.pacote_info.veterinario_responsavel]})]})]}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:q.total}),r.jsx("div",{className:"text-sm text-slate-600",children:"embries"}),r.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[q.frescos," frescos, ",q.congelados," congelados"]}),r.jsxs("div",{className:"text-xs text-slate-500",children:[q.sem_classificacao," sem classificao"]}),q.classificados.BE>0||q.classificados.BN>0||q.classificados.BX>0||q.classificados.BL>0||q.classificados.BI>0?r.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["BE: ",q.classificados.BE," | BN: ",q.classificados.BN," | BX: ",q.classificados.BX," | BL: ",q.classificados.BL," | BI: ",q.classificados.BI]}):null]})})]})}),he&&r.jsxs(Ne,{children:[r.jsx("div",{className:"mb-4 flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(G,{variant:"outline",size:"sm",onClick:()=>ie(q),children:[Se?r.jsx(n0,{className:"w-4 h-4 mr-2"}):r.jsx(o0,{className:"w-4 h-4 mr-2"}),Se?"Desmarcar Todos":"Selecionar Todos"]}),r.jsx("span",{className:"text-sm text-slate-600",children:Ce&&`${q.embrioes.filter(we=>m.has(we.id)).length} selecionado(s)`})]})}),r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{className:"w-12"}),r.jsx(Y,{className:"text-center w-16",children:"N"}),r.jsx(Y,{children:"Doadora"}),r.jsx(Y,{children:"Touro"}),r.jsx(Y,{children:"Classificao"}),r.jsx(Y,{children:"Status"}),r.jsx(Y,{children:"Localizao"}),r.jsx(Y,{className:"text-right",children:"Aes"})]})}),r.jsx(wt,{children:(()=>{const we=ue=>ue&&{BE:1,BN:2,BX:3,BL:4,BI:5}[ue.toUpperCase()]||999;return[...q.embrioes].sort((ue,Me)=>{const Be=ue.doadora_registro||"",Pe=Me.doadora_registro||"";if(Be!==Pe)return Be.localeCompare(Pe);const ft=we(ue.classificacao),dt=we(Me.classificacao);return ft-dt}).map((ue,Me)=>{const Be=m.has(ue.id);return r.jsxs(be,{children:[r.jsx(I,{children:r.jsx(G,{variant:"ghost",size:"sm",className:"p-0 h-auto",onClick:()=>ae(ue.id),children:Be?r.jsx(n0,{className:"w-4 h-4 text-green-600"}):r.jsx(o0,{className:"w-4 h-4 text-slate-400"})})}),r.jsx(I,{className:"text-center font-medium",children:Me+1}),r.jsx(I,{children:ue.doadora_registro||"-"}),r.jsx(I,{children:ue.touro_nome||"-"}),r.jsx(I,{children:ue.classificacao?r.jsx(Xe,{variant:"outline",children:ue.classificacao}):r.jsx("span",{className:"text-slate-400",children:"-"})}),r.jsx(I,{children:r.jsx(Ji,{status:ue.status_atual})}),r.jsx(I,{children:ue.localizacao_atual||"-"}),r.jsx(I,{className:"text-right",children:r.jsxs("div",{className:"flex gap-1 justify-end",children:[!ue.classificacao&&ue.status_atual==="FRESCO"&&r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{K(ue),ne({classificacao:""}),j(!0)},title:"Classificar",children:r.jsx(Hd,{className:"w-4 h-4 text-purple-600"})}),ue.classificacao&&r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{K(ue),ne({classificacao:ue.classificacao||""}),j(!0)},title:"Editar Classificao",children:r.jsx(Hd,{className:"w-4 h-4 text-purple-600"})}),ue.status_atual==="FRESCO"&&r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{v(!0),_(new Set([ue.id]))},title:"Congelar",children:r.jsx(r0,{className:"w-4 h-4 text-blue-600"})}),(ue.status_atual==="FRESCO"||ue.status_atual==="CONGELADO")&&r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>e("/transferencia"),title:"Transferir",children:r.jsx(of,{className:"w-4 h-4 text-green-600"})}),(ue.status_atual==="FRESCO"||ue.status_atual==="CONGELADO")&&r.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{L(ue),z({data_descarte:new Date().toISOString().split("T")[0],observacoes:""}),S(!0)},title:"Descartar",children:r.jsx(Cu,{className:"w-4 h-4 text-red-600"})}),r.jsx(G,{variant:"ghost",size:"sm",onClick:async()=>{T(ue),C(!0),await xe(ue.id)},title:"Ver Histrico",children:r.jsx(Ng,{className:"w-4 h-4 text-slate-600"})})]})})]},ue.id)})})()})]})]})]},q.id)})}),g&&r.jsxs("div",{className:"mt-6 p-4 bg-slate-50 border border-slate-200 rounded-lg flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ag,{className:"w-5 h-5 text-slate-600"}),r.jsxs("span",{className:"font-medium text-slate-900",children:[m.size," embrio(es) selecionado(s)"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(G,{variant:"outline",size:"sm",onClick:()=>{ne({classificacao:""}),j(!0)},children:[r.jsx(Hd,{className:"w-4 h-4 mr-2"}),"Classificar"]}),r.jsxs(G,{variant:"outline",size:"sm",onClick:()=>{X({data_congelamento:new Date().toISOString().split("T")[0],localizacao_atual:""}),v(!0)},children:[r.jsx(r0,{className:"w-4 h-4 mr-2"}),"Congelar"]}),r.jsxs(G,{variant:"outline",size:"sm",onClick:()=>{z({data_descarte:new Date().toISOString().split("T")[0],observacoes:""}),S(!0)},children:[r.jsx(Cu,{className:"w-4 h-4 mr-2"}),"Descartar"]}),r.jsx(G,{variant:"outline",size:"sm",onClick:()=>{_(new Set),x(!1)},children:"Cancelar"})]})]})]})]}),r.jsx(zt,{open:b&&!!Q,onOpenChange:q=>{q||(j(!1),K(null))},children:r.jsxs(St,{className:"max-w-md",children:[r.jsxs(Et,{children:[r.jsx(Nt,{children:"Classificar Embrio"}),r.jsxs(Mt,{children:["Classificar embrio ",(Q==null?void 0:Q.identificacao)||"selecionado"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"classificacao",children:"Classificao *"}),r.jsxs(at,{value:$.classificacao,onValueChange:q=>ne({classificacao:q}),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione a classificao"})}),r.jsxs(Je,{children:[r.jsx(_e,{value:"BE",children:"BE (Blastocisto Excelente)"}),r.jsx(_e,{value:"BN",children:"BN (Blastocisto Normal)"}),r.jsx(_e,{value:"BX",children:"BX (Blastocisto Regular)"}),r.jsx(_e,{value:"BL",children:"BL (Blastocisto Limitado)"}),r.jsx(_e,{value:"BI",children:"BI (Blastocisto Irregular)"})]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(G,{onClick:()=>pe(),className:"flex-1 bg-purple-600 hover:bg-purple-700",disabled:P,children:P?"Salvando...":"Salvar Classificao"}),r.jsx(G,{variant:"outline",onClick:()=>{j(!1),K(null)},disabled:P,children:"Cancelar"})]})]})]})}),r.jsx(zt,{open:b&&!Q&&m.size>0,onOpenChange:q=>{q||j(!1)},children:r.jsxs(St,{className:"max-w-md",children:[r.jsxs(Et,{children:[r.jsxs(Nt,{children:["Classificar ",m.size," Embrio(es)"]}),r.jsx(Mt,{children:"Classificar todos os embries selecionados com a mesma classificao"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"classificacao",children:"Classificao *"}),r.jsxs(at,{value:$.classificacao,onValueChange:q=>ne({classificacao:q}),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione a classificao"})}),r.jsxs(Je,{children:[r.jsx(_e,{value:"BE",children:"BE (Blastocisto Excelente)"}),r.jsx(_e,{value:"BN",children:"BN (Blastocisto Normal)"}),r.jsx(_e,{value:"BX",children:"BX (Blastocisto Regular)"}),r.jsx(_e,{value:"BL",children:"BL (Blastocisto Limitado)"}),r.jsx(_e,{value:"BI",children:"BI (Blastocisto Irregular)"})]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(G,{onClick:ge,className:"flex-1 bg-purple-600 hover:bg-purple-700",disabled:P,children:P?"Salvando...":`Classificar ${m.size} Embrio(es)`}),r.jsx(G,{variant:"outline",onClick:()=>{j(!1)},disabled:P,children:"Cancelar"})]})]})]})}),r.jsx(zt,{open:y,onOpenChange:v,children:r.jsxs(St,{className:"max-w-md",children:[r.jsxs(Et,{children:[r.jsxs(Nt,{children:["Congelar ",m.size," Embrio(es)"]}),r.jsx(Mt,{children:"Registrar congelamento dos embries selecionados"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"data_congelamento",children:"Data de Congelamento *"}),r.jsx(de,{id:"data_congelamento",type:"date",value:M.data_congelamento,onChange:q=>X({...M,data_congelamento:q.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"localizacao_atual",children:"Localizao (Botijo) *"}),r.jsx(de,{id:"localizacao_atual",value:M.localizacao_atual,onChange:q=>X({...M,localizacao_atual:q.target.value}),placeholder:"Ex: Botijo 1, Canister A",required:!0})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(G,{onClick:Le,className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:P,children:P?"Congelando...":`Congelar ${m.size} Embrio(es)`}),r.jsx(G,{variant:"outline",onClick:()=>v(!1),disabled:P,children:"Cancelar"})]})]})]})}),r.jsx(zt,{open:w,onOpenChange:S,children:r.jsxs(St,{className:"max-w-md",children:[r.jsxs(Et,{children:[r.jsxs(Nt,{children:["Descartar ",m.size," Embrio(es)"]}),r.jsx(Mt,{children:"Descartar os embries selecionados"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"data_descarte",children:"Data de Descarte *"}),r.jsx(de,{id:"data_descarte",type:"date",value:le.data_descarte,onChange:q=>z({...le,data_descarte:q.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"observacoes",children:"Observaes / Motivo"}),r.jsx(ja,{id:"observacoes",value:le.observacoes,onChange:q=>z({...le,observacoes:q.target.value}),placeholder:"Informe o motivo do descarte (opcional)",rows:4})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(G,{onClick:te,className:"flex-1 bg-red-600 hover:bg-red-700",disabled:P,children:P?"Descartando...":`Descartar ${m.size} Embrio(es)`}),r.jsx(G,{variant:"outline",onClick:()=>S(!1),disabled:P,children:"Cancelar"})]})]})]})}),r.jsx(xN,{open:N,onOpenChange:C,children:r.jsxs(fv,{className:"w-full sm:max-w-2xl",children:[r.jsxs(hv,{children:[r.jsx(mv,{children:"Histrico do Embrio"}),r.jsxs(pv,{children:["Histrico completo de eventos do embrio"," ",(H==null?void 0:H.identificacao)||(H==null?void 0:H.id.slice(0,8))]})]}),r.jsx("div",{className:"mt-6",children:E?r.jsx(Pt,{}):V.length===0?r.jsx("p",{className:"text-slate-500 text-center py-8",children:"Nenhum histrico encontrado"}):r.jsx("div",{className:"space-y-4",children:V.map(q=>{const he={CLASSIFICACAO:"Classificao",DESTINACAO:"Destinao",CONGELAMENTO:"Congelamento",DESCARTE:"Descarte",TRANSFERENCIA:"Transferncia"};return r.jsx(Ee,{children:r.jsx(Ne,{className:"pt-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:he[q.tipo_operacao]||q.tipo_operacao}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:q.data_mudanca?Bt(q.data_mudanca):"-"}),q.observacoes&&r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:q.observacoes})]}),r.jsx("div",{className:"text-right",children:r.jsx(Ji,{status:q.status_novo||""})})]})})},q.id)})})})]})})]})}function N5(){const[e,t]=u.useState([]),[a,s]=u.useState([]),[n,o]=u.useState([]),[i,l]=u.useState([]),[c,d]=u.useState(!0),[f,h]=u.useState(!1),[p,m]=u.useState(!1),{toast:_}=Jt(),[g,x]=u.useState({fazenda_id:"",pacote_id:"",receptora_id:"",protocolo_receptora_id:"",embriao_id:"",data_te:new Date().toISOString().split("T")[0],veterinario_responsavel:"",tecnico_responsavel:"",observacoes:""}),[y,v]=u.useState({data_te:"",veterinario_responsavel:"",tecnico_responsavel:""});u.useEffect(()=>{b(),j()},[]),u.useEffect(()=>{if(g.fazenda_id){const L=a.filter(H=>H.fazendas_destino_ids.includes(g.fazenda_id));o(L)}else o([])},[g.fazenda_id,a]),u.useEffect(()=>{g.fazenda_id&&w(g.fazenda_id)},[p]),u.useEffect(()=>{g.fazenda_id&&w(g.fazenda_id)},[p]),u.useEffect(()=>{g.fazenda_id&&w(g.fazenda_id)},[p]);const b=async()=>{try{const{data:L,error:H}=await D.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(H)throw H;t(L||[]),d(!1)}catch(L){_({title:"Erro ao carregar fazendas",description:L instanceof Error?L.message:"Erro desconhecido",variant:"destructive"}),d(!1)}},j=async()=>{try{const{data:L,error:H}=await D.from("embrioes").select("*").in("status_atual",["FRESCO","CONGELADO"]).order("created_at",{ascending:!1});if(H)throw H;if(!L||L.length===0){s([]);return}const T=[...new Set(L.filter(A=>A.lote_fiv_id).map(A=>A.lote_fiv_id))];let V=new Map,F=new Map,E=new Map,O=new Map;const{data:U}=await D.from("fazendas").select("id, nome");if(U&&(O=new Map(U.map(A=>[A.id,A.nome]))),T.length>0){const{data:A,error:J}=await D.from("lotes_fiv").select("id, pacote_aspiracao_id").in("id",T);if(!J&&A){A.forEach(Z=>{Z.pacote_aspiracao_id&&F.set(Z.id,Z.pacote_aspiracao_id)});const ee=[...new Set(A.map(Z=>Z.pacote_aspiracao_id).filter(Boolean))];if(ee.length>0){const{data:Z,error:ae}=await D.from("pacotes_aspiracao").select("*").in("id",ee);if(!ae&&Z){const{data:ie}=await D.from("pacotes_aspiracao_fazendas_destino").select("pacote_aspiracao_id, fazenda_destino_id").in("pacote_aspiracao_id",ee);ie&&ie.forEach(pe=>{const ge=E.get(pe.pacote_aspiracao_id)||[];ge.includes(pe.fazenda_destino_id)||ge.push(pe.fazenda_destino_id),E.set(pe.pacote_aspiracao_id,ge)}),Z.forEach(pe=>{if(pe.fazenda_destino_id){const ge=E.get(pe.id)||[];ge.includes(pe.fazenda_destino_id)||ge.push(pe.fazenda_destino_id),E.set(pe.id,ge)}V.set(pe.id,{id:pe.id,data_aspiracao:pe.data_aspiracao,fazenda_nome:O.get(pe.fazenda_id),quantidade_doadoras:0,horario_inicio:pe.horario_inicio,veterinario_responsavel:pe.veterinario_responsavel,total_oocitos:pe.total_oocitos})})}}}}const M=L.map(A=>A.lote_fiv_acasalamento_id).filter(A=>!!A);let X=new Map,$=new Map,ne=new Map;if(M.length>0){const{data:A}=await D.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",M);if(A){X=new Map(A.map(Z=>[Z.id,Z]));const J=[...new Set(A.map(Z=>Z.aspiracao_doadora_id).filter(Boolean))],ee=[...new Set(A.map(Z=>Z.dose_semen_id).filter(Boolean))];if(J.length>0){const{data:Z}=await D.from("aspiracoes_doadoras").select("id, doadora_id").in("id",J);if(Z){const ae=[...new Set(Z.map(ie=>ie.doadora_id))];if(ae.length>0){const{data:ie}=await D.from("doadoras").select("id, registro").in("id",ae);if(ie){$=new Map(ie.map(ge=>[ge.id,ge.registro]));const pe=new Map(Z.map(ge=>[ge.id,ge.doadora_id]));A.forEach(ge=>{if(ge.aspiracao_doadora_id){const Le=pe.get(ge.aspiracao_doadora_id);if(Le){const te=$.get(Le);te&&X.set(ge.id,{...ge,doadora_registro:te})}}})}}}}if(ee.length>0){const{data:Z}=await D.from("doses_semen").select("id, nome").in("id",ee);Z&&(ne=new Map(Z.map(ae=>[ae.id,ae.nome])),A.forEach(ae=>{if(ae.dose_semen_id){const ie=ne.get(ae.dose_semen_id);if(ie){const pe=X.get(ae.id);X.set(ae.id,{...pe,touro_nome:ie})}}}))}}}const le=new Map;L.forEach(A=>{if(!A.lote_fiv_id||!A.created_at)return;const J=A.created_at.split("T")[0],ee=`${A.lote_fiv_id}-${J}`;let Z=le.get(ee);if(!Z){const ge=F.get(A.lote_fiv_id),Le=ge?V.get(ge):void 0,te=ge?E.get(ge)||[]:[],xe=te.map(q=>O.get(q)).filter(q=>!!q);Z={id:ee,lote_fiv_id:A.lote_fiv_id,data_despacho:J,fazendas_destino_ids:te,fazendas_destino_nomes:xe,pacote_info:Le||{id:ge||"",data_aspiracao:J,quantidade_doadoras:0},embrioes:[],total:0,frescos:0,congelados:0},le.set(ee,Z)}const ae=X.get(A.lote_fiv_acasalamento_id||""),ie=ae==null?void 0:ae.doadora_registro,pe=ae==null?void 0:ae.touro_nome;Z.embrioes.push({...A,doadora_registro:ie,touro_nome:pe}),Z.total++,A.status_atual==="FRESCO"&&Z.frescos++,A.status_atual==="CONGELADO"&&Z.congelados++});const z=Array.from(le.values());z.sort((A,J)=>J.data_despacho.localeCompare(A.data_despacho)),s(z)}catch(L){console.error("Erro ao carregar pacotes:",L),_({title:"Erro ao carregar pacotes de embries",description:L instanceof Error?L.message:"Erro desconhecido",variant:"destructive"}),s([])}},w=async L=>{x({...g,fazenda_id:L,pacote_id:"",embriao_id:"",receptora_id:"",protocolo_receptora_id:""}),v({data_te:"",veterinario_responsavel:"",tecnico_responsavel:""});try{const{data:H,error:T}=await D.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",L);if(T)throw T;const V=(H==null?void 0:H.map(A=>A.receptora_id))||[];if(V.length===0){l([]);return}const{data:F,error:E}=await D.from("v_protocolo_receptoras_status").select("*").eq("fase_ciclo","SINCRONIZADA").in("receptora_id",V);if(E)throw E;if(!F||F.length===0){l([]);return}const{data:O}=await D.from("transferencias_embrioes").select("receptora_id").eq("status_te","REALIZADA").in("receptora_id",V),U=new Map;O==null||O.forEach(A=>{const J=U.get(A.receptora_id)||0;U.set(A.receptora_id,J+1)});let M=F;p?M=F.filter(A=>(U.get(A.receptora_id)||0)<2):M=F.filter(A=>(U.get(A.receptora_id)||0)===0);const X=Array.from(new Set(M.map(A=>A.protocolo_id))),{data:$,error:ne}=await D.from("protocolo_receptoras").select("id, receptora_id, protocolo_id").in("protocolo_id",X).in("receptora_id",M.map(A=>A.receptora_id));if(ne)throw ne;const le=new Map(($==null?void 0:$.map(A=>[`${A.receptora_id}-${A.protocolo_id}`,A.id]))||[]),z=M.map(A=>{const J=U.get(A.receptora_id)||0;return{receptora_id:A.receptora_id,brinco:A.brinco,protocolo_id:A.protocolo_id,protocolo_receptora_id:le.get(`${A.receptora_id}-${A.protocolo_id}`)||"",data_te_prevista:A.data_te_prevista,data_limite_te:A.data_limite_te,quantidade_embrioes:J}});l(z)}catch(H){_({title:"Erro ao carregar receptoras",description:H instanceof Error?H.message:"Erro desconhecido",variant:"destructive"}),l([]),setReceptorasComTransferencia(new Set)}},S=L=>{x({...g,pacote_id:L,embriao_id:"",receptora_id:"",protocolo_receptora_id:"",data_te:y.data_te||g.data_te,veterinario_responsavel:y.veterinario_responsavel||g.veterinario_responsavel,tecnico_responsavel:y.tecnico_responsavel||g.tecnico_responsavel})},N=async L=>{if(L.preventDefault(),!g.fazenda_id||!g.pacote_id||!g.receptora_id||!g.embriao_id||!g.data_te){_({title:"Erro de validao",description:"Todos os campos obrigatrios devem ser preenchidos",variant:"destructive"});return}const H=i.find(V=>V.receptora_id===g.receptora_id),T=(H==null?void 0:H.quantidade_embrioes)||0;if(!p&&T>=1){_({title:"Receptora j utilizada",description:'Esta receptora j recebeu um embrio. Ative o switch "Permitir Transferncias Duplas" para transferir um segundo embrio.',variant:"destructive"});return}if(p&&T>=2){_({title:"Limite atingido",description:"Esta receptora j recebeu o mximo de 2 embries permitidos.",variant:"destructive"});return}try{h(!0);const V={embriao_id:g.embriao_id,receptora_id:g.receptora_id,protocolo_receptora_id:g.protocolo_receptora_id||null,data_te:g.data_te,tipo_te:"FRESCO",veterinario_responsavel:g.veterinario_responsavel||null,tecnico_responsavel:g.tecnico_responsavel||null,status_te:"REALIZADA",observacoes:g.observacoes||null},{error:F}=await D.from("transferencias_embrioes").insert([V]);if(F)throw F;const{error:E}=await D.from("embrioes").update({status_atual:"TRANSFERIDO"}).eq("id",g.embriao_id);if(E)throw E;if(g.protocolo_receptora_id){const{error:O}=await D.from("protocolo_receptoras").update({status:"UTILIZADA"}).eq("id",g.protocolo_receptora_id);if(O)throw O}_({title:"Transferncia realizada",description:"Transferncia de embrio registrada com sucesso"}),v({data_te:g.data_te,veterinario_responsavel:g.veterinario_responsavel,tecnico_responsavel:g.tecnico_responsavel}),x({fazenda_id:g.fazenda_id,pacote_id:g.pacote_id,embriao_id:"",receptora_id:"",protocolo_receptora_id:"",data_te:g.data_te,veterinario_responsavel:g.veterinario_responsavel,tecnico_responsavel:g.tecnico_responsavel,observacoes:""}),j(),g.fazenda_id&&await w(g.fazenda_id)}catch(V){console.error("Erro completo:",V),_({title:"Erro ao realizar transferncia",description:V instanceof Error?V.message:"Erro desconhecido",variant:"destructive"})}finally{h(!1)}},C=a.find(L=>L.id===g.pacote_id),P=(C==null?void 0:C.embrioes.filter(L=>L.status_atual==="FRESCO"||L.status_atual==="CONGELADO"))||[],[R,Q]=u.useState([]),[K,ce]=u.useState(new Map);return u.useEffect(()=>{g.pacote_id&&C?(async()=>{try{const{data:H,error:T}=await D.from("embrioes").select("*").eq("lote_fiv_id",C.lote_fiv_id).order("created_at",{ascending:!0});if(T)throw T;if(H){const V=H.map(le=>le.lote_fiv_acasalamento_id).filter(le=>!!le);let F=new Map,E=new Map,O=new Map;if(V.length>0){const{data:le}=await D.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",V);if(le){F=new Map(le.map(J=>[J.id,J]));const z=[...new Set(le.map(J=>J.aspiracao_doadora_id).filter(Boolean))],A=[...new Set(le.map(J=>J.dose_semen_id).filter(Boolean))];if(z.length>0){const{data:J}=await D.from("aspiracoes_doadoras").select("id, doadora_id").in("id",z);if(J){const ee=[...new Set(J.map(Z=>Z.doadora_id))];if(ee.length>0){const{data:Z}=await D.from("doadoras").select("id, registro").in("id",ee);if(Z){E=new Map(Z.map(ie=>[ie.id,ie.registro]));const ae=new Map(J.map(ie=>[ie.id,ie.doadora_id]));le.forEach(ie=>{if(ie.aspiracao_doadora_id){const pe=ae.get(ie.aspiracao_doadora_id);if(pe){const ge=E.get(pe);ge&&F.set(ie.id,{...ie,doadora_registro:ge})}}})}}}}if(A.length>0){const{data:J}=await D.from("doses_semen").select("id, nome").in("id",A);J&&(O=new Map(J.map(ee=>[ee.id,ee.nome])),le.forEach(ee=>{if(ee.dose_semen_id){const Z=O.get(ee.dose_semen_id);if(Z){const ae=F.get(ee.id);F.set(ee.id,{...ae,touro_nome:Z})}}}))}}}const U=H.map(le=>{const z=F.get(le.lote_fiv_acasalamento_id||"");return{...le,doadora_registro:z==null?void 0:z.doadora_registro,touro_nome:z==null?void 0:z.touro_nome}});Q(U);const M=new Map,X=new Map;U.forEach(le=>{const z=le.doadora_registro||"",A=le.touro_nome||"",J=`${z}|${A}`;X.has(J)||X.set(J,[]),X.get(J).push(le)});const $=Array.from(X.entries()).sort(([le],[z])=>{const[A,J]=le.split("|"),[ee,Z]=z.split("|");return A!==ee?A.localeCompare(ee):J.localeCompare(Z)});$.forEach(([le,z])=>{z.sort((A,J)=>{const ee=A.created_at?new Date(A.created_at).getTime():0,Z=J.created_at?new Date(J.created_at).getTime():0;return ee-Z})});let ne=1;$.forEach(([le,z])=>{z.forEach(A=>{M.set(A.id,ne),ne++})}),ce(M)}}catch(H){console.error("Erro ao carregar todos os embries:",H)}})():(Q([]),ce(new Map))},[g.pacote_id,C]),c?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Transferncia de Embries (TE)"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Destinar embries para receptoras sincronizadas"})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsxs(Oe,{className:"flex items-center gap-2",children:[r.jsx(of,{className:"w-5 h-5"}),"Nova Transferncia"]})}),r.jsx(Ne,{children:r.jsxs("form",{onSubmit:N,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4 border-b pb-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"fazenda_id",children:"1. Fazenda onde esto as receptoras *"}),r.jsxs(at,{value:g.fazenda_id,onValueChange:w,children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione a fazenda"})}),r.jsx(Je,{children:e.map(L=>r.jsx(_e,{value:L.id,children:L.nome},L.id))})]})]}),g.fazenda_id&&r.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(uv,{id:"permitir-duplas",checked:p,onCheckedChange:m}),r.jsxs("div",{children:[r.jsxs(B,{htmlFor:"permitir-duplas",className:"text-base font-semibold text-orange-900 cursor-pointer flex items-center gap-2",children:[r.jsx(aD,{className:"w-4 h-4"}),"Permitir Transferncias Duplas"]}),r.jsx("p",{className:"text-sm text-orange-700 mt-1",children:p?"Modo ativado: permite transferir at 2 embries na mesma receptora. Receptoras que j receberam 1 embrio aparecero na lista.":"Modo normal: 1 embrio por receptora. Ative para permitir transferncias duplas quando necessrio."})]})]})})}),g.fazenda_id&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"pacote_id",children:"2. Pacote de Embries *"}),r.jsxs(at,{value:g.pacote_id,onValueChange:S,disabled:!g.fazenda_id,children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione um pacote"})}),r.jsx(Je,{children:n.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhum pacote disponvel para esta fazenda"}):n.map(L=>r.jsxs(_e,{value:L.id,children:[Bt(L.data_despacho)," - ",L.total," embrio(es) -",L.frescos>0&&` ${L.frescos} fresco(s)`,L.congelados>0&&` ${L.congelados} congelado(s)`]},L.id))})]})]}),g.fazenda_id&&g.pacote_id&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"receptora_id",children:"3. Receptora Sincronizada *"}),r.jsxs(at,{value:g.receptora_id,onValueChange:L=>{const H=i.find(T=>T.receptora_id===L);x({...g,receptora_id:L,protocolo_receptora_id:(H==null?void 0:H.protocolo_receptora_id)||""})},disabled:!g.fazenda_id||!g.pacote_id,children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione a receptora"})}),r.jsx(Je,{children:i.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:p?"Nenhuma receptora sincronizada disponvel. Todas j receberam 2 embries ou no esto sincronizadas.":"Nenhuma receptora sincronizada disponvel nesta fazenda"}):i.map(L=>{const H=L.quantidade_embrioes||0,T=H>0;return r.jsx(_e,{value:L.receptora_id,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:L.brinco}),T&&p&&r.jsx(Xe,{variant:"outline",className:"bg-orange-100 text-orange-800 border-orange-300 text-xs",children:H===1?"1 embrio":"2 embries"}),L.data_te_prevista&&r.jsxs("span",{className:"text-slate-500 text-xs",children:["(TE prevista: ",Bt(L.data_te_prevista),")"]})]})},L.receptora_id)})})]})]}),g.pacote_id&&r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"data_te",children:"Data da TE *"}),r.jsx(de,{id:"data_te",type:"date",value:g.data_te,onChange:L=>{const H=L.target.value;x({...g,data_te:H}),v(T=>({...T,data_te:H}))},required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"veterinario_responsavel",children:"Veterinrio Responsvel"}),r.jsx(de,{id:"veterinario_responsavel",value:g.veterinario_responsavel,onChange:L=>{const H=L.target.value;x({...g,veterinario_responsavel:H}),v(T=>({...T,veterinario_responsavel:H}))},placeholder:"Nome do veterinrio"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"tecnico_responsavel",children:"Tcnico Responsvel"}),r.jsx(de,{id:"tecnico_responsavel",value:g.tecnico_responsavel,onChange:L=>{const H=L.target.value;x({...g,tecnico_responsavel:H}),v(T=>({...T,tecnico_responsavel:H}))},placeholder:"Nome do tcnico"})]})]}),g.embriao_id&&g.receptora_id&&r.jsx("div",{className:"flex gap-2 pt-2",children:r.jsxs(G,{type:"submit",className:"bg-green-600 hover:bg-green-700",disabled:f,children:[r.jsx(Ag,{className:"w-4 h-4 mr-2"}),f?"Registrando...":"Registrar Transferncia"]})})]}),g.pacote_id&&C&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(B,{children:"4. Selecionar Embrio do Pacote *"}),r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"font-semibold text-slate-900",children:"Pacote selecionado"}),r.jsxs("p",{className:"text-sm text-slate-600",children:["Data Despacho: ",Bt(C.data_despacho)," | Total: ",C.total," embrio(es)"]})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{className:"w-12"}),r.jsx(Y,{className:"text-center w-16",children:"N"}),r.jsx(Y,{children:"Doadora"}),r.jsx(Y,{children:"Touro"}),r.jsx(Y,{children:"Classificao"}),r.jsx(Y,{children:"Status"})]})}),r.jsx(wt,{children:[...P].sort((H,T)=>{const V=K.get(H.id)||9999,F=K.get(T.id)||9999;return V-F}).map(H=>{const T=K.get(H.id)||0;return r.jsxs(be,{className:g.embriao_id===H.id?"bg-green-50":"cursor-pointer hover:bg-slate-50",onClick:()=>x({...g,embriao_id:H.id}),children:[r.jsx(I,{children:r.jsx("input",{type:"radio",name:"embriao",value:H.id,checked:g.embriao_id===H.id,onChange:()=>x({...g,embriao_id:H.id}),className:"w-4 h-4"})}),r.jsx(I,{className:"text-center font-medium",children:T}),r.jsx(I,{children:H.doadora_registro||"-"}),r.jsx(I,{children:H.touro_nome||"-"}),r.jsx(I,{children:H.classificacao?r.jsx(Xe,{variant:"outline",children:H.classificacao}):r.jsx("span",{className:"text-slate-400",children:"-"})}),r.jsx(I,{children:r.jsx(Ji,{status:H.status_atual})})]},H.id)})})]})})]})]}),g.embriao_id&&g.receptora_id&&r.jsx("div",{className:"space-y-4 border-t pt-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(ja,{id:"observacoes",value:g.observacoes,onChange:L=>x({...g,observacoes:L.target.value}),placeholder:"Observaes sobre a transferncia",rows:3})]})})]})})]})]})}function C5(){const[e,t]=u.useState([]),[a,s]=u.useState([]),[n,o]=u.useState(!0),[i,l]=u.useState(!1),[c,d]=u.useState(!1),{toast:f}=Jt(),[h,p]=u.useState({receptora_id:"",data_te:"",data_diagnostico:new Date().toISOString().split("T")[0],resultado:"",numero_gestacoes:"",observacoes:""});u.useEffect(()=>{m()},[]);const m=async()=>{try{o(!0);const{data:x,error:y}=await D.from("transferencias_embrioes").select("receptora_id, data_te").eq("status_te","REALIZADA").order("data_te",{ascending:!1});if(y)throw y;const v=[...new Set(x==null?void 0:x.map(S=>S.receptora_id))];if(v.length>0){const{data:S,error:N}=await D.from("receptoras").select("id, identificacao").in("id",v);if(N)throw N;const C=new Map(S==null?void 0:S.map(R=>[R.id,R.identificacao])),P=(x==null?void 0:x.map(R=>({receptora_id:R.receptora_id,brinco:C.get(R.receptora_id)||"",data_te:R.data_te})))||[];s(P)}const{data:b,error:j}=await D.from("diagnosticos_gestacao").select("*").eq("tipo_diagnostico","DG").order("data_diagnostico",{ascending:!1});if(j)throw j;const w=[...new Set(b==null?void 0:b.map(S=>S.receptora_id))];if(w.length>0){const{data:S,error:N}=await D.from("receptoras").select("id, identificacao").in("id",w);if(N)throw N;const C=new Map(S==null?void 0:S.map(R=>[R.id,R.identificacao])),P=b==null?void 0:b.map(R=>({...R,receptora_brinco:C.get(R.receptora_id)}));t(P||[])}else t([])}catch(x){f({title:"Erro ao carregar dados",description:x instanceof Error?x.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},_=x=>{const y=a.find(v=>v.receptora_id===x);p({...h,receptora_id:x,data_te:(y==null?void 0:y.data_te)||""})},g=async x=>{if(x.preventDefault(),!h.receptora_id||!h.data_te||!h.data_diagnostico||!h.resultado){f({title:"Erro de validao",description:"Receptora, data da TE, data do diagnstico e resultado so obrigatrios",variant:"destructive"});return}try{d(!0);const y={receptora_id:h.receptora_id,data_te:h.data_te,tipo_diagnostico:"DG",data_diagnostico:h.data_diagnostico,resultado:h.resultado,numero_gestacoes:h.numero_gestacoes?parseInt(h.numero_gestacoes):null,observacoes:h.observacoes||null},{error:v}=await D.from("diagnosticos_gestacao").insert([y]);if(v)throw v;f({title:"Diagnstico registrado",description:"Diagnstico de gestao registrado com sucesso"}),l(!1),p({receptora_id:"",data_te:"",data_diagnostico:new Date().toISOString().split("T")[0],resultado:"",numero_gestacoes:"",observacoes:""}),m()}catch(y){const v=y instanceof Error?y.message:"Erro desconhecido";f({title:"Erro ao registrar diagnstico",description:v.includes("RLS")||v.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":v,variant:"destructive"})}finally{d(!1)}};return n?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Diagnstico de Gestao (DG)"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Registrar diagnsticos de gestao"})]}),r.jsxs(zt,{open:i,onOpenChange:l,children:[r.jsx(As,{asChild:!0,children:r.jsxs(G,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Ja,{className:"w-4 h-4 mr-2"}),"Novo Diagnstico"]})}),r.jsxs(St,{className:"max-w-md",children:[r.jsxs(Et,{children:[r.jsxs(Nt,{className:"flex items-center gap-2",children:[r.jsx(Dg,{className:"w-5 h-5"}),"Registrar Diagnstico de Gestao"]}),r.jsx(Mt,{children:"Preencha os dados do diagnstico"})]}),r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"receptora_id",children:"Receptora com TE *"}),r.jsxs(at,{value:h.receptora_id,onValueChange:_,children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione a receptora"})}),r.jsx(Je,{children:a.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhuma receptora com TE registrada"}):a.map(x=>r.jsxs(_e,{value:x.receptora_id,children:[x.brinco," - TE em"," ",new Date(x.data_te).toLocaleDateString("pt-BR")]},x.receptora_id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"data_diagnostico",children:"Data do Diagnstico *"}),r.jsx(de,{id:"data_diagnostico",type:"date",value:h.data_diagnostico,onChange:x=>p({...h,data_diagnostico:x.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"resultado",children:"Resultado *"}),r.jsxs(at,{value:h.resultado,onValueChange:x=>p({...h,resultado:x}),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione o resultado"})}),r.jsxs(Je,{children:[r.jsx(_e,{value:"PRENHE",children:"PRENHE"}),r.jsx(_e,{value:"VAZIA",children:"VAZIA"}),r.jsx(_e,{value:"RETOQUE",children:"RETOQUE"})]})]})]}),h.resultado==="PRENHE"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"numero_gestacoes",children:"Nmero de Gestaes"}),r.jsx(de,{id:"numero_gestacoes",type:"number",min:"1",max:"3",value:h.numero_gestacoes,onChange:x=>p({...h,numero_gestacoes:x.target.value}),placeholder:"1, 2 ou 3 (gemelar)"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(ja,{id:"observacoes",value:h.observacoes,onChange:x=>p({...h,observacoes:x.target.value}),placeholder:"Observaes sobre o diagnstico",rows:3})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(G,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:c,children:c?"Salvando...":"Registrar"}),r.jsx(G,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:c,children:"Cancelar"})]})]})]})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Histrico de Diagnsticos"})}),r.jsx(Ne,{children:r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Data Diagnstico"}),r.jsx(Y,{children:"Receptora"}),r.jsx(Y,{children:"Data TE"}),r.jsx(Y,{children:"Resultado"}),r.jsx(Y,{children:"N Gestaes"}),r.jsx(Y,{children:"Observaes"})]})}),r.jsx(wt,{children:e.length===0?r.jsx(be,{children:r.jsx(I,{colSpan:6,className:"text-center text-slate-500",children:"Nenhum diagnstico registrado"})}):e.map(x=>r.jsxs(be,{children:[r.jsx(I,{children:new Date(x.data_diagnostico).toLocaleDateString("pt-BR")}),r.jsx(I,{className:"font-medium",children:x.receptora_brinco||"-"}),r.jsx(I,{children:new Date(x.data_te).toLocaleDateString("pt-BR")}),r.jsx(I,{children:r.jsx(Ji,{status:x.resultado})}),r.jsx(I,{children:x.numero_gestacoes||"-"}),r.jsx(I,{children:x.observacoes||"-"})]},x.id))})]})})]})]})}function A5(){const[e,t]=u.useState([]),[a,s]=u.useState([]),[n,o]=u.useState(!0),[i,l]=u.useState(!1),[c,d]=u.useState(!1),{toast:f}=Jt(),[h,p]=u.useState({receptora_id:"",data_te:"",data_diagnostico:new Date().toISOString().split("T")[0],resultado:"PRENHE",sexagem:"",numero_gestacoes:"",observacoes:""});u.useEffect(()=>{m()},[]);const m=async()=>{try{o(!0);const{data:x,error:y}=await D.from("transferencias_embrioes").select("receptora_id, data_te").eq("status_te","REALIZADA").order("data_te",{ascending:!1});if(y)throw y;const v=[...new Set(x==null?void 0:x.map(S=>S.receptora_id))];if(v.length>0){const{data:S,error:N}=await D.from("receptoras").select("id, identificacao").in("id",v);if(N)throw N;const C=new Map(S==null?void 0:S.map(R=>[R.id,R.identificacao])),P=(x==null?void 0:x.map(R=>({receptora_id:R.receptora_id,brinco:C.get(R.receptora_id)||"",data_te:R.data_te})))||[];s(P)}const{data:b,error:j}=await D.from("diagnosticos_gestacao").select("*").eq("tipo_diagnostico","SEXAGEM").order("data_diagnostico",{ascending:!1});if(j)throw j;const w=[...new Set(b==null?void 0:b.map(S=>S.receptora_id))];if(w.length>0){const{data:S,error:N}=await D.from("receptoras").select("id, identificacao").in("id",w);if(N)throw N;const C=new Map(S==null?void 0:S.map(R=>[R.id,R.identificacao])),P=b==null?void 0:b.map(R=>({...R,receptora_brinco:C.get(R.receptora_id)}));t(P||[])}else t([])}catch(x){f({title:"Erro ao carregar dados",description:x instanceof Error?x.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},_=x=>{const y=a.find(v=>v.receptora_id===x);p({...h,receptora_id:x,data_te:(y==null?void 0:y.data_te)||""})},g=async x=>{if(x.preventDefault(),!h.receptora_id||!h.data_te||!h.data_diagnostico){f({title:"Erro de validao",description:"Receptora, data da TE e data do diagnstico so obrigatrios",variant:"destructive"});return}if(h.resultado==="PRENHE"&&!h.sexagem){f({title:"Erro de validao",description:"Sexagem  obrigatria quando resultado  PRENHE",variant:"destructive"});return}try{d(!0);const y={receptora_id:h.receptora_id,data_te:h.data_te,tipo_diagnostico:"SEXAGEM",data_diagnostico:h.data_diagnostico,resultado:h.resultado,sexagem:h.sexagem||null,numero_gestacoes:h.numero_gestacoes?parseInt(h.numero_gestacoes):null,observacoes:h.observacoes||null},{error:v}=await D.from("diagnosticos_gestacao").insert([y]);if(v)throw v;f({title:"Sexagem registrada",description:"Sexagem registrada com sucesso"}),l(!1),p({receptora_id:"",data_te:"",data_diagnostico:new Date().toISOString().split("T")[0],resultado:"PRENHE",sexagem:"",numero_gestacoes:"",observacoes:""}),m()}catch(y){const v=y instanceof Error?y.message:"Erro desconhecido";f({title:"Erro ao registrar sexagem",description:v.includes("RLS")||v.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":v,variant:"destructive"})}finally{d(!1)}};return n?r.jsx(Pt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Sexagem"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Registrar sexagem fetal"})]}),r.jsxs(zt,{open:i,onOpenChange:l,children:[r.jsx(As,{asChild:!0,children:r.jsxs(G,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Ja,{className:"w-4 h-4 mr-2"}),"Nova Sexagem"]})}),r.jsxs(St,{className:"max-w-md",children:[r.jsxs(Et,{children:[r.jsxs(Nt,{className:"flex items-center gap-2",children:[r.jsx(Zj,{className:"w-5 h-5"}),"Registrar Sexagem"]}),r.jsx(Mt,{children:"Preencha os dados da sexagem (pode ser feita sem DG prvio)"})]}),r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"receptora_id",children:"Receptora com TE *"}),r.jsxs(at,{value:h.receptora_id,onValueChange:_,children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione a receptora"})}),r.jsx(Je,{children:a.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhuma receptora com TE registrada"}):a.map(x=>r.jsxs(_e,{value:x.receptora_id,children:[x.brinco," - TE em"," ",new Date(x.data_te).toLocaleDateString("pt-BR")]},x.receptora_id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"data_diagnostico",children:"Data da Sexagem *"}),r.jsx(de,{id:"data_diagnostico",type:"date",value:h.data_diagnostico,onChange:x=>p({...h,data_diagnostico:x.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"resultado",children:"Resultado"}),r.jsxs(at,{value:h.resultado,onValueChange:x=>p({...h,resultado:x}),children:[r.jsx(Ze,{children:r.jsx(st,{})}),r.jsxs(Je,{children:[r.jsx(_e,{value:"PRENHE",children:"PRENHE"}),r.jsx(_e,{value:"RETOQUE",children:"RETOQUE"})]})]})]}),h.resultado==="PRENHE"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"sexagem",children:"Sexo do Feto *"}),r.jsxs(at,{value:h.sexagem,onValueChange:x=>p({...h,sexagem:x}),children:[r.jsx(Ze,{children:r.jsx(st,{placeholder:"Selecione o sexo"})}),r.jsxs(Je,{children:[r.jsx(_e,{value:"FEMEA",children:"FMEA"}),r.jsx(_e,{value:"MACHO",children:"MACHO"}),r.jsx(_e,{value:"PRENHE",children:"PRENHE (sem sexo visvel)"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"numero_gestacoes",children:"Nmero de Gestaes"}),r.jsx(de,{id:"numero_gestacoes",type:"number",min:"1",max:"3",value:h.numero_gestacoes,onChange:x=>p({...h,numero_gestacoes:x.target.value}),placeholder:"1, 2 ou 3 (gemelar)"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(B,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(ja,{id:"observacoes",value:h.observacoes,onChange:x=>p({...h,observacoes:x.target.value}),placeholder:"Observaes sobre a sexagem",rows:3})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(G,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:c,children:c?"Salvando...":"Registrar"}),r.jsx(G,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:c,children:"Cancelar"})]})]})]})]})]}),r.jsxs(Ee,{children:[r.jsx(Re,{children:r.jsx(Oe,{children:"Histrico de Sexagens"})}),r.jsx(Ne,{children:r.jsxs(_t,{children:[r.jsx(jt,{children:r.jsxs(be,{children:[r.jsx(Y,{children:"Data Sexagem"}),r.jsx(Y,{children:"Receptora"}),r.jsx(Y,{children:"Data TE"}),r.jsx(Y,{children:"Resultado"}),r.jsx(Y,{children:"Sexo"}),r.jsx(Y,{children:"N Gestaes"}),r.jsx(Y,{children:"Observaes"})]})}),r.jsx(wt,{children:e.length===0?r.jsx(be,{children:r.jsx(I,{colSpan:7,className:"text-center text-slate-500",children:"Nenhuma sexagem registrada"})}):e.map(x=>r.jsxs(be,{children:[r.jsx(I,{children:new Date(x.data_diagnostico).toLocaleDateString("pt-BR")}),r.jsx(I,{className:"font-medium",children:x.receptora_brinco||"-"}),r.jsx(I,{children:new Date(x.data_te).toLocaleDateString("pt-BR")}),r.jsx(I,{children:r.jsx(Ji,{status:x.resultado})}),r.jsx(I,{children:x.sexagem?r.jsx(Ji,{status:x.sexagem}):"-"}),r.jsx(I,{children:x.numero_gestacoes||"-"}),r.jsx(I,{children:x.observacoes||"-"})]},x.id))})]})})]})]})}function T5(){return r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-gray-50 to-blue-50 p-6 text-center",children:r.jsxs("div",{className:"space-y-6 max-w-md",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("h1",{className:"text-8xl font-bold text-blue-600",children:"404"}),r.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Page Not Found"}),r.jsx("p",{className:"text-muted-foreground",children:"The page you're looking for doesn't exist or may have been moved."})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[r.jsx(G,{asChild:!0,children:r.jsx("a",{href:"/",children:"Return Home"})}),r.jsx(G,{variant:"outline",onClick:()=>window.history.back(),children:"Go Back"})]})]})})}const D5=new KO,R5=()=>r.jsx(ZO,{client:D5,children:r.jsxs(EO,{children:[r.jsx(H2,{}),r.jsx(BD,{}),r.jsx(Jz,{children:r.jsxs(Vz,{children:[r.jsxs(Dt,{element:r.jsx(rM,{}),children:[r.jsx(Dt,{path:"/",element:r.jsx(_P,{})}),r.jsx(Dt,{path:"/clientes",element:r.jsx(SP,{})}),r.jsx(Dt,{path:"/clientes/novo",element:r.jsx(ey,{})}),r.jsx(Dt,{path:"/clientes/:id",element:r.jsx(Hk,{})}),r.jsx(Dt,{path:"/clientes/:id/editar",element:r.jsx(ey,{})}),r.jsx(Dt,{path:"/fazendas",element:r.jsx(Vk,{})}),r.jsx(Dt,{path:"/fazendas/:id",element:r.jsx(Yk,{})}),r.jsx(Dt,{path:"/doadoras",element:r.jsx(E6,{})}),r.jsx(Dt,{path:"/doadoras/:id",element:r.jsx(O6,{})}),r.jsx(Dt,{path:"/receptoras",element:r.jsx(k6,{})}),r.jsx(Dt,{path:"/receptoras/:id/historico",element:r.jsx(bN,{})}),r.jsx(Dt,{path:"/protocolos",element:r.jsx(L6,{})}),r.jsx(Dt,{path:"/protocolos/novo",element:r.jsx(g5,{})}),r.jsx(Dt,{path:"/protocolos/:id",element:r.jsx(v5,{})}),r.jsx(Dt,{path:"/protocolos/:id/passo2",element:r.jsx(x5,{})}),r.jsx(Dt,{path:"/protocolos/fechados/:id/relatorio",element:r.jsx(y5,{})}),r.jsx(Dt,{path:"/aspiracoes",element:r.jsx(b5,{})}),r.jsx(Dt,{path:"/aspiracoes/novo",element:r.jsx(_5,{})}),r.jsx(Dt,{path:"/aspiracoes/:id",element:r.jsx(j5,{})}),r.jsx(Dt,{path:"/doses-semen",element:r.jsx(w5,{})}),r.jsx(Dt,{path:"/lotes-fiv",element:r.jsx(my,{})}),r.jsx(Dt,{path:"/lotes-fiv/:id",element:r.jsx(my,{})}),r.jsx(Dt,{path:"/embrioes",element:r.jsx(E5,{})}),r.jsx(Dt,{path:"/transferencia",element:r.jsx(N5,{})}),r.jsx(Dt,{path:"/dg",element:r.jsx(C5,{})}),r.jsx(Dt,{path:"/sexagem",element:r.jsx(A5,{})})]}),r.jsx(Dt,{path:"*",element:r.jsx(T5,{})})]})})]})});f2.createRoot(document.getElementById("root")).render(r.jsx(R5,{}));
