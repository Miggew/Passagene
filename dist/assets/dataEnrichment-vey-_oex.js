import{s as i}from"./index-CvlUDCD-.js";async function I(e){const o=new Map,r=new Map;if(e.length===0)return{doadorasMap:o,tourosMap:r};const{data:s,error:n}=await i.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",e);if(n||!s||s.length===0)return{doadorasMap:o,tourosMap:r};const l=[...new Set(s.map(a=>a.aspiracao_doadora_id).filter(Boolean))],_=[...new Set(s.map(a=>a.dose_semen_id).filter(Boolean))],[f,p]=await Promise.all([l.length>0?i.from("aspiracoes_doadoras").select("id, doadora_id").in("id",l):Promise.resolve({data:null,error:null}),_.length>0?i.from("doses_semen").select("id, touro_id, touro:touros(id, nome, registro, raca)").in("id",_):Promise.resolve({data:null,error:null})]),c=f.data||[],w=p.data||[];let m=[];if(c.length>0){const a=[...new Set(c.map(d=>d.doadora_id))],{data:t}=await i.from("doadoras").select("id, registro, nome").in("id",a);m=t||[]}const g=new Map(m.map(a=>[a.id,a.registro])),h=new Map(c.map(a=>[a.id,a.doadora_id])),M=new Map(w.map(a=>{const t=Array.isArray(a.touro)?a.touro[0]:a.touro;return[a.id,(t==null?void 0:t.nome)||"Touro desconhecido"]}));return s.forEach(a=>{const t=h.get(a.aspiracao_doadora_id);if(t){const u=g.get(t);u&&o.set(a.id,u)}const d=M.get(a.dose_semen_id);d&&r.set(a.id,d)}),{doadorasMap:o,tourosMap:r}}async function P(e){const o=new Map;if(e.length===0)return o;const{data:r,error:s}=await i.from("lotes_fiv").select("id, data_abertura").in("id",e);return s||!r||r.forEach(n=>{o.set(n.id,n)}),o}function b(e){return[...new Set(e.filter(o=>o.lote_fiv_acasalamento_id).map(o=>o.lote_fiv_acasalamento_id))]}function D(e){return[...new Set(e.filter(o=>o.lote_fiv_id).map(o=>o.lote_fiv_id))]}export{D as a,I as b,P as c,b as e};
