import{r as n,h as ue,j as e,i as ge,k as he,P as Q,l as be,m as fe,n as ve,o as je,g as Ne,b as _e,s as B,f as ye,B as Z}from"./index-B-7HRnm0.js";import{C as T,d as z,a as q,b as H}from"./card-DdhhEbXV.js";import{B as Ce}from"./badge-BCHVCiM7.js";import{I as l}from"./input-D2h8r4MO.js";import{L as N}from"./label-vBcRjcSu.js";import{T as we}from"./textarea-RmDl789L.js";import{S as se,a as te,b as re,c as ie,d as D,C as ke}from"./select-B0M3FCy4.js";import{E as Se}from"./EmptyState-gn01eel2.js";import{C as K}from"./CountBadge-BBpPT0CT.js";import{u as Ee}from"./use-toast-DDUqdzpY.js";import{f as oe}from"./dateUtils-eJ5e6apA.js";import{S as Oe}from"./switch-DtAGOp8o.js";import{A as ne}from"./arrow-left-D9wDrV6g.js";import{H as Ae}from"./history-CVgiEWSN.js";import{S as Re}from"./square-pen-BpOU0zlP.js";import{S as De}from"./save-DAusptDg.js";import{S as G}from"./star-X44RvruR.js";import{G as Ge}from"./gem-CW7dFMYc.js";import"./index-B4eR1KA_.js";import"./check-C6h7QFZL.js";var U="Collapsible",[Fe,la]=ge(U),[Ie,W]=Fe(U),le=n.forwardRef((r,g)=>{const{__scopeCollapsible:d,open:p,defaultOpen:o,disabled:t,onOpenChange:h,...f}=r,[O,k]=ue({prop:p,defaultProp:o??!1,onChange:h,caller:U});return e.jsx(Ie,{scope:d,disabled:t,contentId:he(),open:O,onOpenToggle:n.useCallback(()=>k(F=>!F),[k]),children:e.jsx(Q.div,{"data-state":Y(O),"data-disabled":t?"":void 0,...f,ref:g})})});le.displayName=U;var de="CollapsibleTrigger",ce=n.forwardRef((r,g)=>{const{__scopeCollapsible:d,...p}=r,o=W(de,d);return e.jsx(Q.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":Y(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...p,ref:g,onClick:be(r.onClick,o.onOpenToggle)})});ce.displayName=de;var X="CollapsibleContent",me=n.forwardRef((r,g)=>{const{forceMount:d,...p}=r,o=W(X,r.__scopeCollapsible);return e.jsx(fe,{present:d||o.open,children:({present:t})=>e.jsx(Le,{...p,ref:g,present:t})})});me.displayName=X;var Le=n.forwardRef((r,g)=>{const{__scopeCollapsible:d,present:p,children:o,...t}=r,h=W(X,d),[f,O]=n.useState(p),k=n.useRef(null),F=ve(g,k),_=n.useRef(0),$=_.current,m=n.useRef(0),I=m.current,A=h.open||f,J=n.useRef(A),S=n.useRef(void 0);return n.useEffect(()=>{const c=requestAnimationFrame(()=>J.current=!1);return()=>cancelAnimationFrame(c)},[]),je(()=>{const c=k.current;if(c){S.current=S.current||{transitionDuration:c.style.transitionDuration,animationName:c.style.animationName},c.style.transitionDuration="0s",c.style.animationName="none";const L=c.getBoundingClientRect();_.current=L.height,m.current=L.width,J.current||(c.style.transitionDuration=S.current.transitionDuration,c.style.animationName=S.current.animationName),O(p)}},[h.open,p]),e.jsx(Q.div,{"data-state":Y(h.open),"data-disabled":h.disabled?"":void 0,id:h.contentId,hidden:!A,...t,ref:F,style:{"--radix-collapsible-content-height":$?`${$}px`:void 0,"--radix-collapsible-content-width":I?`${I}px`:void 0,...r.style},children:A&&o})});function Y(r){return r?"open":"closed"}var Pe=le;const Te=Pe,ze=ce,$e=me;function Je({value:r,onChange:g,doadoraNome:d,doadoraRegistro:p}){const o=(t,h,f)=>{g({...r,[t]:{...r[t],[h]:f}})};return e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"rounded-xl border border-border bg-gradient-to-b from-muted/30 via-transparent to-muted/20 p-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-1/2 top-full h-4 w-px bg-primary/40"}),e.jsxs("div",{className:"relative rounded-xl border-2 border-primary/50 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent p-3 shadow-sm min-w-[180px] text-center",children:[e.jsx("div",{className:"absolute -top-1.5 left-1/2 -translate-x-1/2 px-2 py-0.5 rounded-full bg-primary text-[9px] font-bold text-primary-foreground uppercase tracking-wider",children:"Doadora"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-sm font-semibold text-foreground",children:d||"—"}),e.jsx("div",{className:"text-[10px] font-medium text-primary mt-0.5",children:p||"—"})]})]})]}),e.jsxs("div",{className:"relative flex gap-6 pt-2",children:[e.jsx("div",{className:"absolute top-0 left-1/4 right-1/4 h-px bg-border"}),e.jsx("div",{className:"absolute top-0 left-1/4 h-2 w-px bg-border"}),e.jsx("div",{className:"absolute top-0 right-1/4 h-2 w-px bg-border"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute left-1/2 top-full h-3 w-px bg-blue-500/40"}),e.jsxs("div",{className:"rounded-lg border border-blue-500/30 bg-gradient-to-br from-blue-500/10 via-transparent to-transparent p-2.5 min-w-[150px] transition-all hover:border-blue-500/50 hover:shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-[10px] font-semibold text-blue-600 dark:text-blue-400 uppercase tracking-wider",children:"Pai"})]}),e.jsx(l,{placeholder:"Nome",value:r.pai.nome,onChange:t=>o("pai","nome",t.target.value),className:"h-7 text-xs mb-1.5 bg-background/80 border-blue-500/20 focus:border-blue-500/40"}),e.jsx(l,{placeholder:"Registro",value:r.pai.registro,onChange:t=>o("pai","registro",t.target.value),className:"h-6 text-[10px] bg-background/80 border-blue-500/20 focus:border-blue-500/40"})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute left-1/2 top-full h-3 w-px bg-pink-500/40"}),e.jsxs("div",{className:"rounded-lg border border-pink-500/30 bg-gradient-to-br from-pink-500/10 via-transparent to-transparent p-2.5 min-w-[150px] transition-all hover:border-pink-500/50 hover:shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-pink-500"}),e.jsx("span",{className:"text-[10px] font-semibold text-pink-600 dark:text-pink-400 uppercase tracking-wider",children:"Mãe"})]}),e.jsx(l,{placeholder:"Nome",value:r.mae.nome,onChange:t=>o("mae","nome",t.target.value),className:"h-7 text-xs mb-1.5 bg-background/80 border-pink-500/20 focus:border-pink-500/40"}),e.jsx(l,{placeholder:"Registro",value:r.mae.registro,onChange:t=>o("mae","registro",t.target.value),className:"h-6 text-[10px] bg-background/80 border-pink-500/20 focus:border-pink-500/40"})]})]})]}),e.jsxs("div",{className:"relative flex gap-2 pt-1",children:[e.jsx("div",{className:"absolute top-0 left-[12.5%] w-[25%] h-px bg-blue-500/30"}),e.jsx("div",{className:"absolute top-0 right-[12.5%] w-[25%] h-px bg-pink-500/30"}),e.jsxs("div",{className:"rounded-lg border border-blue-500/20 bg-gradient-to-br from-blue-500/5 via-transparent to-transparent p-2 min-w-[130px] transition-all hover:border-blue-500/40",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[e.jsx("div",{className:"w-1 h-1 rounded-full bg-blue-500/60"}),e.jsx("span",{className:"text-[9px] font-medium text-blue-600/80 dark:text-blue-400/80 uppercase tracking-wider",children:"Avô Pat."})]}),e.jsx(l,{placeholder:"Nome",value:r.pai_pai.nome,onChange:t=>o("pai_pai","nome",t.target.value),className:"h-6 text-[10px] mb-1 bg-background/60 border-blue-500/15"}),e.jsx(l,{placeholder:"Registro",value:r.pai_pai.registro,onChange:t=>o("pai_pai","registro",t.target.value),className:"h-5 text-[9px] bg-background/60 border-blue-500/15"})]}),e.jsxs("div",{className:"rounded-lg border border-pink-500/20 bg-gradient-to-br from-pink-500/5 via-transparent to-transparent p-2 min-w-[130px] transition-all hover:border-pink-500/40",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[e.jsx("div",{className:"w-1 h-1 rounded-full bg-pink-500/60"}),e.jsx("span",{className:"text-[9px] font-medium text-pink-600/80 dark:text-pink-400/80 uppercase tracking-wider",children:"Avó Pat."})]}),e.jsx(l,{placeholder:"Nome",value:r.pai_mae.nome,onChange:t=>o("pai_mae","nome",t.target.value),className:"h-6 text-[10px] mb-1 bg-background/60 border-pink-500/15"}),e.jsx(l,{placeholder:"Registro",value:r.pai_mae.registro,onChange:t=>o("pai_mae","registro",t.target.value),className:"h-5 text-[9px] bg-background/60 border-pink-500/15"})]}),e.jsx("div",{className:"flex items-center px-1",children:e.jsx("div",{className:"h-12 w-px bg-gradient-to-b from-transparent via-border to-transparent"})}),e.jsxs("div",{className:"rounded-lg border border-blue-500/20 bg-gradient-to-br from-blue-500/5 via-transparent to-transparent p-2 min-w-[130px] transition-all hover:border-blue-500/40",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[e.jsx("div",{className:"w-1 h-1 rounded-full bg-blue-500/60"}),e.jsx("span",{className:"text-[9px] font-medium text-blue-600/80 dark:text-blue-400/80 uppercase tracking-wider",children:"Avô Mat."})]}),e.jsx(l,{placeholder:"Nome",value:r.mae_pai.nome,onChange:t=>o("mae_pai","nome",t.target.value),className:"h-6 text-[10px] mb-1 bg-background/60 border-blue-500/15"}),e.jsx(l,{placeholder:"Registro",value:r.mae_pai.registro,onChange:t=>o("mae_pai","registro",t.target.value),className:"h-5 text-[9px] bg-background/60 border-blue-500/15"})]}),e.jsxs("div",{className:"rounded-lg border border-pink-500/20 bg-gradient-to-br from-pink-500/5 via-transparent to-transparent p-2 min-w-[130px] transition-all hover:border-pink-500/40",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[e.jsx("div",{className:"w-1 h-1 rounded-full bg-pink-500/60"}),e.jsx("span",{className:"text-[9px] font-medium text-pink-600/80 dark:text-pink-400/80 uppercase tracking-wider",children:"Avó Mat."})]}),e.jsx(l,{placeholder:"Nome",value:r.mae_mae.nome,onChange:t=>o("mae_mae","nome",t.target.value),className:"h-6 text-[10px] mb-1 bg-background/60 border-pink-500/15"}),e.jsx(l,{placeholder:"Registro",value:r.mae_mae.registro,onChange:t=>o("mae_mae","registro",t.target.value),className:"h-5 text-[9px] bg-background/60 border-pink-500/15"})]})]})]})})})}function da(){const{id:r}=Ne(),g=_e(),{toast:d}=Ee(),[p,o]=n.useState(!0),[t,h]=n.useState(!1),[f,O]=n.useState(null),[k,F]=n.useState(null),[_,$]=n.useState([]),[m,I]=n.useState("historico"),[A,J]=n.useState(!1),S=["Holandesa","Jersey","Gir","Girolando"],[c,L]=n.useState(""),[s,x]=n.useState({registro:"",nome:"",raca:"",racaCustom:"",genealogia_texto:"",foto_url:"",gpta:"",controle_leiteiro:"",beta_caseina:"",link_abcz:"",disponivel_aspiracao:!0,classificacao_genetica:""}),[v,ee]=n.useState({pai:{nome:"",registro:""},mae:{nome:"",registro:""},pai_pai:{nome:"",registro:""},pai_mae:{nome:"",registro:""},mae_pai:{nome:"",registro:""},mae_mae:{nome:"",registro:""}}),C=n.useMemo(()=>{var u;const a=_.length,y=_.reduce((E,b)=>E+(b.total_oocitos||0),0),i=_.reduce((E,b)=>E+(b.viaveis||0),0),j=a>0?Math.round(y/a):0,M=a>0?Math.round(i/a):0,R=(u=_[0])==null?void 0:u.data_aspiracao;return{total:a,totalOocitos:y,totalViaveis:i,mediaOocitos:j,mediaViaveis:M,ultimaAspiracao:R}},[_]);n.useEffect(()=>{r&&ae()},[r]);const ae=async()=>{var a,y;try{o(!0);const{data:i,error:j}=await B.from("doadoras").select("*").eq("id",r).single();if(j)throw j;if(O(i),i.fazenda_id){const{data:V,error:w}=await B.from("fazendas").select("*").eq("id",i.fazenda_id).single();if(w)throw w;F(V)}const{data:M,error:R}=await B.from("aspiracoes_doadoras").select("*").eq("doadora_id",r).order("data_aspiracao",{ascending:!1});R||$(M||[]);const u=i.raca||"",E=S.includes(u);L(E?u:"Outra");let b={pai:{nome:i.pai_nome||"",registro:i.pai_registro||""},mae:{nome:i.mae_nome||"",registro:i.mae_registro||""},pai_pai:{nome:"",registro:""},pai_mae:{nome:"",registro:""},mae_pai:{nome:"",registro:""},mae_mae:{nome:"",registro:""}},P=i.genealogia_texto||"";if(P.includes("[GENEALOGIA_JSON]"))try{const V=P.match(/\[GENEALOGIA_JSON\](.*?)\[\/GENEALOGIA_JSON\]/s);if(V){const w=JSON.parse(V[1]);b={pai:w.pai||b.pai,mae:w.mae||b.mae,pai_pai:w.pai_pai||b.pai_pai,pai_mae:w.pai_mae||b.pai_mae,mae_pai:w.mae_pai||b.mae_pai,mae_mae:w.mae_mae||b.mae_mae},P=P.replace(/\[GENEALOGIA_JSON\].*?\[\/GENEALOGIA_JSON\]/s,"").trim()}}catch{}x({registro:i.registro||"",nome:i.nome||"",raca:E?u:"",racaCustom:E?"":u,genealogia_texto:P,foto_url:i.foto_url||"",gpta:((a=i.gpta)==null?void 0:a.toString())||"",controle_leiteiro:((y=i.controle_leiteiro)==null?void 0:y.toString())||"",beta_caseina:i.beta_caseina||"",link_abcz:i.link_abcz||"",disponivel_aspiracao:i.disponivel_aspiracao??!0,classificacao_genetica:i.classificacao_genetica||""}),ee(b)}catch(i){d({title:"Erro ao carregar dados",description:i instanceof Error?i.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},xe=async a=>{if(a.preventDefault(),!s.registro.trim()){d({title:"Erro de validação",description:"Registro é obrigatório",variant:"destructive"});return}const y=c==="Outra"?s.racaCustom.trim():s.raca.trim();if(!y){d({title:"Erro de validação",description:"Raça é obrigatória",variant:"destructive"});return}try{h(!0);const i={registro:s.registro.trim(),nome:s.nome.trim()||null,raca:y,pai_registro:v.pai.registro.trim()||null,pai_nome:v.pai.nome.trim()||null,mae_registro:v.mae.registro.trim()||null,mae_nome:v.mae.nome.trim()||null,foto_url:s.foto_url.trim()||null,gpta:s.gpta?parseFloat(s.gpta):null,controle_leiteiro:s.controle_leiteiro?parseFloat(s.controle_leiteiro):null,beta_caseina:s.beta_caseina.trim()||null,link_abcz:s.link_abcz.trim()||null,disponivel_aspiracao:s.disponivel_aspiracao,classificacao_genetica:s.classificacao_genetica||null},j={pai:v.pai,mae:v.mae,pai_pai:v.pai_pai,pai_mae:v.pai_mae,mae_pai:v.mae_pai,mae_mae:v.mae_mae};if(Object.values(j).some(u=>u.nome.trim()||u.registro.trim())){const u=JSON.stringify(j);i.genealogia_texto=s.genealogia_texto.trim()?`${s.genealogia_texto}

[GENEALOGIA_JSON]${u}[/GENEALOGIA_JSON]`:`[GENEALOGIA_JSON]${u}[/GENEALOGIA_JSON]`}else i.genealogia_texto=s.genealogia_texto.trim()||null;const{error:R}=await B.from("doadoras").update(i).eq("id",r);if(R)throw R;d({title:"Doadora atualizada",description:"Dados salvos com sucesso"}),ae()}catch(i){const j=i instanceof Error?i.message:"Erro desconhecido";d({title:"Erro ao atualizar doadora",description:j.includes("RLS")||j.includes("policy")?"RLS está bloqueando escrita. Configure políticas anon no Supabase.":j,variant:"destructive"})}finally{h(!1)}},pe=()=>{switch(s.classificacao_genetica){case"diamante":return e.jsx(Ge,{className:"w-4 h-4 text-cyan-500"});case"3_estrelas":return e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-3 h-3 text-amber-500 fill-amber-500"}),e.jsx(G,{className:"w-3 h-3 text-amber-500 fill-amber-500"}),e.jsx(G,{className:"w-3 h-3 text-amber-500 fill-amber-500"})]});case"2_estrelas":return e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-3 h-3 text-amber-500 fill-amber-500"}),e.jsx(G,{className:"w-3 h-3 text-amber-500 fill-amber-500"})]});case"1_estrela":return e.jsx(G,{className:"w-3 h-3 text-amber-500 fill-amber-500"});default:return null}};return p?e.jsx(ye,{}):f?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>g(-1),children:e.jsx(ne,{className:"w-4 h-4"})}),e.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"Detalhes da Doadora"})]})}),e.jsx(T,{children:e.jsxs(z,{className:"pt-4 pb-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Registro"}),e.jsx("p",{className:"text-base font-semibold text-foreground",children:f.registro})]}),f.nome&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-8 w-px bg-border"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Nome"}),e.jsx("p",{className:"text-sm text-foreground",children:f.nome})]})]}),e.jsx("div",{className:"h-8 w-px bg-border"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Raça"}),e.jsx("p",{className:"text-sm text-foreground",children:f.raca||"—"})]}),k&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-8 w-px bg-border"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Fazenda"}),e.jsx("p",{className:"text-sm text-foreground",children:k.nome})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.classificacao_genetica&&e.jsx("div",{className:"flex items-center gap-0.5",children:pe()}),e.jsx(Ce,{variant:s.disponivel_aspiracao?"default":"secondary",className:s.disponivel_aspiracao?"bg-primary text-xs":"text-xs",children:s.disponivel_aspiracao?"Disponível":"Indisponível"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 pt-3 border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Aspirações:"}),e.jsx(K,{value:C.total,variant:"default"})]}),e.jsx("div",{className:"h-4 w-px bg-border"}),e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-primary/10 border border-primary/20",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsx("span",{className:"text-xs font-medium text-primary",children:"Viáveis:"}),e.jsx("span",{className:"text-sm font-bold text-primary",children:C.totalViaveis}),e.jsxs("span",{className:"text-[10px] text-primary/70",children:["(média ",C.mediaViaveis,")"]})]}),e.jsx("div",{className:"h-4 w-px bg-border"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Total Oócitos:"}),e.jsx(K,{value:C.totalOocitos,variant:"default"}),e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(média ",C.mediaOocitos,")"]})]}),C.ultimaAspiracao&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-px bg-border"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Última:"}),e.jsx("span",{className:"text-xs font-medium text-foreground",children:oe(C.ultimaAspiracao)})]})]})]})]})}),e.jsx("div",{className:"rounded-xl border border-border bg-card p-1.5",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:()=>I("historico"),className:`
              relative flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg
              text-sm font-medium transition-all duration-200
              ${m==="historico"?"bg-muted/80 text-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-muted/40"}
            `,children:[m==="historico"&&e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-10 h-0.5 bg-primary rounded-full"}),e.jsx("div",{className:`
              flex items-center justify-center w-7 h-7 rounded-md transition-colors
              ${m==="historico"?"bg-primary/15":"bg-muted/50"}
            `,children:e.jsx(Ae,{className:`w-4 h-4 ${m==="historico"?"text-primary":"text-muted-foreground"}`})}),e.jsx("span",{children:"Histórico"}),C.total>0&&e.jsx("span",{className:`
                inline-flex items-center justify-center min-w-5 h-5 px-1.5 text-[10px] font-bold rounded-full
                ${m==="historico"?"bg-primary/15 text-primary":"bg-muted text-muted-foreground"}
              `,children:C.total})]}),e.jsxs("button",{onClick:()=>I("editar"),className:`
              relative flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg
              text-sm font-medium transition-all duration-200
              ${m==="editar"?"bg-muted/80 text-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-muted/40"}
            `,children:[m==="editar"&&e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-10 h-0.5 bg-primary rounded-full"}),e.jsx("div",{className:`
              flex items-center justify-center w-7 h-7 rounded-md transition-colors
              ${m==="editar"?"bg-primary/15":"bg-muted/50"}
            `,children:e.jsx(Re,{className:`w-4 h-4 ${m==="editar"?"text-primary":"text-muted-foreground"}`})}),e.jsx("span",{children:"Editar Dados"})]})]})}),m==="historico"&&e.jsxs(T,{children:[e.jsx(q,{className:"pb-2 pt-3",children:e.jsx(H,{className:"text-sm font-semibold",children:"Histórico de Aspirações"})}),e.jsx(z,{children:_.length===0?e.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"Nenhuma aspiração registrada para esta doadora"}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"rounded-lg border border-border overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-muted/80 via-muted/60 to-muted/80 border-b border-border",children:e.jsxs("div",{className:"grid grid-cols-[90px_50px_60px_45px_45px_45px_45px_1fr_1fr] text-[10px] font-semibold text-muted-foreground uppercase tracking-wider",children:[e.jsxs("div",{className:"px-3 py-2.5 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-4 rounded-full bg-primary/40"}),"Data"]}),e.jsx("div",{className:"px-2 py-2.5 text-center",children:"Total"}),e.jsx("div",{className:"px-2 py-2.5 text-center text-primary font-bold",children:"Viáveis"}),e.jsx("div",{className:"px-1 py-2.5 text-center",children:"Exp."}),e.jsx("div",{className:"px-1 py-2.5 text-center",children:"Des."}),e.jsx("div",{className:"px-1 py-2.5 text-center",children:"Deg."}),e.jsx("div",{className:"px-1 py-2.5 text-center",children:"Atr."}),e.jsx("div",{className:"px-2 py-2.5",children:"Veterinário"}),e.jsx("div",{className:"px-2 py-2.5",children:"Técnico"})]})}),e.jsx("div",{className:"divide-y divide-border/50",children:_.map((a,y)=>e.jsxs("div",{className:`
                          group grid grid-cols-[90px_50px_60px_45px_45px_45px_45px_1fr_1fr] items-center transition-all duration-150
                          hover:bg-gradient-to-r hover:from-primary/5 hover:via-transparent hover:to-transparent
                          ${y%2===0?"bg-transparent":"bg-muted/20"}
                        `,children:[e.jsxs("div",{className:"px-3 py-2 flex items-center gap-2",children:[e.jsx("div",{className:"w-0.5 h-5 rounded-full bg-transparent group-hover:bg-primary transition-colors"}),e.jsx("span",{className:"text-xs font-medium text-foreground group-hover:text-primary transition-colors",children:oe(a.data_aspiracao)})]}),e.jsx("div",{className:"px-2 py-2 flex justify-center",children:e.jsx(K,{value:a.total_oocitos??0,variant:"default"})}),e.jsx("div",{className:"px-2 py-2 flex justify-center",children:e.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded bg-primary/10 border border-primary/20",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsx("span",{className:"text-xs font-bold text-primary",children:a.viaveis??0})]})}),e.jsx("div",{className:"px-1 py-2 text-center",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:a.expandidos??0})}),e.jsx("div",{className:"px-1 py-2 text-center",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:a.desnudos??0})}),e.jsx("div",{className:"px-1 py-2 text-center",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:a.degenerados??0})}),e.jsx("div",{className:"px-1 py-2 text-center",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:a.atresicos??0})}),e.jsx("div",{className:"px-2 py-2",children:e.jsx("span",{className:"text-xs text-muted-foreground truncate block",title:a.veterinario_responsavel||"",children:a.veterinario_responsavel||"—"})}),e.jsx("div",{className:"px-2 py-2",children:e.jsx("span",{className:"text-xs text-muted-foreground truncate block",title:a.tecnico_responsavel||"",children:a.tecnico_responsavel||"—"})})]},a.id))})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),e.jsx("span",{children:"Viáveis"})]}),e.jsx("span",{className:"text-muted-foreground/30",children:"|"}),e.jsx("span",{children:"Exp=Expandidos"}),e.jsx("span",{children:"Des=Desnudos"}),e.jsx("span",{children:"Deg=Degenerados"}),e.jsx("span",{children:"Atr=Atrésicos"})]})]})})]}),m==="editar"&&e.jsxs("form",{id:"doadora-form",onSubmit:xe,className:"space-y-3",children:[e.jsxs(T,{children:[e.jsx(q,{className:"pb-2 pt-3",children:e.jsx(H,{className:"text-sm font-semibold",children:"Informações Básicas"})}),e.jsxs(z,{children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(N,{htmlFor:"registro",className:"text-xs",children:"Registro *"}),e.jsx(l,{id:"registro",value:s.registro,onChange:a=>x({...s,registro:a.target.value}),className:"h-8 text-sm",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(N,{htmlFor:"nome",className:"text-xs",children:"Nome"}),e.jsx(l,{id:"nome",value:s.nome,onChange:a=>x({...s,nome:a.target.value}),className:"h-8 text-sm"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(N,{htmlFor:"raca",className:"text-xs",children:"Raça *"}),e.jsxs(se,{value:c,onValueChange:a=>{L(a),x(a==="Outra"?{...s,raca:"",racaCustom:""}:{...s,raca:a,racaCustom:""})},children:[e.jsx(te,{className:"h-8 text-sm",children:e.jsx(re,{placeholder:"Selecione"})}),e.jsxs(ie,{children:[S.map(a=>e.jsx(D,{value:a,children:a},a)),e.jsx(D,{value:"Outra",children:"Outra"})]})]}),c==="Outra"&&e.jsx(l,{value:s.racaCustom,onChange:a=>x({...s,racaCustom:a.target.value,raca:a.target.value}),placeholder:"Digite a raça",className:"h-8 text-sm mt-1",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(N,{htmlFor:"classificacao_genetica",className:"text-xs",children:"Classificação"}),e.jsxs(se,{value:s.classificacao_genetica,onValueChange:a=>x({...s,classificacao_genetica:a}),children:[e.jsx(te,{className:"h-8 text-sm",children:e.jsx(re,{placeholder:"Selecione"})}),e.jsxs(ie,{children:[e.jsx(D,{value:"1_estrela",children:"1 Estrela"}),e.jsx(D,{value:"2_estrelas",children:"2 Estrelas"}),e.jsx(D,{value:"3_estrelas",children:"3 Estrelas"}),e.jsx(D,{value:"diamante",children:"Diamante"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{id:"disponivel_aspiracao",checked:s.disponivel_aspiracao,onCheckedChange:a=>x({...s,disponivel_aspiracao:a})}),e.jsx(N,{htmlFor:"disponivel_aspiracao",className:"text-xs font-normal",children:"Disponível para aspiração"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{htmlFor:"foto_url",className:"text-xs",children:"URL Foto:"}),e.jsx(l,{id:"foto_url",type:"url",value:s.foto_url,onChange:a=>x({...s,foto_url:a.target.value}),placeholder:"https://...",className:"h-7 text-xs w-48"})]})]})]})]}),c==="Gir"&&e.jsxs(T,{children:[e.jsx(q,{className:"pb-2 pt-3",children:e.jsx(H,{className:"text-sm font-semibold",children:"Informações Gir"})}),e.jsx(z,{children:e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(N,{htmlFor:"gpta",className:"text-xs",children:"GPTA"}),e.jsx(l,{id:"gpta",type:"number",value:s.gpta,onChange:a=>x({...s,gpta:a.target.value}),className:"h-8 text-sm"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(N,{htmlFor:"controle_leiteiro",className:"text-xs",children:"Controle Leiteiro"}),e.jsx(l,{id:"controle_leiteiro",type:"number",value:s.controle_leiteiro,onChange:a=>x({...s,controle_leiteiro:a.target.value}),className:"h-8 text-sm"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(N,{htmlFor:"beta_caseina",className:"text-xs",children:"Beta Caseína"}),e.jsx(l,{id:"beta_caseina",value:s.beta_caseina,onChange:a=>x({...s,beta_caseina:a.target.value}),className:"h-8 text-sm"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(N,{htmlFor:"link_abcz",className:"text-xs",children:"Link ABCZ"}),e.jsx(l,{id:"link_abcz",type:"url",value:s.link_abcz,onChange:a=>x({...s,link_abcz:a.target.value}),className:"h-8 text-sm"})]})]})})]}),e.jsx(T,{children:e.jsxs(Te,{open:A,onOpenChange:J,children:[e.jsx(ze,{asChild:!0,children:e.jsx(q,{className:"pb-2 pt-3 cursor-pointer hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(H,{className:"text-sm font-semibold",children:"Genealogia"}),e.jsx(ke,{className:`w-4 h-4 text-muted-foreground transition-transform ${A?"rotate-180":""}`})]})})}),e.jsx($e,{children:e.jsxs(z,{className:"pt-0",children:[e.jsx(Je,{value:v,onChange:ee,doadoraNome:s.nome||s.registro,doadoraRegistro:s.registro}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx(N,{htmlFor:"genealogia_texto",className:"text-xs",children:"Observações"}),e.jsx(we,{id:"genealogia_texto",value:s.genealogia_texto,onChange:a=>x({...s,genealogia_texto:a.target.value}),placeholder:"Informações adicionais (opcional)",rows:2,className:"text-sm"})]})]})})]})}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs(Z,{type:"submit",disabled:t,children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),t?"Salvando...":"Salvar Alterações"]})})]})]}):e.jsx(Se,{title:"Doadora não encontrada",description:"Não foi possível carregar os dados da doadora.",action:e.jsxs(Z,{onClick:()=>g("/doadoras"),variant:"outline",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Voltar para Doadoras"]})})}export{da as default};
