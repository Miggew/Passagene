import{s as i}from"./index-B-7HRnm0.js";async function D(e){const o=new Map,t=new Map;if(e.length===0)return{doadorasMap:o,tourosMap:t};const{data:s,error:n}=await i.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",e);if(n||!s||s.length===0)return{doadorasMap:o,tourosMap:t};const l=[...new Set(s.map(a=>a.aspiracao_doadora_id).filter(Boolean))],u=[...new Set(s.map(a=>a.dose_semen_id).filter(Boolean))],[_,p]=await Promise.all([l.length>0?i.from("aspiracoes_doadoras").select("id, doadora_id").in("id",l):Promise.resolve({data:null,error:null}),u.length>0?i.from("doses_semen").select("id, touro_id, touro:touros(id, nome, registro, raca)").in("id",u):Promise.resolve({data:null,error:null})]),c=_.data||[],w=p.data||[];let m=[];if(c.length>0){const a=[...new Set(c.map(d=>d.doadora_id))],{data:r}=await i.from("doadoras").select("id, registro, nome").in("id",a);m=r||[]}const g=new Map(m.map(a=>[a.id,a.registro])),h=new Map(c.map(a=>[a.id,a.doadora_id])),M=new Map(w.map(a=>{const r=Array.isArray(a.touro)?a.touro[0]:a.touro;return[a.id,(r==null?void 0:r.nome)||"Touro desconhecido"]}));return s.forEach(a=>{const r=h.get(a.aspiracao_doadora_id);if(r){const f=g.get(r);f&&o.set(a.id,f)}const d=M.get(a.dose_semen_id);d&&t.set(a.id,d)}),{doadorasMap:o,tourosMap:t}}async function I(e){const o=new Map;if(e.length===0)return o;const{data:t,error:s}=await i.from("lotes_fiv").select("id, data_abertura").in("id",e);return s||!t||t.forEach(n=>{o.set(n.id,n)}),o}function P(e){const o=new Date(e);return Math.floor((new Date().getTime()-o.getTime())/(1e3*60*60*24))}function b(e){return[...new Set(e.filter(o=>o.lote_fiv_acasalamento_id).map(o=>o.lote_fiv_acasalamento_id))]}function S(e){return[...new Set(e.filter(o=>o.lote_fiv_id).map(o=>o.lote_fiv_id))]}export{S as a,D as b,P as c,I as d,b as e};
