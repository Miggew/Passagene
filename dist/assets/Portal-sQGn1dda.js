import{c as le,d as Xe,r as p,s as S,j as e,g as Ze,h as Ue,H as T,D as K,k as $e,ad as Qe,S as Je,F as Ke}from"./index-CWtHucPz.js";import{f as je}from"./statusLabels-IklKT8dE.js";import{u as We,C as c,c as o,a as L,b as D}from"./use-toast-C_ednEV-.js";import{T as B,a as q,b as v,c as n,d as V,e as d}from"./table-2v-HqcxP.js";import{S as ue,a as fe,b as Ne,c as ge,d as W}from"./select-BUr2m4f3.js";import{I as ve}from"./input-bF23Jkur.js";import{B as N}from"./badge-DewFfdNp.js";import{T as Y,a as ee,b,c as E}from"./tabs-DDZz3sTw.js";import{E as w}from"./EmptyState-B00kV8BS.js";import{A as Ye}from"./arrow-left-Xhigw_OT.js";import{B as se}from"./beef-BCNToI-2.js";import{B as ae}from"./baby-Dhx4v3PO.js";import{M as be}from"./map-pin-g2EPKA_5.js";import{U as es}from"./user-Bdl_cooq.js";import{P as ss}from"./phone-Dw8LmrXm.js";import{a as as,C as ts}from"./chevron-right-CY2M1G_-.js";import{S as Ee}from"./search-B6nVOFfl.js";import"./index-RvRMy3My.js";import"./index-H2w26JuE.js";import"./check-D_BDiPDp.js";import"./index-B77RxHAU.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=le("Container",[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=le("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=le("Repeat2",[["path",{d:"m2 9 3-3 3 3",key:"1ltn5i"}],["path",{d:"M13 18H7a2 2 0 0 1-2-2V6",key:"1r6tfw"}],["path",{d:"m22 15-3 3-3-3",key:"4rnwn2"}],["path",{d:"M11 6h6a2 2 0 0 1 2 2v10",key:"2f72bc"}]]);function Cs(){var ne;const{toast:we}=We(),{permissions:g}=Xe(),[_e,G]=p.useState(!0),[Ce,Pe]=p.useState(""),[O,Re]=p.useState({totalFazendas:0,totalReceptoras:0,totalEmServico:0,totalPrenhes:0}),[y,ye]=p.useState([]),[re,ze]=p.useState([]),[X,Ae]=p.useState([]),[Te,Le]=p.useState([]),[r,Z]=p.useState(null),[De,ce]=p.useState("resumo"),[_,Oe]=p.useState(""),[C,Me]=p.useState(""),[M,ke]=p.useState("todos"),U=g==null?void 0:g.isCliente,k=(ne=g==null?void 0:g.profile)==null?void 0:ne.cliente_id;p.useEffect(()=>{k?He(k):g&&!U&&G(!1)},[k,g,U]);const He=async a=>{try{G(!0);const{data:l}=await S.from("clientes").select("nome").eq("id",a).single();l&&Pe(l.nome);const{data:s,error:t}=await S.from("fazendas").select("*").eq("cliente_id",a).order("nome");if(t)throw t;const x=(s==null?void 0:s.map(m=>m.id))||[],{data:j}=await S.from("vw_receptoras_fazenda_atual").select("receptora_id, fazenda_id_atual").eq("cliente_id",a),z=(j==null?void 0:j.map(m=>m.receptora_id))||[];let A=[];if(z.length>0){const{data:m}=await S.from("receptoras").select("id, identificacao, nome, status_reprodutivo, data_provavel_parto").in("id",z);A=m||[]}const P=new Map;j==null||j.forEach(m=>{const i=A.find(u=>u.id===m.receptora_id);if(i){const u=P.get(m.fazenda_id_atual)||[];u.push(i),P.set(m.fazenda_id_atual,u)}});const F={EM_SINCRONIZACAO:{label:"Em Sincronização",proximo:"2_PASSO",proximoLabel:"2º Passo",cor:"bg-yellow-500"},SINCRONIZADA:{label:"Sincronizada",proximo:"TE",proximoLabel:"Transferência",cor:"bg-blue-500"},SERVIDA:{label:"Servida",proximo:"DG",proximoLabel:"Diagnóstico",cor:"bg-purple-500"},PRENHE:{label:"Prenhe",proximo:"SEXAGEM",proximoLabel:"Sexagem",cor:"bg-pink-500"},PRENHE_RETOQUE:{label:"Prenhe (retoque)",proximo:"SEXAGEM",proximoLabel:"Sexagem",cor:"bg-pink-400"},PRENHE_FEMEA:{label:"Prenhe de Fêmea",proximo:"PARTO",proximoLabel:"Parto",cor:"bg-green-500"},PRENHE_MACHO:{label:"Prenhe de Macho",proximo:"PARTO",proximoLabel:"Parto",cor:"bg-green-500"},PRENHE_SEM_SEXO:{label:"Prenhe (sem sexo)",proximo:"PARTO",proximoLabel:"Parto",cor:"bg-green-400"},PRENHE_2_SEXOS:{label:"Prenhe de Gêmeos",proximo:"PARTO",proximoLabel:"Parto",cor:"bg-green-600"}},I=["EM_SINCRONIZACAO","SINCRONIZADA","SERVIDA","PRENHE","PRENHE_RETOQUE","PRENHE_FEMEA","PRENHE_MACHO","PRENHE_SEM_SEXO","PRENHE_2_SEXOS"],Q=[];let de=0;for(const m of s||[]){const i=P.get(m.id)||[];de+=i.length;const u=new Map,J=new Map;i.forEach(f=>{const h=f.status_reprodutivo||"VAZIA";u.set(h,(u.get(h)||0)+1);const R=J.get(h)||[];R.push(f),J.set(h,R)});const Ge=Array.from(u.entries()).map(([f,h])=>({status:f,total:h})).sort((f,h)=>h.total-f.total),pe=[];for(const f of I){const h=F[f],R=J.get(f)||[];R.length>0&&h&&pe.push({status:f,statusLabel:h.label,total:R.length,proximoServico:h.proximo,proximoServicoLabel:h.proximoLabel,cor:h.cor,receptoras:R})}Q.push({...m,receptoras:i,receptorasPorStatus:Ge,pipeline:pe})}ye(Q);let xe=[];if(x.length>0){const{data:m}=await S.from("doadoras").select("id, registro, nome, raca, fazenda_id, fazenda:fazendas(nome)").in("fazenda_id",x).order("registro");xe=(m||[]).map(i=>{var u;return{id:i.id,registro:i.registro,nome:i.nome,raca:i.raca,fazenda_id:i.fazenda_id,fazenda_nome:(u=i.fazenda)==null?void 0:u.nome}})}Le(xe);const{data:qe}=await S.from("doses_semen").select("*, touro:touros(id, nome, registro, raca)").eq("cliente_id",a).order("created_at",{ascending:!1});ze(qe||[]);const{data:Ve}=await S.from("embrioes").select(`
          *,
          lote_fiv:lotes_fiv(id, data_abertura),
          acasalamento:lote_fiv_acasalamentos(
            id,
            dose_semen:doses_semen(id, touro:touros(id, nome, registro, raca)),
            aspiracao:aspiracoes_doadoras(id, data_aspiracao, doadora:doadoras(id, registro, nome))
          )
        `).eq("cliente_id",a).eq("status_atual","CONGELADO").order("data_congelamento",{ascending:!1});Ae(Ve||[]);let me=0,he=0;Q.forEach(m=>{m.pipeline.forEach(i=>{me+=i.total,i.status.includes("PRENHE")&&(he+=i.total)})}),Re({totalFazendas:(s||[]).length,totalReceptoras:de,totalEmServico:me,totalPrenhes:he})}catch(l){we({title:"Erro ao carregar dados",description:l instanceof Error?l.message:"Erro desconhecido",variant:"destructive"})}finally{G(!1)}},oe=re.filter(a=>{var s,t,x;const l=a.touro;return!_||((s=l==null?void 0:l.nome)==null?void 0:s.toLowerCase().includes(_.toLowerCase()))||((t=l==null?void 0:l.registro)==null?void 0:t.toLowerCase().includes(_.toLowerCase()))||((x=l==null?void 0:l.raca)==null?void 0:x.toLowerCase().includes(_.toLowerCase()))}),Fe=[...new Set(X.map(a=>a.classificacao).filter(Boolean))].sort(),ie=X.filter(a=>{var z,A,P,F,I;const l=a.acasalamento,s=(z=l==null?void 0:l.aspiracao)==null?void 0:z.doadora,t=(A=l==null?void 0:l.dose_semen)==null?void 0:A.touro,x=!C||((P=a.identificacao)==null?void 0:P.toLowerCase().includes(C.toLowerCase()))||((F=s==null?void 0:s.registro)==null?void 0:F.toLowerCase().includes(C.toLowerCase()))||((I=t==null?void 0:t.nome)==null?void 0:I.toLowerCase().includes(C.toLowerCase())),j=M==="todos"||a.classificacao===M;return x&&j}),H=r?Te.filter(a=>a.fazenda_id===r.id):[],$=a=>a?new Date(a).toLocaleDateString("pt-BR"):"-",Ie=a=>{Z(a),ce("resumo")},Be=a=>{const l=y.find(s=>s.id===a);l&&Z(l)};if(!U||!k)return e.jsx("div",{className:"space-y-6",children:e.jsx(w,{title:"Acesso restrito",description:"Esta area e exclusiva para usuarios do tipo Cliente."})});if(_e)return e.jsx(Ze,{});if(r){const a=r.pipeline.reduce((s,t)=>s+t.total,0),l=r.pipeline.filter(s=>s.status.includes("PRENHE")).reduce((s,t)=>s+t.total,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ue,{variant:"outline",size:"icon",onClick:()=>Z(null),children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:r.nome}),e.jsxs("p",{className:"text-slate-500",children:[r.receptoras.length," receptoras",r.localizacao&&` • ${r.localizacao}`]})]})]}),y.length>1&&e.jsxs(ue,{value:r.id,onValueChange:Be,children:[e.jsx(fe,{className:"w-[200px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx(Ne,{})]})}),e.jsx(ge,{children:y.map(s=>e.jsxs(W,{value:s.id,children:[s.nome," (",s.receptoras.length,")"]},s.id))})]})]}),e.jsxs(Y,{value:De,onValueChange:ce,className:"w-full",children:[e.jsxs(ee,{className:"grid w-full grid-cols-4",children:[e.jsxs(b,{value:"resumo",children:[e.jsx(T,{className:"w-4 h-4 mr-1"}),"Resumo"]}),e.jsxs(b,{value:"receptoras",children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),"Receptoras"]}),e.jsxs(b,{value:"doadoras",children:[e.jsx(K,{className:"w-4 h-4 mr-1"}),"Doadoras"]}),e.jsxs(b,{value:"previsao",children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),"Previsao"]})]}),e.jsx(E,{value:"resumo",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(c,{children:e.jsx(o,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Receptoras"}),e.jsx("p",{className:"text-2xl font-bold",children:r.receptoras.length})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Em Servico"}),e.jsx("p",{className:"text-2xl font-bold",children:a})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Prenhes"}),e.jsx("p",{className:"text-2xl font-bold",children:l})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-pink-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Doadoras"}),e.jsx("p",{className:"text-2xl font-bold",children:H.length})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.sigla&&e.jsx(c,{children:e.jsxs(o,{className:"pt-4",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Sigla"}),e.jsx("p",{className:"font-semibold text-lg",children:r.sigla})]})}),r.localizacao&&e.jsx(c,{children:e.jsxs(o,{className:"pt-4 flex items-start gap-2",children:[e.jsx(be,{className:"w-4 h-4 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Localizacao"}),e.jsx("p",{className:"font-medium",children:r.localizacao})]})]})}),r.responsavel&&e.jsx(c,{children:e.jsxs(o,{className:"pt-4 flex items-start gap-2",children:[e.jsx(es,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Responsavel"}),e.jsx("p",{className:"font-medium",children:r.responsavel})]})]})}),r.contato_responsavel&&e.jsx(c,{children:e.jsxs(o,{className:"pt-4 flex items-start gap-2",children:[e.jsx(ss,{className:"w-4 h-4 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Contato"}),e.jsx("p",{className:"font-medium",children:r.contato_responsavel})]})]})})]}),r.receptorasPorStatus.length>0&&e.jsxs(c,{children:[e.jsx(L,{className:"pb-2",children:e.jsx(D,{className:"text-base",children:"Receptoras por Status"})}),e.jsx(o,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:r.receptorasPorStatus.map(s=>e.jsxs(N,{variant:s.status.includes("PRENHE")?"default":"secondary",className:"text-sm py-1 px-3",children:[je(s.status),": ",s.total]},s.status))})})]})]})}),e.jsx(E,{value:"receptoras",children:e.jsxs(c,{children:[e.jsx(L,{children:e.jsxs(D,{children:["Receptoras (",r.receptoras.length,")"]})}),e.jsx(o,{children:r.receptoras.length===0?e.jsx(w,{title:"Nenhuma receptora",description:"Esta fazenda nao possui receptoras"}):e.jsxs(B,{children:[e.jsx(q,{children:e.jsxs(v,{children:[e.jsx(n,{children:"Identificacao"}),e.jsx(n,{children:"Nome"}),e.jsx(n,{children:"Status"}),e.jsx(n,{children:"Previsao Parto"})]})}),e.jsx(V,{children:r.receptoras.map(s=>{var t;return e.jsxs(v,{children:[e.jsx(d,{className:"font-medium",children:s.identificacao}),e.jsx(d,{children:s.nome||"-"}),e.jsx(d,{children:e.jsx(N,{variant:(t=s.status_reprodutivo)!=null&&t.includes("PRENHE")?"default":"secondary",children:je(s.status_reprodutivo||"VAZIA")})}),e.jsx(d,{children:s.data_provavel_parto?$(s.data_provavel_parto):"-"})]},s.id)})})]})})]})}),e.jsx(E,{value:"doadoras",children:e.jsxs(c,{children:[e.jsx(L,{children:e.jsxs(D,{children:["Doadoras (",H.length,")"]})}),e.jsx(o,{children:H.length===0?e.jsx(w,{title:"Nenhuma doadora",description:"Esta fazenda nao possui doadoras"}):e.jsxs(B,{children:[e.jsx(q,{children:e.jsxs(v,{children:[e.jsx(n,{children:"Registro"}),e.jsx(n,{children:"Nome"}),e.jsx(n,{children:"Raca"})]})}),e.jsx(V,{children:H.map(s=>e.jsxs(v,{children:[e.jsx(d,{className:"font-medium",children:s.registro||"-"}),e.jsx(d,{children:s.nome||"-"}),e.jsx(d,{children:s.raca||"-"})]},s.id))})]})})]})}),e.jsx(E,{value:"previsao",children:e.jsx("div",{className:"space-y-4",children:r.pipeline.length===0?e.jsx(c,{children:e.jsx(o,{className:"py-8",children:e.jsx(w,{title:"Nenhum servico pendente",description:"As receptoras desta fazenda estao todas vazias ou aguardando novo protocolo"})})}):r.pipeline.map(s=>e.jsx(c,{children:e.jsxs(o,{className:"pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s.cor}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.statusLabel}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.total," receptora",s.total!==1?"s":""]})]})]}),e.jsx(as,{className:"w-6 h-6 text-slate-300 hidden sm:block"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"text-right sm:text-left",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Proximo"}),e.jsxs(N,{className:`text-sm ${s.proximoServico==="2_PASSO"?"bg-yellow-100 text-yellow-800":s.proximoServico==="TE"?"bg-blue-100 text-blue-800":s.proximoServico==="DG"?"bg-purple-100 text-purple-800":s.proximoServico==="SEXAGEM"?"bg-pink-100 text-pink-800":"bg-green-100 text-green-800"}`,children:[s.proximoServico==="2_PASSO"&&e.jsx(ls,{className:"w-3 h-3 mr-1"}),s.proximoServico==="TE"&&e.jsx($e,{className:"w-3 h-3 mr-1"}),s.proximoServico==="DG"&&e.jsx(Qe,{className:"w-3 h-3 mr-1"}),s.proximoServico==="SEXAGEM"&&e.jsx(K,{className:"w-3 h-3 mr-1"}),s.proximoServico==="PARTO"&&e.jsx(ae,{className:"w-3 h-3 mr-1"}),s.proximoServicoLabel]})]})})]}),s.proximoServico==="PARTO"&&s.receptoras.some(t=>t.data_provavel_parto)&&e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsxs("p",{className:"text-xs text-slate-500 mb-2 flex items-center gap-1",children:[e.jsx(ts,{className:"w-3 h-3"}),"Previsoes de Parto"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.receptoras.filter(t=>t.data_provavel_parto).sort((t,x)=>new Date(t.data_provavel_parto).getTime()-new Date(x.data_provavel_parto).getTime()).map(t=>e.jsxs(N,{variant:"outline",className:"text-xs",children:[t.identificacao,": ",$(t.data_provavel_parto)]},t.id))})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Receptoras"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.receptoras.slice(0,10).map(t=>e.jsx(N,{variant:"secondary",className:"text-xs font-mono",children:t.identificacao},t.id)),s.receptoras.length>10&&e.jsxs(N,{variant:"secondary",className:"text-xs bg-slate-100",children:["+",s.receptoras.length-10," mais"]})]})]})]})},s.status))})})]})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900",children:["Ola, ",Ce]}),e.jsx("p",{className:"text-slate-500",children:"Bem-vindo ao seu portal"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(c,{children:e.jsx(o,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Fazendas"}),e.jsx("p",{className:"text-2xl font-bold",children:O.totalFazendas})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Receptoras"}),e.jsx("p",{className:"text-2xl font-bold",children:O.totalReceptoras})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Em Servico"}),e.jsx("p",{className:"text-2xl font-bold",children:O.totalEmServico})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Prenhes"}),e.jsx("p",{className:"text-2xl font-bold",children:O.totalPrenhes})]})]})})})]}),e.jsxs(Y,{defaultValue:"fazendas",className:"w-full",children:[e.jsxs(ee,{className:"grid w-full grid-cols-2",children:[e.jsxs(b,{value:"fazendas",children:[e.jsx(T,{className:"w-4 h-4 mr-1"}),"Fazendas"]}),e.jsxs(b,{value:"botijao",children:[e.jsx(Se,{className:"w-4 h-4 mr-1"}),"Botijao"]})]}),e.jsx(E,{value:"fazendas",children:y.length===0?e.jsx(c,{children:e.jsx(o,{className:"py-8",children:e.jsx(w,{title:"Nenhuma fazenda",description:"Voce ainda nao possui fazendas cadastradas"})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(a=>{const l=a.pipeline.reduce((t,x)=>t+x.total,0),s=a.pipeline.filter(t=>t.status.includes("PRENHE")).reduce((t,x)=>t+x.total,0);return e.jsxs(c,{className:"cursor-pointer hover:shadow-md hover:border-green-300 transition-all",onClick:()=>Ie(a),children:[e.jsxs(L,{className:"pb-2",children:[e.jsxs(D,{className:"text-lg flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-green-600"}),a.nome,a.sigla&&e.jsx(N,{variant:"outline",className:"ml-auto",children:a.sigla})]}),a.localizacao&&e.jsxs("p",{className:"text-sm text-slate-500 flex items-center gap-1",children:[e.jsx(be,{className:"w-3 h-3"}),a.localizacao]})]}),e.jsxs(o,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:a.receptoras.length}),e.jsx("p",{className:"text-xs text-slate-500",children:"Receptoras"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l}),e.jsx("p",{className:"text-xs text-slate-500",children:"Em Servico"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:s}),e.jsx("p",{className:"text-xs text-slate-500",children:"Prenhes"})]})]}),a.pipeline.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Proximos servicos:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:a.pipeline.slice(0,3).map(t=>e.jsxs(N,{className:`text-xs ${t.proximoServico==="2_PASSO"?"bg-yellow-100 text-yellow-800":t.proximoServico==="TE"?"bg-blue-100 text-blue-800":t.proximoServico==="DG"?"bg-purple-100 text-purple-800":t.proximoServico==="SEXAGEM"?"bg-pink-100 text-pink-800":"bg-green-100 text-green-800"}`,children:[t.proximoServicoLabel,": ",t.total]},t.status))})]})]})]},a.id)})})}),e.jsx(E,{value:"botijao",children:e.jsxs(c,{children:[e.jsxs(L,{className:"pb-2",children:[e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5"}),"Botijao - Estoque Criopreservado"]}),e.jsx("p",{className:"text-sm text-slate-500",children:"Embrioes congelados e doses de semen armazenados"})]}),e.jsx(o,{children:e.jsxs(Y,{defaultValue:"embrioes",className:"w-full",children:[e.jsxs(ee,{className:"grid w-full grid-cols-2 mb-4",children:[e.jsxs(b,{value:"embrioes",children:[e.jsx(Je,{className:"w-4 h-4 mr-1"}),"Embrioes (",X.length,")"]}),e.jsxs(b,{value:"doses",children:[e.jsx(Ke,{className:"w-4 h-4 mr-1"}),"Doses (",re.reduce((a,l)=>a+(l.quantidade||0),0),")"]})]}),e.jsxs(E,{value:"embrioes",className:"mt-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between mb-4",children:[e.jsxs("div",{className:"relative max-w-xs",children:[e.jsx(Ee,{className:"absolute left-2 top-2.5 h-4 w-4 text-slate-400"}),e.jsx(ve,{placeholder:"Buscar embriao...",value:C,onChange:a=>Me(a.target.value),className:"pl-8"})]}),e.jsxs(ue,{value:M,onValueChange:ke,children:[e.jsx(fe,{className:"w-[150px]",children:e.jsx(Ne,{placeholder:"Classificacao"})}),e.jsxs(ge,{children:[e.jsx(W,{value:"todos",children:"Todas"}),Fe.map(a=>e.jsx(W,{value:a,children:a},a))]})]})]}),ie.length===0?e.jsx(w,{title:"Nenhum embriao encontrado",description:C||M!=="todos"?"Tente ajustar os filtros":"Voce nao possui embrioes congelados"}):e.jsxs(B,{children:[e.jsx(q,{children:e.jsxs(v,{children:[e.jsx(n,{children:"Identificacao"}),e.jsx(n,{children:"Classificacao"}),e.jsx(n,{children:"Doadora"}),e.jsx(n,{children:"Touro"}),e.jsx(n,{children:"Data Cong."}),e.jsx(n,{children:"Localizacao"})]})}),e.jsx(V,{children:ie.map(a=>{var x,j;const l=a.acasalamento,s=(x=l==null?void 0:l.aspiracao)==null?void 0:x.doadora,t=(j=l==null?void 0:l.dose_semen)==null?void 0:j.touro;return e.jsxs(v,{children:[e.jsx(d,{className:"font-medium font-mono text-sm",children:a.identificacao||"-"}),e.jsx(d,{children:a.classificacao?e.jsx(N,{variant:"secondary",children:a.classificacao}):"-"}),e.jsx(d,{children:(s==null?void 0:s.registro)||(s==null?void 0:s.nome)||"-"}),e.jsxs(d,{children:[(t==null?void 0:t.nome)||"-",(t==null?void 0:t.registro)&&e.jsxs("span",{className:"text-slate-500 text-xs ml-1",children:["(",t.registro,")"]})]}),e.jsx(d,{children:$(a.data_congelamento)}),e.jsx(d,{children:a.localizacao_atual||"-"})]},a.id)})})]})]}),e.jsxs(E,{value:"doses",className:"mt-0",children:[e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-between mb-4",children:e.jsxs("div",{className:"relative max-w-xs",children:[e.jsx(Ee,{className:"absolute left-2 top-2.5 h-4 w-4 text-slate-400"}),e.jsx(ve,{placeholder:"Buscar touro...",value:_,onChange:a=>Oe(a.target.value),className:"pl-8"})]})}),oe.length===0?e.jsx(w,{title:"Nenhuma dose encontrada",description:_?"Tente ajustar a busca":"Voce nao possui doses de semen em estoque"}):e.jsxs(B,{children:[e.jsx(q,{children:e.jsxs(v,{children:[e.jsx(n,{children:"Touro"}),e.jsx(n,{children:"Raca"}),e.jsx(n,{children:"Tipo"}),e.jsx(n,{className:"text-center",children:"Quantidade"})]})}),e.jsx(V,{children:oe.map(a=>{var l,s,t;return e.jsxs(v,{children:[e.jsxs(d,{className:"font-medium",children:[((l=a.touro)==null?void 0:l.nome)||"Touro desconhecido",((s=a.touro)==null?void 0:s.registro)&&e.jsxs("span",{className:"text-slate-500 ml-2",children:["(",a.touro.registro,")"]})]}),e.jsx(d,{children:((t=a.touro)==null?void 0:t.raca)||"-"}),e.jsx(d,{children:e.jsx(N,{variant:a.tipo_semen==="SEXADO"?"default":"secondary",children:a.tipo_semen||"CONVENCIONAL"})}),e.jsx(d,{className:"text-center font-semibold",children:a.quantidade??0})]},a.id)})})]})]})]})})]})})]})]})}export{Cs as default};
