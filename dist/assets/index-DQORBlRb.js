var Yg=e=>{throw TypeError(e)};var th=(e,t,a)=>t.has(e)||Yg("Cannot "+a);var xe=(e,t,a)=>(th(e,t,"read from private field"),a?a.call(e):t.get(e)),wt=(e,t,a)=>t.has(e)?Yg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,a),We=(e,t,a,s)=>(th(e,t,"write to private field"),s?s.call(e,a):t.set(e,a),a),Ta=(e,t,a)=>(th(e,t,"access private method"),a);var pd=(e,t,a,s)=>({set _(n){We(e,t,n,a)},get _(){return xe(e,t,s)}});function cC(e,t){for(var a=0;a<t.length;a++){const s=t[a];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in e)){const o=Object.getOwnPropertyDescriptor(s,n);o&&Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();var Ns=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ey(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function dC(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var a=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var n=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(a,s,n.get?n:{enumerable:!0,get:function(){return e[s]}})}),a}var ty={exports:{}},Ku={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uC=Symbol.for("react.transitional.element"),fC=Symbol.for("react.fragment");function ay(e,t,a){var s=null;if(a!==void 0&&(s=""+a),t.key!==void 0&&(s=""+t.key),"key"in t){a={};for(var n in t)n!=="key"&&(a[n]=t[n])}else a=t;return t=a.ref,{$$typeof:uC,type:e,key:s,ref:t!==void 0?t:null,props:a}}Ku.Fragment=fC;Ku.jsx=ay;Ku.jsxs=ay;ty.exports=Ku;var r=ty.exports,sy={exports:{}},Xu={},ry={exports:{}},ny={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,F){var I=N.length;N.push(F);e:for(;0<I;){var j=I-1>>>1,A=N[j];if(0<n(A,F))N[j]=F,N[I]=A,I=j;else break e}}function a(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var F=N[0],I=N.pop();if(I!==F){N[0]=I;e:for(var j=0,A=N.length,L=A>>>1;j<L;){var R=2*(j+1)-1,P=N[R],H=R+1,V=N[H];if(0>n(P,I))H<A&&0>n(V,P)?(N[j]=V,N[H]=I,j=H):(N[j]=P,N[R]=I,j=R);else if(H<A&&0>n(V,I))N[j]=V,N[H]=I,j=H;else break e}}return F}function n(N,F){var I=N.sortIndex-F.sortIndex;return I!==0?I:N.id-F.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],f=1,h=null,p=3,m=!1,b=!1,x=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;function w(N){for(var F=a(d);F!==null;){if(F.callback===null)s(d);else if(F.startTime<=N)s(d),F.sortIndex=F.expirationTime,t(c,F);else break;F=a(d)}}function E(N){if(x=!1,w(N),!b)if(a(c)!==null)b=!0,S||(S=!0,W());else{var F=a(d);F!==null&&D(E,F.startTime-N)}}var S=!1,T=-1,q=5,k=-1;function $(){return y?!0:!(e.unstable_now()-k<q)}function Z(){if(y=!1,S){var N=e.unstable_now();k=N;var F=!0;try{e:{b=!1,x&&(x=!1,g(T),T=-1),m=!0;var I=p;try{t:{for(w(N),h=a(c);h!==null&&!(h.expirationTime>N&&$());){var j=h.callback;if(typeof j=="function"){h.callback=null,p=h.priorityLevel;var A=j(h.expirationTime<=N);if(N=e.unstable_now(),typeof A=="function"){h.callback=A,w(N),F=!0;break t}h===a(c)&&s(c),w(N)}else s(c);h=a(c)}if(h!==null)F=!0;else{var L=a(d);L!==null&&D(E,L.startTime-N),F=!1}}break e}finally{h=null,p=I,m=!1}F=void 0}}finally{F?W():S=!1}}}var W;if(typeof v=="function")W=function(){v(Z)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,O=le.port2;le.port1.onmessage=Z,W=function(){O.postMessage(null)}}else W=function(){_(Z,0)};function D(N,F){T=_(function(){N(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(N){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var I=p;p=F;try{return N()}finally{p=I}},e.unstable_requestPaint=function(){y=!0},e.unstable_runWithPriority=function(N,F){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var I=p;p=N;try{return F()}finally{p=I}},e.unstable_scheduleCallback=function(N,F,I){var j=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?j+I:j):I=j,N){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=I+A,N={id:f++,callback:F,priorityLevel:N,startTime:I,expirationTime:A,sortIndex:-1},I>j?(N.sortIndex=I,t(d,N),a(c)===null&&N===a(d)&&(x?(g(T),T=-1):x=!0,D(E,I-j))):(N.sortIndex=A,t(c,N),b||m||(b=!0,S||(S=!0,W()))),N},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(N){var F=p;return function(){var I=p;p=F;try{return N.apply(this,arguments)}finally{p=I}}}})(ny);ry.exports=ny;var hC=ry.exports,oy={exports:{}},nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up=Symbol.for("react.transitional.element"),mC=Symbol.for("react.portal"),pC=Symbol.for("react.fragment"),vC=Symbol.for("react.strict_mode"),gC=Symbol.for("react.profiler"),xC=Symbol.for("react.consumer"),_C=Symbol.for("react.context"),yC=Symbol.for("react.forward_ref"),bC=Symbol.for("react.suspense"),jC=Symbol.for("react.memo"),iy=Symbol.for("react.lazy"),Qg=Symbol.iterator;function wC(e){return e===null||typeof e!="object"?null:(e=Qg&&e[Qg]||e["@@iterator"],typeof e=="function"?e:null)}var ly={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cy=Object.assign,dy={};function nl(e,t,a){this.props=e,this.context=t,this.refs=dy,this.updater=a||ly}nl.prototype.isReactComponent={};nl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};nl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function uy(){}uy.prototype=nl.prototype;function Hp(e,t,a){this.props=e,this.context=t,this.refs=dy,this.updater=a||ly}var Vp=Hp.prototype=new uy;Vp.constructor=Hp;cy(Vp,nl.prototype);Vp.isPureReactComponent=!0;var Kg=Array.isArray,Jt={H:null,A:null,T:null,S:null,V:null},fy=Object.prototype.hasOwnProperty;function Gp(e,t,a,s,n,o){return a=o.ref,{$$typeof:Up,type:e,key:t,ref:a!==void 0?a:null,props:o}}function EC(e,t){return Gp(e.type,t,void 0,void 0,void 0,e.props)}function Zp(e){return typeof e=="object"&&e!==null&&e.$$typeof===Up}function SC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return t[a]})}var Xg=/\/+/g;function ah(e,t){return typeof e=="object"&&e!==null&&e.key!=null?SC(""+e.key):t.toString(36)}function Jg(){}function NC(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Jg,Jg):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Qo(e,t,a,s,n){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"bigint":case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Up:case mC:i=!0;break;case iy:return i=e._init,Qo(i(e._payload),t,a,s,n)}}if(i)return n=n(e),i=s===""?"."+ah(e,0):s,Kg(n)?(a="",i!=null&&(a=i.replace(Xg,"$&/")+"/"),Qo(n,t,a,"",function(d){return d})):n!=null&&(Zp(n)&&(n=EC(n,a+(n.key==null||e&&e.key===n.key?"":(""+n.key).replace(Xg,"$&/")+"/")+i)),t.push(n)),1;i=0;var l=s===""?".":s+":";if(Kg(e))for(var c=0;c<e.length;c++)s=e[c],o=l+ah(s,c),i+=Qo(s,t,a,o,n);else if(c=wC(e),typeof c=="function")for(e=c.call(e),c=0;!(s=e.next()).done;)s=s.value,o=l+ah(s,c++),i+=Qo(s,t,a,o,n);else if(o==="object"){if(typeof e.then=="function")return Qo(NC(e),t,a,s,n);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return i}function vd(e,t,a){if(e==null)return e;var s=[],n=0;return Qo(e,s,"","",function(o){return t.call(a,o,n++)}),s}function CC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(a){(e._status===0||e._status===-1)&&(e._status=1,e._result=a)},function(a){(e._status===0||e._status===-1)&&(e._status=2,e._result=a)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Wg=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function AC(){}nt.Children={map:vd,forEach:function(e,t,a){vd(e,function(){t.apply(this,arguments)},a)},count:function(e){var t=0;return vd(e,function(){t++}),t},toArray:function(e){return vd(e,function(t){return t})||[]},only:function(e){if(!Zp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=nl;nt.Fragment=pC;nt.Profiler=gC;nt.PureComponent=Hp;nt.StrictMode=vC;nt.Suspense=bC;nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Jt;nt.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Jt.H.useMemoCache(e)}};nt.cache=function(e){return function(){return e.apply(null,arguments)}};nt.cloneElement=function(e,t,a){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var s=cy({},e.props),n=e.key,o=void 0;if(t!=null)for(i in t.ref!==void 0&&(o=void 0),t.key!==void 0&&(n=""+t.key),t)!fy.call(t,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&t.ref===void 0||(s[i]=t[i]);var i=arguments.length-2;if(i===1)s.children=a;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];s.children=l}return Gp(e.type,n,void 0,void 0,o,s)};nt.createContext=function(e){return e={$$typeof:_C,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:xC,_context:e},e};nt.createElement=function(e,t,a){var s,n={},o=null;if(t!=null)for(s in t.key!==void 0&&(o=""+t.key),t)fy.call(t,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(n[s]=t[s]);var i=arguments.length-2;if(i===1)n.children=a;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];n.children=l}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)n[s]===void 0&&(n[s]=i[s]);return Gp(e,o,void 0,void 0,null,n)};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:yC,render:e}};nt.isValidElement=Zp;nt.lazy=function(e){return{$$typeof:iy,_payload:{_status:-1,_result:e},_init:CC}};nt.memo=function(e,t){return{$$typeof:jC,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=Jt.T,a={};Jt.T=a;try{var s=e(),n=Jt.S;n!==null&&n(a,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(AC,Wg)}catch(o){Wg(o)}finally{Jt.T=t}};nt.unstable_useCacheRefresh=function(){return Jt.H.useCacheRefresh()};nt.use=function(e){return Jt.H.use(e)};nt.useActionState=function(e,t,a){return Jt.H.useActionState(e,t,a)};nt.useCallback=function(e,t){return Jt.H.useCallback(e,t)};nt.useContext=function(e){return Jt.H.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e,t){return Jt.H.useDeferredValue(e,t)};nt.useEffect=function(e,t,a){var s=Jt.H;if(typeof a=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(e,t)};nt.useId=function(){return Jt.H.useId()};nt.useImperativeHandle=function(e,t,a){return Jt.H.useImperativeHandle(e,t,a)};nt.useInsertionEffect=function(e,t){return Jt.H.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return Jt.H.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return Jt.H.useMemo(e,t)};nt.useOptimistic=function(e,t){return Jt.H.useOptimistic(e,t)};nt.useReducer=function(e,t,a){return Jt.H.useReducer(e,t,a)};nt.useRef=function(e){return Jt.H.useRef(e)};nt.useState=function(e){return Jt.H.useState(e)};nt.useSyncExternalStore=function(e,t,a){return Jt.H.useSyncExternalStore(e,t,a)};nt.useTransition=function(){return Jt.H.useTransition()};nt.version="19.1.1";oy.exports=nt;var u=oy.exports;const Ee=ey(u),Yp=cC({__proto__:null,default:Ee},[u]);var hy={exports:{}},Ba={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TC=u;function my(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Gr(){}var $a={d:{f:Gr,r:function(){throw Error(my(522))},D:Gr,C:Gr,L:Gr,m:Gr,X:Gr,S:Gr,M:Gr},p:0,findDOMNode:null},RC=Symbol.for("react.portal");function DC(e,t,a){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:RC,key:s==null?null:""+s,children:e,containerInfo:t,implementation:a}}var Hl=TC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ju(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Ba.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$a;Ba.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(my(299));return DC(e,t,null,a)};Ba.flushSync=function(e){var t=Hl.T,a=$a.p;try{if(Hl.T=null,$a.p=2,e)return e()}finally{Hl.T=t,$a.p=a,$a.d.f()}};Ba.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,$a.d.C(e,t))};Ba.prefetchDNS=function(e){typeof e=="string"&&$a.d.D(e)};Ba.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var a=t.as,s=Ju(a,t.crossOrigin),n=typeof t.integrity=="string"?t.integrity:void 0,o=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;a==="style"?$a.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:s,integrity:n,fetchPriority:o}):a==="script"&&$a.d.X(e,{crossOrigin:s,integrity:n,fetchPriority:o,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Ba.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var a=Ju(t.as,t.crossOrigin);$a.d.M(e,{crossOrigin:a,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&$a.d.M(e)};Ba.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var a=t.as,s=Ju(a,t.crossOrigin);$a.d.L(e,a,{crossOrigin:s,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Ba.preloadModule=function(e,t){if(typeof e=="string")if(t){var a=Ju(t.as,t.crossOrigin);$a.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:a,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else $a.d.m(e)};Ba.requestFormReset=function(e){$a.d.r(e)};Ba.unstable_batchedUpdates=function(e,t){return e(t)};Ba.useFormState=function(e,t,a){return Hl.H.useFormState(e,t,a)};Ba.useFormStatus=function(){return Hl.H.useHostTransitionStatus()};Ba.version="19.1.1";function py(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(py)}catch(e){console.error(e)}}py(),hy.exports=Ba;var Ro=hy.exports;const vy=ey(Ro);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var va=hC,gy=u,OC=Ro;function ye(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function xy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lc(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function _y(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ex(e){if(Lc(e)!==e)throw Error(ye(188))}function zC(e){var t=e.alternate;if(!t){if(t=Lc(e),t===null)throw Error(ye(188));return t!==e?null:e}for(var a=e,s=t;;){var n=a.return;if(n===null)break;var o=n.alternate;if(o===null){if(s=n.return,s!==null){a=s;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===a)return ex(n),e;if(o===s)return ex(n),t;o=o.sibling}throw Error(ye(188))}if(a.return!==s.return)a=n,s=o;else{for(var i=!1,l=n.child;l;){if(l===a){i=!0,a=n,s=o;break}if(l===s){i=!0,s=n,a=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===a){i=!0,a=o,s=n;break}if(l===s){i=!0,s=o,a=n;break}l=l.sibling}if(!i)throw Error(ye(189))}}if(a.alternate!==s)throw Error(ye(190))}if(a.tag!==3)throw Error(ye(188));return a.stateNode.current===a?e:t}function yy(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=yy(e),t!==null)return t;e=e.sibling}return null}var Kt=Object.assign,MC=Symbol.for("react.element"),gd=Symbol.for("react.transitional.element"),Il=Symbol.for("react.portal"),si=Symbol.for("react.fragment"),by=Symbol.for("react.strict_mode"),um=Symbol.for("react.profiler"),kC=Symbol.for("react.provider"),jy=Symbol.for("react.consumer"),Nr=Symbol.for("react.context"),Qp=Symbol.for("react.forward_ref"),fm=Symbol.for("react.suspense"),hm=Symbol.for("react.suspense_list"),Kp=Symbol.for("react.memo"),tn=Symbol.for("react.lazy"),mm=Symbol.for("react.activity"),PC=Symbol.for("react.memo_cache_sentinel"),tx=Symbol.iterator;function Sl(e){return e===null||typeof e!="object"?null:(e=tx&&e[tx]||e["@@iterator"],typeof e=="function"?e:null)}var IC=Symbol.for("react.client.reference");function pm(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===IC?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case si:return"Fragment";case um:return"Profiler";case by:return"StrictMode";case fm:return"Suspense";case hm:return"SuspenseList";case mm:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Il:return"Portal";case Nr:return(e.displayName||"Context")+".Provider";case jy:return(e._context.displayName||"Context")+".Consumer";case Qp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Kp:return t=e.displayName||null,t!==null?t:pm(e.type)||"Memo";case tn:t=e._payload,e=e._init;try{return pm(e(t))}catch{}}return null}var Ll=Array.isArray,Ye=gy.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,St=OC.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,co={pending:!1,data:null,method:null,action:null},vm=[],ri=-1;function cr(e){return{current:e}}function ba(e){0>ri||(e.current=vm[ri],vm[ri]=null,ri--)}function Wt(e,t){ri++,vm[ri]=e.current,e.current=t}var rr=cr(null),dc=cr(null),yn=cr(null),iu=cr(null);function lu(e,t){switch(Wt(yn,t),Wt(dc,e),Wt(rr,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?o0(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=o0(t),e=Fj(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ba(rr),Wt(rr,e)}function Pi(){ba(rr),ba(dc),ba(yn)}function gm(e){e.memoizedState!==null&&Wt(iu,e);var t=rr.current,a=Fj(t,e.type);t!==a&&(Wt(dc,e),Wt(rr,a))}function cu(e){dc.current===e&&(ba(rr),ba(dc)),iu.current===e&&(ba(iu),yc._currentValue=co)}var xm=Object.prototype.hasOwnProperty,Xp=va.unstable_scheduleCallback,sh=va.unstable_cancelCallback,LC=va.unstable_shouldYield,FC=va.unstable_requestPaint,nr=va.unstable_now,$C=va.unstable_getCurrentPriorityLevel,wy=va.unstable_ImmediatePriority,Ey=va.unstable_UserBlockingPriority,du=va.unstable_NormalPriority,qC=va.unstable_LowPriority,Sy=va.unstable_IdlePriority,BC=va.log,UC=va.unstable_setDisableYieldValue,Fc=null,ds=null;function pn(e){if(typeof BC=="function"&&UC(e),ds&&typeof ds.setStrictMode=="function")try{ds.setStrictMode(Fc,e)}catch{}}var us=Math.clz32?Math.clz32:GC,HC=Math.log,VC=Math.LN2;function GC(e){return e>>>=0,e===0?32:31-(HC(e)/VC|0)|0}var xd=256,_d=4194304;function Jn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Wu(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var n=0,o=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var l=s&134217727;return l!==0?(s=l&~o,s!==0?n=Jn(s):(i&=l,i!==0?n=Jn(i):a||(a=l&~e,a!==0&&(n=Jn(a))))):(l=s&~o,l!==0?n=Jn(l):i!==0?n=Jn(i):a||(a=s&~e,a!==0&&(n=Jn(a)))),n===0?0:t!==0&&t!==n&&!(t&o)&&(o=n&-n,a=t&-t,o>=a||o===32&&(a&4194048)!==0)?t:n}function $c(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ZC(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ny(){var e=xd;return xd<<=1,!(xd&4194048)&&(xd=256),e}function Cy(){var e=_d;return _d<<=1,!(_d&62914560)&&(_d=4194304),e}function rh(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function qc(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function YC(e,t,a,s,n,o){var i=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var l=e.entanglements,c=e.expirationTimes,d=e.hiddenUpdates;for(a=i&~a;0<a;){var f=31-us(a),h=1<<f;l[f]=0,c[f]=-1;var p=d[f];if(p!==null)for(d[f]=null,f=0;f<p.length;f++){var m=p[f];m!==null&&(m.lane&=-536870913)}a&=~h}s!==0&&Ay(e,s,0),o!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=o&~(i&~t))}function Ay(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-us(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&4194090}function Ty(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-us(a),n=1<<s;n&t|e[s]&t&&(e[s]|=t),a&=~n}}function Jp(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Wp(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Ry(){var e=St.p;return e!==0?e:(e=window.event,e===void 0?32:Qj(e.type))}function QC(e,t){var a=St.p;try{return St.p=e,t()}finally{St.p=a}}var In=Math.random().toString(36).slice(2),Oa="__reactFiber$"+In,Ja="__reactProps$"+In,ol="__reactContainer$"+In,_m="__reactEvents$"+In,KC="__reactListeners$"+In,XC="__reactHandles$"+In,ax="__reactResources$"+In,Bc="__reactMarker$"+In;function ev(e){delete e[Oa],delete e[Ja],delete e[_m],delete e[KC],delete e[XC]}function ni(e){var t=e[Oa];if(t)return t;for(var a=e.parentNode;a;){if(t=a[ol]||a[Oa]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=c0(e);e!==null;){if(a=e[Oa])return a;e=c0(e)}return t}e=a,a=e.parentNode}return null}function il(e){if(e=e[Oa]||e[ol]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Fl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(ye(33))}function pi(e){var t=e[ax];return t||(t=e[ax]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function _a(e){e[Bc]=!0}var Dy=new Set,Oy={};function Do(e,t){Ii(e,t),Ii(e+"Capture",t)}function Ii(e,t){for(Oy[e]=t,e=0;e<t.length;e++)Dy.add(t[e])}var JC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sx={},rx={};function WC(e){return xm.call(rx,e)?!0:xm.call(sx,e)?!1:JC.test(e)?rx[e]=!0:(sx[e]=!0,!1)}function Ud(e,t,a){if(WC(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function yd(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function gr(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}var nh,nx;function Ko(e){if(nh===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);nh=t&&t[1]||"",nx=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nh+e+nx}var oh=!1;function ih(e,t){if(!e||oh)return"";oh=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(m){var p=m}Reflect.construct(e,[],h)}else{try{h.call()}catch(m){p=m}e.call(h.prototype)}}else{try{throw Error()}catch(m){p=m}(h=e())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(m){if(m&&p&&typeof m.stack=="string")return[m.stack,p.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=s.DetermineComponentFrameRoot(),i=o[0],l=o[1];if(i&&l){var c=i.split(`
`),d=l.split(`
`);for(n=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;n<d.length&&!d[n].includes("DetermineComponentFrameRoot");)n++;if(s===c.length||n===d.length)for(s=c.length-1,n=d.length-1;1<=s&&0<=n&&c[s]!==d[n];)n--;for(;1<=s&&0<=n;s--,n--)if(c[s]!==d[n]){if(s!==1||n!==1)do if(s--,n--,0>n||c[s]!==d[n]){var f=`
`+c[s].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=s&&0<=n);break}}}finally{oh=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ko(a):""}function eA(e){switch(e.tag){case 26:case 27:case 5:return Ko(e.type);case 16:return Ko("Lazy");case 13:return Ko("Suspense");case 19:return Ko("SuspenseList");case 0:case 15:return ih(e.type,!1);case 11:return ih(e.type.render,!1);case 1:return ih(e.type,!0);case 31:return Ko("Activity");default:return""}}function ox(e){try{var t="";do t+=eA(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ys(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zy(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tA(e){var t=zy(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,o=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function uu(e){e._valueTracker||(e._valueTracker=tA(e))}function My(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=zy(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function fu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var aA=/[\n"\\]/g;function ws(e){return e.replace(aA,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ym(e,t,a,s,n,o,i,l){e.name="",i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.type=i:e.removeAttribute("type"),t!=null?i==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ys(t)):e.value!==""+ys(t)&&(e.value=""+ys(t)):i!=="submit"&&i!=="reset"||e.removeAttribute("value"),t!=null?bm(e,i,ys(t)):a!=null?bm(e,i,ys(a)):s!=null&&e.removeAttribute("value"),n==null&&o!=null&&(e.defaultChecked=!!o),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+ys(l):e.removeAttribute("name")}function ky(e,t,a,s,n,o,i,l){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||a!=null){if(!(o!=="submit"&&o!=="reset"||t!=null))return;a=a!=null?""+ys(a):"",t=t!=null?""+ys(t):a,l||t===e.value||(e.value=t),e.defaultValue=t}s=s??n,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=l?e.checked:!!s,e.defaultChecked=!!s,i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.name=i)}function bm(e,t,a){t==="number"&&fu(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function vi(e,t,a,s){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&s&&(e[a].defaultSelected=!0)}else{for(a=""+ys(a),t=null,n=0;n<e.length;n++){if(e[n].value===a){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Py(e,t,a){if(t!=null&&(t=""+ys(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+ys(a):""}function Iy(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(ye(92));if(Ll(s)){if(1<s.length)throw Error(ye(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=ys(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s)}function Li(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var sA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ix(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||sA.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Ly(e,t,a){if(t!=null&&typeof t!="object")throw Error(ye(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var n in t)s=t[n],t.hasOwnProperty(n)&&a[n]!==s&&ix(e,n,s)}else for(var o in t)t.hasOwnProperty(o)&&ix(e,o,t[o])}function tv(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hd(e){return nA.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var jm=null;function av(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var oi=null,gi=null;function lx(e){var t=il(e);if(t&&(e=t.stateNode)){var a=e[Ja]||null;e:switch(e=t.stateNode,t.type){case"input":if(ym(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ws(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var n=s[Ja]||null;if(!n)throw Error(ye(90));ym(s,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&My(s)}break e;case"textarea":Py(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&vi(e,!!a.multiple,t,!1)}}}var lh=!1;function Fy(e,t,a){if(lh)return e(t,a);lh=!0;try{var s=e(t);return s}finally{if(lh=!1,(oi!==null||gi!==null)&&(df(),oi&&(t=oi,e=gi,gi=oi=null,lx(t),e)))for(t=0;t<e.length;t++)lx(e[t])}}function uc(e,t){var a=e.stateNode;if(a===null)return null;var s=a[Ja]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(ye(231,t,typeof a));return a}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wm=!1;if(zr)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){wm=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{wm=!1}var vn=null,sv=null,Vd=null;function $y(){if(Vd)return Vd;var e,t=sv,a=t.length,s,n="value"in vn?vn.value:vn.textContent,o=n.length;for(e=0;e<a&&t[e]===n[e];e++);var i=a-e;for(s=1;s<=i&&t[a-s]===n[o-s];s++);return Vd=n.slice(e,1<s?1-s:void 0)}function Gd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bd(){return!0}function cx(){return!1}function es(e){function t(a,s,n,o,i){this._reactName=a,this._targetInst=n,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(a=e[l],this[l]=a?a(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?bd:cx,this.isPropagationStopped=cx,this}return Kt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=bd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=bd)},persist:function(){},isPersistent:bd}),t}var Oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ef=es(Oo),Uc=Kt({},Oo,{view:0,detail:0}),oA=es(Uc),ch,dh,Cl,tf=Kt({},Uc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cl&&(Cl&&e.type==="mousemove"?(ch=e.screenX-Cl.screenX,dh=e.screenY-Cl.screenY):dh=ch=0,Cl=e),ch)},movementY:function(e){return"movementY"in e?e.movementY:dh}}),dx=es(tf),iA=Kt({},tf,{dataTransfer:0}),lA=es(iA),cA=Kt({},Uc,{relatedTarget:0}),uh=es(cA),dA=Kt({},Oo,{animationName:0,elapsedTime:0,pseudoElement:0}),uA=es(dA),fA=Kt({},Oo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hA=es(fA),mA=Kt({},Oo,{data:0}),ux=es(mA),pA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gA[e])?!!t[e]:!1}function rv(){return xA}var _A=Kt({},Uc,{key:function(e){if(e.key){var t=pA[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rv,charCode:function(e){return e.type==="keypress"?Gd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yA=es(_A),bA=Kt({},tf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fx=es(bA),jA=Kt({},Uc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rv}),wA=es(jA),EA=Kt({},Oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),SA=es(EA),NA=Kt({},tf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),CA=es(NA),AA=Kt({},Oo,{newState:0,oldState:0}),TA=es(AA),RA=[9,13,27,32],nv=zr&&"CompositionEvent"in window,Vl=null;zr&&"documentMode"in document&&(Vl=document.documentMode);var DA=zr&&"TextEvent"in window&&!Vl,qy=zr&&(!nv||Vl&&8<Vl&&11>=Vl),hx=" ",mx=!1;function By(e,t){switch(e){case"keyup":return RA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ii=!1;function OA(e,t){switch(e){case"compositionend":return Uy(t);case"keypress":return t.which!==32?null:(mx=!0,hx);case"textInput":return e=t.data,e===hx&&mx?null:e;default:return null}}function zA(e,t){if(ii)return e==="compositionend"||!nv&&By(e,t)?(e=$y(),Vd=sv=vn=null,ii=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qy&&t.locale!=="ko"?null:t.data;default:return null}}var MA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function px(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!MA[e.type]:t==="textarea"}function Hy(e,t,a,s){oi?gi?gi.push(s):gi=[s]:oi=s,t=Ru(t,"onChange"),0<t.length&&(a=new ef("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var Gl=null,fc=null;function kA(e){Pj(e,0)}function af(e){var t=Fl(e);if(My(t))return e}function vx(e,t){if(e==="change")return t}var Vy=!1;if(zr){var fh;if(zr){var hh="oninput"in document;if(!hh){var gx=document.createElement("div");gx.setAttribute("oninput","return;"),hh=typeof gx.oninput=="function"}fh=hh}else fh=!1;Vy=fh&&(!document.documentMode||9<document.documentMode)}function xx(){Gl&&(Gl.detachEvent("onpropertychange",Gy),fc=Gl=null)}function Gy(e){if(e.propertyName==="value"&&af(fc)){var t=[];Hy(t,fc,e,av(e)),Fy(kA,t)}}function PA(e,t,a){e==="focusin"?(xx(),Gl=t,fc=a,Gl.attachEvent("onpropertychange",Gy)):e==="focusout"&&xx()}function IA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return af(fc)}function LA(e,t){if(e==="click")return af(t)}function FA(e,t){if(e==="input"||e==="change")return af(t)}function $A(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ps=typeof Object.is=="function"?Object.is:$A;function hc(e,t){if(ps(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var n=a[s];if(!xm.call(t,n)||!ps(e[n],t[n]))return!1}return!0}function _x(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yx(e,t){var a=_x(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=_x(a)}}function Zy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Yy(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=fu(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=fu(e.document)}return t}function ov(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var qA=zr&&"documentMode"in document&&11>=document.documentMode,li=null,Em=null,Zl=null,Sm=!1;function bx(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sm||li==null||li!==fu(s)||(s=li,"selectionStart"in s&&ov(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Zl&&hc(Zl,s)||(Zl=s,s=Ru(Em,"onSelect"),0<s.length&&(t=new ef("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=li)))}function Qn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var ci={animationend:Qn("Animation","AnimationEnd"),animationiteration:Qn("Animation","AnimationIteration"),animationstart:Qn("Animation","AnimationStart"),transitionrun:Qn("Transition","TransitionRun"),transitionstart:Qn("Transition","TransitionStart"),transitioncancel:Qn("Transition","TransitionCancel"),transitionend:Qn("Transition","TransitionEnd")},mh={},Qy={};zr&&(Qy=document.createElement("div").style,"AnimationEvent"in window||(delete ci.animationend.animation,delete ci.animationiteration.animation,delete ci.animationstart.animation),"TransitionEvent"in window||delete ci.transitionend.transition);function zo(e){if(mh[e])return mh[e];if(!ci[e])return e;var t=ci[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Qy)return mh[e]=t[a];return e}var Ky=zo("animationend"),Xy=zo("animationiteration"),Jy=zo("animationstart"),BA=zo("transitionrun"),UA=zo("transitionstart"),HA=zo("transitioncancel"),Wy=zo("transitionend"),eb=new Map,Nm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nm.push("scrollEnd");function Gs(e,t){eb.set(e,t),Do(t,[e])}var jx=new WeakMap;function Es(e,t){if(typeof e=="object"&&e!==null){var a=jx.get(e);return a!==void 0?a:(t={value:e,source:t,stack:ox(t)},jx.set(e,t),t)}return{value:e,source:t,stack:ox(t)}}var _s=[],di=0,iv=0;function sf(){for(var e=di,t=iv=di=0;t<e;){var a=_s[t];_s[t++]=null;var s=_s[t];_s[t++]=null;var n=_s[t];_s[t++]=null;var o=_s[t];if(_s[t++]=null,s!==null&&n!==null){var i=s.pending;i===null?n.next=n:(n.next=i.next,i.next=n),s.pending=n}o!==0&&tb(a,n,o)}}function rf(e,t,a,s){_s[di++]=e,_s[di++]=t,_s[di++]=a,_s[di++]=s,iv|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function lv(e,t,a,s){return rf(e,t,a,s),hu(e)}function ll(e,t){return rf(e,null,null,t),hu(e)}function tb(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var n=!1,o=e.return;o!==null;)o.childLanes|=a,s=o.alternate,s!==null&&(s.childLanes|=a),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(n=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,n&&t!==null&&(n=31-us(a),e=o.hiddenUpdates,s=e[n],s===null?e[n]=[t]:s.push(t),t.lane=a|536870912),o):null}function hu(e){if(50<sc)throw sc=0,Zm=null,Error(ye(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ui={};function VA(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(e,t,a,s){return new VA(e,t,a,s)}function cv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Dr(e,t){var a=e.alternate;return a===null?(a=cs(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function ab(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Zd(e,t,a,s,n,o){var i=0;if(s=e,typeof e=="function")cv(e)&&(i=1);else if(typeof e=="string")i=Z2(e,a,rr.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case mm:return e=cs(31,a,t,n),e.elementType=mm,e.lanes=o,e;case si:return uo(a.children,n,o,t);case by:i=8,n|=24;break;case um:return e=cs(12,a,t,n|2),e.elementType=um,e.lanes=o,e;case fm:return e=cs(13,a,t,n),e.elementType=fm,e.lanes=o,e;case hm:return e=cs(19,a,t,n),e.elementType=hm,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case kC:case Nr:i=10;break e;case jy:i=9;break e;case Qp:i=11;break e;case Kp:i=14;break e;case tn:i=16,s=null;break e}i=29,a=Error(ye(130,e===null?"null":typeof e,"")),s=null}return t=cs(i,a,t,n),t.elementType=e,t.type=s,t.lanes=o,t}function uo(e,t,a,s){return e=cs(7,e,s,t),e.lanes=a,e}function ph(e,t,a){return e=cs(6,e,null,t),e.lanes=a,e}function vh(e,t,a){return t=cs(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var fi=[],hi=0,mu=null,pu=0,bs=[],js=0,fo=null,Cr=1,Ar="";function Wn(e,t){fi[hi++]=pu,fi[hi++]=mu,mu=e,pu=t}function sb(e,t,a){bs[js++]=Cr,bs[js++]=Ar,bs[js++]=fo,fo=e;var s=Cr;e=Ar;var n=32-us(s)-1;s&=~(1<<n),a+=1;var o=32-us(t)+n;if(30<o){var i=n-n%5;o=(s&(1<<i)-1).toString(32),s>>=i,n-=i,Cr=1<<32-us(t)+n|a<<n|s,Ar=o+e}else Cr=1<<o|a<<n|s,Ar=e}function dv(e){e.return!==null&&(Wn(e,1),sb(e,1,0))}function uv(e){for(;e===mu;)mu=fi[--hi],fi[hi]=null,pu=fi[--hi],fi[hi]=null;for(;e===fo;)fo=bs[--js],bs[js]=null,Ar=bs[--js],bs[js]=null,Cr=bs[--js],bs[js]=null}var Fa=null,na=null,Et=!1,ho=null,er=!1,Cm=Error(ye(519));function _o(e){var t=Error(ye(418,""));throw mc(Es(t,e)),Cm}function wx(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[Oa]=e,t[Ja]=s,a){case"dialog":ut("cancel",t),ut("close",t);break;case"iframe":case"object":case"embed":ut("load",t);break;case"video":case"audio":for(a=0;a<gc.length;a++)ut(gc[a],t);break;case"source":ut("error",t);break;case"img":case"image":case"link":ut("error",t),ut("load",t);break;case"details":ut("toggle",t);break;case"input":ut("invalid",t),ky(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),uu(t);break;case"select":ut("invalid",t);break;case"textarea":ut("invalid",t),Iy(t,s.value,s.defaultValue,s.children),uu(t)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||Lj(t.textContent,a)?(s.popover!=null&&(ut("beforetoggle",t),ut("toggle",t)),s.onScroll!=null&&ut("scroll",t),s.onScrollEnd!=null&&ut("scrollend",t),s.onClick!=null&&(t.onclick=hf),t=!0):t=!1,t||_o(e)}function Ex(e){for(Fa=e.return;Fa;)switch(Fa.tag){case 5:case 13:er=!1;return;case 27:case 3:er=!0;return;default:Fa=Fa.return}}function Al(e){if(e!==Fa)return!1;if(!Et)return Ex(e),Et=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Wm(e.type,e.memoizedProps)),a=!a),a&&na&&_o(e),Ex(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ye(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){na=Bs(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}na=null}}else t===27?(t=na,Ln(e.type)?(e=ap,ap=null,na=e):na=t):na=Fa?Bs(e.stateNode.nextSibling):null;return!0}function Hc(){na=Fa=null,Et=!1}function Sx(){var e=ho;return e!==null&&(Qa===null?Qa=e:Qa.push.apply(Qa,e),ho=null),e}function mc(e){ho===null?ho=[e]:ho.push(e)}var Am=cr(null),Mo=null,Tr=null;function rn(e,t,a){Wt(Am,t._currentValue),t._currentValue=a}function Or(e){e._currentValue=Am.current,ba(Am)}function Tm(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function Rm(e,t,a,s){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var o=n.dependencies;if(o!==null){var i=n.child;o=o.firstContext;e:for(;o!==null;){var l=o;o=n;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=a,l=o.alternate,l!==null&&(l.lanes|=a),Tm(o.return,a,e),s||(i=null);break e}o=l.next}}else if(n.tag===18){if(i=n.return,i===null)throw Error(ye(341));i.lanes|=a,o=i.alternate,o!==null&&(o.lanes|=a),Tm(i,a,e),i=null}else i=n.child;if(i!==null)i.return=n;else for(i=n;i!==null;){if(i===e){i=null;break}if(n=i.sibling,n!==null){n.return=i.return,i=n;break}i=i.return}n=i}}function Vc(e,t,a,s){e=null;for(var n=t,o=!1;n!==null;){if(!o){if(n.flags&524288)o=!0;else if(n.flags&262144)break}if(n.tag===10){var i=n.alternate;if(i===null)throw Error(ye(387));if(i=i.memoizedProps,i!==null){var l=n.type;ps(n.pendingProps.value,i.value)||(e!==null?e.push(l):e=[l])}}else if(n===iu.current){if(i=n.alternate,i===null)throw Error(ye(387));i.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(yc):e=[yc])}n=n.return}e!==null&&Rm(t,e,a,s),t.flags|=262144}function vu(e){for(e=e.firstContext;e!==null;){if(!ps(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function yo(e){Mo=e,Tr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function za(e){return rb(Mo,e)}function jd(e,t){return Mo===null&&yo(e),rb(e,t)}function rb(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Tr===null){if(e===null)throw Error(ye(308));Tr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Tr=Tr.next=t;return a}var GA=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},ZA=va.unstable_scheduleCallback,YA=va.unstable_NormalPriority,ma={$$typeof:Nr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fv(){return{controller:new GA,data:new Map,refCount:0}}function Gc(e){e.refCount--,e.refCount===0&&ZA(YA,function(){e.controller.abort()})}var Yl=null,Dm=0,Fi=0,xi=null;function QA(e,t){if(Yl===null){var a=Yl=[];Dm=0,Fi=kv(),xi={status:"pending",value:void 0,then:function(s){a.push(s)}}}return Dm++,t.then(Nx,Nx),t}function Nx(){if(--Dm===0&&Yl!==null){xi!==null&&(xi.status="fulfilled");var e=Yl;Yl=null,Fi=0,xi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function KA(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(n){a.push(n)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var n=0;n<a.length;n++)(0,a[n])(t)},function(n){for(s.status="rejected",s.reason=n,n=0;n<a.length;n++)(0,a[n])(void 0)}),s}var Cx=Ye.S;Ye.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&QA(e,t),Cx!==null&&Cx(e,t)};var mo=cr(null);function hv(){var e=mo.current;return e!==null?e:Ht.pooledCache}function Yd(e,t){t===null?Wt(mo,mo.current):Wt(mo,t.pool)}function nb(){var e=hv();return e===null?null:{parent:ma._currentValue,pool:e}}var Zc=Error(ye(460)),ob=Error(ye(474)),nf=Error(ye(542)),Om={then:function(){}};function Ax(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wd(){}function ib(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(wd,wd),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Rx(e),e;default:if(typeof t.status=="string")t.then(wd,wd);else{if(e=Ht,e!==null&&100<e.shellSuspendCounter)throw Error(ye(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=s}},function(s){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Rx(e),e}throw Ql=t,Zc}}var Ql=null;function Tx(){if(Ql===null)throw Error(ye(459));var e=Ql;return Ql=null,e}function Rx(e){if(e===Zc||e===nf)throw Error(ye(483))}var an=!1;function mv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function bn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function jn(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Mt&2){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,t=hu(e),tb(e,null,a),t}return rf(e,s,t,a),hu(e)}function Kl(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Ty(e,a)}}function gh(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var n=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var i={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};o===null?n=o=i:o=o.next=i,a=a.next}while(a!==null);o===null?n=o=t:o=o.next=t}else n=o=t;a={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Mm=!1;function Xl(){if(Mm){var e=xi;if(e!==null)throw e}}function Jl(e,t,a,s){Mm=!1;var n=e.updateQueue;an=!1;var o=n.firstBaseUpdate,i=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==i&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(o!==null){var h=n.baseState;i=0,f=d=c=null,l=o;do{var p=l.lane&-536870913,m=p!==l.lane;if(m?(xt&p)===p:(s&p)===p){p!==0&&p===Fi&&(Mm=!0),f!==null&&(f=f.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var b=e,x=l;p=t;var y=a;switch(x.tag){case 1:if(b=x.payload,typeof b=="function"){h=b.call(y,h,p);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,p=typeof b=="function"?b.call(y,h,p):b,p==null)break e;h=Kt({},h,p);break e;case 2:an=!0}}p=l.callback,p!==null&&(e.flags|=64,m&&(e.flags|=8192),m=n.callbacks,m===null?n.callbacks=[p]:m.push(p))}else m={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=m,c=h):f=f.next=m,i|=p;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;m=l,l=m.next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}while(!0);f===null&&(c=h),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=f,o===null&&(n.shared.lanes=0),On|=i,e.lanes=i,e.memoizedState=h}}function lb(e,t){if(typeof e!="function")throw Error(ye(191,e));e.call(t)}function cb(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)lb(a[e],t)}var $i=cr(null),gu=cr(0);function Dx(e,t){e=Pr,Wt(gu,e),Wt($i,t),Pr=e|t.baseLanes}function km(){Wt(gu,Pr),Wt($i,$i.current)}function pv(){Pr=gu.current,ba($i),ba(gu)}var Rn=0,ot=null,Lt=null,ua=null,xu=!1,_i=!1,bo=!1,_u=0,pc=0,yi=null,XA=0;function la(){throw Error(ye(321))}function vv(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!ps(e[a],t[a]))return!1;return!0}function gv(e,t,a,s,n,o){return Rn=o,ot=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ye.H=e===null||e.memoizedState===null?$b:qb,bo=!1,o=a(s,n),bo=!1,_i&&(o=ub(t,a,s,n)),db(e),o}function db(e){Ye.H=yu;var t=Lt!==null&&Lt.next!==null;if(Rn=0,ua=Lt=ot=null,xu=!1,pc=0,yi=null,t)throw Error(ye(300));e===null||ya||(e=e.dependencies,e!==null&&vu(e)&&(ya=!0))}function ub(e,t,a,s){ot=e;var n=0;do{if(_i&&(yi=null),pc=0,_i=!1,25<=n)throw Error(ye(301));if(n+=1,ua=Lt=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}Ye.H=r2,o=t(a,s)}while(_i);return o}function JA(){var e=Ye.H,t=e.useState()[0];return t=typeof t.then=="function"?Yc(t):t,e=e.useState()[0],(Lt!==null?Lt.memoizedState:null)!==e&&(ot.flags|=1024),t}function xv(){var e=_u!==0;return _u=0,e}function _v(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function yv(e){if(xu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}xu=!1}Rn=0,ua=Lt=ot=null,_i=!1,pc=_u=0,yi=null}function Za(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ua===null?ot.memoizedState=ua=e:ua=ua.next=e,ua}function fa(){if(Lt===null){var e=ot.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var t=ua===null?ot.memoizedState:ua.next;if(t!==null)ua=t,Lt=e;else{if(e===null)throw ot.alternate===null?Error(ye(467)):Error(ye(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},ua===null?ot.memoizedState=ua=e:ua=ua.next=e}return ua}function bv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yc(e){var t=pc;return pc+=1,yi===null&&(yi=[]),e=ib(yi,e,t),t=ot,(ua===null?t.memoizedState:ua.next)===null&&(t=t.alternate,Ye.H=t===null||t.memoizedState===null?$b:qb),e}function of(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Yc(e);if(e.$$typeof===Nr)return za(e)}throw Error(ye(438,String(e)))}function jv(e){var t=null,a=ot.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=ot.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=bv(),ot.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=PC;return t.index++,a}function Mr(e,t){return typeof t=="function"?t(e):t}function Qd(e){var t=fa();return wv(t,Lt,e)}function wv(e,t,a){var s=e.queue;if(s===null)throw Error(ye(311));s.lastRenderedReducer=a;var n=e.baseQueue,o=s.pending;if(o!==null){if(n!==null){var i=n.next;n.next=o.next,o.next=i}t.baseQueue=n=o,s.pending=null}if(o=e.baseState,n===null)e.memoizedState=o;else{t=n.next;var l=i=null,c=null,d=t,f=!1;do{var h=d.lane&-536870913;if(h!==d.lane?(xt&h)===h:(Rn&h)===h){var p=d.revertLane;if(p===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Fi&&(f=!0);else if((Rn&p)===p){d=d.next,p===Fi&&(f=!0);continue}else h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=h,i=o):c=c.next=h,ot.lanes|=p,On|=p;h=d.action,bo&&a(o,h),o=d.hasEagerState?d.eagerState:a(o,h)}else p={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=p,i=o):c=c.next=p,ot.lanes|=h,On|=h;d=d.next}while(d!==null&&d!==t);if(c===null?i=o:c.next=l,!ps(o,e.memoizedState)&&(ya=!0,f&&(a=xi,a!==null)))throw a;e.memoizedState=o,e.baseState=i,e.baseQueue=c,s.lastRenderedState=o}return n===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function xh(e){var t=fa(),a=t.queue;if(a===null)throw Error(ye(311));a.lastRenderedReducer=e;var s=a.dispatch,n=a.pending,o=t.memoizedState;if(n!==null){a.pending=null;var i=n=n.next;do o=e(o,i.action),i=i.next;while(i!==n);ps(o,t.memoizedState)||(ya=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),a.lastRenderedState=o}return[o,s]}function fb(e,t,a){var s=ot,n=fa(),o=Et;if(o){if(a===void 0)throw Error(ye(407));a=a()}else a=t();var i=!ps((Lt||n).memoizedState,a);i&&(n.memoizedState=a,ya=!0),n=n.queue;var l=pb.bind(null,s,n,e);if(Qc(2048,8,l,[e]),n.getSnapshot!==t||i||ua!==null&&ua.memoizedState.tag&1){if(s.flags|=2048,qi(9,lf(),mb.bind(null,s,n,a,t),null),Ht===null)throw Error(ye(349));o||Rn&124||hb(s,t,a)}return a}function hb(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ot.updateQueue,t===null?(t=bv(),ot.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function mb(e,t,a,s){t.value=a,t.getSnapshot=s,vb(t)&&gb(e)}function pb(e,t,a){return a(function(){vb(t)&&gb(e)})}function vb(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!ps(e,a)}catch{return!0}}function gb(e){var t=ll(e,2);t!==null&&hs(t,e,2)}function Pm(e){var t=Za();if(typeof e=="function"){var a=e;if(e=a(),bo){pn(!0);try{a()}finally{pn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:e},t}function xb(e,t,a,s){return e.baseState=a,wv(e,Lt,typeof s=="function"?s:Mr)}function WA(e,t,a,s,n){if(cf(e))throw Error(ye(485));if(e=t.action,e!==null){var o={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(i){o.listeners.push(i)}};Ye.T!==null?a(!0):o.isTransition=!1,s(o),a=t.pending,a===null?(o.next=t.pending=o,_b(t,o)):(o.next=a.next,t.pending=a.next=o)}}function _b(e,t){var a=t.action,s=t.payload,n=e.state;if(t.isTransition){var o=Ye.T,i={};Ye.T=i;try{var l=a(n,s),c=Ye.S;c!==null&&c(i,l),Ox(e,t,l)}catch(d){Im(e,t,d)}finally{Ye.T=o}}else try{o=a(n,s),Ox(e,t,o)}catch(d){Im(e,t,d)}}function Ox(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){zx(e,t,s)},function(s){return Im(e,t,s)}):zx(e,t,a)}function zx(e,t,a){t.status="fulfilled",t.value=a,yb(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,_b(e,a)))}function Im(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,yb(t),t=t.next;while(t!==s)}e.action=null}function yb(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function bb(e,t){return t}function Mx(e,t){if(Et){var a=Ht.formState;if(a!==null){e:{var s=ot;if(Et){if(na){t:{for(var n=na,o=er;n.nodeType!==8;){if(!o){n=null;break t}if(n=Bs(n.nextSibling),n===null){n=null;break t}}o=n.data,n=o==="F!"||o==="F"?n:null}if(n){na=Bs(n.nextSibling),s=n.data==="F!";break e}}_o(s)}s=!1}s&&(t=a[0])}}return a=Za(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bb,lastRenderedState:t},a.queue=s,a=Ib.bind(null,ot,s),s.dispatch=a,s=Pm(!1),o=Cv.bind(null,ot,!1,s.queue),s=Za(),n={state:t,dispatch:null,action:e,pending:null},s.queue=n,a=WA.bind(null,ot,n,o,a),n.dispatch=a,s.memoizedState=e,[t,a,!1]}function kx(e){var t=fa();return jb(t,Lt,e)}function jb(e,t,a){if(t=wv(e,t,bb)[0],e=Qd(Mr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Yc(t)}catch(i){throw i===Zc?nf:i}else s=t;t=fa();var n=t.queue,o=n.dispatch;return a!==t.memoizedState&&(ot.flags|=2048,qi(9,lf(),e2.bind(null,n,a),null)),[s,o,e]}function e2(e,t){e.action=t}function Px(e){var t=fa(),a=Lt;if(a!==null)return jb(t,a,e);fa(),t=t.memoizedState,a=fa();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function qi(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=ot.updateQueue,t===null&&(t=bv(),ot.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function lf(){return{destroy:void 0,resource:void 0}}function wb(){return fa().memoizedState}function Kd(e,t,a,s){var n=Za();s=s===void 0?null:s,ot.flags|=e,n.memoizedState=qi(1|t,lf(),a,s)}function Qc(e,t,a,s){var n=fa();s=s===void 0?null:s;var o=n.memoizedState.inst;Lt!==null&&s!==null&&vv(s,Lt.memoizedState.deps)?n.memoizedState=qi(t,o,a,s):(ot.flags|=e,n.memoizedState=qi(1|t,o,a,s))}function Ix(e,t){Kd(8390656,8,e,t)}function Eb(e,t){Qc(2048,8,e,t)}function Sb(e,t){return Qc(4,2,e,t)}function Nb(e,t){return Qc(4,4,e,t)}function Cb(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ab(e,t,a){a=a!=null?a.concat([e]):null,Qc(4,4,Cb.bind(null,t,e),a)}function Ev(){}function Tb(e,t){var a=fa();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&vv(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function Rb(e,t){var a=fa();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&vv(t,s[1]))return s[0];if(s=e(),bo){pn(!0);try{e()}finally{pn(!1)}}return a.memoizedState=[s,t],s}function Sv(e,t,a){return a===void 0||Rn&1073741824?e.memoizedState=t:(e.memoizedState=a,e=yj(),ot.lanes|=e,On|=e,a)}function Db(e,t,a,s){return ps(a,t)?a:$i.current!==null?(e=Sv(e,a,s),ps(e,t)||(ya=!0),e):Rn&42?(e=yj(),ot.lanes|=e,On|=e,t):(ya=!0,e.memoizedState=a)}function Ob(e,t,a,s,n){var o=St.p;St.p=o!==0&&8>o?o:8;var i=Ye.T,l={};Ye.T=l,Cv(e,!1,t,a);try{var c=n(),d=Ye.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=KA(c,s);Wl(e,t,f,fs(e))}else Wl(e,t,s,fs(e))}catch(h){Wl(e,t,{then:function(){},status:"rejected",reason:h},fs())}finally{St.p=o,Ye.T=i}}function t2(){}function Lm(e,t,a,s){if(e.tag!==5)throw Error(ye(476));var n=zb(e).queue;Ob(e,n,t,co,a===null?t2:function(){return Mb(e),a(s)})}function zb(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:co,baseState:co,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:co},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Mb(e){var t=zb(e).next.queue;Wl(e,t,{},fs())}function Nv(){return za(yc)}function kb(){return fa().memoizedState}function Pb(){return fa().memoizedState}function a2(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=fs();e=bn(a);var s=jn(t,e,a);s!==null&&(hs(s,t,a),Kl(s,t,a)),t={cache:fv()},e.payload=t;return}t=t.return}}function s2(e,t,a){var s=fs();a={lane:s,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},cf(e)?Lb(t,a):(a=lv(e,t,a,s),a!==null&&(hs(a,e,s),Fb(a,t,s)))}function Ib(e,t,a){var s=fs();Wl(e,t,a,s)}function Wl(e,t,a,s){var n={lane:s,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(cf(e))Lb(t,n);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,a);if(n.hasEagerState=!0,n.eagerState=l,ps(l,i))return rf(e,t,n,0),Ht===null&&sf(),!1}catch{}finally{}if(a=lv(e,t,n,s),a!==null)return hs(a,e,s),Fb(a,t,s),!0}return!1}function Cv(e,t,a,s){if(s={lane:2,revertLane:kv(),action:s,hasEagerState:!1,eagerState:null,next:null},cf(e)){if(t)throw Error(ye(479))}else t=lv(e,a,s,2),t!==null&&hs(t,e,2)}function cf(e){var t=e.alternate;return e===ot||t!==null&&t===ot}function Lb(e,t){_i=xu=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Fb(e,t,a){if(a&4194048){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Ty(e,a)}}var yu={readContext:za,use:of,useCallback:la,useContext:la,useEffect:la,useImperativeHandle:la,useLayoutEffect:la,useInsertionEffect:la,useMemo:la,useReducer:la,useRef:la,useState:la,useDebugValue:la,useDeferredValue:la,useTransition:la,useSyncExternalStore:la,useId:la,useHostTransitionStatus:la,useFormState:la,useActionState:la,useOptimistic:la,useMemoCache:la,useCacheRefresh:la},$b={readContext:za,use:of,useCallback:function(e,t){return Za().memoizedState=[e,t===void 0?null:t],e},useContext:za,useEffect:Ix,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Kd(4194308,4,Cb.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Kd(4194308,4,e,t)},useInsertionEffect:function(e,t){Kd(4,2,e,t)},useMemo:function(e,t){var a=Za();t=t===void 0?null:t;var s=e();if(bo){pn(!0);try{e()}finally{pn(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=Za();if(a!==void 0){var n=a(t);if(bo){pn(!0);try{a(t)}finally{pn(!1)}}}else n=t;return s.memoizedState=s.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=s2.bind(null,ot,e),[s.memoizedState,e]},useRef:function(e){var t=Za();return e={current:e},t.memoizedState=e},useState:function(e){e=Pm(e);var t=e.queue,a=Ib.bind(null,ot,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Ev,useDeferredValue:function(e,t){var a=Za();return Sv(a,e,t)},useTransition:function(){var e=Pm(!1);return e=Ob.bind(null,ot,e.queue,!0,!1),Za().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=ot,n=Za();if(Et){if(a===void 0)throw Error(ye(407));a=a()}else{if(a=t(),Ht===null)throw Error(ye(349));xt&124||hb(s,t,a)}n.memoizedState=a;var o={value:a,getSnapshot:t};return n.queue=o,Ix(pb.bind(null,s,o,e),[e]),s.flags|=2048,qi(9,lf(),mb.bind(null,s,o,a,t),null),a},useId:function(){var e=Za(),t=Ht.identifierPrefix;if(Et){var a=Ar,s=Cr;a=(s&~(1<<32-us(s)-1)).toString(32)+a,t=""+t+"R"+a,a=_u++,0<a&&(t+="H"+a.toString(32)),t+=""}else a=XA++,t=""+t+"r"+a.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Nv,useFormState:Mx,useActionState:Mx,useOptimistic:function(e){var t=Za();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Cv.bind(null,ot,!0,a),a.dispatch=t,[e,t]},useMemoCache:jv,useCacheRefresh:function(){return Za().memoizedState=a2.bind(null,ot)}},qb={readContext:za,use:of,useCallback:Tb,useContext:za,useEffect:Eb,useImperativeHandle:Ab,useInsertionEffect:Sb,useLayoutEffect:Nb,useMemo:Rb,useReducer:Qd,useRef:wb,useState:function(){return Qd(Mr)},useDebugValue:Ev,useDeferredValue:function(e,t){var a=fa();return Db(a,Lt.memoizedState,e,t)},useTransition:function(){var e=Qd(Mr)[0],t=fa().memoizedState;return[typeof e=="boolean"?e:Yc(e),t]},useSyncExternalStore:fb,useId:kb,useHostTransitionStatus:Nv,useFormState:kx,useActionState:kx,useOptimistic:function(e,t){var a=fa();return xb(a,Lt,e,t)},useMemoCache:jv,useCacheRefresh:Pb},r2={readContext:za,use:of,useCallback:Tb,useContext:za,useEffect:Eb,useImperativeHandle:Ab,useInsertionEffect:Sb,useLayoutEffect:Nb,useMemo:Rb,useReducer:xh,useRef:wb,useState:function(){return xh(Mr)},useDebugValue:Ev,useDeferredValue:function(e,t){var a=fa();return Lt===null?Sv(a,e,t):Db(a,Lt.memoizedState,e,t)},useTransition:function(){var e=xh(Mr)[0],t=fa().memoizedState;return[typeof e=="boolean"?e:Yc(e),t]},useSyncExternalStore:fb,useId:kb,useHostTransitionStatus:Nv,useFormState:Px,useActionState:Px,useOptimistic:function(e,t){var a=fa();return Lt!==null?xb(a,Lt,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:jv,useCacheRefresh:Pb},bi=null,vc=0;function Ed(e){var t=vc;return vc+=1,bi===null&&(bi=[]),ib(bi,e,t)}function Tl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Sd(e,t){throw t.$$typeof===MC?Error(ye(525)):(e=Object.prototype.toString.call(t),Error(ye(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Lx(e){var t=e._init;return t(e._payload)}function Bb(e){function t(_,g){if(e){var v=_.deletions;v===null?(_.deletions=[g],_.flags|=16):v.push(g)}}function a(_,g){if(!e)return null;for(;g!==null;)t(_,g),g=g.sibling;return null}function s(_){for(var g=new Map;_!==null;)_.key!==null?g.set(_.key,_):g.set(_.index,_),_=_.sibling;return g}function n(_,g){return _=Dr(_,g),_.index=0,_.sibling=null,_}function o(_,g,v){return _.index=v,e?(v=_.alternate,v!==null?(v=v.index,v<g?(_.flags|=67108866,g):v):(_.flags|=67108866,g)):(_.flags|=1048576,g)}function i(_){return e&&_.alternate===null&&(_.flags|=67108866),_}function l(_,g,v,w){return g===null||g.tag!==6?(g=ph(v,_.mode,w),g.return=_,g):(g=n(g,v),g.return=_,g)}function c(_,g,v,w){var E=v.type;return E===si?f(_,g,v.props.children,w,v.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===tn&&Lx(E)===g.type)?(g=n(g,v.props),Tl(g,v),g.return=_,g):(g=Zd(v.type,v.key,v.props,null,_.mode,w),Tl(g,v),g.return=_,g)}function d(_,g,v,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=vh(v,_.mode,w),g.return=_,g):(g=n(g,v.children||[]),g.return=_,g)}function f(_,g,v,w,E){return g===null||g.tag!==7?(g=uo(v,_.mode,w,E),g.return=_,g):(g=n(g,v),g.return=_,g)}function h(_,g,v){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=ph(""+g,_.mode,v),g.return=_,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case gd:return v=Zd(g.type,g.key,g.props,null,_.mode,v),Tl(v,g),v.return=_,v;case Il:return g=vh(g,_.mode,v),g.return=_,g;case tn:var w=g._init;return g=w(g._payload),h(_,g,v)}if(Ll(g)||Sl(g))return g=uo(g,_.mode,v,null),g.return=_,g;if(typeof g.then=="function")return h(_,Ed(g),v);if(g.$$typeof===Nr)return h(_,jd(_,g),v);Sd(_,g)}return null}function p(_,g,v,w){var E=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return E!==null?null:l(_,g,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case gd:return v.key===E?c(_,g,v,w):null;case Il:return v.key===E?d(_,g,v,w):null;case tn:return E=v._init,v=E(v._payload),p(_,g,v,w)}if(Ll(v)||Sl(v))return E!==null?null:f(_,g,v,w,null);if(typeof v.then=="function")return p(_,g,Ed(v),w);if(v.$$typeof===Nr)return p(_,g,jd(_,v),w);Sd(_,v)}return null}function m(_,g,v,w,E){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return _=_.get(v)||null,l(g,_,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case gd:return _=_.get(w.key===null?v:w.key)||null,c(g,_,w,E);case Il:return _=_.get(w.key===null?v:w.key)||null,d(g,_,w,E);case tn:var S=w._init;return w=S(w._payload),m(_,g,v,w,E)}if(Ll(w)||Sl(w))return _=_.get(v)||null,f(g,_,w,E,null);if(typeof w.then=="function")return m(_,g,v,Ed(w),E);if(w.$$typeof===Nr)return m(_,g,v,jd(g,w),E);Sd(g,w)}return null}function b(_,g,v,w){for(var E=null,S=null,T=g,q=g=0,k=null;T!==null&&q<v.length;q++){T.index>q?(k=T,T=null):k=T.sibling;var $=p(_,T,v[q],w);if($===null){T===null&&(T=k);break}e&&T&&$.alternate===null&&t(_,T),g=o($,g,q),S===null?E=$:S.sibling=$,S=$,T=k}if(q===v.length)return a(_,T),Et&&Wn(_,q),E;if(T===null){for(;q<v.length;q++)T=h(_,v[q],w),T!==null&&(g=o(T,g,q),S===null?E=T:S.sibling=T,S=T);return Et&&Wn(_,q),E}for(T=s(T);q<v.length;q++)k=m(T,_,q,v[q],w),k!==null&&(e&&k.alternate!==null&&T.delete(k.key===null?q:k.key),g=o(k,g,q),S===null?E=k:S.sibling=k,S=k);return e&&T.forEach(function(Z){return t(_,Z)}),Et&&Wn(_,q),E}function x(_,g,v,w){if(v==null)throw Error(ye(151));for(var E=null,S=null,T=g,q=g=0,k=null,$=v.next();T!==null&&!$.done;q++,$=v.next()){T.index>q?(k=T,T=null):k=T.sibling;var Z=p(_,T,$.value,w);if(Z===null){T===null&&(T=k);break}e&&T&&Z.alternate===null&&t(_,T),g=o(Z,g,q),S===null?E=Z:S.sibling=Z,S=Z,T=k}if($.done)return a(_,T),Et&&Wn(_,q),E;if(T===null){for(;!$.done;q++,$=v.next())$=h(_,$.value,w),$!==null&&(g=o($,g,q),S===null?E=$:S.sibling=$,S=$);return Et&&Wn(_,q),E}for(T=s(T);!$.done;q++,$=v.next())$=m(T,_,q,$.value,w),$!==null&&(e&&$.alternate!==null&&T.delete($.key===null?q:$.key),g=o($,g,q),S===null?E=$:S.sibling=$,S=$);return e&&T.forEach(function(W){return t(_,W)}),Et&&Wn(_,q),E}function y(_,g,v,w){if(typeof v=="object"&&v!==null&&v.type===si&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case gd:e:{for(var E=v.key;g!==null;){if(g.key===E){if(E=v.type,E===si){if(g.tag===7){a(_,g.sibling),w=n(g,v.props.children),w.return=_,_=w;break e}}else if(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===tn&&Lx(E)===g.type){a(_,g.sibling),w=n(g,v.props),Tl(w,v),w.return=_,_=w;break e}a(_,g);break}else t(_,g);g=g.sibling}v.type===si?(w=uo(v.props.children,_.mode,w,v.key),w.return=_,_=w):(w=Zd(v.type,v.key,v.props,null,_.mode,w),Tl(w,v),w.return=_,_=w)}return i(_);case Il:e:{for(E=v.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){a(_,g.sibling),w=n(g,v.children||[]),w.return=_,_=w;break e}else{a(_,g);break}else t(_,g);g=g.sibling}w=vh(v,_.mode,w),w.return=_,_=w}return i(_);case tn:return E=v._init,v=E(v._payload),y(_,g,v,w)}if(Ll(v))return b(_,g,v,w);if(Sl(v)){if(E=Sl(v),typeof E!="function")throw Error(ye(150));return v=E.call(v),x(_,g,v,w)}if(typeof v.then=="function")return y(_,g,Ed(v),w);if(v.$$typeof===Nr)return y(_,g,jd(_,v),w);Sd(_,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,g!==null&&g.tag===6?(a(_,g.sibling),w=n(g,v),w.return=_,_=w):(a(_,g),w=ph(v,_.mode,w),w.return=_,_=w),i(_)):a(_,g)}return function(_,g,v,w){try{vc=0;var E=y(_,g,v,w);return bi=null,E}catch(T){if(T===Zc||T===nf)throw T;var S=cs(29,T,null,_.mode);return S.lanes=w,S.return=_,S}finally{}}}var Bi=Bb(!0),Ub=Bb(!1),Cs=cr(null),or=null;function nn(e){var t=e.alternate;Wt(pa,pa.current&1),Wt(Cs,e),or===null&&(t===null||$i.current!==null||t.memoizedState!==null)&&(or=e)}function Hb(e){if(e.tag===22){if(Wt(pa,pa.current),Wt(Cs,e),or===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(or=e)}}else on()}function on(){Wt(pa,pa.current),Wt(Cs,Cs.current)}function Rr(e){ba(Cs),or===e&&(or=null),ba(pa)}var pa=cr(0);function bu(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||tp(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function _h(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:Kt({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Fm={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=fs(),n=bn(s);n.payload=t,a!=null&&(n.callback=a),t=jn(e,n,s),t!==null&&(hs(t,e,s),Kl(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=fs(),n=bn(s);n.tag=1,n.payload=t,a!=null&&(n.callback=a),t=jn(e,n,s),t!==null&&(hs(t,e,s),Kl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=fs(),s=bn(a);s.tag=2,t!=null&&(s.callback=t),t=jn(e,s,a),t!==null&&(hs(t,e,a),Kl(t,e,a))}};function Fx(e,t,a,s,n,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,i):t.prototype&&t.prototype.isPureReactComponent?!hc(a,s)||!hc(n,o):!0}function $x(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&Fm.enqueueReplaceState(t,t.state,null)}function jo(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=Kt({},a));for(var n in e)a[n]===void 0&&(a[n]=e[n])}return a}var ju=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Vb(e){ju(e)}function Gb(e){console.error(e)}function Zb(e){ju(e)}function wu(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function qx(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function $m(e,t,a){return a=bn(a),a.tag=3,a.payload={element:null},a.callback=function(){wu(e,t)},a}function Yb(e){return e=bn(e),e.tag=3,e}function Qb(e,t,a,s){var n=a.type.getDerivedStateFromError;if(typeof n=="function"){var o=s.value;e.payload=function(){return n(o)},e.callback=function(){qx(t,a,s)}}var i=a.stateNode;i!==null&&typeof i.componentDidCatch=="function"&&(e.callback=function(){qx(t,a,s),typeof n!="function"&&(wn===null?wn=new Set([this]):wn.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function n2(e,t,a,s,n){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&Vc(t,a,n,!0),a=Cs.current,a!==null){switch(a.tag){case 13:return or===null?Ym():a.alternate===null&&oa===0&&(oa=3),a.flags&=-257,a.flags|=65536,a.lanes=n,s===Om?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),Rh(e,s,n)),!1;case 22:return a.flags|=65536,s===Om?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),Rh(e,s,n)),!1}throw Error(ye(435,a.tag))}return Rh(e,s,n),Ym(),!1}if(Et)return t=Cs.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=n,s!==Cm&&(e=Error(ye(422),{cause:s}),mc(Es(e,a)))):(s!==Cm&&(t=Error(ye(423),{cause:s}),mc(Es(t,a))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,s=Es(s,a),n=$m(e.stateNode,s,n),gh(e,n),oa!==4&&(oa=2)),!1;var o=Error(ye(520),{cause:s});if(o=Es(o,a),ac===null?ac=[o]:ac.push(o),oa!==4&&(oa=2),t===null)return!0;s=Es(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=n&-n,a.lanes|=e,e=$m(a.stateNode,s,e),gh(a,e),!1;case 1:if(t=a.type,o=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(wn===null||!wn.has(o))))return a.flags|=65536,n&=-n,a.lanes|=n,n=Yb(n),Qb(n,e,a,s),gh(a,n),!1}a=a.return}while(a!==null);return!1}var Kb=Error(ye(461)),ya=!1;function wa(e,t,a,s){t.child=e===null?Ub(t,null,a,s):Bi(t,e.child,a,s)}function Bx(e,t,a,s,n){a=a.render;var o=t.ref;if("ref"in s){var i={};for(var l in s)l!=="ref"&&(i[l]=s[l])}else i=s;return yo(t),s=gv(e,t,a,i,o,n),l=xv(),e!==null&&!ya?(_v(e,t,n),kr(e,t,n)):(Et&&l&&dv(t),t.flags|=1,wa(e,t,s,n),t.child)}function Ux(e,t,a,s,n){if(e===null){var o=a.type;return typeof o=="function"&&!cv(o)&&o.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=o,Xb(e,t,o,s,n)):(e=Zd(a.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!Av(e,n)){var i=o.memoizedProps;if(a=a.compare,a=a!==null?a:hc,a(i,s)&&e.ref===t.ref)return kr(e,t,n)}return t.flags|=1,e=Dr(o,s),e.ref=t.ref,e.return=t,t.child=e}function Xb(e,t,a,s,n){if(e!==null){var o=e.memoizedProps;if(hc(o,s)&&e.ref===t.ref)if(ya=!1,t.pendingProps=s=o,Av(e,n))e.flags&131072&&(ya=!0);else return t.lanes=e.lanes,kr(e,t,n)}return qm(e,t,a,s,n)}function Jb(e,t,a){var s=t.pendingProps,n=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if(t.flags&128){if(s=o!==null?o.baseLanes|a:a,e!==null){for(n=t.child=e.child,o=0;n!==null;)o=o|n.lanes|n.childLanes,n=n.sibling;t.childLanes=o&~s}else t.childLanes=0,t.child=null;return Hx(e,t,s,a)}if(a&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Yd(t,o!==null?o.cachePool:null),o!==null?Dx(t,o):km(),Hb(t);else return t.lanes=t.childLanes=536870912,Hx(e,t,o!==null?o.baseLanes|a:a,a)}else o!==null?(Yd(t,o.cachePool),Dx(t,o),on(),t.memoizedState=null):(e!==null&&Yd(t,null),km(),on());return wa(e,t,n,a),t.child}function Hx(e,t,a,s){var n=hv();return n=n===null?null:{parent:ma._currentValue,pool:n},t.memoizedState={baseLanes:a,cachePool:n},e!==null&&Yd(t,null),km(),Hb(t),e!==null&&Vc(e,t,s,!0),null}function Xd(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(ye(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function qm(e,t,a,s,n){return yo(t),a=gv(e,t,a,s,void 0,n),s=xv(),e!==null&&!ya?(_v(e,t,n),kr(e,t,n)):(Et&&s&&dv(t),t.flags|=1,wa(e,t,a,n),t.child)}function Vx(e,t,a,s,n,o){return yo(t),t.updateQueue=null,a=ub(t,s,a,n),db(e),s=xv(),e!==null&&!ya?(_v(e,t,o),kr(e,t,o)):(Et&&s&&dv(t),t.flags|=1,wa(e,t,a,o),t.child)}function Gx(e,t,a,s,n){if(yo(t),t.stateNode===null){var o=ui,i=a.contextType;typeof i=="object"&&i!==null&&(o=za(i)),o=new a(s,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Fm,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=s,o.state=t.memoizedState,o.refs={},mv(t),i=a.contextType,o.context=typeof i=="object"&&i!==null?za(i):ui,o.state=t.memoizedState,i=a.getDerivedStateFromProps,typeof i=="function"&&(_h(t,a,i,s),o.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(i=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),i!==o.state&&Fm.enqueueReplaceState(o,o.state,null),Jl(t,s,o,n),Xl(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){o=t.stateNode;var l=t.memoizedProps,c=jo(a,l);o.props=c;var d=o.context,f=a.contextType;i=ui,typeof f=="object"&&f!==null&&(i=za(f));var h=a.getDerivedStateFromProps;f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l||d!==i)&&$x(t,o,s,i),an=!1;var p=t.memoizedState;o.state=p,Jl(t,s,o,n),Xl(),d=t.memoizedState,l||p!==d||an?(typeof h=="function"&&(_h(t,a,h,s),d=t.memoizedState),(c=an||Fx(t,a,c,s,p,d,i))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=d),o.props=s,o.state=d,o.context=i,s=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,zm(e,t),i=t.memoizedProps,f=jo(a,i),o.props=f,h=t.pendingProps,p=o.context,d=a.contextType,c=ui,typeof d=="object"&&d!==null&&(c=za(d)),l=a.getDerivedStateFromProps,(d=typeof l=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==h||p!==c)&&$x(t,o,s,c),an=!1,p=t.memoizedState,o.state=p,Jl(t,s,o,n),Xl();var m=t.memoizedState;i!==h||p!==m||an||e!==null&&e.dependencies!==null&&vu(e.dependencies)?(typeof l=="function"&&(_h(t,a,l,s),m=t.memoizedState),(f=an||Fx(t,a,f,s,p,m,c)||e!==null&&e.dependencies!==null&&vu(e.dependencies))?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=m),o.props=s,o.state=m,o.context=c,s=f):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),s=!1)}return o=s,Xd(e,t),s=(t.flags&128)!==0,o||s?(o=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&s?(t.child=Bi(t,e.child,null,n),t.child=Bi(t,null,a,n)):wa(e,t,a,n),t.memoizedState=o.state,e=t.child):e=kr(e,t,n),e}function Zx(e,t,a,s){return Hc(),t.flags|=256,wa(e,t,a,s),t.child}var yh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bh(e){return{baseLanes:e,cachePool:nb()}}function jh(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Ss),e}function Wb(e,t,a){var s=t.pendingProps,n=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(pa.current&2)!==0),i&&(n=!0,t.flags&=-129),i=(t.flags&32)!==0,t.flags&=-33,e===null){if(Et){if(n?nn(t):on(),Et){var l=na,c;if(c=l){e:{for(c=l,l=er;c.nodeType!==8;){if(!l){l=null;break e}if(c=Bs(c.nextSibling),c===null){l=null;break e}}l=c}l!==null?(t.memoizedState={dehydrated:l,treeContext:fo!==null?{id:Cr,overflow:Ar}:null,retryLane:536870912,hydrationErrors:null},c=cs(18,null,null,0),c.stateNode=l,c.return=t,t.child=c,Fa=t,na=null,c=!0):c=!1}c||_o(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return tp(l)?t.lanes=32:t.lanes=536870912,null;Rr(t)}return l=s.children,s=s.fallback,n?(on(),n=t.mode,l=Eu({mode:"hidden",children:l},n),s=uo(s,n,a,null),l.return=t,s.return=t,l.sibling=s,t.child=l,n=t.child,n.memoizedState=bh(a),n.childLanes=jh(e,i,a),t.memoizedState=yh,s):(nn(t),Bm(t,l))}if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null)){if(o)t.flags&256?(nn(t),t.flags&=-257,t=wh(e,t,a)):t.memoizedState!==null?(on(),t.child=e.child,t.flags|=128,t=null):(on(),n=s.fallback,l=t.mode,s=Eu({mode:"visible",children:s.children},l),n=uo(n,l,a,null),n.flags|=2,s.return=t,n.return=t,s.sibling=n,t.child=s,Bi(t,e.child,null,a),s=t.child,s.memoizedState=bh(a),s.childLanes=jh(e,i,a),t.memoizedState=yh,t=n);else if(nn(t),tp(l)){if(i=l.nextSibling&&l.nextSibling.dataset,i)var d=i.dgst;i=d,s=Error(ye(419)),s.stack="",s.digest=i,mc({value:s,source:null,stack:null}),t=wh(e,t,a)}else if(ya||Vc(e,t,a,!1),i=(a&e.childLanes)!==0,ya||i){if(i=Ht,i!==null&&(s=a&-a,s=s&42?1:Jp(s),s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==c.retryLane))throw c.retryLane=s,ll(e,s),hs(i,e,s),Kb;l.data==="$?"||Ym(),t=wh(e,t,a)}else l.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,na=Bs(l.nextSibling),Fa=t,Et=!0,ho=null,er=!1,e!==null&&(bs[js++]=Cr,bs[js++]=Ar,bs[js++]=fo,Cr=e.id,Ar=e.overflow,fo=t),t=Bm(t,s.children),t.flags|=4096);return t}return n?(on(),n=s.fallback,l=t.mode,c=e.child,d=c.sibling,s=Dr(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,d!==null?n=Dr(d,n):(n=uo(n,l,a,null),n.flags|=2),n.return=t,s.return=t,s.sibling=n,t.child=s,s=n,n=t.child,l=e.child.memoizedState,l===null?l=bh(a):(c=l.cachePool,c!==null?(d=ma._currentValue,c=c.parent!==d?{parent:d,pool:d}:c):c=nb(),l={baseLanes:l.baseLanes|a,cachePool:c}),n.memoizedState=l,n.childLanes=jh(e,i,a),t.memoizedState=yh,s):(nn(t),a=e.child,e=a.sibling,a=Dr(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a)}function Bm(e,t){return t=Eu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Eu(e,t){return e=cs(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function wh(e,t,a){return Bi(t,e.child,null,a),e=Bm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Yx(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Tm(e.return,t,a)}function Eh(e,t,a,s,n){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=a,o.tailMode=n)}function ej(e,t,a){var s=t.pendingProps,n=s.revealOrder,o=s.tail;if(wa(e,t,s.children,a),s=pa.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yx(e,a,t);else if(e.tag===19)Yx(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(Wt(pa,s),n){case"forwards":for(a=t.child,n=null;a!==null;)e=a.alternate,e!==null&&bu(e)===null&&(n=a),a=a.sibling;a=n,a===null?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),Eh(t,!1,n,a,o);break;case"backwards":for(a=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&bu(e)===null){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}Eh(t,!0,a,null,o);break;case"together":Eh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function kr(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),On|=t.lanes,!(a&t.childLanes))if(e!==null){if(Vc(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(ye(153));if(t.child!==null){for(e=t.child,a=Dr(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Dr(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Av(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&vu(e)))}function o2(e,t,a){switch(t.tag){case 3:lu(t,t.stateNode.containerInfo),rn(t,ma,e.memoizedState.cache),Hc();break;case 27:case 5:gm(t);break;case 4:lu(t,t.stateNode.containerInfo);break;case 10:rn(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(nn(t),t.flags|=128,null):a&t.child.childLanes?Wb(e,t,a):(nn(t),e=kr(e,t,a),e!==null?e.sibling:null);nn(t);break;case 19:var n=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(Vc(e,t,a,!1),s=(a&t.childLanes)!==0),n){if(s)return ej(e,t,a);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Wt(pa,pa.current),s)break;return null;case 22:case 23:return t.lanes=0,Jb(e,t,a);case 24:rn(t,ma,e.memoizedState.cache)}return kr(e,t,a)}function tj(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)ya=!0;else{if(!Av(e,a)&&!(t.flags&128))return ya=!1,o2(e,t,a);ya=!!(e.flags&131072)}else ya=!1,Et&&t.flags&1048576&&sb(t,pu,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,n=s._init;if(s=n(s._payload),t.type=s,typeof s=="function")cv(s)?(e=jo(s,e),t.tag=1,t=Gx(null,t,s,e,a)):(t.tag=0,t=qm(null,t,s,e,a));else{if(s!=null){if(n=s.$$typeof,n===Qp){t.tag=11,t=Bx(null,t,s,e,a);break e}else if(n===Kp){t.tag=14,t=Ux(null,t,s,e,a);break e}}throw t=pm(s)||s,Error(ye(306,t,""))}}return t;case 0:return qm(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,n=jo(s,t.pendingProps),Gx(e,t,s,n,a);case 3:e:{if(lu(t,t.stateNode.containerInfo),e===null)throw Error(ye(387));s=t.pendingProps;var o=t.memoizedState;n=o.element,zm(e,t),Jl(t,s,null,a);var i=t.memoizedState;if(s=i.cache,rn(t,ma,s),s!==o.cache&&Rm(t,[ma],a,!0),Xl(),s=i.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=Zx(e,t,s,a);break e}else if(s!==n){n=Es(Error(ye(424)),t),mc(n),t=Zx(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(na=Bs(e.firstChild),Fa=t,Et=!0,ho=null,er=!0,a=Ub(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Hc(),s===n){t=kr(e,t,a);break e}wa(e,t,s,a)}t=t.child}return t;case 26:return Xd(e,t),e===null?(a=u0(t.type,null,t.pendingProps,null))?t.memoizedState=a:Et||(a=t.type,e=t.pendingProps,s=Du(yn.current).createElement(a),s[Oa]=t,s[Ja]=e,Sa(s,a,e),_a(s),t.stateNode=s):t.memoizedState=u0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return gm(t),e===null&&Et&&(s=t.stateNode=qj(t.type,t.pendingProps,yn.current),Fa=t,er=!0,n=na,Ln(t.type)?(ap=n,na=Bs(s.firstChild)):na=n),wa(e,t,t.pendingProps.children,a),Xd(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Et&&((n=s=na)&&(s=M2(s,t.type,t.pendingProps,er),s!==null?(t.stateNode=s,Fa=t,na=Bs(s.firstChild),er=!1,n=!0):n=!1),n||_o(t)),gm(t),n=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,Wm(n,o)?s=null:i!==null&&Wm(n,i)&&(t.flags|=32),t.memoizedState!==null&&(n=gv(e,t,JA,null,null,a),yc._currentValue=n),Xd(e,t),wa(e,t,s,a),t.child;case 6:return e===null&&Et&&((e=a=na)&&(a=k2(a,t.pendingProps,er),a!==null?(t.stateNode=a,Fa=t,na=null,e=!0):e=!1),e||_o(t)),null;case 13:return Wb(e,t,a);case 4:return lu(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Bi(t,null,s,a):wa(e,t,s,a),t.child;case 11:return Bx(e,t,t.type,t.pendingProps,a);case 7:return wa(e,t,t.pendingProps,a),t.child;case 8:return wa(e,t,t.pendingProps.children,a),t.child;case 12:return wa(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,rn(t,t.type,s.value),wa(e,t,s.children,a),t.child;case 9:return n=t.type._context,s=t.pendingProps.children,yo(t),n=za(n),s=s(n),t.flags|=1,wa(e,t,s,a),t.child;case 14:return Ux(e,t,t.type,t.pendingProps,a);case 15:return Xb(e,t,t.type,t.pendingProps,a);case 19:return ej(e,t,a);case 31:return s=t.pendingProps,a=t.mode,s={mode:s.mode,children:s.children},e===null?(a=Eu(s,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=Dr(e.child,s),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return Jb(e,t,a);case 24:return yo(t),s=za(ma),e===null?(n=hv(),n===null&&(n=Ht,o=fv(),n.pooledCache=o,o.refCount++,o!==null&&(n.pooledCacheLanes|=a),n=o),t.memoizedState={parent:s,cache:n},mv(t),rn(t,ma,n)):(e.lanes&a&&(zm(e,t),Jl(t,null,null,a),Xl()),n=e.memoizedState,o=t.memoizedState,n.parent!==s?(n={parent:s,cache:s},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),rn(t,ma,s)):(s=o.cache,rn(t,ma,s),s!==n.cache&&Rm(t,[ma],a,!0))),wa(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(ye(156,t.tag))}function xr(e){e.flags|=4}function Qx(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Hj(t)){if(t=Cs.current,t!==null&&((xt&4194048)===xt?or!==null:(xt&62914560)!==xt&&!(xt&536870912)||t!==or))throw Ql=Om,ob;e.flags|=8192}}function Nd(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Cy():536870912,e.lanes|=t,Ui|=t)}function Rl(e,t){if(!Et)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function sa(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var n=e.child;n!==null;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags&65011712,s|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function i2(e,t,a){var s=t.pendingProps;switch(uv(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sa(t),null;case 1:return sa(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Or(ma),Pi(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Al(t)?xr(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Sx())),sa(t),null;case 26:return a=t.memoizedState,e===null?(xr(t),a!==null?(sa(t),Qx(t,a)):(sa(t),t.flags&=-16777217)):a?a!==e.memoizedState?(xr(t),sa(t),Qx(t,a)):(sa(t),t.flags&=-16777217):(e.memoizedProps!==s&&xr(t),sa(t),t.flags&=-16777217),null;case 27:cu(t),a=yn.current;var n=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&xr(t);else{if(!s){if(t.stateNode===null)throw Error(ye(166));return sa(t),null}e=rr.current,Al(t)?wx(t):(e=qj(n,s,a),t.stateNode=e,xr(t))}return sa(t),null;case 5:if(cu(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&xr(t);else{if(!s){if(t.stateNode===null)throw Error(ye(166));return sa(t),null}if(e=rr.current,Al(t))wx(t);else{switch(n=Du(yn.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?n.createElement("select",{is:s.is}):n.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?n.createElement(a,{is:s.is}):n.createElement(a)}}e[Oa]=t,e[Ja]=s;e:for(n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.tag!==27&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}t.stateNode=e;e:switch(Sa(e,a,s),a){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&xr(t)}}return sa(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&xr(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(ye(166));if(e=yn.current,Al(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,n=Fa,n!==null)switch(n.tag){case 27:case 5:s=n.memoizedProps}e[Oa]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||Lj(e.nodeValue,a)),e||_o(t)}else e=Du(e).createTextNode(s),e[Oa]=t,t.stateNode=e}return sa(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=Al(t),s!==null&&s.dehydrated!==null){if(e===null){if(!n)throw Error(ye(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ye(317));n[Oa]=t}else Hc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;sa(t),n=!1}else n=Sx(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(Rr(t),t):(Rr(t),null)}if(Rr(t),t.flags&128)return t.lanes=a,t;if(a=s!==null,e=e!==null&&e.memoizedState!==null,a){s=t.child,n=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(n=s.alternate.memoizedState.cachePool.pool);var o=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==n&&(s.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),Nd(t,t.updateQueue),sa(t),null;case 4:return Pi(),e===null&&Pv(t.stateNode.containerInfo),sa(t),null;case 10:return Or(t.type),sa(t),null;case 19:if(ba(pa),n=t.memoizedState,n===null)return sa(t),null;if(s=(t.flags&128)!==0,o=n.rendering,o===null)if(s)Rl(n,!1);else{if(oa!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=bu(e),o!==null){for(t.flags|=128,Rl(n,!1),e=o.updateQueue,t.updateQueue=e,Nd(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)ab(a,e),a=a.sibling;return Wt(pa,pa.current&1|2),t.child}e=e.sibling}n.tail!==null&&nr()>Nu&&(t.flags|=128,s=!0,Rl(n,!1),t.lanes=4194304)}else{if(!s)if(e=bu(o),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,Nd(t,e),Rl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!Et)return sa(t),null}else 2*nr()-n.renderingStartTime>Nu&&a!==536870912&&(t.flags|=128,s=!0,Rl(n,!1),t.lanes=4194304);n.isBackwards?(o.sibling=t.child,t.child=o):(e=n.last,e!==null?e.sibling=o:t.child=o,n.last=o)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=nr(),t.sibling=null,e=pa.current,Wt(pa,s?e&1|2:e&1),t):(sa(t),null);case 22:case 23:return Rr(t),pv(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?a&536870912&&!(t.flags&128)&&(sa(t),t.subtreeFlags&6&&(t.flags|=8192)):sa(t),a=t.updateQueue,a!==null&&Nd(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&ba(mo),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Or(ma),sa(t),null;case 25:return null;case 30:return null}throw Error(ye(156,t.tag))}function l2(e,t){switch(uv(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Or(ma),Pi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return cu(t),null;case 13:if(Rr(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ye(340));Hc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ba(pa),null;case 4:return Pi(),null;case 10:return Or(t.type),null;case 22:case 23:return Rr(t),pv(),e!==null&&ba(mo),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Or(ma),null;case 25:return null;default:return null}}function aj(e,t){switch(uv(t),t.tag){case 3:Or(ma),Pi();break;case 26:case 27:case 5:cu(t);break;case 4:Pi();break;case 13:Rr(t);break;case 19:ba(pa);break;case 10:Or(t.type);break;case 22:case 23:Rr(t),pv(),e!==null&&ba(mo);break;case 24:Or(ma)}}function Kc(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var n=s.next;a=n;do{if((a.tag&e)===e){s=void 0;var o=a.create,i=a.inst;s=o(),i.destroy=s}a=a.next}while(a!==n)}}catch(l){qt(t,t.return,l)}}function Dn(e,t,a){try{var s=t.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var o=n.next;s=o;do{if((s.tag&e)===e){var i=s.inst,l=i.destroy;if(l!==void 0){i.destroy=void 0,n=t;var c=a,d=l;try{d()}catch(f){qt(n,c,f)}}}s=s.next}while(s!==o)}}catch(f){qt(t,t.return,f)}}function sj(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{cb(t,a)}catch(s){qt(e,e.return,s)}}}function rj(e,t,a){a.props=jo(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){qt(e,t,s)}}function ec(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(n){qt(e,t,n)}}function ar(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(n){qt(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(n){qt(e,t,n)}else a.current=null}function nj(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(n){qt(e,e.return,n)}}function Sh(e,t,a){try{var s=e.stateNode;T2(s,e.type,a,t),s[Ja]=t}catch(n){qt(e,e.return,n)}}function oj(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ln(e.type)||e.tag===4}function Nh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||oj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ln(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Um(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=hf));else if(s!==4&&(s===27&&Ln(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Um(e,t,a),e=e.sibling;e!==null;)Um(e,t,a),e=e.sibling}function Su(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&Ln(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Su(e,t,a),e=e.sibling;e!==null;)Su(e,t,a),e=e.sibling}function ij(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Sa(t,s,a),t[Oa]=e,t[Ja]=a}catch(o){qt(e,e.return,o)}}var Sr=!1,ca=!1,Ch=!1,Kx=typeof WeakSet=="function"?WeakSet:Set,xa=null;function c2(e,t){if(e=e.containerInfo,Xm=ku,e=Yy(e),ov(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var n=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var i=0,l=-1,c=-1,d=0,f=0,h=e,p=null;t:for(;;){for(var m;h!==a||n!==0&&h.nodeType!==3||(l=i+n),h!==o||s!==0&&h.nodeType!==3||(c=i+s),h.nodeType===3&&(i+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===e)break t;if(p===a&&++d===n&&(l=i),p===o&&++f===s&&(c=i),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}a=l===-1||c===-1?null:{start:l,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(Jm={focusedElem:e,selectionRange:a},ku=!1,xa=t;xa!==null;)if(t=xa,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,xa=e;else for(;xa!==null;){switch(t=xa,o=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,a=t,n=o.memoizedProps,o=o.memoizedState,s=a.stateNode;try{var b=jo(a.type,n,a.elementType===a.type);e=s.getSnapshotBeforeUpdate(b,o),s.__reactInternalSnapshotBeforeUpdate=e}catch(x){qt(a,a.return,x)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)ep(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ep(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(ye(163))}if(e=t.sibling,e!==null){e.return=t.return,xa=e;break}xa=t.return}}function lj(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:Zr(e,a),s&4&&Kc(5,a);break;case 1:if(Zr(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(i){qt(a,a.return,i)}else{var n=jo(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){qt(a,a.return,i)}}s&64&&sj(a),s&512&&ec(a,a.return);break;case 3:if(Zr(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{cb(e,t)}catch(i){qt(a,a.return,i)}}break;case 27:t===null&&s&4&&ij(a);case 26:case 5:Zr(e,a),t===null&&s&4&&nj(a),s&512&&ec(a,a.return);break;case 12:Zr(e,a);break;case 13:Zr(e,a),s&4&&uj(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=x2.bind(null,a),P2(e,a))));break;case 22:if(s=a.memoizedState!==null||Sr,!s){t=t!==null&&t.memoizedState!==null||ca,n=Sr;var o=ca;Sr=s,(ca=t)&&!o?Xr(e,a,(a.subtreeFlags&8772)!==0):Zr(e,a),Sr=n,ca=o}break;case 30:break;default:Zr(e,a)}}function cj(e){var t=e.alternate;t!==null&&(e.alternate=null,cj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ev(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Xt=null,Ya=!1;function _r(e,t,a){for(a=a.child;a!==null;)dj(e,t,a),a=a.sibling}function dj(e,t,a){if(ds&&typeof ds.onCommitFiberUnmount=="function")try{ds.onCommitFiberUnmount(Fc,a)}catch{}switch(a.tag){case 26:ca||ar(a,t),_r(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ca||ar(a,t);var s=Xt,n=Ya;Ln(a.type)&&(Xt=a.stateNode,Ya=!1),_r(e,t,a),rc(a.stateNode),Xt=s,Ya=n;break;case 5:ca||ar(a,t);case 6:if(s=Xt,n=Ya,Xt=null,_r(e,t,a),Xt=s,Ya=n,Xt!==null)if(Ya)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(a.stateNode)}catch(o){qt(a,t,o)}else try{Xt.removeChild(a.stateNode)}catch(o){qt(a,t,o)}break;case 18:Xt!==null&&(Ya?(e=Xt,l0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),wc(e)):l0(Xt,a.stateNode));break;case 4:s=Xt,n=Ya,Xt=a.stateNode.containerInfo,Ya=!0,_r(e,t,a),Xt=s,Ya=n;break;case 0:case 11:case 14:case 15:ca||Dn(2,a,t),ca||Dn(4,a,t),_r(e,t,a);break;case 1:ca||(ar(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&rj(a,t,s)),_r(e,t,a);break;case 21:_r(e,t,a);break;case 22:ca=(s=ca)||a.memoizedState!==null,_r(e,t,a),ca=s;break;default:_r(e,t,a)}}function uj(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{wc(e)}catch(a){qt(t,t.return,a)}}function d2(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Kx),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Kx),t;default:throw Error(ye(435,e.tag))}}function Ah(e,t){var a=d2(e);t.forEach(function(s){var n=_2.bind(null,e,s);a.has(s)||(a.add(s),s.then(n,n))})}function ns(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var n=a[s],o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 27:if(Ln(l.type)){Xt=l.stateNode,Ya=!1;break e}break;case 5:Xt=l.stateNode,Ya=!1;break e;case 3:case 4:Xt=l.stateNode.containerInfo,Ya=!0;break e}l=l.return}if(Xt===null)throw Error(ye(160));dj(o,i,n),Xt=null,Ya=!1,o=n.alternate,o!==null&&(o.return=null),n.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)fj(t,e),t=t.sibling}var $s=null;function fj(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ns(t,e),os(e),s&4&&(Dn(3,e,e.return),Kc(3,e),Dn(5,e,e.return));break;case 1:ns(t,e),os(e),s&512&&(ca||a===null||ar(a,a.return)),s&64&&Sr&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var n=$s;if(ns(t,e),os(e),s&512&&(ca||a===null||ar(a,a.return)),s&4){var o=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,n=n.ownerDocument||n;t:switch(s){case"title":o=n.getElementsByTagName("title")[0],(!o||o[Bc]||o[Oa]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=n.createElement(s),n.head.insertBefore(o,n.querySelector("head > title"))),Sa(o,s,a),o[Oa]=e,_a(o),s=o;break e;case"link":var i=h0("link","href",n).get(s+(a.href||""));if(i){for(var l=0;l<i.length;l++)if(o=i[l],o.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&o.getAttribute("rel")===(a.rel==null?null:a.rel)&&o.getAttribute("title")===(a.title==null?null:a.title)&&o.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){i.splice(l,1);break t}}o=n.createElement(s),Sa(o,s,a),n.head.appendChild(o);break;case"meta":if(i=h0("meta","content",n).get(s+(a.content||""))){for(l=0;l<i.length;l++)if(o=i[l],o.getAttribute("content")===(a.content==null?null:""+a.content)&&o.getAttribute("name")===(a.name==null?null:a.name)&&o.getAttribute("property")===(a.property==null?null:a.property)&&o.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&o.getAttribute("charset")===(a.charSet==null?null:a.charSet)){i.splice(l,1);break t}}o=n.createElement(s),Sa(o,s,a),n.head.appendChild(o);break;default:throw Error(ye(468,s))}o[Oa]=e,_a(o),s=o}e.stateNode=s}else m0(n,e.type,e.stateNode);else e.stateNode=f0(n,s,e.memoizedProps);else o!==s?(o===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):o.count--,s===null?m0(n,e.type,e.stateNode):f0(n,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Sh(e,e.memoizedProps,a.memoizedProps)}break;case 27:ns(t,e),os(e),s&512&&(ca||a===null||ar(a,a.return)),a!==null&&s&4&&Sh(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ns(t,e),os(e),s&512&&(ca||a===null||ar(a,a.return)),e.flags&32){n=e.stateNode;try{Li(n,"")}catch(m){qt(e,e.return,m)}}s&4&&e.stateNode!=null&&(n=e.memoizedProps,Sh(e,n,a!==null?a.memoizedProps:n)),s&1024&&(Ch=!0);break;case 6:if(ns(t,e),os(e),s&4){if(e.stateNode===null)throw Error(ye(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(m){qt(e,e.return,m)}}break;case 3:if(eu=null,n=$s,$s=Ou(t.containerInfo),ns(t,e),$s=n,os(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{wc(t.containerInfo)}catch(m){qt(e,e.return,m)}Ch&&(Ch=!1,hj(e));break;case 4:s=$s,$s=Ou(e.stateNode.containerInfo),ns(t,e),os(e),$s=s;break;case 12:ns(t,e),os(e);break;case 13:ns(t,e),os(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zv=nr()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ah(e,s)));break;case 22:n=e.memoizedState!==null;var c=a!==null&&a.memoizedState!==null,d=Sr,f=ca;if(Sr=d||n,ca=f||c,ns(t,e),ca=f,Sr=d,os(e),s&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(a===null||c||Sr||ca||eo(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){c=a=t;try{if(o=c.stateNode,n)i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=h!=null&&h.hasOwnProperty("display")?h.display:null;l.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(m){qt(c,c.return,m)}}}else if(t.tag===6){if(a===null){c=t;try{c.stateNode.nodeValue=n?"":c.memoizedProps}catch(m){qt(c,c.return,m)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,Ah(e,a))));break;case 19:ns(t,e),os(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ah(e,s)));break;case 30:break;case 21:break;default:ns(t,e),os(e)}}function os(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(oj(s)){a=s;break}s=s.return}if(a==null)throw Error(ye(160));switch(a.tag){case 27:var n=a.stateNode,o=Nh(e);Su(e,o,n);break;case 5:var i=a.stateNode;a.flags&32&&(Li(i,""),a.flags&=-33);var l=Nh(e);Su(e,l,i);break;case 3:case 4:var c=a.stateNode.containerInfo,d=Nh(e);Um(e,d,c);break;default:throw Error(ye(161))}}catch(f){qt(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hj(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;hj(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Zr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)lj(e,t.alternate,t),t=t.sibling}function eo(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Dn(4,t,t.return),eo(t);break;case 1:ar(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&rj(t,t.return,a),eo(t);break;case 27:rc(t.stateNode);case 26:case 5:ar(t,t.return),eo(t);break;case 22:t.memoizedState===null&&eo(t);break;case 30:eo(t);break;default:eo(t)}e=e.sibling}}function Xr(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,n=e,o=t,i=o.flags;switch(o.tag){case 0:case 11:case 15:Xr(n,o,a),Kc(4,o);break;case 1:if(Xr(n,o,a),s=o,n=s.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(d){qt(s,s.return,d)}if(s=o,n=s.updateQueue,n!==null){var l=s.stateNode;try{var c=n.shared.hiddenCallbacks;if(c!==null)for(n.shared.hiddenCallbacks=null,n=0;n<c.length;n++)lb(c[n],l)}catch(d){qt(s,s.return,d)}}a&&i&64&&sj(o),ec(o,o.return);break;case 27:ij(o);case 26:case 5:Xr(n,o,a),a&&s===null&&i&4&&nj(o),ec(o,o.return);break;case 12:Xr(n,o,a);break;case 13:Xr(n,o,a),a&&i&4&&uj(n,o);break;case 22:o.memoizedState===null&&Xr(n,o,a),ec(o,o.return);break;case 30:break;default:Xr(n,o,a)}t=t.sibling}}function Tv(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Gc(a))}function Rv(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Gc(e))}function Qs(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)mj(e,t,a,s),t=t.sibling}function mj(e,t,a,s){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Qs(e,t,a,s),n&2048&&Kc(9,t);break;case 1:Qs(e,t,a,s);break;case 3:Qs(e,t,a,s),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Gc(e)));break;case 12:if(n&2048){Qs(e,t,a,s),e=t.stateNode;try{var o=t.memoizedProps,i=o.id,l=o.onPostCommit;typeof l=="function"&&l(i,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){qt(t,t.return,c)}}else Qs(e,t,a,s);break;case 13:Qs(e,t,a,s);break;case 23:break;case 22:o=t.stateNode,i=t.alternate,t.memoizedState!==null?o._visibility&2?Qs(e,t,a,s):tc(e,t):o._visibility&2?Qs(e,t,a,s):(o._visibility|=2,Xo(e,t,a,s,(t.subtreeFlags&10256)!==0)),n&2048&&Tv(i,t);break;case 24:Qs(e,t,a,s),n&2048&&Rv(t.alternate,t);break;default:Qs(e,t,a,s)}}function Xo(e,t,a,s,n){for(n=n&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var o=e,i=t,l=a,c=s,d=i.flags;switch(i.tag){case 0:case 11:case 15:Xo(o,i,l,c,n),Kc(8,i);break;case 23:break;case 22:var f=i.stateNode;i.memoizedState!==null?f._visibility&2?Xo(o,i,l,c,n):tc(o,i):(f._visibility|=2,Xo(o,i,l,c,n)),n&&d&2048&&Tv(i.alternate,i);break;case 24:Xo(o,i,l,c,n),n&&d&2048&&Rv(i.alternate,i);break;default:Xo(o,i,l,c,n)}t=t.sibling}}function tc(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,n=s.flags;switch(s.tag){case 22:tc(a,s),n&2048&&Tv(s.alternate,s);break;case 24:tc(a,s),n&2048&&Rv(s.alternate,s);break;default:tc(a,s)}t=t.sibling}}var $l=8192;function Lo(e){if(e.subtreeFlags&$l)for(e=e.child;e!==null;)pj(e),e=e.sibling}function pj(e){switch(e.tag){case 26:Lo(e),e.flags&$l&&e.memoizedState!==null&&Q2($s,e.memoizedState,e.memoizedProps);break;case 5:Lo(e);break;case 3:case 4:var t=$s;$s=Ou(e.stateNode.containerInfo),Lo(e),$s=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=$l,$l=16777216,Lo(e),$l=t):Lo(e));break;default:Lo(e)}}function vj(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Dl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];xa=s,xj(s,e)}vj(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)gj(e),e=e.sibling}function gj(e){switch(e.tag){case 0:case 11:case 15:Dl(e),e.flags&2048&&Dn(9,e,e.return);break;case 3:Dl(e);break;case 12:Dl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Jd(e)):Dl(e);break;default:Dl(e)}}function Jd(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];xa=s,xj(s,e)}vj(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Dn(8,t,t.return),Jd(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Jd(t));break;default:Jd(t)}e=e.sibling}}function xj(e,t){for(;xa!==null;){var a=xa;switch(a.tag){case 0:case 11:case 15:Dn(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Gc(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,xa=s;else e:for(a=e;xa!==null;){s=xa;var n=s.sibling,o=s.return;if(cj(s),s===a){xa=null;break e}if(n!==null){n.return=o,xa=n;break e}xa=o}}}var u2={getCacheForType:function(e){var t=za(ma),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},f2=typeof WeakMap=="function"?WeakMap:Map,Mt=0,Ht=null,ft=null,xt=0,zt=0,is=null,gn=!1,cl=!1,Dv=!1,Pr=0,oa=0,On=0,po=0,Ov=0,Ss=0,Ui=0,ac=null,Qa=null,Hm=!1,zv=0,Nu=1/0,Cu=null,wn=null,Ea=0,En=null,Hi=null,ji=0,Vm=0,Gm=null,_j=null,sc=0,Zm=null;function fs(){if(Mt&2&&xt!==0)return xt&-xt;if(Ye.T!==null){var e=Fi;return e!==0?e:kv()}return Ry()}function yj(){Ss===0&&(Ss=!(xt&536870912)||Et?Ny():536870912);var e=Cs.current;return e!==null&&(e.flags|=32),Ss}function hs(e,t,a){(e===Ht&&(zt===2||zt===9)||e.cancelPendingCommit!==null)&&(Vi(e,0),xn(e,xt,Ss,!1)),qc(e,a),(!(Mt&2)||e!==Ht)&&(e===Ht&&(!(Mt&2)&&(po|=a),oa===4&&xn(e,xt,Ss,!1)),dr(e))}function bj(e,t,a){if(Mt&6)throw Error(ye(327));var s=!a&&(t&124)===0&&(t&e.expiredLanes)===0||$c(e,t),n=s?p2(e,t):Th(e,t,!0),o=s;do{if(n===0){cl&&!s&&xn(e,t,0,!1);break}else{if(a=e.current.alternate,o&&!h2(a)){n=Th(e,t,!1),o=!1;continue}if(n===2){if(o=t,e.errorRecoveryDisabledLanes&o)var i=0;else i=e.pendingLanes&-536870913,i=i!==0?i:i&536870912?536870912:0;if(i!==0){t=i;e:{var l=e;n=ac;var c=l.current.memoizedState.isDehydrated;if(c&&(Vi(l,i).flags|=256),i=Th(l,i,!1),i!==2){if(Dv&&!c){l.errorRecoveryDisabledLanes|=o,po|=o,n=4;break e}o=Qa,Qa=n,o!==null&&(Qa===null?Qa=o:Qa.push.apply(Qa,o))}n=i}if(o=!1,n!==2)continue}}if(n===1){Vi(e,0),xn(e,t,0,!0);break}e:{switch(s=e,o=n,o){case 0:case 1:throw Error(ye(345));case 4:if((t&4194048)!==t)break;case 6:xn(s,t,Ss,!gn);break e;case 2:Qa=null;break;case 3:case 5:break;default:throw Error(ye(329))}if((t&62914560)===t&&(n=zv+300-nr(),10<n)){if(xn(s,t,Ss,!gn),Wu(s,0,!0)!==0)break e;s.timeoutHandle=$j(Xx.bind(null,s,a,Qa,Cu,Hm,t,Ss,po,Ui,gn,o,2,-0,0),n);break e}Xx(s,a,Qa,Cu,Hm,t,Ss,po,Ui,gn,o,0,-0,0)}}break}while(!0);dr(e)}function Xx(e,t,a,s,n,o,i,l,c,d,f,h,p,m){if(e.timeoutHandle=-1,h=t.subtreeFlags,(h&8192||(h&16785408)===16785408)&&(_c={stylesheets:null,count:0,unsuspend:Y2},pj(t),h=K2(),h!==null)){e.cancelPendingCommit=h(Wx.bind(null,e,t,o,a,s,n,i,l,c,f,1,p,m)),xn(e,o,i,!d);return}Wx(e,t,o,a,s,n,i,l,c)}function h2(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var n=a[s],o=n.getSnapshot;n=n.value;try{if(!ps(o(),n))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xn(e,t,a,s){t&=~Ov,t&=~po,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var n=t;0<n;){var o=31-us(n),i=1<<o;s[o]=-1,n&=~i}a!==0&&Ay(e,a,t)}function df(){return Mt&6?!0:(Xc(0),!1)}function Mv(){if(ft!==null){if(zt===0)var e=ft.return;else e=ft,Tr=Mo=null,yv(e),bi=null,vc=0,e=ft;for(;e!==null;)aj(e.alternate,e),e=e.return;ft=null}}function Vi(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,D2(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Mv(),Ht=e,ft=a=Dr(e.current,null),xt=t,zt=0,is=null,gn=!1,cl=$c(e,t),Dv=!1,Ui=Ss=Ov=po=On=oa=0,Qa=ac=null,Hm=!1,t&8&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var n=31-us(s),o=1<<n;t|=e[n],s&=~o}return Pr=t,sf(),a}function jj(e,t){ot=null,Ye.H=yu,t===Zc||t===nf?(t=Tx(),zt=3):t===ob?(t=Tx(),zt=4):zt=t===Kb?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,is=t,ft===null&&(oa=1,wu(e,Es(t,e.current)))}function wj(){var e=Ye.H;return Ye.H=yu,e===null?yu:e}function Ej(){var e=Ye.A;return Ye.A=u2,e}function Ym(){oa=4,gn||(xt&4194048)!==xt&&Cs.current!==null||(cl=!0),!(On&134217727)&&!(po&134217727)||Ht===null||xn(Ht,xt,Ss,!1)}function Th(e,t,a){var s=Mt;Mt|=2;var n=wj(),o=Ej();(Ht!==e||xt!==t)&&(Cu=null,Vi(e,t)),t=!1;var i=oa;e:do try{if(zt!==0&&ft!==null){var l=ft,c=is;switch(zt){case 8:Mv(),i=6;break e;case 3:case 2:case 9:case 6:Cs.current===null&&(t=!0);var d=zt;if(zt=0,is=null,mi(e,l,c,d),a&&cl){i=0;break e}break;default:d=zt,zt=0,is=null,mi(e,l,c,d)}}m2(),i=oa;break}catch(f){jj(e,f)}while(!0);return t&&e.shellSuspendCounter++,Tr=Mo=null,Mt=s,Ye.H=n,Ye.A=o,ft===null&&(Ht=null,xt=0,sf()),i}function m2(){for(;ft!==null;)Sj(ft)}function p2(e,t){var a=Mt;Mt|=2;var s=wj(),n=Ej();Ht!==e||xt!==t?(Cu=null,Nu=nr()+500,Vi(e,t)):cl=$c(e,t);e:do try{if(zt!==0&&ft!==null){t=ft;var o=is;t:switch(zt){case 1:zt=0,is=null,mi(e,t,o,1);break;case 2:case 9:if(Ax(o)){zt=0,is=null,Jx(t);break}t=function(){zt!==2&&zt!==9||Ht!==e||(zt=7),dr(e)},o.then(t,t);break e;case 3:zt=7;break e;case 4:zt=5;break e;case 7:Ax(o)?(zt=0,is=null,Jx(t)):(zt=0,is=null,mi(e,t,o,7));break;case 5:var i=null;switch(ft.tag){case 26:i=ft.memoizedState;case 5:case 27:var l=ft;if(!i||Hj(i)){zt=0,is=null;var c=l.sibling;if(c!==null)ft=c;else{var d=l.return;d!==null?(ft=d,uf(d)):ft=null}break t}}zt=0,is=null,mi(e,t,o,5);break;case 6:zt=0,is=null,mi(e,t,o,6);break;case 8:Mv(),oa=6;break e;default:throw Error(ye(462))}}v2();break}catch(f){jj(e,f)}while(!0);return Tr=Mo=null,Ye.H=s,Ye.A=n,Mt=a,ft!==null?0:(Ht=null,xt=0,sf(),oa)}function v2(){for(;ft!==null&&!LC();)Sj(ft)}function Sj(e){var t=tj(e.alternate,e,Pr);e.memoizedProps=e.pendingProps,t===null?uf(e):ft=t}function Jx(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Vx(a,t,t.pendingProps,t.type,void 0,xt);break;case 11:t=Vx(a,t,t.pendingProps,t.type.render,t.ref,xt);break;case 5:yv(t);default:aj(a,t),t=ft=ab(t,Pr),t=tj(a,t,Pr)}e.memoizedProps=e.pendingProps,t===null?uf(e):ft=t}function mi(e,t,a,s){Tr=Mo=null,yv(t),bi=null,vc=0;var n=t.return;try{if(n2(e,n,t,a,xt)){oa=1,wu(e,Es(a,e.current)),ft=null;return}}catch(o){if(n!==null)throw ft=n,o;oa=1,wu(e,Es(a,e.current)),ft=null;return}t.flags&32768?(Et||s===1?e=!0:cl||xt&536870912?e=!1:(gn=e=!0,(s===2||s===9||s===3||s===6)&&(s=Cs.current,s!==null&&s.tag===13&&(s.flags|=16384))),Nj(t,e)):uf(t)}function uf(e){var t=e;do{if(t.flags&32768){Nj(t,gn);return}e=t.return;var a=i2(t.alternate,t,Pr);if(a!==null){ft=a;return}if(t=t.sibling,t!==null){ft=t;return}ft=t=e}while(t!==null);oa===0&&(oa=5)}function Nj(e,t){do{var a=l2(e.alternate,e);if(a!==null){a.flags&=32767,ft=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ft=e;return}ft=e=a}while(e!==null);oa=6,ft=null}function Wx(e,t,a,s,n,o,i,l,c){e.cancelPendingCommit=null;do ff();while(Ea!==0);if(Mt&6)throw Error(ye(327));if(t!==null){if(t===e.current)throw Error(ye(177));if(o=t.lanes|t.childLanes,o|=iv,YC(e,a,o,i,l,c),e===Ht&&(ft=Ht=null,xt=0),Hi=t,En=e,ji=a,Vm=o,Gm=n,_j=s,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,y2(du,function(){return Dj(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,t.subtreeFlags&13878||s){s=Ye.T,Ye.T=null,n=St.p,St.p=2,i=Mt,Mt|=4;try{c2(e,t,a)}finally{Mt=i,St.p=n,Ye.T=s}}Ea=1,Cj(),Aj(),Tj()}}function Cj(){if(Ea===1){Ea=0;var e=En,t=Hi,a=(t.flags&13878)!==0;if(t.subtreeFlags&13878||a){a=Ye.T,Ye.T=null;var s=St.p;St.p=2;var n=Mt;Mt|=4;try{fj(t,e);var o=Jm,i=Yy(e.containerInfo),l=o.focusedElem,c=o.selectionRange;if(i!==l&&l&&l.ownerDocument&&Zy(l.ownerDocument.documentElement,l)){if(c!==null&&ov(l)){var d=c.start,f=c.end;if(f===void 0&&(f=d),"selectionStart"in l)l.selectionStart=d,l.selectionEnd=Math.min(f,l.value.length);else{var h=l.ownerDocument||document,p=h&&h.defaultView||window;if(p.getSelection){var m=p.getSelection(),b=l.textContent.length,x=Math.min(c.start,b),y=c.end===void 0?x:Math.min(c.end,b);!m.extend&&x>y&&(i=y,y=x,x=i);var _=yx(l,x),g=yx(l,y);if(_&&g&&(m.rangeCount!==1||m.anchorNode!==_.node||m.anchorOffset!==_.offset||m.focusNode!==g.node||m.focusOffset!==g.offset)){var v=h.createRange();v.setStart(_.node,_.offset),m.removeAllRanges(),x>y?(m.addRange(v),m.extend(g.node,g.offset)):(v.setEnd(g.node,g.offset),m.addRange(v))}}}}for(h=[],m=l;m=m.parentNode;)m.nodeType===1&&h.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<h.length;l++){var w=h[l];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}ku=!!Xm,Jm=Xm=null}finally{Mt=n,St.p=s,Ye.T=a}}e.current=t,Ea=2}}function Aj(){if(Ea===2){Ea=0;var e=En,t=Hi,a=(t.flags&8772)!==0;if(t.subtreeFlags&8772||a){a=Ye.T,Ye.T=null;var s=St.p;St.p=2;var n=Mt;Mt|=4;try{lj(e,t.alternate,t)}finally{Mt=n,St.p=s,Ye.T=a}}Ea=3}}function Tj(){if(Ea===4||Ea===3){Ea=0,FC();var e=En,t=Hi,a=ji,s=_j;t.subtreeFlags&10256||t.flags&10256?Ea=5:(Ea=0,Hi=En=null,Rj(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(wn=null),Wp(a),t=t.stateNode,ds&&typeof ds.onCommitFiberRoot=="function")try{ds.onCommitFiberRoot(Fc,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=Ye.T,n=St.p,St.p=2,Ye.T=null;try{for(var o=e.onRecoverableError,i=0;i<s.length;i++){var l=s[i];o(l.value,{componentStack:l.stack})}}finally{Ye.T=t,St.p=n}}ji&3&&ff(),dr(e),n=e.pendingLanes,a&4194090&&n&42?e===Zm?sc++:(sc=0,Zm=e):sc=0,Xc(0)}}function Rj(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Gc(t)))}function ff(e){return Cj(),Aj(),Tj(),Dj()}function Dj(){if(Ea!==5)return!1;var e=En,t=Vm;Vm=0;var a=Wp(ji),s=Ye.T,n=St.p;try{St.p=32>a?32:a,Ye.T=null,a=Gm,Gm=null;var o=En,i=ji;if(Ea=0,Hi=En=null,ji=0,Mt&6)throw Error(ye(331));var l=Mt;if(Mt|=4,gj(o.current),mj(o,o.current,i,a),Mt=l,Xc(0,!1),ds&&typeof ds.onPostCommitFiberRoot=="function")try{ds.onPostCommitFiberRoot(Fc,o)}catch{}return!0}finally{St.p=n,Ye.T=s,Rj(e,t)}}function e0(e,t,a){t=Es(a,t),t=$m(e.stateNode,t,2),e=jn(e,t,2),e!==null&&(qc(e,2),dr(e))}function qt(e,t,a){if(e.tag===3)e0(e,e,a);else for(;t!==null;){if(t.tag===3){e0(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(wn===null||!wn.has(s))){e=Es(a,e),a=Yb(2),s=jn(t,a,2),s!==null&&(Qb(a,s,t,e),qc(s,2),dr(s));break}}t=t.return}}function Rh(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new f2;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(a)||(Dv=!0,n.add(a),e=g2.bind(null,e,t,a),t.then(e,e))}function g2(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ht===e&&(xt&a)===a&&(oa===4||oa===3&&(xt&62914560)===xt&&300>nr()-zv?!(Mt&2)&&Vi(e,0):Ov|=a,Ui===xt&&(Ui=0)),dr(e)}function Oj(e,t){t===0&&(t=Cy()),e=ll(e,t),e!==null&&(qc(e,t),dr(e))}function x2(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Oj(e,a)}function _2(e,t){var a=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(a=n.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(ye(314))}s!==null&&s.delete(t),Oj(e,a)}function y2(e,t){return Xp(e,t)}var Au=null,Jo=null,Qm=!1,Tu=!1,Dh=!1,vo=0;function dr(e){e!==Jo&&e.next===null&&(Jo===null?Au=Jo=e:Jo=Jo.next=e),Tu=!0,Qm||(Qm=!0,j2())}function Xc(e,t){if(!Dh&&Tu){Dh=!0;do for(var a=!1,s=Au;s!==null;){if(e!==0){var n=s.pendingLanes;if(n===0)var o=0;else{var i=s.suspendedLanes,l=s.pingedLanes;o=(1<<31-us(42|e)+1)-1,o&=n&~(i&~l),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(a=!0,t0(s,o))}else o=xt,o=Wu(s,s===Ht?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(o&3)||$c(s,o)||(a=!0,t0(s,o));s=s.next}while(a);Dh=!1}}function b2(){zj()}function zj(){Tu=Qm=!1;var e=0;vo!==0&&(R2()&&(e=vo),vo=0);for(var t=nr(),a=null,s=Au;s!==null;){var n=s.next,o=Mj(s,t);o===0?(s.next=null,a===null?Au=n:a.next=n,n===null&&(Jo=a)):(a=s,(e!==0||o&3)&&(Tu=!0)),s=n}Xc(e)}function Mj(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var i=31-us(o),l=1<<i,c=n[i];c===-1?(!(l&a)||l&s)&&(n[i]=ZC(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}if(t=Ht,a=xt,a=Wu(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(zt===2||zt===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&sh(s),e.callbackNode=null,e.callbackPriority=0;if(!(a&3)||$c(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&sh(s),Wp(a)){case 2:case 8:a=Ey;break;case 32:a=du;break;case 268435456:a=Sy;break;default:a=du}return s=kj.bind(null,e),a=Xp(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&sh(s),e.callbackPriority=2,e.callbackNode=null,2}function kj(e,t){if(Ea!==0&&Ea!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ff()&&e.callbackNode!==a)return null;var s=xt;return s=Wu(e,e===Ht?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(bj(e,s,t),Mj(e,nr()),e.callbackNode!=null&&e.callbackNode===a?kj.bind(null,e):null)}function t0(e,t){if(ff())return null;bj(e,t,!0)}function j2(){O2(function(){Mt&6?Xp(wy,b2):zj()})}function kv(){return vo===0&&(vo=Ny()),vo}function a0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Hd(""+e)}function s0(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function w2(e,t,a,s,n){if(t==="submit"&&a&&a.stateNode===n){var o=a0((n[Ja]||null).action),i=s.submitter;i&&(t=(t=i[Ja]||null)?a0(t.formAction):i.getAttribute("formAction"),t!==null&&(o=t,i=null));var l=new ef("action","action",null,s,n);e.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(vo!==0){var c=i?s0(n,i):new FormData(n);Lm(a,{pending:!0,data:c,method:n.method,action:o},null,c)}}else typeof o=="function"&&(l.preventDefault(),c=i?s0(n,i):new FormData(n),Lm(a,{pending:!0,data:c,method:n.method,action:o},o,c))},currentTarget:n}]})}}for(var Oh=0;Oh<Nm.length;Oh++){var zh=Nm[Oh],E2=zh.toLowerCase(),S2=zh[0].toUpperCase()+zh.slice(1);Gs(E2,"on"+S2)}Gs(Ky,"onAnimationEnd");Gs(Xy,"onAnimationIteration");Gs(Jy,"onAnimationStart");Gs("dblclick","onDoubleClick");Gs("focusin","onFocus");Gs("focusout","onBlur");Gs(BA,"onTransitionRun");Gs(UA,"onTransitionStart");Gs(HA,"onTransitionCancel");Gs(Wy,"onTransitionEnd");Ii("onMouseEnter",["mouseout","mouseover"]);Ii("onMouseLeave",["mouseout","mouseover"]);Ii("onPointerEnter",["pointerout","pointerover"]);Ii("onPointerLeave",["pointerout","pointerover"]);Do("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Do("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Do("onBeforeInput",["compositionend","keypress","textInput","paste"]);Do("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Do("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Do("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gc));function Pj(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],n=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var i=s.length-1;0<=i;i--){var l=s[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&n.isPropagationStopped())break e;o=l,n.currentTarget=d;try{o(n)}catch(f){ju(f)}n.currentTarget=null,o=c}else for(i=0;i<s.length;i++){if(l=s[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&n.isPropagationStopped())break e;o=l,n.currentTarget=d;try{o(n)}catch(f){ju(f)}n.currentTarget=null,o=c}}}}function ut(e,t){var a=t[_m];a===void 0&&(a=t[_m]=new Set);var s=e+"__bubble";a.has(s)||(Ij(t,e,2,!1),a.add(s))}function Mh(e,t,a){var s=0;t&&(s|=4),Ij(a,e,s,t)}var Cd="_reactListening"+Math.random().toString(36).slice(2);function Pv(e){if(!e[Cd]){e[Cd]=!0,Dy.forEach(function(a){a!=="selectionchange"&&(N2.has(a)||Mh(a,!1,e),Mh(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cd]||(t[Cd]=!0,Mh("selectionchange",!1,t))}}function Ij(e,t,a,s){switch(Qj(t)){case 2:var n=W2;break;case 8:n=eT;break;default:n=$v}a=n.bind(null,t,a,e),n=void 0,!wm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):n!==void 0?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function kh(e,t,a,s,n){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var l=s.stateNode.containerInfo;if(l===n)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&i.stateNode.containerInfo===n)return;i=i.return}for(;l!==null;){if(i=ni(l),i===null)return;if(c=i.tag,c===5||c===6||c===26||c===27){s=o=i;continue e}l=l.parentNode}}s=s.return}Fy(function(){var d=o,f=av(a),h=[];e:{var p=eb.get(e);if(p!==void 0){var m=ef,b=e;switch(e){case"keypress":if(Gd(a)===0)break e;case"keydown":case"keyup":m=yA;break;case"focusin":b="focus",m=uh;break;case"focusout":b="blur",m=uh;break;case"beforeblur":case"afterblur":m=uh;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=dx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=lA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=wA;break;case Ky:case Xy:case Jy:m=uA;break;case Wy:m=SA;break;case"scroll":case"scrollend":m=oA;break;case"wheel":m=CA;break;case"copy":case"cut":case"paste":m=hA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=fx;break;case"toggle":case"beforetoggle":m=TA}var x=(t&4)!==0,y=!x&&(e==="scroll"||e==="scrollend"),_=x?p!==null?p+"Capture":null:p;x=[];for(var g=d,v;g!==null;){var w=g;if(v=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||v===null||_===null||(w=uc(g,_),w!=null&&x.push(xc(g,w,v))),y)break;g=g.return}0<x.length&&(p=new m(p,b,null,a,f),h.push({event:p,listeners:x}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&a!==jm&&(b=a.relatedTarget||a.fromElement)&&(ni(b)||b[ol]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(b=a.relatedTarget||a.toElement,m=d,b=b?ni(b):null,b!==null&&(y=Lc(b),x=b.tag,b!==y||x!==5&&x!==27&&x!==6)&&(b=null)):(m=null,b=d),m!==b)){if(x=dx,w="onMouseLeave",_="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(x=fx,w="onPointerLeave",_="onPointerEnter",g="pointer"),y=m==null?p:Fl(m),v=b==null?p:Fl(b),p=new x(w,g+"leave",m,a,f),p.target=y,p.relatedTarget=v,w=null,ni(f)===d&&(x=new x(_,g+"enter",b,a,f),x.target=v,x.relatedTarget=y,w=x),y=w,m&&b)t:{for(x=m,_=b,g=0,v=x;v;v=Fo(v))g++;for(v=0,w=_;w;w=Fo(w))v++;for(;0<g-v;)x=Fo(x),g--;for(;0<v-g;)_=Fo(_),v--;for(;g--;){if(x===_||_!==null&&x===_.alternate)break t;x=Fo(x),_=Fo(_)}x=null}else x=null;m!==null&&r0(h,p,m,x,!1),b!==null&&y!==null&&r0(h,y,b,x,!0)}}e:{if(p=d?Fl(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var E=vx;else if(px(p))if(Vy)E=FA;else{E=IA;var S=PA}else m=p.nodeName,!m||m.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?d&&tv(d.elementType)&&(E=vx):E=LA;if(E&&(E=E(e,d))){Hy(h,E,a,f);break e}S&&S(e,p,d),e==="focusout"&&d&&p.type==="number"&&d.memoizedProps.value!=null&&bm(p,"number",p.value)}switch(S=d?Fl(d):window,e){case"focusin":(px(S)||S.contentEditable==="true")&&(li=S,Em=d,Zl=null);break;case"focusout":Zl=Em=li=null;break;case"mousedown":Sm=!0;break;case"contextmenu":case"mouseup":case"dragend":Sm=!1,bx(h,a,f);break;case"selectionchange":if(qA)break;case"keydown":case"keyup":bx(h,a,f)}var T;if(nv)e:{switch(e){case"compositionstart":var q="onCompositionStart";break e;case"compositionend":q="onCompositionEnd";break e;case"compositionupdate":q="onCompositionUpdate";break e}q=void 0}else ii?By(e,a)&&(q="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(q="onCompositionStart");q&&(qy&&a.locale!=="ko"&&(ii||q!=="onCompositionStart"?q==="onCompositionEnd"&&ii&&(T=$y()):(vn=f,sv="value"in vn?vn.value:vn.textContent,ii=!0)),S=Ru(d,q),0<S.length&&(q=new ux(q,e,null,a,f),h.push({event:q,listeners:S}),T?q.data=T:(T=Uy(a),T!==null&&(q.data=T)))),(T=DA?OA(e,a):zA(e,a))&&(q=Ru(d,"onBeforeInput"),0<q.length&&(S=new ux("onBeforeInput","beforeinput",null,a,f),h.push({event:S,listeners:q}),S.data=T)),w2(h,e,d,a,f)}Pj(h,t)})}function xc(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Ru(e,t){for(var a=t+"Capture",s=[];e!==null;){var n=e,o=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||o===null||(n=uc(e,a),n!=null&&s.unshift(xc(e,n,o)),n=uc(e,t),n!=null&&s.push(xc(e,n,o))),e.tag===3)return s;e=e.return}return[]}function Fo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function r0(e,t,a,s,n){for(var o=t._reactName,i=[];a!==null&&a!==s;){var l=a,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||d===null||(c=d,n?(d=uc(a,o),d!=null&&i.unshift(xc(a,d,c))):n||(d=uc(a,o),d!=null&&i.push(xc(a,d,c)))),a=a.return}i.length!==0&&e.push({event:t,listeners:i})}var C2=/\r\n?/g,A2=/\u0000|\uFFFD/g;function n0(e){return(typeof e=="string"?e:""+e).replace(C2,`
`).replace(A2,"")}function Lj(e,t){return t=n0(t),n0(e)===t}function hf(){}function It(e,t,a,s,n,o){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Li(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Li(e,""+s);break;case"className":yd(e,"class",s);break;case"tabIndex":yd(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":yd(e,a,s);break;case"style":Ly(e,s,o);break;case"data":if(t!=="object"){yd(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Hd(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(a==="formAction"?(t!=="input"&&It(e,t,"name",n.name,n,null),It(e,t,"formEncType",n.formEncType,n,null),It(e,t,"formMethod",n.formMethod,n,null),It(e,t,"formTarget",n.formTarget,n,null)):(It(e,t,"encType",n.encType,n,null),It(e,t,"method",n.method,n,null),It(e,t,"target",n.target,n,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=Hd(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=hf);break;case"onScroll":s!=null&&ut("scroll",e);break;case"onScrollEnd":s!=null&&ut("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(ye(61));if(a=s.__html,a!=null){if(n.children!=null)throw Error(ye(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=Hd(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":ut("beforetoggle",e),ut("toggle",e),Ud(e,"popover",s);break;case"xlinkActuate":gr(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":gr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":gr(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":gr(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":gr(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":gr(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":gr(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":gr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":gr(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Ud(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=rA.get(a)||a,Ud(e,a,s))}}function Km(e,t,a,s,n,o){switch(a){case"style":Ly(e,s,o);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(ye(61));if(a=s.__html,a!=null){if(n.children!=null)throw Error(ye(60));e.innerHTML=a}}break;case"children":typeof s=="string"?Li(e,s):(typeof s=="number"||typeof s=="bigint")&&Li(e,""+s);break;case"onScroll":s!=null&&ut("scroll",e);break;case"onScrollEnd":s!=null&&ut("scrollend",e);break;case"onClick":s!=null&&(e.onclick=hf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oy.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(n=a.endsWith("Capture"),t=a.slice(2,n?a.length-7:void 0),o=e[Ja]||null,o=o!=null?o[a]:null,typeof o=="function"&&e.removeEventListener(t,o,n),typeof s=="function")){typeof o!="function"&&o!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,n);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):Ud(e,a,s)}}}function Sa(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",e),ut("load",e);var s=!1,n=!1,o;for(o in a)if(a.hasOwnProperty(o)){var i=a[o];if(i!=null)switch(o){case"src":s=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(ye(137,t));default:It(e,t,o,i,a,null)}}n&&It(e,t,"srcSet",a.srcSet,a,null),s&&It(e,t,"src",a.src,a,null);return;case"input":ut("invalid",e);var l=o=i=n=null,c=null,d=null;for(s in a)if(a.hasOwnProperty(s)){var f=a[s];if(f!=null)switch(s){case"name":n=f;break;case"type":i=f;break;case"checked":c=f;break;case"defaultChecked":d=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(ye(137,t));break;default:It(e,t,s,f,a,null)}}ky(e,o,l,c,d,i,n,!1),uu(e);return;case"select":ut("invalid",e),s=i=o=null;for(n in a)if(a.hasOwnProperty(n)&&(l=a[n],l!=null))switch(n){case"value":o=l;break;case"defaultValue":i=l;break;case"multiple":s=l;default:It(e,t,n,l,a,null)}t=o,a=i,e.multiple=!!s,t!=null?vi(e,!!s,t,!1):a!=null&&vi(e,!!s,a,!0);return;case"textarea":ut("invalid",e),o=n=s=null;for(i in a)if(a.hasOwnProperty(i)&&(l=a[i],l!=null))switch(i){case"value":s=l;break;case"defaultValue":n=l;break;case"children":o=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(ye(91));break;default:It(e,t,i,l,a,null)}Iy(e,s,n,o),uu(e);return;case"option":for(c in a)if(a.hasOwnProperty(c)&&(s=a[c],s!=null))switch(c){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:It(e,t,c,s,a,null)}return;case"dialog":ut("beforetoggle",e),ut("toggle",e),ut("cancel",e),ut("close",e);break;case"iframe":case"object":ut("load",e);break;case"video":case"audio":for(s=0;s<gc.length;s++)ut(gc[s],e);break;case"image":ut("error",e),ut("load",e);break;case"details":ut("toggle",e);break;case"embed":case"source":case"link":ut("error",e),ut("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in a)if(a.hasOwnProperty(d)&&(s=a[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(ye(137,t));default:It(e,t,d,s,a,null)}return;default:if(tv(t)){for(f in a)a.hasOwnProperty(f)&&(s=a[f],s!==void 0&&Km(e,t,f,s,a,void 0));return}}for(l in a)a.hasOwnProperty(l)&&(s=a[l],s!=null&&It(e,t,l,s,a,null))}function T2(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,o=null,i=null,l=null,c=null,d=null,f=null;for(m in a){var h=a[m];if(a.hasOwnProperty(m)&&h!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":c=h;default:s.hasOwnProperty(m)||It(e,t,m,null,s,h)}}for(var p in s){var m=s[p];if(h=a[p],s.hasOwnProperty(p)&&(m!=null||h!=null))switch(p){case"type":o=m;break;case"name":n=m;break;case"checked":d=m;break;case"defaultChecked":f=m;break;case"value":i=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(ye(137,t));break;default:m!==h&&It(e,t,p,m,s,h)}}ym(e,i,l,c,d,f,o,n);return;case"select":m=i=l=p=null;for(o in a)if(c=a[o],a.hasOwnProperty(o)&&c!=null)switch(o){case"value":break;case"multiple":m=c;default:s.hasOwnProperty(o)||It(e,t,o,null,s,c)}for(n in s)if(o=s[n],c=a[n],s.hasOwnProperty(n)&&(o!=null||c!=null))switch(n){case"value":p=o;break;case"defaultValue":l=o;break;case"multiple":i=o;default:o!==c&&It(e,t,n,o,s,c)}t=l,a=i,s=m,p!=null?vi(e,!!a,p,!1):!!s!=!!a&&(t!=null?vi(e,!!a,t,!0):vi(e,!!a,a?[]:"",!1));return;case"textarea":m=p=null;for(l in a)if(n=a[l],a.hasOwnProperty(l)&&n!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:It(e,t,l,null,s,n)}for(i in s)if(n=s[i],o=a[i],s.hasOwnProperty(i)&&(n!=null||o!=null))switch(i){case"value":p=n;break;case"defaultValue":m=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(ye(91));break;default:n!==o&&It(e,t,i,n,s,o)}Py(e,p,m);return;case"option":for(var b in a)if(p=a[b],a.hasOwnProperty(b)&&p!=null&&!s.hasOwnProperty(b))switch(b){case"selected":e.selected=!1;break;default:It(e,t,b,null,s,p)}for(c in s)if(p=s[c],m=a[c],s.hasOwnProperty(c)&&p!==m&&(p!=null||m!=null))switch(c){case"selected":e.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:It(e,t,c,p,s,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var x in a)p=a[x],a.hasOwnProperty(x)&&p!=null&&!s.hasOwnProperty(x)&&It(e,t,x,null,s,p);for(d in s)if(p=s[d],m=a[d],s.hasOwnProperty(d)&&p!==m&&(p!=null||m!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(ye(137,t));break;default:It(e,t,d,p,s,m)}return;default:if(tv(t)){for(var y in a)p=a[y],a.hasOwnProperty(y)&&p!==void 0&&!s.hasOwnProperty(y)&&Km(e,t,y,void 0,s,p);for(f in s)p=s[f],m=a[f],!s.hasOwnProperty(f)||p===m||p===void 0&&m===void 0||Km(e,t,f,p,s,m);return}}for(var _ in a)p=a[_],a.hasOwnProperty(_)&&p!=null&&!s.hasOwnProperty(_)&&It(e,t,_,null,s,p);for(h in s)p=s[h],m=a[h],!s.hasOwnProperty(h)||p===m||p==null&&m==null||It(e,t,h,p,s,m)}var Xm=null,Jm=null;function Du(e){return e.nodeType===9?e:e.ownerDocument}function o0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fj(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Wm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ph=null;function R2(){var e=window.event;return e&&e.type==="popstate"?e===Ph?!1:(Ph=e,!0):(Ph=null,!1)}var $j=typeof setTimeout=="function"?setTimeout:void 0,D2=typeof clearTimeout=="function"?clearTimeout:void 0,i0=typeof Promise=="function"?Promise:void 0,O2=typeof queueMicrotask=="function"?queueMicrotask:typeof i0<"u"?function(e){return i0.resolve(null).then(e).catch(z2)}:$j;function z2(e){setTimeout(function(){throw e})}function Ln(e){return e==="head"}function l0(e,t){var a=t,s=0,n=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(0<s&&8>s){a=s;var i=e.ownerDocument;if(a&1&&rc(i.documentElement),a&2&&rc(i.body),a&4)for(a=i.head,rc(a),i=a.firstChild;i;){var l=i.nextSibling,c=i.nodeName;i[Bc]||c==="SCRIPT"||c==="STYLE"||c==="LINK"&&i.rel.toLowerCase()==="stylesheet"||a.removeChild(i),i=l}}if(n===0){e.removeChild(o),wc(t);return}n--}else a==="$"||a==="$?"||a==="$!"?n++:s=a.charCodeAt(0)-48;else s=0;a=o}while(a);wc(t)}function ep(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ep(a),ev(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function M2(e,t,a,s){for(;e.nodeType===1;){var n=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Bc])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=Bs(e.nextSibling),e===null)break}return null}function k2(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Bs(e.nextSibling),e===null))return null;return e}function tp(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function P2(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Bs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var ap=null;function c0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function qj(e,t,a){switch(t=Du(a),e){case"html":if(e=t.documentElement,!e)throw Error(ye(452));return e;case"head":if(e=t.head,!e)throw Error(ye(453));return e;case"body":if(e=t.body,!e)throw Error(ye(454));return e;default:throw Error(ye(451))}}function rc(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ev(e)}var As=new Map,d0=new Set;function Ou(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var $r=St.d;St.d={f:I2,r:L2,D:F2,C:$2,L:q2,m:B2,X:H2,S:U2,M:V2};function I2(){var e=$r.f(),t=df();return e||t}function L2(e){var t=il(e);t!==null&&t.tag===5&&t.type==="form"?Mb(t):$r.r(e)}var dl=typeof document>"u"?null:document;function Bj(e,t,a){var s=dl;if(s&&typeof t=="string"&&t){var n=ws(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof a=="string"&&(n+='[crossorigin="'+a+'"]'),d0.has(n)||(d0.add(n),e={rel:e,crossOrigin:a,href:t},s.querySelector(n)===null&&(t=s.createElement("link"),Sa(t,"link",e),_a(t),s.head.appendChild(t)))}}function F2(e){$r.D(e),Bj("dns-prefetch",e,null)}function $2(e,t){$r.C(e,t),Bj("preconnect",e,t)}function q2(e,t,a){$r.L(e,t,a);var s=dl;if(s&&e&&t){var n='link[rel="preload"][as="'+ws(t)+'"]';t==="image"&&a&&a.imageSrcSet?(n+='[imagesrcset="'+ws(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(n+='[imagesizes="'+ws(a.imageSizes)+'"]')):n+='[href="'+ws(e)+'"]';var o=n;switch(t){case"style":o=Gi(e);break;case"script":o=ul(e)}As.has(o)||(e=Kt({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),As.set(o,e),s.querySelector(n)!==null||t==="style"&&s.querySelector(Jc(o))||t==="script"&&s.querySelector(Wc(o))||(t=s.createElement("link"),Sa(t,"link",e),_a(t),s.head.appendChild(t)))}}function B2(e,t){$r.m(e,t);var a=dl;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+ws(s)+'"][href="'+ws(e)+'"]',o=n;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=ul(e)}if(!As.has(o)&&(e=Kt({rel:"modulepreload",href:e},t),As.set(o,e),a.querySelector(n)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Wc(o)))return}s=a.createElement("link"),Sa(s,"link",e),_a(s),a.head.appendChild(s)}}}function U2(e,t,a){$r.S(e,t,a);var s=dl;if(s&&e){var n=pi(s).hoistableStyles,o=Gi(e);t=t||"default";var i=n.get(o);if(!i){var l={loading:0,preload:null};if(i=s.querySelector(Jc(o)))l.loading=5;else{e=Kt({rel:"stylesheet",href:e,"data-precedence":t},a),(a=As.get(o))&&Iv(e,a);var c=i=s.createElement("link");_a(c),Sa(c,"link",e),c._p=new Promise(function(d,f){c.onload=d,c.onerror=f}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Wd(i,t,s)}i={type:"stylesheet",instance:i,count:1,state:l},n.set(o,i)}}}function H2(e,t){$r.X(e,t);var a=dl;if(a&&e){var s=pi(a).hoistableScripts,n=ul(e),o=s.get(n);o||(o=a.querySelector(Wc(n)),o||(e=Kt({src:e,async:!0},t),(t=As.get(n))&&Lv(e,t),o=a.createElement("script"),_a(o),Sa(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(n,o))}}function V2(e,t){$r.M(e,t);var a=dl;if(a&&e){var s=pi(a).hoistableScripts,n=ul(e),o=s.get(n);o||(o=a.querySelector(Wc(n)),o||(e=Kt({src:e,async:!0,type:"module"},t),(t=As.get(n))&&Lv(e,t),o=a.createElement("script"),_a(o),Sa(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(n,o))}}function u0(e,t,a,s){var n=(n=yn.current)?Ou(n):null;if(!n)throw Error(ye(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Gi(a.href),a=pi(n).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Gi(a.href);var o=pi(n).hoistableStyles,i=o.get(e);if(i||(n=n.ownerDocument||n,i={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,i),(o=n.querySelector(Jc(e)))&&!o._p&&(i.instance=o,i.state.loading=5),As.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},As.set(e,a),o||G2(n,e,a,i.state))),t&&s===null)throw Error(ye(528,""));return i}if(t&&s!==null)throw Error(ye(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ul(a),a=pi(n).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(ye(444,e))}}function Gi(e){return'href="'+ws(e)+'"'}function Jc(e){return'link[rel="stylesheet"]['+e+"]"}function Uj(e){return Kt({},e,{"data-precedence":e.precedence,precedence:null})}function G2(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Sa(t,"link",a),_a(t),e.head.appendChild(t))}function ul(e){return'[src="'+ws(e)+'"]'}function Wc(e){return"script[async]"+e}function f0(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+ws(a.href)+'"]');if(s)return t.instance=s,_a(s),s;var n=Kt({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),_a(s),Sa(s,"style",n),Wd(s,a.precedence,e),t.instance=s;case"stylesheet":n=Gi(a.href);var o=e.querySelector(Jc(n));if(o)return t.state.loading|=4,t.instance=o,_a(o),o;s=Uj(a),(n=As.get(n))&&Iv(s,n),o=(e.ownerDocument||e).createElement("link"),_a(o);var i=o;return i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),Sa(o,"link",s),t.state.loading|=4,Wd(o,a.precedence,e),t.instance=o;case"script":return o=ul(a.src),(n=e.querySelector(Wc(o)))?(t.instance=n,_a(n),n):(s=a,(n=As.get(o))&&(s=Kt({},a),Lv(s,n)),e=e.ownerDocument||e,n=e.createElement("script"),_a(n),Sa(n,"link",s),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(ye(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(s=t.instance,t.state.loading|=4,Wd(s,a.precedence,e));return t.instance}function Wd(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=s.length?s[s.length-1]:null,o=n,i=0;i<s.length;i++){var l=s[i];if(l.dataset.precedence===t)o=l;else if(o!==n)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Iv(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Lv(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var eu=null;function h0(e,t,a){if(eu===null){var s=new Map,n=eu=new Map;n.set(a,s)}else n=eu,s=n.get(a),s||(s=new Map,n.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),n=0;n<a.length;n++){var o=a[n];if(!(o[Bc]||o[Oa]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var i=o.getAttribute(t)||"";i=e+i;var l=s.get(i);l?l.push(o):s.set(i,[o])}}return s}function m0(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Z2(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Hj(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var _c=null;function Y2(){}function Q2(e,t,a){if(_c===null)throw Error(ye(475));var s=_c;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var n=Gi(a.href),o=e.querySelector(Jc(n));if(o){e=o._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=zu.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=o,_a(o);return}o=e.ownerDocument||e,a=Uj(a),(n=As.get(n))&&Iv(a,n),o=o.createElement("link"),_a(o);var i=o;i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),Sa(o,"link",a),t.instance=o}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(s.count++,t=zu.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function K2(){if(_c===null)throw Error(ye(475));var e=_c;return e.stylesheets&&e.count===0&&sp(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&sp(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function zu(){if(this.count--,this.count===0){if(this.stylesheets)sp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Mu=null;function sp(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Mu=new Map,t.forEach(X2,e),Mu=null,zu.call(e))}function X2(e,t){if(!(t.state.loading&4)){var a=Mu.get(e);if(a)var s=a.get(null);else{a=new Map,Mu.set(e,a);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<n.length;o++){var i=n[o];(i.nodeName==="LINK"||i.getAttribute("media")!=="not all")&&(a.set(i.dataset.precedence,i),s=i)}s&&a.set(null,s)}n=t.instance,i=n.getAttribute("data-precedence"),o=a.get(i)||s,o===s&&a.set(null,n),a.set(i,n),this.count++,s=zu.bind(this),n.addEventListener("load",s),n.addEventListener("error",s),o?o.parentNode.insertBefore(n,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var yc={$$typeof:Nr,Provider:null,Consumer:null,_currentValue:co,_currentValue2:co,_threadCount:0};function J2(e,t,a,s,n,o,i,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rh(0),this.hiddenUpdates=rh(null),this.identifierPrefix=s,this.onUncaughtError=n,this.onCaughtError=o,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Vj(e,t,a,s,n,o,i,l,c,d,f,h){return e=new J2(e,t,a,i,l,c,d,h),t=1,o===!0&&(t|=24),o=cs(3,null,null,t),e.current=o,o.stateNode=e,t=fv(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:s,isDehydrated:a,cache:t},mv(o),e}function Gj(e){return e?(e=ui,e):ui}function Zj(e,t,a,s,n,o){n=Gj(n),s.context===null?s.context=n:s.pendingContext=n,s=bn(t),s.payload={element:a},o=o===void 0?null:o,o!==null&&(s.callback=o),a=jn(e,s,t),a!==null&&(hs(a,e,t),Kl(a,e,t))}function p0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Fv(e,t){p0(e,t),(e=e.alternate)&&p0(e,t)}function Yj(e){if(e.tag===13){var t=ll(e,67108864);t!==null&&hs(t,e,67108864),Fv(e,67108864)}}var ku=!0;function W2(e,t,a,s){var n=Ye.T;Ye.T=null;var o=St.p;try{St.p=2,$v(e,t,a,s)}finally{St.p=o,Ye.T=n}}function eT(e,t,a,s){var n=Ye.T;Ye.T=null;var o=St.p;try{St.p=8,$v(e,t,a,s)}finally{St.p=o,Ye.T=n}}function $v(e,t,a,s){if(ku){var n=rp(s);if(n===null)kh(e,t,s,Pu,a),v0(e,s);else if(aT(n,e,t,a,s))s.stopPropagation();else if(v0(e,s),t&4&&-1<tT.indexOf(e)){for(;n!==null;){var o=il(n);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var i=Jn(o.pendingLanes);if(i!==0){var l=o;for(l.pendingLanes|=2,l.entangledLanes|=2;i;){var c=1<<31-us(i);l.entanglements[1]|=c,i&=~c}dr(o),!(Mt&6)&&(Nu=nr()+500,Xc(0))}}break;case 13:l=ll(o,2),l!==null&&hs(l,o,2),df(),Fv(o,2)}if(o=rp(s),o===null&&kh(e,t,s,Pu,a),o===n)break;n=o}n!==null&&s.stopPropagation()}else kh(e,t,s,null,a)}}function rp(e){return e=av(e),qv(e)}var Pu=null;function qv(e){if(Pu=null,e=ni(e),e!==null){var t=Lc(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=_y(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Pu=e,null}function Qj(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($C()){case wy:return 2;case Ey:return 8;case du:case qC:return 32;case Sy:return 268435456;default:return 32}default:return 32}}var np=!1,Sn=null,Nn=null,Cn=null,bc=new Map,jc=new Map,ln=[],tT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function v0(e,t){switch(e){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":Nn=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":bc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jc.delete(t.pointerId)}}function Ol(e,t,a,s,n,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:o,targetContainers:[n]},t!==null&&(t=il(t),t!==null&&Yj(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function aT(e,t,a,s,n){switch(t){case"focusin":return Sn=Ol(Sn,e,t,a,s,n),!0;case"dragenter":return Nn=Ol(Nn,e,t,a,s,n),!0;case"mouseover":return Cn=Ol(Cn,e,t,a,s,n),!0;case"pointerover":var o=n.pointerId;return bc.set(o,Ol(bc.get(o)||null,e,t,a,s,n)),!0;case"gotpointercapture":return o=n.pointerId,jc.set(o,Ol(jc.get(o)||null,e,t,a,s,n)),!0}return!1}function Kj(e){var t=ni(e.target);if(t!==null){var a=Lc(t);if(a!==null){if(t=a.tag,t===13){if(t=_y(a),t!==null){e.blockedOn=t,QC(e.priority,function(){if(a.tag===13){var s=fs();s=Jp(s);var n=ll(a,s);n!==null&&hs(n,a,s),Fv(a,s)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=rp(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);jm=s,a.target.dispatchEvent(s),jm=null}else return t=il(a),t!==null&&Yj(t),e.blockedOn=a,!1;t.shift()}return!0}function g0(e,t,a){tu(e)&&a.delete(t)}function sT(){np=!1,Sn!==null&&tu(Sn)&&(Sn=null),Nn!==null&&tu(Nn)&&(Nn=null),Cn!==null&&tu(Cn)&&(Cn=null),bc.forEach(g0),jc.forEach(g0)}function Ad(e,t){e.blockedOn===t&&(e.blockedOn=null,np||(np=!0,va.unstable_scheduleCallback(va.unstable_NormalPriority,sT)))}var Td=null;function x0(e){Td!==e&&(Td=e,va.unstable_scheduleCallback(va.unstable_NormalPriority,function(){Td===e&&(Td=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],n=e[t+2];if(typeof s!="function"){if(qv(s||a)===null)continue;break}var o=il(a);o!==null&&(e.splice(t,3),t-=3,Lm(o,{pending:!0,data:n,method:a.method,action:s},s,n))}}))}function wc(e){function t(c){return Ad(c,e)}Sn!==null&&Ad(Sn,e),Nn!==null&&Ad(Nn,e),Cn!==null&&Ad(Cn,e),bc.forEach(t),jc.forEach(t);for(var a=0;a<ln.length;a++){var s=ln[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<ln.length&&(a=ln[0],a.blockedOn===null);)Kj(a),a.blockedOn===null&&ln.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var n=a[s],o=a[s+1],i=n[Ja]||null;if(typeof o=="function")i||x0(a);else if(i){var l=null;if(o&&o.hasAttribute("formAction")){if(n=o,i=o[Ja]||null)l=i.formAction;else if(qv(n)!==null)continue}else l=i.action;typeof l=="function"?a[s+1]=l:(a.splice(s,3),s-=3),x0(a)}}}function Bv(e){this._internalRoot=e}mf.prototype.render=Bv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ye(409));var a=t.current,s=fs();Zj(a,s,e,t,null,null)};mf.prototype.unmount=Bv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zj(e.current,2,null,e,null,null),df(),t[ol]=null}};function mf(e){this._internalRoot=e}mf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ry();e={blockedOn:null,target:e,priority:t};for(var a=0;a<ln.length&&t!==0&&t<ln[a].priority;a++);ln.splice(a,0,e),a===0&&Kj(e)}};var _0=gy.version;if(_0!=="19.1.1")throw Error(ye(527,_0,"19.1.1"));St.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ye(188)):(e=Object.keys(e).join(","),Error(ye(268,e)));return e=zC(t),e=e!==null?yy(e):null,e=e===null?null:e.stateNode,e};var rT={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Ye,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rd.isDisabled&&Rd.supportsFiber)try{Fc=Rd.inject(rT),ds=Rd}catch{}}Xu.createRoot=function(e,t){if(!xy(e))throw Error(ye(299));var a=!1,s="",n=Vb,o=Gb,i=Zb,l=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(i=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=Vj(e,1,!1,null,null,a,s,n,o,i,l,null),e[ol]=t.current,Pv(e),new Bv(t)};Xu.hydrateRoot=function(e,t,a){if(!xy(e))throw Error(ye(299));var s=!1,n="",o=Vb,i=Gb,l=Zb,c=null,d=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(i=a.onCaughtError),a.onRecoverableError!==void 0&&(l=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(c=a.unstable_transitionCallbacks),a.formState!==void 0&&(d=a.formState)),t=Vj(e,1,!0,t,a??null,s,n,o,i,l,c,d),t.context=Gj(null),a=t.current,s=fs(),s=Jp(s),n=bn(s),n.callback=null,jn(a,n,s),a=s,t.current.lanes=a,qc(t,a),dr(t),e[ol]=t.current,Pv(e),new mf(t)};Xu.version="19.1.1";function Xj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xj)}catch(e){console.error(e)}}Xj(),sy.exports=Xu;var nT=sy.exports,oT=(e,t,a,s,n,o,i,l)=>{let c=document.documentElement,d=["light","dark"];function f(m){(Array.isArray(e)?e:[e]).forEach(b=>{let x=b==="class",y=x&&o?n.map(_=>o[_]||_):n;x?(c.classList.remove(...y),c.classList.add(o&&o[m]?o[m]:m)):c.setAttribute(b,m)}),h(m)}function h(m){l&&d.includes(m)&&(c.style.colorScheme=m)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)f(s);else try{let m=localStorage.getItem(t)||a,b=i&&m==="system"?p():m;f(b)}catch{}},iT=u.createContext(void 0),lT={setTheme:e=>{},themes:[]},cT=()=>{var e;return(e=u.useContext(iT))!=null?e:lT};u.memo(({forcedTheme:e,storageKey:t,attribute:a,enableSystem:s,enableColorScheme:n,defaultTheme:o,value:i,themes:l,nonce:c,scriptProps:d})=>{let f=JSON.stringify([a,t,o,e,l,i,s,n]).slice(1,-1);return u.createElement("script",{...d,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${oT.toString()})(${f})`}})});var dT=e=>{switch(e){case"success":return hT;case"info":return pT;case"warning":return mT;case"error":return vT;default:return null}},uT=Array(12).fill(0),fT=({visible:e,className:t})=>Ee.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Ee.createElement("div",{className:"sonner-spinner"},uT.map((a,s)=>Ee.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),hT=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ee.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),mT=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ee.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),pT=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ee.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),vT=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ee.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),gT=Ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ee.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ee.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),xT=()=>{let[e,t]=Ee.useState(document.hidden);return Ee.useEffect(()=>{let a=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",a),()=>window.removeEventListener("visibilitychange",a)},[]),e},op=1,_T=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:a,...s}=e,n=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:op++,o=this.toasts.find(l=>l.id===n),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),o?this.toasts=this.toasts.map(l=>l.id===n?(this.publish({...l,...e,id:n,title:a}),{...l,...e,id:n,dismissible:i,title:a}):l):this.addToast({title:a,...s,dismissible:i,id:n}),n},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(a=>a({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let a;t.loading!==void 0&&(a=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),n=a!==void 0,o,i=s.then(async c=>{if(o=["resolve",c],Ee.isValidElement(c))n=!1,this.create({id:a,type:"default",message:c});else if(bT(c)&&!c.ok){n=!1;let d=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,f=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:a,type:"error",message:d,description:f})}else if(t.success!==void 0){n=!1;let d=typeof t.success=="function"?await t.success(c):t.success,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:a,type:"success",message:d,description:f})}}).catch(async c=>{if(o=["reject",c],t.error!==void 0){n=!1;let d=typeof t.error=="function"?await t.error(c):t.error,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:a,type:"error",message:d,description:f})}}).finally(()=>{var c;n&&(this.dismiss(a),a=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,d)=>i.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof a!="string"&&typeof a!="number"?{unwrap:l}:Object.assign(a,{unwrap:l})},this.custom=(e,t)=>{let a=(t==null?void 0:t.id)||op++;return this.create({jsx:e(a),id:a,...t}),a},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ka=new _T,yT=(e,t)=>{let a=(t==null?void 0:t.id)||op++;return Ka.addToast({title:e,...t,id:a}),a},bT=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",jT=yT,wT=()=>Ka.toasts,ET=()=>Ka.getActiveToasts();Object.assign(jT,{success:Ka.success,info:Ka.info,warning:Ka.warning,error:Ka.error,custom:Ka.custom,message:Ka.message,promise:Ka.promise,dismiss:Ka.dismiss,loading:Ka.loading},{getHistory:wT,getToasts:ET});function ST(e,{insertAt:t}={}){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&a.firstChild?a.insertBefore(s,a.firstChild):a.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}ST(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Dd(e){return e.label!==void 0}var NT=3,CT="32px",AT="16px",y0=4e3,TT=356,RT=14,DT=20,OT=200;function Ms(...e){return e.filter(Boolean).join(" ")}function zT(e){let[t,a]=e.split("-"),s=[];return t&&s.push(t),a&&s.push(a),s}var MT=e=>{var t,a,s,n,o,i,l,c,d,f,h;let{invert:p,toast:m,unstyled:b,interacting:x,setHeights:y,visibleToasts:_,heights:g,index:v,toasts:w,expanded:E,removeToast:S,defaultRichColors:T,closeButton:q,style:k,cancelButtonStyle:$,actionButtonStyle:Z,className:W="",descriptionClassName:le="",duration:O,position:D,gap:N,loadingIcon:F,expandByDefault:I,classNames:j,icons:A,closeButtonAriaLabel:L="Close toast",pauseWhenPageIsHidden:R}=e,[P,H]=Ee.useState(null),[V,ae]=Ee.useState(null),[G,be]=Ee.useState(!1),[de,U]=Ee.useState(!1),[ie,B]=Ee.useState(!1),[oe,je]=Ee.useState(!1),[me,Ne]=Ee.useState(!1),[Ae,fe]=Ee.useState(0),[M,ee]=Ee.useState(0),ce=Ee.useRef(m.duration||O||y0),X=Ee.useRef(null),re=Ee.useRef(null),C=v===0,Q=v+1<=_,J=m.type,ne=m.dismissible!==!1,ge=m.className||"",he=m.descriptionClassName||"",pe=Ee.useMemo(()=>g.findIndex(Ge=>Ge.toastId===m.id)||0,[g,m.id]),we=Ee.useMemo(()=>{var Ge;return(Ge=m.closeButton)!=null?Ge:q},[m.closeButton,q]),Ze=Ee.useMemo(()=>m.duration||O||y0,[m.duration,O]),gt=Ee.useRef(0),Tt=Ee.useRef(0),it=Ee.useRef(0),Vt=Ee.useRef(null),[kt,Ua]=D.split("-"),as=Ee.useMemo(()=>g.reduce((Ge,Se,Xe)=>Xe>=pe?Ge:Ge+Se.height,0),[g,pe]),Hr=xT(),Hn=m.invert||p,Vn=J==="loading";Tt.current=Ee.useMemo(()=>pe*N+as,[pe,as]),Ee.useEffect(()=>{ce.current=Ze},[Ze]),Ee.useEffect(()=>{be(!0)},[]),Ee.useEffect(()=>{let Ge=re.current;if(Ge){let Se=Ge.getBoundingClientRect().height;return ee(Se),y(Xe=>[{toastId:m.id,height:Se,position:m.position},...Xe]),()=>y(Xe=>Xe.filter(Ft=>Ft.toastId!==m.id))}},[y,m.id]),Ee.useLayoutEffect(()=>{if(!G)return;let Ge=re.current,Se=Ge.style.height;Ge.style.height="auto";let Xe=Ge.getBoundingClientRect().height;Ge.style.height=Se,ee(Xe),y(Ft=>Ft.find(tt=>tt.toastId===m.id)?Ft.map(tt=>tt.toastId===m.id?{...tt,height:Xe}:tt):[{toastId:m.id,height:Xe,position:m.position},...Ft])},[G,m.title,m.description,y,m.id]);let ka=Ee.useCallback(()=>{U(!0),fe(Tt.current),y(Ge=>Ge.filter(Se=>Se.toastId!==m.id)),setTimeout(()=>{S(m)},OT)},[m,S,y,Tt]);Ee.useEffect(()=>{if(m.promise&&J==="loading"||m.duration===1/0||m.type==="loading")return;let Ge;return E||x||R&&Hr?(()=>{if(it.current<gt.current){let Se=new Date().getTime()-gt.current;ce.current=ce.current-Se}it.current=new Date().getTime()})():ce.current!==1/0&&(gt.current=new Date().getTime(),Ge=setTimeout(()=>{var Se;(Se=m.onAutoClose)==null||Se.call(m,m),ka()},ce.current)),()=>clearTimeout(Ge)},[E,x,m,J,R,Hr,ka]),Ee.useEffect(()=>{m.delete&&ka()},[ka,m.delete]);function Gn(){var Ge,Se,Xe;return A!=null&&A.loading?Ee.createElement("div",{className:Ms(j==null?void 0:j.loader,(Ge=m==null?void 0:m.classNames)==null?void 0:Ge.loader,"sonner-loader"),"data-visible":J==="loading"},A.loading):F?Ee.createElement("div",{className:Ms(j==null?void 0:j.loader,(Se=m==null?void 0:m.classNames)==null?void 0:Se.loader,"sonner-loader"),"data-visible":J==="loading"},F):Ee.createElement(fT,{className:Ms(j==null?void 0:j.loader,(Xe=m==null?void 0:m.classNames)==null?void 0:Xe.loader),visible:J==="loading"})}return Ee.createElement("li",{tabIndex:0,ref:re,className:Ms(W,ge,j==null?void 0:j.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,j==null?void 0:j.default,j==null?void 0:j[J],(a=m==null?void 0:m.classNames)==null?void 0:a[J]),"data-sonner-toast":"","data-rich-colors":(s=m.richColors)!=null?s:T,"data-styled":!(m.jsx||m.unstyled||b),"data-mounted":G,"data-promise":!!m.promise,"data-swiped":me,"data-removed":de,"data-visible":Q,"data-y-position":kt,"data-x-position":Ua,"data-index":v,"data-front":C,"data-swiping":ie,"data-dismissible":ne,"data-type":J,"data-invert":Hn,"data-swipe-out":oe,"data-swipe-direction":V,"data-expanded":!!(E||I&&G),style:{"--index":v,"--toasts-before":v,"--z-index":w.length-v,"--offset":`${de?Ae:Tt.current}px`,"--initial-height":I?"auto":`${M}px`,...k,...m.style},onDragEnd:()=>{B(!1),H(null),Vt.current=null},onPointerDown:Ge=>{Vn||!ne||(X.current=new Date,fe(Tt.current),Ge.target.setPointerCapture(Ge.pointerId),Ge.target.tagName!=="BUTTON"&&(B(!0),Vt.current={x:Ge.clientX,y:Ge.clientY}))},onPointerUp:()=>{var Ge,Se,Xe,Ft;if(oe||!ne)return;Vt.current=null;let tt=Number(((Ge=re.current)==null?void 0:Ge.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Rt=Number(((Se=re.current)==null?void 0:Se.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ue=new Date().getTime()-((Xe=X.current)==null?void 0:Xe.getTime()),De=P==="x"?tt:Rt,Ie=Math.abs(De)/ue;if(Math.abs(De)>=DT||Ie>.11){fe(Tt.current),(Ft=m.onDismiss)==null||Ft.call(m,m),ae(P==="x"?tt>0?"right":"left":Rt>0?"down":"up"),ka(),je(!0),Ne(!1);return}B(!1),H(null)},onPointerMove:Ge=>{var Se,Xe,Ft,tt;if(!Vt.current||!ne||((Se=window.getSelection())==null?void 0:Se.toString().length)>0)return;let Rt=Ge.clientY-Vt.current.y,ue=Ge.clientX-Vt.current.x,De=(Xe=e.swipeDirections)!=null?Xe:zT(D);!P&&(Math.abs(ue)>1||Math.abs(Rt)>1)&&H(Math.abs(ue)>Math.abs(Rt)?"x":"y");let Ie={x:0,y:0};P==="y"?(De.includes("top")||De.includes("bottom"))&&(De.includes("top")&&Rt<0||De.includes("bottom")&&Rt>0)&&(Ie.y=Rt):P==="x"&&(De.includes("left")||De.includes("right"))&&(De.includes("left")&&ue<0||De.includes("right")&&ue>0)&&(Ie.x=ue),(Math.abs(Ie.x)>0||Math.abs(Ie.y)>0)&&Ne(!0),(Ft=re.current)==null||Ft.style.setProperty("--swipe-amount-x",`${Ie.x}px`),(tt=re.current)==null||tt.style.setProperty("--swipe-amount-y",`${Ie.y}px`)}},we&&!m.jsx?Ee.createElement("button",{"aria-label":L,"data-disabled":Vn,"data-close-button":!0,onClick:Vn||!ne?()=>{}:()=>{var Ge;ka(),(Ge=m.onDismiss)==null||Ge.call(m,m)},className:Ms(j==null?void 0:j.closeButton,(n=m==null?void 0:m.classNames)==null?void 0:n.closeButton)},(o=A==null?void 0:A.close)!=null?o:gT):null,m.jsx||u.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:Ee.createElement(Ee.Fragment,null,J||m.icon||m.promise?Ee.createElement("div",{"data-icon":"",className:Ms(j==null?void 0:j.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Gn():null,m.type!=="loading"?m.icon||(A==null?void 0:A[J])||dT(J):null):null,Ee.createElement("div",{"data-content":"",className:Ms(j==null?void 0:j.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},Ee.createElement("div",{"data-title":"",className:Ms(j==null?void 0:j.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?Ee.createElement("div",{"data-description":"",className:Ms(le,he,j==null?void 0:j.description,(d=m==null?void 0:m.classNames)==null?void 0:d.description)},typeof m.description=="function"?m.description():m.description):null),u.isValidElement(m.cancel)?m.cancel:m.cancel&&Dd(m.cancel)?Ee.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||$,onClick:Ge=>{var Se,Xe;Dd(m.cancel)&&ne&&((Xe=(Se=m.cancel).onClick)==null||Xe.call(Se,Ge),ka())},className:Ms(j==null?void 0:j.cancelButton,(f=m==null?void 0:m.classNames)==null?void 0:f.cancelButton)},m.cancel.label):null,u.isValidElement(m.action)?m.action:m.action&&Dd(m.action)?Ee.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||Z,onClick:Ge=>{var Se,Xe;Dd(m.action)&&((Xe=(Se=m.action).onClick)==null||Xe.call(Se,Ge),!Ge.defaultPrevented&&ka())},className:Ms(j==null?void 0:j.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function b0(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function kT(e,t){let a={};return[e,t].forEach((s,n)=>{let o=n===1,i=o?"--mobile-offset":"--offset",l=o?AT:CT;function c(d){["top","right","bottom","left"].forEach(f=>{a[`${i}-${f}`]=typeof d=="number"?`${d}px`:d})}typeof s=="number"||typeof s=="string"?c(s):typeof s=="object"?["top","right","bottom","left"].forEach(d=>{s[d]===void 0?a[`${i}-${d}`]=l:a[`${i}-${d}`]=typeof s[d]=="number"?`${s[d]}px`:s[d]}):c(l)}),a}var PT=u.forwardRef(function(e,t){let{invert:a,position:s="bottom-right",hotkey:n=["altKey","KeyT"],expand:o,closeButton:i,className:l,offset:c,mobileOffset:d,theme:f="light",richColors:h,duration:p,style:m,visibleToasts:b=NT,toastOptions:x,dir:y=b0(),gap:_=RT,loadingIcon:g,icons:v,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:E}=e,[S,T]=Ee.useState([]),q=Ee.useMemo(()=>Array.from(new Set([s].concat(S.filter(R=>R.position).map(R=>R.position)))),[S,s]),[k,$]=Ee.useState([]),[Z,W]=Ee.useState(!1),[le,O]=Ee.useState(!1),[D,N]=Ee.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),F=Ee.useRef(null),I=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=Ee.useRef(null),A=Ee.useRef(!1),L=Ee.useCallback(R=>{T(P=>{var H;return(H=P.find(V=>V.id===R.id))!=null&&H.delete||Ka.dismiss(R.id),P.filter(({id:V})=>V!==R.id)})},[]);return Ee.useEffect(()=>Ka.subscribe(R=>{if(R.dismiss){T(P=>P.map(H=>H.id===R.id?{...H,delete:!0}:H));return}setTimeout(()=>{vy.flushSync(()=>{T(P=>{let H=P.findIndex(V=>V.id===R.id);return H!==-1?[...P.slice(0,H),{...P[H],...R},...P.slice(H+1)]:[R,...P]})})})}),[]),Ee.useEffect(()=>{if(f!=="system"){N(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?N("dark"):N("light")),typeof window>"u")return;let R=window.matchMedia("(prefers-color-scheme: dark)");try{R.addEventListener("change",({matches:P})=>{N(P?"dark":"light")})}catch{R.addListener(({matches:H})=>{try{N(H?"dark":"light")}catch(V){console.error(V)}})}},[f]),Ee.useEffect(()=>{S.length<=1&&W(!1)},[S]),Ee.useEffect(()=>{let R=P=>{var H,V;n.every(ae=>P[ae]||P.code===ae)&&(W(!0),(H=F.current)==null||H.focus()),P.code==="Escape"&&(document.activeElement===F.current||(V=F.current)!=null&&V.contains(document.activeElement))&&W(!1)};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[n]),Ee.useEffect(()=>{if(F.current)return()=>{j.current&&(j.current.focus({preventScroll:!0}),j.current=null,A.current=!1)}},[F.current]),Ee.createElement("section",{ref:t,"aria-label":`${w} ${I}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},q.map((R,P)=>{var H;let[V,ae]=R.split("-");return S.length?Ee.createElement("ol",{key:R,dir:y==="auto"?b0():y,tabIndex:-1,ref:F,className:l,"data-sonner-toaster":!0,"data-theme":D,"data-y-position":V,"data-lifted":Z&&S.length>1&&!o,"data-x-position":ae,style:{"--front-toast-height":`${((H=k[0])==null?void 0:H.height)||0}px`,"--width":`${TT}px`,"--gap":`${_}px`,...m,...kT(c,d)},onBlur:G=>{A.current&&!G.currentTarget.contains(G.relatedTarget)&&(A.current=!1,j.current&&(j.current.focus({preventScroll:!0}),j.current=null))},onFocus:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||A.current||(A.current=!0,j.current=G.relatedTarget)},onMouseEnter:()=>W(!0),onMouseMove:()=>W(!0),onMouseLeave:()=>{le||W(!1)},onDragEnd:()=>W(!1),onPointerDown:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},S.filter(G=>!G.position&&P===0||G.position===R).map((G,be)=>{var de,U;return Ee.createElement(MT,{key:G.id,icons:v,index:be,toast:G,defaultRichColors:h,duration:(de=x==null?void 0:x.duration)!=null?de:p,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:a,visibleToasts:b,closeButton:(U=x==null?void 0:x.closeButton)!=null?U:i,interacting:le,position:R,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,removeToast:L,toasts:S.filter(ie=>ie.position==G.position),heights:k.filter(ie=>ie.position==G.position),setHeights:$,expandByDefault:o,gap:_,loadingIcon:g,expanded:Z,pauseWhenPageIsHidden:E,swipeDirections:e.swipeDirections})})):null}))});const IT=({...e})=>{const{theme:t="system"}=cT();return r.jsx(PT,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},LT=1,FT=1e6;let Ih=0;function $T(){return Ih=(Ih+1)%Number.MAX_SAFE_INTEGER,Ih.toString()}const Lh=new Map,j0=e=>{if(Lh.has(e))return;const t=setTimeout(()=>{Lh.delete(e),nc({type:"REMOVE_TOAST",toastId:e})},FT);Lh.set(e,t)},qT=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,LT)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=t;return a?j0(a):e.toasts.forEach(s=>{j0(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===a||a===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(a=>a.id!==t.toastId)}}},au=[];let su={toasts:[]};function nc(e){su=qT(su,e),au.forEach(t=>{t(su)})}function BT({...e}){const t=$T(),a=n=>nc({type:"UPDATE_TOAST",toast:{...n,id:t}}),s=()=>nc({type:"DISMISS_TOAST",toastId:t});return nc({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:n=>{n||s()}}}),{id:t,dismiss:s,update:a}}function aa(){const[e,t]=u.useState(su);return u.useEffect(()=>(au.push(t),()=>{const a=au.indexOf(t);a>-1&&au.splice(a,1)}),[e]),{...e,toast:BT,dismiss:a=>nc({type:"DISMISS_TOAST",toastId:a})}}function qe(e,t,{checkForDefaultPrevented:a=!0}={}){return function(n){if(e==null||e(n),a===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function w0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function wo(...e){return t=>{let a=!1;const s=e.map(n=>{const o=w0(n,t);return!a&&typeof o=="function"&&(a=!0),o});if(a)return()=>{for(let n=0;n<s.length;n++){const o=s[n];typeof o=="function"?o():w0(e[n],null)}}}}function _t(...e){return u.useCallback(wo(...e),e)}function UT(e,t){const a=u.createContext(t),s=o=>{const{children:i,...l}=o,c=u.useMemo(()=>l,Object.values(l));return r.jsx(a.Provider,{value:c,children:i})};s.displayName=e+"Provider";function n(o){const i=u.useContext(a);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,n]}function vs(e,t=[]){let a=[];function s(o,i){const l=u.createContext(i),c=a.length;a=[...a,i];const d=h=>{var _;const{scope:p,children:m,...b}=h,x=((_=p==null?void 0:p[e])==null?void 0:_[c])||l,y=u.useMemo(()=>b,Object.values(b));return r.jsx(x.Provider,{value:y,children:m})};d.displayName=o+"Provider";function f(h,p){var x;const m=((x=p==null?void 0:p[e])==null?void 0:x[c])||l,b=u.useContext(m);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[d,f]}const n=()=>{const o=a.map(i=>u.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return u.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return n.scopeName=e,[s,HT(n,...t)]}function HT(...e){const t=e[0];if(e.length===1)return t;const a=()=>{const s=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(o){const i=s.reduce((l,{useScope:c,scopeName:d})=>{const h=c(o)[`__scope${d}`];return{...l,...h}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return a.scopeName=t.scopeName,a}function Eo(e){const t=GT(e),a=u.forwardRef((s,n)=>{const{children:o,...i}=s,l=u.Children.toArray(o),c=l.find(ZT);if(c){const d=c.props.children,f=l.map(h=>h===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...i,ref:n,children:u.isValidElement(d)?u.cloneElement(d,void 0,f):null})}return r.jsx(t,{...i,ref:n,children:o})});return a.displayName=`${e}.Slot`,a}var VT=Eo("Slot");function GT(e){const t=u.forwardRef((a,s)=>{const{children:n,...o}=a;if(u.isValidElement(n)){const i=QT(n),l=YT(o,n.props);return n.type!==u.Fragment&&(l.ref=s?wo(s,i):i),u.cloneElement(n,l)}return u.Children.count(n)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Jj=Symbol("radix.slottable");function Wj(e){const t=({children:a})=>r.jsx(r.Fragment,{children:a});return t.displayName=`${e}.Slottable`,t.__radixId=Jj,t}function ZT(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Jj}function YT(e,t){const a={...t};for(const s in t){const n=e[s],o=t[s];/^on[A-Z]/.test(s)?n&&o?a[s]=(...l)=>{const c=o(...l);return n(...l),c}:n&&(a[s]=n):s==="style"?a[s]={...n,...o}:s==="className"&&(a[s]=[n,o].filter(Boolean).join(" "))}return{...e,...a}}function QT(e){var s,n;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,a=t&&"isReactWarning"in t&&t.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}function Uv(e){const t=e+"CollectionProvider",[a,s]=vs(t),[n,o]=a(t,{collectionRef:{current:null},itemMap:new Map}),i=x=>{const{scope:y,children:_}=x,g=Ee.useRef(null),v=Ee.useRef(new Map).current;return r.jsx(n,{scope:y,itemMap:v,collectionRef:g,children:_})};i.displayName=t;const l=e+"CollectionSlot",c=Eo(l),d=Ee.forwardRef((x,y)=>{const{scope:_,children:g}=x,v=o(l,_),w=_t(y,v.collectionRef);return r.jsx(c,{ref:w,children:g})});d.displayName=l;const f=e+"CollectionItemSlot",h="data-radix-collection-item",p=Eo(f),m=Ee.forwardRef((x,y)=>{const{scope:_,children:g,...v}=x,w=Ee.useRef(null),E=_t(y,w),S=o(f,_);return Ee.useEffect(()=>(S.itemMap.set(w,{ref:w,...v}),()=>void S.itemMap.delete(w))),r.jsx(p,{[h]:"",ref:E,children:g})});m.displayName=f;function b(x){const y=o(e+"CollectionConsumer",x);return Ee.useCallback(()=>{const g=y.collectionRef.current;if(!g)return[];const v=Array.from(g.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((S,T)=>v.indexOf(S.ref.current)-v.indexOf(T.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:i,Slot:d,ItemSlot:m},b,s]}var KT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Be=KT.reduce((e,t)=>{const a=Eo(`Primitive.${t}`),s=u.forwardRef((n,o)=>{const{asChild:i,...l}=n,c=i?a:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function ew(e,t){e&&Ro.flushSync(()=>e.dispatchEvent(t))}function Ts(e){const t=u.useRef(e);return u.useEffect(()=>{t.current=e}),u.useMemo(()=>(...a)=>{var s;return(s=t.current)==null?void 0:s.call(t,...a)},[])}function XT(e,t=globalThis==null?void 0:globalThis.document){const a=Ts(e);u.useEffect(()=>{const s=n=>{n.key==="Escape"&&a(n)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[a,t])}var JT="DismissableLayer",ip="dismissableLayer.update",WT="dismissableLayer.pointerDownOutside",eR="dismissableLayer.focusOutside",E0,tw=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fl=u.forwardRef((e,t)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:s,onPointerDownOutside:n,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,d=u.useContext(tw),[f,h]=u.useState(null),p=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=u.useState({}),b=_t(t,T=>h(T)),x=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),_=x.indexOf(y),g=f?x.indexOf(f):-1,v=d.layersWithOutsidePointerEventsDisabled.size>0,w=g>=_,E=aR(T=>{const q=T.target,k=[...d.branches].some($=>$.contains(q));!w||k||(n==null||n(T),i==null||i(T),T.defaultPrevented||l==null||l())},p),S=sR(T=>{const q=T.target;[...d.branches].some($=>$.contains(q))||(o==null||o(T),i==null||i(T),T.defaultPrevented||l==null||l())},p);return XT(T=>{g===d.layers.size-1&&(s==null||s(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},p),u.useEffect(()=>{if(f)return a&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(E0=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),S0(),()=>{a&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=E0)}},[f,p,a,d]),u.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),S0())},[f,d]),u.useEffect(()=>{const T=()=>m({});return document.addEventListener(ip,T),()=>document.removeEventListener(ip,T)},[]),r.jsx(Be.div,{...c,ref:b,style:{pointerEvents:v?w?"auto":"none":void 0,...e.style},onFocusCapture:qe(e.onFocusCapture,S.onFocusCapture),onBlurCapture:qe(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:qe(e.onPointerDownCapture,E.onPointerDownCapture)})});fl.displayName=JT;var tR="DismissableLayerBranch",aw=u.forwardRef((e,t)=>{const a=u.useContext(tw),s=u.useRef(null),n=_t(t,s);return u.useEffect(()=>{const o=s.current;if(o)return a.branches.add(o),()=>{a.branches.delete(o)}},[a.branches]),r.jsx(Be.div,{...e,ref:n})});aw.displayName=tR;function aR(e,t=globalThis==null?void 0:globalThis.document){const a=Ts(e),s=u.useRef(!1),n=u.useRef(()=>{});return u.useEffect(()=>{const o=l=>{if(l.target&&!s.current){let c=function(){sw(WT,a,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=c,t.addEventListener("click",n.current,{once:!0})):c()}else t.removeEventListener("click",n.current);s.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",n.current)}},[t,a]),{onPointerDownCapture:()=>s.current=!0}}function sR(e,t=globalThis==null?void 0:globalThis.document){const a=Ts(e),s=u.useRef(!1);return u.useEffect(()=>{const n=o=>{o.target&&!s.current&&sw(eR,a,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,a]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function S0(){const e=new CustomEvent(ip);document.dispatchEvent(e)}function sw(e,t,a,{discrete:s}){const n=a.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:a});t&&n.addEventListener(e,t,{once:!0}),s?ew(n,o):n.dispatchEvent(o)}var rR=fl,nR=aw,Na=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},oR="Portal",ed=u.forwardRef((e,t)=>{var l;const{container:a,...s}=e,[n,o]=u.useState(!1);Na(()=>o(!0),[]);const i=a||n&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?vy.createPortal(r.jsx(Be.div,{...s,ref:t}),i):null});ed.displayName=oR;function iR(e,t){return u.useReducer((a,s)=>t[a][s]??a,e)}var ur=e=>{const{present:t,children:a}=e,s=lR(t),n=typeof a=="function"?a({present:s.isPresent}):u.Children.only(a),o=_t(s.ref,cR(n));return typeof a=="function"||s.isPresent?u.cloneElement(n,{ref:o}):null};ur.displayName="Presence";function lR(e){const[t,a]=u.useState(),s=u.useRef(null),n=u.useRef(e),o=u.useRef("none"),i=e?"mounted":"unmounted",[l,c]=iR(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const d=Od(s.current);o.current=l==="mounted"?d:"none"},[l]),Na(()=>{const d=s.current,f=n.current;if(f!==e){const p=o.current,m=Od(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(f&&p!==m?"ANIMATION_OUT":"UNMOUNT"),n.current=e}},[e,c]),Na(()=>{if(t){let d;const f=t.ownerDocument.defaultView??window,h=m=>{const x=Od(s.current).includes(m.animationName);if(m.target===t&&x&&(c("ANIMATION_END"),!n.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",d=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},p=m=>{m.target===t&&(o.current=Od(s.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:u.useCallback(d=>{s.current=d?getComputedStyle(d):null,a(d)},[])}}function Od(e){return(e==null?void 0:e.animationName)||"none"}function cR(e){var s,n;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,a=t&&"isReactWarning"in t&&t.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}var dR=Yp[" useInsertionEffect ".trim().toString()]||Na;function Rs({prop:e,defaultProp:t,onChange:a=()=>{},caller:s}){const[n,o,i]=uR({defaultProp:t,onChange:a}),l=e!==void 0,c=l?e:n;{const f=u.useRef(e!==void 0);u.useEffect(()=>{const h=f.current;h!==l&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,s])}const d=u.useCallback(f=>{var h;if(l){const p=fR(f)?f(e):f;p!==e&&((h=i.current)==null||h.call(i,p))}else o(f)},[l,e,o,i]);return[c,d]}function uR({defaultProp:e,onChange:t}){const[a,s]=u.useState(e),n=u.useRef(a),o=u.useRef(t);return dR(()=>{o.current=t},[t]),u.useEffect(()=>{var i;n.current!==a&&((i=o.current)==null||i.call(o,a),n.current=a)},[a,n]),[a,s,o]}function fR(e){return typeof e=="function"}var rw=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),hR="VisuallyHidden",pf=u.forwardRef((e,t)=>r.jsx(Be.span,{...e,ref:t,style:{...rw,...e.style}}));pf.displayName=hR;var mR=pf,Hv="ToastProvider",[Vv,pR,vR]=Uv("Toast"),[nw,W5]=vs("Toast",[vR]),[gR,vf]=nw(Hv),ow=e=>{const{__scopeToast:t,label:a="Notification",duration:s=5e3,swipeDirection:n="right",swipeThreshold:o=50,children:i}=e,[l,c]=u.useState(null),[d,f]=u.useState(0),h=u.useRef(!1),p=u.useRef(!1);return a.trim()||console.error(`Invalid prop \`label\` supplied to \`${Hv}\`. Expected non-empty \`string\`.`),r.jsx(Vv.Provider,{scope:t,children:r.jsx(gR,{scope:t,label:a,duration:s,swipeDirection:n,swipeThreshold:o,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:u.useCallback(()=>f(m=>m+1),[]),onToastRemove:u.useCallback(()=>f(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:i})})};ow.displayName=Hv;var iw="ToastViewport",xR=["F8"],lp="toast.viewportPause",cp="toast.viewportResume",lw=u.forwardRef((e,t)=>{const{__scopeToast:a,hotkey:s=xR,label:n="Notifications ({hotkey})",...o}=e,i=vf(iw,a),l=pR(a),c=u.useRef(null),d=u.useRef(null),f=u.useRef(null),h=u.useRef(null),p=_t(t,h,i.onViewportChange),m=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=i.toastCount>0;u.useEffect(()=>{const y=_=>{var v;s.length!==0&&s.every(w=>_[w]||_.code===w)&&((v=h.current)==null||v.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[s]),u.useEffect(()=>{const y=c.current,_=h.current;if(b&&y&&_){const g=()=>{if(!i.isClosePausedRef.current){const S=new CustomEvent(lp);_.dispatchEvent(S),i.isClosePausedRef.current=!0}},v=()=>{if(i.isClosePausedRef.current){const S=new CustomEvent(cp);_.dispatchEvent(S),i.isClosePausedRef.current=!1}},w=S=>{!y.contains(S.relatedTarget)&&v()},E=()=>{y.contains(document.activeElement)||v()};return y.addEventListener("focusin",g),y.addEventListener("focusout",w),y.addEventListener("pointermove",g),y.addEventListener("pointerleave",E),window.addEventListener("blur",g),window.addEventListener("focus",v),()=>{y.removeEventListener("focusin",g),y.removeEventListener("focusout",w),y.removeEventListener("pointermove",g),y.removeEventListener("pointerleave",E),window.removeEventListener("blur",g),window.removeEventListener("focus",v)}}},[b,i.isClosePausedRef]);const x=u.useCallback(({tabbingDirection:y})=>{const g=l().map(v=>{const w=v.ref.current,E=[w,...DR(w)];return y==="forwards"?E:E.reverse()});return(y==="forwards"?g.reverse():g).flat()},[l]);return u.useEffect(()=>{const y=h.current;if(y){const _=g=>{var E,S,T;const v=g.altKey||g.ctrlKey||g.metaKey;if(g.key==="Tab"&&!v){const q=document.activeElement,k=g.shiftKey;if(g.target===y&&k){(E=d.current)==null||E.focus();return}const W=x({tabbingDirection:k?"backwards":"forwards"}),le=W.findIndex(O=>O===q);Fh(W.slice(le+1))?g.preventDefault():k?(S=d.current)==null||S.focus():(T=f.current)==null||T.focus()}};return y.addEventListener("keydown",_),()=>y.removeEventListener("keydown",_)}},[l,x]),r.jsxs(nR,{ref:c,role:"region","aria-label":n.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&r.jsx(dp,{ref:d,onFocusFromOutsideViewport:()=>{const y=x({tabbingDirection:"forwards"});Fh(y)}}),r.jsx(Vv.Slot,{scope:a,children:r.jsx(Be.ol,{tabIndex:-1,...o,ref:p})}),b&&r.jsx(dp,{ref:f,onFocusFromOutsideViewport:()=>{const y=x({tabbingDirection:"backwards"});Fh(y)}})]})});lw.displayName=iw;var cw="ToastFocusProxy",dp=u.forwardRef((e,t)=>{const{__scopeToast:a,onFocusFromOutsideViewport:s,...n}=e,o=vf(cw,a);return r.jsx(pf,{"aria-hidden":!0,tabIndex:0,...n,ref:t,style:{position:"fixed"},onFocus:i=>{var d;const l=i.relatedTarget;!((d=o.viewport)!=null&&d.contains(l))&&s()}})});dp.displayName=cw;var td="Toast",_R="toast.swipeStart",yR="toast.swipeMove",bR="toast.swipeCancel",jR="toast.swipeEnd",dw=u.forwardRef((e,t)=>{const{forceMount:a,open:s,defaultOpen:n,onOpenChange:o,...i}=e,[l,c]=Rs({prop:s,defaultProp:n??!0,onChange:o,caller:td});return r.jsx(ur,{present:a||l,children:r.jsx(SR,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:Ts(e.onPause),onResume:Ts(e.onResume),onSwipeStart:qe(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:qe(e.onSwipeMove,d=>{const{x:f,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:qe(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:qe(e.onSwipeEnd,d=>{const{x:f,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});dw.displayName=td;var[wR,ER]=nw(td,{onClose(){}}),SR=u.forwardRef((e,t)=>{const{__scopeToast:a,type:s="foreground",duration:n,open:o,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:f,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:m,...b}=e,x=vf(td,a),[y,_]=u.useState(null),g=_t(t,O=>_(O)),v=u.useRef(null),w=u.useRef(null),E=n||x.duration,S=u.useRef(0),T=u.useRef(E),q=u.useRef(0),{onToastAdd:k,onToastRemove:$}=x,Z=Ts(()=>{var D;(y==null?void 0:y.contains(document.activeElement))&&((D=x.viewport)==null||D.focus()),i()}),W=u.useCallback(O=>{!O||O===1/0||(window.clearTimeout(q.current),S.current=new Date().getTime(),q.current=window.setTimeout(Z,O))},[Z]);u.useEffect(()=>{const O=x.viewport;if(O){const D=()=>{W(T.current),d==null||d()},N=()=>{const F=new Date().getTime()-S.current;T.current=T.current-F,window.clearTimeout(q.current),c==null||c()};return O.addEventListener(lp,N),O.addEventListener(cp,D),()=>{O.removeEventListener(lp,N),O.removeEventListener(cp,D)}}},[x.viewport,E,c,d,W]),u.useEffect(()=>{o&&!x.isClosePausedRef.current&&W(E)},[o,E,x.isClosePausedRef,W]),u.useEffect(()=>(k(),()=>$()),[k,$]);const le=u.useMemo(()=>y?gw(y):null,[y]);return x.viewport?r.jsxs(r.Fragment,{children:[le&&r.jsx(NR,{__scopeToast:a,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:le}),r.jsx(wR,{scope:a,onClose:Z,children:Ro.createPortal(r.jsx(Vv.ItemSlot,{scope:a,children:r.jsx(rR,{asChild:!0,onEscapeKeyDown:qe(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||Z(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(Be.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":x.swipeDirection,...b,ref:g,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:qe(e.onKeyDown,O=>{O.key==="Escape"&&(l==null||l(O.nativeEvent),O.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,Z()))}),onPointerDown:qe(e.onPointerDown,O=>{O.button===0&&(v.current={x:O.clientX,y:O.clientY})}),onPointerMove:qe(e.onPointerMove,O=>{if(!v.current)return;const D=O.clientX-v.current.x,N=O.clientY-v.current.y,F=!!w.current,I=["left","right"].includes(x.swipeDirection),j=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,A=I?j(0,D):0,L=I?0:j(0,N),R=O.pointerType==="touch"?10:2,P={x:A,y:L},H={originalEvent:O,delta:P};F?(w.current=P,zd(yR,h,H,{discrete:!1})):N0(P,x.swipeDirection,R)?(w.current=P,zd(_R,f,H,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(D)>R||Math.abs(N)>R)&&(v.current=null)}),onPointerUp:qe(e.onPointerUp,O=>{const D=w.current,N=O.target;if(N.hasPointerCapture(O.pointerId)&&N.releasePointerCapture(O.pointerId),w.current=null,v.current=null,D){const F=O.currentTarget,I={originalEvent:O,delta:D};N0(D,x.swipeDirection,x.swipeThreshold)?zd(jR,m,I,{discrete:!0}):zd(bR,p,I,{discrete:!0}),F.addEventListener("click",j=>j.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),NR=e=>{const{__scopeToast:t,children:a,...s}=e,n=vf(td,t),[o,i]=u.useState(!1),[l,c]=u.useState(!1);return TR(()=>i(!0)),u.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:r.jsx(ed,{asChild:!0,children:r.jsx(pf,{...s,children:o&&r.jsxs(r.Fragment,{children:[n.label," ",a]})})})},CR="ToastTitle",uw=u.forwardRef((e,t)=>{const{__scopeToast:a,...s}=e;return r.jsx(Be.div,{...s,ref:t})});uw.displayName=CR;var AR="ToastDescription",fw=u.forwardRef((e,t)=>{const{__scopeToast:a,...s}=e;return r.jsx(Be.div,{...s,ref:t})});fw.displayName=AR;var hw="ToastAction",mw=u.forwardRef((e,t)=>{const{altText:a,...s}=e;return a.trim()?r.jsx(vw,{altText:a,asChild:!0,children:r.jsx(Gv,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${hw}\`. Expected non-empty \`string\`.`),null)});mw.displayName=hw;var pw="ToastClose",Gv=u.forwardRef((e,t)=>{const{__scopeToast:a,...s}=e,n=ER(pw,a);return r.jsx(vw,{asChild:!0,children:r.jsx(Be.button,{type:"button",...s,ref:t,onClick:qe(e.onClick,n.onClose)})})});Gv.displayName=pw;var vw=u.forwardRef((e,t)=>{const{__scopeToast:a,altText:s,...n}=e;return r.jsx(Be.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...n,ref:t})});function gw(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),RR(s)){const n=s.ariaHidden||s.hidden||s.style.display==="none",o=s.dataset.radixToastAnnounceExclude==="";if(!n)if(o){const i=s.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...gw(s))}}),t}function zd(e,t,a,{discrete:s}){const n=a.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:a});t&&n.addEventListener(e,t,{once:!0}),s?ew(n,o):n.dispatchEvent(o)}var N0=(e,t,a=0)=>{const s=Math.abs(e.x),n=Math.abs(e.y),o=s>n;return t==="left"||t==="right"?o&&s>a:!o&&n>a};function TR(e=()=>{}){const t=Ts(e);Na(()=>{let a=0,s=0;return a=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(a),window.cancelAnimationFrame(s)}},[t])}function RR(e){return e.nodeType===e.ELEMENT_NODE}function DR(e){const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function Fh(e){const t=document.activeElement;return e.some(a=>a===t?!0:(a.focus(),document.activeElement!==t))}var OR=ow,xw=lw,_w=dw,yw=uw,bw=fw,jw=mw,ww=Gv;function Ew(e){var t,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(a=Ew(e[t]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function Sw(){for(var e,t,a=0,s="",n=arguments.length;a<n;a++)(e=arguments[a])&&(t=Ew(e))&&(s&&(s+=" "),s+=t);return s}const C0=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,A0=Sw,hl=(e,t)=>a=>{var s;if((t==null?void 0:t.variants)==null)return A0(e,a==null?void 0:a.class,a==null?void 0:a.className);const{variants:n,defaultVariants:o}=t,i=Object.keys(n).map(d=>{const f=a==null?void 0:a[d],h=o==null?void 0:o[d];if(f===null)return null;const p=C0(f)||C0(h);return n[d][p]}),l=a&&Object.entries(a).reduce((d,f)=>{let[h,p]=f;return p===void 0||(d[h]=p),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,f)=>{let{class:h,className:p,...m}=f;return Object.entries(m).every(b=>{let[x,y]=b;return Array.isArray(y)?y.includes({...o,...l}[x]):{...o,...l}[x]===y})?[...d,h,p]:d},[]);return A0(e,i,c,a==null?void 0:a.class,a==null?void 0:a.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nw=(...e)=>e.filter((t,a,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===a).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:n="",children:o,iconNode:i,...l},c)=>u.createElement("svg",{ref:c,...MR,width:t,height:t,stroke:e,strokeWidth:s?Number(a)*24/Number(t):a,className:Nw("lucide",n),...l},[...i.map(([d,f])=>u.createElement(d,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=(e,t)=>{const a=u.forwardRef(({className:s,...n},o)=>u.createElement(kR,{ref:o,iconNode:t,className:Nw(`lucide-${zR(e)}`,s),...n}));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=Ke("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=Ke("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=Ke("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=Ke("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=Ke("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=Ke("Beef",[["circle",{cx:"12.5",cy:"8.5",r:"2.5",key:"9738u8"}],["path",{d:"M12.5 2a6.5 6.5 0 0 0-6.22 4.6c-1.1 3.13-.78 3.9-3.18 6.08A3 3 0 0 0 5 18c4 0 8.4-1.8 11.4-4.3A6.5 6.5 0 0 0 12.5 2Z",key:"o0f6za"}],["path",{d:"m18.5 6 2.19 4.5a6.48 6.48 0 0 1 .31 2 6.49 6.49 0 0 1-2.6 5.2C15.4 20.2 11 22 7 22a3 3 0 0 1-2.68-1.66L2.4 16.5",key:"k7p6i0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=Ke("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=Ke("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=Ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=Ke("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=Ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=Ke("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=Ke("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=Ke("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=Ke("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=Ke("Dna",[["path",{d:"m10 16 1.5 1.5",key:"11lckj"}],["path",{d:"m14 8-1.5-1.5",key:"1ohn8i"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m17 6-2.891-2.891",key:"xu6p2f"}],["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"m20 9 .891.891",key:"3xwk7g"}],["path",{d:"M3.109 14.109 4 15",key:"q76aoh"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m7 18 2.891 2.891",key:"1sisit"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=Ke("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=Ke("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=Ke("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=Ke("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=Ke("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=Ke("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=Ke("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=Ke("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=Ke("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=Ke("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=Ke("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=Ke("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=Ke("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=Ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=Ke("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=Ke("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=Ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=Ke("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=Ke("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=Ke("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=Ke("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=Ke("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=Ke("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=Ke("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=Ke("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=Ke("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=Ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=Ke("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=Ke("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=Ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),eg="-",QR=e=>{const t=XR(e),{conflictingClassGroups:a,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:i=>{const l=i.split(eg);return l[0]===""&&l.length!==1&&l.shift(),Ow(l,t)||KR(i)},getConflictingClassGroupIds:(i,l)=>{const c=a[i]||[];return l&&s[i]?[...c,...s[i]]:c}}},Ow=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const a=e[0],s=t.nextPart.get(a),n=s?Ow(e.slice(1),s):void 0;if(n)return n;if(t.validators.length===0)return;const o=e.join(eg);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},z0=/^\[(.+)\]$/,KR=e=>{if(z0.test(e)){const t=z0.exec(e)[1],a=t==null?void 0:t.substring(0,t.indexOf(":"));if(a)return"arbitrary.."+a}},XR=e=>{const{theme:t,prefix:a}=e,s={nextPart:new Map,validators:[]};return WR(Object.entries(e.classGroups),a).forEach(([o,i])=>{hp(i,s,o,t)}),s},hp=(e,t,a,s)=>{e.forEach(n=>{if(typeof n=="string"){const o=n===""?t:M0(t,n);o.classGroupId=a;return}if(typeof n=="function"){if(JR(n)){hp(n(s),t,a,s);return}t.validators.push({validator:n,classGroupId:a});return}Object.entries(n).forEach(([o,i])=>{hp(i,M0(t,o),a,s)})})},M0=(e,t)=>{let a=e;return t.split(eg).forEach(s=>{a.nextPart.has(s)||a.nextPart.set(s,{nextPart:new Map,validators:[]}),a=a.nextPart.get(s)}),a},JR=e=>e.isThemeGetter,WR=(e,t)=>t?e.map(([a,s])=>{const n=s.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[t+i,l])):o);return[a,n]}):e,eD=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,a=new Map,s=new Map;const n=(o,i)=>{a.set(o,i),t++,t>e&&(t=0,s=a,a=new Map)};return{get(o){let i=a.get(o);if(i!==void 0)return i;if((i=s.get(o))!==void 0)return n(o,i),i},set(o,i){a.has(o)?a.set(o,i):n(o,i)}}},zw="!",tD=e=>{const{separator:t,experimentalParseClassName:a}=e,s=t.length===1,n=t[0],o=t.length,i=l=>{const c=[];let d=0,f=0,h;for(let y=0;y<l.length;y++){let _=l[y];if(d===0){if(_===n&&(s||l.slice(y,y+o)===t)){c.push(l.slice(f,y)),f=y+o;continue}if(_==="/"){h=y;continue}}_==="["?d++:_==="]"&&d--}const p=c.length===0?l:l.substring(f),m=p.startsWith(zw),b=m?p.substring(1):p,x=h&&h>f?h-f:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:b,maybePostfixModifierPosition:x}};return a?l=>a({className:l,parseClassName:i}):i},aD=e=>{if(e.length<=1)return e;const t=[];let a=[];return e.forEach(s=>{s[0]==="["?(t.push(...a.sort(),s),a=[]):a.push(s)}),t.push(...a.sort()),t},sD=e=>({cache:eD(e.cacheSize),parseClassName:tD(e),...QR(e)}),rD=/\s+/,nD=(e,t)=>{const{parseClassName:a,getClassGroupId:s,getConflictingClassGroupIds:n}=t,o=[],i=e.trim().split(rD);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:f,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=a(d);let b=!!m,x=s(b?p.substring(0,m):p);if(!x){if(!b){l=d+(l.length>0?" "+l:l);continue}if(x=s(p),!x){l=d+(l.length>0?" "+l:l);continue}b=!1}const y=aD(f).join(":"),_=h?y+zw:y,g=_+x;if(o.includes(g))continue;o.push(g);const v=n(x,b);for(let w=0;w<v.length;++w){const E=v[w];o.push(_+E)}l=d+(l.length>0?" "+l:l)}return l};function oD(){let e=0,t,a,s="";for(;e<arguments.length;)(t=arguments[e++])&&(a=Mw(t))&&(s&&(s+=" "),s+=a);return s}const Mw=e=>{if(typeof e=="string")return e;let t,a="";for(let s=0;s<e.length;s++)e[s]&&(t=Mw(e[s]))&&(a&&(a+=" "),a+=t);return a};function iD(e,...t){let a,s,n,o=i;function i(c){const d=t.reduce((f,h)=>h(f),e());return a=sD(d),s=a.cache.get,n=a.cache.set,o=l,l(c)}function l(c){const d=s(c);if(d)return d;const f=nD(c,a);return n(c,f),f}return function(){return o(oD.apply(null,arguments))}}const Gt=e=>{const t=a=>a[e]||[];return t.isThemeGetter=!0,t},kw=/^\[(?:([a-z-]+):)?(.+)\]$/i,lD=/^\d+\/\d+$/,cD=new Set(["px","full","screen"]),dD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,uD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,hD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,mD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yr=e=>wi(e)||cD.has(e)||lD.test(e),Yr=e=>ml(e,"length",jD),wi=e=>!!e&&!Number.isNaN(Number(e)),qh=e=>ml(e,"number",wi),zl=e=>!!e&&Number.isInteger(Number(e)),pD=e=>e.endsWith("%")&&wi(e.slice(0,-1)),st=e=>kw.test(e),Qr=e=>dD.test(e),vD=new Set(["length","size","percentage"]),gD=e=>ml(e,vD,Pw),xD=e=>ml(e,"position",Pw),_D=new Set(["image","url"]),yD=e=>ml(e,_D,ED),bD=e=>ml(e,"",wD),Ml=()=>!0,ml=(e,t,a)=>{const s=kw.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):a(s[2]):!1},jD=e=>uD.test(e)&&!fD.test(e),Pw=()=>!1,wD=e=>hD.test(e),ED=e=>mD.test(e),SD=()=>{const e=Gt("colors"),t=Gt("spacing"),a=Gt("blur"),s=Gt("brightness"),n=Gt("borderColor"),o=Gt("borderRadius"),i=Gt("borderSpacing"),l=Gt("borderWidth"),c=Gt("contrast"),d=Gt("grayscale"),f=Gt("hueRotate"),h=Gt("invert"),p=Gt("gap"),m=Gt("gradientColorStops"),b=Gt("gradientColorStopPositions"),x=Gt("inset"),y=Gt("margin"),_=Gt("opacity"),g=Gt("padding"),v=Gt("saturate"),w=Gt("scale"),E=Gt("sepia"),S=Gt("skew"),T=Gt("space"),q=Gt("translate"),k=()=>["auto","contain","none"],$=()=>["auto","hidden","clip","visible","scroll"],Z=()=>["auto",st,t],W=()=>[st,t],le=()=>["",yr,Yr],O=()=>["auto",wi,st],D=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],N=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],j=()=>["","0",st],A=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[wi,st];return{cacheSize:500,separator:":",theme:{colors:[Ml],spacing:[yr,Yr],blur:["none","",Qr,st],brightness:L(),borderColor:[e],borderRadius:["none","","full",Qr,st],borderSpacing:W(),borderWidth:le(),contrast:L(),grayscale:j(),hueRotate:L(),invert:j(),gap:W(),gradientColorStops:[e],gradientColorStopPositions:[pD,Yr],inset:Z(),margin:Z(),opacity:L(),padding:W(),saturate:L(),scale:L(),sepia:j(),skew:L(),space:W(),translate:W()},classGroups:{aspect:[{aspect:["auto","square","video",st]}],container:["container"],columns:[{columns:[Qr]}],"break-after":[{"break-after":A()}],"break-before":[{"break-before":A()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...D(),st]}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",zl,st]}],basis:[{basis:Z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",st]}],grow:[{grow:j()}],shrink:[{shrink:j()}],order:[{order:["first","last","none",zl,st]}],"grid-cols":[{"grid-cols":[Ml]}],"col-start-end":[{col:["auto",{span:["full",zl,st]},st]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[Ml]}],"row-start-end":[{row:["auto",{span:[zl,st]},st]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",st]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",st]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",st,t]}],"min-w":[{"min-w":[st,t,"min","max","fit"]}],"max-w":[{"max-w":[st,t,"none","full","min","max","fit","prose",{screen:[Qr]},Qr]}],h:[{h:[st,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[st,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[st,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[st,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Qr,Yr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",qh]}],"font-family":[{font:[Ml]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",st]}],"line-clamp":[{"line-clamp":["none",wi,qh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",yr,st]}],"list-image":[{"list-image":["none",st]}],"list-style-type":[{list:["none","disc","decimal",st]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...N(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",yr,Yr]}],"underline-offset":[{"underline-offset":["auto",yr,st]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:W()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",st]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",st]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...D(),xD]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",gD]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},yD]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...N(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:N()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...N()]}],"outline-offset":[{"outline-offset":[yr,st]}],"outline-w":[{outline:[yr,Yr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[yr,Yr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Qr,bD]}],"shadow-color":[{shadow:[Ml]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[a]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Qr,st]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[h]}],saturate:[{saturate:[v]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[a]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",st]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",st]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",st]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[zl,st]}],"translate-x":[{"translate-x":[q]}],"translate-y":[{"translate-y":[q]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",st]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",st]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":W()}],"scroll-mx":[{"scroll-mx":W()}],"scroll-my":[{"scroll-my":W()}],"scroll-ms":[{"scroll-ms":W()}],"scroll-me":[{"scroll-me":W()}],"scroll-mt":[{"scroll-mt":W()}],"scroll-mr":[{"scroll-mr":W()}],"scroll-mb":[{"scroll-mb":W()}],"scroll-ml":[{"scroll-ml":W()}],"scroll-p":[{"scroll-p":W()}],"scroll-px":[{"scroll-px":W()}],"scroll-py":[{"scroll-py":W()}],"scroll-ps":[{"scroll-ps":W()}],"scroll-pe":[{"scroll-pe":W()}],"scroll-pt":[{"scroll-pt":W()}],"scroll-pr":[{"scroll-pr":W()}],"scroll-pb":[{"scroll-pb":W()}],"scroll-pl":[{"scroll-pl":W()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",st]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[yr,Yr,qh]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},ND=iD(SD);function Ce(...e){return ND(Sw(e))}function At(e){if(!e)return"-";if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e)){const[a,s,n]=e.split("-");return`${n}/${s}/${a}`}return(typeof e=="string"?new Date(e):e).toLocaleDateString("pt-BR")}function Ws(e){if(!e)return null;if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=e.match(/^(\d{4}-\d{2}-\d{2})/);return t?t[1]:null}function CD(e,t){if(!e||!/^\d{4}-\d{2}-\d{2}$/.test(e))throw new Error("Data deve estar no formato YYYY-MM-DD");const[a,s,n]=e.split("-").map(Number),o=new Date(a,s-1,n);o.setDate(o.getDate()+t);const i=o.getFullYear(),l=String(o.getMonth()+1).padStart(2,"0"),c=String(o.getDate()).padStart(2,"0");return`${i}-${l}-${c}`}function Bh(e,t){if(!e||!t)return 0;const a=Ws(e),s=Ws(t);if(!a||!s)return 0;const[n,o,i]=a.split("-").map(Number),[l,c,d]=s.split("-").map(Number),f=new Date(n,o-1,i),h=new Date(l,c-1,d),p=f.getTime()-h.getTime();return Math.floor(p/(1e3*60*60*24))}function ic(){const e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${s}`}function k0(e){if(!e)return"-";const t=Ws(e);if(!t)return"-";const[a,s,n]=t.split("-");return`${n}/${s}/${a}`}function AD(e){const t=Ws(e);if(!t)return"";const[a,s,n]=t.split("-").map(Number),o=new Date(a,s-1,n);return["Domingo","Segunda-feira","Tera-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sbado"][o.getDay()]}const TD=OR,Iw=u.forwardRef(({className:e,...t},a)=>r.jsx(xw,{ref:a,className:Ce("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Iw.displayName=xw.displayName;const RD=hl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Lw=u.forwardRef(({className:e,variant:t,...a},s)=>r.jsx(_w,{ref:s,className:Ce(RD({variant:t}),e),...a}));Lw.displayName=_w.displayName;const DD=u.forwardRef(({className:e,...t},a)=>r.jsx(jw,{ref:a,className:Ce("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));DD.displayName=jw.displayName;const Fw=u.forwardRef(({className:e,...t},a)=>r.jsx(ww,{ref:a,className:Ce("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(Ds,{className:"h-4 w-4"})}));Fw.displayName=ww.displayName;const $w=u.forwardRef(({className:e,...t},a)=>r.jsx(yw,{ref:a,className:Ce("text-sm font-semibold",e),...t}));$w.displayName=yw.displayName;const qw=u.forwardRef(({className:e,...t},a)=>r.jsx(bw,{ref:a,className:Ce("text-sm opacity-90",e),...t}));qw.displayName=bw.displayName;function OD(){const{toasts:e}=aa();return r.jsxs(TD,{children:[e.map(function({id:t,title:a,description:s,action:n,...o}){return r.jsxs(Lw,{...o,children:[r.jsxs("div",{className:"grid gap-1",children:[a&&r.jsx($w,{children:a}),s&&r.jsx(qw,{children:s})]}),n,r.jsx(Fw,{})]},t)}),r.jsx(Iw,{})]})}var zD=Yp[" useId ".trim().toString()]||(()=>{}),MD=0;function qa(e){const[t,a]=u.useState(zD());return Na(()=>{a(s=>s??String(MD++))},[e]),t?`radix-${t}`:""}const kD=["top","right","bottom","left"],zn=Math.min,ls=Math.max,Fu=Math.round,Md=Math.floor,ir=e=>({x:e,y:e}),PD={left:"right",right:"left",bottom:"top",top:"bottom"},ID={start:"end",end:"start"};function mp(e,t,a){return ls(e,zn(t,a))}function Ir(e,t){return typeof e=="function"?e(t):e}function Lr(e){return e.split("-")[0]}function pl(e){return e.split("-")[1]}function tg(e){return e==="x"?"y":"x"}function ag(e){return e==="y"?"height":"width"}const LD=new Set(["top","bottom"]);function sr(e){return LD.has(Lr(e))?"y":"x"}function sg(e){return tg(sr(e))}function FD(e,t,a){a===void 0&&(a=!1);const s=pl(e),n=sg(e),o=ag(n);let i=n==="x"?s===(a?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=$u(i)),[i,$u(i)]}function $D(e){const t=$u(e);return[pp(e),t,pp(t)]}function pp(e){return e.replace(/start|end/g,t=>ID[t])}const P0=["left","right"],I0=["right","left"],qD=["top","bottom"],BD=["bottom","top"];function UD(e,t,a){switch(e){case"top":case"bottom":return a?t?I0:P0:t?P0:I0;case"left":case"right":return t?qD:BD;default:return[]}}function HD(e,t,a,s){const n=pl(e);let o=UD(Lr(e),a==="start",s);return n&&(o=o.map(i=>i+"-"+n),t&&(o=o.concat(o.map(pp)))),o}function $u(e){return e.replace(/left|right|bottom|top/g,t=>PD[t])}function VD(e){return{top:0,right:0,bottom:0,left:0,...e}}function Bw(e){return typeof e!="number"?VD(e):{top:e,right:e,bottom:e,left:e}}function qu(e){const{x:t,y:a,width:s,height:n}=e;return{width:s,height:n,top:a,left:t,right:t+s,bottom:a+n,x:t,y:a}}function L0(e,t,a){let{reference:s,floating:n}=e;const o=sr(t),i=sg(t),l=ag(i),c=Lr(t),d=o==="y",f=s.x+s.width/2-n.width/2,h=s.y+s.height/2-n.height/2,p=s[l]/2-n[l]/2;let m;switch(c){case"top":m={x:f,y:s.y-n.height};break;case"bottom":m={x:f,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:h};break;case"left":m={x:s.x-n.width,y:h};break;default:m={x:s.x,y:s.y}}switch(pl(t)){case"start":m[i]-=p*(a&&d?-1:1);break;case"end":m[i]+=p*(a&&d?-1:1);break}return m}const GD=async(e,t,a)=>{const{placement:s="bottom",strategy:n="absolute",middleware:o=[],platform:i}=a,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:n}),{x:f,y:h}=L0(d,s,c),p=s,m={},b=0;for(let x=0;x<l.length;x++){const{name:y,fn:_}=l[x],{x:g,y:v,data:w,reset:E}=await _({x:f,y:h,initialPlacement:s,placement:p,strategy:n,middlewareData:m,rects:d,platform:i,elements:{reference:e,floating:t}});f=g??f,h=v??h,m={...m,[y]:{...m[y],...w}},E&&b<=50&&(b++,typeof E=="object"&&(E.placement&&(p=E.placement),E.rects&&(d=E.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:n}):E.rects),{x:f,y:h}=L0(d,p,c)),x=-1)}return{x:f,y:h,placement:p,strategy:n,middlewareData:m}};async function Nc(e,t){var a;t===void 0&&(t={});const{x:s,y:n,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=Ir(t,e),b=Bw(m),y=l[p?h==="floating"?"reference":"floating":h],_=qu(await o.getClippingRect({element:(a=await(o.isElement==null?void 0:o.isElement(y)))==null||a?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:c})),g=h==="floating"?{x:s,y:n,width:i.floating.width,height:i.floating.height}:i.reference,v=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),w=await(o.isElement==null?void 0:o.isElement(v))?await(o.getScale==null?void 0:o.getScale(v))||{x:1,y:1}:{x:1,y:1},E=qu(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:v,strategy:c}):g);return{top:(_.top-E.top+b.top)/w.y,bottom:(E.bottom-_.bottom+b.bottom)/w.y,left:(_.left-E.left+b.left)/w.x,right:(E.right-_.right+b.right)/w.x}}const ZD=e=>({name:"arrow",options:e,async fn(t){const{x:a,y:s,placement:n,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:f=0}=Ir(e,t)||{};if(d==null)return{};const h=Bw(f),p={x:a,y:s},m=sg(n),b=ag(m),x=await i.getDimensions(d),y=m==="y",_=y?"top":"left",g=y?"bottom":"right",v=y?"clientHeight":"clientWidth",w=o.reference[b]+o.reference[m]-p[m]-o.floating[b],E=p[m]-o.reference[m],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let T=S?S[v]:0;(!T||!await(i.isElement==null?void 0:i.isElement(S)))&&(T=l.floating[v]||o.floating[b]);const q=w/2-E/2,k=T/2-x[b]/2-1,$=zn(h[_],k),Z=zn(h[g],k),W=$,le=T-x[b]-Z,O=T/2-x[b]/2+q,D=mp(W,O,le),N=!c.arrow&&pl(n)!=null&&O!==D&&o.reference[b]/2-(O<W?$:Z)-x[b]/2<0,F=N?O<W?O-W:O-le:0;return{[m]:p[m]+F,data:{[m]:D,centerOffset:O-D-F,...N&&{alignmentOffset:F}},reset:N}}}),YD=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var a,s;const{placement:n,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:x=!0,...y}=Ir(e,t);if((a=o.arrow)!=null&&a.alignmentOffset)return{};const _=Lr(n),g=sr(l),v=Lr(l)===l,w=await(c.isRTL==null?void 0:c.isRTL(d.floating)),E=p||(v||!x?[$u(l)]:$D(l)),S=b!=="none";!p&&S&&E.push(...HD(l,x,b,w));const T=[l,...E],q=await Nc(t,y),k=[];let $=((s=o.flip)==null?void 0:s.overflows)||[];if(f&&k.push(q[_]),h){const O=FD(n,i,w);k.push(q[O[0]],q[O[1]])}if($=[...$,{placement:n,overflows:k}],!k.every(O=>O<=0)){var Z,W;const O=(((Z=o.flip)==null?void 0:Z.index)||0)+1,D=T[O];if(D&&(!(h==="alignment"?g!==sr(D):!1)||$.every(I=>I.overflows[0]>0&&sr(I.placement)===g)))return{data:{index:O,overflows:$},reset:{placement:D}};let N=(W=$.filter(F=>F.overflows[0]<=0).sort((F,I)=>F.overflows[1]-I.overflows[1])[0])==null?void 0:W.placement;if(!N)switch(m){case"bestFit":{var le;const F=(le=$.filter(I=>{if(S){const j=sr(I.placement);return j===g||j==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(j=>j>0).reduce((j,A)=>j+A,0)]).sort((I,j)=>I[1]-j[1])[0])==null?void 0:le[0];F&&(N=F);break}case"initialPlacement":N=l;break}if(n!==N)return{reset:{placement:N}}}return{}}}};function F0(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function $0(e){return kD.some(t=>e[t]>=0)}const QD=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:a}=t,{strategy:s="referenceHidden",...n}=Ir(e,t);switch(s){case"referenceHidden":{const o=await Nc(t,{...n,elementContext:"reference"}),i=F0(o,a.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:$0(i)}}}case"escaped":{const o=await Nc(t,{...n,altBoundary:!0}),i=F0(o,a.floating);return{data:{escapedOffsets:i,escaped:$0(i)}}}default:return{}}}}},Uw=new Set(["left","top"]);async function KD(e,t){const{placement:a,platform:s,elements:n}=e,o=await(s.isRTL==null?void 0:s.isRTL(n.floating)),i=Lr(a),l=pl(a),c=sr(a)==="y",d=Uw.has(i)?-1:1,f=o&&c?-1:1,h=Ir(t,e);let{mainAxis:p,crossAxis:m,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof b=="number"&&(m=l==="end"?b*-1:b),c?{x:m*f,y:p*d}:{x:p*d,y:m*f}}const XD=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var a,s;const{x:n,y:o,placement:i,middlewareData:l}=t,c=await KD(t,e);return i===((a=l.offset)==null?void 0:a.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:n+c.x,y:o+c.y,data:{...c,placement:i}}}}},JD=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:a,y:s,placement:n}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:y=>{let{x:_,y:g}=y;return{x:_,y:g}}},...c}=Ir(e,t),d={x:a,y:s},f=await Nc(t,c),h=sr(Lr(n)),p=tg(h);let m=d[p],b=d[h];if(o){const y=p==="y"?"top":"left",_=p==="y"?"bottom":"right",g=m+f[y],v=m-f[_];m=mp(g,m,v)}if(i){const y=h==="y"?"top":"left",_=h==="y"?"bottom":"right",g=b+f[y],v=b-f[_];b=mp(g,b,v)}const x=l.fn({...t,[p]:m,[h]:b});return{...x,data:{x:x.x-a,y:x.y-s,enabled:{[p]:o,[h]:i}}}}}},WD=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:a,y:s,placement:n,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Ir(e,t),f={x:a,y:s},h=sr(n),p=tg(h);let m=f[p],b=f[h];const x=Ir(l,t),y=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const v=p==="y"?"height":"width",w=o.reference[p]-o.floating[v]+y.mainAxis,E=o.reference[p]+o.reference[v]-y.mainAxis;m<w?m=w:m>E&&(m=E)}if(d){var _,g;const v=p==="y"?"width":"height",w=Uw.has(Lr(n)),E=o.reference[h]-o.floating[v]+(w&&((_=i.offset)==null?void 0:_[h])||0)+(w?0:y.crossAxis),S=o.reference[h]+o.reference[v]+(w?0:((g=i.offset)==null?void 0:g[h])||0)-(w?y.crossAxis:0);b<E?b=E:b>S&&(b=S)}return{[p]:m,[h]:b}}}},eO=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var a,s;const{placement:n,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...d}=Ir(e,t),f=await Nc(t,d),h=Lr(n),p=pl(n),m=sr(n)==="y",{width:b,height:x}=o.floating;let y,_;h==="top"||h==="bottom"?(y=h,_=p===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(_=h,y=p==="end"?"top":"bottom");const g=x-f.top-f.bottom,v=b-f.left-f.right,w=zn(x-f[y],g),E=zn(b-f[_],v),S=!t.middlewareData.shift;let T=w,q=E;if((a=t.middlewareData.shift)!=null&&a.enabled.x&&(q=v),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(T=g),S&&!p){const $=ls(f.left,0),Z=ls(f.right,0),W=ls(f.top,0),le=ls(f.bottom,0);m?q=b-2*($!==0||Z!==0?$+Z:ls(f.left,f.right)):T=x-2*(W!==0||le!==0?W+le:ls(f.top,f.bottom))}await c({...t,availableWidth:q,availableHeight:T});const k=await i.getDimensions(l.floating);return b!==k.width||x!==k.height?{reset:{rects:!0}}:{}}}};function _f(){return typeof window<"u"}function vl(e){return Hw(e)?(e.nodeName||"").toLowerCase():"#document"}function ms(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function fr(e){var t;return(t=(Hw(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Hw(e){return _f()?e instanceof Node||e instanceof ms(e).Node:!1}function Hs(e){return _f()?e instanceof Element||e instanceof ms(e).Element:!1}function lr(e){return _f()?e instanceof HTMLElement||e instanceof ms(e).HTMLElement:!1}function q0(e){return!_f()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ms(e).ShadowRoot}const tO=new Set(["inline","contents"]);function rd(e){const{overflow:t,overflowX:a,overflowY:s,display:n}=Vs(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+a)&&!tO.has(n)}const aO=new Set(["table","td","th"]);function sO(e){return aO.has(vl(e))}const rO=[":popover-open",":modal"];function yf(e){return rO.some(t=>{try{return e.matches(t)}catch{return!1}})}const nO=["transform","translate","scale","rotate","perspective"],oO=["transform","translate","scale","rotate","perspective","filter"],iO=["paint","layout","strict","content"];function rg(e){const t=ng(),a=Hs(e)?Vs(e):e;return nO.some(s=>a[s]?a[s]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!t&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!t&&(a.filter?a.filter!=="none":!1)||oO.some(s=>(a.willChange||"").includes(s))||iO.some(s=>(a.contain||"").includes(s))}function lO(e){let t=Mn(e);for(;lr(t)&&!Zi(t);){if(rg(t))return t;if(yf(t))return null;t=Mn(t)}return null}function ng(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const cO=new Set(["html","body","#document"]);function Zi(e){return cO.has(vl(e))}function Vs(e){return ms(e).getComputedStyle(e)}function bf(e){return Hs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Mn(e){if(vl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||q0(e)&&e.host||fr(e);return q0(t)?t.host:t}function Vw(e){const t=Mn(e);return Zi(t)?e.ownerDocument?e.ownerDocument.body:e.body:lr(t)&&rd(t)?t:Vw(t)}function Cc(e,t,a){var s;t===void 0&&(t=[]),a===void 0&&(a=!0);const n=Vw(e),o=n===((s=e.ownerDocument)==null?void 0:s.body),i=ms(n);if(o){const l=vp(i);return t.concat(i,i.visualViewport||[],rd(n)?n:[],l&&a?Cc(l):[])}return t.concat(n,Cc(n,[],a))}function vp(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Gw(e){const t=Vs(e);let a=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const n=lr(e),o=n?e.offsetWidth:a,i=n?e.offsetHeight:s,l=Fu(a)!==o||Fu(s)!==i;return l&&(a=o,s=i),{width:a,height:s,$:l}}function og(e){return Hs(e)?e:e.contextElement}function Ei(e){const t=og(e);if(!lr(t))return ir(1);const a=t.getBoundingClientRect(),{width:s,height:n,$:o}=Gw(t);let i=(o?Fu(a.width):a.width)/s,l=(o?Fu(a.height):a.height)/n;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const dO=ir(0);function Zw(e){const t=ms(e);return!ng()||!t.visualViewport?dO:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function uO(e,t,a){return t===void 0&&(t=!1),!a||t&&a!==ms(e)?!1:t}function So(e,t,a,s){t===void 0&&(t=!1),a===void 0&&(a=!1);const n=e.getBoundingClientRect(),o=og(e);let i=ir(1);t&&(s?Hs(s)&&(i=Ei(s)):i=Ei(e));const l=uO(o,a,s)?Zw(o):ir(0);let c=(n.left+l.x)/i.x,d=(n.top+l.y)/i.y,f=n.width/i.x,h=n.height/i.y;if(o){const p=ms(o),m=s&&Hs(s)?ms(s):s;let b=p,x=vp(b);for(;x&&s&&m!==b;){const y=Ei(x),_=x.getBoundingClientRect(),g=Vs(x),v=_.left+(x.clientLeft+parseFloat(g.paddingLeft))*y.x,w=_.top+(x.clientTop+parseFloat(g.paddingTop))*y.y;c*=y.x,d*=y.y,f*=y.x,h*=y.y,c+=v,d+=w,b=ms(x),x=vp(b)}}return qu({width:f,height:h,x:c,y:d})}function ig(e,t){const a=bf(e).scrollLeft;return t?t.left+a:So(fr(e)).left+a}function Yw(e,t,a){a===void 0&&(a=!1);const s=e.getBoundingClientRect(),n=s.left+t.scrollLeft-(a?0:ig(e,s)),o=s.top+t.scrollTop;return{x:n,y:o}}function fO(e){let{elements:t,rect:a,offsetParent:s,strategy:n}=e;const o=n==="fixed",i=fr(s),l=t?yf(t.floating):!1;if(s===i||l&&o)return a;let c={scrollLeft:0,scrollTop:0},d=ir(1);const f=ir(0),h=lr(s);if((h||!h&&!o)&&((vl(s)!=="body"||rd(i))&&(c=bf(s)),lr(s))){const m=So(s);d=Ei(s),f.x=m.x+s.clientLeft,f.y=m.y+s.clientTop}const p=i&&!h&&!o?Yw(i,c,!0):ir(0);return{width:a.width*d.x,height:a.height*d.y,x:a.x*d.x-c.scrollLeft*d.x+f.x+p.x,y:a.y*d.y-c.scrollTop*d.y+f.y+p.y}}function hO(e){return Array.from(e.getClientRects())}function mO(e){const t=fr(e),a=bf(e),s=e.ownerDocument.body,n=ls(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),o=ls(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let i=-a.scrollLeft+ig(e);const l=-a.scrollTop;return Vs(s).direction==="rtl"&&(i+=ls(t.clientWidth,s.clientWidth)-n),{width:n,height:o,x:i,y:l}}function pO(e,t){const a=ms(e),s=fr(e),n=a.visualViewport;let o=s.clientWidth,i=s.clientHeight,l=0,c=0;if(n){o=n.width,i=n.height;const d=ng();(!d||d&&t==="fixed")&&(l=n.offsetLeft,c=n.offsetTop)}return{width:o,height:i,x:l,y:c}}const vO=new Set(["absolute","fixed"]);function gO(e,t){const a=So(e,!0,t==="fixed"),s=a.top+e.clientTop,n=a.left+e.clientLeft,o=lr(e)?Ei(e):ir(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=n*o.x,d=s*o.y;return{width:i,height:l,x:c,y:d}}function B0(e,t,a){let s;if(t==="viewport")s=pO(e,a);else if(t==="document")s=mO(fr(e));else if(Hs(t))s=gO(t,a);else{const n=Zw(e);s={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return qu(s)}function Qw(e,t){const a=Mn(e);return a===t||!Hs(a)||Zi(a)?!1:Vs(a).position==="fixed"||Qw(a,t)}function xO(e,t){const a=t.get(e);if(a)return a;let s=Cc(e,[],!1).filter(l=>Hs(l)&&vl(l)!=="body"),n=null;const o=Vs(e).position==="fixed";let i=o?Mn(e):e;for(;Hs(i)&&!Zi(i);){const l=Vs(i),c=rg(i);!c&&l.position==="fixed"&&(n=null),(o?!c&&!n:!c&&l.position==="static"&&!!n&&vO.has(n.position)||rd(i)&&!c&&Qw(e,i))?s=s.filter(f=>f!==i):n=l,i=Mn(i)}return t.set(e,s),s}function _O(e){let{element:t,boundary:a,rootBoundary:s,strategy:n}=e;const i=[...a==="clippingAncestors"?yf(t)?[]:xO(t,this._c):[].concat(a),s],l=i[0],c=i.reduce((d,f)=>{const h=B0(t,f,n);return d.top=ls(h.top,d.top),d.right=zn(h.right,d.right),d.bottom=zn(h.bottom,d.bottom),d.left=ls(h.left,d.left),d},B0(t,l,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function yO(e){const{width:t,height:a}=Gw(e);return{width:t,height:a}}function bO(e,t,a){const s=lr(t),n=fr(t),o=a==="fixed",i=So(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=ir(0);function d(){c.x=ig(n)}if(s||!s&&!o)if((vl(t)!=="body"||rd(n))&&(l=bf(t)),s){const m=So(t,!0,o,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else n&&d();o&&!s&&n&&d();const f=n&&!s&&!o?Yw(n,l):ir(0),h=i.left+l.scrollLeft-c.x-f.x,p=i.top+l.scrollTop-c.y-f.y;return{x:h,y:p,width:i.width,height:i.height}}function Uh(e){return Vs(e).position==="static"}function U0(e,t){if(!lr(e)||Vs(e).position==="fixed")return null;if(t)return t(e);let a=e.offsetParent;return fr(e)===a&&(a=a.ownerDocument.body),a}function Kw(e,t){const a=ms(e);if(yf(e))return a;if(!lr(e)){let n=Mn(e);for(;n&&!Zi(n);){if(Hs(n)&&!Uh(n))return n;n=Mn(n)}return a}let s=U0(e,t);for(;s&&sO(s)&&Uh(s);)s=U0(s,t);return s&&Zi(s)&&Uh(s)&&!rg(s)?a:s||lO(e)||a}const jO=async function(e){const t=this.getOffsetParent||Kw,a=this.getDimensions,s=await a(e.floating);return{reference:bO(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function wO(e){return Vs(e).direction==="rtl"}const EO={convertOffsetParentRelativeRectToViewportRelativeRect:fO,getDocumentElement:fr,getClippingRect:_O,getOffsetParent:Kw,getElementRects:jO,getClientRects:hO,getDimensions:yO,getScale:Ei,isElement:Hs,isRTL:wO};function Xw(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function SO(e,t){let a=null,s;const n=fr(e);function o(){var l;clearTimeout(s),(l=a)==null||l.disconnect(),a=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const d=e.getBoundingClientRect(),{left:f,top:h,width:p,height:m}=d;if(l||t(),!p||!m)return;const b=Md(h),x=Md(n.clientWidth-(f+p)),y=Md(n.clientHeight-(h+m)),_=Md(f),v={rootMargin:-b+"px "+-x+"px "+-y+"px "+-_+"px",threshold:ls(0,zn(1,c))||1};let w=!0;function E(S){const T=S[0].intersectionRatio;if(T!==c){if(!w)return i();T?i(!1,T):s=setTimeout(()=>{i(!1,1e-7)},1e3)}T===1&&!Xw(d,e.getBoundingClientRect())&&i(),w=!1}try{a=new IntersectionObserver(E,{...v,root:n.ownerDocument})}catch{a=new IntersectionObserver(E,v)}a.observe(e)}return i(!0),o}function NO(e,t,a,s){s===void 0&&(s={});const{ancestorScroll:n=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=og(e),f=n||o?[...d?Cc(d):[],...Cc(t)]:[];f.forEach(_=>{n&&_.addEventListener("scroll",a,{passive:!0}),o&&_.addEventListener("resize",a)});const h=d&&l?SO(d,a):null;let p=-1,m=null;i&&(m=new ResizeObserver(_=>{let[g]=_;g&&g.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var v;(v=m)==null||v.observe(t)})),a()}),d&&!c&&m.observe(d),m.observe(t));let b,x=c?So(e):null;c&&y();function y(){const _=So(e);x&&!Xw(x,_)&&a(),x=_,b=requestAnimationFrame(y)}return a(),()=>{var _;f.forEach(g=>{n&&g.removeEventListener("scroll",a),o&&g.removeEventListener("resize",a)}),h==null||h(),(_=m)==null||_.disconnect(),m=null,c&&cancelAnimationFrame(b)}}const CO=XD,AO=JD,TO=YD,RO=eO,DO=QD,H0=ZD,OO=WD,zO=(e,t,a)=>{const s=new Map,n={platform:EO,...a},o={...n.platform,_c:s};return GD(e,t,{...n,platform:o})};var MO=typeof document<"u",kO=function(){},ru=MO?u.useLayoutEffect:kO;function Bu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let a,s,n;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(a=e.length,a!==t.length)return!1;for(s=a;s--!==0;)if(!Bu(e[s],t[s]))return!1;return!0}if(n=Object.keys(e),a=n.length,a!==Object.keys(t).length)return!1;for(s=a;s--!==0;)if(!{}.hasOwnProperty.call(t,n[s]))return!1;for(s=a;s--!==0;){const o=n[s];if(!(o==="_owner"&&e.$$typeof)&&!Bu(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Jw(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function V0(e,t){const a=Jw(e);return Math.round(t*a)/a}function Hh(e){const t=u.useRef(e);return ru(()=>{t.current=e}),t}function PO(e){e===void 0&&(e={});const{placement:t="bottom",strategy:a="absolute",middleware:s=[],platform:n,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[f,h]=u.useState({x:0,y:0,strategy:a,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=u.useState(s);Bu(p,s)||m(s);const[b,x]=u.useState(null),[y,_]=u.useState(null),g=u.useCallback(I=>{I!==S.current&&(S.current=I,x(I))},[]),v=u.useCallback(I=>{I!==T.current&&(T.current=I,_(I))},[]),w=o||b,E=i||y,S=u.useRef(null),T=u.useRef(null),q=u.useRef(f),k=c!=null,$=Hh(c),Z=Hh(n),W=Hh(d),le=u.useCallback(()=>{if(!S.current||!T.current)return;const I={placement:t,strategy:a,middleware:p};Z.current&&(I.platform=Z.current),zO(S.current,T.current,I).then(j=>{const A={...j,isPositioned:W.current!==!1};O.current&&!Bu(q.current,A)&&(q.current=A,Ro.flushSync(()=>{h(A)}))})},[p,t,a,Z,W]);ru(()=>{d===!1&&q.current.isPositioned&&(q.current.isPositioned=!1,h(I=>({...I,isPositioned:!1})))},[d]);const O=u.useRef(!1);ru(()=>(O.current=!0,()=>{O.current=!1}),[]),ru(()=>{if(w&&(S.current=w),E&&(T.current=E),w&&E){if($.current)return $.current(w,E,le);le()}},[w,E,le,$,k]);const D=u.useMemo(()=>({reference:S,floating:T,setReference:g,setFloating:v}),[g,v]),N=u.useMemo(()=>({reference:w,floating:E}),[w,E]),F=u.useMemo(()=>{const I={position:a,left:0,top:0};if(!N.floating)return I;const j=V0(N.floating,f.x),A=V0(N.floating,f.y);return l?{...I,transform:"translate("+j+"px, "+A+"px)",...Jw(N.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:j,top:A}},[a,l,N.floating,f.x,f.y]);return u.useMemo(()=>({...f,update:le,refs:D,elements:N,floatingStyles:F}),[f,le,D,N,F])}const IO=e=>{function t(a){return{}.hasOwnProperty.call(a,"current")}return{name:"arrow",options:e,fn(a){const{element:s,padding:n}=typeof e=="function"?e(a):e;return s&&t(s)?s.current!=null?H0({element:s.current,padding:n}).fn(a):{}:s?H0({element:s,padding:n}).fn(a):{}}}},LO=(e,t)=>({...CO(e),options:[e,t]}),FO=(e,t)=>({...AO(e),options:[e,t]}),$O=(e,t)=>({...OO(e),options:[e,t]}),qO=(e,t)=>({...TO(e),options:[e,t]}),BO=(e,t)=>({...RO(e),options:[e,t]}),UO=(e,t)=>({...DO(e),options:[e,t]}),HO=(e,t)=>({...IO(e),options:[e,t]});var VO="Arrow",Ww=u.forwardRef((e,t)=>{const{children:a,width:s=10,height:n=5,...o}=e;return r.jsx(Be.svg,{...o,ref:t,width:s,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?a:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ww.displayName=VO;var GO=Ww;function lg(e){const[t,a]=u.useState(void 0);return Na(()=>{if(e){a({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const o=n[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;a({width:i,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else a(void 0)},[e]),t}var cg="Popper",[eE,gl]=vs(cg),[ZO,tE]=eE(cg),aE=e=>{const{__scopePopper:t,children:a}=e,[s,n]=u.useState(null);return r.jsx(ZO,{scope:t,anchor:s,onAnchorChange:n,children:a})};aE.displayName=cg;var sE="PopperAnchor",rE=u.forwardRef((e,t)=>{const{__scopePopper:a,virtualRef:s,...n}=e,o=tE(sE,a),i=u.useRef(null),l=_t(t,i);return u.useEffect(()=>{o.onAnchorChange((s==null?void 0:s.current)||i.current)}),s?null:r.jsx(Be.div,{...n,ref:l})});rE.displayName=sE;var dg="PopperContent",[YO,QO]=eE(dg),nE=u.forwardRef((e,t)=>{var G,be,de,U,ie,B;const{__scopePopper:a,side:s="bottom",sideOffset:n=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:b,...x}=e,y=tE(dg,a),[_,g]=u.useState(null),v=_t(t,oe=>g(oe)),[w,E]=u.useState(null),S=lg(w),T=(S==null?void 0:S.width)??0,q=(S==null?void 0:S.height)??0,k=s+(o!=="center"?"-"+o:""),$=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},Z=Array.isArray(d)?d:[d],W=Z.length>0,le={padding:$,boundary:Z.filter(XO),altBoundary:W},{refs:O,floatingStyles:D,placement:N,isPositioned:F,middlewareData:I}=PO({strategy:"fixed",placement:k,whileElementsMounted:(...oe)=>NO(...oe,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[LO({mainAxis:n+q,alignmentAxis:i}),c&&FO({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?$O():void 0,...le}),c&&qO({...le}),BO({...le,apply:({elements:oe,rects:je,availableWidth:me,availableHeight:Ne})=>{const{width:Ae,height:fe}=je.reference,M=oe.floating.style;M.setProperty("--radix-popper-available-width",`${me}px`),M.setProperty("--radix-popper-available-height",`${Ne}px`),M.setProperty("--radix-popper-anchor-width",`${Ae}px`),M.setProperty("--radix-popper-anchor-height",`${fe}px`)}}),w&&HO({element:w,padding:l}),JO({arrowWidth:T,arrowHeight:q}),p&&UO({strategy:"referenceHidden",...le})]}),[j,A]=lE(N),L=Ts(b);Na(()=>{F&&(L==null||L())},[F,L]);const R=(G=I.arrow)==null?void 0:G.x,P=(be=I.arrow)==null?void 0:be.y,H=((de=I.arrow)==null?void 0:de.centerOffset)!==0,[V,ae]=u.useState();return Na(()=>{_&&ae(window.getComputedStyle(_).zIndex)},[_]),r.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...D,transform:F?D.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:V,"--radix-popper-transform-origin":[(U=I.transformOrigin)==null?void 0:U.x,(ie=I.transformOrigin)==null?void 0:ie.y].join(" "),...((B=I.hide)==null?void 0:B.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(YO,{scope:a,placedSide:j,onArrowChange:E,arrowX:R,arrowY:P,shouldHideArrow:H,children:r.jsx(Be.div,{"data-side":j,"data-align":A,...x,ref:v,style:{...x.style,animation:F?void 0:"none"}})})})});nE.displayName=dg;var oE="PopperArrow",KO={top:"bottom",right:"left",bottom:"top",left:"right"},iE=u.forwardRef(function(t,a){const{__scopePopper:s,...n}=t,o=QO(oE,s),i=KO[o.placedSide];return r.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:r.jsx(GO,{...n,ref:a,style:{...n.style,display:"block"}})})});iE.displayName=oE;function XO(e){return e!==null}var JO=e=>({name:"transformOrigin",options:e,fn(t){var y,_,g;const{placement:a,rects:s,middlewareData:n}=t,i=((y=n.arrow)==null?void 0:y.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,f]=lE(a),h={start:"0%",center:"50%",end:"100%"}[f],p=(((_=n.arrow)==null?void 0:_.x)??0)+l/2,m=(((g=n.arrow)==null?void 0:g.y)??0)+c/2;let b="",x="";return d==="bottom"?(b=i?h:`${p}px`,x=`${-c}px`):d==="top"?(b=i?h:`${p}px`,x=`${s.floating.height+c}px`):d==="right"?(b=`${-c}px`,x=i?h:`${m}px`):d==="left"&&(b=`${s.floating.width+c}px`,x=i?h:`${m}px`),{data:{x:b,y:x}}}});function lE(e){const[t,a="center"]=e.split("-");return[t,a]}var cE=aE,jf=rE,ug=nE,fg=iE,[wf,e3]=vs("Tooltip",[gl]),hg=gl(),dE="TooltipProvider",WO=700,G0="tooltip.open",[ez,uE]=wf(dE),fE=e=>{const{__scopeTooltip:t,delayDuration:a=WO,skipDelayDuration:s=300,disableHoverableContent:n=!1,children:o}=e,i=u.useRef(!0),l=u.useRef(!1),c=u.useRef(0);return u.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(ez,{scope:t,isOpenDelayedRef:i,delayDuration:a,onOpen:u.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:u.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:u.useCallback(d=>{l.current=d},[]),disableHoverableContent:n,children:o})};fE.displayName=dE;var hE="Tooltip",[t3,Ef]=wf(hE),gp="TooltipTrigger",tz=u.forwardRef((e,t)=>{const{__scopeTooltip:a,...s}=e,n=Ef(gp,a),o=uE(gp,a),i=hg(a),l=u.useRef(null),c=_t(t,l,n.onTriggerChange),d=u.useRef(!1),f=u.useRef(!1),h=u.useCallback(()=>d.current=!1,[]);return u.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),r.jsx(jf,{asChild:!0,...i,children:r.jsx(Be.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...s,ref:c,onPointerMove:qe(e.onPointerMove,p=>{p.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(n.onTriggerEnter(),f.current=!0)}),onPointerLeave:qe(e.onPointerLeave,()=>{n.onTriggerLeave(),f.current=!1}),onPointerDown:qe(e.onPointerDown,()=>{n.open&&n.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:qe(e.onFocus,()=>{d.current||n.onOpen()}),onBlur:qe(e.onBlur,n.onClose),onClick:qe(e.onClick,n.onClose)})})});tz.displayName=gp;var az="TooltipPortal",[a3,sz]=wf(az,{forceMount:void 0}),Yi="TooltipContent",mE=u.forwardRef((e,t)=>{const a=sz(Yi,e.__scopeTooltip),{forceMount:s=a.forceMount,side:n="top",...o}=e,i=Ef(Yi,e.__scopeTooltip);return r.jsx(ur,{present:s||i.open,children:i.disableHoverableContent?r.jsx(pE,{side:n,...o,ref:t}):r.jsx(rz,{side:n,...o,ref:t})})}),rz=u.forwardRef((e,t)=>{const a=Ef(Yi,e.__scopeTooltip),s=uE(Yi,e.__scopeTooltip),n=u.useRef(null),o=_t(t,n),[i,l]=u.useState(null),{trigger:c,onClose:d}=a,f=n.current,{onPointerInTransitChange:h}=s,p=u.useCallback(()=>{l(null),h(!1)},[h]),m=u.useCallback((b,x)=>{const y=b.currentTarget,_={x:b.clientX,y:b.clientY},g=cz(_,y.getBoundingClientRect()),v=dz(_,g),w=uz(x.getBoundingClientRect()),E=hz([...v,...w]);l(E),h(!0)},[h]);return u.useEffect(()=>()=>p(),[p]),u.useEffect(()=>{if(c&&f){const b=y=>m(y,f),x=y=>m(y,c);return c.addEventListener("pointerleave",b),f.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",b),f.removeEventListener("pointerleave",x)}}},[c,f,m,p]),u.useEffect(()=>{if(i){const b=x=>{const y=x.target,_={x:x.clientX,y:x.clientY},g=(c==null?void 0:c.contains(y))||(f==null?void 0:f.contains(y)),v=!fz(_,i);g?p():v&&(p(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,f,i,d,p]),r.jsx(pE,{...e,ref:o})}),[nz,oz]=wf(hE,{isInside:!1}),iz=Wj("TooltipContent"),pE=u.forwardRef((e,t)=>{const{__scopeTooltip:a,children:s,"aria-label":n,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=Ef(Yi,a),d=hg(a),{onClose:f}=c;return u.useEffect(()=>(document.addEventListener(G0,f),()=>document.removeEventListener(G0,f)),[f]),u.useEffect(()=>{if(c.trigger){const h=p=>{const m=p.target;m!=null&&m.contains(c.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,f]),r.jsx(fl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:r.jsxs(ug,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(iz,{children:s}),r.jsx(nz,{scope:a,isInside:!0,children:r.jsx(mR,{id:c.contentId,role:"tooltip",children:n||s})})]})})});mE.displayName=Yi;var vE="TooltipArrow",lz=u.forwardRef((e,t)=>{const{__scopeTooltip:a,...s}=e,n=hg(a);return oz(vE,a).isInside?null:r.jsx(fg,{...n,...s,ref:t})});lz.displayName=vE;function cz(e,t){const a=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(a,s,n,o)){case o:return"left";case n:return"right";case a:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function dz(e,t,a=5){const s=[];switch(t){case"top":s.push({x:e.x-a,y:e.y+a},{x:e.x+a,y:e.y+a});break;case"bottom":s.push({x:e.x-a,y:e.y-a},{x:e.x+a,y:e.y-a});break;case"left":s.push({x:e.x+a,y:e.y-a},{x:e.x+a,y:e.y+a});break;case"right":s.push({x:e.x-a,y:e.y-a},{x:e.x-a,y:e.y+a});break}return s}function uz(e){const{top:t,right:a,bottom:s,left:n}=e;return[{x:n,y:t},{x:a,y:t},{x:a,y:s},{x:n,y:s}]}function fz(e,t){const{x:a,y:s}=e;let n=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],d=l.x,f=l.y,h=c.x,p=c.y;f>s!=p>s&&a<(h-d)*(s-f)/(p-f)+d&&(n=!n)}return n}function hz(e){const t=e.slice();return t.sort((a,s)=>a.x<s.x?-1:a.x>s.x?1:a.y<s.y?-1:a.y>s.y?1:0),mz(t)}function mz(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const n=e[s];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(n.y-i.y)>=(o.y-i.y)*(n.x-i.x))t.pop();else break}t.push(n)}t.pop();const a=[];for(let s=e.length-1;s>=0;s--){const n=e[s];for(;a.length>=2;){const o=a[a.length-1],i=a[a.length-2];if((o.x-i.x)*(n.y-i.y)>=(o.y-i.y)*(n.x-i.x))a.pop();else break}a.push(n)}return a.pop(),t.length===1&&a.length===1&&t[0].x===a[0].x&&t[0].y===a[0].y?t:t.concat(a)}var pz=fE,gE=mE;const vz=pz,gz=u.forwardRef(({className:e,sideOffset:t=4,...a},s)=>r.jsx(gE,{ref:s,sideOffset:t,className:Ce("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a}));gz.displayName=gE.displayName;var Sf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Nf=typeof window>"u"||"Deno"in globalThis;function Is(){}function xz(e,t){return typeof e=="function"?e(t):e}function _z(e){return typeof e=="number"&&e>=0&&e!==1/0}function yz(e,t){return Math.max(e+(t||0)-Date.now(),0)}function xp(e,t){return typeof e=="function"?e(t):e}function bz(e,t){return typeof e=="function"?e(t):e}function Z0(e,t){const{type:a="all",exact:s,fetchStatus:n,predicate:o,queryKey:i,stale:l}=e;if(i){if(s){if(t.queryHash!==mg(i,t.options))return!1}else if(!Tc(t.queryKey,i))return!1}if(a!=="all"){const c=t.isActive();if(a==="active"&&!c||a==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||n&&n!==t.state.fetchStatus||o&&!o(t))}function Y0(e,t){const{exact:a,status:s,predicate:n,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(a){if(Ac(t.options.mutationKey)!==Ac(o))return!1}else if(!Tc(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||n&&!n(t))}function mg(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ac)(e)}function Ac(e){return JSON.stringify(e,(t,a)=>_p(a)?Object.keys(a).sort().reduce((s,n)=>(s[n]=a[n],s),{}):a)}function Tc(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(a=>Tc(e[a],t[a])):!1}function xE(e,t){if(e===t)return e;const a=Q0(e)&&Q0(t);if(a||_p(e)&&_p(t)){const s=a?e:Object.keys(e),n=s.length,o=a?t:Object.keys(t),i=o.length,l=a?[]:{},c=new Set(s);let d=0;for(let f=0;f<i;f++){const h=a?f:o[f];(!a&&c.has(h)||a)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,d++):(l[h]=xE(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&d++)}return n===i&&d===n?e:l}return t}function Q0(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function _p(e){if(!K0(e))return!1;const t=e.constructor;if(t===void 0)return!0;const a=t.prototype;return!(!K0(a)||!a.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function K0(e){return Object.prototype.toString.call(e)==="[object Object]"}function jz(e){return new Promise(t=>{setTimeout(t,e)})}function wz(e,t,a){return typeof a.structuralSharing=="function"?a.structuralSharing(e,t):a.structuralSharing!==!1?xE(e,t):t}function Ez(e,t,a=0){const s=[...e,t];return a&&s.length>a?s.slice(1):s}function Sz(e,t,a=0){const s=[t,...e];return a&&s.length>a?s.slice(0,-1):s}var pg=Symbol();function _E(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===pg?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var so,dn,Ai,G_,Nz=(G_=class extends Sf{constructor(){super();wt(this,so);wt(this,dn);wt(this,Ai);We(this,Ai,t=>{if(!Nf&&window.addEventListener){const a=()=>t();return window.addEventListener("visibilitychange",a,!1),()=>{window.removeEventListener("visibilitychange",a)}}})}onSubscribe(){xe(this,dn)||this.setEventListener(xe(this,Ai))}onUnsubscribe(){var t;this.hasListeners()||((t=xe(this,dn))==null||t.call(this),We(this,dn,void 0))}setEventListener(t){var a;We(this,Ai,t),(a=xe(this,dn))==null||a.call(this),We(this,dn,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){xe(this,so)!==t&&(We(this,so,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(a=>{a(t)})}isFocused(){var t;return typeof xe(this,so)=="boolean"?xe(this,so):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},so=new WeakMap,dn=new WeakMap,Ai=new WeakMap,G_),yE=new Nz,Ti,un,Ri,Z_,Cz=(Z_=class extends Sf{constructor(){super();wt(this,Ti,!0);wt(this,un);wt(this,Ri);We(this,Ri,t=>{if(!Nf&&window.addEventListener){const a=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",a,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",s)}}})}onSubscribe(){xe(this,un)||this.setEventListener(xe(this,Ri))}onUnsubscribe(){var t;this.hasListeners()||((t=xe(this,un))==null||t.call(this),We(this,un,void 0))}setEventListener(t){var a;We(this,Ri,t),(a=xe(this,un))==null||a.call(this),We(this,un,t(this.setOnline.bind(this)))}setOnline(t){xe(this,Ti)!==t&&(We(this,Ti,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return xe(this,Ti)}},Ti=new WeakMap,un=new WeakMap,Ri=new WeakMap,Z_),Uu=new Cz;function Az(){let e,t;const a=new Promise((n,o)=>{e=n,t=o});a.status="pending",a.catch(()=>{});function s(n){Object.assign(a,n),delete a.resolve,delete a.reject}return a.resolve=n=>{s({status:"fulfilled",value:n}),e(n)},a.reject=n=>{s({status:"rejected",reason:n}),t(n)},a}function Tz(e){return Math.min(1e3*2**e,3e4)}function bE(e){return(e??"online")==="online"?Uu.isOnline():!0}var jE=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Vh(e){return e instanceof jE}function wE(e){let t=!1,a=0,s=!1,n;const o=Az(),i=x=>{var y;s||(p(new jE(x)),(y=e.abort)==null||y.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>yE.isFocused()&&(e.networkMode==="always"||Uu.isOnline())&&e.canRun(),f=()=>bE(e.networkMode)&&e.canRun(),h=x=>{var y;s||(s=!0,(y=e.onSuccess)==null||y.call(e,x),n==null||n(),o.resolve(x))},p=x=>{var y;s||(s=!0,(y=e.onError)==null||y.call(e,x),n==null||n(),o.reject(x))},m=()=>new Promise(x=>{var y;n=_=>{(s||d())&&x(_)},(y=e.onPause)==null||y.call(e)}).then(()=>{var x;n=void 0,s||(x=e.onContinue)==null||x.call(e)}),b=()=>{if(s)return;let x;const y=a===0?e.initialPromise:void 0;try{x=y??e.fn()}catch(_){x=Promise.reject(_)}Promise.resolve(x).then(h).catch(_=>{var S;if(s)return;const g=e.retry??(Nf?0:3),v=e.retryDelay??Tz,w=typeof v=="function"?v(a,_):v,E=g===!0||typeof g=="number"&&a<g||typeof g=="function"&&g(a,_);if(t||!E){p(_);return}a++,(S=e.onFail)==null||S.call(e,a,_),jz(w).then(()=>d()?void 0:m()).then(()=>{t?p(_):b()})})};return{promise:o,cancel:i,continue:()=>(n==null||n(),o),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?b():m().then(b),o)}}var Rz=e=>setTimeout(e,0);function Dz(){let e=[],t=0,a=l=>{l()},s=l=>{l()},n=Rz;const o=l=>{t?e.push(l):n(()=>{a(l)})},i=()=>{const l=e;e=[],l.length&&n(()=>{s(()=>{l.forEach(c=>{a(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{a=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{n=l}}}var La=Dz(),ro,Y_,EE=(Y_=class{constructor(){wt(this,ro)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),_z(this.gcTime)&&We(this,ro,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Nf?1/0:5*60*1e3))}clearGcTimeout(){xe(this,ro)&&(clearTimeout(xe(this,ro)),We(this,ro,void 0))}},ro=new WeakMap,Y_),Di,no,xs,oo,Da,Pc,io,Ls,br,Q_,Oz=(Q_=class extends EE{constructor(t){super();wt(this,Ls);wt(this,Di);wt(this,no);wt(this,xs);wt(this,oo);wt(this,Da);wt(this,Pc);wt(this,io);We(this,io,!1),We(this,Pc,t.defaultOptions),this.setOptions(t.options),this.observers=[],We(this,oo,t.client),We(this,xs,xe(this,oo).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,We(this,Di,Mz(this.options)),this.state=t.state??xe(this,Di),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=xe(this,Da))==null?void 0:t.promise}setOptions(t){this.options={...xe(this,Pc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&xe(this,xs).remove(this)}setData(t,a){const s=wz(this.state.data,t,this.options);return Ta(this,Ls,br).call(this,{data:s,type:"success",dataUpdatedAt:a==null?void 0:a.updatedAt,manual:a==null?void 0:a.manual}),s}setState(t,a){Ta(this,Ls,br).call(this,{type:"setState",state:t,setStateOptions:a})}cancel(t){var s,n;const a=(s=xe(this,Da))==null?void 0:s.promise;return(n=xe(this,Da))==null||n.cancel(t),a?a.then(Is).catch(Is):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(xe(this,Di))}isActive(){return this.observers.some(t=>bz(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===pg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>xp(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!yz(this.state.dataUpdatedAt,t)}onFocus(){var a;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(a=xe(this,Da))==null||a.continue()}onOnline(){var a;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(a=xe(this,Da))==null||a.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),xe(this,xs).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(a=>a!==t),this.observers.length||(xe(this,Da)&&(xe(this,io)?xe(this,Da).cancel({revert:!0}):xe(this,Da).cancelRetry()),this.scheduleGc()),xe(this,xs).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ta(this,Ls,br).call(this,{type:"invalidate"})}fetch(t,a){var d,f,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(a!=null&&a.cancelRefetch))this.cancel({silent:!0});else if(xe(this,Da))return xe(this,Da).continueRetry(),xe(this,Da).promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(m=>m.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,n=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(We(this,io,!0),s.signal)})},o=()=>{const p=_E(this.options,a),b=(()=>{const x={client:xe(this,oo),queryKey:this.queryKey,meta:this.meta};return n(x),x})();return We(this,io,!1),this.options.persister?this.options.persister(p,b,this):p(b)},l=(()=>{const p={fetchOptions:a,options:this.options,queryKey:this.queryKey,client:xe(this,oo),state:this.state,fetchFn:o};return n(p),p})();(d=this.options.behavior)==null||d.onFetch(l,this),We(this,no,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&Ta(this,Ls,br).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=p=>{var m,b,x,y;Vh(p)&&p.silent||Ta(this,Ls,br).call(this,{type:"error",error:p}),Vh(p)||((b=(m=xe(this,xs).config).onError)==null||b.call(m,p,this),(y=(x=xe(this,xs).config).onSettled)==null||y.call(x,this.state.data,p,this)),this.scheduleGc()};return We(this,Da,wE({initialPromise:a==null?void 0:a.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var m,b,x,y;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(_){c(_);return}(b=(m=xe(this,xs).config).onSuccess)==null||b.call(m,p,this),(y=(x=xe(this,xs).config).onSettled)==null||y.call(x,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,m)=>{Ta(this,Ls,br).call(this,{type:"failed",failureCount:p,error:m})},onPause:()=>{Ta(this,Ls,br).call(this,{type:"pause"})},onContinue:()=>{Ta(this,Ls,br).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),xe(this,Da).start()}},Di=new WeakMap,no=new WeakMap,xs=new WeakMap,oo=new WeakMap,Da=new WeakMap,Pc=new WeakMap,io=new WeakMap,Ls=new WeakSet,br=function(t){const a=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...zz(s.data,this.options),fetchMeta:t.meta??null};case"success":return We(this,no,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return Vh(n)&&n.revert&&xe(this,no)?{...xe(this,no),fetchStatus:"idle"}:{...s,error:n,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=a(this.state),La.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),xe(this,xs).notify({query:this,type:"updated",action:t})})},Q_);function zz(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:bE(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Mz(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,a=t!==void 0,s=a?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:a?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}var Ks,K_,kz=(K_=class extends Sf{constructor(t={}){super();wt(this,Ks);this.config=t,We(this,Ks,new Map)}build(t,a,s){const n=a.queryKey,o=a.queryHash??mg(n,a);let i=this.get(o);return i||(i=new Oz({client:t,queryKey:n,queryHash:o,options:t.defaultQueryOptions(a),state:s,defaultOptions:t.getQueryDefaults(n)}),this.add(i)),i}add(t){xe(this,Ks).has(t.queryHash)||(xe(this,Ks).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const a=xe(this,Ks).get(t.queryHash);a&&(t.destroy(),a===t&&xe(this,Ks).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){La.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return xe(this,Ks).get(t)}getAll(){return[...xe(this,Ks).values()]}find(t){const a={exact:!0,...t};return this.getAll().find(s=>Z0(a,s))}findAll(t={}){const a=this.getAll();return Object.keys(t).length>0?a.filter(s=>Z0(t,s)):a}notify(t){La.batch(()=>{this.listeners.forEach(a=>{a(t)})})}onFocus(){La.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){La.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ks=new WeakMap,K_),Xs,Ia,lo,Js,Jr,X_,Pz=(X_=class extends EE{constructor(t){super();wt(this,Js);wt(this,Xs);wt(this,Ia);wt(this,lo);this.mutationId=t.mutationId,We(this,Ia,t.mutationCache),We(this,Xs,[]),this.state=t.state||Iz(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){xe(this,Xs).includes(t)||(xe(this,Xs).push(t),this.clearGcTimeout(),xe(this,Ia).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){We(this,Xs,xe(this,Xs).filter(a=>a!==t)),this.scheduleGc(),xe(this,Ia).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){xe(this,Xs).length||(this.state.status==="pending"?this.scheduleGc():xe(this,Ia).remove(this))}continue(){var t;return((t=xe(this,lo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,i,l,c,d,f,h,p,m,b,x,y,_,g,v,w,E,S,T,q;const a=()=>{Ta(this,Js,Jr).call(this,{type:"continue"})};We(this,lo,wE({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,$)=>{Ta(this,Js,Jr).call(this,{type:"failed",failureCount:k,error:$})},onPause:()=>{Ta(this,Js,Jr).call(this,{type:"pause"})},onContinue:a,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>xe(this,Ia).canRun(this)}));const s=this.state.status==="pending",n=!xe(this,lo).canStart();try{if(s)a();else{Ta(this,Js,Jr).call(this,{type:"pending",variables:t,isPaused:n}),await((i=(o=xe(this,Ia).config).onMutate)==null?void 0:i.call(o,t,this));const $=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));$!==this.state.context&&Ta(this,Js,Jr).call(this,{type:"pending",context:$,variables:t,isPaused:n})}const k=await xe(this,lo).start();return await((f=(d=xe(this,Ia).config).onSuccess)==null?void 0:f.call(d,k,t,this.state.context,this)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,k,t,this.state.context)),await((b=(m=xe(this,Ia).config).onSettled)==null?void 0:b.call(m,k,null,this.state.variables,this.state.context,this)),await((y=(x=this.options).onSettled)==null?void 0:y.call(x,k,null,t,this.state.context)),Ta(this,Js,Jr).call(this,{type:"success",data:k}),k}catch(k){try{throw await((g=(_=xe(this,Ia).config).onError)==null?void 0:g.call(_,k,t,this.state.context,this)),await((w=(v=this.options).onError)==null?void 0:w.call(v,k,t,this.state.context)),await((S=(E=xe(this,Ia).config).onSettled)==null?void 0:S.call(E,void 0,k,this.state.variables,this.state.context,this)),await((q=(T=this.options).onSettled)==null?void 0:q.call(T,void 0,k,t,this.state.context)),k}finally{Ta(this,Js,Jr).call(this,{type:"error",error:k})}}finally{xe(this,Ia).runNext(this)}}},Xs=new WeakMap,Ia=new WeakMap,lo=new WeakMap,Js=new WeakSet,Jr=function(t){const a=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=a(this.state),La.batch(()=>{xe(this,Xs).forEach(s=>{s.onMutationUpdate(t)}),xe(this,Ia).notify({mutation:this,type:"updated",action:t})})},X_);function Iz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Er,Fs,Ic,J_,Lz=(J_=class extends Sf{constructor(t={}){super();wt(this,Er);wt(this,Fs);wt(this,Ic);this.config=t,We(this,Er,new Set),We(this,Fs,new Map),We(this,Ic,0)}build(t,a,s){const n=new Pz({mutationCache:this,mutationId:++pd(this,Ic)._,options:t.defaultMutationOptions(a),state:s});return this.add(n),n}add(t){xe(this,Er).add(t);const a=kd(t);if(typeof a=="string"){const s=xe(this,Fs).get(a);s?s.push(t):xe(this,Fs).set(a,[t])}this.notify({type:"added",mutation:t})}remove(t){if(xe(this,Er).delete(t)){const a=kd(t);if(typeof a=="string"){const s=xe(this,Fs).get(a);if(s)if(s.length>1){const n=s.indexOf(t);n!==-1&&s.splice(n,1)}else s[0]===t&&xe(this,Fs).delete(a)}}this.notify({type:"removed",mutation:t})}canRun(t){const a=kd(t);if(typeof a=="string"){const s=xe(this,Fs).get(a),n=s==null?void 0:s.find(o=>o.state.status==="pending");return!n||n===t}else return!0}runNext(t){var s;const a=kd(t);if(typeof a=="string"){const n=(s=xe(this,Fs).get(a))==null?void 0:s.find(o=>o!==t&&o.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){La.batch(()=>{xe(this,Er).forEach(t=>{this.notify({type:"removed",mutation:t})}),xe(this,Er).clear(),xe(this,Fs).clear()})}getAll(){return Array.from(xe(this,Er))}find(t){const a={exact:!0,...t};return this.getAll().find(s=>Y0(a,s))}findAll(t={}){return this.getAll().filter(a=>Y0(t,a))}notify(t){La.batch(()=>{this.listeners.forEach(a=>{a(t)})})}resumePausedMutations(){const t=this.getAll().filter(a=>a.state.isPaused);return La.batch(()=>Promise.all(t.map(a=>a.continue().catch(Is))))}},Er=new WeakMap,Fs=new WeakMap,Ic=new WeakMap,J_);function kd(e){var t;return(t=e.options.scope)==null?void 0:t.id}function X0(e){return{onFetch:(t,a)=>{var f,h,p,m,b;const s=t.options,n=(p=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,o=((m=t.state.data)==null?void 0:m.pages)||[],i=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const y=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},_=_E(t.options,t.fetchOptions),g=async(v,w,E)=>{if(x)return Promise.reject();if(w==null&&v.pages.length)return Promise.resolve(v);const T=(()=>{const Z={client:t.client,queryKey:t.queryKey,pageParam:w,direction:E?"backward":"forward",meta:t.options.meta};return y(Z),Z})(),q=await _(T),{maxPages:k}=t.options,$=E?Sz:Ez;return{pages:$(v.pages,q,k),pageParams:$(v.pageParams,w,k)}};if(n&&o.length){const v=n==="backward",w=v?Fz:J0,E={pages:o,pageParams:i},S=w(s,E);l=await g(E,S,v)}else{const v=e??o.length;do{const w=c===0?i[0]??s.initialPageParam:J0(s,l);if(c>0&&w==null)break;l=await g(l,w),c++}while(c<v)}return l};t.options.persister?t.fetchFn=()=>{var x,y;return(y=(x=t.options).persister)==null?void 0:y.call(x,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},a)}:t.fetchFn=d}}}function J0(e,{pages:t,pageParams:a}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,a[s],a):void 0}function Fz(e,{pages:t,pageParams:a}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,a[0],a):void 0}var ra,fn,hn,Oi,zi,mn,Mi,ki,W_,$z=(W_=class{constructor(e={}){wt(this,ra);wt(this,fn);wt(this,hn);wt(this,Oi);wt(this,zi);wt(this,mn);wt(this,Mi);wt(this,ki);We(this,ra,e.queryCache||new kz),We(this,fn,e.mutationCache||new Lz),We(this,hn,e.defaultOptions||{}),We(this,Oi,new Map),We(this,zi,new Map),We(this,mn,0)}mount(){pd(this,mn)._++,xe(this,mn)===1&&(We(this,Mi,yE.subscribe(async e=>{e&&(await this.resumePausedMutations(),xe(this,ra).onFocus())})),We(this,ki,Uu.subscribe(async e=>{e&&(await this.resumePausedMutations(),xe(this,ra).onOnline())})))}unmount(){var e,t;pd(this,mn)._--,xe(this,mn)===0&&((e=xe(this,Mi))==null||e.call(this),We(this,Mi,void 0),(t=xe(this,ki))==null||t.call(this),We(this,ki,void 0))}isFetching(e){return xe(this,ra).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return xe(this,fn).findAll({...e,status:"pending"}).length}getQueryData(e){var a;const t=this.defaultQueryOptions({queryKey:e});return(a=xe(this,ra).get(t.queryHash))==null?void 0:a.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),a=xe(this,ra).build(this,t),s=a.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&a.isStaleByTime(xp(t.staleTime,a))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return xe(this,ra).findAll(e).map(({queryKey:t,state:a})=>{const s=a.data;return[t,s]})}setQueryData(e,t,a){const s=this.defaultQueryOptions({queryKey:e}),n=xe(this,ra).get(s.queryHash),o=n==null?void 0:n.state.data,i=xz(t,o);if(i!==void 0)return xe(this,ra).build(this,s).setData(i,{...a,manual:!0})}setQueriesData(e,t,a){return La.batch(()=>xe(this,ra).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,a)]))}getQueryState(e){var a;const t=this.defaultQueryOptions({queryKey:e});return(a=xe(this,ra).get(t.queryHash))==null?void 0:a.state}removeQueries(e){const t=xe(this,ra);La.batch(()=>{t.findAll(e).forEach(a=>{t.remove(a)})})}resetQueries(e,t){const a=xe(this,ra);return La.batch(()=>(a.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const a={revert:!0,...t},s=La.batch(()=>xe(this,ra).findAll(e).map(n=>n.cancel(a)));return Promise.all(s).then(Is).catch(Is)}invalidateQueries(e,t={}){return La.batch(()=>(xe(this,ra).findAll(e).forEach(a=>{a.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const a={...t,cancelRefetch:t.cancelRefetch??!0},s=La.batch(()=>xe(this,ra).findAll(e).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let o=n.fetch(void 0,a);return a.throwOnError||(o=o.catch(Is)),n.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(Is)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const a=xe(this,ra).build(this,t);return a.isStaleByTime(xp(t.staleTime,a))?a.fetch(t):Promise.resolve(a.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Is).catch(Is)}fetchInfiniteQuery(e){return e.behavior=X0(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Is).catch(Is)}ensureInfiniteQueryData(e){return e.behavior=X0(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Uu.isOnline()?xe(this,fn).resumePausedMutations():Promise.resolve()}getQueryCache(){return xe(this,ra)}getMutationCache(){return xe(this,fn)}getDefaultOptions(){return xe(this,hn)}setDefaultOptions(e){We(this,hn,e)}setQueryDefaults(e,t){xe(this,Oi).set(Ac(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...xe(this,Oi).values()],a={};return t.forEach(s=>{Tc(e,s.queryKey)&&Object.assign(a,s.defaultOptions)}),a}setMutationDefaults(e,t){xe(this,zi).set(Ac(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...xe(this,zi).values()],a={};return t.forEach(s=>{Tc(e,s.mutationKey)&&Object.assign(a,s.defaultOptions)}),a}defaultQueryOptions(e){if(e._defaulted)return e;const t={...xe(this,hn).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=mg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===pg&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...xe(this,hn).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){xe(this,ra).clear(),xe(this,fn).clear()}},ra=new WeakMap,fn=new WeakMap,hn=new WeakMap,Oi=new WeakMap,zi=new WeakMap,mn=new WeakMap,Mi=new WeakMap,ki=new WeakMap,W_),qz=u.createContext(void 0),Bz=({client:e,children:t})=>(u.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(qz.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rc(){return Rc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Rc.apply(this,arguments)}var _n;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(_n||(_n={}));const W0="popstate";function Uz(e){e===void 0&&(e={});function t(n,o){let{pathname:i="/",search:l="",hash:c=""}=ko(n.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),yp("",{pathname:i,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function a(n,o){let i=n.document.querySelector("base"),l="";if(i&&i.getAttribute("href")){let c=n.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof o=="string"?o:Hu(o))}function s(n,o){vg(n.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return Vz(t,a,s,e)}function ha(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function vg(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Hz(){return Math.random().toString(36).substr(2,8)}function e_(e,t){return{usr:e.state,key:e.key,idx:t}}function yp(e,t,a,s){return a===void 0&&(a=null),Rc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ko(t):t,{state:a,key:t&&t.key||s||Hz()})}function Hu(e){let{pathname:t="/",search:a="",hash:s=""}=e;return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function ko(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substr(a),e=e.substr(0,a));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function Vz(e,t,a,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:o=!1}=s,i=n.history,l=_n.Pop,c=null,d=f();d==null&&(d=0,i.replaceState(Rc({},i.state,{idx:d}),""));function f(){return(i.state||{idx:null}).idx}function h(){l=_n.Pop;let y=f(),_=y==null?null:y-d;d=y,c&&c({action:l,location:x.location,delta:_})}function p(y,_){l=_n.Push;let g=yp(x.location,y,_);a&&a(g,y),d=f()+1;let v=e_(g,d),w=x.createHref(g);try{i.pushState(v,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;n.location.assign(w)}o&&c&&c({action:l,location:x.location,delta:1})}function m(y,_){l=_n.Replace;let g=yp(x.location,y,_);a&&a(g,y),d=f();let v=e_(g,d),w=x.createHref(g);i.replaceState(v,"",w),o&&c&&c({action:l,location:x.location,delta:0})}function b(y){let _=n.location.origin!=="null"?n.location.origin:n.location.href,g=typeof y=="string"?y:Hu(y);return g=g.replace(/ $/,"%20"),ha(_,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,_)}let x={get action(){return l},get location(){return e(n,i)},listen(y){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(W0,h),c=y,()=>{n.removeEventListener(W0,h),c=null}},createHref(y){return t(n,y)},createURL:b,encodeLocation(y){let _=b(y);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:m,go(y){return i.go(y)}};return x}var t_;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(t_||(t_={}));function Gz(e,t,a){return a===void 0&&(a="/"),Zz(e,t,a)}function Zz(e,t,a,s){let n=typeof t=="string"?ko(t):t,o=gg(n.pathname||"/",a);if(o==null)return null;let i=SE(e);Yz(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=oM(o);l=sM(i[c],d)}return l}function SE(e,t,a,s){t===void 0&&(t=[]),a===void 0&&(a=[]),s===void 0&&(s="");let n=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(ha(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=An([s,c.relativePath]),f=a.concat(c);o.children&&o.children.length>0&&(ha(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),SE(o.children,t,f,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:tM(d,o.index),routesMeta:f})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))n(o,i);else for(let c of NE(o.path))n(o,i,c)}),t}function NE(e){let t=e.split("/");if(t.length===0)return[];let[a,...s]=t,n=a.endsWith("?"),o=a.replace(/\?$/,"");if(s.length===0)return n?[o,""]:[o];let i=NE(s.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),n&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Yz(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:aM(t.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}const Qz=/^:[\w-]+$/,Kz=3,Xz=2,Jz=1,Wz=10,eM=-2,a_=e=>e==="*";function tM(e,t){let a=e.split("/"),s=a.length;return a.some(a_)&&(s+=eM),t&&(s+=Xz),a.filter(n=>!a_(n)).reduce((n,o)=>n+(Qz.test(o)?Kz:o===""?Jz:Wz),s)}function aM(e,t){return e.length===t.length&&e.slice(0,-1).every((s,n)=>s===t[n])?e[e.length-1]-t[t.length-1]:0}function sM(e,t,a){let{routesMeta:s}=e,n={},o="/",i=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,f=o==="/"?t:t.slice(o.length)||"/",h=rM({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),p=c.route;if(!h)return null;Object.assign(n,h.params),i.push({params:n,pathname:An([o,h.pathname]),pathnameBase:dM(An([o,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(o=An([o,h.pathnameBase]))}return i}function rM(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,s]=nM(e.path,e.caseSensitive,e.end),n=t.match(a);if(!n)return null;let o=n[0],i=o.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((d,f,h)=>{let{paramName:p,isOptional:m}=f;if(p==="*"){let x=l[h]||"";i=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const b=l[h];return m&&!b?d[p]=void 0:d[p]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:e}}function nM(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!0),vg(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}function oM(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return vg(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function gg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,s=e.charAt(a);return s&&s!=="/"?null:e.slice(a)||"/"}function iM(e,t){t===void 0&&(t="/");let{pathname:a,search:s="",hash:n=""}=typeof e=="string"?ko(e):e;return{pathname:a?a.startsWith("/")?a:lM(a,t):t,search:uM(s),hash:fM(n)}}function lM(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?a.length>1&&a.pop():n!=="."&&a.push(n)}),a.length>1?a.join("/"):"/"}function Gh(e,t,a,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cM(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function CE(e,t){let a=cM(e);return t?a.map((s,n)=>n===a.length-1?s.pathname:s.pathnameBase):a.map(s=>s.pathnameBase)}function AE(e,t,a,s){s===void 0&&(s=!1);let n;typeof e=="string"?n=ko(e):(n=Rc({},e),ha(!n.pathname||!n.pathname.includes("?"),Gh("?","pathname","search",n)),ha(!n.pathname||!n.pathname.includes("#"),Gh("#","pathname","hash",n)),ha(!n.search||!n.search.includes("#"),Gh("#","search","hash",n)));let o=e===""||n.pathname==="",i=o?"/":n.pathname,l;if(i==null)l=a;else{let h=t.length-1;if(!s&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),h-=1;n.pathname=p.join("/")}l=h>=0?t[h]:"/"}let c=iM(n,l),d=i&&i!=="/"&&i.endsWith("/"),f=(o||i===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const An=e=>e.join("/").replace(/\/\/+/g,"/"),dM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),uM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,fM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function hM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const TE=["post","put","patch","delete"];new Set(TE);const mM=["get",...TE];new Set(mM);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dc(){return Dc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Dc.apply(this,arguments)}const xg=u.createContext(null),pM=u.createContext(null),Po=u.createContext(null),Cf=u.createContext(null),qr=u.createContext({outlet:null,matches:[],isDataRoute:!1}),RE=u.createContext(null);function vM(e,t){let{relative:a}=t===void 0?{}:t;nd()||ha(!1);let{basename:s,navigator:n}=u.useContext(Po),{hash:o,pathname:i,search:l}=OE(e,{relative:a}),c=i;return s!=="/"&&(c=i==="/"?s:An([s,i])),n.createHref({pathname:c,search:l,hash:o})}function nd(){return u.useContext(Cf)!=null}function od(){return nd()||ha(!1),u.useContext(Cf).location}function DE(e){u.useContext(Po).static||u.useLayoutEffect(e)}function Ca(){let{isDataRoute:e}=u.useContext(qr);return e?DM():gM()}function gM(){nd()||ha(!1);let e=u.useContext(xg),{basename:t,future:a,navigator:s}=u.useContext(Po),{matches:n}=u.useContext(qr),{pathname:o}=od(),i=JSON.stringify(CE(n,a.v7_relativeSplatPath)),l=u.useRef(!1);return DE(()=>{l.current=!0}),u.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let h=AE(d,JSON.parse(i),o,f.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:An([t,h.pathname])),(f.replace?s.replace:s.push)(h,f.state,f)},[t,s,i,o,e])}const xM=u.createContext(null);function _M(e){let t=u.useContext(qr).outlet;return t&&u.createElement(xM.Provider,{value:e},t)}function Br(){let{matches:e}=u.useContext(qr),t=e[e.length-1];return t?t.params:{}}function OE(e,t){let{relative:a}=t===void 0?{}:t,{future:s}=u.useContext(Po),{matches:n}=u.useContext(qr),{pathname:o}=od(),i=JSON.stringify(CE(n,s.v7_relativeSplatPath));return u.useMemo(()=>AE(e,JSON.parse(i),o,a==="path"),[e,i,o,a])}function yM(e,t){return bM(e,t)}function bM(e,t,a,s){nd()||ha(!1);let{navigator:n}=u.useContext(Po),{matches:o}=u.useContext(qr),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=od(),f;if(t){var h;let y=typeof t=="string"?ko(t):t;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||ha(!1),f=y}else f=d;let p=f.pathname||"/",m=p;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let b=Gz(e,{pathname:m}),x=NM(b&&b.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:An([c,n.encodeLocation?n.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:An([c,n.encodeLocation?n.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,a,s);return t&&x?u.createElement(Cf.Provider,{value:{location:Dc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:_n.Pop}},x):x}function jM(){let e=RM(),t=hM(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),a?u.createElement("pre",{style:n},a):null,null)}const wM=u.createElement(jM,null);class EM extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?u.createElement(qr.Provider,{value:this.props.routeContext},u.createElement(RE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function SM(e){let{routeContext:t,match:a,children:s}=e,n=u.useContext(xg);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),u.createElement(qr.Provider,{value:t},s)}function NM(e,t,a,s){var n;if(t===void 0&&(t=[]),a===void 0&&(a=null),s===void 0&&(s=null),e==null){var o;if(!a)return null;if(a.errors)e=a.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let i=e,l=(n=a)==null?void 0:n.errors;if(l!=null){let f=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);f>=0||ha(!1),i=i.slice(0,Math.min(i.length,f+1))}let c=!1,d=-1;if(a&&s&&s.v7_partialHydration)for(let f=0;f<i.length;f++){let h=i[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=f),h.route.id){let{loaderData:p,errors:m}=a,b=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||b){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((f,h,p)=>{let m,b=!1,x=null,y=null;a&&(m=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||wM,c&&(d<0&&p===0?(OM("route-fallback"),b=!0,y=null):d===p&&(b=!0,y=h.route.hydrateFallbackElement||null)));let _=t.concat(i.slice(0,p+1)),g=()=>{let v;return m?v=x:b?v=y:h.route.Component?v=u.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=f,u.createElement(SM,{match:h,routeContext:{outlet:f,matches:_,isDataRoute:a!=null},children:v})};return a&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?u.createElement(EM,{location:a.location,revalidation:a.revalidation,component:x,error:m,children:g(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):g()},null)}var zE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(zE||{}),ME=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ME||{});function CM(e){let t=u.useContext(xg);return t||ha(!1),t}function AM(e){let t=u.useContext(pM);return t||ha(!1),t}function TM(e){let t=u.useContext(qr);return t||ha(!1),t}function kE(e){let t=TM(),a=t.matches[t.matches.length-1];return a.route.id||ha(!1),a.route.id}function RM(){var e;let t=u.useContext(RE),a=AM(),s=kE();return t!==void 0?t:(e=a.errors)==null?void 0:e[s]}function DM(){let{router:e}=CM(zE.UseNavigateStable),t=kE(ME.UseNavigateStable),a=u.useRef(!1);return DE(()=>{a.current=!0}),u.useCallback(function(n,o){o===void 0&&(o={}),a.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,Dc({fromRouteId:t},o)))},[e,t])}const s_={};function OM(e,t,a){s_[e]||(s_[e]=!0)}function zM(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function MM(e){return _M(e.context)}function Ct(e){ha(!1)}function kM(e){let{basename:t="/",children:a=null,location:s,navigationType:n=_n.Pop,navigator:o,static:i=!1,future:l}=e;nd()&&ha(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:o,static:i,future:Dc({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof s=="string"&&(s=ko(s));let{pathname:f="/",search:h="",hash:p="",state:m=null,key:b="default"}=s,x=u.useMemo(()=>{let y=gg(f,c);return y==null?null:{location:{pathname:y,search:h,hash:p,state:m,key:b},navigationType:n}},[c,f,h,p,m,b,n]);return x==null?null:u.createElement(Po.Provider,{value:d},u.createElement(Cf.Provider,{children:a,value:x}))}function PM(e){let{children:t,location:a}=e;return yM(bp(t),a)}new Promise(()=>{});function bp(e,t){t===void 0&&(t=[]);let a=[];return u.Children.forEach(e,(s,n)=>{if(!u.isValidElement(s))return;let o=[...t,n];if(s.type===u.Fragment){a.push.apply(a,bp(s.props.children,o));return}s.type!==Ct&&ha(!1),!s.props.index||!s.props.children||ha(!1);let i={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=bp(s.props.children,o)),a.push(i)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jp(){return jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},jp.apply(this,arguments)}function IM(e,t){if(e==null)return{};var a={},s=Object.keys(e),n,o;for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&(a[n]=e[n]);return a}function LM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function FM(e,t){return e.button===0&&(!t||t==="_self")&&!LM(e)}const $M=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qM="6";try{window.__reactRouterVersion=qM}catch{}const BM="startTransition",r_=Yp[BM];function UM(e){let{basename:t,children:a,future:s,window:n}=e,o=u.useRef();o.current==null&&(o.current=Uz({window:n,v5Compat:!0}));let i=o.current,[l,c]=u.useState({action:i.action,location:i.location}),{v7_startTransition:d}=s||{},f=u.useCallback(h=>{d&&r_?r_(()=>c(h)):c(h)},[c,d]);return u.useLayoutEffect(()=>i.listen(f),[i,f]),u.useEffect(()=>zM(s),[s]),u.createElement(kM,{basename:t,children:a,location:l.location,navigationType:l.action,navigator:i,future:s})}const HM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qi=u.forwardRef(function(t,a){let{onClick:s,relative:n,reloadDocument:o,replace:i,state:l,target:c,to:d,preventScrollReset:f,viewTransition:h}=t,p=IM(t,$M),{basename:m}=u.useContext(Po),b,x=!1;if(typeof d=="string"&&VM.test(d)&&(b=d,HM))try{let v=new URL(window.location.href),w=d.startsWith("//")?new URL(v.protocol+d):new URL(d),E=gg(w.pathname,m);w.origin===v.origin&&E!=null?d=E+w.search+w.hash:x=!0}catch{}let y=vM(d,{relative:n}),_=GM(d,{replace:i,state:l,target:c,preventScrollReset:f,relative:n,viewTransition:h});function g(v){s&&s(v),v.defaultPrevented||_(v)}return u.createElement("a",jp({},p,{href:b||y,onClick:x||o?s:g,ref:a,target:c}))});var n_;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(n_||(n_={}));var o_;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(o_||(o_={}));function GM(e,t){let{target:a,replace:s,state:n,preventScrollReset:o,relative:i,viewTransition:l}=t===void 0?{}:t,c=Ca(),d=od(),f=OE(e,{relative:i});return u.useCallback(h=>{if(FM(h,a)){h.preventDefault();let p=s!==void 0?s:Hu(d)===Hu(f);c(e,{replace:p,state:n,preventScrollReset:o,relative:i,viewTransition:l})}},[d,c,f,s,n,a,e,o,i,l])}const ZM=[{path:"/",label:"Dashboard",icon:UR},{path:"/clientes",label:"Clientes",icon:YR},{path:"/fazendas",label:"Fazendas",icon:Tw},{path:"/doadoras",label:"Doadoras",icon:go},{path:"/receptoras",label:"Receptoras",icon:Cw},{path:"/protocolos",label:"Protocolos",icon:Wv},{path:"/aspiracoes",label:"Aspiraes",icon:Iu},{path:"/doses-semen",label:"Doses de Smen",icon:go},{path:"/lotes-fiv",label:"Lotes FIV",icon:Iu},{path:"/embrioes",label:"Embries/Estoque",icon:go},{path:"/transferencia",label:"Transferncia (TE)",icon:gf},{path:"/dg",label:"DG",icon:Dw},{path:"/sexagem",label:"Sexagem",icon:Zv}];function YM(){const e=od();return r.jsxs("div",{className:"w-64 bg-slate-900 text-white min-h-screen p-4 flex flex-col",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-green-400",children:"FIV/TE Bovina"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Sistema de Controle"})]}),r.jsx("nav",{className:"flex-1 space-y-1",children:ZM.map(t=>{const a=t.icon,s=e.pathname===t.path;return r.jsxs(Qi,{to:t.path,className:Ce("flex items-center gap-3 px-3 py-2 rounded-lg transition-colors",s?"bg-green-600 text-white":"text-slate-300 hover:bg-slate-800 hover:text-white"),children:[r.jsx(a,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:t.label})]},t.path)})}),r.jsx("div",{className:"pt-4 border-t border-slate-800",children:r.jsx("p",{className:"text-xs text-slate-500 text-center",children:" 2024 FIV/TE System"})})]})}function QM(){return r.jsxs("div",{className:"flex min-h-screen bg-slate-50",children:[r.jsx(YM,{}),r.jsx("main",{className:"flex-1 p-8",children:r.jsx(MM,{})})]})}const Oe=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:Ce("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Oe.displayName="Card";const Me=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:Ce("flex flex-col space-y-1.5 p-6",e),...t}));Me.displayName="CardHeader";const ke=u.forwardRef(({className:e,...t},a)=>r.jsx("h3",{ref:a,className:Ce("text-2xl font-semibold leading-none tracking-tight",e),...t}));ke.displayName="CardTitle";const ql=u.forwardRef(({className:e,...t},a)=>r.jsx("p",{ref:a,className:Ce("text-sm text-muted-foreground",e),...t}));ql.displayName="CardDescription";const ze=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:Ce("p-6 pt-0",e),...t}));ze.displayName="CardContent";const KM=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:Ce("flex items-center p-6 pt-0",e),...t}));KM.displayName="CardFooter";const _g=hl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),se=u.forwardRef(({className:e,variant:t,size:a,asChild:s=!1,...n},o)=>{const i=s?VT:"button";return r.jsx(i,{className:Ce(_g({variant:t,size:a,className:e})),ref:o,...n})});se.displayName="Button";const XM="modulepreload",JM=function(e){return"/Passagene/"+e},i_={},id=function(t,a,s){let n=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(a.map(c=>{if(c=JM(c),c in i_)return;i_[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":XM,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return n.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},WM=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...a)=>id(async()=>{const{default:s}=await Promise.resolve().then(()=>xl);return{default:s}},void 0).then(({default:s})=>s(...a)):t=fetch,(...a)=>t(...a)};class yg extends Error{constructor(t,a="FunctionsError",s){super(t),this.name=a,this.context=s}}class e4 extends yg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class l_ extends yg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class c_ extends yg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var wp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(wp||(wp={}));var t4=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class a4{constructor(t,{headers:a={},customFetch:s,region:n=wp.Any}={}){this.url=t,this.headers=a,this.region=n,this.fetch=WM(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,a={}){var s;return t4(this,void 0,void 0,function*(){try{const{headers:n,method:o,body:i}=a;let l={},{region:c}=a;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let f;i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=i):typeof i=="string"?(l["Content-Type"]="text/plain",f=i):typeof FormData<"u"&&i instanceof FormData?f=i:(l["Content-Type"]="application/json",f=JSON.stringify(i)));const h=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:f}).catch(x=>{throw new e4(x)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new l_(h);if(!h.ok)throw new c_(h);let m=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return m==="application/json"?b=yield h.json():m==="application/octet-stream"?b=yield h.blob():m==="text/event-stream"?b=h:m==="multipart/form-data"?b=yield h.formData():b=yield h.text(),{data:b,error:null,response:h}}catch(n){return{data:null,error:n,response:n instanceof c_||n instanceof l_?n.context:void 0}}})}}var Xa={},bg={},Af={},ld={},Tf={},Rf={},s4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ki=s4();const r4=Ki.fetch,PE=Ki.fetch.bind(Ki),IE=Ki.Headers,n4=Ki.Request,o4=Ki.Response,xl=Object.freeze(Object.defineProperty({__proto__:null,Headers:IE,Request:n4,Response:o4,default:PE,fetch:r4},Symbol.toStringTag,{value:"Module"})),i4=dC(xl);var Df={};Object.defineProperty(Df,"__esModule",{value:!0});let l4=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Df.default=l4;var LE=Ns&&Ns.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rf,"__esModule",{value:!0});const c4=LE(i4),d4=LE(Df);let u4=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=c4.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,a){return this.headers=Object.assign({},this.headers),this.headers[t]=a,this}then(t,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,l,c;let d=null,f=null,h=null,p=o.status,m=o.statusText;if(o.ok){if(this.method!=="HEAD"){const _=await o.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=_:f=JSON.parse(_))}const x=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),y=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&y&&y.length>1&&(h=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,p=406,m="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const x=await o.text();try{d=JSON.parse(x),Array.isArray(d)&&o.status===404&&(f=[],d=null,p=200,m="OK")}catch{o.status===404&&x===""?(p=204,m="No Content"):d={message:x}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,p=200,m="OK"),d&&this.shouldThrowOnError)throw new d4.default(d)}return{error:d,data:f,count:h,status:p,statusText:m}});return this.shouldThrowOnError||(n=n.catch(o=>{var i,l,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,a)}returns(){return this}overrideTypes(){return this}};Rf.default=u4;var f4=Ns&&Ns.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tf,"__esModule",{value:!0});const h4=f4(Rf);let m4=class extends h4.default{select(t){let a=!1;const s=(t??"*").split("").map(n=>/\s/.test(n)&&!a?"":(n==='"'&&(a=!a),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:a=!0,nullsFirst:s,foreignTable:n,referencedTable:o=n}={}){const i=o?`${o}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${t}.${a?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:a,referencedTable:s=a}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,a,{foreignTable:s,referencedTable:n=s}={}){const o=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${a-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:a=!1,settings:s=!1,buffers:n=!1,wal:o=!1,format:i="text"}={}){var l;const c=[t?"analyze":null,a?"verbose":null,s?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${d}"; options=${c};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Tf.default=m4;var p4=Ns&&Ns.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ld,"__esModule",{value:!0});const v4=p4(Tf);let g4=class extends v4.default{eq(t,a){return this.url.searchParams.append(t,`eq.${a}`),this}neq(t,a){return this.url.searchParams.append(t,`neq.${a}`),this}gt(t,a){return this.url.searchParams.append(t,`gt.${a}`),this}gte(t,a){return this.url.searchParams.append(t,`gte.${a}`),this}lt(t,a){return this.url.searchParams.append(t,`lt.${a}`),this}lte(t,a){return this.url.searchParams.append(t,`lte.${a}`),this}like(t,a){return this.url.searchParams.append(t,`like.${a}`),this}likeAllOf(t,a){return this.url.searchParams.append(t,`like(all).{${a.join(",")}}`),this}likeAnyOf(t,a){return this.url.searchParams.append(t,`like(any).{${a.join(",")}}`),this}ilike(t,a){return this.url.searchParams.append(t,`ilike.${a}`),this}ilikeAllOf(t,a){return this.url.searchParams.append(t,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(t,a){return this.url.searchParams.append(t,`ilike(any).{${a.join(",")}}`),this}is(t,a){return this.url.searchParams.append(t,`is.${a}`),this}in(t,a){const s=Array.from(new Set(a)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cs.{${a.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(a)}`),this}containedBy(t,a){return typeof a=="string"?this.url.searchParams.append(t,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(t,`cd.{${a.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(a)}`),this}rangeGt(t,a){return this.url.searchParams.append(t,`sr.${a}`),this}rangeGte(t,a){return this.url.searchParams.append(t,`nxl.${a}`),this}rangeLt(t,a){return this.url.searchParams.append(t,`sl.${a}`),this}rangeLte(t,a){return this.url.searchParams.append(t,`nxr.${a}`),this}rangeAdjacent(t,a){return this.url.searchParams.append(t,`adj.${a}`),this}overlaps(t,a){return typeof a=="string"?this.url.searchParams.append(t,`ov.${a}`):this.url.searchParams.append(t,`ov.{${a.join(",")}}`),this}textSearch(t,a,{config:s,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const i=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${o}fts${i}.${a}`),this}match(t){return Object.entries(t).forEach(([a,s])=>{this.url.searchParams.append(a,`eq.${s}`)}),this}not(t,a,s){return this.url.searchParams.append(t,`not.${a}.${s}`),this}or(t,{foreignTable:a,referencedTable:s=a}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,a,s){return this.url.searchParams.append(t,`${a}.${s}`),this}};ld.default=g4;var x4=Ns&&Ns.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Af,"__esModule",{value:!0});const kl=x4(ld);let _4=class{constructor(t,{headers:a={},schema:s,fetch:n}){this.url=t,this.headers=a,this.schema=s,this.fetch=n}select(t,{head:a=!1,count:s}={}){const n=a?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),s&&(this.headers.Prefer=`count=${s}`),new kl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:a,defaultToNull:s=!0}={}){const n="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),a&&o.push(`count=${a}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const i=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new kl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:a,ignoreDuplicates:s=!1,count:n,defaultToNull:o=!0}={}){const i="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(a!==void 0&&this.url.searchParams.set("on_conflict",a),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new kl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:a}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),a&&n.push(`count=${a}`),this.headers.Prefer=n.join(","),new kl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const a="DELETE",s=[];return t&&s.push(`count=${t}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new kl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Af.default=_4;var Of={},zf={};Object.defineProperty(zf,"__esModule",{value:!0});zf.version=void 0;zf.version="0.0.0-automated";Object.defineProperty(Of,"__esModule",{value:!0});Of.DEFAULT_HEADERS=void 0;const y4=zf;Of.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${y4.version}`};var FE=Ns&&Ns.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bg,"__esModule",{value:!0});const b4=FE(Af),j4=FE(ld),w4=Of;let E4=class $E{constructor(t,{headers:a={},schema:s,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},w4.DEFAULT_HEADERS),a),this.schemaName=s,this.fetch=n}from(t){const a=new URL(`${this.url}/${t}`);return new b4.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new $E(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,a={},{head:s=!1,get:n=!1,count:o}={}){let i;const l=new URL(`${this.url}/rpc/${t}`);let c;s||n?(i=s?"HEAD":"GET",Object.entries(a).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{l.searchParams.append(f,h)})):(i="POST",c=a);const d=Object.assign({},this.headers);return o&&(d.Prefer=`count=${o}`),new j4.default({method:i,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};bg.default=E4;var _l=Ns&&Ns.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.PostgrestError=Xa.PostgrestBuilder=Xa.PostgrestTransformBuilder=Xa.PostgrestFilterBuilder=Xa.PostgrestQueryBuilder=Xa.PostgrestClient=void 0;const qE=_l(bg);Xa.PostgrestClient=qE.default;const BE=_l(Af);Xa.PostgrestQueryBuilder=BE.default;const UE=_l(ld);Xa.PostgrestFilterBuilder=UE.default;const HE=_l(Tf);Xa.PostgrestTransformBuilder=HE.default;const VE=_l(Rf);Xa.PostgrestBuilder=VE.default;const GE=_l(Df);Xa.PostgrestError=GE.default;var S4=Xa.default={PostgrestClient:qE.default,PostgrestQueryBuilder:BE.default,PostgrestFilterBuilder:UE.default,PostgrestTransformBuilder:HE.default,PostgrestBuilder:VE.default,PostgrestError:GE.default};const{PostgrestClient:N4,PostgrestQueryBuilder:l3,PostgrestFilterBuilder:c3,PostgrestTransformBuilder:d3,PostgrestBuilder:u3,PostgrestError:f3}=S4;function C4(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const A4=C4(),T4="2.11.15",R4=`realtime-js/${T4}`,D4="1.0.0",ZE=1e4,O4=1e3;var lc;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(lc||(lc={}));var Ra;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ra||(Ra={}));var qs;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(qs||(qs={}));var Ep;(function(e){e.websocket="websocket"})(Ep||(Ep={}));var ao;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ao||(ao={}));class z4{constructor(){this.HEADER_LENGTH=1}decode(t,a){return t.constructor===ArrayBuffer?a(this._binaryDecode(t)):a(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const a=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,a,s)}_decodeBroadcast(t,a,s){const n=a.getUint8(1),o=a.getUint8(2);let i=this.HEADER_LENGTH+2;const l=s.decode(t.slice(i,i+n));i=i+n;const c=s.decode(t.slice(i,i+o));i=i+o;const d=JSON.parse(s.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class YE{constructor(t,a){this.callback=t,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ut;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ut||(Ut={}));const d_=(e,t,a={})=>{var s;const n=(s=a.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((o,i)=>(o[i]=M4(i,e,t,n),o),{})},M4=(e,t,a,s)=>{const n=t.find(l=>l.name===e),o=n==null?void 0:n.type,i=a[e];return o&&!s.includes(o)?QE(o,i):Sp(i)},QE=(e,t)=>{if(e.charAt(0)==="_"){const a=e.slice(1,e.length);return L4(t,a)}switch(e){case Ut.bool:return k4(t);case Ut.float4:case Ut.float8:case Ut.int2:case Ut.int4:case Ut.int8:case Ut.numeric:case Ut.oid:return P4(t);case Ut.json:case Ut.jsonb:return I4(t);case Ut.timestamp:return F4(t);case Ut.abstime:case Ut.date:case Ut.daterange:case Ut.int4range:case Ut.int8range:case Ut.money:case Ut.reltime:case Ut.text:case Ut.time:case Ut.timestamptz:case Ut.timetz:case Ut.tsrange:case Ut.tstzrange:return Sp(t);default:return Sp(t)}},Sp=e=>e,k4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},P4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},I4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},L4=(e,t)=>{if(typeof e!="string")return e;const a=e.length-1,s=e[a];if(e[0]==="{"&&s==="}"){let o;const i=e.slice(1,a);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>QE(t,l))}return e},F4=e=>typeof e=="string"?e.replace(" ","T"):e,KE=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Zh{constructor(t,a,s={},n=ZE){this.channel=t,this.event=a,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,a){var s;return this._hasReceived(t)&&a((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:a}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(a))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var u_;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(u_||(u_={}));class cc{constructor(t,a){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=cc.syncState(this.state,n,o,i),this.pendingDiffs.forEach(c=>{this.state=cc.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=cc.syncDiff(this.state,n,o,i),l())}),this.onJoin((n,o,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:o,newPresences:i})}),this.onLeave((n,o,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,a,s,n){const o=this.cloneDeep(t),i=this.transformState(a),l={},c={};return this.map(o,(d,f)=>{i[d]||(c[d]=f)}),this.map(i,(d,f)=>{const h=o[d];if(h){const p=f.map(y=>y.presence_ref),m=h.map(y=>y.presence_ref),b=f.filter(y=>m.indexOf(y.presence_ref)<0),x=h.filter(y=>p.indexOf(y.presence_ref)<0);b.length>0&&(l[d]=b),x.length>0&&(c[d]=x)}else l[d]=f}),this.syncDiff(o,{joins:l,leaves:c},s,n)}static syncDiff(t,a,s,n){const{joins:o,leaves:i}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(o,(l,c)=>{var d;const f=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),f.length>0){const h=t[l].map(m=>m.presence_ref),p=f.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...p)}s(l,f,c)}),this.map(i,(l,c)=>{let d=t[l];if(!d)return;const f=c.map(h=>h.presence_ref);d=d.filter(h=>f.indexOf(h.presence_ref)<0),t[l]=d,n(l,d,c),d.length===0&&delete t[l]}),t}static map(t,a){return Object.getOwnPropertyNames(t).map(s=>a(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((a,s)=>{const n=t[s];return"metas"in n?a[s]=n.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):a[s]=n,a},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var f_;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(f_||(f_={}));var h_;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(h_||(h_={}));var wr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(wr||(wr={}));class jg{constructor(t,a={config:{}},s){this.topic=t,this.params=a,this.socket=s,this.bindings={},this.state=Ra.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new Zh(this,qs.join,this.params,this.timeout),this.rejoinTimer=new YE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ra.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ra.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ra.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ra.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qs.reply,{},(n,o)=>{this._trigger(this._replyEventName(o),n)}),this.presence=new cc(this),this.broadcastEndpointURL=KE(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,a=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==Ra.closed){const{config:{broadcast:o,presence:i,private:l}}=this.params;this._onError(f=>t==null?void 0:t(wr.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(wr.CLOSED));const c={},d={broadcast:o,presence:i,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(f=>f.filter))!==null&&n!==void 0?n:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:f})=>{var h;if(this.socket.setAuth(),f===void 0){t==null||t(wr.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,m=(h=p==null?void 0:p.length)!==null&&h!==void 0?h:0,b=[];for(let x=0;x<m;x++){const y=p[x],{filter:{event:_,schema:g,table:v,filter:w}}=y,E=f&&f[x];if(E&&E.event===_&&E.schema===g&&E.table===v&&E.filter===w)b.push(Object.assign(Object.assign({},y),{id:E.id}));else{this.unsubscribe(),this.state=Ra.errored,t==null||t(wr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(wr.SUBSCRIBED);return}}).receive("error",f=>{this.state=Ra.errored,t==null||t(wr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(wr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,a={}){return await this.send({type:"presence",event:"track",payload:t},a.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,a,s){return this._on(t,a,s)}async send(t,a={}){var s,n;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=a.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const d=this._push(t.type,t,a.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ra.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qs.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new Zh(this,qs.leave,{},t),s.receive("ok",()=>{a(),n("ok")}).receive("timeout",()=>{a(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,a,s){const n=new AbortController,o=setTimeout(()=>n.abort(),s),i=await this.socket.fetch(t,Object.assign(Object.assign({},a),{signal:n.signal}));return clearTimeout(o),i}_push(t,a,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Zh(this,t,a,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,a,s){return a}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,a,s){var n,o;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:f}=qs;if(s&&[l,c,d,f].indexOf(i)>=0&&s!==this._joinRef())return;let p=this._onMessage(i,a,s);if(a&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(m=>{var b,x,y;return((b=m.filter)===null||b===void 0?void 0:b.event)==="*"||((y=(x=m.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===i}).map(m=>m.callback(p,s)):(o=this.bindings[i])===null||o===void 0||o.filter(m=>{var b,x,y,_,g,v;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const w=m.id,E=(b=m.filter)===null||b===void 0?void 0:b.event;return w&&((x=a.ids)===null||x===void 0?void 0:x.includes(w))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((y=a.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const w=(g=(_=m==null?void 0:m.filter)===null||_===void 0?void 0:_.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return w==="*"||w===((v=a==null?void 0:a.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof p=="object"&&"ids"in p){const b=p.data,{schema:x,table:y,commit_timestamp:_,type:g,errors:v}=b;p=Object.assign(Object.assign({},{schema:x,table:y,commit_timestamp:_,eventType:g,new:{},old:{},errors:v}),this._getPayloadRecords(b))}m.callback(p,s)})}_isClosed(){return this.state===Ra.closed}_isJoined(){return this.state===Ra.joined}_isJoining(){return this.state===Ra.joining}_isLeaving(){return this.state===Ra.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,a,s){const n=t.toLocaleLowerCase(),o={type:n,filter:a,callback:s};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(t,a){const s=t.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var o;return!(((o=n.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&jg.isEqual(n.filter,a))}),this}static isEqual(t,a){if(Object.keys(t).length!==Object.keys(a).length)return!1;for(const s in t)if(t[s]!==a[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(qs.close,{},t)}_onError(t){this._on(qs.error,{},a=>t(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ra.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const a={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(a.new=d_(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(a.old=d_(t.columns,t.old_record)),a}}const m_=()=>{},$4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class q4{constructor(t,a){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ZE,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=m_,this.ref=0,this.logger=m_,this.conn=null,this.sendBuffer=[],this.serializer=new z4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...l)=>id(async()=>{const{default:c}=await Promise.resolve().then(()=>xl);return{default:c}},void 0).then(({default:c})=>c(...l)):i=fetch,(...l)=>i(...l)},this.endPoint=`${t}/${Ep.websocket}`,this.httpEndpoint=KE(t),a!=null&&a.transport?this.transport=a.transport:this.transport=null,a!=null&&a.params&&(this.params=a.params),a!=null&&a.timeout&&(this.timeout=a.timeout),a!=null&&a.logger&&(this.logger=a.logger),(a!=null&&a.logLevel||a!=null&&a.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),a!=null&&a.heartbeatIntervalMs&&(this.heartbeatIntervalMs=a.heartbeatIntervalMs);const n=(s=a==null?void 0:a.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=a!=null&&a.reconnectAfterMs?a.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=a!=null&&a.encode?a.encode:(o,i)=>i(JSON.stringify(o)),this.decode=a!=null&&a.decode?a.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new YE(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(a==null?void 0:a.fetch),a!=null&&a.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(a==null?void 0:a.worker)||!1,this.workerUrl=a==null?void 0:a.workerUrl}this.accessToken=(a==null?void 0:a.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=A4),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:D4}))}disconnect(t,a){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,a??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(t){const a=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const t=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,a,s){this.logger(t,a,s)}connectionState(){switch(this.conn&&this.conn.readyState){case lc.connecting:return ao.Connecting;case lc.open:return ao.Open;case lc.closing:return ao.Closing;default:return ao.Closed}}isConnected(){return this.connectionState()===ao.Open}channel(t,a={config:{}}){const s=`realtime:${t}`,n=this.getChannels().find(o=>o.topic===s);if(n)return n;{const o=new jg(`realtime:${t}`,a,this);return this.channels.push(o),o}}push(t){const{topic:a,event:s,payload:n,ref:o}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${a} ${s} (${o})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let a=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(s=>{const n={access_token:a,version:R4};a&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(qs.access_token,{access_token:a})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(O4,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let a=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${t}"`),a.unsubscribe())}_remove(t){this.channels=this.channels.filter(a=>a.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,a=>{let{topic:s,event:n,payload:o,ref:i}=a;s==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(a.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${s} ${n} ${i&&"("+i+")"||""}`,o),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,o,i)),this.stateChangeCallbacks.message.forEach(l=>l(a))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(a=>a(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(a=>a(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(qs.error))}_appendParams(t,a){if(Object.keys(a).length===0)return t;const s=t.match(/\?/)?"&":"?",n=new URLSearchParams(a);return`${t}${s}${n}`}_workerObjectUrl(t){let a;if(t)a=t;else{const s=new Blob([$4],{type:"application/javascript"});a=URL.createObjectURL(s)}return a}}class wg extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ga(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class B4 extends wg{constructor(t,a){super(t),this.name="StorageApiError",this.status=a}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Np extends wg{constructor(t,a){super(t),this.name="StorageUnknownError",this.originalError=a}}var U4=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const XE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...a)=>id(async()=>{const{default:s}=await Promise.resolve().then(()=>xl);return{default:s}},void 0).then(({default:s})=>s(...a)):t=fetch,(...a)=>t(...a)},H4=()=>U4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield id(()=>Promise.resolve().then(()=>xl),void 0)).Response:Response}),Cp=e=>{if(Array.isArray(e))return e.map(a=>Cp(a));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([a,s])=>{const n=a.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[n]=Cp(s)}),t};var Io=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const Yh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),V4=(e,t,a)=>Io(void 0,void 0,void 0,function*(){const s=yield H4();e instanceof s&&!(a!=null&&a.noResolveJson)?e.json().then(n=>{t(new B4(Yh(n),e.status||500))}).catch(n=>{t(new Np(Yh(n),n))}):t(new Np(Yh(e),e))}),G4=(e,t,a,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),a))};function cd(e,t,a,s,n,o){return Io(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(a,G4(t,s,n,o)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>V4(c,l,s))})})}function Vu(e,t,a,s){return Io(this,void 0,void 0,function*(){return cd(e,"GET",t,a,s)})}function sn(e,t,a,s,n){return Io(this,void 0,void 0,function*(){return cd(e,"POST",t,s,n,a)})}function Z4(e,t,a,s,n){return Io(this,void 0,void 0,function*(){return cd(e,"PUT",t,s,n,a)})}function Y4(e,t,a,s){return Io(this,void 0,void 0,function*(){return cd(e,"HEAD",t,Object.assign(Object.assign({},a),{noResolveJson:!0}),s)})}function JE(e,t,a,s,n){return Io(this,void 0,void 0,function*(){return cd(e,"DELETE",t,s,n,a)})}var Ga=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const Q4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},p_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class K4{constructor(t,a={},s,n){this.url=t,this.headers=a,this.bucketId=s,this.fetch=XE(n)}uploadOrUpdate(t,a,s,n){return Ga(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},p_),n);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=s,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(a),f=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:t,body:o,headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{})),p=yield h.json();return h.ok?{data:{path:d,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(o){if(ga(o))return{data:null,error:o};throw o}})}upload(t,a,s){return Ga(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,a,s)})}uploadToSignedUrl(t,a,s,n){return Ga(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",a);try{let c;const d=Object.assign({upsert:p_.upsert},n),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:f}),p=yield h.json();return h.ok?{data:{path:o,fullPath:p.Key},error:null}:{data:null,error:p}}catch(c){if(ga(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,a){return Ga(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const n=Object.assign({},this.headers);a!=null&&a.upsert&&(n["x-upsert"]="true");const o=yield sn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new wg("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(s){if(ga(s))return{data:null,error:s};throw s}})}update(t,a,s){return Ga(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,a,s)})}move(t,a,s){return Ga(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(ga(n))return{data:null,error:n};throw n}})}copy(t,a,s){return Ga(this,void 0,void 0,function*(){try{return{data:{path:(yield sn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:a,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(ga(n))return{data:null,error:n};throw n}})}createSignedUrl(t,a,s){return Ga(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),o=yield sn(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:a},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(n){if(ga(n))return{data:null,error:n};throw n}})}createSignedUrls(t,a,s){return Ga(this,void 0,void 0,function*(){try{const n=yield sn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:t},{headers:this.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(n){if(ga(n))return{data:null,error:n};throw n}})}download(t,a){return Ga(this,void 0,void 0,function*(){const n=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),i=o?`?${o}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Vu(this.fetch,`${this.url}/${n}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ga(l))return{data:null,error:l};throw l}})}info(t){return Ga(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{const s=yield Vu(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:Cp(s),error:null}}catch(s){if(ga(s))return{data:null,error:s};throw s}})}exists(t){return Ga(this,void 0,void 0,function*(){const a=this._getFinalPath(t);try{return yield Y4(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(ga(s)&&s instanceof Np){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,a){const s=this._getFinalPath(t),n=[],o=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";o!==""&&n.push(o);const l=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(t){return Ga(this,void 0,void 0,function*(){try{return{data:yield JE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(a){if(ga(a))return{data:null,error:a};throw a}})}list(t,a,s){return Ga(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Q4),a),{prefix:t||""});return{data:yield sn(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(ga(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const a=[];return t.width&&a.push(`width=${t.width}`),t.height&&a.push(`height=${t.height}`),t.resize&&a.push(`resize=${t.resize}`),t.format&&a.push(`format=${t.format}`),t.quality&&a.push(`quality=${t.quality}`),a.join("&")}}const X4="2.7.1",J4={"X-Client-Info":`storage-js/${X4}`};var qo=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class W4{constructor(t,a={},s){this.url=t,this.headers=Object.assign(Object.assign({},J4),a),this.fetch=XE(s)}listBuckets(){return qo(this,void 0,void 0,function*(){try{return{data:yield Vu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ga(t))return{data:null,error:t};throw t}})}getBucket(t){return qo(this,void 0,void 0,function*(){try{return{data:yield Vu(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(a){if(ga(a))return{data:null,error:a};throw a}})}createBucket(t,a={public:!1}){return qo(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ga(s))return{data:null,error:s};throw s}})}updateBucket(t,a){return qo(this,void 0,void 0,function*(){try{return{data:yield Z4(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ga(s))return{data:null,error:s};throw s}})}emptyBucket(t){return qo(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(ga(a))return{data:null,error:a};throw a}})}deleteBucket(t){return qo(this,void 0,void 0,function*(){try{return{data:yield JE(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(a){if(ga(a))return{data:null,error:a};throw a}})}}class ek extends W4{constructor(t,a={},s){super(t,a,s)}from(t){return new K4(this.url,this.headers,t,this.fetch)}}const tk="2.52.0";let Bl="";typeof Deno<"u"?Bl="deno":typeof document<"u"?Bl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bl="react-native":Bl="node";const ak={"X-Client-Info":`supabase-js-${Bl}/${tk}`},sk={headers:ak},rk={schema:"public"},nk={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ok={};var ik=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};const lk=e=>{let t;return e?t=e:typeof fetch>"u"?t=PE:t=fetch,(...a)=>t(...a)},ck=()=>typeof Headers>"u"?IE:Headers,dk=(e,t,a)=>{const s=lk(a),n=ck();return(o,i)=>ik(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new n(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(o,Object.assign(Object.assign({},i),{headers:d}))})};var uk=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};function fk(e){return e.endsWith("/")?e:e+"/"}function hk(e,t){var a,s;const{db:n,auth:o,realtime:i,global:l}=e,{db:c,auth:d,realtime:f,global:h}=t,p={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},f),i),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(a=h==null?void 0:h.headers)!==null&&a!==void 0?a:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>uk(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const WE="2.71.1",Wo=30*1e3,Ap=3,Qh=Ap*Wo,mk="http://localhost:9999",pk="supabase.auth.token",vk={"X-Client-Info":`gotrue-js/${WE}`},Tp="X-Supabase-Api-Version",eS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xk=10*60*1e3;class Eg extends Error{constructor(t,a,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=s}}function et(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class _k extends Eg{constructor(t,a,s){super(t,a,s),this.name="AuthApiError",this.status=a,this.code=s}}function yk(e){return et(e)&&e.name==="AuthApiError"}class tS extends Eg{constructor(t,a){super(t),this.name="AuthUnknownError",this.originalError=a}}class Fn extends Eg{constructor(t,a,s,n){super(t,s,n),this.name=a,this.status=s}}class Wr extends Fn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function bk(e){return et(e)&&e.name==="AuthSessionMissingError"}class Pd extends Fn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Id extends Fn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ld extends Fn{constructor(t,a=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function jk(e){return et(e)&&e.name==="AuthImplicitGrantRedirectError"}class v_ extends Fn{constructor(t,a=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rp extends Fn{constructor(t,a){super(t,"AuthRetryableFetchError",a,void 0)}}function Kh(e){return et(e)&&e.name==="AuthRetryableFetchError"}class g_ extends Fn{constructor(t,a,s){super(t,"AuthWeakPasswordError",a,"weak_password"),this.reasons=s}}class Dp extends Fn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Gu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),x_=` 	
\r=`.split(""),wk=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<x_.length;t+=1)e[x_[t].charCodeAt(0)]=-2;for(let t=0;t<Gu.length;t+=1)e[Gu[t].charCodeAt(0)]=t;return e})();function __(e,t,a){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;a(Gu[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;a(Gu[s]),t.queuedBits-=6}}function aS(e,t,a){const s=wk[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)a(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function y_(e){const t=[],a=i=>{t.push(String.fromCodePoint(i))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},o=i=>{Nk(i,s,a)};for(let i=0;i<e.length;i+=1)aS(e.charCodeAt(i),n,o);return t.join("")}function Ek(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Sk(e,t){for(let a=0;a<e.length;a+=1){let s=e.charCodeAt(a);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(e.charCodeAt(a+1)-56320&65535|n)+65536,a+=1}Ek(s,t)}}function Nk(e,t,a){if(t.utf8seq===0){if(e<=127){a(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&a(t.codepoint)}}function Ck(e){const t=[],a={queue:0,queuedBits:0},s=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)aS(e.charCodeAt(n),a,s);return new Uint8Array(t)}function Ak(e){const t=[];return Sk(e,a=>t.push(a)),new Uint8Array(t)}function Tk(e){const t=[],a={queue:0,queuedBits:0},s=n=>{t.push(n)};return e.forEach(n=>__(n,a,s)),__(null,a,s),t.join("")}function Rk(e){return Math.round(Date.now()/1e3)+e}function Dk(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ks=()=>typeof window<"u"&&typeof document<"u",Kn={tested:!1,writable:!1},sS=()=>{if(!ks())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kn.tested)return Kn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Kn.tested=!0,Kn.writable=!0}catch{Kn.tested=!0,Kn.writable=!1}return Kn.writable};function Ok(e){const t={},a=new URL(e);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((n,o)=>{t[o]=n})}catch{}return a.searchParams.forEach((s,n)=>{t[n]=s}),t}const rS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...a)=>id(async()=>{const{default:s}=await Promise.resolve().then(()=>xl);return{default:s}},void 0).then(({default:s})=>s(...a)):t=fetch,(...a)=>t(...a)},zk=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ei=async(e,t,a)=>{await e.setItem(t,JSON.stringify(a))},Xn=async(e,t)=>{const a=await e.getItem(t);if(!a)return null;try{return JSON.parse(a)}catch{return a}},Kr=async(e,t)=>{await e.removeItem(t)};class Mf{constructor(){this.promise=new Mf.promiseConstructor((t,a)=>{this.resolve=t,this.reject=a})}}Mf.promiseConstructor=Promise;function Xh(e){const t=e.split(".");if(t.length!==3)throw new Dp("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!gk.test(t[s]))throw new Dp("JWT not in base64url format");return{header:JSON.parse(y_(t[0])),payload:JSON.parse(y_(t[1])),signature:Ck(t[2]),raw:{header:t[0],payload:t[1]}}}async function Mk(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function kk(e,t){return new Promise((s,n)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){s(i);return}}catch(i){if(!t(o,i)){n(i);return}}})()})}function Pk(e){return("0"+e.toString(16)).substr(-2)}function Ik(){const t=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=a.length;let n="";for(let o=0;o<56;o++)n+=a.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(t),Array.from(t,Pk).join("")}async function Lk(e){const a=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",a),n=new Uint8Array(s);return Array.from(n).map(o=>String.fromCharCode(o)).join("")}async function Fk(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const a=await Lk(e);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bo(e,t,a=!1){const s=Ik();let n=s;a&&(n+="/PASSWORD_RECOVERY"),await ei(e,`${t}-code-verifier`,n);const o=await Fk(s);return[o,s===o?"plain":"s256"]}const $k=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qk(e){const t=e.headers.get(Tp);if(!t||!t.match($k))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Bk(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Uk(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Hk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Uo(e){if(!Hk.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jh(){const e={};return new Proxy(e,{get:(t,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const s=a.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function b_(e){return JSON.parse(JSON.stringify(e))}var Vk=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]]);return a};const to=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Gk=[502,503,504];async function j_(e){var t;if(!zk(e))throw new Rp(to(e),0);if(Gk.includes(e.status))throw new Rp(to(e),e.status);let a;try{a=await e.json()}catch(o){throw new tS(to(o),o)}let s;const n=qk(e);if(n&&n.getTime()>=eS["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?s=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(s=a.error_code),s){if(s==="weak_password")throw new g_(to(a),e.status,((t=a.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Wr}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new g_(to(a),e.status,a.weak_password.reasons);throw new _k(to(a),e.status||500,s)}const Zk=(e,t,a,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),a))};async function dt(e,t,a,s){var n;const o=Object.assign({},s==null?void 0:s.headers);o[Tp]||(o[Tp]=eS["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const i=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(i.redirect_to=s.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await Yk(e,t,a+l,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Yk(e,t,a,s,n,o){const i=Zk(t,s,n,o);let l;try{l=await e(a,Object.assign({},i))}catch(c){throw console.error(c),new Rp(to(c),0)}if(l.ok||await j_(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await j_(c)}}function jr(e){var t;let a=null;Jk(e)&&(a=Object.assign({},e),e.expires_at||(a.expires_at=Rk(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:a,user:s},error:null}}function w_(e){const t=jr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function cn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Qk(e){return{data:e,error:null}}function Kk(e){const{action_link:t,email_otp:a,hashed_token:s,redirect_to:n,verification_type:o}=e,i=Vk(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:a,hashed_token:s,redirect_to:n,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function Xk(e){return e}function Jk(e){return e.access_token&&e.refresh_token&&e.expires_in}const Wh=["global","local","others"];var Wk=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]]);return a};class eP{constructor({url:t="",headers:a={},fetch:s}){this.url=t,this.headers=a,this.fetch=rS(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,a=Wh[0]){if(Wh.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wh.join(", ")}`);try{return await dt(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(et(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,a={}){try{return await dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:cn})}catch(s){if(et(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:a}=t,s=Wk(t,["options"]),n=Object.assign(Object.assign({},s),a);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Kk,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(et(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(t){try{return await dt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:cn})}catch(a){if(et(a))return{data:{user:null},error:a};throw a}}async listUsers(t){var a,s,n,o,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},f=await dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:"",per_page:(o=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:Xk});if(f.error)throw f.error;const h=await f.json(),p=(i=f.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(b=>{const x=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(b.split(";")[1].split("=")[1]);d[`${y}Page`]=x}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(et(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Uo(t);try{return await dt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:cn})}catch(a){if(et(a))return{data:{user:null},error:a};throw a}}async updateUserById(t,a){Uo(t);try{return await dt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:a,headers:this.headers,xform:cn})}catch(s){if(et(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,a=!1){Uo(t);try{return await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:a},xform:cn})}catch(s){if(et(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Uo(t.userId);try{const{data:a,error:s}=await dt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:a,error:s}}catch(a){if(et(a))return{data:null,error:a};throw a}}async _deleteFactor(t){Uo(t.userId),Uo(t.id);try{return{data:await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(a){if(et(a))return{data:null,error:a};throw a}}}function E_(e={}){return{getItem:t=>e[t]||null,setItem:(t,a)=>{e[t]=a},removeItem:t=>{delete e[t]}}}function tP(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ho={debug:!!(globalThis&&sS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class nS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class aP extends nS{}async function sP(e,t,a){Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await a()}finally{Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new aP(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ho.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}tP();const rP={url:mk,storageKey:pk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function S_(e,t,a){return await a()}const Vo={};class Oc{constructor(t){var a,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Oc.nextInstanceID,Oc.nextInstanceID+=1,this.instanceID>0&&ks()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},rP),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new eP({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=rS(n.fetch),this.lock=n.lock||S_,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ks()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=sP:this.lock=S_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:sS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=E_(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=E_(this.memoryStorage)),ks()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,a;return(a=(t=Vo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(t){Vo[this.storageKey]=Object.assign(Object.assign({},Vo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,a;return(a=(t=Vo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Vo[this.storageKey]=Object.assign(Object.assign({},Vo[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${WE}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const a=Ok(window.location.href);let s="none";if(this._isImplicitGrantCallback(a)?s="implicit":await this._isPKCECallback(a)&&(s="pkce"),ks()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:o}=await this._getSessionFromURL(a,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),jk(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return et(a)?{error:a}:{error:new tS("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var a,s,n;try{const o=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:jr}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(et(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var a,s,n;try{let o;if("email"in t){const{email:f,password:h,options:p}=t;let m=null,b=null;this.flowType==="pkce"&&([m,b]=await Bo(this.storage,this.storageKey)),o=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:f,password:h,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:b},xform:jr})}else if("phone"in t){const{phone:f,password:h,options:p}=t;o=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:h,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},channel:(n=p==null?void 0:p.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:jr})}else throw new Id("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(et(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let a;if("email"in t){const{email:o,password:i,options:l}=t;a=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:w_})}else if("phone"in t){const{phone:o,password:i,options:l}=t;a=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:w_})}else throw new Id("You must provide either an email or phone number and a password");const{data:s,error:n}=a;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Pd}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(a){if(et(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(t){var a,s,n,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:a}=t;if(a==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}async signInWithSolana(t){var a,s,n,o,i,l,c,d,f,h,p,m;let b,x;if("message"in t)b=t.message,x=t.signature;else{const{chain:y,wallet:_,statement:g,options:v}=t;let w;if(ks())if(typeof _=="object")w=_;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))w=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=_}const E=new URL((a=v==null?void 0:v.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in w&&w.signIn){const S=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),g?{statement:g}:null));let T;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")T=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)T=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)b=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),x=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${E.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(n=(s=v==null?void 0:v.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((d=v==null?void 0:v.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(f=v==null?void 0:v.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const S=await w.signMessage(new TextEncoder().encode(b),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=S}}try{const{data:y,error:_}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Tk(x)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:jr});if(_)throw _;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Pd}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:_})}catch(y){if(et(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(t){const a=await Xn(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(a??"").split("/");try{const{data:o,error:i}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:jr});if(await Kr(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Pd}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:n??null}),error:i})}catch(o){if(et(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:a,provider:s,token:n,access_token:o,nonce:i}=t,l=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:jr}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Pd}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(a){if(et(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(t){var a,s,n,o,i;try{if("email"in t){const{email:l,options:c}=t;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Bo(this.storage,this.storageKey));const{error:h}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:f}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f}}throw new Id("You must provide either an email or phone number.")}catch(l){if(et(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var a,s;try{let n,o;"options"in t&&(n=(a=t.options)===null||a===void 0?void 0:a.redirectTo,o=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:i,error:l}=await dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:n,xform:jr});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(et(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var a,s,n;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Bo(this.storage,this.storageKey)),await dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(a=t.options)===null||a===void 0?void 0:a.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:Qk})}catch(o){if(et(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:a},error:s}=t;if(s)throw s;if(!a)throw new Wr;const{error:n}=await dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(et(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const a=`${this.url}/resend`;if("email"in t){const{email:s,type:n,options:o}=t,{error:i}=await dt(this.fetch,"POST",a,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:s,type:n,options:o}=t,{data:i,error:l}=await dt(this.fetch,"POST",a,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new Id("You must provide either an email or phone number and a type")}catch(a){if(et(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(t,a){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await a()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=a();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await t(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const a=await Xn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?t=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<Qh:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const i=await Xn(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=Jh()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,f)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,f))})}return{data:{session:t},error:null}}const{session:n,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:cn}):await this._useSession(async a=>{var s,n,o;const{data:i,error:l}=a;if(l)throw l;return!(!((s=i.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wr}:await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0,xform:cn})})}catch(a){if(et(a))return bk(a)&&(await this._removeSession(),await Kr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(t,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,a))}async _updateUser(t,a={}){try{return await this._useSession(async s=>{const{data:n,error:o}=s;if(o)throw o;if(!n.session)throw new Wr;const i=n.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Bo(this.storage,this.storageKey));const{data:d,error:f}=await dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:cn});if(f)throw f;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(s){if(et(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Wr;const a=Date.now()/1e3;let s=a,n=!0,o=null;const{payload:i}=Xh(t.access_token);if(i.exp&&(s=i.exp,n=s<=a),n){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:s-a,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(a){if(et(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async a=>{var s;if(!t){const{data:i,error:l}=a;if(l)throw l;t=(s=i.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new Wr;const{session:n,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(et(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(t,a){try{if(!ks())throw new Ld("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ld(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new v_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ld("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new v_("No code detected.");const{data:g,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=t;if(!o||!l||!i||!d)throw new Ld("No session defined in URL");const f=Math.round(Date.now()/1e3),h=parseInt(l);let p=f+h;c&&(p=parseInt(c));const m=p-f;m*1e3<=Wo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const b=p-h;f-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,p,f):f-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,p,f);const{data:x,error:y}=await this._getUser(o);if(y)throw y;const _={provider_token:s,provider_refresh_token:n,access_token:o,expires_in:h,expires_at:p,refresh_token:i,token_type:d,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(s){if(et(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const a=await Xn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&a)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async a=>{var s;const{data:n,error:o}=a;if(o)return{error:o};const i=(s=n.session)===null||s===void 0?void 0:s.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(yk(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Kr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const a=Dk(),s={id:a,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async a=>{var s,n;try{const{data:{session:o},error:i}=a;if(i)throw i;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,a={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Bo(this.storage,this.storageKey,!0));try{return await dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(o){if(et(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:a,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=a.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(a){if(et(a))return{data:null,error:a};throw a}}async linkIdentity(t){var a;try{const{data:s,error:n}=await this._useSession(async o=>{var i,l,c,d,f;const{data:h,error:p}=o;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await dt(this.fetch,"GET",m,{headers:this.headers,jwt:(f=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(n)throw n;return ks()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(et(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async a=>{var s,n;const{data:o,error:i}=a;if(i)throw i;return await dt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(a){if(et(a))return{data:null,error:a};throw a}}async _refreshAccessToken(t){const a=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{const s=Date.now();return await kk(async n=>(n>0&&await Mk(200*Math.pow(2,n-1)),this._debug(a,"refreshing attempt",n),await dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:jr})),(n,o)=>{const i=200*Math.pow(2,n);return o&&Kh(o)&&Date.now()+i-s<Wo})}catch(s){if(this._debug(a,"error",s),et(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(a,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,a){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",a,"url",s),ks()&&!a.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,a;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Xn(this.storage,this.storageKey);if(n&&this.userStorage){let i=await Xn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:n.user},await ei(this.userStorage,this.storageKey+"-user",i)),n.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:Jh()}else if(n&&!n.user&&!n.user){const i=await Xn(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(n.user=i.user,await Kr(this.storage,this.storageKey+"-user"),await ei(this.storage,this.storageKey,n)):n.user=Jh()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const o=((a=n.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<Qh;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${Qh}s`),o){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Kh(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(n.access_token);!l&&(i!=null&&i.user)?(n.user=i.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(s,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var a,s;if(!t)throw new Wr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Mf;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new Wr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(n,"error",o),et(o)){const i={session:null,error:o};return Kh(o)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(i),i}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,a,s=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",a,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:a});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,a)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const a=Object.assign({},t),s=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&a.user&&await ei(this.userStorage,this.storageKey+"-user",{user:a.user});const n=Object.assign({},a);delete n.user;const o=b_(n);await ei(this.storage,this.storageKey,o)}else{const n=b_(a);await ei(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await Kr(this.storage,this.storageKey),await Kr(this.storage,this.storageKey+"-code-verifier"),await Kr(this.storage,this.storageKey+"-user"),this.userStorage&&await Kr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ks()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Wo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async a=>{const{data:{session:s}}=a;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-t)/Wo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Wo}ms, refresh threshold is ${Ap} ticks`),n<=Ap&&await this._callRefreshToken(s.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof nS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ks()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const a=`#_onVisibilityChanged(${t})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,a,s){const n=[`provider=${encodeURIComponent(a)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,i]=await Bo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);n.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async a=>{var s;const{data:n,error:o}=a;return o?{data:null,error:o}:await dt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(a){if(et(a))return{data:null,error:a};throw a}}async _enroll(t){try{return await this._useSession(async a=>{var s,n;const{data:o,error:i}=a;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await dt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(a){if(et(a))return{data:null,error:a};throw a}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var s;const{data:n,error:o}=a;if(o)return{data:null,error:o};const{data:i,error:l}=await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(a){if(et(a))return{data:null,error:a};throw a}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var s;const{data:n,error:o}=a;return o?{data:null,error:o}:await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(a){if(et(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(t){const{data:a,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:a.id,code:t.code})}async _listFactors(){const{data:{user:t},error:a}=await this.getUser();if(a)return{data:null,error:a};const s=(t==null?void 0:t.factors)||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=s.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:s,totp:n,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var a,s;const{data:{session:n},error:o}=t;if(o)return{data:null,error:o};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Xh(n.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((s=(a=n.user.factors)===null||a===void 0?void 0:a.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const f=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,a={keys:[]}){let s=a.keys.find(l=>l.kid===t);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+xk>n)return s;const{data:o,error:i}=await dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=n,s=o.keys.find(l=>l.kid===t),!s)?null:s}async getClaims(t,a={}){try{let s=t;if(!s){const{data:m,error:b}=await this.getSession();if(b||!m.session)return{data:null,error:b};s=m.session.access_token}const{header:n,payload:o,signature:i,raw:{header:l,payload:c}}=Xh(s);a!=null&&a.allowExpired||Bk(o.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!d){const{error:m}=await this.getUser(s);if(m)throw m;return{data:{claims:o,header:n,signature:i},error:null}}const f=Uk(n.alg),h=await crypto.subtle.importKey("jwk",d,f,!0,["verify"]);if(!await crypto.subtle.verify(f,h,i,Ak(`${l}.${c}`)))throw new Dp("Invalid JWT signature");return{data:{claims:o,header:n,signature:i},error:null}}catch(s){if(et(s))return{data:null,error:s};throw s}}}Oc.nextInstanceID=0;const nP=Oc;class oP extends nP{constructor(t){super(t)}}var iP=function(e,t,a,s){function n(o){return o instanceof a?o:new a(function(i){i(o)})}return new(a||(a=Promise))(function(o,i){function l(f){try{d(s.next(f))}catch(h){i(h)}}function c(f){try{d(s.throw(f))}catch(h){i(h)}}function d(f){f.done?o(f.value):n(f.value).then(l,c)}d((s=s.apply(e,t||[])).next())})};class lP{constructor(t,a,s){var n,o,i;if(this.supabaseUrl=t,this.supabaseKey=a,!t)throw new Error("supabaseUrl is required.");if(!a)throw new Error("supabaseKey is required.");const l=fk(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:rk,realtime:ok,auth:Object.assign(Object.assign({},nk),{storageKey:d}),global:sk},h=hk(s??{},f);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=h.auth)!==null&&i!==void 0?i:{},this.headers,h.global.fetch),this.fetch=dk(a,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new N4(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new a4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ek(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,a={},s={}){return this.rest.rpc(t,a,s)}channel(t,a={config:{}}){return this.realtime.channel(t,a)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,a;return iP(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(a=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&a!==void 0?a:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:a,detectSessionInUrl:s,storage:n,storageKey:o,flowType:i,lock:l,debug:c},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new oP({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:t,persistSession:a,detectSessionInUrl:s,storage:n,flowType:i,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new q4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,s)=>{this._handleTokenChanged(a,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,a,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const cP=(e,t,a)=>new lP(e,t,a),dP="https://twsnzfzjtjdamwwembzp.supabase.co",uP="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3c256ZnpqdGpkYW13d2VtYnpwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjczMDczODEsImV4cCI6MjA4Mjg4MzM4MX0.EFmjLPT_Mnl4cv2qcH5vq5_zmo47fGWFjQdGGwidsNY",z=cP(dP,uP);function Nt({className:e,size:t=24}){return r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx(HR,{className:Ce("animate-spin text-green-600",e),size:t})})}function fP(){const[e,t]=u.useState({protocolosAbertos:0,receptorasSincronizadas:0,embrioesFrescosDisponiveis:0,embrioesCongeladosEstoque:0}),[a,s]=u.useState(!0);u.useEffect(()=>{n()},[]);const n=async()=>{try{const{count:i}=await z.from("protocolos_sincronizacao").select("*",{count:"exact",head:!0}).is("data_retirada",null),{count:l}=await z.from("protocolo_receptoras").select("*",{count:"exact",head:!0}).in("status",["APTA","SINCRONIZADA"]),{count:c}=await z.from("v_embrioes_disponiveis_te").select("*",{count:"exact",head:!0}).eq("disponivel_fresco_hoje",!0),{count:d}=await z.from("v_embrioes_disponiveis_te").select("*",{count:"exact",head:!0}).eq("disponivel_congelado",!0);t({protocolosAbertos:i||0,receptorasSincronizadas:l||0,embrioesFrescosDisponiveis:c||0,embrioesCongeladosEstoque:d||0})}catch(i){console.error("Erro ao carregar estatsticas:",i)}finally{s(!1)}},o=[{label:"Novo Protocolo",path:"/protocolos/novo",icon:Wv,color:"bg-green-600 hover:bg-green-700"},{label:"Registrar Retirada",path:"/protocolos",icon:qR,color:"bg-blue-600 hover:bg-blue-700"},{label:"Nova Aspirao",path:"/aspiracoes/novo",icon:Iu,color:"bg-purple-600 hover:bg-purple-700"},{label:"Criar Lote FIV",path:"/lotes-fiv/novo",icon:Iu,color:"bg-indigo-600 hover:bg-indigo-700"},{label:"Gerar Embries",path:"/embrioes/novo",icon:go,color:"bg-pink-600 hover:bg-pink-700"},{label:"TE do Protocolo",path:"/transferencia",icon:gf,color:"bg-orange-600 hover:bg-orange-700"},{label:"Lanar DG",path:"/dg",icon:Dw,color:"bg-teal-600 hover:bg-teal-700"},{label:"Lanar Sexagem",path:"/sexagem",icon:Zv,color:"bg-cyan-600 hover:bg-cyan-700"}];return a?r.jsx(Nt,{}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Dashboard"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Viso geral do sistema de FIV/TE"})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Aes Rpidas"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.map(i=>{const l=i.icon;return r.jsx(Qi,{to:i.path,children:r.jsxs(se,{className:`w-full h-24 flex flex-col items-center justify-center gap-2 ${i.color} text-white`,children:[r.jsx(l,{className:"w-6 h-6"}),r.jsx("span",{className:"text-sm font-medium text-center",children:i.label})]})},i.path)})})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Estatsticas"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(Oe,{children:[r.jsxs(Me,{children:[r.jsx(ke,{className:"text-lg",children:"Protocolos Abertos"}),r.jsx(ql,{children:"Em andamento"})]}),r.jsx(ze,{children:r.jsx("p",{className:"text-4xl font-bold text-green-600",children:e.protocolosAbertos})})]}),r.jsxs(Oe,{children:[r.jsxs(Me,{children:[r.jsx(ke,{className:"text-lg",children:"Receptoras Sincronizadas"}),r.jsx(ql,{children:"Aptas para TE"})]}),r.jsx(ze,{children:r.jsx("p",{className:"text-4xl font-bold text-blue-600",children:e.receptorasSincronizadas})})]}),r.jsxs(Oe,{children:[r.jsxs(Me,{children:[r.jsx(ke,{className:"text-lg",children:"Embries Frescos"}),r.jsx(ql,{children:"Disponveis hoje (D7/D8)"})]}),r.jsx(ze,{children:r.jsx("p",{className:"text-4xl font-bold text-purple-600",children:e.embrioesFrescosDisponiveis})})]}),r.jsxs(Oe,{children:[r.jsxs(Me,{children:[r.jsx(ke,{className:"text-lg",children:"Embries Congelados"}),r.jsx(ql,{children:"Em estoque"})]}),r.jsx(ze,{children:r.jsx("p",{className:"text-4xl font-bold text-cyan-600",children:e.embrioesCongeladosEstoque})})]})]})]})]})}const yt=u.forwardRef(({className:e,...t},a)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:a,className:Ce("w-full caption-bottom text-sm",e),...t})}));yt.displayName="Table";const bt=u.forwardRef(({className:e,...t},a)=>r.jsx("thead",{ref:a,className:Ce("[&_tr]:border-b",e),...t}));bt.displayName="TableHeader";const jt=u.forwardRef(({className:e,...t},a)=>r.jsx("tbody",{ref:a,className:Ce("[&_tr:last-child]:border-0",e),...t}));jt.displayName="TableBody";const hP=u.forwardRef(({className:e,...t},a)=>r.jsx("tfoot",{ref:a,className:Ce("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));hP.displayName="TableFooter";const Re=u.forwardRef(({className:e,...t},a)=>r.jsx("tr",{ref:a,className:Ce("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Re.displayName="TableRow";const K=u.forwardRef(({className:e,...t},a)=>r.jsx("th",{ref:a,className:Ce("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));K.displayName="TableHead";const Y=u.forwardRef(({className:e,...t},a)=>r.jsx("td",{ref:a,className:Ce("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Y.displayName="TableCell";const mP=u.forwardRef(({className:e,...t},a)=>r.jsx("caption",{ref:a,className:Ce("mt-4 text-sm text-muted-foreground",e),...t}));mP.displayName="TableCaption";function pP(){const[e,t]=u.useState([]),[a,s]=u.useState(!0),{toast:n}=aa();u.useEffect(()=>{o()},[]);const o=async()=>{try{const{data:i,error:l}=await z.from("clientes").select("*").order("nome",{ascending:!0});if(l)throw l;t(i||[])}catch(i){n({title:"Erro ao carregar clientes",description:i instanceof Error?i.message:"Erro desconhecido",variant:"destructive"})}finally{s(!1)}};return a?r.jsx(Nt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Clientes"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar clientes do sistema"})]}),r.jsx(Qi,{to:"/clientes/novo",children:r.jsxs(se,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Us,{className:"w-4 h-4 mr-2"}),"Novo Cliente"]})})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Lista de Clientes"})}),r.jsx(ze,{children:r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Nome"}),r.jsx(K,{children:"Telefone"}),r.jsx(K,{children:"Endereo"}),r.jsx(K,{children:"Cadastrado em"}),r.jsx(K,{className:"text-right",children:"Aes"})]})}),r.jsx(jt,{children:e.length===0?r.jsx(Re,{children:r.jsx(Y,{colSpan:5,className:"text-center text-slate-500",children:"Nenhum cliente cadastrado"})}):e.map(i=>r.jsxs(Re,{children:[r.jsx(Y,{className:"font-medium",children:i.nome}),r.jsx(Y,{children:i.telefone||"-"}),r.jsx(Y,{children:i.endereco||"-"}),r.jsx(Y,{children:i.created_at?new Date(i.created_at).toLocaleDateString("pt-BR"):"-"}),r.jsx(Y,{className:"text-right",children:r.jsx(Qi,{to:`/clientes/${i.id}`,children:r.jsx(se,{variant:"ghost",size:"sm",children:r.jsx(Qv,{className:"w-4 h-4"})})})})]},i.id))})]})})]})]})}const _e=u.forwardRef(({className:e,type:t,...a},s)=>r.jsx("input",{type:t,className:Ce("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...a}));_e.displayName="Input";var vP="Label",oS=u.forwardRef((e,t)=>r.jsx(Be.label,{...e,ref:t,onMouseDown:a=>{var n;a.target.closest("button, input, select, textarea")||((n=e.onMouseDown)==null||n.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));oS.displayName=vP;var iS=oS;const gP=hl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),te=u.forwardRef(({className:e,...t},a)=>r.jsx(iS,{ref:a,className:Ce(gP(),e),...t}));te.displayName=iS.displayName;const Ma=u.forwardRef(({className:e,...t},a)=>r.jsx("textarea",{className:Ce("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));Ma.displayName="Textarea";function N_(){const{id:e}=Br(),t=Ca(),{toast:a}=aa(),[s,n]=u.useState(!1),[o,i]=u.useState({nome:"",telefone:"",endereco:""});u.useEffect(()=>{e&&l()},[e]);const l=async()=>{try{n(!0);const{data:d,error:f}=await z.from("clientes").select("*").eq("id",e).single();if(f)throw f;d&&i({nome:d.nome||"",telefone:d.telefone||"",endereco:d.endereco||""})}catch(d){a({title:"Erro ao carregar cliente",description:d instanceof Error?d.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},c=async d=>{if(d.preventDefault(),!o.nome.trim()){a({title:"Erro de validao",description:"Nome  obrigatrio",variant:"destructive"});return}try{if(n(!0),e){const{error:f}=await z.from("clientes").update(o).eq("id",e);if(f)throw f;a({title:"Cliente atualizado",description:"Cliente atualizado com sucesso"})}else{const{error:f}=await z.from("clientes").insert([o]);if(f)throw f;a({title:"Cliente criado",description:"Cliente criado com sucesso"})}t("/clientes")}catch(f){a({title:"Erro ao salvar cliente",description:f instanceof Error?f.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}};return s&&e?r.jsx(Nt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>t("/clientes"),children:r.jsx(Wa,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:e?"Editar Cliente":"Novo Cliente"}),r.jsx("p",{className:"text-slate-600 mt-1",children:e?"Atualizar informaes do cliente":"Cadastrar novo cliente"})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Informaes do Cliente"})}),r.jsx(ze,{children:r.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"nome",children:"Nome *"}),r.jsx(_e,{id:"nome",value:o.nome,onChange:d=>i({...o,nome:d.target.value}),placeholder:"Nome do cliente",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"telefone",children:"Telefone"}),r.jsx(_e,{id:"telefone",value:o.telefone,onChange:d=>i({...o,telefone:d.target.value}),placeholder:"(00) 00000-0000"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"endereco",children:"Endereo"}),r.jsx(Ma,{id:"endereco",value:o.endereco,onChange:d=>i({...o,endereco:d.target.value}),placeholder:"Endereo completo",rows:3})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx(se,{type:"submit",className:"bg-green-600 hover:bg-green-700",disabled:s,children:s?"Salvando...":"Salvar"}),r.jsx(se,{type:"button",variant:"outline",onClick:()=>t("/clientes"),disabled:s,children:"Cancelar"})]})]})})]})]})}var em="focusScope.autoFocusOnMount",tm="focusScope.autoFocusOnUnmount",C_={bubbles:!1,cancelable:!0},xP="FocusScope",kf=u.forwardRef((e,t)=>{const{loop:a=!1,trapped:s=!1,onMountAutoFocus:n,onUnmountAutoFocus:o,...i}=e,[l,c]=u.useState(null),d=Ts(n),f=Ts(o),h=u.useRef(null),p=_t(t,x=>c(x)),m=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(s){let x=function(v){if(m.paused||!l)return;const w=v.target;l.contains(w)?h.current=w:en(h.current,{select:!0})},y=function(v){if(m.paused||!l)return;const w=v.relatedTarget;w!==null&&(l.contains(w)||en(h.current,{select:!0}))},_=function(v){if(document.activeElement===document.body)for(const E of v)E.removedNodes.length>0&&en(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",y);const g=new MutationObserver(_);return l&&g.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",y),g.disconnect()}}},[s,l,m.paused]),u.useEffect(()=>{if(l){T_.add(m);const x=document.activeElement;if(!l.contains(x)){const _=new CustomEvent(em,C_);l.addEventListener(em,d),l.dispatchEvent(_),_.defaultPrevented||(_P(EP(lS(l)),{select:!0}),document.activeElement===x&&en(l))}return()=>{l.removeEventListener(em,d),setTimeout(()=>{const _=new CustomEvent(tm,C_);l.addEventListener(tm,f),l.dispatchEvent(_),_.defaultPrevented||en(x??document.body,{select:!0}),l.removeEventListener(tm,f),T_.remove(m)},0)}}},[l,d,f,m]);const b=u.useCallback(x=>{if(!a&&!s||m.paused)return;const y=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,_=document.activeElement;if(y&&_){const g=x.currentTarget,[v,w]=yP(g);v&&w?!x.shiftKey&&_===w?(x.preventDefault(),a&&en(v,{select:!0})):x.shiftKey&&_===v&&(x.preventDefault(),a&&en(w,{select:!0})):_===g&&x.preventDefault()}},[a,s,m.paused]);return r.jsx(Be.div,{tabIndex:-1,...i,ref:p,onKeyDown:b})});kf.displayName=xP;function _P(e,{select:t=!1}={}){const a=document.activeElement;for(const s of e)if(en(s,{select:t}),document.activeElement!==a)return}function yP(e){const t=lS(e),a=A_(t,e),s=A_(t.reverse(),e);return[a,s]}function lS(e){const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function A_(e,t){for(const a of e)if(!bP(a,{upTo:t}))return a}function bP(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function jP(e){return e instanceof HTMLInputElement&&"select"in e}function en(e,{select:t=!1}={}){if(e&&e.focus){const a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&jP(e)&&t&&e.select()}}var T_=wP();function wP(){let e=[];return{add(t){const a=e[0];t!==a&&(a==null||a.pause()),e=R_(e,t),e.unshift(t)},remove(t){var a;e=R_(e,t),(a=e[0])==null||a.resume()}}}function R_(e,t){const a=[...e],s=a.indexOf(t);return s!==-1&&a.splice(s,1),a}function EP(e){return e.filter(t=>t.tagName!=="A")}var am=0;function Sg(){u.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??D_()),document.body.insertAdjacentElement("beforeend",e[1]??D_()),am++,()=>{am===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),am--}},[])}function D_(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var tr=function(){return tr=Object.assign||function(t){for(var a,s=1,n=arguments.length;s<n;s++){a=arguments[s];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},tr.apply(this,arguments)};function cS(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]]);return a}function SP(e,t,a){if(a||arguments.length===2)for(var s=0,n=t.length,o;s<n;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var nu="right-scroll-bar-position",ou="width-before-scroll-bar",NP="with-scroll-bars-hidden",CP="--removed-body-scroll-bar-size";function sm(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function AP(e,t){var a=u.useState(function(){return{value:e,callback:t,facade:{get current(){return a.value},set current(s){var n=a.value;n!==s&&(a.value=s,a.callback(s,n))}}}})[0];return a.callback=t,a.facade}var TP=typeof window<"u"?u.useLayoutEffect:u.useEffect,O_=new WeakMap;function RP(e,t){var a=AP(null,function(s){return e.forEach(function(n){return sm(n,s)})});return TP(function(){var s=O_.get(a);if(s){var n=new Set(s),o=new Set(e),i=a.current;n.forEach(function(l){o.has(l)||sm(l,null)}),o.forEach(function(l){n.has(l)||sm(l,i)})}O_.set(a,e)},[e]),a}function DP(e){return e}function OP(e,t){t===void 0&&(t=DP);var a=[],s=!1,n={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:e},useMedium:function(o){var i=t(o,s);return a.push(i),function(){a=a.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(s=!0;a.length;){var i=a;a=[],i.forEach(o)}a={push:function(l){return o(l)},filter:function(){return a}}},assignMedium:function(o){s=!0;var i=[];if(a.length){var l=a;a=[],l.forEach(o),i=a}var c=function(){var f=i;i=[],f.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),a={push:function(f){i.push(f),d()},filter:function(f){return i=i.filter(f),a}}}};return n}function zP(e){e===void 0&&(e={});var t=OP(null);return t.options=tr({async:!0,ssr:!1},e),t}var dS=function(e){var t=e.sideCar,a=cS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return u.createElement(s,tr({},a))};dS.isSideCarExport=!0;function MP(e,t){return e.useMedium(t),dS}var uS=zP(),rm=function(){},Pf=u.forwardRef(function(e,t){var a=u.useRef(null),s=u.useState({onScrollCapture:rm,onWheelCapture:rm,onTouchMoveCapture:rm}),n=s[0],o=s[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,f=e.enabled,h=e.shards,p=e.sideCar,m=e.noRelative,b=e.noIsolation,x=e.inert,y=e.allowPinchZoom,_=e.as,g=_===void 0?"div":_,v=e.gapMode,w=cS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=p,S=RP([a,t]),T=tr(tr({},w),n);return u.createElement(u.Fragment,null,f&&u.createElement(E,{sideCar:uS,removeScrollBar:d,shards:h,noRelative:m,noIsolation:b,inert:x,setCallbacks:o,allowPinchZoom:!!y,lockRef:a,gapMode:v}),i?u.cloneElement(u.Children.only(l),tr(tr({},T),{ref:S})):u.createElement(g,tr({},T,{className:c,ref:S}),l))});Pf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Pf.classNames={fullWidth:ou,zeroRight:nu};var kP=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function PP(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=kP();return t&&e.setAttribute("nonce",t),e}function IP(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function LP(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var FP=function(){var e=0,t=null;return{add:function(a){e==0&&(t=PP())&&(IP(t,a),LP(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},$P=function(){var e=FP();return function(t,a){u.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&a])}},fS=function(){var e=$P(),t=function(a){var s=a.styles,n=a.dynamic;return e(s,n),null};return t},qP={left:0,top:0,right:0,gap:0},nm=function(e){return parseInt(e||"",10)||0},BP=function(e){var t=window.getComputedStyle(document.body),a=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],n=t[e==="padding"?"paddingRight":"marginRight"];return[nm(a),nm(s),nm(n)]},UP=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return qP;var t=BP(e),a=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-a+t[2]-t[0])}},HP=fS(),Si="data-scroll-locked",VP=function(e,t,a,s){var n=e.left,o=e.top,i=e.right,l=e.gap;return a===void 0&&(a="margin"),`
  .`.concat(NP,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Si,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),a==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),a==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(nu,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(ou,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(nu," .").concat(nu,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(ou," .").concat(ou,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Si,`] {
    `).concat(CP,": ").concat(l,`px;
  }
`)},z_=function(){var e=parseInt(document.body.getAttribute(Si)||"0",10);return isFinite(e)?e:0},GP=function(){u.useEffect(function(){return document.body.setAttribute(Si,(z_()+1).toString()),function(){var e=z_()-1;e<=0?document.body.removeAttribute(Si):document.body.setAttribute(Si,e.toString())}},[])},ZP=function(e){var t=e.noRelative,a=e.noImportant,s=e.gapMode,n=s===void 0?"margin":s;GP();var o=u.useMemo(function(){return UP(n)},[n]);return u.createElement(HP,{styles:VP(o,!t,n,a?"":"!important")})},Op=!1;if(typeof window<"u")try{var Fd=Object.defineProperty({},"passive",{get:function(){return Op=!0,!0}});window.addEventListener("test",Fd,Fd),window.removeEventListener("test",Fd,Fd)}catch{Op=!1}var Go=Op?{passive:!1}:!1,YP=function(e){return e.tagName==="TEXTAREA"},hS=function(e,t){if(!(e instanceof Element))return!1;var a=window.getComputedStyle(e);return a[t]!=="hidden"&&!(a.overflowY===a.overflowX&&!YP(e)&&a[t]==="visible")},QP=function(e){return hS(e,"overflowY")},KP=function(e){return hS(e,"overflowX")},M_=function(e,t){var a=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var n=mS(e,s);if(n){var o=pS(e,s),i=o[1],l=o[2];if(i>l)return!0}s=s.parentNode}while(s&&s!==a.body);return!1},XP=function(e){var t=e.scrollTop,a=e.scrollHeight,s=e.clientHeight;return[t,a,s]},JP=function(e){var t=e.scrollLeft,a=e.scrollWidth,s=e.clientWidth;return[t,a,s]},mS=function(e,t){return e==="v"?QP(t):KP(t)},pS=function(e,t){return e==="v"?XP(t):JP(t)},WP=function(e,t){return e==="h"&&t==="rtl"?-1:1},eI=function(e,t,a,s,n){var o=WP(e,window.getComputedStyle(t).direction),i=o*s,l=a.target,c=t.contains(l),d=!1,f=i>0,h=0,p=0;do{if(!l)break;var m=pS(e,l),b=m[0],x=m[1],y=m[2],_=x-y-o*b;(b||_)&&mS(e,l)&&(h+=_,p+=b);var g=l.parentNode;l=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&Math.abs(h)<1||!f&&Math.abs(p)<1)&&(d=!0),d},$d=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},k_=function(e){return[e.deltaX,e.deltaY]},P_=function(e){return e&&"current"in e?e.current:e},tI=function(e,t){return e[0]===t[0]&&e[1]===t[1]},aI=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},sI=0,Zo=[];function rI(e){var t=u.useRef([]),a=u.useRef([0,0]),s=u.useRef(),n=u.useState(sI++)[0],o=u.useState(fS)[0],i=u.useRef(e);u.useEffect(function(){i.current=e},[e]),u.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(n));var x=SP([e.lockRef.current],(e.shards||[]).map(P_),!0).filter(Boolean);return x.forEach(function(y){return y.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),x.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(n))})}}},[e.inert,e.lockRef.current,e.shards]);var l=u.useCallback(function(x,y){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!i.current.allowPinchZoom;var _=$d(x),g=a.current,v="deltaX"in x?x.deltaX:g[0]-_[0],w="deltaY"in x?x.deltaY:g[1]-_[1],E,S=x.target,T=Math.abs(v)>Math.abs(w)?"h":"v";if("touches"in x&&T==="h"&&S.type==="range")return!1;var q=M_(T,S);if(!q)return!0;if(q?E=T:(E=T==="v"?"h":"v",q=M_(T,S)),!q)return!1;if(!s.current&&"changedTouches"in x&&(v||w)&&(s.current=E),!E)return!0;var k=s.current||E;return eI(k,y,x,k==="h"?v:w)},[]),c=u.useCallback(function(x){var y=x;if(!(!Zo.length||Zo[Zo.length-1]!==o)){var _="deltaY"in y?k_(y):$d(y),g=t.current.filter(function(E){return E.name===y.type&&(E.target===y.target||y.target===E.shadowParent)&&tI(E.delta,_)})[0];if(g&&g.should){y.cancelable&&y.preventDefault();return}if(!g){var v=(i.current.shards||[]).map(P_).filter(Boolean).filter(function(E){return E.contains(y.target)}),w=v.length>0?l(y,v[0]):!i.current.noIsolation;w&&y.cancelable&&y.preventDefault()}}},[]),d=u.useCallback(function(x,y,_,g){var v={name:x,delta:y,target:_,should:g,shadowParent:nI(_)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(w){return w!==v})},1)},[]),f=u.useCallback(function(x){a.current=$d(x),s.current=void 0},[]),h=u.useCallback(function(x){d(x.type,k_(x),x.target,l(x,e.lockRef.current))},[]),p=u.useCallback(function(x){d(x.type,$d(x),x.target,l(x,e.lockRef.current))},[]);u.useEffect(function(){return Zo.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Go),document.addEventListener("touchmove",c,Go),document.addEventListener("touchstart",f,Go),function(){Zo=Zo.filter(function(x){return x!==o}),document.removeEventListener("wheel",c,Go),document.removeEventListener("touchmove",c,Go),document.removeEventListener("touchstart",f,Go)}},[]);var m=e.removeScrollBar,b=e.inert;return u.createElement(u.Fragment,null,b?u.createElement(o,{styles:aI(n)}):null,m?u.createElement(ZP,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function nI(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const oI=MP(uS,rI);var If=u.forwardRef(function(e,t){return u.createElement(Pf,tr({},e,{ref:t,sideCar:oI}))});If.classNames=Pf.classNames;var iI=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Yo=new WeakMap,qd=new WeakMap,Bd={},om=0,vS=function(e){return e&&(e.host||vS(e.parentNode))},lI=function(e,t){return t.map(function(a){if(e.contains(a))return a;var s=vS(a);return s&&e.contains(s)?s:(console.error("aria-hidden",a,"in not contained inside",e,". Doing nothing"),null)}).filter(function(a){return!!a})},cI=function(e,t,a,s){var n=lI(t,Array.isArray(e)?e:[e]);Bd[a]||(Bd[a]=new WeakMap);var o=Bd[a],i=[],l=new Set,c=new Set(n),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};n.forEach(d);var f=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(p){if(l.has(p))f(p);else try{var m=p.getAttribute(s),b=m!==null&&m!=="false",x=(Yo.get(p)||0)+1,y=(o.get(p)||0)+1;Yo.set(p,x),o.set(p,y),i.push(p),x===1&&b&&qd.set(p,!0),y===1&&p.setAttribute(a,"true"),b||p.setAttribute(s,"true")}catch(_){console.error("aria-hidden: cannot operate on ",p,_)}})};return f(t),l.clear(),om++,function(){i.forEach(function(h){var p=Yo.get(h)-1,m=o.get(h)-1;Yo.set(h,p),o.set(h,m),p||(qd.has(h)||h.removeAttribute(s),qd.delete(h)),m||h.removeAttribute(a)}),om--,om||(Yo=new WeakMap,Yo=new WeakMap,qd=new WeakMap,Bd={})}},Ng=function(e,t,a){a===void 0&&(a="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),n=iI(e);return n?(s.push.apply(s,Array.from(n.querySelectorAll("[aria-live], script"))),cI(s,n,a,"aria-hidden")):function(){return null}},Lf="Dialog",[gS,xS]=vs(Lf),[dI,Zs]=gS(Lf),_S=e=>{const{__scopeDialog:t,children:a,open:s,defaultOpen:n,onOpenChange:o,modal:i=!0}=e,l=u.useRef(null),c=u.useRef(null),[d,f]=Rs({prop:s,defaultProp:n??!1,onChange:o,caller:Lf});return r.jsx(dI,{scope:t,triggerRef:l,contentRef:c,contentId:qa(),titleId:qa(),descriptionId:qa(),open:d,onOpenChange:f,onOpenToggle:u.useCallback(()=>f(h=>!h),[f]),modal:i,children:a})};_S.displayName=Lf;var yS="DialogTrigger",bS=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=Zs(yS,a),o=_t(t,n.triggerRef);return r.jsx(Be.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Tg(n.open),...s,ref:o,onClick:qe(e.onClick,n.onOpenToggle)})});bS.displayName=yS;var Cg="DialogPortal",[uI,jS]=gS(Cg,{forceMount:void 0}),wS=e=>{const{__scopeDialog:t,forceMount:a,children:s,container:n}=e,o=Zs(Cg,t);return r.jsx(uI,{scope:t,forceMount:a,children:u.Children.map(s,i=>r.jsx(ur,{present:a||o.open,children:r.jsx(ed,{asChild:!0,container:n,children:i})}))})};wS.displayName=Cg;var Zu="DialogOverlay",ES=u.forwardRef((e,t)=>{const a=jS(Zu,e.__scopeDialog),{forceMount:s=a.forceMount,...n}=e,o=Zs(Zu,e.__scopeDialog);return o.modal?r.jsx(ur,{present:s||o.open,children:r.jsx(hI,{...n,ref:t})}):null});ES.displayName=Zu;var fI=Eo("DialogOverlay.RemoveScroll"),hI=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=Zs(Zu,a);return r.jsx(If,{as:fI,allowPinchZoom:!0,shards:[n.contentRef],children:r.jsx(Be.div,{"data-state":Tg(n.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),No="DialogContent",SS=u.forwardRef((e,t)=>{const a=jS(No,e.__scopeDialog),{forceMount:s=a.forceMount,...n}=e,o=Zs(No,e.__scopeDialog);return r.jsx(ur,{present:s||o.open,children:o.modal?r.jsx(mI,{...n,ref:t}):r.jsx(pI,{...n,ref:t})})});SS.displayName=No;var mI=u.forwardRef((e,t)=>{const a=Zs(No,e.__scopeDialog),s=u.useRef(null),n=_t(t,a.contentRef,s);return u.useEffect(()=>{const o=s.current;if(o)return Ng(o)},[]),r.jsx(NS,{...e,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qe(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=a.triggerRef.current)==null||i.focus()}),onPointerDownOutside:qe(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:qe(e.onFocusOutside,o=>o.preventDefault())})}),pI=u.forwardRef((e,t)=>{const a=Zs(No,e.__scopeDialog),s=u.useRef(!1),n=u.useRef(!1);return r.jsx(NS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=a.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const i=o.target;((d=a.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&n.current&&o.preventDefault()}})}),NS=u.forwardRef((e,t)=>{const{__scopeDialog:a,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:o,...i}=e,l=Zs(No,a),c=u.useRef(null),d=_t(t,c);return Sg(),r.jsxs(r.Fragment,{children:[r.jsx(kf,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:o,children:r.jsx(fl,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Tg(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(gI,{titleId:l.titleId}),r.jsx(_I,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Ag="DialogTitle",CS=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=Zs(Ag,a);return r.jsx(Be.h2,{id:n.titleId,...s,ref:t})});CS.displayName=Ag;var AS="DialogDescription",TS=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=Zs(AS,a);return r.jsx(Be.p,{id:n.descriptionId,...s,ref:t})});TS.displayName=AS;var RS="DialogClose",DS=u.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,n=Zs(RS,a);return r.jsx(Be.button,{type:"button",...s,ref:t,onClick:qe(e.onClick,()=>n.onOpenChange(!1))})});DS.displayName=RS;function Tg(e){return e?"open":"closed"}var OS="DialogTitleWarning",[vI,zS]=UT(OS,{contentName:No,titleName:Ag,docsSlug:"dialog"}),gI=({titleId:e})=>{const t=zS(OS),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return u.useEffect(()=>{e&&(document.getElementById(e)||console.error(a))},[a,e]),null},xI="DialogDescriptionWarning",_I=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${zS(xI).contentName}}.`;return u.useEffect(()=>{var o;const n=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&n&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},Ff=_S,MS=bS,$f=wS,yl=ES,bl=SS,dd=CS,ud=TS,qf=DS;const ea=Ff,Fr=MS,yI=$f,kS=u.forwardRef(({className:e,...t},a)=>r.jsx(yl,{ref:a,className:Ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));kS.displayName=yl.displayName;const Zt=u.forwardRef(({className:e,children:t,...a},s)=>r.jsxs(yI,{children:[r.jsx(kS,{}),r.jsxs(bl,{ref:s,className:Ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,r.jsxs(qf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(Ds,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Zt.displayName=bl.displayName;const Yt=({className:e,...t})=>r.jsx("div",{className:Ce("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Yt.displayName="DialogHeader";const PS=({className:e,...t})=>r.jsx("div",{className:Ce("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});PS.displayName="DialogFooter";const Qt=u.forwardRef(({className:e,...t},a)=>r.jsx(dd,{ref:a,className:Ce("text-lg font-semibold leading-none tracking-tight",e),...t}));Qt.displayName=dd.displayName;const ta=u.forwardRef(({className:e,...t},a)=>r.jsx(ud,{ref:a,className:Ce("text-sm text-muted-foreground",e),...t}));ta.displayName=ud.displayName;var bI=u.createContext(void 0);function Bf(e){const t=u.useContext(bI);return e||t||"ltr"}var im="rovingFocusGroup.onEntryFocus",jI={bubbles:!1,cancelable:!0},fd="RovingFocusGroup",[zp,IS,wI]=Uv(fd),[EI,Uf]=vs(fd,[wI]),[SI,NI]=EI(fd),LS=u.forwardRef((e,t)=>r.jsx(zp.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(zp.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(CI,{...e,ref:t})})}));LS.displayName=fd;var CI=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,orientation:s,loop:n=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...h}=e,p=u.useRef(null),m=_t(t,p),b=Bf(o),[x,y]=Rs({prop:i,defaultProp:l??null,onChange:c,caller:fd}),[_,g]=u.useState(!1),v=Ts(d),w=IS(a),E=u.useRef(!1),[S,T]=u.useState(0);return u.useEffect(()=>{const q=p.current;if(q)return q.addEventListener(im,v),()=>q.removeEventListener(im,v)},[v]),r.jsx(SI,{scope:a,orientation:s,dir:b,loop:n,currentTabStopId:x,onItemFocus:u.useCallback(q=>y(q),[y]),onItemShiftTab:u.useCallback(()=>g(!0),[]),onFocusableItemAdd:u.useCallback(()=>T(q=>q+1),[]),onFocusableItemRemove:u.useCallback(()=>T(q=>q-1),[]),children:r.jsx(Be.div,{tabIndex:_||S===0?-1:0,"data-orientation":s,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:qe(e.onMouseDown,()=>{E.current=!0}),onFocus:qe(e.onFocus,q=>{const k=!E.current;if(q.target===q.currentTarget&&k&&!_){const $=new CustomEvent(im,jI);if(q.currentTarget.dispatchEvent($),!$.defaultPrevented){const Z=w().filter(N=>N.focusable),W=Z.find(N=>N.active),le=Z.find(N=>N.id===x),D=[W,le,...Z].filter(Boolean).map(N=>N.ref.current);qS(D,f)}}E.current=!1}),onBlur:qe(e.onBlur,()=>g(!1))})})}),FS="RovingFocusGroupItem",$S=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,focusable:s=!0,active:n=!1,tabStopId:o,children:i,...l}=e,c=qa(),d=o||c,f=NI(FS,a),h=f.currentTabStopId===d,p=IS(a),{onFocusableItemAdd:m,onFocusableItemRemove:b,currentTabStopId:x}=f;return u.useEffect(()=>{if(s)return m(),()=>b()},[s,m,b]),r.jsx(zp.ItemSlot,{scope:a,id:d,focusable:s,active:n,children:r.jsx(Be.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:qe(e.onMouseDown,y=>{s?f.onItemFocus(d):y.preventDefault()}),onFocus:qe(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:qe(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){f.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const _=RI(y,f.orientation,f.dir);if(_!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let v=p().filter(w=>w.focusable).map(w=>w.ref.current);if(_==="last")v.reverse();else if(_==="prev"||_==="next"){_==="prev"&&v.reverse();const w=v.indexOf(y.currentTarget);v=f.loop?DI(v,w+1):v.slice(w+1)}setTimeout(()=>qS(v))}}),children:typeof i=="function"?i({isCurrentTabStop:h,hasTabStop:x!=null}):i})})});$S.displayName=FS;var AI={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function TI(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function RI(e,t,a){const s=TI(e.key,a);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return AI[s]}function qS(e,t=!1){const a=document.activeElement;for(const s of e)if(s===a||(s.focus({preventScroll:t}),document.activeElement!==a))return}function DI(e,t){return e.map((a,s)=>e[(t+s)%e.length])}var BS=LS,US=$S,Hf="Tabs",[OI,h3]=vs(Hf,[Uf]),HS=Uf(),[zI,Rg]=OI(Hf),VS=u.forwardRef((e,t)=>{const{__scopeTabs:a,value:s,onValueChange:n,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...d}=e,f=Bf(l),[h,p]=Rs({prop:s,onChange:n,defaultProp:o??"",caller:Hf});return r.jsx(zI,{scope:a,baseId:qa(),value:h,onValueChange:p,orientation:i,dir:f,activationMode:c,children:r.jsx(Be.div,{dir:f,"data-orientation":i,...d,ref:t})})});VS.displayName=Hf;var GS="TabsList",ZS=u.forwardRef((e,t)=>{const{__scopeTabs:a,loop:s=!0,...n}=e,o=Rg(GS,a),i=HS(a);return r.jsx(BS,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:s,children:r.jsx(Be.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:t})})});ZS.displayName=GS;var YS="TabsTrigger",QS=u.forwardRef((e,t)=>{const{__scopeTabs:a,value:s,disabled:n=!1,...o}=e,i=Rg(YS,a),l=HS(a),c=JS(i.baseId,s),d=WS(i.baseId,s),f=s===i.value;return r.jsx(US,{asChild:!0,...l,focusable:!n,active:f,children:r.jsx(Be.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:c,...o,ref:t,onMouseDown:qe(e.onMouseDown,h=>{!n&&h.button===0&&h.ctrlKey===!1?i.onValueChange(s):h.preventDefault()}),onKeyDown:qe(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(s)}),onFocus:qe(e.onFocus,()=>{const h=i.activationMode!=="manual";!f&&!n&&h&&i.onValueChange(s)})})})});QS.displayName=YS;var KS="TabsContent",XS=u.forwardRef((e,t)=>{const{__scopeTabs:a,value:s,forceMount:n,children:o,...i}=e,l=Rg(KS,a),c=JS(l.baseId,s),d=WS(l.baseId,s),f=s===l.value,h=u.useRef(f);return u.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),r.jsx(ur,{present:n||f,children:({present:p})=>r.jsx(Be.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&o})})});XS.displayName=KS;function JS(e,t){return`${e}-trigger-${t}`}function WS(e,t){return`${e}-content-${t}`}var MI=VS,eN=ZS,tN=QS,aN=XS;const sN=MI,Dg=u.forwardRef(({className:e,...t},a)=>r.jsx(eN,{ref:a,className:Ce("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Dg.displayName=eN.displayName;const zc=u.forwardRef(({className:e,...t},a)=>r.jsx(tN,{ref:a,className:Ce("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));zc.displayName=tN.displayName;const Mc=u.forwardRef(({className:e,...t},a)=>r.jsx(aN,{ref:a,className:Ce("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Mc.displayName=aN.displayName;function kI(){const{id:e}=Br(),t=Ca(),{toast:a}=aa(),[s,n]=u.useState(!0),[o,i]=u.useState(null),[l,c]=u.useState([]),[d,f]=u.useState([]),[h,p]=u.useState(!1),[m,b]=u.useState(!1),[x,y]=u.useState({nome:"",localizacao:"",latitude:"",longitude:"",responsavel:"",contato_responsavel:""});u.useEffect(()=>{e&&_()},[e]);const _=async()=>{try{n(!0);const{data:E,error:S}=await z.from("clientes").select("*").eq("id",e).single();if(S)throw S;i(E);const{data:T,error:q}=await z.from("fazendas").select("*").eq("cliente_id",e).order("nome",{ascending:!0});if(q)throw q;c(T||[]);const{data:k,error:$}=await z.from("doses_semen").select("*").eq("cliente_id",e).order("nome",{ascending:!0});if($)throw $;f(k||[])}catch(E){a({title:"Erro ao carregar dados",description:E instanceof Error?E.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},g=E=>E.latitude&&E.longitude?`https://www.google.com/maps?q=${E.latitude},${E.longitude}`:E.localizacao?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(E.localizacao)}`:null,v=E=>E.latitude&&E.longitude?`https://waze.com/ul?ll=${E.latitude},${E.longitude}&navigate=yes`:E.localizacao?g(E):null,w=async E=>{if(E.preventDefault(),!x.nome.trim()){a({title:"Erro de validao",description:"Nome da fazenda  obrigatrio",variant:"destructive"});return}try{b(!0);const S={cliente_id:e,nome:x.nome,localizacao:x.localizacao.trim()||null,latitude:x.latitude?parseFloat(x.latitude):null,longitude:x.longitude?parseFloat(x.longitude):null,responsavel:x.responsavel.trim()||null,contato_responsavel:x.contato_responsavel.trim()||null},{error:T}=await z.from("fazendas").insert([S]);if(T)throw T;a({title:"Fazenda criada",description:"Fazenda criada com sucesso"}),p(!1),y({nome:"",localizacao:"",latitude:"",longitude:"",responsavel:"",contato_responsavel:""}),_()}catch(S){const T=S instanceof Error?S.message:"Erro desconhecido";a({title:"Erro ao criar fazenda",description:T.includes("RLS")||T.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":T,variant:"destructive"})}finally{b(!1)}};return s?r.jsx(Nt,{}):o?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>t("/clientes"),children:r.jsx(Wa,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:o.nome}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Detalhes do cliente"})]})]}),r.jsx(Qi,{to:`/clientes/${e}/editar`,children:r.jsxs(se,{variant:"outline",children:[r.jsx(Sc,{className:"w-4 h-4 mr-2"}),"Editar"]})})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Informaes do Cliente"})}),r.jsxs(ze,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Nome"}),r.jsx("p",{className:"text-base text-slate-900",children:o.nome})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Telefone"}),r.jsx("p",{className:"text-base text-slate-900",children:o.telefone||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Endereo"}),r.jsx("p",{className:"text-base text-slate-900",children:o.endereco||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Cadastrado em"}),r.jsx("p",{className:"text-base text-slate-900",children:o.created_at?new Date(o.created_at).toLocaleDateString("pt-BR"):"-"})]})]})]}),r.jsxs(sN,{defaultValue:"fazendas",className:"w-full",children:[r.jsxs(Dg,{children:[r.jsxs(zc,{value:"fazendas",children:[r.jsx(Tw,{className:"w-4 h-4 mr-2"}),"Fazendas (",l.length,")"]}),r.jsxs(zc,{value:"doses",children:[r.jsx(go,{className:"w-4 h-4 mr-2"}),"Doses de Smen (",d.length,")"]})]}),r.jsx(Mc,{value:"fazendas",children:r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ke,{children:"Fazendas do Cliente"}),r.jsxs(ea,{open:h,onOpenChange:p,children:[r.jsx(Fr,{asChild:!0,children:r.jsxs(se,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Us,{className:"w-4 h-4 mr-2"}),"Nova Fazenda"]})}),r.jsxs(Zt,{className:"max-w-md",children:[r.jsxs(Yt,{children:[r.jsx(Qt,{children:"Criar Nova Fazenda"}),r.jsxs(ta,{children:["Criar fazenda para ",o.nome]})]}),r.jsxs("form",{onSubmit:w,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"nome",children:"Nome da Fazenda *"}),r.jsx(_e,{id:"nome",value:x.nome,onChange:E=>y({...x,nome:E.target.value}),placeholder:"Nome da fazenda",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"localizacao",children:"Localizao"}),r.jsx(_e,{id:"localizacao",value:x.localizacao,onChange:E=>y({...x,localizacao:E.target.value}),placeholder:"Cidade, Estado"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"latitude",children:"Latitude"}),r.jsx(_e,{id:"latitude",type:"number",step:"any",value:x.latitude,onChange:E=>y({...x,latitude:E.target.value}),placeholder:"-23.550520"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"longitude",children:"Longitude"}),r.jsx(_e,{id:"longitude",type:"number",step:"any",value:x.longitude,onChange:E=>y({...x,longitude:E.target.value}),placeholder:"-46.633308"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"responsavel",children:"Responsvel"}),r.jsx(_e,{id:"responsavel",value:x.responsavel,onChange:E=>y({...x,responsavel:E.target.value}),placeholder:"Nome do responsvel"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"contato_responsavel",children:"Contato do Responsvel"}),r.jsx(_e,{id:"contato_responsavel",value:x.contato_responsavel,onChange:E=>y({...x,contato_responsavel:E.target.value}),placeholder:"Telefone ou email"})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(se,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:m,children:m?"Salvando...":"Criar Fazenda"}),r.jsx(se,{type:"button",variant:"outline",onClick:()=>p(!1),disabled:m,children:"Cancelar"})]})]})]})]})]})}),r.jsx(ze,{children:r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Nome"}),r.jsx(K,{children:"Localizao"}),r.jsx(K,{children:"Responsvel"}),r.jsx(K,{children:"Contato"}),r.jsx(K,{className:"text-right",children:"Aes"})]})}),r.jsx(jt,{children:l.length===0?r.jsx(Re,{children:r.jsx(Y,{colSpan:5,className:"text-center text-slate-500",children:"Nenhuma fazenda cadastrada"})}):l.map(E=>r.jsxs(Re,{children:[r.jsx(Y,{className:"font-medium",children:r.jsx(Qi,{to:`/fazendas/${E.id}`,className:"text-green-600 hover:text-green-700 hover:underline",children:E.nome})}),r.jsx(Y,{children:E.localizacao||"-"}),r.jsx(Y,{children:E.responsavel||"-"}),r.jsx(Y,{children:E.contato_responsavel||"-"}),r.jsx(Y,{className:"text-right",children:r.jsxs("div",{className:"flex gap-2 justify-end",children:[g(E)&&r.jsxs(se,{variant:"outline",size:"sm",onClick:()=>window.open(g(E),"_blank"),children:[r.jsx(Xv,{className:"w-4 h-4 mr-1"}),"Maps"]}),v(E)&&r.jsxs(se,{variant:"outline",size:"sm",onClick:()=>window.open(v(E),"_blank"),children:[r.jsx(Rw,{className:"w-4 h-4 mr-1"}),"Waze"]})]})})]},E.id))})]})})]})}),r.jsx(Mc,{value:"doses",children:r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Doses de Smen"})}),r.jsx(ze,{children:r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Nome (Touro)"}),r.jsx(K,{children:"Raa"}),r.jsx(K,{children:"Tipo"}),r.jsx(K,{children:"Quantidade"})]})}),r.jsx(jt,{children:d.length===0?r.jsx(Re,{children:r.jsx(Y,{colSpan:4,className:"text-center text-slate-500",children:"Nenhuma dose de smen cadastrada"})}):d.map(E=>r.jsxs(Re,{children:[r.jsx(Y,{className:"font-medium",children:E.nome}),r.jsx(Y,{children:E.raca||"-"}),r.jsx(Y,{children:E.tipo_semen||"-"}),r.jsx(Y,{children:E.quantidade??"-"})]},E.id))})]})})]})})]})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Cliente no encontrado"}),r.jsx(se,{onClick:()=>t("/clientes"),className:"mt-4",children:"Voltar para Clientes"})]})}function PI(){const[e,t]=u.useState([]),[a,s]=u.useState(!0),{toast:n}=aa(),o=Ca();u.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const{data:l,error:c}=await z.from("fazendas").select("*").order("nome",{ascending:!0});if(c)throw c;const d=[...new Set(l==null?void 0:l.map(b=>b.cliente_id))],{data:f,error:h}=await z.from("clientes").select("id, nome").in("id",d);if(h)throw h;const p=new Map(f==null?void 0:f.map(b=>[b.id,b.nome])),m=l==null?void 0:l.map(b=>({...b,cliente_nome:p.get(b.cliente_id)}));t(m||[])}catch(l){n({title:"Erro ao carregar dados",description:l instanceof Error?l.message:"Erro desconhecido",variant:"destructive"})}finally{s(!1)}};return a?r.jsx(Nt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Fazendas"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar fazendas do sistema"})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Lista de Fazendas"})}),r.jsx(ze,{children:r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Nome"}),r.jsx(K,{children:"Cliente"}),r.jsx(K,{children:"Responsvel"}),r.jsx(K,{children:"Contato"}),r.jsx(K,{children:"Localizao"})]})}),r.jsx(jt,{children:e.length===0?r.jsx(Re,{children:r.jsx(Y,{colSpan:5,className:"text-center text-slate-500",children:"Nenhuma fazenda cadastrada"})}):e.map(l=>r.jsxs(Re,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>o(`/fazendas/${l.id}`),children:[r.jsx(Y,{className:"font-medium text-green-600",children:l.nome}),r.jsx(Y,{children:l.cliente_nome||"-"}),r.jsx(Y,{children:l.responsavel||"-"}),r.jsx(Y,{children:l.contato_responsavel||"-"}),r.jsx(Y,{children:l.localizacao||"-"})]},l.id))})]})})]})]})}const II=hl("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Qe({className:e,variant:t,...a}){return r.jsx("div",{className:Ce(II({variant:t}),e),...a})}function LI(){const{id:e}=Br(),t=Ca(),{toast:a}=aa(),[s,n]=u.useState(!0),[o,i]=u.useState(null),[l,c]=u.useState(""),[d,f]=u.useState([]),[h,p]=u.useState([]),[m,b]=u.useState([]),[x,y]=u.useState([]),[_,g]=u.useState({total_ultimos_60_dias:0,sem_diagnostico:0});u.useEffect(()=>{e&&v()},[e]);const v=async()=>{try{n(!0);const{data:S,error:T}=await z.from("fazendas").select("*").eq("id",e).single();if(T)throw T;i(S);const{data:q,error:k}=await z.from("clientes").select("nome").eq("id",S.cliente_id).single();if(k)throw k;c(q.nome);const{data:$,error:Z}=await z.from("protocolos_sincronizacao").select("id, data_inicio, data_retirada, status").eq("fazenda_id",e).in("status",["PASSO1_FECHADO","PRIMEIRO_PASSO_FECHADO","SINCRONIZADO","FECHADO"]).order("data_inicio",{ascending:!1});if(Z)throw Z;f($||[]);try{const{data:P,error:H}=await z.from("v_protocolo_receptoras_status").select("*").in("protocolo_id",($==null?void 0:$.map(V=>V.id))||[]).eq("fase_ciclo","SINCRONIZADA");!H&&P&&p(P.map(V=>({brinco:V.brinco,fase_ciclo:V.fase_ciclo,status_efetivo:V.status_efetivo,motivo_efetivo:V.motivo_efetivo,data_te_prevista:V.data_te_prevista,data_limite_te:V.data_limite_te})))}catch{console.log("View v_protocolo_receptoras_status not available")}const{data:W,error:le}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",e);if(le)throw le;const O=(W==null?void 0:W.map(P=>P.receptora_id))||[],D=new Date;D.setDate(D.getDate()-60);const{data:N,error:F}=await z.from("transferencias_embrioes").select("id, receptora_id, data_te").in("receptora_id",O.length>0?O:["00000000-0000-0000-0000-000000000000"]).gte("data_te",D.toISOString().split("T")[0]);if(F)throw F;const I=(N==null?void 0:N.length)||0;if(N&&N.length>0){const P=N.map(ae=>ae.receptora_id),{data:H,error:V}=await z.from("diagnosticos_gestacao").select("receptora_id").in("receptora_id",P);if(!V){const ae=new Set(H==null?void 0:H.map(be=>be.receptora_id)),G=N.filter(be=>!ae.has(be.receptora_id)).length;g({total_ultimos_60_dias:I,sem_diagnostico:G})}}const{data:j,error:A}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",e);if(!A&&j){const P=j.map(H=>H.receptora_id);if(P.length>0){const{data:H,error:V}=await z.from("receptoras").select("id, identificacao, nome, status_reprodutivo").in("id",P).order("identificacao",{ascending:!0});V||b((H==null?void 0:H.map(ae=>({receptora_id:ae.id,brinco:ae.identificacao,nome:ae.nome,status_reprodutivo:ae.status_reprodutivo})))||[])}else b([])}const{data:L,error:R}=await z.from("doadoras").select("*").eq("fazenda_id",e).order("registro",{ascending:!0});if(R)throw R;y(L||[])}catch(S){a({title:"Erro ao carregar dados",description:S instanceof Error?S.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},w=()=>o?o.latitude&&o.longitude?`https://www.google.com/maps?q=${o.latitude},${o.longitude}`:o.localizacao?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(o.localizacao)}`:null:null,E=()=>o?o.latitude&&o.longitude?`https://waze.com/ul?ll=${o.latitude},${o.longitude}&navigate=yes`:o.localizacao?w():null:null;return s?r.jsx(Nt,{}):o?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>t("/fazendas"),children:r.jsx(Wa,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:o.nome}),r.jsxs("p",{className:"text-slate-600 mt-1",children:["Cliente: ",l]})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Informaes da Fazenda"})}),r.jsxs(ze,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Nome"}),r.jsx("p",{className:"text-base text-slate-900",children:o.nome})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Cliente"}),r.jsx("p",{className:"text-base text-slate-900",children:l})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Localizao"}),r.jsx("p",{className:"text-base text-slate-900",children:o.localizacao||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Coordenadas"}),r.jsx("p",{className:"text-base text-slate-900",children:o.latitude&&o.longitude?`${o.latitude}, ${o.longitude}`:"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Responsvel"}),r.jsx("p",{className:"text-base text-slate-900",children:o.responsavel||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Contato"}),r.jsx("p",{className:"text-base text-slate-900",children:o.contato_responsavel||"-"})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[w()&&r.jsxs(se,{variant:"outline",onClick:()=>window.open(w(),"_blank"),children:[r.jsx(Xv,{className:"w-4 h-4 mr-2"}),"Abrir no Google Maps"]}),E()&&r.jsxs(se,{variant:"outline",onClick:()=>window.open(E(),"_blank"),children:[r.jsx(Rw,{className:"w-4 h-4 mr-2"}),"Abrir no Waze"]})]})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Servios Ativos na Fazenda"})}),r.jsxs(ze,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[r.jsx(up,{className:"w-5 h-5"}),"Protocolos em Andamento (",d.length,")"]}),d.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"Nenhum protocolo ativo"}):r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"ID"}),r.jsx(K,{children:"Data Incio"}),r.jsx(K,{children:"Data Retirada"}),r.jsx(K,{children:"Status"})]})}),r.jsx(jt,{children:d.map(S=>r.jsxs(Re,{children:[r.jsx(Y,{className:"font-mono text-xs",children:S.id.substring(0,8)}),r.jsx(Y,{children:new Date(S.data_inicio).toLocaleDateString("pt-BR")}),r.jsx(Y,{children:S.data_retirada?new Date(S.data_retirada).toLocaleDateString("pt-BR"):"-"}),r.jsx(Y,{children:r.jsx(Qe,{variant:"default",children:S.status||"N/A"})})]},S.id))})]})]}),h.length>0&&r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold mb-3",children:["Receptoras Sincronizadas Aguardando TE (",h.length,")"]}),r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Brinco"}),r.jsx(K,{children:"Fase"}),r.jsx(K,{children:"Status"}),r.jsx(K,{children:"Data TE Prevista"})]})}),r.jsx(jt,{children:h.map((S,T)=>r.jsxs(Re,{children:[r.jsx(Y,{className:"font-medium",children:S.brinco}),r.jsx(Y,{children:S.fase_ciclo||"-"}),r.jsx(Y,{children:S.status_efetivo||"-"}),r.jsx(Y,{children:S.data_te_prevista?new Date(S.data_te_prevista).toLocaleDateString("pt-BR"):"-"})]},T))})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Transferncias Recentes"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(Oe,{children:r.jsxs(ze,{className:"pt-6",children:[r.jsx("p",{className:"text-2xl font-bold text-slate-900",children:_.total_ultimos_60_dias}),r.jsx("p",{className:"text-sm text-slate-500",children:"ltimos 60 dias"})]})}),r.jsx(Oe,{children:r.jsxs(ze,{className:"pt-6",children:[r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:_.sem_diagnostico}),r.jsx("p",{className:"text-sm text-slate-500",children:"Aguardando diagnstico"})]})})]})]})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Cw,{className:"w-5 h-5"}),"Receptoras da Fazenda (",m.length,")"]})}),r.jsx(ze,{children:m.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"Nenhuma receptora vinculada"}):r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Brinco"}),r.jsx(K,{children:"Nome"}),r.jsx(K,{children:"Status Reprodutivo"})]})}),r.jsx(jt,{children:m.map(S=>r.jsxs(Re,{children:[r.jsx(Y,{className:"font-medium",children:S.brinco}),r.jsx(Y,{children:S.nome||"-"}),r.jsx(Y,{children:S.status_reprodutivo||"-"})]},S.receptora_id))})]})})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(go,{className:"w-5 h-5"}),"Doadoras da Fazenda (",x.length,")"]})}),r.jsx(ze,{children:x.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"Nenhuma doadora cadastrada"}):r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Registro"}),r.jsx(K,{children:"Nome"}),r.jsx(K,{children:"Raa"}),r.jsx(K,{children:"GPTA"}),r.jsx(K,{children:"Controle Leiteiro"}),r.jsx(K,{children:"Beta Casena"})]})}),r.jsx(jt,{children:x.map(S=>r.jsxs(Re,{children:[r.jsx(Y,{className:"font-medium",children:S.registro}),r.jsx(Y,{children:S.nome||"-"}),r.jsx(Y,{children:S.raca||"-"}),r.jsx(Y,{children:S.gpta||"-"}),r.jsx(Y,{children:S.controle_leiteiro||"-"}),r.jsx(Y,{children:S.beta_caseina||"-"})]},S.id))})]})})]})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Fazenda no encontrada"}),r.jsx(se,{onClick:()=>t("/fazendas"),className:"mt-4",children:"Voltar para Fazendas"})]})}function I_(e,[t,a]){return Math.min(a,Math.max(t,e))}function Og(e){const t=u.useRef({value:e,previous:e});return u.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var FI=[" ","Enter","ArrowUp","ArrowDown"],$I=[" ","Enter"],Co="Select",[Vf,Gf,qI]=Uv(Co),[jl,m3]=vs(Co,[qI,gl]),Zf=gl(),[BI,$n]=jl(Co),[UI,HI]=jl(Co),rN=e=>{const{__scopeSelect:t,children:a,open:s,defaultOpen:n,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:d,name:f,autoComplete:h,disabled:p,required:m,form:b}=e,x=Zf(t),[y,_]=u.useState(null),[g,v]=u.useState(null),[w,E]=u.useState(!1),S=Bf(d),[T,q]=Rs({prop:s,defaultProp:n??!1,onChange:o,caller:Co}),[k,$]=Rs({prop:i,defaultProp:l,onChange:c,caller:Co}),Z=u.useRef(null),W=y?b||!!y.closest("form"):!0,[le,O]=u.useState(new Set),D=Array.from(le).map(N=>N.props.value).join(";");return r.jsx(cE,{...x,children:r.jsxs(BI,{required:m,scope:t,trigger:y,onTriggerChange:_,valueNode:g,onValueNodeChange:v,valueNodeHasChildren:w,onValueNodeHasChildrenChange:E,contentId:qa(),value:k,onValueChange:$,open:T,onOpenChange:q,dir:S,triggerPointerDownPosRef:Z,disabled:p,children:[r.jsx(Vf.Provider,{scope:t,children:r.jsx(UI,{scope:e.__scopeSelect,onNativeOptionAdd:u.useCallback(N=>{O(F=>new Set(F).add(N))},[]),onNativeOptionRemove:u.useCallback(N=>{O(F=>{const I=new Set(F);return I.delete(N),I})},[]),children:a})}),W?r.jsxs(AN,{"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:h,value:k,onChange:N=>$(N.target.value),disabled:p,form:b,children:[k===void 0?r.jsx("option",{value:""}):null,Array.from(le)]},D):null]})})};rN.displayName=Co;var nN="SelectTrigger",oN=u.forwardRef((e,t)=>{const{__scopeSelect:a,disabled:s=!1,...n}=e,o=Zf(a),i=$n(nN,a),l=i.disabled||s,c=_t(t,i.onTriggerChange),d=Gf(a),f=u.useRef("touch"),[h,p,m]=RN(x=>{const y=d().filter(v=>!v.disabled),_=y.find(v=>v.value===i.value),g=DN(y,x,_);g!==void 0&&i.onValueChange(g.value)}),b=x=>{l||(i.onOpenChange(!0),m()),x&&(i.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return r.jsx(jf,{asChild:!0,...o,children:r.jsx(Be.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":TN(i.value)?"":void 0,...n,ref:c,onClick:qe(n.onClick,x=>{x.currentTarget.focus(),f.current!=="mouse"&&b(x)}),onPointerDown:qe(n.onPointerDown,x=>{f.current=x.pointerType;const y=x.target;y.hasPointerCapture(x.pointerId)&&y.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(b(x),x.preventDefault())}),onKeyDown:qe(n.onKeyDown,x=>{const y=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&p(x.key),!(y&&x.key===" ")&&FI.includes(x.key)&&(b(),x.preventDefault())})})})});oN.displayName=nN;var iN="SelectValue",lN=u.forwardRef((e,t)=>{const{__scopeSelect:a,className:s,style:n,children:o,placeholder:i="",...l}=e,c=$n(iN,a),{onValueNodeHasChildrenChange:d}=c,f=o!==void 0,h=_t(t,c.onValueNodeChange);return Na(()=>{d(f)},[d,f]),r.jsx(Be.span,{...l,ref:h,style:{pointerEvents:"none"},children:TN(c.value)?r.jsx(r.Fragment,{children:i}):o})});lN.displayName=iN;var VI="SelectIcon",cN=u.forwardRef((e,t)=>{const{__scopeSelect:a,children:s,...n}=e;return r.jsx(Be.span,{"aria-hidden":!0,...n,ref:t,children:s||""})});cN.displayName=VI;var GI="SelectPortal",dN=e=>r.jsx(ed,{asChild:!0,...e});dN.displayName=GI;var Ao="SelectContent",uN=u.forwardRef((e,t)=>{const a=$n(Ao,e.__scopeSelect),[s,n]=u.useState();if(Na(()=>{n(new DocumentFragment)},[]),!a.open){const o=s;return o?Ro.createPortal(r.jsx(fN,{scope:e.__scopeSelect,children:r.jsx(Vf.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),o):null}return r.jsx(hN,{...e,ref:t})});uN.displayName=Ao;var Ps=10,[fN,qn]=jl(Ao),ZI="SelectContentImpl",YI=Eo("SelectContent.RemoveScroll"),hN=u.forwardRef((e,t)=>{const{__scopeSelect:a,position:s="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:b,hideWhenDetached:x,avoidCollisions:y,..._}=e,g=$n(Ao,a),[v,w]=u.useState(null),[E,S]=u.useState(null),T=_t(t,G=>w(G)),[q,k]=u.useState(null),[$,Z]=u.useState(null),W=Gf(a),[le,O]=u.useState(!1),D=u.useRef(!1);u.useEffect(()=>{if(v)return Ng(v)},[v]),Sg();const N=u.useCallback(G=>{const[be,...de]=W().map(B=>B.ref.current),[U]=de.slice(-1),ie=document.activeElement;for(const B of G)if(B===ie||(B==null||B.scrollIntoView({block:"nearest"}),B===be&&E&&(E.scrollTop=0),B===U&&E&&(E.scrollTop=E.scrollHeight),B==null||B.focus(),document.activeElement!==ie))return},[W,E]),F=u.useCallback(()=>N([q,v]),[N,q,v]);u.useEffect(()=>{le&&F()},[le,F]);const{onOpenChange:I,triggerPointerDownPosRef:j}=g;u.useEffect(()=>{if(v){let G={x:0,y:0};const be=U=>{var ie,B;G={x:Math.abs(Math.round(U.pageX)-(((ie=j.current)==null?void 0:ie.x)??0)),y:Math.abs(Math.round(U.pageY)-(((B=j.current)==null?void 0:B.y)??0))}},de=U=>{G.x<=10&&G.y<=10?U.preventDefault():v.contains(U.target)||I(!1),document.removeEventListener("pointermove",be),j.current=null};return j.current!==null&&(document.addEventListener("pointermove",be),document.addEventListener("pointerup",de,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",be),document.removeEventListener("pointerup",de,{capture:!0})}}},[v,I,j]),u.useEffect(()=>{const G=()=>I(!1);return window.addEventListener("blur",G),window.addEventListener("resize",G),()=>{window.removeEventListener("blur",G),window.removeEventListener("resize",G)}},[I]);const[A,L]=RN(G=>{const be=W().filter(ie=>!ie.disabled),de=be.find(ie=>ie.ref.current===document.activeElement),U=DN(be,G,de);U&&setTimeout(()=>U.ref.current.focus())}),R=u.useCallback((G,be,de)=>{const U=!D.current&&!de;(g.value!==void 0&&g.value===be||U)&&(k(G),U&&(D.current=!0))},[g.value]),P=u.useCallback(()=>v==null?void 0:v.focus(),[v]),H=u.useCallback((G,be,de)=>{const U=!D.current&&!de;(g.value!==void 0&&g.value===be||U)&&Z(G)},[g.value]),V=s==="popper"?Mp:mN,ae=V===Mp?{side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:b,hideWhenDetached:x,avoidCollisions:y}:{};return r.jsx(fN,{scope:a,content:v,viewport:E,onViewportChange:S,itemRefCallback:R,selectedItem:q,onItemLeave:P,itemTextRefCallback:H,focusSelectedItem:F,selectedItemText:$,position:s,isPositioned:le,searchRef:A,children:r.jsx(If,{as:YI,allowPinchZoom:!0,children:r.jsx(kf,{asChild:!0,trapped:g.open,onMountAutoFocus:G=>{G.preventDefault()},onUnmountAutoFocus:qe(n,G=>{var be;(be=g.trigger)==null||be.focus({preventScroll:!0}),G.preventDefault()}),children:r.jsx(fl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:G=>G.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:r.jsx(V,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:G=>G.preventDefault(),..._,...ae,onPlaced:()=>O(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:qe(_.onKeyDown,G=>{const be=G.ctrlKey||G.altKey||G.metaKey;if(G.key==="Tab"&&G.preventDefault(),!be&&G.key.length===1&&L(G.key),["ArrowUp","ArrowDown","Home","End"].includes(G.key)){let U=W().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(G.key)&&(U=U.slice().reverse()),["ArrowUp","ArrowDown"].includes(G.key)){const ie=G.target,B=U.indexOf(ie);U=U.slice(B+1)}setTimeout(()=>N(U)),G.preventDefault()}})})})})})})});hN.displayName=ZI;var QI="SelectItemAlignedPosition",mN=u.forwardRef((e,t)=>{const{__scopeSelect:a,onPlaced:s,...n}=e,o=$n(Ao,a),i=qn(Ao,a),[l,c]=u.useState(null),[d,f]=u.useState(null),h=_t(t,T=>f(T)),p=Gf(a),m=u.useRef(!1),b=u.useRef(!0),{viewport:x,selectedItem:y,selectedItemText:_,focusSelectedItem:g}=i,v=u.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&x&&y&&_){const T=o.trigger.getBoundingClientRect(),q=d.getBoundingClientRect(),k=o.valueNode.getBoundingClientRect(),$=_.getBoundingClientRect();if(o.dir!=="rtl"){const ie=$.left-q.left,B=k.left-ie,oe=T.left-B,je=T.width+oe,me=Math.max(je,q.width),Ne=window.innerWidth-Ps,Ae=I_(B,[Ps,Math.max(Ps,Ne-me)]);l.style.minWidth=je+"px",l.style.left=Ae+"px"}else{const ie=q.right-$.right,B=window.innerWidth-k.right-ie,oe=window.innerWidth-T.right-B,je=T.width+oe,me=Math.max(je,q.width),Ne=window.innerWidth-Ps,Ae=I_(B,[Ps,Math.max(Ps,Ne-me)]);l.style.minWidth=je+"px",l.style.right=Ae+"px"}const Z=p(),W=window.innerHeight-Ps*2,le=x.scrollHeight,O=window.getComputedStyle(d),D=parseInt(O.borderTopWidth,10),N=parseInt(O.paddingTop,10),F=parseInt(O.borderBottomWidth,10),I=parseInt(O.paddingBottom,10),j=D+N+le+I+F,A=Math.min(y.offsetHeight*5,j),L=window.getComputedStyle(x),R=parseInt(L.paddingTop,10),P=parseInt(L.paddingBottom,10),H=T.top+T.height/2-Ps,V=W-H,ae=y.offsetHeight/2,G=y.offsetTop+ae,be=D+N+G,de=j-be;if(be<=H){const ie=Z.length>0&&y===Z[Z.length-1].ref.current;l.style.bottom="0px";const B=d.clientHeight-x.offsetTop-x.offsetHeight,oe=Math.max(V,ae+(ie?P:0)+B+F),je=be+oe;l.style.height=je+"px"}else{const ie=Z.length>0&&y===Z[0].ref.current;l.style.top="0px";const oe=Math.max(H,D+x.offsetTop+(ie?R:0)+ae)+de;l.style.height=oe+"px",x.scrollTop=be-H+x.offsetTop}l.style.margin=`${Ps}px 0`,l.style.minHeight=A+"px",l.style.maxHeight=W+"px",s==null||s(),requestAnimationFrame(()=>m.current=!0)}},[p,o.trigger,o.valueNode,l,d,x,y,_,o.dir,s]);Na(()=>v(),[v]);const[w,E]=u.useState();Na(()=>{d&&E(window.getComputedStyle(d).zIndex)},[d]);const S=u.useCallback(T=>{T&&b.current===!0&&(v(),g==null||g(),b.current=!1)},[v,g]);return r.jsx(XI,{scope:a,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:r.jsx(Be.div,{...n,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});mN.displayName=QI;var KI="SelectPopperPosition",Mp=u.forwardRef((e,t)=>{const{__scopeSelect:a,align:s="start",collisionPadding:n=Ps,...o}=e,i=Zf(a);return r.jsx(ug,{...i,...o,ref:t,align:s,collisionPadding:n,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Mp.displayName=KI;var[XI,zg]=jl(Ao,{}),kp="SelectViewport",pN=u.forwardRef((e,t)=>{const{__scopeSelect:a,nonce:s,...n}=e,o=qn(kp,a),i=zg(kp,a),l=_t(t,o.onViewportChange),c=u.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(Vf.Slot,{scope:a,children:r.jsx(Be.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:qe(n.onScroll,d=>{const f=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=i;if(p!=null&&p.current&&h){const m=Math.abs(c.current-f.scrollTop);if(m>0){const b=window.innerHeight-Ps*2,x=parseFloat(h.style.minHeight),y=parseFloat(h.style.height),_=Math.max(x,y);if(_<b){const g=_+m,v=Math.min(b,g),w=g-v;h.style.height=v+"px",h.style.bottom==="0px"&&(f.scrollTop=w>0?w:0,h.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});pN.displayName=kp;var vN="SelectGroup",[JI,WI]=jl(vN),e6=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e,n=qa();return r.jsx(JI,{scope:a,id:n,children:r.jsx(Be.div,{role:"group","aria-labelledby":n,...s,ref:t})})});e6.displayName=vN;var gN="SelectLabel",xN=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e,n=WI(gN,a);return r.jsx(Be.div,{id:n.id,...s,ref:t})});xN.displayName=gN;var Yu="SelectItem",[t6,_N]=jl(Yu),yN=u.forwardRef((e,t)=>{const{__scopeSelect:a,value:s,disabled:n=!1,textValue:o,...i}=e,l=$n(Yu,a),c=qn(Yu,a),d=l.value===s,[f,h]=u.useState(o??""),[p,m]=u.useState(!1),b=_t(t,g=>{var v;return(v=c.itemRefCallback)==null?void 0:v.call(c,g,s,n)}),x=qa(),y=u.useRef("touch"),_=()=>{n||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(t6,{scope:a,value:s,disabled:n,textId:x,isSelected:d,onItemTextChange:u.useCallback(g=>{h(v=>v||((g==null?void 0:g.textContent)??"").trim())},[]),children:r.jsx(Vf.ItemSlot,{scope:a,value:s,disabled:n,textValue:f,children:r.jsx(Be.div,{role:"option","aria-labelledby":x,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...i,ref:b,onFocus:qe(i.onFocus,()=>m(!0)),onBlur:qe(i.onBlur,()=>m(!1)),onClick:qe(i.onClick,()=>{y.current!=="mouse"&&_()}),onPointerUp:qe(i.onPointerUp,()=>{y.current==="mouse"&&_()}),onPointerDown:qe(i.onPointerDown,g=>{y.current=g.pointerType}),onPointerMove:qe(i.onPointerMove,g=>{var v;y.current=g.pointerType,n?(v=c.onItemLeave)==null||v.call(c):y.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:qe(i.onPointerLeave,g=>{var v;g.currentTarget===document.activeElement&&((v=c.onItemLeave)==null||v.call(c))}),onKeyDown:qe(i.onKeyDown,g=>{var w;((w=c.searchRef)==null?void 0:w.current)!==""&&g.key===" "||($I.includes(g.key)&&_(),g.key===" "&&g.preventDefault())})})})})});yN.displayName=Yu;var Ul="SelectItemText",bN=u.forwardRef((e,t)=>{const{__scopeSelect:a,className:s,style:n,...o}=e,i=$n(Ul,a),l=qn(Ul,a),c=_N(Ul,a),d=HI(Ul,a),[f,h]=u.useState(null),p=_t(t,_=>h(_),c.onItemTextChange,_=>{var g;return(g=l.itemTextRefCallback)==null?void 0:g.call(l,_,c.value,c.disabled)}),m=f==null?void 0:f.textContent,b=u.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:x,onNativeOptionRemove:y}=d;return Na(()=>(x(b),()=>y(b)),[x,y,b]),r.jsxs(r.Fragment,{children:[r.jsx(Be.span,{id:c.textId,...o,ref:p}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Ro.createPortal(o.children,i.valueNode):null]})});bN.displayName=Ul;var jN="SelectItemIndicator",wN=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e;return _N(jN,a).isSelected?r.jsx(Be.span,{"aria-hidden":!0,...s,ref:t}):null});wN.displayName=jN;var Pp="SelectScrollUpButton",EN=u.forwardRef((e,t)=>{const a=qn(Pp,e.__scopeSelect),s=zg(Pp,e.__scopeSelect),[n,o]=u.useState(!1),i=_t(t,s.onScrollButtonChange);return Na(()=>{if(a.viewport&&a.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=a.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[a.viewport,a.isPositioned]),n?r.jsx(NN,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=a;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});EN.displayName=Pp;var Ip="SelectScrollDownButton",SN=u.forwardRef((e,t)=>{const a=qn(Ip,e.__scopeSelect),s=zg(Ip,e.__scopeSelect),[n,o]=u.useState(!1),i=_t(t,s.onScrollButtonChange);return Na(()=>{if(a.viewport&&a.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<d;o(f)};const c=a.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[a.viewport,a.isPositioned]),n?r.jsx(NN,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=a;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});SN.displayName=Ip;var NN=u.forwardRef((e,t)=>{const{__scopeSelect:a,onAutoScroll:s,...n}=e,o=qn("SelectScrollButton",a),i=u.useRef(null),l=Gf(a),c=u.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return u.useEffect(()=>()=>c(),[c]),Na(()=>{var f;const d=l().find(h=>h.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),r.jsx(Be.div,{"aria-hidden":!0,...n,ref:t,style:{flexShrink:0,...n.style},onPointerDown:qe(n.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(s,50))}),onPointerMove:qe(n.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),i.current===null&&(i.current=window.setInterval(s,50))}),onPointerLeave:qe(n.onPointerLeave,()=>{c()})})}),a6="SelectSeparator",CN=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e;return r.jsx(Be.div,{"aria-hidden":!0,...s,ref:t})});CN.displayName=a6;var Lp="SelectArrow",s6=u.forwardRef((e,t)=>{const{__scopeSelect:a,...s}=e,n=Zf(a),o=$n(Lp,a),i=qn(Lp,a);return o.open&&i.position==="popper"?r.jsx(fg,{...n,...s,ref:t}):null});s6.displayName=Lp;var r6="SelectBubbleInput",AN=u.forwardRef(({__scopeSelect:e,value:t,...a},s)=>{const n=u.useRef(null),o=_t(s,n),i=Og(t);return u.useEffect(()=>{const l=n.current;if(!l)return;const c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&f){const h=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(h)}},[i,t]),r.jsx(Be.select,{...a,style:{...rw,...a.style},ref:o,defaultValue:t})});AN.displayName=r6;function TN(e){return e===""||e===void 0}function RN(e){const t=Ts(e),a=u.useRef(""),s=u.useRef(0),n=u.useCallback(i=>{const l=a.current+i;t(l),function c(d){a.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=u.useCallback(()=>{a.current="",window.clearTimeout(s.current)},[]);return u.useEffect(()=>()=>window.clearTimeout(s.current),[]),[a,n,o]}function DN(e,t,a){const n=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=a?e.indexOf(a):-1;let i=n6(e,Math.max(o,0));n.length===1&&(i=i.filter(d=>d!==a));const c=i.find(d=>d.textValue.toLowerCase().startsWith(n.toLowerCase()));return c!==a?c:void 0}function n6(e,t){return e.map((a,s)=>e[(t+s)%e.length])}var o6=rN,ON=oN,i6=lN,l6=cN,c6=dN,zN=uN,d6=pN,MN=xN,kN=yN,u6=bN,f6=wN,PN=EN,IN=SN,LN=CN;const ht=o6,mt=i6,lt=u.forwardRef(({className:e,children:t,...a},s)=>r.jsxs(ON,{ref:s,className:Ce("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,r.jsx(l6,{asChild:!0,children:r.jsx(Yv,{className:"h-4 w-4 opacity-50"})})]}));lt.displayName=ON.displayName;const FN=u.forwardRef(({className:e,...t},a)=>r.jsx(PN,{ref:a,className:Ce("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(Aw,{className:"h-4 w-4"})}));FN.displayName=PN.displayName;const $N=u.forwardRef(({className:e,...t},a)=>r.jsx(IN,{ref:a,className:Ce("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(Yv,{className:"h-4 w-4"})}));$N.displayName=IN.displayName;const ct=u.forwardRef(({className:e,children:t,position:a="popper",...s},n)=>r.jsx(c6,{children:r.jsxs(zN,{ref:n,className:Ce("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...s,children:[r.jsx(FN,{}),r.jsx(d6,{className:Ce("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx($N,{})]})}));ct.displayName=zN.displayName;const h6=u.forwardRef(({className:e,...t},a)=>r.jsx(MN,{ref:a,className:Ce("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));h6.displayName=MN.displayName;const Pe=u.forwardRef(({className:e,children:t,...a},s)=>r.jsxs(kN,{ref:s,className:Ce("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(f6,{children:r.jsx(Ec,{className:"h-4 w-4"})})}),r.jsx(u6,{children:t})]}));Pe.displayName=kN.displayName;const m6=u.forwardRef(({className:e,...t},a)=>r.jsx(LN,{ref:a,className:Ce("-mx-1 my-1 h-px bg-muted",e),...t}));m6.displayName=LN.displayName;function p6({doadoraId:e,doadoraNome:t,open:a,onClose:s}){const[n,o]=u.useState([]),[i,l]=u.useState(!1),{toast:c}=aa();u.useEffect(()=>{a&&e&&d()},[a,e]);const d=async()=>{try{l(!0);const{data:f,error:h}=await z.from("aspiracoes_doadoras").select("*").eq("doadora_id",e).order("data_aspiracao",{ascending:!1});if(h)throw h;o(f||[])}catch(f){c({title:"Erro ao carregar histrico",description:f instanceof Error?f.message:"Erro desconhecido",variant:"destructive"})}finally{l(!1)}};return r.jsx(ea,{open:a,onOpenChange:s,children:r.jsxs(Zt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Yt,{children:[r.jsx(Qt,{children:"Histrico de Aspiraes"}),r.jsx(ta,{children:t?`Aspiraes da doadora: ${t}`:"Histrico completo de aspiraes"})]}),i?r.jsx("div",{className:"py-8",children:r.jsx(Nt,{})}):r.jsx("div",{className:"mt-4",children:n.length===0?r.jsx("p",{className:"text-center text-slate-500 py-8",children:"Nenhuma aspirao registrada para esta doadora"}):r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Data"}),r.jsx(K,{children:"Quantidade de Ocitos"}),r.jsx(K,{children:"Veterinrio"}),r.jsx(K,{children:"Tcnico"})]})}),r.jsx(jt,{children:n.map(f=>r.jsxs(Re,{children:[r.jsx(Y,{children:At(f.data_aspiracao)}),r.jsx(Y,{className:"font-medium",children:f.total_oocitos??"-"}),r.jsx(Y,{children:f.veterinario_responsavel||"-"}),r.jsx(Y,{children:f.tecnico_responsavel||"-"})]},f.id))})]})})]})})}function v6(){var F,I;const e=Ca(),[t,a]=u.useState([]),[s,n]=u.useState([]),[o,i]=u.useState(null),[l,c]=u.useState([]),[d,f]=u.useState(""),[h,p]=u.useState(""),[m,b]=u.useState(!0),[x,y]=u.useState(!1),[_,g]=u.useState(!1),{toast:v}=aa(),[w,E]=u.useState({registro:"",raca:"",racaCustom:""}),S=["Holandesa","Jersey","Gir","Girolando"],[T,q]=u.useState("");u.useEffect(()=>{$()},[]),u.useEffect(()=>{d?Z():(a([]),n([]))},[d]),u.useEffect(()=>{k()},[h,t]);const k=()=>{if(!h.trim()){n(t);return}const j=h.toLowerCase(),A=t.filter(L=>{var R,P,H;return((R=L.nome)==null?void 0:R.toLowerCase().includes(j))||((P=L.registro)==null?void 0:P.toLowerCase().includes(j))||((H=L.raca)==null?void 0:H.toLowerCase().includes(j))});n(A)},$=async()=>{try{b(!0);const{data:j,error:A}=await z.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(A)throw A;c(j||[])}catch(j){v({title:"Erro ao carregar fazendas",description:j instanceof Error?j.message:"Erro desconhecido",variant:"destructive"})}finally{b(!1)}},Z=async()=>{try{b(!0);const{data:j,error:A}=await z.from("doadoras").select("*").eq("fazenda_id",d).order("created_at",{ascending:!1});if(A)throw A;const L=await Promise.all((j||[]).map(async R=>{const{data:P,error:H}=await z.from("aspiracoes_doadoras").select("total_oocitos, data_aspiracao").eq("doadora_id",R.id).order("data_aspiracao",{ascending:!1}).limit(1).maybeSingle();return H||!P?{...R,ultima_aspiracao_total_oocitos:void 0,ultima_aspiracao_data:void 0}:{...R,ultima_aspiracao_total_oocitos:P.total_oocitos,ultima_aspiracao_data:P.data_aspiracao}}));a(L),n(L)}catch(j){v({title:"Erro ao carregar doadoras",description:j instanceof Error?j.message:"Erro desconhecido",variant:"destructive"})}finally{b(!1)}},W=j=>{if(!j)return"-";switch(j){case"1_estrela":return r.jsx("div",{className:"flex items-center gap-1",children:r.jsx($o,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})});case"2_estrelas":return r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx($o,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),r.jsx($o,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})]});case"3_estrelas":return r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx($o,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),r.jsx($o,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),r.jsx($o,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})]});case"diamante":return r.jsx("div",{className:"flex items-center gap-1",children:r.jsx(BR,{className:"w-4 h-4 fill-blue-500 text-blue-500"})});default:return"-"}},le=j=>{if(j.raca==="Gir"){const A=[];return j.gpta&&A.push(`GPTA: ${j.gpta}`),j.controle_leiteiro&&A.push(`Controle Leiteiro: ${j.controle_leiteiro}`),j.beta_caseina&&A.push(`Beta Casena: ${j.beta_caseina}`),j.link_abcz&&A.push("Link ABCZ"),A.length>0?A.join(", "):null}return null},O=()=>{E({registro:"",raca:"",racaCustom:""}),q("")},D=async j=>{if(j.preventDefault(),!d){v({title:"Erro de validao",description:"Selecione a fazenda primeiro",variant:"destructive"});return}if(!w.registro.trim()){v({title:"Erro de validao",description:"Registro  obrigatrio",variant:"destructive"});return}if(!(T==="Outra"?w.racaCustom.trim():w.raca.trim())){v({title:"Erro de validao",description:"Raa  obrigatria",variant:"destructive"});return}try{g(!0);const L=T==="Outra"?w.racaCustom.trim():w.raca.trim(),R={fazenda_id:d,registro:w.registro.trim(),raca:L},{data:P,error:H}=await z.from("doadoras").insert([R]).select().single();if(H)throw H;v({title:"Doadora criada",description:"Doadora criada com sucesso"}),y(!1),O(),Z(),P!=null&&P.id&&e(`/doadoras/${P.id}`)}catch(L){const R=L instanceof Error?L.message:"Erro desconhecido";v({title:"Erro ao criar doadora",description:R.includes("RLS")||R.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":R,variant:"destructive"})}finally{g(!1)}},N=j=>{y(j),j||O()};return m&&l.length===0?r.jsx(Nt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Doadoras"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar doadoras do sistema"})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Selecione a Fazenda"})}),r.jsx(ze,{children:r.jsxs(ht,{value:d,onValueChange:f,children:[r.jsx(lt,{className:"w-full",children:r.jsx(mt,{placeholder:"Selecione uma fazenda para visualizar doadoras"})}),r.jsx(ct,{children:l.map(j=>r.jsx(Pe,{value:j.id,children:j.nome},j.id))})]})})]}),d?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-4 flex-1",children:r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(sd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),r.jsx(_e,{placeholder:"Buscar por nome ou registro...",value:h,onChange:j=>p(j.target.value),className:"pl-10"})]})}),r.jsxs(ea,{open:x,onOpenChange:N,children:[r.jsx(Fr,{asChild:!0,children:r.jsxs(se,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Us,{className:"w-4 h-4 mr-2"}),"Nova Doadora"]})}),r.jsxs(Zt,{className:"max-w-md",children:[r.jsxs(Yt,{children:[r.jsx(Qt,{children:"Criar Nova Doadora"}),r.jsx(ta,{children:"Preencha os campos bsicos. As informaes detalhadas podem ser preenchidas aps a criao."})]}),r.jsxs("form",{onSubmit:D,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"registro",children:"Registro *"}),r.jsx(_e,{id:"registro",value:w.registro,onChange:j=>E({...w,registro:j.target.value}),placeholder:"Registro da doadora",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"raca",children:"Raa *"}),r.jsxs(ht,{value:T,onValueChange:j=>{q(j),E(j==="Outra"?{...w,raca:"",racaCustom:""}:{...w,raca:j,racaCustom:""})},children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione a raa"})}),r.jsxs(ct,{children:[S.map(j=>r.jsx(Pe,{value:j,children:j},j)),r.jsx(Pe,{value:"Outra",children:"Outra"})]})]}),T==="Outra"&&r.jsx(_e,{id:"raca_custom",value:w.racaCustom,onChange:j=>E({...w,racaCustom:j.target.value,raca:j.target.value}),placeholder:"Digite a raa",className:"mt-2",required:!0})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(se,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:_,children:_?"Salvando...":"Criar Doadora"}),r.jsx(se,{type:"button",variant:"outline",onClick:()=>N(!1),disabled:_,children:"Cancelar"})]})]})]})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Lista de Doadoras"})}),r.jsx(ze,{children:m?r.jsx("div",{className:"py-8",children:r.jsx(Nt,{})}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Registro"}),r.jsx(K,{children:"Nome"}),r.jsx(K,{children:"ltima Aspirao"}),r.jsx(K,{children:"Ocitos"}),r.jsx(K,{children:"Estado"}),r.jsx(K,{children:"Raa (Campos Especiais)"}),r.jsx(K,{children:"Classificao"}),r.jsx(K,{className:"text-right",children:"Aes"})]})}),r.jsx(jt,{children:s.length===0?r.jsx(Re,{children:r.jsx(Y,{colSpan:8,className:"text-center text-slate-500",children:h?"Nenhuma doadora encontrada":"Nenhuma doadora cadastrada nesta fazenda"})}):s.map(j=>{const A=le(j);return r.jsxs(Re,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>e(`/doadoras/${j.id}`),children:[r.jsx(Y,{className:"font-medium",children:j.registro}),r.jsx(Y,{children:j.nome||"-"}),r.jsx(Y,{children:j.ultima_aspiracao_data?At(j.ultima_aspiracao_data):"-"}),r.jsx(Y,{children:j.ultima_aspiracao_total_oocitos??"-"}),r.jsx(Y,{children:r.jsx(Qe,{variant:j.disponivel_aspiracao?"default":"secondary",children:j.disponivel_aspiracao?"Disponvel":"Indisponvel"})}),r.jsx(Y,{children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:j.raca||"-"}),A&&r.jsx("span",{className:"text-xs text-slate-500",children:A})]})}),r.jsx(Y,{children:W(j.classificacao_genetica)}),r.jsx(Y,{className:"text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx(se,{variant:"ghost",size:"sm",onClick:L=>{L.stopPropagation(),i(j.id)},title:"Ver histrico de aspiraes",children:r.jsx(Kv,{className:"w-4 h-4"})}),r.jsx(se,{variant:"ghost",size:"sm",onClick:L=>{L.stopPropagation(),e(`/doadoras/${j.id}`)},title:"Editar doadora",children:r.jsx(VR,{className:"w-4 h-4"})})]})})]},j.id)})})]})})})]}),o&&r.jsx(p6,{doadoraId:o,doadoraNome:((F=s.find(j=>j.id===o))==null?void 0:F.nome)||((I=s.find(j=>j.id===o))==null?void 0:I.registro),open:!!o,onClose:()=>i(null)})]}):r.jsx(Oe,{children:r.jsx(ze,{className:"py-12 text-center",children:r.jsx("p",{className:"text-slate-500",children:"Selecione uma fazenda para visualizar e gerenciar doadoras"})})})]})}var Yf="Switch",[g6,p3]=vs(Yf),[x6,_6]=g6(Yf),qN=u.forwardRef((e,t)=>{const{__scopeSwitch:a,name:s,checked:n,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:d,form:f,...h}=e,[p,m]=u.useState(null),b=_t(t,v=>m(v)),x=u.useRef(!1),y=p?f||!!p.closest("form"):!0,[_,g]=Rs({prop:n,defaultProp:o??!1,onChange:d,caller:Yf});return r.jsxs(x6,{scope:a,checked:_,disabled:l,children:[r.jsx(Be.button,{type:"button",role:"switch","aria-checked":_,"aria-required":i,"data-state":VN(_),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:b,onClick:qe(e.onClick,v=>{g(w=>!w),y&&(x.current=v.isPropagationStopped(),x.current||v.stopPropagation())})}),y&&r.jsx(HN,{control:p,bubbles:!x.current,name:s,value:c,checked:_,required:i,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});qN.displayName=Yf;var BN="SwitchThumb",UN=u.forwardRef((e,t)=>{const{__scopeSwitch:a,...s}=e,n=_6(BN,a);return r.jsx(Be.span,{"data-state":VN(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:t})});UN.displayName=BN;var y6="SwitchBubbleInput",HN=u.forwardRef(({__scopeSwitch:e,control:t,checked:a,bubbles:s=!0,...n},o)=>{const i=u.useRef(null),l=_t(i,o),c=Og(a),d=lg(t);return u.useEffect(()=>{const f=i.current;if(!f)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==a&&m){const b=new Event("click",{bubbles:s});m.call(f,a),f.dispatchEvent(b)}},[c,a,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:l,style:{...n.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});HN.displayName=y6;function VN(e){return e?"checked":"unchecked"}var GN=qN,b6=UN;const Mg=u.forwardRef(({className:e,...t},a)=>r.jsx(GN,{className:Ce("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:a,children:r.jsx(b6,{className:Ce("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Mg.displayName=GN.displayName;function j6({value:e,onChange:t,doadoraNome:a,doadoraRegistro:s}){const n=(o,i,l)=>{t({...e,[o]:{...e[o],[i]:l}})};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Genealogia"}),r.jsx("div",{className:"bg-slate-50 rounded-lg p-6 border border-slate-200",children:r.jsxs("div",{className:"flex flex-col items-center gap-6",children:[r.jsx("div",{className:"flex flex-col items-center",children:r.jsxs("div",{className:"bg-white border-2 border-slate-400 rounded-lg p-4 shadow-sm min-w-[200px] text-center",children:[r.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-1",children:a||"Doadora"}),r.jsx("div",{className:"text-xs text-slate-600",children:s||"REGISTRO"})]})}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-3 shadow-sm min-w-[180px]",children:[r.jsx(te,{className:"text-xs text-blue-700 font-medium mb-2 block",children:"Pai"}),r.jsx(_e,{placeholder:"Nome",value:e.pai.nome,onChange:o=>n("pai","nome",o.target.value),className:"mb-2 text-sm"}),r.jsx(_e,{placeholder:"Registro",value:e.pai.registro,onChange:o=>n("pai","registro",o.target.value),className:"text-xs"})]}),r.jsxs("div",{className:"bg-white border-2 border-red-500 rounded-lg p-3 shadow-sm min-w-[180px]",children:[r.jsx(te,{className:"text-xs text-red-700 font-medium mb-2 block",children:"Me"}),r.jsx(_e,{placeholder:"Nome",value:e.mae.nome,onChange:o=>n("mae","nome",o.target.value),className:"mb-2 text-sm"}),r.jsx(_e,{placeholder:"Registro",value:e.mae.registro,onChange:o=>n("mae","registro",o.target.value),className:"text-xs"})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-3 shadow-sm min-w-[160px]",children:[r.jsx(te,{className:"text-xs text-blue-700 font-medium mb-2 block",children:"Av Paterno"}),r.jsx(_e,{placeholder:"Nome",value:e.pai_pai.nome,onChange:o=>n("pai_pai","nome",o.target.value),className:"mb-2 text-xs"}),r.jsx(_e,{placeholder:"Registro",value:e.pai_pai.registro,onChange:o=>n("pai_pai","registro",o.target.value),className:"text-xs"})]}),r.jsxs("div",{className:"bg-white border-2 border-red-500 rounded-lg p-3 shadow-sm min-w-[160px]",children:[r.jsx(te,{className:"text-xs text-red-700 font-medium mb-2 block",children:"Av Paterna"}),r.jsx(_e,{placeholder:"Nome",value:e.pai_mae.nome,onChange:o=>n("pai_mae","nome",o.target.value),className:"mb-2 text-xs"}),r.jsx(_e,{placeholder:"Registro",value:e.pai_mae.registro,onChange:o=>n("pai_mae","registro",o.target.value),className:"text-xs"})]}),r.jsxs("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-3 shadow-sm min-w-[160px]",children:[r.jsx(te,{className:"text-xs text-blue-700 font-medium mb-2 block",children:"Av Materno"}),r.jsx(_e,{placeholder:"Nome",value:e.mae_pai.nome,onChange:o=>n("mae_pai","nome",o.target.value),className:"mb-2 text-xs"}),r.jsx(_e,{placeholder:"Registro",value:e.mae_pai.registro,onChange:o=>n("mae_pai","registro",o.target.value),className:"text-xs"})]}),r.jsxs("div",{className:"bg-white border-2 border-red-500 rounded-lg p-3 shadow-sm min-w-[160px]",children:[r.jsx(te,{className:"text-xs text-red-700 font-medium mb-2 block",children:"Av Materna"}),r.jsx(_e,{placeholder:"Nome",value:e.mae_mae.nome,onChange:o=>n("mae_mae","nome",o.target.value),className:"mb-2 text-xs"}),r.jsx(_e,{placeholder:"Registro",value:e.mae_mae.registro,onChange:o=>n("mae_mae","registro",o.target.value),className:"text-xs"})]})]})]})})]})}function w6(){const{id:e}=Br(),t=Ca(),{toast:a}=aa(),[s,n]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(null),h=["Holandesa","Jersey","Gir","Girolando"],[p,m]=u.useState(""),[b,x]=u.useState({registro:"",nome:"",raca:"",racaCustom:"",genealogia_texto:"",foto_url:"",gpta:"",controle_leiteiro:"",beta_caseina:"",link_abcz:"",disponivel_aspiracao:!0,classificacao_genetica:""}),[y,_]=u.useState({pai:{nome:"",registro:""},mae:{nome:"",registro:""},pai_pai:{nome:"",registro:""},pai_mae:{nome:"",registro:""},mae_pai:{nome:"",registro:""},mae_mae:{nome:"",registro:""}});u.useEffect(()=>{e&&g()},[e]);const g=async()=>{var w,E;try{n(!0);const{data:S,error:T}=await z.from("doadoras").select("*").eq("id",e).single();if(T)throw T;if(c(S),S.fazenda_id){const{data:W,error:le}=await z.from("fazendas").select("*").eq("id",S.fazenda_id).single();if(le)throw le;f(W)}const q=S.raca||"",k=h.includes(q);m(k?q:"Outra");let $={pai:{nome:S.pai_nome||"",registro:S.pai_registro||""},mae:{nome:S.mae_nome||"",registro:S.mae_registro||""},pai_pai:{nome:"",registro:""},pai_mae:{nome:"",registro:""},mae_pai:{nome:"",registro:""},mae_mae:{nome:"",registro:""}},Z=S.genealogia_texto||"";if(Z.includes("[GENEALOGIA_JSON]"))try{const W=Z.match(/\[GENEALOGIA_JSON\](.*?)\[\/GENEALOGIA_JSON\]/s);if(W){const le=JSON.parse(W[1]);$={pai:le.pai||$.pai,mae:le.mae||$.mae,pai_pai:le.pai_pai||$.pai_pai,pai_mae:le.pai_mae||$.pai_mae,mae_pai:le.mae_pai||$.mae_pai,mae_mae:le.mae_mae||$.mae_mae},Z=Z.replace(/\[GENEALOGIA_JSON\].*?\[\/GENEALOGIA_JSON\]/s,"").trim()}}catch(W){console.warn("Erro ao parsear genealogia JSON:",W)}x({registro:S.registro||"",nome:S.nome||"",raca:k?q:"",racaCustom:k?"":q,genealogia_texto:Z,foto_url:S.foto_url||"",gpta:((w=S.gpta)==null?void 0:w.toString())||"",controle_leiteiro:((E=S.controle_leiteiro)==null?void 0:E.toString())||"",beta_caseina:S.beta_caseina||"",link_abcz:S.link_abcz||"",disponivel_aspiracao:S.disponivel_aspiracao??!0,classificacao_genetica:S.classificacao_genetica||""}),_($)}catch(S){a({title:"Erro ao carregar dados",description:S instanceof Error?S.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},v=async w=>{if(w.preventDefault(),!b.registro.trim()){a({title:"Erro de validao",description:"Registro  obrigatrio",variant:"destructive"});return}if(!(p==="Outra"?b.racaCustom.trim():b.raca.trim())){a({title:"Erro de validao",description:"Raa  obrigatria",variant:"destructive"});return}try{i(!0);const S=p==="Outra"?b.racaCustom.trim():b.raca.trim(),T={registro:b.registro.trim(),nome:b.nome.trim()||null,raca:S,pai_registro:y.pai.registro.trim()||null,pai_nome:y.pai.nome.trim()||null,mae_registro:y.mae.registro.trim()||null,mae_nome:y.mae.nome.trim()||null,foto_url:b.foto_url.trim()||null,gpta:b.gpta?parseFloat(b.gpta):null,controle_leiteiro:b.controle_leiteiro?parseFloat(b.controle_leiteiro):null,beta_caseina:b.beta_caseina.trim()||null,link_abcz:b.link_abcz.trim()||null,disponivel_aspiracao:b.disponivel_aspiracao,classificacao_genetica:b.classificacao_genetica||null},q={pai:y.pai,mae:y.mae,pai_pai:y.pai_pai,pai_mae:y.pai_mae,mae_pai:y.mae_pai,mae_mae:y.mae_mae};if(Object.values(q).some(Z=>Z.nome.trim()||Z.registro.trim())){const Z=JSON.stringify(q);T.genealogia_texto=b.genealogia_texto.trim()?`${b.genealogia_texto}

[GENEALOGIA_JSON]${Z}[/GENEALOGIA_JSON]`:`[GENEALOGIA_JSON]${Z}[/GENEALOGIA_JSON]`}else T.genealogia_texto=b.genealogia_texto.trim()||null;const{error:$}=await z.from("doadoras").update(T).eq("id",e);if($)throw $;a({title:"Doadora atualizada",description:"Doadora atualizada com sucesso"}),g()}catch(S){const T=S instanceof Error?S.message:"Erro desconhecido";a({title:"Erro ao atualizar doadora",description:T.includes("RLS")||T.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":T,variant:"destructive"})}finally{i(!1)}};return s?r.jsx(Nt,{}):l?r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(se,{onClick:()=>t("/doadoras"),variant:"outline",size:"icon",children:r.jsx(Wa,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-2",children:[r.jsx(go,{className:"w-8 h-8"}),b.nome||b.registro]}),r.jsxs("p",{className:"text-slate-600 mt-1",children:[b.registro," ",d&&` ${d.nome}`]})]})]})}),r.jsxs("form",{onSubmit:v,className:"space-y-6",children:[r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Informaes Bsicas"})}),r.jsx(ze,{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"registro",children:"Registro *"}),r.jsx(_e,{id:"registro",value:b.registro,onChange:w=>x({...b,registro:w.target.value}),placeholder:"Registro da doadora",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"nome",children:"Nome"}),r.jsx(_e,{id:"nome",value:b.nome,onChange:w=>x({...b,nome:w.target.value}),placeholder:"Nome da doadora"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"raca",children:"Raa *"}),r.jsxs(ht,{value:p,onValueChange:w=>{m(w),x(w==="Outra"?{...b,raca:"",racaCustom:""}:{...b,raca:w,racaCustom:""})},children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione a raa"})}),r.jsxs(ct,{children:[h.map(w=>r.jsx(Pe,{value:w,children:w},w)),r.jsx(Pe,{value:"Outra",children:"Outra"})]})]}),p==="Outra"&&r.jsx(_e,{id:"raca_custom",value:b.racaCustom,onChange:w=>x({...b,racaCustom:w.target.value,raca:w.target.value}),placeholder:"Digite a raa",className:"mt-2",required:!0}),p&&p!=="Outra"&&r.jsx("div",{className:"mt-2 text-xs text-slate-500"})]})]})})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Genealogia"})}),r.jsxs(ze,{children:[r.jsx(j6,{value:y,onChange:_,doadoraNome:b.nome||b.registro,doadoraRegistro:b.registro}),r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsx(te,{htmlFor:"genealogia_texto",children:"Observaes sobre Genealogia"}),r.jsx(Ma,{id:"genealogia_texto",value:b.genealogia_texto,onChange:w=>x({...b,genealogia_texto:w.target.value}),placeholder:"Informaes adicionais sobre genealogia (opcional)",rows:3})]})]})]}),p==="Gir"&&r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Informaes Especficas - Raa Gir"})}),r.jsxs(ze,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"gpta",children:"GPTA"}),r.jsx(_e,{id:"gpta",type:"number",value:b.gpta,onChange:w=>x({...b,gpta:w.target.value}),placeholder:"GPTA"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"controle_leiteiro",children:"Controle Leiteiro"}),r.jsx(_e,{id:"controle_leiteiro",type:"number",value:b.controle_leiteiro,onChange:w=>x({...b,controle_leiteiro:w.target.value}),placeholder:"Controle Leiteiro"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"beta_caseina",children:"Beta Casena"}),r.jsx(_e,{id:"beta_caseina",value:b.beta_caseina,onChange:w=>x({...b,beta_caseina:w.target.value}),placeholder:"Beta Casena"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"link_abcz",children:"Link ABCZ"}),r.jsx(_e,{id:"link_abcz",type:"url",value:b.link_abcz,onChange:w=>x({...b,link_abcz:w.target.value}),placeholder:"URL do link ABCZ"})]})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Informaes Adicionais"})}),r.jsxs(ze,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(te,{htmlFor:"disponivel_aspiracao",children:"Disponvel para Aspirao"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Indica se a doadora est disponvel para aspirao"})]}),r.jsx(Mg,{id:"disponivel_aspiracao",checked:b.disponivel_aspiracao,onCheckedChange:w=>x({...b,disponivel_aspiracao:w})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"classificacao_genetica",children:"Classificao Gentica"}),r.jsxs(ht,{value:b.classificacao_genetica,onValueChange:w=>x({...b,classificacao_genetica:w}),children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione a classificao"})}),r.jsxs(ct,{children:[r.jsx(Pe,{value:"1_estrela",children:"1 Estrela"}),r.jsx(Pe,{value:"2_estrelas",children:"2 Estrelas"}),r.jsx(Pe,{value:"3_estrelas",children:"3 Estrelas"}),r.jsx(Pe,{value:"diamante",children:"Diamante"})]})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"Classificao opcional do preo da gentica"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"foto_url",children:"Foto"}),r.jsx(_e,{id:"foto_url",type:"url",value:b.foto_url,onChange:w=>x({...b,foto_url:w.target.value}),placeholder:"URL da foto"})]})]})]}),r.jsxs("div",{className:"flex gap-4 justify-end",children:[r.jsx(se,{type:"button",variant:"outline",onClick:()=>t("/doadoras"),children:"Cancelar"}),r.jsxs(se,{type:"submit",className:"bg-green-600 hover:bg-green-700",disabled:o,children:[r.jsx(ZR,{className:"w-4 h-4 mr-2"}),o?"Salvando...":"Salvar Alteraes"]})]})]})]}):r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-500",children:"Doadora no encontrada"}),r.jsxs(se,{onClick:()=>t("/doadoras"),className:"mt-4",variant:"outline",children:[r.jsx(Wa,{className:"w-4 h-4 mr-2"}),"Voltar para Doadoras"]})]})})}async function xo(e){try{const{data:t,error:a}=await z.from("receptoras").select("status_reprodutivo").eq("id",e).single();return!a&&(t!=null&&t.status_reprodutivo)?t.status_reprodutivo:await E6(e)}catch(t){return console.error("Error calculating receptora status:",t),"VAZIA"}}async function E6(e){try{const{data:t,error:a}=await z.from("v_tentativas_te_status").select("*").eq("receptora_id",e).order("data_te",{ascending:!1}).limit(1);if(a&&console.error("Error fetching v_tentativas_te_status:",a),t&&t.length>0){const o=t[0],i={PRENHE_FEMEA:"PRENHE_FEMEA",PRENHE_MACHO:"PRENHE_MACHO",PRENHE_SEM_SEXO:"PRENHE_SEM_SEXO",PRENHE_2_SEXOS:"PRENHE_2_SEXOS",PRENHE:"PRENHE",VAZIA:"VAZIA",RETOQUE:"SERVIDA",SEM_DIAGNOSTICO:"SERVIDA"};if(i[o.status_tentativa])return i[o.status_tentativa]}const{data:s,error:n}=await z.from("protocolo_receptoras").select("status, protocolo_id").eq("receptora_id",e);if(n&&console.error("Error fetching protocolo_receptoras:",n),s&&s.length>0){const o=s.map(h=>h.protocolo_id),{data:i,error:l}=await z.from("protocolos_sincronizacao").select("id, status").in("id",o);l&&console.error("Error fetching protocolos_sincronizacao:",l);const c=new Map((i||[]).map(h=>[h.id,h.status])),d=s.filter(h=>{const p=c.get(h.protocolo_id),m=h.status;return p==="SINCRONIZADO"||p==="FECHADO"?!1:(m==="APTA"||m==="INICIADA")&&p!=="SINCRONIZADO"&&p!=="FECHADO"});if(d.length>0)return d.some(p=>p.status==="APTA")?"SINCRONIZADA":"EM_SINCRONIZACAO";if(s.filter(h=>c.get(h.protocolo_id)==="PASSO2_FECHADO"&&h.status==="APTA").length>0)return"SINCRONIZADA"}return"VAZIA"}catch(t){return console.error("Error calculating receptora status (legacy):",t),"VAZIA"}}async function S6(e){if(e.length===0)return new Map;const t=new Map;try{const{data:a,error:s}=await z.from("receptoras").select("id, status_reprodutivo").in("id",e);!s&&a&&a.forEach(o=>{o.status_reprodutivo&&t.set(o.id,o.status_reprodutivo)});const n=e.filter(o=>!t.has(o));n.length>0&&(await N6(n)).forEach((i,l)=>{t.set(l,i)})}catch(a){console.error("Error calculating receptoras status:",a),e.forEach(s=>t.set(s,"VAZIA"))}return t}async function N6(e){const t=new Map;try{const{data:a,error:s}=await z.from("v_tentativas_te_status").select("receptora_id, status_tentativa, data_te").in("receptora_id",e).order("data_te",{ascending:!1});s&&console.error("Error fetching v_tentativas_te_status:",s);const{data:n,error:o}=await z.from("protocolo_receptoras").select("receptora_id, status, protocolo_id").in("receptora_id",e);o&&console.error("Error fetching protocolo_receptoras:",o);const i=[...new Set((n==null?void 0:n.map(p=>p.protocolo_id))||[])];let l=[];if(i.length>0){const{data:p,error:m}=await z.from("protocolos_sincronizacao").select("id, status").in("id",i);m?console.error("Error fetching protocolos_sincronizacao:",m):l=p||[]}const c=new Map((l==null?void 0:l.map(p=>[p.id,p.status]))||[]),d=new Map;a==null||a.forEach(p=>{d.has(p.receptora_id)||d.set(p.receptora_id,p)});const f={PRENHE_FEMEA:"PRENHE_FEMEA",PRENHE_MACHO:"PRENHE_MACHO",PRENHE_SEM_SEXO:"PRENHE_SEM_SEXO",PRENHE_2_SEXOS:"PRENHE_2_SEXOS",PRENHE_RETOQUE:"PRENHE_RETOQUE",PRENHE:"PRENHE",VAZIA:"VAZIA",RETOQUE:"SERVIDA",SEM_DIAGNOSTICO:"SERVIDA"},h=new Map;n==null||n.forEach(p=>{h.has(p.receptora_id)||h.set(p.receptora_id,[]),h.get(p.receptora_id).push(p)}),e.forEach(p=>{const m=d.get(p);if(m&&f[m.status_tentativa]){t.set(p,f[m.status_tentativa]);return}const b=h.get(p)||[],x=b.filter(_=>c.get(_.protocolo_id)!=="PASSO2_FECHADO"&&(_.status==="APTA"||_.status==="INICIADA"));if(x.length>0){t.set(p,x.some(_=>_.status==="APTA")?"SINCRONIZADA":"EM_SINCRONIZACAO");return}if(b.filter(_=>c.get(_.protocolo_id)==="PASSO2_FECHADO"&&_.status==="APTA").length>0){t.set(p,"SINCRONIZADA");return}t.set(p,"VAZIA")})}catch(a){console.error("Error calculating receptoras status (legacy):",a),e.forEach(s=>t.set(s,"VAZIA"))}return t}async function kg(e,t){try{const{error:a}=await z.from("receptoras").update({status_reprodutivo:t}).eq("id",e);return a?(console.error("Error updating receptora status:",a),{error:a}):{error:null}}catch(a){const s=a instanceof Error?a:new Error("Erro desconhecido");return console.error("Error updating receptora status:",s),{error:s}}}function Ni(e,t){switch(t){case"ENTRAR_PASSO1":return e!=="VAZIA"?{valido:!1,mensagem:`A receptora precisa estar VAZIA para entrar no primeiro passo de um protocolo. Status atual: ${e}`}:{valido:!0};case"FINALIZAR_PASSO1":return e!=="VAZIA"?{valido:!1,mensagem:`A receptora precisa estar VAZIA para finalizar o primeiro passo. Status atual: ${e}`}:{valido:!0};case"FINALIZAR_PASSO2":return e!=="EM_SINCRONIZACAO"?{valido:!1,mensagem:`A receptora precisa estar EM_SINCRONIZACAO para finalizar o segundo passo. Status atual: ${e}`}:{valido:!0};case"REALIZAR_TE":return e!=="SINCRONIZADA"?{valido:!1,mensagem:`A receptora precisa estar SINCRONIZADA para realizar transferncia de embries. Status atual: ${e}`}:{valido:!0};case"REALIZAR_DG":return e!=="SERVIDA"?{valido:!1,mensagem:`A receptora precisa estar SERVIDA para realizar diagnstico de gestao. Status atual: ${e}`}:{valido:!0};case"REALIZAR_SEXAGEM":return e!=="PRENHE"&&e!=="PRENHE_RETOQUE"?{valido:!1,mensagem:`A receptora precisa estar PRENHE ou PRENHE_RETOQUE para realizar sexagem. Status atual: ${e}`}:{valido:!0};default:return{valido:!1,mensagem:"Ao desconhecida"}}}const ZN=Ff,C6=$f,YN=u.forwardRef(({className:e,...t},a)=>r.jsx(yl,{className:Ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));YN.displayName=yl.displayName;const A6=hl("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Pg=u.forwardRef(({side:e="right",className:t,children:a,...s},n)=>r.jsxs(C6,{children:[r.jsx(YN,{}),r.jsxs(bl,{ref:n,className:Ce(A6({side:e}),t),...s,children:[a,r.jsxs(qf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[r.jsx(Ds,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Pg.displayName=bl.displayName;const Ig=({className:e,...t})=>r.jsx("div",{className:Ce("flex flex-col space-y-2 text-center sm:text-left",e),...t});Ig.displayName="SheetHeader";const Lg=u.forwardRef(({className:e,...t},a)=>r.jsx(dd,{ref:a,className:Ce("text-lg font-semibold text-foreground",e),...t}));Lg.displayName=dd.displayName;const Fg=u.forwardRef(({className:e,...t},a)=>r.jsx(ud,{ref:a,className:Ce("text-sm text-muted-foreground",e),...t}));Fg.displayName=ud.displayName;const T6={APTA:{variant:"default",className:"bg-green-500 hover:bg-green-600"},INAPTA:{variant:"destructive",className:""},INICIADA:{variant:"secondary",className:"bg-blue-500 hover:bg-blue-600 text-white"},UTILIZADA:{variant:"outline",className:"bg-purple-100 text-purple-800 border-purple-300"},NAO_UTILIZADA:{variant:"outline",className:"bg-gray-100 text-gray-800"},SINCRONIZANDO:{variant:"secondary",className:"bg-yellow-500 hover:bg-yellow-600 text-white"},SINCRONIZADA:{variant:"default",className:"bg-green-500 hover:bg-green-600"},SINCRONIZADO:{variant:"default",className:"bg-blue-600 hover:bg-blue-700 text-white"},FECHADO:{variant:"secondary",className:"bg-slate-500 hover:bg-slate-600 text-white"},PASSO1_FECHADO:{variant:"secondary",className:"bg-blue-400 hover:bg-blue-500 text-white"},PASSO2_FECHADO:{variant:"default",className:"bg-blue-600 hover:bg-blue-700 text-white"},EM_TE:{variant:"secondary",className:"bg-slate-500 hover:bg-slate-600 text-white"},VAZIA:{variant:"outline",className:"bg-gray-100 text-gray-800 border-gray-300"},EM_SINCRONIZACAO:{variant:"secondary",className:"bg-yellow-500 hover:bg-yellow-600 text-white"},SERVIDA:{variant:"secondary",className:"bg-blue-500 hover:bg-blue-600 text-white"},PRENHE:{variant:"default",className:"bg-green-600 hover:bg-green-700 text-white"},PRENHE_RETOQUE:{variant:"secondary",className:"bg-orange-500 hover:bg-orange-600 text-white"},PRENHE_FEMEA:{variant:"default",className:"bg-pink-600 hover:bg-pink-700 text-white"},PRENHE_MACHO:{variant:"default",className:"bg-blue-700 hover:bg-blue-800 text-white"},PRENHE_SEM_SEXO:{variant:"default",className:"bg-purple-600 hover:bg-purple-700 text-white"},PRENHE_2_SEXOS:{variant:"default",className:"bg-indigo-600 hover:bg-indigo-700 text-white"},RETOQUE:{variant:"secondary",className:"bg-orange-500 hover:bg-orange-600 text-white"},TRANSFERIDO:{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-300"},CONGELADO:{variant:"secondary",className:"bg-cyan-500 hover:bg-cyan-600 text-white"},REALIZADA:{variant:"default",className:"bg-green-500 hover:bg-green-600"}};function kn({status:e,className:t}){const a=T6[e]||{variant:"outline",className:""},s=n=>({EM_SINCRONIZACAO:"EM SINCRONIZAO",PRENHE_RETOQUE:"PRENHE (RETOQUE)",PRENHE_FEMEA:"PRENHE (FMEA)",PRENHE_MACHO:"PRENHE (MACHO)",PRENHE_SEM_SEXO:"PRENHE (SEM SEXO)",PRENHE_2_SEXOS:"PRENHE (2 SEXOS)"})[n]||n;return r.jsx(Qe,{variant:a.variant,className:Ce(a.className,t),children:s(e)})}const gs=e=>{if(!e||/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=e.match(/^(\d{4}-\d{2}-\d{2})/);if(t)return t[1];try{const a=new Date(e);if(isNaN(a.getTime()))return e;const s=a.getUTCFullYear(),n=String(a.getUTCMonth()+1).padStart(2,"0"),o=String(a.getUTCDate()).padStart(2,"0");return`${s}-${n}-${o}`}catch{return e}},L_=e=>{try{return new Date(e+"T12:00:00").toLocaleDateString("pt-BR")}catch{return e}};function QN({receptoraId:e,open:t,onClose:a}){const{toast:s}=aa(),[n,o]=u.useState(!0),[i,l]=u.useState(null),[c,d]=u.useState([]),[f,h]=u.useState([]),[p,m]=u.useState({totalCiclos:0,totalGestacoes:0,ciclosDesdeUltimaGestacao:0});u.useEffect(()=>{t&&e&&b()},[t,e]);const b=async()=>{try{o(!0);const _=[],g=[],{data:v,error:w}=await z.from("receptoras").select("*").eq("id",e).single();if(w)throw w;l(v);const{data:E}=await z.from("receptora_fazenda_historico").select("id, fazenda_id, data_inicio").eq("receptora_id",e).order("data_inicio",{ascending:!0});if(E&&E.length>0){const O=E[0],{data:D}=await z.from("fazendas").select("nome").eq("id",O.fazenda_id).single();g.push({data:gs(O.data_inicio),tipo:"CADASTRO",resumo:`Cadastro na fazenda ${(D==null?void 0:D.nome)||"desconhecida"}`});for(let N=1;N<E.length;N++){const F=E[N],I=E[N-1],{data:j}=await z.from("fazendas").select("id, nome").in("id",[I.fazenda_id,F.fazenda_id].filter(Boolean)),A=new Map((j==null?void 0:j.map(P=>[P.id,P.nome]))||[]),L=A.get(I.fazenda_id)||"?",R=A.get(F.fazenda_id)||"?";g.push({data:gs(F.data_inicio),tipo:"MUDANCA_FAZENDA",resumo:`${L}  ${R}`})}}const{data:S}=await z.from("protocolo_receptoras").select(`
          id,
          data_inclusao,
          status,
          motivo_inapta,
          protocolos_sincronizacao (
            id,
            data_inicio,
            passo2_data
          )
        `).eq("receptora_id",e).order("data_inclusao",{ascending:!1}),{data:T}=await z.from("diagnosticos_gestacao").select("*").eq("receptora_id",e).eq("tipo_diagnostico","DG").order("data_diagnostico",{ascending:!1});if(S)for(const O of S){const D=Array.isArray(O.protocolos_sincronizacao)?O.protocolos_sincronizacao[0]:O.protocolos_sincronizacao;if(!D||!D.data_inicio)continue;const N=gs(D.data_inicio);let F="1 Passo";if(D.passo2_data){const I=gs(D.passo2_data);O.status==="APTA"?F="1 Passo  2 Passo: APTA":O.status==="INAPTA"?(F="1 Passo  2 Passo: DESCARTADA",O.motivo_inapta&&(F+=` (${O.motivo_inapta})`)):F="1 Passo  2 Passo",_.push({data:I,tipo:"PROTOCOLO",resumo:F})}else _.push({data:N,tipo:"PROTOCOLO",resumo:F})}const{data:q}=await z.from("transferencias_embrioes").select(`
          id,
          embriao_id,
          data_te,
          status_te,
          embrioes (
            id,
            identificacao,
            classificacao,
            lote_fiv_acasalamento_id
          )
        `).eq("receptora_id",e).order("data_te",{ascending:!1}),k=new Set;q&&q.forEach(O=>{const D=Array.isArray(O.embrioes)?O.embrioes[0]:O.embrioes;D!=null&&D.lote_fiv_acasalamento_id&&k.add(D.lote_fiv_acasalamento_id)});const $=new Map;if(k.size>0){const O=Array.from(k).filter(Boolean);if(O.length>0){const{data:D,error:N}=await z.from("lote_fiv_acasalamentos").select(`
              id,
              aspiracao_doadora_id,
              dose_semen_id
            `).in("id",O);if(N)console.error("Erro ao buscar acasalamentos:",N);else if(D){const F=D.map(L=>L.aspiracao_doadora_id).filter(Boolean),I=D.map(L=>L.dose_semen_id).filter(Boolean),j=new Map;if(F.length>0){const{data:L}=await z.from("aspiracoes_doadoras").select("id, doadora_id").in("id",F);if(L){const R=L.map(P=>P.doadora_id).filter(Boolean);if(R.length>0){const{data:P}=await z.from("doadoras").select("id, registro").in("id",R);if(P){const H=new Map(P.map(V=>[V.id,V.registro]));L.forEach(V=>{const ae=H.get(V.doadora_id);ae&&j.set(V.id,ae)})}}}}const A=new Map;if(I.length>0){const{data:L}=await z.from("doses_semen").select("id, nome").in("id",I);L&&L.forEach(R=>{A.set(R.id,R.nome)})}D.forEach(L=>{const R=j.get(L.aspiracao_doadora_id)||"?",P=A.get(L.dose_semen_id)||"?";$.set(L.id,{doadora:R,touro:P})})}}}const Z=new Map;if(q){const O=new Map;q.forEach(D=>{const N=D.data_te;O.has(N)||O.set(N,[]),O.get(N).push(D)}),O.forEach((D,N)=>{const F=D.filter(j=>j.status_te==="REALIZADA"),I=D.filter(j=>j.status_te==="DESCARTADA");if(F.length>0){const j=[],A=[];F.forEach(R=>{const P=Array.isArray(R.embrioes)?R.embrioes[0]:R.embrioes,H=(P==null?void 0:P.identificacao)||"Embrio";if(j.push(H),P!=null&&P.lote_fiv_acasalamento_id){const V=$.get(P.lote_fiv_acasalamento_id);if(V){const ae=`${V.doadora}  ${V.touro}`;A.includes(ae)||A.push(ae)}}});let L=`${F.length} embrio(es): ${j.join(", ")}`;A.length>0&&(L+=` | ${A.join("; ")}`),_.push({data:gs(N),tipo:"TE",resumo:L}),Z.set(N,A)}else I.length>0&&_.push({data:gs(N),tipo:"TE",resumo:"Descartada para TE"})})}if(T)for(const O of T){let D=O.resultado==="PRENHE"?"PRENHE":O.resultado==="RETOQUE"?"PRENHE (RETOQUE)":"VAZIA";if(O.numero_gestacoes&&O.numero_gestacoes>0&&O.resultado!=="VAZIA"&&(D+=` (${O.numero_gestacoes} gestao${O.numero_gestacoes>1?"es":""})`),(O.resultado==="PRENHE"||O.resultado==="RETOQUE")&&O.data_te){const N=Z.get(O.data_te);N&&N.length>0&&(D+=` | ${N.join("; ")}`)}_.push({data:gs(O.data_diagnostico),tipo:"DG",resumo:D})}const{data:W}=await z.from("diagnosticos_gestacao").select("*").eq("receptora_id",e).eq("tipo_diagnostico","SEXAGEM").order("data_diagnostico",{ascending:!1});if(W)for(const O of W){let D="Sexagem: ",N=[];if(O.observacoes){const F=O.observacoes.match(/SEXAGENS:([^|]+)/);F&&(N=F[1].split(",").map(j=>j.trim()).filter(j=>j).map(j=>({FEMEA:"Fmea",MACHO:"Macho",SEM_SEXO:"Sem Sexo",VAZIA:"Vazia"})[j]||j))}if(N.length===0&&O.sexagem){const F={FEMEA:"Fmea",MACHO:"Macho"};N.push(F[O.sexagem]||O.sexagem)}N.length>0?(N.length===1?D+=N[0]:N.length===2?N[0]===N[1]?D+=`2 ${N[0]}s`:D+=`${N[0]} e ${N[1]}`:D+=N.join(", "),O.numero_gestacoes&&O.numero_gestacoes>1&&(D+=` (${O.numero_gestacoes} gestaes)`)):O.resultado==="PRENHE"?D+="PRENHE":O.resultado==="VAZIA"?D+="VAZIA":D+="Resultado no disponvel",_.push({data:gs(O.data_diagnostico),tipo:"SEXAGEM",resumo:D})}const le={totalCiclos:0,totalGestacoes:0,ciclosDesdeUltimaGestacao:0};if(S){le.totalCiclos=S.length;let O=null;if(T&&T.length>0){const N=[...T].sort((F,I)=>{const j=gs(F.data_diagnostico);return gs(I.data_diagnostico).localeCompare(j)}).find(F=>F.resultado==="PRENHE"||F.resultado==="RETOQUE");N&&(O=gs(N.data_diagnostico))}if(O)for(const D of S){const N=Array.isArray(D.protocolos_sincronizacao)?D.protocolos_sincronizacao[0]:D.protocolos_sincronizacao;if(!N)continue;const F=N.passo2_data||N.data_inicio;if(!F)continue;gs(F)>O&&le.ciclosDesdeUltimaGestacao++}else le.ciclosDesdeUltimaGestacao=le.totalCiclos}if(T){const O=new Set;T.forEach(D=>{if(D.resultado==="PRENHE"||D.resultado==="RETOQUE"){const N=D.data_te||D.data_diagnostico;O.add(N)}}),le.totalGestacoes=O.size}_.sort((O,D)=>D.data>O.data?1:D.data<O.data?-1:0),g.sort((O,D)=>D.data>O.data?1:D.data<O.data?-1:0),d(_),h(g),m(le)}catch(_){s({title:"Erro ao carregar histrico",description:_ instanceof Error?_.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},x=_=>({CADASTRO:r.jsx(fp,{className:"w-4 h-4 text-indigo-600"}),MUDANCA_FAZENDA:r.jsx(Xv,{className:"w-4 h-4 text-orange-600"}),PROTOCOLO:r.jsx(up,{className:"w-4 h-4 text-blue-600"}),TE:r.jsx(Wv,{className:"w-4 h-4 text-green-600"}),DG:r.jsx(Zv,{className:"w-4 h-4 text-purple-600"}),SEXAGEM:r.jsx(IR,{className:"w-4 h-4 text-pink-600"})})[_]||r.jsx(up,{className:"w-4 h-4"}),y=_=>({CADASTRO:r.jsx(Qe,{variant:"outline",className:"bg-indigo-50 text-indigo-700 border-indigo-200",children:"Cadastro"}),MUDANCA_FAZENDA:r.jsx(Qe,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:"Fazenda"}),PROTOCOLO:r.jsx(Qe,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Protocolo"}),TE:r.jsx(Qe,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"TE"}),DG:r.jsx(Qe,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:"DG"}),SEXAGEM:r.jsx(Qe,{variant:"outline",className:"bg-pink-50 text-pink-700 border-pink-200",children:"Sexagem"})})[_]||r.jsx(Qe,{variant:"outline",children:_});return r.jsx(ZN,{open:t,onOpenChange:a,children:r.jsxs(Pg,{className:"w-full sm:max-w-3xl overflow-y-auto",children:[r.jsxs(Ig,{children:[r.jsx(Lg,{children:"Histrico da Receptora"}),r.jsx(Fg,{children:i?`Brinco ${i.identificacao} ${i.nome?`- ${i.nome}`:""}`:"Carregando..."})]}),n?r.jsx("div",{className:"py-8",children:r.jsx(Nt,{})}):r.jsxs("div",{className:"mt-6 space-y-4",children:[i&&r.jsxs(r.Fragment,{children:[r.jsx(Oe,{children:r.jsx(ze,{className:"pt-6",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-500",children:"Brinco"}),r.jsx("p",{className:"font-medium",children:i.identificacao})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-500",children:"Nome"}),r.jsx("p",{className:"font-medium",children:i.nome||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-500",children:"Status Atual"}),r.jsx(kn,{status:i.status_reprodutivo||"VAZIA"})]})]})})}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{className:"text-base",children:"Estatsticas Reprodutivas"})}),r.jsx(ze,{children:r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-700",children:p.totalCiclos}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Ciclos Realizados"})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg border border-green-200",children:[r.jsx("p",{className:"text-2xl font-bold text-green-700",children:p.totalGestacoes}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Gestaes"})]}),r.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg border border-orange-200",children:[r.jsx("p",{className:"text-2xl font-bold text-orange-700",children:p.ciclosDesdeUltimaGestacao}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Ciclos desde ltima Gestao"})]})]})})]})]}),f.length>0&&r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{className:"text-base",children:"Histrico Administrativo"})}),r.jsx(ze,{children:r.jsx("div",{className:"space-y-3",children:f.map((_,g)=>r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-[100px]",children:[x(_.tipo),y(_.tipo)]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-slate-900",children:_.resumo}),r.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:L_(_.data)})]})]},g))})})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsxs(ke,{className:"text-base",children:["Linha do Tempo Reprodutiva (",c.length," eventos)"]})}),r.jsx(ze,{children:c.length===0?r.jsx("div",{className:"text-center py-8 text-slate-500",children:"Nenhum evento registrado"}):r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{className:"w-[100px]",children:"Data"}),r.jsx(K,{className:"w-[120px]",children:"Tipo"}),r.jsx(K,{children:"Resumo"})]})}),r.jsx(jt,{children:c.map((_,g)=>r.jsxs(Re,{className:"hover:bg-slate-50",children:[r.jsx(Y,{className:"font-medium text-sm",children:L_(_.data)}),r.jsx(Y,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[x(_.tipo),y(_.tipo)]})}),r.jsx(Y,{children:r.jsx("span",{className:"text-sm",children:_.resumo})})]},g))})]})})]})]})]})})}function R6(){const[e,t]=u.useState([]),[a,s]=u.useState([]),[n,o]=u.useState([]),[i,l]=u.useState(""),[c,d]=u.useState(""),[f,h]=u.useState("all"),[p,m]=u.useState([]),[b,x]=u.useState(!0),[y,_]=u.useState(!1),[g,v]=u.useState(!1),[w,E]=u.useState(!1),[S,T]=u.useState(!1),[q,k]=u.useState(!1),[$,Z]=u.useState(""),[W,le]=u.useState(!1),[O,D]=u.useState(!1),[N,F]=u.useState(null),[I,j]=u.useState(""),[A,L]=u.useState(""),[R,P]=u.useState(!1),[H,V]=u.useState(!1),{toast:ae}=aa(),[G,be]=u.useState({identificacao:"",nome:""}),[de,U]=u.useState({identificacao:"",nome:""});u.useEffect(()=>{B()},[]),u.useEffect(()=>{i?oe():(t([]),s([]))},[i]),u.useEffect(()=>{ie()},[c,f,e]);const ie=()=>{let M=e;if(f!=="all"&&(M=M.filter(ee=>ee.status_calculado===f)),c.trim()){const ee=c.toLowerCase();M=M.filter(ce=>{var X;return ce.identificacao.toLowerCase().includes(ee)||((X=ce.nome)==null?void 0:X.toLowerCase().includes(ee))})}s(M)},B=async()=>{try{x(!0);const{data:M,error:ee}=await z.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(ee)throw ee;o(M||[])}catch(M){ae({title:"Erro ao carregar fazendas",description:M instanceof Error?M.message:"Erro desconhecido",variant:"destructive"})}finally{x(!1)}},oe=async()=>{try{_(!0);const{data:M,error:ee}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id, fazenda_nome_atual").eq("fazenda_id_atual",i);if(ee)throw ee;const ce=(M==null?void 0:M.map(pe=>pe.receptora_id))||[];if(ce.length===0){t([]),s([]),m([]);return}const{data:X,error:re}=await z.from("receptoras").select("*").in("id",ce).order("identificacao",{ascending:!0});if(re)throw re;const C=new Map((M==null?void 0:M.map(pe=>[pe.receptora_id,pe.fazenda_nome_atual]))||[]),Q=(X||[]).map(pe=>({...pe,fazenda_nome_atual:C.get(pe.id)})),J=Q.map(pe=>pe.id),ne=await S6(J),ge=Q.map(pe=>({...pe,status_calculado:ne.get(pe.id)||"VAZIA"})),he=Array.from(new Set(ge.map(pe=>pe.status_calculado))).filter(pe=>pe).sort();m(he),t(ge),s(ge),h("all")}catch(M){ae({title:"Erro ao carregar receptoras",description:M instanceof Error?M.message:"Erro desconhecido",variant:"destructive"})}finally{_(!1)}},je=async M=>{if(M.preventDefault(),!G.identificacao.trim()){ae({title:"Erro de validao",description:"Identificao (brinco)  obrigatria",variant:"destructive"});return}if(!i){ae({title:"Erro de validao",description:"Selecione uma fazenda primeiro",variant:"destructive"});return}try{le(!0);const{data:ee,error:ce}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",i);if(ce)throw console.error("Erro ao buscar receptoras da fazenda:",ce),ce;const X=(ee==null?void 0:ee.map(ne=>ne.receptora_id))||[];if(X.length>0){const{data:ne,error:ge}=await z.from("receptoras").select("id, identificacao, nome").in("id",X).ilike("identificacao",G.identificacao.trim());if(ge)throw console.error("Erro ao verificar brinco duplicado:",ge),ge;if(ne&&ne.length>0){const he=ne[0].nome?`"${ne[0].nome}"`:"sem nome",pe=`J existe uma receptora com o brinco "${G.identificacao.trim()}" nesta fazenda (Nome: ${he}).`;throw console.error("Brinco duplicado detectado:",pe,ne),new Error(pe)}}if(G.nome.trim()&&X.length>0){const{data:ne,error:ge}=await z.from("receptoras").select("id, identificacao").in("id",X).ilike("nome",G.nome.trim());if(ge)throw console.error("Erro ao verificar nome duplicado:",ge),ge;if(ne&&ne.length>0)throw new Error(`J existe uma receptora com o nome "${G.nome.trim()}" nesta fazenda (Brinco: ${ne[0].identificacao}).`)}const re={identificacao:G.identificacao};G.nome.trim()&&(re.nome=G.nome);const{data:C,error:Q}=await z.from("receptoras").insert([re]).select().single();if(Q)throw Q.code==="23505"?new Error("J existe uma receptora com esse brinco nesta fazenda."):Q;const{error:J}=await z.from("receptora_fazenda_historico").insert([{receptora_id:C.id,fazenda_id:i,data_inicio:new Date().toISOString().split("T")[0],data_fim:null}]);J&&console.error("Erro ao criar histrico de fazenda:",J),ae({title:"Receptora criada",description:"Receptora criada com sucesso"}),v(!1),be({identificacao:"",nome:""}),oe()}catch(ee){ae({title:"Erro ao criar receptora",description:ee instanceof Error?ee.message:"Erro desconhecido",variant:"destructive"})}finally{le(!1)}},me=M=>{F(M),U({identificacao:M.identificacao,nome:M.nome||""}),E(!0)},Ne=async M=>{if(M.preventDefault(),!!N){if(!de.identificacao.trim()){ae({title:"Erro de validao",description:"Identificao (brinco)  obrigatria",variant:"destructive"});return}try{le(!0);const ee=N.identificacao,ce=de.identificacao.trim(),X=ee!==ce,re={identificacao:ce,nome:de.nome.trim()||null},{error:C}=await z.from("receptoras").update(re).eq("id",N.id);if(C)throw C.code==="23505"?new Error("J existe uma receptora com esse brinco nesta fazenda."):C;if(X)try{const{error:Q}=await z.from("receptora_renomeacoes_historico").insert([{receptora_id:N.id,brinco_anterior:ee,brinco_novo:ce,data_renomeacao:new Date().toISOString(),motivo:"EDICAO_MANUAL",observacoes:null}]);Q&&(Q.code==="42P01"?console.warn("Tabela receptora_renomeacoes_historico no existe. Execute o script criar_tabela_historico_renomeacoes.sql"):console.error("Erro ao registrar renomeao no histrico:",Q))}catch(Q){console.error("Erro ao registrar renomeao no histrico:",Q)}ae({title:"Receptora atualizada",description:X?`Receptora atualizada. Brinco alterado de "${ee}" para "${ce}".`:"Receptora atualizada com sucesso"}),E(!1),F(null),oe()}catch(ee){ae({title:"Erro ao atualizar receptora",description:ee instanceof Error?ee.message:"Erro desconhecido",variant:"destructive"})}finally{le(!1)}}};u.useEffect(()=>{(async()=>{if(!N||!I){P(!1),L(""),V(!1);return}try{const{data:ee,error:ce}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",I);if(ce){console.error("Erro ao verificar receptoras na fazenda destino:",ce);return}const X=(ee==null?void 0:ee.map(Q=>Q.receptora_id))||[];if(X.length===0){P(!1),L(""),V(!1);return}if(N.nome&&N.nome.trim()){const{data:Q,error:J}=await z.from("receptoras").select("id, nome, identificacao").in("id",X).ilike("nome",N.nome.trim());J?console.error("Erro ao verificar nome:",J):Q&&Q.length>0?V(!0):V(!1)}else V(!1);const{data:re,error:C}=await z.from("receptoras").select("id, identificacao").in("id",X).ilike("identificacao",N.identificacao);if(C){console.error("Erro ao verificar brinco:",C);return}if(re&&re.length>0){P(!0);const Q=async(J,ne=0)=>{if(ne>10)throw new Error("No foi possvel gerar um brinco disponvel aps vrias tentativas");const ge=new Date,he=String(ge.getDate()).padStart(2,"0"),pe=String(ge.getMonth()+1).padStart(2,"0"),we=ne===0?`-MOV${he}${pe}`:`-MOV${he}${pe}-${ne}`,Ze=`${J}${we}`,{data:gt,error:Tt}=await z.from("receptoras").select("id, identificacao").in("id",X).ilike("identificacao",Ze);return Tt?(console.error("Erro ao verificar novo brinco:",Tt),Ze):gt&&gt.length>0?Q(J,ne+1):Ze};try{const J=await Q(N.identificacao);L(J)}catch(J){console.error("Erro ao gerar brinco disponvel:",J);const ne=new Date,ge=String(ne.getDate()).padStart(2,"0"),he=String(ne.getMonth()+1).padStart(2,"0"),pe=`-MOV${ge}${he}`;L(`${N.identificacao}${pe}`)}}else P(!1),L("")}catch(ee){console.error("Erro ao verificar conflitos:",ee)}})()},[N,I]);const Ae=async()=>{if(!N||!I){ae({title:"Erro de validao",description:"Selecione uma fazenda de destino",variant:"destructive"});return}if(H&&N.nome&&N.nome.trim()){ae({title:"Conflito de nome",description:`J existe uma receptora com o nome "${N.nome.trim()}" na fazenda destino. No  possvel mover esta receptora.`,variant:"destructive"});return}try{D(!0);const{data:M,error:ee}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",I);if(!ee&&M){const Q=M.map(J=>J.receptora_id);if(Q.length>0){const{data:J,error:ne}=await z.from("receptoras").select("id, identificacao").in("id",Q).ilike("identificacao",N.identificacao);if(!ne&&J&&J.length>0&&(!R||!A)){D(!1),ae({title:"Conflito de brinco",description:`J existe uma receptora com o brinco "${N.identificacao}" na fazenda destino. Aguarde enquanto o sistema gera um novo brinco...`,variant:"destructive"}),P(!0);return}}}const ce=N.identificacao;let X=ce;if(R&&A){const{data:Q,error:J}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",I);if(!J&&Q){const ge=Q.map(he=>he.receptora_id);if(ge.length>0){const{data:he,error:pe}=await z.from("receptoras").select("id, identificacao").in("id",ge).ilike("identificacao",A);if(!pe&&he&&he.length>0){let we=1,Ze=A;for(;we<=10;){const gt=new Date,Tt=String(gt.getDate()).padStart(2,"0"),it=String(gt.getMonth()+1).padStart(2,"0"),Vt=`-MOV${Tt}${it}-${we}`;Ze=`${ce}${Vt}`;const{data:kt,error:Ua}=await z.from("receptoras").select("id").in("id",ge).ilike("identificacao",Ze);if(!Ua&&(!kt||kt.length===0))break;we++}X=Ze}else X=A}else X=A}else X=A;const{error:ne}=await z.from("receptoras").update({identificacao:X}).eq("id",N.id);if(ne)throw new Error(`Erro ao atualizar brinco: ${ne.message}`);try{const{error:ge}=await z.from("receptora_renomeacoes_historico").insert([{receptora_id:N.id,brinco_anterior:ce,brinco_novo:X,data_renomeacao:new Date().toISOString(),motivo:"MUDANCA_FAZENDA",observacoes:"Renomeao automtica devido a conflito de brinco na fazenda destino"}]);ge&&(ge.code==="42P01"?console.warn("Tabela receptora_renomeacoes_historico no existe. Execute o script criar_tabela_historico_renomeacoes.sql"):console.error("Erro ao registrar renomeao no histrico:",ge))}catch(ge){console.error("Erro ao registrar renomeao no histrico:",ge)}N.identificacao=X}const{data:re,error:C}=await z.rpc("mover_receptora_fazenda",{p_receptora_id:N.id,p_nova_fazenda_id:I,p_data_mudanca:new Date().toISOString().split("T")[0],p_observacoes:null});if(C){console.error("Erro ao mover receptora:",C),console.error("Receptora ID:",N.id),console.error("Nova Fazenda ID:",I),console.error("Error code:",C.code),console.error("Error message:",C.message),console.error("Error details:",C.details);let Q="Erro ao mover receptora";C.message?Q=C.message:C.details&&(Q=C.details),ae({title:"Erro ao mover receptora",description:Q,variant:"destructive"}),D(!1);return}ae({title:"Receptora movida",description:R?`Receptora movida com sucesso. Brinco atualizado de "${ce}" para "${N.identificacao}" devido a conflito na fazenda destino.`:"Receptora movida para a nova fazenda com sucesso. Protocolos e histrico no foram afetados."}),T(!1),E(!1),F(null),j(""),P(!1),L(""),V(!1),oe()}catch(M){console.error("Erro catch ao mover receptora:",M);const ee=M instanceof Error?M.message:"Erro desconhecido ao mover receptora";ae({title:"Erro ao mover receptora",description:ee,variant:"destructive"})}finally{D(!1)}},fe=M=>{const ce={VAZIA:{variant:"outline"},EM_SINCRONIZACAO:{variant:"secondary"},"EM SINCRONIZAO":{variant:"secondary"},SINCRONIZADA:{variant:"default"},SERVIDA:{variant:"default",className:"bg-blue-600"},PRENHE:{variant:"default",className:"bg-green-600"},PRENHE_RETOQUE:{variant:"secondary",className:"bg-orange-500"},"PRENHE (RETOQUE)":{variant:"secondary",className:"bg-orange-500"},PRENHE_FEMEA:{variant:"default",className:"bg-pink-600"},"PRENHE (FMEA)":{variant:"default",className:"bg-pink-600"},PRENHE_MACHO:{variant:"default",className:"bg-blue-700"},"PRENHE (MACHO)":{variant:"default",className:"bg-blue-700"},PRENHE_SEM_SEXO:{variant:"default",className:"bg-purple-600"},"PRENHE (SEM SEXO)":{variant:"default",className:"bg-purple-600"}}[M]||{variant:"outline"};return r.jsx(Qe,{variant:ce.variant,className:ce.className,children:M})};return b?r.jsx(Nt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Receptoras"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar receptoras por fazenda"})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Selecione a Fazenda *"})}),r.jsx(ze,{children:r.jsxs(ht,{value:i,onValueChange:l,children:[r.jsx(lt,{className:"w-full",children:r.jsx(mt,{placeholder:"Selecione uma fazenda para listar receptoras"})}),r.jsx(ct,{children:n.map(M=>r.jsx(Pe,{value:M.id,children:M.nome},M.id))})]})})]}),i?r.jsxs(r.Fragment,{children:[r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Filtros"})}),r.jsx(ze,{children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 max-w-md",children:[r.jsx(te,{htmlFor:"filtro-status",children:"Status"}),r.jsxs(ht,{value:f,onValueChange:h,children:[r.jsx(lt,{id:"filtro-status",children:r.jsx(mt,{placeholder:"Todas"})}),r.jsxs(ct,{children:[r.jsx(Pe,{value:"all",children:"Todas"}),p.map(M=>r.jsx(Pe,{value:M,children:M},M))]})]})]}),r.jsxs("div",{className:"flex-1 max-w-md",children:[r.jsx(te,{htmlFor:"busca",children:"Buscar por brinco ou nome"}),r.jsxs("div",{className:"relative",children:[r.jsx(sd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),r.jsx(_e,{id:"busca",placeholder:"Buscar por brinco ou nome...",value:c,onChange:M=>d(M.target.value),className:"pl-10"})]})]})]})})]}),r.jsx("div",{className:"flex items-center justify-end",children:r.jsxs(ea,{open:g,onOpenChange:v,children:[r.jsx(Fr,{asChild:!0,children:r.jsxs(se,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Us,{className:"w-4 h-4 mr-2"}),"Nova Receptora"]})}),r.jsxs(Zt,{className:"max-w-md",children:[r.jsxs(Yt,{children:[r.jsx(Qt,{children:"Criar Nova Receptora"}),r.jsx(ta,{children:"Criar receptora na fazenda selecionada"})]}),r.jsxs("form",{onSubmit:je,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"identificacao",children:"Identificao (Brinco) *"}),r.jsx(_e,{id:"identificacao",value:G.identificacao,onChange:M=>be({...G,identificacao:M.target.value}),placeholder:"Nmero do brinco",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"nome",children:"Nome"}),r.jsx(_e,{id:"nome",value:G.nome,onChange:M=>be({...G,nome:M.target.value}),placeholder:"Nome da receptora (opcional)"})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(se,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:W,children:W?"Salvando...":"Salvar"}),r.jsx(se,{type:"button",variant:"outline",onClick:()=>v(!1),disabled:W,children:"Cancelar"})]})]})]})]})}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsxs(ke,{children:["Lista de Receptoras (",a.length,")"]})}),r.jsx(ze,{children:y?r.jsx("div",{className:"py-8",children:r.jsx(Nt,{})}):r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Brinco"}),r.jsx(K,{children:"Nome"}),r.jsx(K,{children:"Status Atual"}),r.jsx(K,{className:"text-right",children:"Aes"})]})}),r.jsx(jt,{children:a.length===0?r.jsx(Re,{children:r.jsx(Y,{colSpan:4,className:"text-center text-slate-500",children:c?"Nenhuma receptora encontrada":"Nenhuma receptora cadastrada nesta fazenda"})}):a.map(M=>r.jsxs(Re,{children:[r.jsx(Y,{className:"font-medium",children:M.identificacao}),r.jsx(Y,{children:M.nome||"-"}),r.jsx(Y,{children:fe(M.status_calculado)}),r.jsx(Y,{className:"text-right",children:r.jsxs("div",{className:"flex gap-1 justify-end",children:[r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>me(M),title:"Editar",children:r.jsx(Sc,{className:"w-4 h-4"})}),r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{Z(M.id),k(!0)},title:"Ver histrico",children:r.jsx(Kv,{className:"w-4 h-4"})})]})})]},M.id))})]})})]})]}):r.jsx(Oe,{children:r.jsx(ze,{className:"py-12 text-center",children:r.jsx("p",{className:"text-slate-500 text-lg",children:"Selecione uma fazenda para listar receptoras"})})}),r.jsx(ea,{open:w,onOpenChange:E,children:r.jsxs(Zt,{className:"max-w-md",children:[r.jsxs(Yt,{children:[r.jsx(Qt,{children:"Editar Receptora"}),r.jsx(ta,{children:"Atualizar dados da receptora"})]}),r.jsxs("form",{onSubmit:Ne,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"edit_identificacao",children:"Identificao (Brinco) *"}),r.jsx(_e,{id:"edit_identificacao",value:de.identificacao,onChange:M=>U({...de,identificacao:M.target.value}),placeholder:"Nmero do brinco",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"edit_nome",children:"Nome"}),r.jsx(_e,{id:"edit_nome",value:de.nome,onChange:M=>U({...de,nome:M.target.value}),placeholder:"Nome da receptora (opcional)"})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(se,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:W,children:W?"Salvando...":"Salvar Alteraes"}),r.jsx(se,{type:"button",variant:"outline",onClick:()=>E(!1),disabled:W,children:"Cancelar"})]})]}),r.jsxs("div",{className:"relative my-4",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("span",{className:"w-full border-t"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-white px-2 text-slate-500",children:"Ou"})})]}),r.jsxs(se,{type:"button",variant:"outline",className:"w-full",onClick:()=>{T(!0),j("")},disabled:W,children:[r.jsx(PR,{className:"w-4 h-4 mr-2"}),"Mover para outra fazenda"]})]})}),r.jsx(ea,{open:S,onOpenChange:M=>{T(M),M||(P(!1),L(""))},children:r.jsxs(Zt,{className:"max-w-md",children:[r.jsxs(Yt,{children:[r.jsx(Qt,{children:"Mover Receptora"}),r.jsxs(ta,{children:["Mover ",N==null?void 0:N.identificacao," para outra fazenda. Protocolos e histrico reprodutivo no sero afetados."]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"nova_fazenda",children:"Nova Fazenda *"}),r.jsxs(ht,{value:I,onValueChange:j,children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione a fazenda de destino"})}),r.jsx(ct,{children:n.filter(M=>M.id!==i).map(M=>r.jsx(Pe,{value:M.id,children:M.nome},M.id))})]})]}),H&&(N==null?void 0:N.nome)&&r.jsxs("div",{className:"space-y-2 p-3 bg-red-50 border border-red-200 rounded-md",children:[r.jsx("div",{className:"flex items-start gap-2",children:r.jsx("div",{className:"text-red-800 text-sm font-medium",children:" Conflito de Nome Detectado"})}),r.jsxs("div",{className:"text-red-700 text-sm",children:['J existe uma receptora com o nome "',N.nome.trim(),'" na fazenda destino.']}),r.jsx("div",{className:"text-red-600 text-xs",children:"No  possvel mover esta receptora. Edite o nome da receptora antes de mov-la."})]}),R&&A&&r.jsxs("div",{className:"space-y-2 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:[r.jsx("div",{className:"flex items-start gap-2",children:r.jsx("div",{className:"text-yellow-800 text-sm font-medium",children:" Conflito de Brinco Detectado"})}),r.jsxs("div",{className:"text-yellow-700 text-sm",children:['J existe uma receptora com o brinco "',N==null?void 0:N.identificacao,'" na fazenda destino.']}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(te,{className:"text-yellow-800 text-sm font-medium",children:"Novo Brinco Proposto:"}),r.jsx("div",{className:"p-2 bg-white border border-yellow-300 rounded text-sm font-mono text-yellow-900",children:A}),r.jsx("div",{className:"text-yellow-600 text-xs",children:"O brinco ser automaticamente atualizado para permitir a movimentao."})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(se,{type:"button",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:Ae,disabled:O||!I||H||R&&!A,children:O?"Movendo...":"Confirmar Movimentao"}),r.jsx(se,{type:"button",variant:"outline",onClick:()=>{T(!1),P(!1),L(""),V(!1)},disabled:O,children:"Cancelar"})]})]})]})}),r.jsx(QN,{receptoraId:$,open:q,onClose:()=>k(!1)})]})]})}function D6(){const e=Ca(),{toast:t}=aa(),[a,s]=u.useState(!0),[n,o]=u.useState([]),[i,l]=u.useState([]),[c,d]=u.useState(""),[f,h]=u.useState(""),[p,m]=u.useState(""),[b,x]=u.useState("all"),[y,_]=u.useState(!1),[g,v]=u.useState(1),[w,E]=u.useState(0),S=50;u.useEffect(()=>{T()},[]);const T=async()=>{try{s(!0),await q(),await k()}catch($){t({title:"Erro ao carregar dados",description:$ instanceof Error?$.message:"Erro desconhecido",variant:"destructive"})}finally{s(!1)}},q=async()=>{const{data:$,error:Z}=await z.from("fazendas").select("*").order("nome",{ascending:!0});if(Z)throw Z;l($||[])},k=async($,Z)=>{try{_(!0);const W=(Z==null?void 0:Z.fazenda)!==void 0?Z.fazenda:c,le=(Z==null?void 0:Z.dataInicio)!==void 0?Z.dataInicio:f,O=(Z==null?void 0:Z.dataFim)!==void 0?Z.dataFim:p,D=(Z==null?void 0:Z.status)!==void 0?Z.status:b,F=(($!==void 0?$:g)-1)*S,I=F+S*2-1;let j=z.from("protocolos_sincronizacao").select("*",{count:"exact"});W&&W!=="all"&&(j=j.eq("fazenda_id",W)),le&&(j=j.gte("data_inicio",le)),O&&(j=j.lte("data_inicio",O)),D==="aguardando_2_passo"?j=j.in("status",["PASSO1_FECHADO","PRIMEIRO_PASSO_FECHADO"]):D==="sincronizado"?j=j.in("status",["SINCRONIZADO","PASSO2_FECHADO"]):D==="fechado"&&(j=j.in("status",["FECHADO","EM_TE"])),j=j.order("data_inicio",{ascending:!1}).range(F,I);const{data:A,error:L,count:R}=await j;if(L)throw L;const P=(A||[]).map(B=>B.id),H=[...new Set((A||[]).map(B=>B.fazenda_id))],{data:V,error:ae}=await z.from("protocolo_receptoras").select("protocolo_id").in("protocolo_id",P);ae&&console.error("Erro ao contar receptoras:",ae);const G=(V||[]).reduce((B,oe)=>(B[oe.protocolo_id]=(B[oe.protocolo_id]||0)+1,B),{}),{data:be}=await z.from("fazendas").select("id, nome").in("id",H),de=(be||[]).reduce((B,oe)=>(B[oe.id]=oe.nome,B),{}),ie=(A||[]).map(B=>{const oe=G[B.id]||0;return oe===0?null:{...B,fazenda_nome:de[B.fazenda_id]||"N/A",receptoras_count:oe}}).filter(B=>B!==null).slice(0,S);o(ie),E(R||0)}catch(W){console.error("Erro ao carregar protocolos:",W),t({title:"Erro ao carregar protocolos",description:W instanceof Error?W.message:"Erro desconhecido",variant:"destructive"}),o([])}finally{_(!1)}};return a?r.jsx(Nt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Protocolos de Sincronizao"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar protocolos em 2 passos"})]}),r.jsxs(se,{onClick:()=>e("/protocolos/novo"),className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Us,{className:"w-4 h-4 mr-2"}),"Novo Protocolo (1 Passo)"]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Filtros"})}),r.jsxs(ze,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Filtro Rpido"}),r.jsxs(ht,{value:b,onValueChange:x,children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Todos os protocolos"})}),r.jsxs(ct,{children:[r.jsx(Pe,{value:"all",children:"Todos os protocolos"}),r.jsx(Pe,{value:"aguardando_2_passo",children:"Aguardando 2 Passo"}),r.jsx(Pe,{value:"sincronizado",children:"Sincronizados"}),r.jsx(Pe,{value:"fechado",children:"Fechados"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Fazenda"}),r.jsxs(ht,{value:c||"all",onValueChange:$=>{d($==="all"?"":$)},children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Todas as fazendas"})}),r.jsxs(ct,{children:[r.jsx(Pe,{value:"all",children:"Todas as fazendas"}),i.map($=>r.jsx(Pe,{value:$.id,children:$.nome},$.id))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Data Incio (de)"}),r.jsx(_e,{type:"date",value:f,onChange:$=>h($.target.value),placeholder:"Data inicial"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Data Incio (at)"}),r.jsx(_e,{type:"date",value:p,onChange:$=>m($.target.value),placeholder:"Data final"})]})]}),r.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[r.jsxs("div",{className:"flex flex-wrap gap-2 flex-1",children:[r.jsx(te,{className:"w-full text-sm font-medium text-slate-700",children:"Atalhos rpidos:"}),r.jsx(se,{type:"button",variant:"outline",size:"sm",onClick:()=>{const $=new Date,Z=new Date($);Z.setDate($.getDate()-7);const W=Z.toISOString().split("T")[0],le=$.toISOString().split("T")[0];h(W),m(le)},children:"ltimos 7 dias"}),r.jsx(se,{type:"button",variant:"outline",size:"sm",onClick:()=>{const $=new Date,Z=new Date($);Z.setDate($.getDate()-30);const W=Z.toISOString().split("T")[0],le=$.toISOString().split("T")[0];h(W),m(le)},children:"ltimos 30 dias"}),r.jsx(se,{type:"button",variant:"outline",size:"sm",onClick:()=>{const $=new Date,Z=new Date($);Z.setDate($.getDate()-90);const W=Z.toISOString().split("T")[0],le=$.toISOString().split("T")[0];h(W),m(le)},children:"ltimos 90 dias"})]}),r.jsxs(se,{type:"button",onClick:()=>{v(1),k(1,{fazenda:c,dataInicio:f,dataFim:p,status:b})},disabled:y,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(sd,{className:"w-4 h-4 mr-2"}),"Buscar"]})]})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsxs(ke,{children:["Protocolos de Sincronizao (",n.length,")"]})}),r.jsx(ze,{children:y?r.jsx("div",{className:"py-8",children:r.jsx(Nt,{})}):n.length===0?r.jsxs("div",{className:"py-12 text-center text-slate-500",children:[r.jsx("p",{className:"text-lg",children:"Nenhum protocolo encontrado"}),r.jsx("p",{className:"text-sm mt-2",children:"Ajuste os filtros ou adicione um novo protocolo"})]}):r.jsxs(r.Fragment,{children:[r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Fazenda"}),r.jsx(K,{children:"Data Incio"}),r.jsx(K,{children:"Data 2 Passo"}),r.jsx(K,{children:"Tcnico 2 Passo"}),r.jsx(K,{children:"Receptoras"}),r.jsx(K,{children:"Status"}),r.jsx(K,{className:"text-right",children:"Aes"})]})}),r.jsx(jt,{children:n.map($=>{const Z=$.status==="PASSO1_FECHADO"||$.status==="PRIMEIRO_PASSO_FECHADO",W=$.status==="FECHADO"||$.status==="EM_TE";return r.jsxs(Re,{children:[r.jsx(Y,{className:"font-medium",children:$.fazenda_nome}),r.jsx(Y,{children:At($.data_inicio)}),r.jsx(Y,{children:$.passo2_data?At($.passo2_data):"-"}),r.jsx(Y,{children:$.passo2_tecnico_responsavel||"-"}),r.jsx(Y,{children:$.receptoras_count}),r.jsx(Y,{children:W||$.status==="FECHADO"||$.status==="EM_TE"?r.jsx(Qe,{variant:"secondary",className:"bg-slate-500 hover:bg-slate-600 text-white",children:"Fechado"}):$.status==="SINCRONIZADO"||$.status==="PASSO2_FECHADO"?r.jsx(Qe,{variant:"default",className:"bg-green-500 hover:bg-green-600 text-white",children:"Sincronizado"}):Z?r.jsx(Qe,{variant:"secondary",className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:"Aguardando 2 Passo"}):r.jsx(Qe,{variant:"default",children:$.status||"N/A"})}),r.jsx(Y,{children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[Z&&r.jsxs(se,{variant:"default",size:"sm",onClick:()=>e(`/protocolos/${$.id}/passo2`),children:[r.jsx($R,{className:"w-4 h-4 mr-2"}),"Iniciar 2 Passo"]}),r.jsxs(se,{variant:"outline",size:"sm",onClick:()=>e(`/protocolos/${$.id}/relatorio`),children:[r.jsx(oc,{className:"w-4 h-4 mr-2"}),"Ver Relatrio"]})]})})]},$.id)})})]}),n.length>0&&r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[r.jsxs("div",{className:"text-sm text-slate-600",children:["Pgina ",g," - Mostrando ",n.length," protocolos"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(se,{variant:"outline",size:"sm",onClick:async()=>{const $=Math.max(1,g-1);v($),await k($)},disabled:g===1||y,children:[r.jsx(LR,{className:"w-4 h-4"}),"Anterior"]}),r.jsxs(se,{variant:"outline",size:"sm",onClick:async()=>{const $=g+1;v($),await k($)},disabled:n.length<S||y,children:["Prxima",r.jsx(FR,{className:"w-4 h-4"})]})]})]})]})})]})]})}var Qf="Popover",[KN,v3]=vs(Qf,[gl]),hd=gl(),[O6,Bn]=KN(Qf),XN=e=>{const{__scopePopover:t,children:a,open:s,defaultOpen:n,onOpenChange:o,modal:i=!1}=e,l=hd(t),c=u.useRef(null),[d,f]=u.useState(!1),[h,p]=Rs({prop:s,defaultProp:n??!1,onChange:o,caller:Qf});return r.jsx(cE,{...l,children:r.jsx(O6,{scope:t,contentId:qa(),triggerRef:c,open:h,onOpenChange:p,onOpenToggle:u.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:d,onCustomAnchorAdd:u.useCallback(()=>f(!0),[]),onCustomAnchorRemove:u.useCallback(()=>f(!1),[]),modal:i,children:a})})};XN.displayName=Qf;var JN="PopoverAnchor",z6=u.forwardRef((e,t)=>{const{__scopePopover:a,...s}=e,n=Bn(JN,a),o=hd(a),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=n;return u.useEffect(()=>(i(),()=>l()),[i,l]),r.jsx(jf,{...o,...s,ref:t})});z6.displayName=JN;var WN="PopoverTrigger",e1=u.forwardRef((e,t)=>{const{__scopePopover:a,...s}=e,n=Bn(WN,a),o=hd(a),i=_t(t,n.triggerRef),l=r.jsx(Be.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":n1(n.open),...s,ref:i,onClick:qe(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?l:r.jsx(jf,{asChild:!0,...o,children:l})});e1.displayName=WN;var $g="PopoverPortal",[M6,k6]=KN($g,{forceMount:void 0}),t1=e=>{const{__scopePopover:t,forceMount:a,children:s,container:n}=e,o=Bn($g,t);return r.jsx(M6,{scope:t,forceMount:a,children:r.jsx(ur,{present:a||o.open,children:r.jsx(ed,{asChild:!0,container:n,children:s})})})};t1.displayName=$g;var Xi="PopoverContent",a1=u.forwardRef((e,t)=>{const a=k6(Xi,e.__scopePopover),{forceMount:s=a.forceMount,...n}=e,o=Bn(Xi,e.__scopePopover);return r.jsx(ur,{present:s||o.open,children:o.modal?r.jsx(I6,{...n,ref:t}):r.jsx(L6,{...n,ref:t})})});a1.displayName=Xi;var P6=Eo("PopoverContent.RemoveScroll"),I6=u.forwardRef((e,t)=>{const a=Bn(Xi,e.__scopePopover),s=u.useRef(null),n=_t(t,s),o=u.useRef(!1);return u.useEffect(()=>{const i=s.current;if(i)return Ng(i)},[]),r.jsx(If,{as:P6,allowPinchZoom:!0,children:r.jsx(s1,{...e,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qe(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=a.triggerRef.current)==null||l.focus()}),onPointerDownOutside:qe(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:qe(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),L6=u.forwardRef((e,t)=>{const a=Bn(Xi,e.__scopePopover),s=u.useRef(!1),n=u.useRef(!1);return r.jsx(s1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=a.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const i=o.target;((d=a.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&n.current&&o.preventDefault()}})}),s1=u.forwardRef((e,t)=>{const{__scopePopover:a,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:f,...h}=e,p=Bn(Xi,a),m=hd(a);return Sg(),r.jsx(kf,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:o,children:r.jsx(fl,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:r.jsx(ug,{"data-state":n1(p.open),role:"dialog",id:p.contentId,...m,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),r1="PopoverClose",F6=u.forwardRef((e,t)=>{const{__scopePopover:a,...s}=e,n=Bn(r1,a);return r.jsx(Be.button,{type:"button",...s,ref:t,onClick:qe(e.onClick,()=>n.onOpenChange(!1))})});F6.displayName=r1;var $6="PopoverArrow",q6=u.forwardRef((e,t)=>{const{__scopePopover:a,...s}=e,n=hd(a);return r.jsx(fg,{...n,...s,ref:t})});q6.displayName=$6;function n1(e){return e?"open":"closed"}var B6=XN,U6=e1,H6=t1,o1=a1;const qg=B6,Bg=U6,Kf=u.forwardRef(({className:e,align:t="center",sideOffset:a=4,...s},n)=>r.jsx(H6,{children:r.jsx(o1,{ref:n,align:t,sideOffset:a,className:Ce("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));Kf.displayName=o1.displayName;var F_=1,V6=.9,G6=.8,Z6=.17,lm=.1,cm=.999,Y6=.9999,Q6=.99,K6=/[\\\/_+.#"@\[\(\{&]/,X6=/[\\\/_+.#"@\[\(\{&]/g,J6=/[\s-]/,i1=/[\s-]/g;function Fp(e,t,a,s,n,o,i){if(o===t.length)return n===e.length?F_:Q6;var l=`${n},${o}`;if(i[l]!==void 0)return i[l];for(var c=s.charAt(o),d=a.indexOf(c,n),f=0,h,p,m,b;d>=0;)h=Fp(e,t,a,s,d+1,o+1,i),h>f&&(d===n?h*=F_:K6.test(e.charAt(d-1))?(h*=G6,m=e.slice(n,d-1).match(X6),m&&n>0&&(h*=Math.pow(cm,m.length))):J6.test(e.charAt(d-1))?(h*=V6,b=e.slice(n,d-1).match(i1),b&&n>0&&(h*=Math.pow(cm,b.length))):(h*=Z6,n>0&&(h*=Math.pow(cm,d-n))),e.charAt(d)!==t.charAt(o)&&(h*=Y6)),(h<lm&&a.charAt(d-1)===s.charAt(o+1)||s.charAt(o+1)===s.charAt(o)&&a.charAt(d-1)!==s.charAt(o))&&(p=Fp(e,t,a,s,d+1,o+2,i),p*lm>h&&(h=p*lm)),h>f&&(f=h),d=a.indexOf(c,d+1);return i[l]=f,f}function $_(e){return e.toLowerCase().replace(i1," ")}function W6(e,t,a){return e=a&&a.length>0?`${e+" "+a.join(" ")}`:e,Fp(e,t,$_(e),$_(t),0,0,{})}var Pl='[cmdk-group=""]',dm='[cmdk-group-items=""]',e5='[cmdk-group-heading=""]',l1='[cmdk-item=""]',q_=`${l1}:not([aria-disabled="true"])`,$p="cmdk-item-select",ti="data-value",t5=(e,t,a)=>W6(e,t,a),c1=u.createContext(void 0),md=()=>u.useContext(c1),d1=u.createContext(void 0),Ug=()=>u.useContext(d1),u1=u.createContext(void 0),f1=u.forwardRef((e,t)=>{let a=ai(()=>{var R,P;return{search:"",value:(P=(R=e.value)!=null?R:e.defaultValue)!=null?P:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=ai(()=>new Set),n=ai(()=>new Map),o=ai(()=>new Map),i=ai(()=>new Set),l=h1(e),{label:c,children:d,value:f,onValueChange:h,filter:p,shouldFilter:m,loop:b,disablePointerSelection:x=!1,vimBindings:y=!0,..._}=e,g=qa(),v=qa(),w=qa(),E=u.useRef(null),S=f5();To(()=>{if(f!==void 0){let R=f.trim();a.current.value=R,T.emit()}},[f]),To(()=>{S(6,le)},[]);let T=u.useMemo(()=>({subscribe:R=>(i.current.add(R),()=>i.current.delete(R)),snapshot:()=>a.current,setState:(R,P,H)=>{var V,ae,G,be;if(!Object.is(a.current[R],P)){if(a.current[R]=P,R==="search")W(),$(),S(1,Z);else if(R==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let de=document.getElementById(w);de?de.focus():(V=document.getElementById(g))==null||V.focus()}if(S(7,()=>{var de;a.current.selectedItemId=(de=O())==null?void 0:de.id,T.emit()}),H||S(5,le),((ae=l.current)==null?void 0:ae.value)!==void 0){let de=P??"";(be=(G=l.current).onValueChange)==null||be.call(G,de);return}}T.emit()}},emit:()=>{i.current.forEach(R=>R())}}),[]),q=u.useMemo(()=>({value:(R,P,H)=>{var V;P!==((V=o.current.get(R))==null?void 0:V.value)&&(o.current.set(R,{value:P,keywords:H}),a.current.filtered.items.set(R,k(P,H)),S(2,()=>{$(),T.emit()}))},item:(R,P)=>(s.current.add(R),P&&(n.current.has(P)?n.current.get(P).add(R):n.current.set(P,new Set([R]))),S(3,()=>{W(),$(),a.current.value||Z(),T.emit()}),()=>{o.current.delete(R),s.current.delete(R),a.current.filtered.items.delete(R);let H=O();S(4,()=>{W(),(H==null?void 0:H.getAttribute("id"))===R&&Z(),T.emit()})}),group:R=>(n.current.has(R)||n.current.set(R,new Set),()=>{o.current.delete(R),n.current.delete(R)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:g,inputId:w,labelId:v,listInnerRef:E}),[]);function k(R,P){var H,V;let ae=(V=(H=l.current)==null?void 0:H.filter)!=null?V:t5;return R?ae(R,a.current.search,P):0}function $(){if(!a.current.search||l.current.shouldFilter===!1)return;let R=a.current.filtered.items,P=[];a.current.filtered.groups.forEach(V=>{let ae=n.current.get(V),G=0;ae.forEach(be=>{let de=R.get(be);G=Math.max(de,G)}),P.push([V,G])});let H=E.current;D().sort((V,ae)=>{var G,be;let de=V.getAttribute("id"),U=ae.getAttribute("id");return((G=R.get(U))!=null?G:0)-((be=R.get(de))!=null?be:0)}).forEach(V=>{let ae=V.closest(dm);ae?ae.appendChild(V.parentElement===ae?V:V.closest(`${dm} > *`)):H.appendChild(V.parentElement===H?V:V.closest(`${dm} > *`))}),P.sort((V,ae)=>ae[1]-V[1]).forEach(V=>{var ae;let G=(ae=E.current)==null?void 0:ae.querySelector(`${Pl}[${ti}="${encodeURIComponent(V[0])}"]`);G==null||G.parentElement.appendChild(G)})}function Z(){let R=D().find(H=>H.getAttribute("aria-disabled")!=="true"),P=R==null?void 0:R.getAttribute(ti);T.setState("value",P||void 0)}function W(){var R,P,H,V;if(!a.current.search||l.current.shouldFilter===!1){a.current.filtered.count=s.current.size;return}a.current.filtered.groups=new Set;let ae=0;for(let G of s.current){let be=(P=(R=o.current.get(G))==null?void 0:R.value)!=null?P:"",de=(V=(H=o.current.get(G))==null?void 0:H.keywords)!=null?V:[],U=k(be,de);a.current.filtered.items.set(G,U),U>0&&ae++}for(let[G,be]of n.current)for(let de of be)if(a.current.filtered.items.get(de)>0){a.current.filtered.groups.add(G);break}a.current.filtered.count=ae}function le(){var R,P,H;let V=O();V&&(((R=V.parentElement)==null?void 0:R.firstChild)===V&&((H=(P=V.closest(Pl))==null?void 0:P.querySelector(e5))==null||H.scrollIntoView({block:"nearest"})),V.scrollIntoView({block:"nearest"}))}function O(){var R;return(R=E.current)==null?void 0:R.querySelector(`${l1}[aria-selected="true"]`)}function D(){var R;return Array.from(((R=E.current)==null?void 0:R.querySelectorAll(q_))||[])}function N(R){let P=D()[R];P&&T.setState("value",P.getAttribute(ti))}function F(R){var P;let H=O(),V=D(),ae=V.findIndex(be=>be===H),G=V[ae+R];(P=l.current)!=null&&P.loop&&(G=ae+R<0?V[V.length-1]:ae+R===V.length?V[0]:V[ae+R]),G&&T.setState("value",G.getAttribute(ti))}function I(R){let P=O(),H=P==null?void 0:P.closest(Pl),V;for(;H&&!V;)H=R>0?d5(H,Pl):u5(H,Pl),V=H==null?void 0:H.querySelector(q_);V?T.setState("value",V.getAttribute(ti)):F(R)}let j=()=>N(D().length-1),A=R=>{R.preventDefault(),R.metaKey?j():R.altKey?I(1):F(1)},L=R=>{R.preventDefault(),R.metaKey?N(0):R.altKey?I(-1):F(-1)};return u.createElement(Be.div,{ref:t,tabIndex:-1,..._,"cmdk-root":"",onKeyDown:R=>{var P;(P=_.onKeyDown)==null||P.call(_,R);let H=R.nativeEvent.isComposing||R.keyCode===229;if(!(R.defaultPrevented||H))switch(R.key){case"n":case"j":{y&&R.ctrlKey&&A(R);break}case"ArrowDown":{A(R);break}case"p":case"k":{y&&R.ctrlKey&&L(R);break}case"ArrowUp":{L(R);break}case"Home":{R.preventDefault(),N(0);break}case"End":{R.preventDefault(),j();break}case"Enter":{R.preventDefault();let V=O();if(V){let ae=new Event($p);V.dispatchEvent(ae)}}}}},u.createElement("label",{"cmdk-label":"",htmlFor:q.inputId,id:q.labelId,style:m5},c),Xf(e,R=>u.createElement(d1.Provider,{value:T},u.createElement(c1.Provider,{value:q},R))))}),a5=u.forwardRef((e,t)=>{var a,s;let n=qa(),o=u.useRef(null),i=u.useContext(u1),l=md(),c=h1(e),d=(s=(a=c.current)==null?void 0:a.forceMount)!=null?s:i==null?void 0:i.forceMount;To(()=>{if(!d)return l.item(n,i==null?void 0:i.id)},[d]);let f=m1(n,o,[e.value,e.children,o],e.keywords),h=Ug(),p=Pn(S=>S.value&&S.value===f.current),m=Pn(S=>d||l.filter()===!1?!0:S.search?S.filtered.items.get(n)>0:!0);u.useEffect(()=>{let S=o.current;if(!(!S||e.disabled))return S.addEventListener($p,b),()=>S.removeEventListener($p,b)},[m,e.onSelect,e.disabled]);function b(){var S,T;x(),(T=(S=c.current).onSelect)==null||T.call(S,f.current)}function x(){h.setState("value",f.current,!0)}if(!m)return null;let{disabled:y,value:_,onSelect:g,forceMount:v,keywords:w,...E}=e;return u.createElement(Be.div,{ref:wo(o,t),...E,id:n,"cmdk-item":"",role:"option","aria-disabled":!!y,"aria-selected":!!p,"data-disabled":!!y,"data-selected":!!p,onPointerMove:y||l.getDisablePointerSelection()?void 0:x,onClick:y?void 0:b},e.children)}),s5=u.forwardRef((e,t)=>{let{heading:a,children:s,forceMount:n,...o}=e,i=qa(),l=u.useRef(null),c=u.useRef(null),d=qa(),f=md(),h=Pn(m=>n||f.filter()===!1?!0:m.search?m.filtered.groups.has(i):!0);To(()=>f.group(i),[]),m1(i,l,[e.value,e.heading,c]);let p=u.useMemo(()=>({id:i,forceMount:n}),[n]);return u.createElement(Be.div,{ref:wo(l,t),...o,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},a&&u.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},a),Xf(e,m=>u.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":a?d:void 0},u.createElement(u1.Provider,{value:p},m))))}),r5=u.forwardRef((e,t)=>{let{alwaysRender:a,...s}=e,n=u.useRef(null),o=Pn(i=>!i.search);return!a&&!o?null:u.createElement(Be.div,{ref:wo(n,t),...s,"cmdk-separator":"",role:"separator"})}),n5=u.forwardRef((e,t)=>{let{onValueChange:a,...s}=e,n=e.value!=null,o=Ug(),i=Pn(d=>d.search),l=Pn(d=>d.selectedItemId),c=md();return u.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),u.createElement(Be.input,{ref:t,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:n?e.value:i,onChange:d=>{n||o.setState("search",d.target.value),a==null||a(d.target.value)}})}),o5=u.forwardRef((e,t)=>{let{children:a,label:s="Suggestions",...n}=e,o=u.useRef(null),i=u.useRef(null),l=Pn(d=>d.selectedItemId),c=md();return u.useEffect(()=>{if(i.current&&o.current){let d=i.current,f=o.current,h,p=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let m=d.offsetHeight;f.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return p.observe(d),()=>{cancelAnimationFrame(h),p.unobserve(d)}}},[]),u.createElement(Be.div,{ref:wo(o,t),...n,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":s,id:c.listId},Xf(e,d=>u.createElement("div",{ref:wo(i,c.listInnerRef),"cmdk-list-sizer":""},d)))}),i5=u.forwardRef((e,t)=>{let{open:a,onOpenChange:s,overlayClassName:n,contentClassName:o,container:i,...l}=e;return u.createElement(Ff,{open:a,onOpenChange:s},u.createElement($f,{container:i},u.createElement(yl,{"cmdk-overlay":"",className:n}),u.createElement(bl,{"aria-label":e.label,"cmdk-dialog":"",className:o},u.createElement(f1,{ref:t,...l}))))}),l5=u.forwardRef((e,t)=>Pn(a=>a.filtered.count===0)?u.createElement(Be.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),c5=u.forwardRef((e,t)=>{let{progress:a,children:s,label:n="Loading...",...o}=e;return u.createElement(Be.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,"aria-label":n},Xf(e,i=>u.createElement("div",{"aria-hidden":!0},i)))}),ts=Object.assign(f1,{List:o5,Item:a5,Input:n5,Group:s5,Separator:r5,Dialog:i5,Empty:l5,Loading:c5});function d5(e,t){let a=e.nextElementSibling;for(;a;){if(a.matches(t))return a;a=a.nextElementSibling}}function u5(e,t){let a=e.previousElementSibling;for(;a;){if(a.matches(t))return a;a=a.previousElementSibling}}function h1(e){let t=u.useRef(e);return To(()=>{t.current=e}),t}var To=typeof window>"u"?u.useEffect:u.useLayoutEffect;function ai(e){let t=u.useRef();return t.current===void 0&&(t.current=e()),t}function Pn(e){let t=Ug(),a=()=>e(t.snapshot());return u.useSyncExternalStore(t.subscribe,a,a)}function m1(e,t,a,s=[]){let n=u.useRef(),o=md();return To(()=>{var i;let l=(()=>{var d;for(let f of a){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(d=f.current.textContent)==null?void 0:d.trim():n.current}})(),c=s.map(d=>d.trim());o.value(e,l,c),(i=t.current)==null||i.setAttribute(ti,l),n.current=l}),n}var f5=()=>{let[e,t]=u.useState(),a=ai(()=>new Map);return To(()=>{a.current.forEach(s=>s()),a.current=new Map},[e]),(s,n)=>{a.current.set(s,n),t({})}};function h5(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Xf({asChild:e,children:t},a){return e&&u.isValidElement(t)?u.cloneElement(h5(t),{ref:t.ref},a(t.props.children)):a(t)}var m5={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const p1=u.forwardRef(({className:e,...t},a)=>r.jsx(ts,{ref:a,className:Ce("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));p1.displayName=ts.displayName;const v1=u.forwardRef(({className:e,...t},a)=>r.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[r.jsx(sd,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),r.jsx(ts.Input,{ref:a,className:Ce("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));v1.displayName=ts.Input.displayName;const g1=u.forwardRef(({className:e,...t},a)=>r.jsx(ts.List,{ref:a,className:Ce("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));g1.displayName=ts.List.displayName;const x1=u.forwardRef((e,t)=>r.jsx(ts.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));x1.displayName=ts.Empty.displayName;const _1=u.forwardRef(({className:e,...t},a)=>r.jsx(ts.Group,{ref:a,className:Ce("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));_1.displayName=ts.Group.displayName;const p5=u.forwardRef(({className:e,...t},a)=>r.jsx(ts.Separator,{ref:a,className:Ce("-mx-1 h-px bg-border",e),...t}));p5.displayName=ts.Separator.displayName;const y1=u.forwardRef(({className:e,...t},a)=>r.jsx(ts.Item,{ref:a,className:Ce("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));y1.displayName=ts.Item.displayName;var b1="AlertDialog",[v5,g3]=vs(b1,[xS]),Ur=xS(),j1=e=>{const{__scopeAlertDialog:t,...a}=e,s=Ur(t);return r.jsx(Ff,{...s,...a,modal:!0})};j1.displayName=b1;var g5="AlertDialogTrigger",x5=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=Ur(a);return r.jsx(MS,{...n,...s,ref:t})});x5.displayName=g5;var _5="AlertDialogPortal",w1=e=>{const{__scopeAlertDialog:t,...a}=e,s=Ur(t);return r.jsx($f,{...s,...a})};w1.displayName=_5;var y5="AlertDialogOverlay",E1=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=Ur(a);return r.jsx(yl,{...n,...s,ref:t})});E1.displayName=y5;var Ci="AlertDialogContent",[b5,j5]=v5(Ci),w5=Wj("AlertDialogContent"),S1=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,children:s,...n}=e,o=Ur(a),i=u.useRef(null),l=_t(t,i),c=u.useRef(null);return r.jsx(vI,{contentName:Ci,titleName:N1,docsSlug:"alert-dialog",children:r.jsx(b5,{scope:a,cancelRef:c,children:r.jsxs(bl,{role:"alertdialog",...o,...n,ref:l,onOpenAutoFocus:qe(n.onOpenAutoFocus,d=>{var f;d.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(w5,{children:s}),r.jsx(S5,{contentRef:i})]})})})});S1.displayName=Ci;var N1="AlertDialogTitle",C1=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=Ur(a);return r.jsx(dd,{...n,...s,ref:t})});C1.displayName=N1;var A1="AlertDialogDescription",T1=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=Ur(a);return r.jsx(ud,{...n,...s,ref:t})});T1.displayName=A1;var E5="AlertDialogAction",R1=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,n=Ur(a);return r.jsx(qf,{...n,...s,ref:t})});R1.displayName=E5;var D1="AlertDialogCancel",O1=u.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...s}=e,{cancelRef:n}=j5(D1,a),o=Ur(a),i=_t(t,n);return r.jsx(qf,{...o,...s,ref:i})});O1.displayName=D1;var S5=({contentRef:e})=>{const t=`\`${Ci}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ci}\` by passing a \`${A1}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ci}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return u.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},N5=j1,C5=w1,z1=E1,M1=S1,k1=R1,P1=O1,I1=C1,L1=T1;const kc=N5,A5=C5,F1=u.forwardRef(({className:e,...t},a)=>r.jsx(z1,{className:Ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));F1.displayName=z1.displayName;const Ji=u.forwardRef(({className:e,...t},a)=>r.jsxs(A5,{children:[r.jsx(F1,{}),r.jsx(M1,{ref:a,className:Ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Ji.displayName=M1.displayName;const Wi=({className:e,...t})=>r.jsx("div",{className:Ce("flex flex-col space-y-2 text-center sm:text-left",e),...t});Wi.displayName="AlertDialogHeader";const el=({className:e,...t})=>r.jsx("div",{className:Ce("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});el.displayName="AlertDialogFooter";const tl=u.forwardRef(({className:e,...t},a)=>r.jsx(I1,{ref:a,className:Ce("text-lg font-semibold",e),...t}));tl.displayName=I1.displayName;const al=u.forwardRef(({className:e,...t},a)=>r.jsx(L1,{ref:a,className:Ce("text-sm text-muted-foreground",e),...t}));al.displayName=L1.displayName;const sl=u.forwardRef(({className:e,...t},a)=>r.jsx(k1,{ref:a,className:Ce(_g(),e),...t}));sl.displayName=k1.displayName;const rl=u.forwardRef(({className:e,...t},a)=>r.jsx(P1,{ref:a,className:Ce(_g({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));rl.displayName=P1.displayName;function Jf({value:e,onChange:t,disabled:a=!1,variant:s="display"}){return s==="editable"&&t&&!a?r.jsxs(qg,{children:[r.jsx(Bg,{asChild:!0,children:r.jsxs(se,{variant:"outline",size:"sm",className:"h-7 px-3",disabled:a,children:[e==="N"&&r.jsx(Qe,{variant:"outline",className:"bg-slate-100 text-slate-700 border-0",children:"N"}),e==="CL"&&r.jsx(Qe,{variant:"outline",className:"bg-blue-100 text-blue-700 border-0",children:"CL"}),!e&&r.jsx("span",{className:"text-slate-400 text-sm",children:"Selecionar"})]})}),r.jsx(Kf,{className:"w-auto p-2",align:"start",children:r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs(se,{variant:e==="N"?"default":"outline",size:"sm",className:"justify-start",onClick:()=>t("N"),children:[r.jsx(Qe,{variant:"outline",className:"bg-slate-100 text-slate-700 border-0 mr-2",children:"N"}),e==="N"&&r.jsx(Ec,{className:"w-4 h-4 ml-auto"})]}),r.jsxs(se,{variant:e==="CL"?"default":"outline",size:"sm",className:"justify-start",onClick:()=>t("CL"),children:[r.jsx(Qe,{variant:"outline",className:"bg-blue-100 text-blue-700 border-0 mr-2",children:"CL"}),e==="CL"&&r.jsx(Ec,{className:"w-4 h-4 ml-auto"})]}),e&&r.jsxs(se,{variant:"ghost",size:"sm",className:"justify-start text-slate-500",onClick:()=>t(null),children:[r.jsx(Ds,{className:"w-4 h-4 mr-2"}),"Limpar"]})]})})]}):e==="N"?r.jsx(Qe,{variant:"outline",className:"bg-slate-100 text-slate-700 text-xs",children:"N"}):e==="CL"?r.jsx(Qe,{variant:"outline",className:"bg-blue-100 text-blue-700 text-xs",children:"CL"}):r.jsx("span",{className:"text-slate-300 text-xs",children:""})}function Wf({value:e,onChange:t,disabled:a=!1,variant:s="single"}){const n=s==="row"&&t&&!a,o=l=>{switch(l){case 1:return"bg-red-500";case 2:return"bg-yellow-500";case 3:return"bg-green-500"}},i=(l,c)=>r.jsx("div",{className:Ce("w-6 h-6 rounded-full border-2 transition-all",o(l),c?"border-slate-900 scale-110":"border-slate-300",n&&!a&&"cursor-pointer hover:scale-125"),onClick:()=>n&&(t==null?void 0:t(l)),title:`Qualidade ${l}`});return s==="single"?e?r.jsx("div",{className:"flex items-center gap-1.5",children:r.jsx("div",{className:Ce("w-4 h-4 rounded-full border-2",o(e),"border-slate-300"),title:`Qualidade ${e}`})}):r.jsx("span",{className:"text-slate-300 text-xs",children:""}):r.jsxs(qg,{children:[r.jsx(Bg,{asChild:!0,children:r.jsx(se,{variant:"outline",size:"sm",className:"h-7 px-3",disabled:a,children:r.jsx("div",{className:"flex items-center gap-1",children:e?r.jsxs(r.Fragment,{children:[i(e,!1),r.jsx("span",{className:"text-sm text-slate-600 ml-1",children:e})]}):r.jsx("span",{className:"text-slate-400 text-sm",children:"Selecionar"})})})}),r.jsx(Kf,{className:"w-auto p-3",align:"start",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx("div",{className:"flex items-center gap-3",children:[1,2,3].map(l=>r.jsxs("button",{type:"button",className:Ce("flex items-center gap-2 p-2 rounded-md transition-all","hover:bg-slate-100",e===l&&"bg-slate-100"),onClick:()=>t(l),disabled:a,children:[i(l,e===l),r.jsx("span",{className:"text-sm text-slate-700",children:l}),e===l&&r.jsx(Ec,{className:"w-4 h-4 text-green-600"})]},l))}),e&&r.jsxs(se,{variant:"ghost",size:"sm",className:"justify-start text-slate-500",onClick:()=>t(null),disabled:a,children:[r.jsx(Ds,{className:"w-4 h-4 mr-2"}),"Limpar"]})]})})]})}var $1="Toggle",Hg=u.forwardRef((e,t)=>{const{pressed:a,defaultPressed:s,onPressedChange:n,...o}=e,[i,l]=Rs({prop:a,onChange:n,defaultProp:s??!1,caller:$1});return r.jsx(Be.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...o,ref:t,onClick:qe(e.onClick,()=>{e.disabled||l(!i)})})});Hg.displayName=$1;var q1=Hg,Un="ToggleGroup",[B1,x3]=vs(Un,[Uf]),U1=Uf(),Vg=Ee.forwardRef((e,t)=>{const{type:a,...s}=e;if(a==="single"){const n=s;return r.jsx(T5,{...n,ref:t})}if(a==="multiple"){const n=s;return r.jsx(R5,{...n,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Un}\``)});Vg.displayName=Un;var[H1,V1]=B1(Un),T5=Ee.forwardRef((e,t)=>{const{value:a,defaultValue:s,onValueChange:n=()=>{},...o}=e,[i,l]=Rs({prop:a,defaultProp:s??"",onChange:n,caller:Un});return r.jsx(H1,{scope:e.__scopeToggleGroup,type:"single",value:Ee.useMemo(()=>i?[i]:[],[i]),onItemActivate:l,onItemDeactivate:Ee.useCallback(()=>l(""),[l]),children:r.jsx(G1,{...o,ref:t})})}),R5=Ee.forwardRef((e,t)=>{const{value:a,defaultValue:s,onValueChange:n=()=>{},...o}=e,[i,l]=Rs({prop:a,defaultProp:s??[],onChange:n,caller:Un}),c=Ee.useCallback(f=>l((h=[])=>[...h,f]),[l]),d=Ee.useCallback(f=>l((h=[])=>h.filter(p=>p!==f)),[l]);return r.jsx(H1,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:d,children:r.jsx(G1,{...o,ref:t})})});Vg.displayName=Un;var[D5,O5]=B1(Un),G1=Ee.forwardRef((e,t)=>{const{__scopeToggleGroup:a,disabled:s=!1,rovingFocus:n=!0,orientation:o,dir:i,loop:l=!0,...c}=e,d=U1(a),f=Bf(i),h={role:"group",dir:f,...c};return r.jsx(D5,{scope:a,rovingFocus:n,disabled:s,children:n?r.jsx(BS,{asChild:!0,...d,orientation:o,dir:f,loop:l,children:r.jsx(Be.div,{...h,ref:t})}):r.jsx(Be.div,{...h,ref:t})})}),Qu="ToggleGroupItem",Z1=Ee.forwardRef((e,t)=>{const a=V1(Qu,e.__scopeToggleGroup),s=O5(Qu,e.__scopeToggleGroup),n=U1(e.__scopeToggleGroup),o=a.value.includes(e.value),i=s.disabled||e.disabled,l={...e,pressed:o,disabled:i},c=Ee.useRef(null);return s.rovingFocus?r.jsx(US,{asChild:!0,...n,focusable:!i,active:o,ref:c,children:r.jsx(B_,{...l,ref:t})}):r.jsx(B_,{...l,ref:t})});Z1.displayName=Qu;var B_=Ee.forwardRef((e,t)=>{const{__scopeToggleGroup:a,value:s,...n}=e,o=V1(Qu,a),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=o.type==="single"?i:void 0;return r.jsx(Hg,{...l,...n,ref:t,onPressedChange:c=>{c?o.onItemActivate(s):o.onItemDeactivate(s)}})}),Y1=Vg,Q1=Z1;const K1=hl("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),z5=u.forwardRef(({className:e,variant:t,size:a,...s},n)=>r.jsx(q1,{ref:n,className:Ce(K1({variant:t,size:a,className:e})),...s}));z5.displayName=q1.displayName;const X1=u.createContext({size:"default",variant:"default"}),J1=u.forwardRef(({className:e,variant:t,size:a,children:s,...n},o)=>r.jsx(Y1,{ref:o,className:Ce("flex items-center justify-center gap-1",e),...n,children:r.jsx(X1.Provider,{value:{variant:t,size:a},children:s})}));J1.displayName=Y1.displayName;const qp=u.forwardRef(({className:e,children:t,variant:a,size:s,...n},o)=>{const i=u.useContext(X1);return r.jsx(Q1,{ref:o,className:Ce(K1({variant:i.variant||a,size:i.size||s}),e),...n,children:t})});qp.displayName=Q1.displayName;function U_({ciclandoValue:e,qualidadeValue:t,onChangeCiclando:a,onChangeQualidade:s,disabled:n=!1,size:o="sm"}){const i=o==="sm"?"text-xs":"text-sm",l=o==="sm"?"w-4 h-4":"w-5 h-5",c=d=>{switch(d){case 1:return"bg-red-500";case 2:return"bg-yellow-500";case 3:return"bg-green-500"}};return r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-slate-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:Ce("text-slate-500 font-medium",i),children:"Ciclo:"}),r.jsxs(J1,{type:"single",value:e||void 0,onValueChange:d=>{n||a(d==="CL"||d==="N"?d:null)},disabled:n,className:"gap-1",children:[r.jsx(qp,{value:"CL","aria-label":"CL",size:"sm",variant:"outline",className:Ce("h-7 px-2 text-xs",e==="CL"&&"bg-blue-100 text-blue-700 border-blue-300 data-[state=on]:bg-blue-100",n&&"opacity-60"),children:"CL"}),r.jsx(qp,{value:"N","aria-label":"N",size:"sm",variant:"outline",className:Ce("h-7 px-2 text-xs",e==="N"&&"bg-slate-100 text-slate-700 border-slate-300 data-[state=on]:bg-slate-100",n&&"opacity-60"),children:"N"})]}),e&&!n&&r.jsx(se,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-slate-400 hover:text-slate-600",onClick:()=>a(null),type:"button",children:r.jsx(Ds,{className:"w-3 h-3"})}),!e&&r.jsx("span",{className:Ce("text-slate-300",i),children:""})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:Ce("text-slate-500 font-medium",i),children:"Qualidade:"}),r.jsx("div",{className:"flex items-center gap-1.5",children:[1,2,3].map(d=>r.jsx("button",{type:"button",disabled:n,onClick:()=>{n||s(t===d?null:d)},className:Ce(l,"rounded-full border-2 transition-all",c(d),t===d?"border-slate-900 scale-110 ring-2 ring-slate-300":"border-slate-300 opacity-50 hover:opacity-75 hover:scale-105",n&&"opacity-40 cursor-not-allowed",!n&&"cursor-pointer"),title:`Qualidade ${d}`},d))}),t&&!n&&r.jsx(se,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-slate-400 hover:text-slate-600",onClick:()=>s(null),type:"button",children:r.jsx(Ds,{className:"w-3 h-3"})}),!t&&r.jsx("span",{className:Ce("text-slate-300",i),children:""})]})]})}function M5(){var ie;const e=Ca(),{toast:t}=aa(),[a,s]=u.useState(!1),[n,o]=u.useState(!1),i=u.useRef(!1),[l,c]=u.useState("form"),[d,f]=u.useState([]),[h,p]=u.useState([]),[m,b]=u.useState([]),[x,y]=u.useState(!1),[_,g]=u.useState(!1),[v,w]=u.useState(!1),[E,S]=u.useState(!1),[T,q]=u.useState(""),[k,$]=u.useState(!1),[Z,W]=u.useState({fazenda_id:"",data_inicio:ic(),veterinario:"",tecnico:"",observacoes:""}),[le,O]=u.useState([]),[D,N]=u.useState({receptora_id:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),[F,I]=u.useState({identificacao:"",nome:"",observacoes:""});u.useEffect(()=>{j()},[]),u.useEffect(()=>{l==="receptoras"&&Z.fazenda_id?A(Z.fazenda_id):l!=="receptoras"&&p([])},[l,Z.fazenda_id]);const j=async()=>{try{const{data:B,error:oe}=await z.from("fazendas").select("*").order("nome",{ascending:!0});if(oe)throw oe;f(B||[])}catch(B){t({title:"Erro ao carregar fazendas",description:B instanceof Error?B.message:"Erro desconhecido",variant:"destructive"})}},A=async B=>{try{y(!0);const{data:oe,error:je}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",B);if(je)throw je;const me=(oe==null?void 0:oe.map(re=>re.receptora_id))||[];if(me.length===0){p([]),b([]);return}const{data:Ne,error:Ae}=await z.from("receptoras").select("id, identificacao, nome").in("id",me).order("identificacao",{ascending:!0});if(Ae)throw Ae;const M=(Ne||[]||[]).filter(re=>(re.id?String(re.id).trim():"")!=="").map(async re=>{const C=re.id?String(re.id).trim():"";if(!C)return null;const Q=await xo(C),J=Ni(Q,"ENTRAR_PASSO1");return{...re,status:Q,motivoIndisponivel:J.valido?void 0:J.mensagem}}),ce=(await Promise.all(M)).filter(re=>re!==null),X=ce.filter(re=>re.status==="VAZIA");p(X),b(ce)}catch(oe){console.error("Error loading receptoras:",oe),t({title:"Erro ao carregar receptoras",description:oe instanceof Error?oe.message:"Erro desconhecido",variant:"destructive"})}finally{y(!1)}},L=u.useMemo(()=>new Set(le.filter(B=>B.id&&B.id.trim()!==""&&B.id!==null&&B.id!==void 0).map(B=>String(B.id).trim())),[le]);u.useMemo(()=>h.filter(B=>{const oe=B.id?String(B.id).trim():"";return oe!==""&&!L.has(oe)}),[h,L]);const R=u.useMemo(()=>{if(!T.trim())return m.filter(oe=>{const je=oe.id?String(oe.id).trim():"";return je!==""&&!L.has(je)&&oe.status==="VAZIA"}).map(oe=>({...oe,disponivel:!0}));const B=T.toLowerCase().trim();return m.filter(oe=>{const je=oe.id?String(oe.id).trim():"";if(je===""||L.has(je))return!1;const me=(oe.identificacao||"").toLowerCase(),Ne=(oe.nome||"").toLowerCase();return me.includes(B)||Ne.includes(B)}).map(oe=>({...oe,disponivel:oe.status==="VAZIA"}))},[T,m,L]),P=()=>{if(!Z.fazenda_id||!Z.data_inicio||!Z.veterinario.trim()||!Z.tecnico.trim()){t({title:"Erro de validao",description:"Fazenda, data de incio, veterinrio e tcnico so obrigatrios",variant:"destructive"});return}c("receptoras")},H=async()=>{var Ne;const B=((Ne=D.receptora_id)==null?void 0:Ne.trim())||"";if(!B){t({title:"Erro",description:"Selecione uma receptora",variant:"destructive"});return}const oe=h.find(Ae=>(Ae.id?String(Ae.id).trim():"")===B);if(!oe||!oe.id){t({title:"Erro",description:"Receptora no encontrada ou invlida",variant:"destructive"});return}const je=await xo(B),me=Ni(je,"ENTRAR_PASSO1");if(!me.valido){t({title:"Erro de validao",description:me.mensagem||"A receptora no pode entrar no protocolo no estado atual",variant:"destructive"});return}if(L.has(B)){t({title:"Receptora j adicionada",description:"Esta receptora j est na lista de selecionadas",variant:"destructive"});return}O(Ae=>{var M;return Ae.some(ee=>(ee.id?String(ee.id).trim():"")===B)?Ae:[...Ae,{id:oe.id,identificacao:oe.identificacao,nome:oe.nome,observacoes:((M=D.observacoes)==null?void 0:M.trim())||void 0,ciclando_classificacao:D.ciclando_classificacao||null,qualidade_semaforo:D.qualidade_semaforo||null}]}),N({receptora_id:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),q(""),$(!1),w(!1)},V=async()=>{var B;if(!F.identificacao.trim()){t({title:"Erro de validao",description:"Identificao (brinco)  obrigatria",variant:"destructive"});return}try{o(!0);const{data:oe,error:je}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",Z.fazenda_id);if(je)throw console.error("Erro ao buscar receptoras da fazenda:",je),je;const me=(oe==null?void 0:oe.map(ee=>ee.receptora_id))||[];if(me.length>0){const{data:ee,error:ce}=await z.from("receptoras").select("id, identificacao, nome").in("id",me).ilike("identificacao",F.identificacao.trim());if(ce)throw console.error("Erro ao verificar brinco duplicado:",ce),ce;if(ee&&ee.length>0){const X=ee[0].nome?`"${ee[0].nome}"`:"sem nome",re=`J existe uma receptora com o brinco "${F.identificacao.trim()}" nesta fazenda (Nome: ${X}).`;throw console.error("Brinco duplicado detectado:",re,ee),new Error(re)}}if(F.nome.trim()&&me.length>0){const{data:ee,error:ce}=await z.from("receptoras").select("id, identificacao").in("id",me).ilike("nome",F.nome.trim());if(ce)throw console.error("Erro ao verificar nome duplicado:",ce),ce;if(ee&&ee.length>0)throw new Error(`J existe uma receptora com o nome "${F.nome.trim()}" nesta fazenda (Brinco: ${ee[0].identificacao}).`)}const Ne={identificacao:F.identificacao};F.nome.trim()&&(Ne.nome=F.nome);const{data:Ae,error:fe}=await z.from("receptoras").insert([Ne]).select().single();if(fe)throw fe.code==="23505"?new Error("J existe uma receptora com esse brinco nesta fazenda."):fe;const{error:M}=await z.from("receptora_fazenda_historico").insert([{receptora_id:Ae.id,fazenda_id:Z.fazenda_id,data_inicio:ic(),data_fim:null}]);M&&((B=M.message)!=null&&B.includes("brinco")||M.code==="P0001"||console.error("Erro ao criar histrico de fazenda:",M)),O([...le,{id:Ae.id,identificacao:Ae.identificacao,nome:Ae.nome,observacoes:F.observacoes||void 0,ciclando_classificacao:F.ciclando_classificacao||null,qualidade_semaforo:F.qualidade_semaforo||null,isNew:!0}]),I({identificacao:"",nome:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),S(!1),A(Z.fazenda_id)}catch(oe){t({title:"Erro ao criar receptora",description:oe instanceof Error?oe.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},ae=B=>{O(le.filter((oe,je)=>je!==B))},G=async()=>{if(i.current||n)return;if(le.length===0){t({title:"Erro de validao",description:"Adicione pelo menos 1 receptora antes de finalizar o 1 passo",variant:"destructive"});return}const B=le.filter(fe=>!fe.id||fe.id===""||fe.id===null||fe.id===void 0);if(B.length>0){console.error("Receptoras com IDs invlidos:",B),t({title:"Erro de validao",description:"Seleo de receptora invlida. Refaa a seleo.",variant:"destructive"});return}const oe=le.filter(fe=>fe.id&&fe.id!==""&&fe.id!==null&&fe.id!==void 0);if(oe.length!==le.length||oe.length===0){console.error("Receptoras invlidas ou nenhuma vlida aps validao"),t({title:"Erro de validao",description:"Seleo de receptora invlida. Refaa a seleo.",variant:"destructive"});return}const je=oe.map(fe=>fe.id),me=oe.map(fe=>fe.observacoes||null),Ne=oe.map(fe=>fe.ciclando_classificacao||null),Ae=oe.map(fe=>fe.qualidade_semaforo||null);try{i.current=!0,o(!0);const fe=`VET: ${Z.veterinario.trim()} | TEC: ${Z.tecnico.trim()}`,{data:M,error:ee}=await z.rpc("criar_protocolo_passo1_atomico",{p_fazenda_id:Z.fazenda_id,p_data_inicio:Z.data_inicio,p_responsavel_inicio:fe,p_receptoras_ids:je,p_data_inclusao:Z.data_inicio,p_observacoes:Z.observacoes.trim()||null,p_receptoras_observacoes:me});if(ee)throw console.error("Erro ao criar protocolo (RPC):",ee),ee;if(!M)throw new Error("Protocolo criado mas ID no retornado");const{data:ce,error:X}=await z.from("protocolo_receptoras").select("id, receptora_id").eq("protocolo_id",M).in("receptora_id",je);if(X)console.error("Erro ao buscar receptoras do protocolo:",X);else if(ce&&ce.length>0){const C=new Map(je.map((J,ne)=>[J,ne])),Q=ce.map(async J=>{const ne=C.get(J.receptora_id);if(ne===void 0)return;const ge=Ne[ne],he=Ae[ne],{error:pe}=await z.from("protocolo_receptoras").update({ciclando_classificacao:ge,qualidade_semaforo:he}).eq("id",J.id);pe&&console.error(`Erro ao atualizar classificaes da receptora ${J.receptora_id}:`,pe)});await Promise.allSettled(Q)}const re=je.map(async C=>{const Q=await xo(C),J=Ni(Q,"FINALIZAR_PASSO1");if(!J.valido){console.warn(`No foi possvel atualizar status da receptora ${C}: ${J.mensagem}`);return}const{error:ne}=await kg(C,"EM_SINCRONIZACAO");ne&&console.error(`Erro ao atualizar status da receptora ${C}:`,ne)});await Promise.allSettled(re),t({title:"Protocolo criado com sucesso",description:`${le.length} receptoras adicionadas ao protocolo`}),e("/protocolos")}catch(fe){console.error("Erro ao finalizar protocolo:",fe);const M=fe instanceof Error?fe.message:"Erro desconhecido ao finalizar protocolo";t({title:"Erro ao finalizar protocolo",description:M,variant:"destructive"})}finally{o(!1),i.current=!1}},be=()=>{l==="form"?e("/protocolos"):c("form")},de=()=>{Z.fazenda_id||le.length>0?g(!0):e("/protocolos")},U=()=>{g(!1),e("/protocolos")};return l==="form"?r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(se,{variant:"ghost",size:"sm",onClick:de,children:r.jsx(Wa,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Novo Protocolo"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Primeira visita - Cadastrar novo protocolo de sincronizao"})]})]})}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Informaes do Protocolo"})}),r.jsx(ze,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"fazenda_id",children:"Fazenda *"}),r.jsxs(ht,{value:Z.fazenda_id,onValueChange:B=>W({...Z,fazenda_id:B}),children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione a fazenda"})}),r.jsx(ct,{children:d.map(B=>r.jsx(Pe,{value:B.id,children:B.nome},B.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"data_inicio",children:"Data de Incio *"}),r.jsx(_e,{id:"data_inicio",type:"date",value:Z.data_inicio,onChange:B=>W({...Z,data_inicio:B.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"veterinario",children:"Veterinrio Responsvel *"}),r.jsx(_e,{id:"veterinario",value:Z.veterinario,onChange:B=>W({...Z,veterinario:B.target.value}),placeholder:"Nome do veterinrio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"tecnico",children:"Tcnico Responsvel *"}),r.jsx(_e,{id:"tecnico",value:Z.tecnico,onChange:B=>W({...Z,tecnico:B.target.value}),placeholder:"Nome do tcnico/funcionrio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Ma,{id:"observacoes",value:Z.observacoes,onChange:B=>W({...Z,observacoes:B.target.value}),placeholder:"Observaes sobre o protocolo",rows:3})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx(se,{onClick:P,className:"bg-green-600 hover:bg-green-700",disabled:a,children:"Continuar para Receptoras"}),r.jsx(se,{type:"button",variant:"outline",onClick:de,disabled:a,children:"Sair"})]})]})})]}),r.jsx(kc,{open:_,onOpenChange:g,children:r.jsxs(Ji,{children:[r.jsxs(Wi,{children:[r.jsx(tl,{children:"Sair sem finalizar?"}),r.jsx(al,{children:"Se voc sair agora, nenhum protocolo ser criado. Todos os dados preenchidos sero perdidos."})]}),r.jsxs(el,{children:[r.jsx(rl,{children:"Cancelar"}),r.jsx(sl,{onClick:U,children:"Sim, sair"})]})]})})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(se,{variant:"ghost",size:"sm",onClick:be,children:r.jsx(Wa,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Adicionar Receptoras"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Selecione as receptoras para este protocolo"})]})]}),r.jsxs(se,{variant:"ghost",onClick:de,children:[r.jsx(Ds,{className:"w-4 h-4 mr-2"}),"Sair"]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Informaes do Protocolo"})}),r.jsxs(ze,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:((ie=d.find(B=>B.id===Z.fazenda_id))==null?void 0:ie.nome)||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data Incio"}),r.jsx("p",{className:"text-base text-slate-900",children:Z.data_inicio})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Veterinrio"}),r.jsx("p",{className:"text-base text-slate-900",children:Z.veterinario})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tcnico"}),r.jsx("p",{className:"text-base text-slate-900",children:Z.tecnico})]})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ke,{children:["Receptoras do Protocolo (",le.length,")"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(ea,{open:v,onOpenChange:B=>{w(B),B||(N({receptora_id:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null}),q(""),$(!1))},children:[r.jsx(Fr,{asChild:!0,children:r.jsxs(se,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Us,{className:"w-4 h-4 mr-2"}),"Adicionar Receptora"]})}),r.jsxs(Zt,{className:"max-w-lg",children:[r.jsxs(Yt,{children:[r.jsx(Qt,{children:"Adicionar Receptora ao Protocolo"}),r.jsx(ta,{children:"Busque por identificao ou nome. Receptoras adequadas aparecero como disponveis. Receptoras inadequadas mostraro o motivo ao serem pesquisadas."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Receptora *"}),r.jsxs(qg,{open:k,onOpenChange:$,children:[r.jsx(Bg,{asChild:!0,children:r.jsxs(se,{variant:"outline",role:"combobox","aria-expanded":k,className:"w-full justify-between",onClick:()=>$(!k),children:[D.receptora_id?(()=>{const B=m.find(oe=>String(oe.id).trim()===D.receptora_id.trim());return B?`${B.identificacao}${B.nome?` - ${B.nome}`:""}`:"Selecione uma receptora"})():"Buscar receptora...",r.jsx(sd,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),r.jsx(Kf,{className:"w-[400px] p-0",align:"start",children:r.jsxs(p1,{shouldFilter:!1,children:[r.jsx(v1,{placeholder:"Buscar por identificao ou nome...",value:T,onValueChange:q}),r.jsx(g1,{children:x?r.jsx("div",{className:"p-4 text-sm text-center text-slate-500",children:"Carregando receptoras..."}):R.length===0?r.jsx(x1,{children:T.trim()?"Nenhuma receptora encontrada":"Nenhuma receptora disponvel"}):r.jsx(_1,{children:R.map(B=>{var me,Ne;const oe=B.id?String(B.id).trim():"";if(!oe)return null;const je=`${B.identificacao} ${B.nome||""}`.trim();return r.jsx(y1,{value:`${je} ${oe}`,onSelect:()=>{B.disponivel&&(N({...D,receptora_id:oe}),q(""),$(!1))},disabled:!B.disponivel,className:B.disponivel?"":"opacity-60 cursor-not-allowed",children:r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("span",{className:"flex-1",children:[B.identificacao,B.nome?` - ${B.nome}`:""]}),B.disponivel?r.jsx(Qe,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 shrink-0",children:"Disponvel"}):r.jsx(Qe,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 shrink-0",children:"Indisponvel"})]}),!B.disponivel&&r.jsx("span",{className:"text-xs text-red-600 mt-1",children:(me=B.motivoIndisponivel)!=null&&me.includes("Status atual:")&&((Ne=B.motivoIndisponivel.split("Status atual:")[1])==null?void 0:Ne.trim())||B.status})]})},B.id)})})})]})})]})]}),r.jsx("div",{className:"space-y-2",children:r.jsx(U_,{ciclandoValue:D.ciclando_classificacao,qualidadeValue:D.qualidade_semaforo,onChangeCiclando:B=>N({...D,ciclando_classificacao:B}),onChangeQualidade:B=>N({...D,qualidade_semaforo:B}),size:"sm"})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Observaes"}),r.jsx(Ma,{value:D.observacoes,onChange:B=>N({...D,observacoes:B.target.value}),placeholder:"Observaes sobre a incluso",rows:2})]}),r.jsx(se,{onClick:H,className:"w-full bg-green-600 hover:bg-green-700",disabled:x||!D.receptora_id,children:"Adicionar"})]})]})]}),r.jsxs(ea,{open:E,onOpenChange:B=>{S(B),B||I({identificacao:"",nome:"",observacoes:"",ciclando_classificacao:null,qualidade_semaforo:null})},children:[r.jsx(Fr,{asChild:!0,children:r.jsxs(se,{variant:"outline",children:[r.jsx(fp,{className:"w-4 h-4 mr-2"}),"Cadastrar Nova"]})}),r.jsxs(Zt,{children:[r.jsx(Yt,{children:r.jsx(Qt,{children:"Cadastrar Nova Receptora"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Identificao (Brinco) *"}),r.jsx(_e,{value:F.identificacao,onChange:B=>I({...F,identificacao:B.target.value}),placeholder:"Nmero do brinco"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Nome"}),r.jsx(_e,{value:F.nome,onChange:B=>I({...F,nome:B.target.value}),placeholder:"Nome da receptora (opcional)"})]}),r.jsx("div",{className:"space-y-2",children:r.jsx(U_,{ciclandoValue:F.ciclando_classificacao,qualidadeValue:F.qualidade_semaforo,onChangeCiclando:B=>I({...F,ciclando_classificacao:B}),onChangeQualidade:B=>I({...F,qualidade_semaforo:B}),size:"sm"})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Observaes"}),r.jsx(Ma,{value:F.observacoes,onChange:B=>I({...F,observacoes:B.target.value}),placeholder:"Observaes sobre a receptora",rows:2})]}),r.jsxs(se,{onClick:V,className:"w-full bg-blue-600 hover:bg-blue-700",disabled:n,children:[r.jsx(fp,{className:"w-4 h-4 mr-2"}),n?"Criando...":"Criar e Adicionar"]})]})]})]})]})]})}),r.jsx(ze,{children:le.length===0?r.jsx("div",{className:"text-center py-8 text-slate-500",children:"Nenhuma receptora adicionada. Adicione pelo menos uma antes de finalizar."}):r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Brinco"}),r.jsx(K,{children:"Nome"}),r.jsx(K,{children:"Ciclando"}),r.jsx(K,{children:"Qualidade"}),r.jsx(K,{children:"Observaes"}),r.jsx(K,{className:"text-right",children:"Aes"})]})}),r.jsx(jt,{children:le.map((B,oe)=>{const je=B.id&&B.id.trim()!==""?B.id:`new-${oe}`,me=Ae=>{O(fe=>fe.map((M,ee)=>ee===oe?{...M,ciclando_classificacao:Ae}:M))},Ne=Ae=>{O(fe=>fe.map((M,ee)=>ee===oe?{...M,qualidade_semaforo:Ae}:M))};return r.jsxs(Re,{children:[r.jsx(Y,{className:"font-medium",children:B.identificacao}),r.jsx(Y,{children:B.nome||"-"}),r.jsx(Y,{children:r.jsx(Jf,{value:B.ciclando_classificacao,onChange:me,variant:"editable"})}),r.jsx(Y,{children:r.jsx(Wf,{value:B.qualidade_semaforo,onChange:Ne,variant:"row"})}),r.jsx(Y,{children:B.observacoes||"-"}),r.jsx(Y,{className:"text-right",children:r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>ae(oe),children:r.jsx(Ds,{className:"w-4 h-4"})})})]},je)})})]})})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs(se,{onClick:G,disabled:le.length===0||n||i.current,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(ad,{className:"w-4 h-4 mr-2"}),n||i.current?"Finalizando...":"Finalizar 1 Passo"]}),r.jsx(se,{variant:"outline",onClick:be,disabled:n||i.current,children:"Voltar"})]}),r.jsx(kc,{open:_,onOpenChange:g,children:r.jsxs(Ji,{children:[r.jsxs(Wi,{children:[r.jsx(tl,{children:"Sair sem finalizar?"}),r.jsx(al,{children:"Se voc sair agora, nenhum protocolo ser criado. Todos os dados preenchidos sero perdidos."})]}),r.jsxs(el,{children:[r.jsx(rl,{children:"Cancelar"}),r.jsx(sl,{onClick:U,children:"Sim, sair"})]})]})})]})}function k5(){const{id:e}=Br(),t=Ca(),{toast:a}=aa(),[s,n]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(""),[h,p]=u.useState([]),[m,b]=u.useState([]);u.useRef(!1);const[x,y]=u.useState(!1),[_,g]=u.useState(!1),[v,w]=u.useState(!1),[E,S]=u.useState({receptora_id:"",observacoes:""}),[T,q]=u.useState({identificacao:"",nome:"",observacoes:""});u.useEffect(()=>{e&&k()},[e]);const k=async()=>{try{n(!0);const{data:O,error:D}=await z.from("protocolos_sincronizacao").select("*").eq("id",e).single();if(D)throw D;c(O);const{data:N,error:F}=await z.from("fazendas").select("nome").eq("id",O.fazenda_id).single();if(F)throw F;f(N.nome),await $(),await Z(O.fazenda_id)}catch(O){a({title:"Erro ao carregar dados",description:O instanceof Error?O.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},$=async()=>{try{const{data:O,error:D}=await z.from("protocolo_receptoras").select("*").eq("protocolo_id",e);if(D)throw D;if(!O||O.length===0){p([]);return}const N=O.map(L=>L.receptora_id),{data:F,error:I}=await z.from("receptoras").select("*").in("id",N);if(I)throw I;const j=new Map((F==null?void 0:F.map(L=>[L.id,L]))||[]),A=O.map(L=>{const R=j.get(L.receptora_id);return R?{...R,pr_id:L.id,pr_status:L.status,pr_motivo_inapta:L.motivo_inapta,pr_observacoes:L.observacoes}:(console.warn(`Receptora ${L.receptora_id} no encontrada`),null)}).filter(L=>L!==null);p(A)}catch(O){console.error("Error loading receptoras:",O)}},Z=async O=>{try{const{data:D,error:N}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",O);if(N)throw N;const F=(D==null?void 0:D.map(G=>G.receptora_id))||[];if(F.length===0){b([]);return}const{data:I,error:j}=await z.from("receptoras").select("id, identificacao, nome").in("id",F).order("identificacao",{ascending:!0});if(j)throw j;const A=I||[],{data:L,error:R}=await z.from("protocolo_receptoras").select("receptora_id").eq("protocolo_id",e);if(R)throw R;const P=(L==null?void 0:L.map(G=>G.receptora_id))||[],H=(A||[]).filter(G=>!P.includes(G.id)).map(async G=>await xo(G.id)==="VAZIA"?G:null),ae=(await Promise.all(H)).filter(G=>G!==null);b(ae)}catch(D){console.error("Error loading receptoras disponiveis:",D)}},W=()=>{w(!1),a({title:"1 passo concludo com sucesso",description:`${h.length} receptoras em sincronizao`}),t("/protocolos")};return s?r.jsx(Nt,{}):l?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>t("/protocolos"),children:r.jsx(Wa,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["Protocolo - ",d]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Protocolo finalizado"})]})]}),r.jsx("div",{className:"flex gap-2",children:!1})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Informaes do Protocolo"})}),r.jsxs(ze,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:d})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data Incio"}),r.jsx("p",{className:"text-base text-slate-900",children:At(l.data_inicio)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Responsvel"}),r.jsx("p",{className:"text-base text-slate-900",children:l.responsavel_inicio})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Status"}),r.jsx("div",{className:"text-base text-slate-900",children:r.jsx(Qe,{variant:"secondary",children:"1 Passo Concludo"})})]})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsxs(ke,{children:["Receptoras do Protocolo (",h.length,")"]})}),r.jsx(ze,{children:r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Brinco"}),r.jsx(K,{children:"Nome"}),r.jsx(K,{children:"Status"}),r.jsx(K,{children:"Observaes"})]})}),r.jsx(jt,{children:h.length===0?r.jsx(Re,{children:r.jsx(Y,{colSpan:4,className:"text-center text-slate-500",children:"Nenhuma receptora adicionada ao protocolo"})}):h.map(O=>r.jsxs(Re,{children:[r.jsx(Y,{className:"font-medium",children:O.identificacao}),r.jsx(Y,{children:O.nome||"-"}),r.jsx(Y,{children:r.jsx(Qe,{variant:"secondary",children:O.pr_status==="INICIADA"?"Em Sincronizao":O.pr_status})}),r.jsx(Y,{className:"max-w-xs truncate",children:O.pr_observacoes||"-"})]},O.id))})]})})]}),r.jsx(ea,{open:v,onOpenChange:w,children:r.jsxs(Zt,{className:"max-w-2xl",children:[r.jsxs(Yt,{children:[r.jsxs(Qt,{className:"flex items-center gap-2",children:[r.jsx(xf,{className:"w-6 h-6 text-green-600"}),"Resumo do 1 Passo"]}),r.jsx(ta,{children:"1 passo concludo com sucesso"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:d})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data do 1 Passo"}),r.jsx("p",{className:"text-base text-slate-900",children:l&&At(l.data_inicio)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Responsvel"}),r.jsx("p",{className:"text-base text-slate-900",children:l==null?void 0:l.responsavel_inicio})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total de Receptoras"}),r.jsx("p",{className:"text-base text-slate-900 font-bold",children:h.length})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Receptoras em Sincronizao:"}),r.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-lg",children:r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Brinco"}),r.jsx(K,{children:"Nome"})]})}),r.jsx(jt,{children:h.map(O=>r.jsxs(Re,{children:[r.jsx(Y,{className:"font-medium",children:O.identificacao}),r.jsx(Y,{children:O.nome||"-"})]},O.id))})]})})]}),r.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Prximo passo:"}),' Acesse a aba "2 Passo (para confirmar)" na tela de Protocolos e clique em "INICIAR 2 PASSO" para revisar e confirmar as receptoras.']})}),r.jsx(se,{onClick:W,className:"w-full bg-green-600 hover:bg-green-700",children:"OK - Voltar para Protocolos"})]})]})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Protocolo no encontrado"}),r.jsx(se,{onClick:()=>t("/protocolos"),className:"mt-4",children:"Voltar para Protocolos"})]})}var eh="Checkbox",[P5,_3]=vs(eh),[I5,Gg]=P5(eh);function L5(e){const{__scopeCheckbox:t,checked:a,children:s,defaultChecked:n,disabled:o,form:i,name:l,onCheckedChange:c,required:d,value:f="on",internal_do_not_use_render:h}=e,[p,m]=Rs({prop:a,defaultProp:n??!1,onChange:c,caller:eh}),[b,x]=u.useState(null),[y,_]=u.useState(null),g=u.useRef(!1),v=b?!!i||!!b.closest("form"):!0,w={checked:p,disabled:o,setChecked:m,control:b,setControl:x,name:l,form:i,value:f,hasConsumerStoppedPropagationRef:g,required:d,defaultChecked:Tn(n)?!1:n,isFormControl:v,bubbleInput:y,setBubbleInput:_};return r.jsx(I5,{scope:t,...w,children:F5(h)?h(w):s})}var W1="CheckboxTrigger",eC=u.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:a,...s},n)=>{const{control:o,value:i,disabled:l,checked:c,required:d,setControl:f,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:m,bubbleInput:b}=Gg(W1,e),x=_t(n,f),y=u.useRef(c);return u.useEffect(()=>{const _=o==null?void 0:o.form;if(_){const g=()=>h(y.current);return _.addEventListener("reset",g),()=>_.removeEventListener("reset",g)}},[o,h]),r.jsx(Be.button,{type:"button",role:"checkbox","aria-checked":Tn(c)?"mixed":c,"aria-required":d,"data-state":nC(c),"data-disabled":l?"":void 0,disabled:l,value:i,...s,ref:x,onKeyDown:qe(t,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:qe(a,_=>{h(g=>Tn(g)?!0:!g),b&&m&&(p.current=_.isPropagationStopped(),p.current||_.stopPropagation())})})});eC.displayName=W1;var Zg=u.forwardRef((e,t)=>{const{__scopeCheckbox:a,name:s,checked:n,defaultChecked:o,required:i,disabled:l,value:c,onCheckedChange:d,form:f,...h}=e;return r.jsx(L5,{__scopeCheckbox:a,checked:n,defaultChecked:o,disabled:l,required:i,onCheckedChange:d,name:s,form:f,value:c,internal_do_not_use_render:({isFormControl:p})=>r.jsxs(r.Fragment,{children:[r.jsx(eC,{...h,ref:t,__scopeCheckbox:a}),p&&r.jsx(rC,{__scopeCheckbox:a})]})})});Zg.displayName=eh;var tC="CheckboxIndicator",aC=u.forwardRef((e,t)=>{const{__scopeCheckbox:a,forceMount:s,...n}=e,o=Gg(tC,a);return r.jsx(ur,{present:s||Tn(o.checked)||o.checked===!0,children:r.jsx(Be.span,{"data-state":nC(o.checked),"data-disabled":o.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});aC.displayName=tC;var sC="CheckboxBubbleInput",rC=u.forwardRef(({__scopeCheckbox:e,...t},a)=>{const{control:s,hasConsumerStoppedPropagationRef:n,checked:o,defaultChecked:i,required:l,disabled:c,name:d,value:f,form:h,bubbleInput:p,setBubbleInput:m}=Gg(sC,e),b=_t(a,m),x=Og(o),y=lg(s);u.useEffect(()=>{const g=p;if(!g)return;const v=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(v,"checked").set,S=!n.current;if(x!==o&&E){const T=new Event("click",{bubbles:S});g.indeterminate=Tn(o),E.call(g,Tn(o)?!1:o),g.dispatchEvent(T)}},[p,x,o,n]);const _=u.useRef(Tn(o)?!1:o);return r.jsx(Be.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??_.current,required:l,disabled:c,name:d,value:f,form:h,...t,tabIndex:-1,ref:b,style:{...t.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});rC.displayName=sC;function F5(e){return typeof e=="function"}function Tn(e){return e==="indeterminate"}function nC(e){return Tn(e)?"indeterminate":e?"checked":"unchecked"}const Bp=u.forwardRef(({className:e,...t},a)=>r.jsx(Zg,{ref:a,className:Ce("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(aC,{className:Ce("flex items-center justify-center text-current"),children:r.jsx(Ec,{className:"h-4 w-4"})})}));Bp.displayName=Zg.displayName;function $5(){const{id:e}=Br(),t=Ca(),{toast:a}=aa(),[s,n]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(""),[h,p]=u.useState([]),[m,b]=u.useState(!1),[x,y]=u.useState(!1),[_,g]=u.useState(!1),[v,w]=u.useState({data:"",tecnico:""}),[E,S]=u.useState({});u.useEffect(()=>{e&&q()},[e]),u.useEffect(()=>{const j=h.filter(R=>R.pr_status==="INICIADA"),A=v.data&&v.tecnico.trim(),L=j.length>0||!A;g(L&&(l==null?void 0:l.status)!=="SINCRONIZADO")},[h,l,v]);const T=u.useRef(!1);u.useEffect(()=>{if(!_){T.current=!1;return}T.current=!0;const j=L=>(L.preventDefault(),L.returnValue="Voc tem receptoras pendentes de reviso. Tem certeza que deseja sair?",L.returnValue),A=L=>{_&&(L.preventDefault(),window.history.pushState(null,"",window.location.href),y(!0))};return window.history.pushState(null,"",window.location.href),window.addEventListener("beforeunload",j),window.addEventListener("popstate",A),()=>{window.removeEventListener("beforeunload",j),window.removeEventListener("popstate",A)}},[_]);const q=async()=>{try{n(!0);const{data:j,error:A}=await z.from("protocolos_sincronizacao").select("*").eq("id",e).single();if(A)throw A;if(j.status!=="PASSO1_FECHADO"&&j.status!=="PRIMEIRO_PASSO_FECHADO"&&j.status!=="SINCRONIZADO"){a({title:"Erro",description:"Este protocolo no est aguardando o 2 passo",variant:"destructive"}),t("/protocolos");return}c(j),j.passo2_data||j.passo2_tecnico_responsavel?w({data:j.passo2_data||new Date().toISOString().split("T")[0],tecnico:j.passo2_tecnico_responsavel||""}):w({data:new Date().toISOString().split("T")[0],tecnico:""});const{data:L,error:R}=await z.from("fazendas").select("nome").eq("id",j.fazenda_id).single();if(R)throw R;f(L.nome),await k()}catch(j){a({title:"Erro ao carregar dados",description:j instanceof Error?j.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},k=async()=>{try{if(!e){console.error("ID do protocolo no fornecido"),a({title:"Erro",description:"ID do protocolo no encontrado",variant:"destructive"});return}const{data:j,error:A}=await z.from("protocolo_receptoras").select("*").eq("protocolo_id",e);if(A){console.error("Erro ao carregar receptoras do protocolo:",A),console.error("Protocolo ID:",e),console.error("Cdigo do erro:",A.code),console.error("Mensagem do erro:",A.message),console.error("Detalhes:",A.details),a({title:"Erro ao carregar receptoras",description:A.message||"Erro desconhecido ao carregar receptoras do protocolo",variant:"destructive"}),p([]);return}if(console.log("=== DEBUG loadReceptoras ==="),console.log("Protocolo ID:",e),console.log("Receptoras retornadas:",(j==null?void 0:j.length)||0),j&&j.length>0?console.log("Primeira receptora:",{id:j[0].id,protocolo_id:j[0].protocolo_id,receptora_id:j[0].receptora_id,status:j[0].status}):console.warn("Nenhuma receptora retornada pela query"),!j||j.length===0){console.error("Protocolo sem receptoras vinculadas - inconsistncia detectada"),console.error("Protocolo ID:",e);const{count:P,error:H}=await z.from("protocolo_receptoras").select("*",{count:"exact",head:!0}).eq("protocolo_id",e);console.error("Tentativa de count direto - resultado:",P),H&&console.error("Erro ao fazer count:",H),a({title:"Erro: Protocolo inconsistente",description:`Este protocolo no possui receptoras vinculadas (ID: ${e}). Verifique no banco de dados se h receptoras vinculadas a este protocolo.`,variant:"destructive"}),p([]);return}const L=[];for(const P of j){const{data:H,error:V}=await z.from("receptoras").select("*").eq("id",P.receptora_id).single();if(V){console.error("Error loading receptora:",V);continue}L.push({...H,pr_id:P.id,pr_status:P.status,pr_motivo_inapta:P.motivo_inapta,pr_observacoes:P.observacoes,pr_ciclando_classificacao:"ciclando_classificacao"in P&&(P.ciclando_classificacao==="CL"||P.ciclando_classificacao==="N")?P.ciclando_classificacao:null,pr_qualidade_semaforo:"qualidade_semaforo"in P&&typeof P.qualidade_semaforo=="number"&&P.qualidade_semaforo>=1&&P.qualidade_semaforo<=3?P.qualidade_semaforo:null})}p(L);const R={};L.filter(P=>P.pr_status==="INAPTA"&&P.pr_motivo_inapta).forEach(P=>{R[P.id]=P.pr_motivo_inapta||""}),S(R)}catch(j){console.error("Error loading receptoras:",j),a({title:"Erro ao carregar receptoras",description:j instanceof Error?j.message:"Erro desconhecido",variant:"destructive"})}},$=(j,A)=>{S(L=>({...L,[j]:A.trim()})),p(L=>L.map(R=>R.id===j?{...R,pr_motivo_inapta:A.trim()||void 0}:R))},Z=async()=>{if(o)return;if(!v.data||!v.tecnico.trim()){a({title:"Erro de validao",description:"Data de realizao do 2 passo e tcnico responsvel so obrigatrios",variant:"destructive"});return}const j=h.filter(A=>A.pr_status==="INICIADA");if(j.length>0){a({title:"Erro",description:`Ainda h ${j.length} receptora(s) pendente(s) de reviso`,variant:"destructive"});return}if(h.length===0){a({title:"Erro",description:"No  possvel finalizar protocolo sem receptoras vinculadas",variant:"destructive"});return}try{i(!0);const A=new Date,L=`${A.getFullYear()}-${String(A.getMonth()+1).padStart(2,"0")}-${String(A.getDate()).padStart(2,"0")}`,R=h.filter(de=>de.pr_status==="APTA"),P=h.filter(de=>de.pr_status==="INAPTA"),V=R.length>0?"SINCRONIZADO":"FECHADO",ae=[...R.map(async de=>{const{error:U}=await z.from("protocolo_receptoras").update({status:"APTA",motivo_inapta:null}).eq("protocolo_id",e).eq("receptora_id",de.id);if(U)throw console.error(`Erro ao atualizar status da receptora ${de.identificacao} no protocolo:`,U),U}),...P.map(async de=>{const U=E[de.id]||de.pr_motivo_inapta||null,{error:ie}=await z.from("protocolo_receptoras").update({status:"INAPTA",motivo_inapta:U||null}).eq("protocolo_id",e).eq("receptora_id",de.id);if(ie)throw console.error(`Erro ao atualizar status da receptora ${de.identificacao} no protocolo:`,ie),ie})];await Promise.allSettled(ae);const{error:G}=await z.from("protocolos_sincronizacao").update({status:V,passo2_data:v.data,passo2_tecnico_responsavel:v.tecnico.trim(),data_retirada:L,responsavel_retirada:(l==null?void 0:l.responsavel_inicio)||null}).eq("id",e);if(G)throw console.error("Erro ao atualizar status do protocolo:",G),G;c({...l,status:V,passo2_data:v.data,passo2_tecnico_responsavel:v.tecnico.trim(),data_retirada:L,responsavel_retirada:(l==null?void 0:l.responsavel_inicio)||null});const be=[...R.map(async de=>{const{error:U}=await z.from("receptoras").update({status_reprodutivo:"SINCRONIZADA"}).eq("id",de.id);U?console.error(`Erro ao atualizar status da receptora ${de.identificacao} para SINCRONIZADA:`,U):console.log(`Status da receptora ${de.identificacao} atualizado para SINCRONIZADA`)}),...P.map(async de=>{const{error:U}=await z.from("receptoras").update({status_reprodutivo:"VAZIA"}).eq("id",de.id);U?console.error(`Erro ao atualizar status da receptora ${de.identificacao} para VAZIA:`,U):console.log(`Status da receptora ${de.identificacao} atualizado para VAZIA`)})];await Promise.allSettled(be),g(!1),T.current=!1,b(!0)}catch(A){console.error("Erro ao finalizar 2 passo:",A),a({title:"Erro ao finalizar 2 passo",description:A instanceof Error?A.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},W=()=>{b(!1),a({title:"2 passo concludo com sucesso",description:`${h.filter(j=>j.pr_status==="APTA").length} receptoras confirmadas para TE`}),t("/protocolos")},le=()=>{y(!1),g(!1),T.current=!1,t("/protocolos")},O=()=>{_?y(!0):(T.current=!1,t("/protocolos"))},D=j=>{const L={INICIADA:{label:"Aguardando Reviso",variant:"secondary"},APTA:{label:"Confirmada",variant:"default"},INAPTA:{label:"Descartada",variant:"destructive"}}[j]||{label:j,variant:"outline"};return r.jsx(Qe,{variant:L.variant,children:L.label})};if(s)return r.jsx(Nt,{});if(!l)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Protocolo no encontrado"}),r.jsx(se,{onClick:()=>t("/protocolos"),className:"mt-4",children:"Voltar para Protocolos"})]});if(h.length===0&&!s)return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(se,{variant:"ghost",size:"sm",onClick:O,children:r.jsx(Wa,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["2 Passo - ",d]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Revisar e confirmar receptoras"})]})]})}),r.jsxs(Oe,{className:"border-red-200 bg-red-50",children:[r.jsx(Me,{children:r.jsx(ke,{className:"text-red-700",children:" Protocolo Inconsistente"})}),r.jsxs(ze,{className:"space-y-4",children:[r.jsx("p",{className:"text-red-800",children:"Este protocolo no possui receptoras vinculadas. No  possvel prosseguir com o 2 passo."}),r.jsx("p",{className:"text-sm text-red-700",children:"Isso pode ter ocorrido devido a um erro durante a criao do protocolo ou excluso acidental de dados."}),r.jsx(se,{onClick:()=>t("/protocolos"),variant:"outline",className:"mt-4",children:"Voltar para Protocolos"})]})]})]});const N=h.filter(j=>j.pr_status==="INICIADA"),F=h.filter(j=>j.pr_status==="APTA"),I=h.filter(j=>j.pr_status==="INAPTA");return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(se,{variant:"ghost",size:"sm",onClick:O,children:r.jsx(Wa,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["2 Passo - ",d]}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Revisar e confirmar receptoras"})]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsxs(se,{onClick:Z,disabled:N.length>0||!v.data||!v.tecnico.trim()||o,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(ad,{className:"w-4 h-4 mr-2"}),o?"Finalizando...":"Finalizar 2 Passo"]}),(N.length>0||!v.data||!v.tecnico.trim())&&r.jsx("p",{className:"text-xs text-slate-500 text-right",children:!v.data||!v.tecnico.trim()?"Preencha a data e o tcnico responsvel":N.length>0?`${N.length} receptora(s) aguardando avaliao`:""})]})]}),l&&l.status!=="SINCRONIZADO"&&r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Dados do 2 Passo"})}),r.jsxs(ze,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"passo2_data",children:"Data de Realizao do 2 Passo *"}),r.jsx(_e,{id:"passo2_data",type:"date",value:v.data,onChange:j=>w({...v,data:j.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"passo2_tecnico",children:"Tcnico Responsvel *"}),r.jsx(_e,{id:"passo2_tecnico",value:v.tecnico,onChange:j=>w({...v,tecnico:j.target.value}),placeholder:"Nome do tcnico responsvel",required:!0})]})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Informaes do Protocolo"})}),r.jsxs(ze,{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:d})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data Incio"}),r.jsx("p",{className:"text-base text-slate-900",children:At(l.data_inicio)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data do 2 Passo"}),r.jsx("p",{className:"text-base text-slate-900",children:l.passo2_data?At(l.passo2_data):v.data?At(v.data):"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tcnico 2 Passo"}),r.jsx("p",{className:"text-base text-slate-900",children:l.passo2_tecnico_responsavel||v.tecnico||"-"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(Oe,{children:[r.jsx(Me,{className:"pb-3",children:r.jsx(ke,{className:"text-base",children:"Aguardando Reviso"})}),r.jsx(ze,{children:r.jsx("p",{className:"text-3xl font-bold text-slate-900",children:N.length})})]}),r.jsxs(Oe,{children:[r.jsx(Me,{className:"pb-3",children:r.jsx(ke,{className:"text-base",children:"Confirmadas"})}),r.jsx(ze,{children:r.jsx("p",{className:"text-3xl font-bold text-green-600",children:F.length})})]}),r.jsxs(Oe,{children:[r.jsx(Me,{className:"pb-3",children:r.jsx(ke,{className:"text-base",children:"Descartadas"})}),r.jsx(ze,{children:r.jsx("p",{className:"text-3xl font-bold text-red-600",children:I.length})})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsxs(ke,{children:["Receptoras para Reviso (",h.length,")"]})}),r.jsx(ze,{children:r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Brinco"}),r.jsx(K,{children:"Nome"}),r.jsx(K,{children:"Ciclando"}),r.jsx(K,{children:"Qualidade"}),r.jsx(K,{children:"Avaliao"}),r.jsx(K,{children:"Motivo (se INAPTA)"})]})}),r.jsx(jt,{children:h.length===0?r.jsx(Re,{children:r.jsx(Y,{colSpan:6,className:"text-center text-slate-500",children:"Nenhuma receptora no protocolo"})}):h.map(j=>r.jsxs(Re,{children:[r.jsx(Y,{className:"font-medium",children:j.identificacao}),r.jsx(Y,{children:j.nome||"-"}),r.jsx(Y,{children:r.jsx(Jf,{value:j.pr_ciclando_classificacao,variant:"display",disabled:!0})}),r.jsx(Y,{children:r.jsx(Wf,{value:j.pr_qualidade_semaforo,variant:"single",disabled:!0})}),r.jsx(Y,{children:l&&l.status!=="SINCRONIZADO"?r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Bp,{id:`apta-${j.id}`,checked:j.pr_status==="APTA",onCheckedChange:A=>{A===!0?(S(R=>{const P={...R};return delete P[j.id],P}),p(R=>R.map(P=>P.id===j.id?{...P,pr_status:"APTA",pr_motivo_inapta:void 0}:P))):p(R=>R.map(P=>P.id===j.id?{...P,pr_status:"INICIADA",pr_motivo_inapta:void 0}:P))},className:"data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600 data-[state=checked]:text-white"}),r.jsx(te,{htmlFor:`apta-${j.id}`,className:"text-sm font-medium cursor-pointer text-green-700",children:"APTA"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Bp,{id:`inapta-${j.id}`,checked:j.pr_status==="INAPTA",onCheckedChange:A=>{A===!0?p(R=>R.map(P=>P.id===j.id?{...P,pr_status:"INAPTA"}:P)):(S(R=>{const P={...R};return delete P[j.id],P}),p(R=>R.map(P=>P.id===j.id?{...P,pr_status:"INICIADA",pr_motivo_inapta:void 0}:P)))},className:"data-[state=checked]:bg-red-600 data-[state=checked]:border-red-600 data-[state=checked]:text-white"}),r.jsx(te,{htmlFor:`inapta-${j.id}`,className:"text-sm font-medium cursor-pointer text-red-700",children:"INAPTA"})]})]}):D(j.pr_status)}),r.jsx(Y,{children:j.pr_status==="INAPTA"&&l&&l.status!=="SINCRONIZADO"?r.jsx(_e,{type:"text",placeholder:"Justificativa (opcional)",value:E[j.id]||j.pr_motivo_inapta||"",onChange:A=>$(j.id,A.target.value),className:"w-full"}):r.jsx("span",{className:"text-slate-500",children:j.pr_motivo_inapta||"-"})})]},j.id))})]})})]}),r.jsx(ea,{open:m,onOpenChange:b,children:r.jsxs(Zt,{className:"max-w-2xl",children:[r.jsxs(Yt,{children:[r.jsxs(Qt,{className:"flex items-center gap-2",children:[r.jsx(xf,{className:"w-6 h-6 text-green-600"}),"Resumo do 2 Passo"]}),r.jsx(ta,{children:"2 passo concludo com sucesso"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900",children:d})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data do Protocolo"}),r.jsx("p",{className:"text-base text-slate-900",children:l&&At(l.data_inicio)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total de Receptoras"}),r.jsx("p",{className:"text-base text-slate-900 font-bold",children:h.length})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Confirmadas para TE"}),r.jsx("p",{className:"text-base text-green-600 font-bold",children:F.length})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-green-700 mb-2",children:"Receptoras Confirmadas"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:F.length})]}),r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-red-700 mb-2",children:"Receptoras Descartadas"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:I.length})]})]}),r.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Protocolo concludo!"})," As receptoras confirmadas (APTA) esto prontas para transferncia de embries."]})}),r.jsx(se,{onClick:W,className:"w-full bg-green-600 hover:bg-green-700",children:"OK - Voltar para Protocolos"})]})]})}),r.jsx(ea,{open:x,onOpenChange:j=>{!j&&!o&&(y(!1),T.current=!1)},children:r.jsxs(Zt,{children:[r.jsxs(Yt,{children:[r.jsx(Qt,{children:"Cancelar 2 Passo?"}),r.jsxs(ta,{children:["Voc tem mudanas pendentes (campos no preenchidos ou receptoras no avaliadas).",r.jsx("br",{}),r.jsx("br",{}),"Ao sair, as alteraes no sero salvas e voc precisar iniciar o 2 passo novamente."]})]}),r.jsxs("div",{className:"flex gap-2 justify-end mt-4",children:[r.jsx(se,{variant:"outline",onClick:()=>{y(!1),T.current=!1},disabled:o,children:"No, continuar reviso"}),r.jsx(se,{variant:"destructive",onClick:le,children:"Sim, sair sem salvar"})]})]})})]})}function H_(){const{id:e}=Br(),t=Ca(),[a,s]=u.useState(!0),[n,o]=u.useState(null),[i,l]=u.useState(""),[c,d]=u.useState([]),[f,h]=u.useState(null),[p,m]=u.useState({totalIniciaram:0,totalConcluiram:0,totalDescartadas:0,totalConfirmadas:0}),b=async E=>{try{const{data:S}=await z.from("protocolo_receptoras").select("receptora_id").eq("protocolo_id",E.id).limit(1);if(!S||S.length===0)return E.observacoes||"";const T=S[0].receptora_id,{data:q}=await z.from("receptora_fazenda_historico").select(`
          fazenda_id,
          data_inicio
        `).eq("receptora_id",T).order("data_inicio",{ascending:!0});if(!q||q.length<2)return E.observacoes||"";const k=new Set;for(const j of q)j.fazenda_id&&k.add(j.fazenda_id);const{data:$}=await z.from("fazendas").select("id, nome").in("id",Array.from(k)),Z=new Map;if($)for(const j of $)Z.set(j.id,j.nome);const W=E.data_inicio.split("T")[0],[le,O,D]=W.split("-").map(Number),N=new Date(le,O-1,D);let F=null,I=1/0;for(let j=1;j<q.length;j++){const A=q[j],L=q[j-1],R=A.data_inicio.split("T")[0],[P,H,V]=R.split("-").map(Number),ae=new Date(P,H-1,V),G=Math.abs((ae.getTime()-N.getTime())/(1e3*60*60*24));G<=1&&G<I&&(I=G,F={fazendaOrigem:Z.get(L.fazenda_id)||"Fazenda desconhecida",fazendaDestino:Z.get(A.fazenda_id)||"Fazenda desconhecida",dataMudanca:A.data_inicio})}if(!F&&q.length>1)for(let j=q.length-1;j>=1;j--){const A=q[j],L=q[j-1],R=A.data_inicio.split("T")[0],[P,H,V]=R.split("-").map(Number),ae=new Date(P,H-1,V);if(ae<=N&&(N.getTime()-ae.getTime())/(1e3*60*60*24)<=2){F={fazendaOrigem:Z.get(L.fazenda_id)||"Fazenda desconhecida",fazendaDestino:Z.get(A.fazenda_id)||"Fazenda desconhecida",dataMudanca:A.data_inicio};break}}if(F){const j=new Date(F.dataMudanca).toLocaleDateString("pt-BR");return`${E.observacoes} (Mudana: ${F.fazendaOrigem}  ${F.fazendaDestino} em ${j})`}return E.observacoes||""}catch(S){return console.error("Erro ao enriquecer observaes:",S),E.observacoes||""}};u.useEffect(()=>{e&&x()},[e]);const x=async()=>{try{s(!0);const{data:E,error:S}=await z.from("protocolos_sincronizacao").select("*").eq("id",e).single();if(S)throw S;let T=E.observacoes;E.observacoes&&E.observacoes.includes("Protocolo criado automaticamente")&&(T=await b(E)),o({...E,observacoes:T});const{data:q,error:k}=await z.from("fazendas").select("nome").eq("id",E.fazenda_id).single();if(k)throw k;l(q.nome),await y(E.id),await _({...E,observacoes:T})}catch(E){console.error("Erro ao carregar dados:",E)}finally{s(!1)}},y=async E=>{try{const{data:S,error:T}=await z.from("protocolo_receptoras").select("id").eq("protocolo_id",E);if(T){console.error("Erro ao buscar protocolo_receptoras:",T);return}if(!S||S.length===0)return;const q=S.map(Z=>Z.id),{data:k,error:$}=await z.from("transferencias_embrioes").select("data_te, veterinario_responsavel, tecnico_responsavel").in("protocolo_receptora_id",q).eq("status_te","REALIZADA").order("data_te",{ascending:!1}).order("created_at",{ascending:!1}).limit(1).single();if($){$.code!=="PGRST116"&&console.error("Erro ao buscar TE:",$);return}k&&h({data_te:k.data_te,veterinario_responsavel:k.veterinario_responsavel||void 0,tecnico_responsavel:k.tecnico_responsavel||void 0})}catch(S){console.error("Erro ao carregar informaes da TE:",S)}},_=async E=>{try{const{data:S,error:T}=await z.from("protocolo_receptoras").select("*").eq("protocolo_id",E.id).order("data_inclusao",{ascending:!0});if(T)throw T;const q=[];for(const le of S||[]){const{data:O,error:D}=await z.from("receptoras").select("*").eq("id",le.receptora_id).single();if(D){console.error("Erro ao carregar receptora:",D);continue}q.push({...O,pr_id:le.id,pr_status:le.status,pr_motivo_inapta:le.motivo_inapta,pr_data_inclusao:le.data_inclusao,pr_data_retirada:le.data_retirada,pr_ciclando_classificacao:le.ciclando_classificacao,pr_qualidade_semaforo:le.qualidade_semaforo})}d(q);const k=q.length,$=q.filter(le=>le.pr_status==="APTA").length,Z=q.filter(le=>le.pr_status==="INAPTA").length;m({totalIniciaram:k,totalConcluiram:$,totalDescartadas:Z,totalConfirmadas:$})}catch(S){console.error("Erro ao carregar receptoras:",S)}},g=E=>{if(!E)return{veterinario:null,tecnico:null};const S=E.match(/VET:\s*(.+?)(?:\s*\||$)/i),T=E.match(/TEC:\s*(.+?)(?:\s*\||$)/i);return{veterinario:S?S[1].trim():null,tecnico:T?T[1].trim():null}},v=E=>E==="APTA"?r.jsx(Qe,{variant:"default",className:"bg-green-600",children:"Confirmada"}):E==="INAPTA"?r.jsx(Qe,{variant:"destructive",children:"Descartada"}):r.jsx(Qe,{variant:"secondary",children:E}),w=()=>{window.print()};return a?r.jsx(Nt,{}):n?r.jsxs("div",{className:"space-y-6 print:space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between print:hidden",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>t("/protocolos"),children:r.jsx(Wa,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Relatrio do Protocolo"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Visualizao somente leitura"})]})]}),r.jsxs(se,{onClick:w,variant:"outline",children:[r.jsx(GR,{className:"w-4 h-4 mr-2"}),"Imprimir"]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Informaes Gerais"})}),r.jsxs(ze,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Fazenda"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:i||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data de Incio"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:n.data_inicio?At(n.data_inicio):""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Status"}),r.jsxs("p",{className:"text-base text-slate-900 mt-1",children:[n.status==="SINCRONIZADO"&&r.jsx(Qe,{variant:"default",className:"bg-green-600",children:"Sincronizado"}),n.status==="FECHADO"&&r.jsx(Qe,{variant:"default",className:"bg-slate-600",children:"Fechado"}),n.status==="PASSO1_FECHADO"&&r.jsx(Qe,{variant:"default",className:"bg-yellow-600",children:"Aguardando 2 Passo"})]})]})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"1 Passo"})}),r.jsxs(ze,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Veterinrio Responsvel"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:g(n.responsavel_inicio).veterinario||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tcnico Responsvel"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:g(n.responsavel_inicio).tecnico||""})]})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"2 Passo"})}),r.jsxs(ze,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data de Realizao"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:n.passo2_data?At(n.passo2_data):""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tcnico Responsvel"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:n.passo2_tecnico_responsavel||""})]})]})]}),f&&(f.data_te||f.veterinario_responsavel||f.tecnico_responsavel)&&r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Transferncia de Embries"})}),r.jsxs(ze,{className:"space-y-4",children:[f.data_te&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Data da TE"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:At(f.data_te)})]}),f.veterinario_responsavel&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Veterinrio Responsvel"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:f.veterinario_responsavel})]}),f.tecnico_responsavel&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Tcnico Responsvel"}),r.jsx("p",{className:"text-base text-slate-900 mt-1",children:f.tecnico_responsavel})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(Oe,{children:[r.jsx(Me,{className:"pb-3",children:r.jsx(ke,{className:"text-base",children:"Total Iniciaram"})}),r.jsx(ze,{children:r.jsx("p",{className:"text-3xl font-bold text-slate-900",children:p.totalIniciaram})})]}),r.jsxs(Oe,{children:[r.jsx(Me,{className:"pb-3",children:r.jsx(ke,{className:"text-base",children:"Confirmadas"})}),r.jsx(ze,{children:r.jsx("p",{className:"text-3xl font-bold text-green-600",children:p.totalConfirmadas})})]}),r.jsxs(Oe,{children:[r.jsx(Me,{className:"pb-3",children:r.jsx(ke,{className:"text-base",children:"Descartadas"})}),r.jsx(ze,{children:r.jsx("p",{className:"text-3xl font-bold text-red-600",children:p.totalDescartadas})})]}),r.jsxs(Oe,{children:[r.jsx(Me,{className:"pb-3",children:r.jsx(ke,{className:"text-base",children:"Taxa de Sucesso"})}),r.jsx(ze,{children:r.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[p.totalIniciaram>0?Math.round(p.totalConfirmadas/p.totalIniciaram*100):0,"%"]})})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Receptoras e Resultado Final"})}),r.jsx(ze,{children:c.length===0?r.jsx("p",{className:"text-slate-500 text-center py-4",children:"Nenhuma receptora no protocolo"}):r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Identificao"}),r.jsx(K,{children:"Ciclando"}),r.jsx(K,{children:"Qualidade"}),r.jsx(K,{children:"Resultado Final"}),r.jsx(K,{children:"Motivo do Descarte"})]})}),r.jsx(jt,{children:c.map(E=>r.jsxs(Re,{children:[r.jsxs(Y,{className:"font-medium",children:[E.identificacao,E.nome?` - ${E.nome}`:""]}),r.jsx(Y,{children:r.jsx(Jf,{value:E.pr_ciclando_classificacao,variant:"display",disabled:!0})}),r.jsx(Y,{children:r.jsx(Wf,{value:E.pr_qualidade_semaforo,variant:"single",disabled:!0})}),r.jsx(Y,{children:v(E.pr_status)}),r.jsx(Y,{children:E.pr_motivo_inapta||""})]},E.id))})]})})]}),n.observacoes&&r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Observaes"})}),r.jsx(ze,{children:r.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:n.observacoes})})]})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Protocolo no encontrado"}),r.jsx(se,{onClick:()=>t("/protocolos"),className:"mt-4",children:"Voltar para Protocolos"})]})}function q5(){const e=Ca(),{toast:t}=aa(),[a,s]=u.useState([]),[n,o]=u.useState([]),[i,l]=u.useState([]),[c,d]=u.useState(!1),[f,h]=u.useState(!0),[p,m]=u.useState(!1),[b,x]=u.useState(""),[y,_]=u.useState(""),[g,v]=u.useState("");u.useEffect(()=>{w()},[]);const w=async()=>{try{h(!0);const{data:S,error:T}=await z.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(T)throw T;l(S||[])}catch(S){t({title:"Erro ao carregar fazendas",description:S instanceof Error?S.message:"Erro desconhecido",variant:"destructive"})}finally{h(!1)}},E=async()=>{try{d(!0);const{data:S,error:T}=await z.from("pacotes_aspiracao").select("*").order("data_aspiracao",{ascending:!1}).order("created_at",{ascending:!1});if(T)throw T;const q=new Map(i.map(N=>[N.id,N.nome])),k=(S==null?void 0:S.map(N=>N.id))||[],{data:$,error:Z}=await z.from("aspiracoes_doadoras").select("pacote_aspiracao_id").in("pacote_aspiracao_id",k);if(Z)throw Z;const W=new Map;$==null||$.forEach(N=>{N.pacote_aspiracao_id&&W.set(N.pacote_aspiracao_id,(W.get(N.pacote_aspiracao_id)||0)+1)});const{data:le}=await z.from("pacotes_aspiracao_fazendas_destino").select("pacote_aspiracao_id, fazenda_destino_id").in("pacote_aspiracao_id",k),O=new Map;le==null||le.forEach(N=>{const F=O.get(N.pacote_aspiracao_id)||[],I=q.get(N.fazenda_destino_id);I&&!F.includes(I)&&F.push(I),O.set(N.pacote_aspiracao_id,F)});const D=(S||[]).map(N=>{let F=O.get(N.id);if(!F||F.length===0)if(N.fazenda_destino_id){const I=q.get(N.fazenda_destino_id);F=I?[I]:[]}else F=[];return{...N,fazenda_nome:q.get(N.fazenda_id),fazendas_destino_nomes:F,quantidade_doadoras:W.get(N.id)||0}});s(D),m(!0)}catch(S){t({title:"Erro ao carregar dados",description:S instanceof Error?S.message:"Erro desconhecido",variant:"destructive"})}finally{d(!1)}};return u.useEffect(()=>{if(y&&g){if(y>g){o([]),s([]),m(!1);return}!p&&a.length===0&&E()}else o([]),s([]),m(!1)},[y,g]),u.useEffect(()=>{if(a.length>0&&y&&g){let S=[...a];S=S.filter(T=>{const q=T.data_aspiracao.split("T")[0];return q>=y&&q<=g}),b&&(S=S.filter(T=>T.fazenda_id===b)),o(S)}},[a,b,y,g]),f?r.jsx(Nt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Aspiraes"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar aspiraes"})]}),r.jsxs(se,{onClick:()=>e("/aspiracoes/novo"),className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Us,{className:"w-4 h-4 mr-2"}),"Nova Aspirao"]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ke,{children:"Lista de Aspiraes"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(T0,{className:"w-4 h-4 text-slate-500"}),r.jsx("span",{className:"text-sm text-slate-500",children:"Filtros"})]})]})}),r.jsxs(ze,{children:[r.jsxs("div",{className:"mb-4 flex gap-4 items-end",children:[r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx(te,{children:"Filtrar por Fazenda"}),r.jsxs(ht,{value:b||void 0,onValueChange:S=>x(S||""),children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Todas as fazendas"})}),r.jsx(ct,{children:i.map(S=>r.jsx(Pe,{value:S.id,children:S.nome},S.id))})]})]}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx(te,{children:"Data Inicial *"}),r.jsx(_e,{type:"date",value:y,onChange:S=>_(S.target.value),max:g||void 0}),y&&g&&y>g&&r.jsx("p",{className:"text-sm text-red-500",children:"A data inicial deve ser anterior ou igual  data final"})]}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx(te,{children:"Data Final *"}),r.jsx(_e,{type:"date",value:g,onChange:S=>v(S.target.value),min:y||void 0})]}),(y||g)&&r.jsxs(se,{variant:"outline",size:"sm",onClick:()=>{x(""),_(""),v("")},children:[r.jsx(Ds,{className:"w-4 h-4 mr-1"}),"Limpar Filtros"]})]}),r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Data"}),r.jsx(K,{children:"Fazenda"}),r.jsx(K,{children:"Fazenda Destino"}),r.jsx(K,{children:"Horrio Incio"}),r.jsx(K,{children:"Doadoras"}),r.jsx(K,{children:"Total Ocitos"}),r.jsx(K,{children:"Veterinrio"}),r.jsx(K,{children:"Status"}),r.jsx(K,{children:"Usado em Lote FIV"}),r.jsx(K,{className:"text-right",children:"Aes"})]})}),r.jsx(jt,{children:!y||!g?r.jsx(Re,{children:r.jsx(Y,{colSpan:11,className:"text-center text-slate-500 py-12",children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(T0,{className:"w-8 h-8 text-slate-400"}),r.jsx("p",{className:"text-lg font-medium",children:"Aplique filtros para visualizar as aspiraes"}),r.jsx("p",{className:"text-sm",children:"Selecione um intervalo de datas (data inicial e data final) para buscar aspiraes"})]})})}):c?r.jsx(Re,{children:r.jsx(Y,{colSpan:11,className:"text-center text-slate-500 py-12",children:r.jsx(Nt,{})})}):n.length===0?r.jsx(Re,{children:r.jsx(Y,{colSpan:11,className:"text-center text-slate-500 py-12",children:"Nenhuma aspirao encontrada com os filtros aplicados"})}):n.map(S=>r.jsxs(Re,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>e(`/aspiracoes/${S.id}`),children:[r.jsx(Y,{children:At(S.data_aspiracao)}),r.jsx(Y,{className:"font-medium",children:S.fazenda_nome||"-"}),r.jsx(Y,{children:r.jsx("div",{className:"flex flex-wrap gap-1",children:S.fazendas_destino_nomes&&S.fazendas_destino_nomes.length>0?S.fazendas_destino_nomes.map((T,q)=>r.jsx(Qe,{variant:"outline",className:"text-xs",children:T},q)):r.jsx("span",{className:"text-slate-400",children:"-"})})}),r.jsx(Y,{children:S.horario_inicio||"-"}),r.jsx(Y,{children:S.quantidade_doadoras||0}),r.jsx(Y,{className:"font-medium",children:S.total_oocitos||0}),r.jsx(Y,{children:S.veterinario_responsavel||"-"}),r.jsx(Y,{children:r.jsx(Qe,{variant:S.status==="FINALIZADO"?"default":"secondary",children:S.status==="FINALIZADO"?"FINALIZADO":"EM ANDAMENTO"})}),r.jsx(Y,{children:S.usado_em_lote_fiv?r.jsx(Qe,{variant:"destructive",children:"Usado"}):r.jsx(Qe,{variant:"outline",children:"Disponvel"})}),r.jsx(Y,{className:"text-right",onClick:T=>T.stopPropagation(),children:r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e(`/aspiracoes/${S.id}`),children:r.jsx(Qv,{className:"w-4 h-4"})})})]},S.id))})]})]})]})]})}function B5(){const e=Ca(),{toast:t}=aa(),[a,s]=u.useState(!0),[n,o]=u.useState(!1),[i,l]=u.useState([]),[c,d]=u.useState({fazenda_id:"",fazendas_destino_ids:[],data_aspiracao:new Date().toISOString().split("T")[0],horario_inicio:"",veterinario_responsavel:"",tecnico_responsavel:"",observacoes:""}),[f,h]=u.useState("");u.useEffect(()=>{p()},[]);const p=async()=>{try{s(!0);const{data:b,error:x}=await z.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(x)throw x;l(b||[])}catch(b){t({title:"Erro ao carregar fazendas",description:b instanceof Error?b.message:"Erro desconhecido",variant:"destructive"})}finally{s(!1)}},m=async b=>{if(b.preventDefault(),!c.fazenda_id||c.fazendas_destino_ids.length===0||!c.data_aspiracao){t({title:"Erro de validao",description:"Fazenda, pelo menos uma fazenda destino e data so obrigatrios",variant:"destructive"});return}if(!c.veterinario_responsavel.trim()){t({title:"Erro de validao",description:"Veterinrio responsvel  obrigatrio",variant:"destructive"});return}if(!c.tecnico_responsavel.trim()){t({title:"Erro de validao",description:"Tcnico responsvel  obrigatrio",variant:"destructive"});return}try{o(!0);const x=c.fazendas_destino_ids[0],y={fazenda_id:c.fazenda_id,fazenda_destino_id:x,data_aspiracao:c.data_aspiracao,horario_inicio:c.horario_inicio||null,veterinario_responsavel:c.veterinario_responsavel.trim(),tecnico_responsavel:c.tecnico_responsavel.trim(),observacoes:c.observacoes.trim()||null,status:"EM_ANDAMENTO"},{data:_,error:g}=await z.from("pacotes_aspiracao").insert([y]).select().single();if(g)throw g;const v=c.fazendas_destino_ids.map(E=>({pacote_aspiracao_id:_.id,fazenda_destino_id:E})),{error:w}=await z.from("pacotes_aspiracao_fazendas_destino").insert(v);if(w)throw w;t({title:"Aspirao criada",description:"Aspirao criada com sucesso"}),e(`/aspiracoes/${_.id}`)}catch(x){t({title:"Erro ao criar aspirao",description:x instanceof Error?x.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}};return a?r.jsx(Nt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(se,{onClick:()=>e("/aspiracoes"),variant:"outline",size:"icon",children:r.jsx(Wa,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Nova Aspirao"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Criar nova aspirao"})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Informaes da Aspirao"})}),r.jsx(ze,{children:r.jsxs("form",{onSubmit:m,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"fazenda_id",children:"Fazenda da Aspirao *"}),r.jsxs(ht,{value:c.fazenda_id,onValueChange:b=>d({...c,fazenda_id:b}),children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione a fazenda"})}),r.jsx(ct,{children:i.map(b=>r.jsx(Pe,{value:b.id,children:b.nome},b.id))})]})]}),r.jsxs("div",{className:"space-y-2 col-span-2",children:[r.jsx(te,{children:"Fazendas Destino *"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(_e,{placeholder:"Buscar fazenda destino...",value:f,onChange:b=>h(b.target.value),className:"mb-2"}),r.jsxs(ht,{value:"",onValueChange:b=>{b&&!c.fazendas_destino_ids.includes(b)&&(d({...c,fazendas_destino_ids:[...c.fazendas_destino_ids,b]}),h(""))},children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione uma fazenda destino para adicionar"})}),r.jsx(ct,{children:i.filter(b=>!c.fazendas_destino_ids.includes(b.id)).filter(b=>f.trim()===""?!0:b.nome.toLowerCase().includes(f.toLowerCase())).map(b=>r.jsx(Pe,{value:b.id,children:b.nome},b.id))})]})]}),c.fazendas_destino_ids.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.fazendas_destino_ids.map(b=>{const x=i.find(y=>y.id===b);return x?r.jsxs(Qe,{variant:"outline",className:"flex items-center gap-1 pr-1",children:[x.nome,r.jsx("button",{type:"button",onClick:y=>{y.preventDefault(),d({...c,fazendas_destino_ids:c.fazendas_destino_ids.filter(_=>_!==b)})},className:"ml-1 hover:bg-slate-200 rounded-full p-0.5",children:r.jsx(Ds,{className:"w-3 h-3"})})]},b):null})}),c.fazendas_destino_ids.length===0&&r.jsx("p",{className:"text-sm text-slate-500",children:"Selecione pelo menos uma fazenda destino"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"data_aspiracao",children:"Data da Aspirao *"}),r.jsx(_e,{id:"data_aspiracao",type:"date",value:c.data_aspiracao,onChange:b=>d({...c,data_aspiracao:b.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"horario_inicio",children:"Horrio de Incio"}),r.jsx(_e,{id:"horario_inicio",type:"time",value:c.horario_inicio,onChange:b=>d({...c,horario_inicio:b.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"veterinario_responsavel",children:"Veterinrio Responsvel *"}),r.jsx(_e,{id:"veterinario_responsavel",value:c.veterinario_responsavel,onChange:b=>d({...c,veterinario_responsavel:b.target.value}),placeholder:"Nome do veterinrio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"tecnico_responsavel",children:"Tcnico Responsvel *"}),r.jsx(_e,{id:"tecnico_responsavel",value:c.tecnico_responsavel,onChange:b=>d({...c,tecnico_responsavel:b.target.value}),placeholder:"Nome do tcnico",required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Ma,{id:"observacoes",value:c.observacoes,onChange:b=>d({...c,observacoes:b.target.value}),placeholder:"Observaes sobre a aspirao",rows:3})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx(se,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:n,children:n?"Criando...":"Criar Aspirao"}),r.jsx(se,{type:"button",variant:"outline",onClick:()=>e("/aspiracoes"),disabled:n,children:"Cancelar"})]})]})})]})]})}function U5(){const{id:e}=Br(),t=Ca(),{toast:a}=aa(),[s,n]=u.useState(!0),[o,i]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(""),[h,p]=u.useState([]),[m,b]=u.useState([]),[x,y]=u.useState([]),_=u.useRef(!1),[g,v]=u.useState(!1),[w,E]=u.useState(!1),[S,T]=u.useState(!1),[q,k]=u.useState(!1),[$,Z]=u.useState(null),[W,le]=u.useState(!1),[O,D]=u.useState(null),[N,F]=u.useState(!1),[I,j]=u.useState({veterinario_responsavel:"",tecnico_responsavel:""}),[A,L]=u.useState({doadora_id:"",horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""}),[R,P]=u.useState({registro:"",raca:"",racaCustom:""}),[H,V]=u.useState({horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""}),ae=["Holandesa","Jersey","Gir","Girolando"],[G,be]=u.useState("");u.useEffect(()=>{e&&de()},[e]);const de=async()=>{try{n(!0);const{data:C,error:Q}=await z.from("pacotes_aspiracao").select("*").eq("id",e).single();if(Q)throw Q;c(C),j({veterinario_responsavel:C.veterinario_responsavel||"",tecnico_responsavel:C.tecnico_responsavel||""});const{data:J,error:ne}=await z.from("fazendas").select("nome").eq("id",C.fazenda_id).single();if(ne)throw ne;f(J.nome);const{data:ge,error:he}=await z.from("pacotes_aspiracao_fazendas_destino").select("fazenda_destino_id").eq("pacote_aspiracao_id",e);if(he&&console.warn("Erro ao carregar fazendas destino:",he),!ge||ge.length===0){if(C.fazenda_destino_id){const{data:pe,error:we}=await z.from("fazendas").select("nome").eq("id",C.fazenda_destino_id).single();!we&&pe&&p([pe.nome])}}else{const pe=ge.map(gt=>gt.fazenda_destino_id),{data:we,error:Ze}=await z.from("fazendas").select("id, nome").in("id",pe);if(!Ze&&we){const gt=we.map(Tt=>Tt.nome).filter(Boolean);p(gt)}}await U(),C.status==="EM_ANDAMENTO"&&await ie(C.fazenda_id)}catch(C){a({title:"Erro ao carregar dados",description:C instanceof Error?C.message:"Erro desconhecido",variant:"destructive"})}finally{n(!1)}},U=async()=>{try{const{data:C,error:Q}=await z.from("aspiracoes_doadoras").select("*").eq("pacote_aspiracao_id",e).order("created_at",{ascending:!0});if(Q)throw Q;if(!C||C.length===0){b([]);return}const J=C.map(we=>we.doadora_id),{data:ne,error:ge}=await z.from("doadoras").select("id, registro, nome").in("id",J);if(ge)throw ge;const he=new Map((ne==null?void 0:ne.map(we=>[we.id,we]))||[]),pe=C.map(we=>{const Ze=he.get(we.doadora_id);return{...we,doadora_nome:Ze==null?void 0:Ze.nome,doadora_registro:Ze==null?void 0:Ze.registro}});b(pe)}catch(C){console.error("Error loading aspiracoes:",C)}},ie=async C=>{try{const{data:Q,error:J}=await z.from("aspiracoes_doadoras").select("doadora_id").eq("pacote_aspiracao_id",e);J&&console.error("Error loading aspiracoes for filtering:",J);const ne=new Set((Q==null?void 0:Q.map(we=>we.doadora_id))||[]),{data:ge,error:he}=await z.from("doadoras").select("id, registro, nome").eq("fazenda_id",C).order("registro",{ascending:!0});if(he)throw he;const pe=(ge||[]).filter(we=>!ne.has(we.id));y(pe)}catch(Q){console.error("Error loading doadoras disponiveis:",Q)}},B=C=>{const Q=parseInt(C.atresicos)||0,J=parseInt(C.degenerados)||0,ne=parseInt(C.expandidos)||0,ge=parseInt(C.desnudos)||0,he=parseInt(C.viaveis)||0;return Q+J+ne+ge+he},oe=m.reduce((C,Q)=>C+(Q.total_oocitos||0),0),je=(C,Q)=>{if(!C)return"";const[J,ne]=C.split(":").map(Number),ge=J*60+ne+Q*60,he=Math.floor(ge/60)%24,pe=ge%60;return`${String(he).padStart(2,"0")}:${String(pe).padStart(2,"0")}`};u.useEffect(()=>{if(g&&l)if(ie(l.fazenda_id),m.length>0){const C=m[m.length-1];C.hora_final&&L(Q=>({...Q,horario_aspiracao:C.hora_final||"",hora_final:je(C.hora_final||"",1)}))}else l!=null&&l.horario_inicio&&L(C=>({...C,horario_aspiracao:l.horario_inicio||"",hora_final:je(l.horario_inicio||"",1)}))},[g,m,l]);const me=async()=>{if(o||_.current)return;if(!A.doadora_id){a({title:"Erro",description:"Selecione uma doadora",variant:"destructive"});return}if(!A.hora_final.trim()){a({title:"Erro de validao",description:"Hora final  obrigatria",variant:"destructive"});return}if(!(l!=null&&l.veterinario_responsavel)||!(l!=null&&l.tecnico_responsavel)){a({title:"Erro de validao",description:"A aspirao deve ter veterinrio e tcnico responsveis preenchidos. Por favor, edite a aspirao primeiro.",variant:"destructive"});return}if(m.find(J=>J.doadora_id===A.doadora_id)){a({title:"Erro",description:"Esta doadora j foi aspirada nesta aspirao",variant:"destructive"});return}if(B(A)===0){D("add"),le(!0);return}await Ne()},Ne=async()=>{if(!(o||_.current))try{_.current=!0,i(!0);const C=B(A),Q={pacote_aspiracao_id:e,doadora_id:A.doadora_id,fazenda_id:l.fazenda_id,data_aspiracao:l.data_aspiracao,horario_aspiracao:A.horario_aspiracao||null,hora_final:A.hora_final,atresicos:parseInt(A.atresicos)||0,degenerados:parseInt(A.degenerados)||0,expandidos:parseInt(A.expandidos)||0,desnudos:parseInt(A.desnudos)||0,viaveis:parseInt(A.viaveis)||0,total_oocitos:C,veterinario_responsavel:l.veterinario_responsavel,tecnico_responsavel:l.tecnico_responsavel,recomendacao_touro:A.recomendacao_touro.trim()||null,observacoes:A.observacoes.trim()||null},{error:J}=await z.from("aspiracoes_doadoras").insert([Q]);if(J){if(J.code==="23505"){a({title:"Erro",description:"Esta doadora j foi aspirada nesta aspirao",variant:"destructive"}),i(!1),_.current=!1,de();return}throw J}const ne=oe+C;await z.from("pacotes_aspiracao").update({total_oocitos:ne}).eq("id",e),a({title:"Doadora adicionada",description:"Doadora adicionada  aspirao com sucesso"}),v(!1),L({doadora_id:"",horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""}),de()}catch(C){a({title:"Erro ao adicionar doadora",description:C instanceof Error?C.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1),_.current=!1}},Ae=async()=>{if(!R.registro.trim()){a({title:"Erro de validao",description:"Registro  obrigatrio",variant:"destructive"});return}if(!(G==="Outra"?R.racaCustom.trim():R.raca.trim())){a({title:"Erro de validao",description:"Raa  obrigatria",variant:"destructive"});return}if(!A.hora_final.trim()){a({title:"Erro de validao",description:"Hora final  obrigatria",variant:"destructive"});return}if(!(l!=null&&l.veterinario_responsavel)||!(l!=null&&l.tecnico_responsavel)){a({title:"Erro de validao",description:"A aspirao deve ter veterinrio e tcnico responsveis preenchidos. Por favor, edite a aspirao primeiro.",variant:"destructive"});return}if(B(A)===0){D("create"),le(!0);return}await fe()},fe=async()=>{try{i(!0);const C=G==="Outra"?R.racaCustom.trim():R.raca.trim(),Q=R.registro.trim().toUpperCase(),{data:J,error:ne}=await z.from("doadoras").select("id, registro, raca").ilike("registro",Q).eq("raca",C);if(ne&&ne.code!=="PGRST116")throw ne;if(J&&J.length>0){a({title:"Erro",description:`J existe uma doadora com o registro ${R.registro.trim()} e raa ${C}`,variant:"destructive"}),i(!1);return}const ge={fazenda_id:l.fazenda_id,registro:Q,raca:C},{data:he,error:pe}=await z.from("doadoras").insert([ge]).select().single();if(pe){if(pe.code==="23505"){a({title:"Erro",description:`J existe uma doadora com o registro ${R.registro.trim()} nesta fazenda`,variant:"destructive"}),i(!1);return}throw pe}const we=B(A),Ze={pacote_aspiracao_id:e,doadora_id:he.id,fazenda_id:l.fazenda_id,data_aspiracao:l.data_aspiracao,horario_aspiracao:A.horario_aspiracao||null,hora_final:A.hora_final,atresicos:parseInt(A.atresicos)||0,degenerados:parseInt(A.degenerados)||0,expandidos:parseInt(A.expandidos)||0,desnudos:parseInt(A.desnudos)||0,viaveis:parseInt(A.viaveis)||0,total_oocitos:we,veterinario_responsavel:l.veterinario_responsavel,tecnico_responsavel:l.tecnico_responsavel,recomendacao_touro:A.recomendacao_touro.trim()||null,observacoes:A.observacoes.trim()||null},{error:gt}=await z.from("aspiracoes_doadoras").insert([Ze]);if(gt){if(gt.code==="23505"){a({title:"Erro",description:"Esta doadora j foi aspirada nesta aspirao",variant:"destructive"}),i(!1),de();return}throw gt}const Tt=oe+we;await z.from("pacotes_aspiracao").update({total_oocitos:Tt}).eq("id",e),a({title:"Doadora criada e adicionada",description:"Doadora criada e adicionada  aspirao com sucesso"}),E(!1),P({registro:"",raca:"",racaCustom:""}),be(""),de()}catch(C){a({title:"Erro ao criar doadora",description:C instanceof Error?C.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},M=C=>{var Q,J,ne,ge,he;Z(C),V({horario_aspiracao:C.horario_aspiracao||"",hora_final:C.hora_final||"",atresicos:((Q=C.atresicos)==null?void 0:Q.toString())||"",degenerados:((J=C.degenerados)==null?void 0:J.toString())||"",expandidos:((ne=C.expandidos)==null?void 0:ne.toString())||"",desnudos:((ge=C.desnudos)==null?void 0:ge.toString())||"",viaveis:((he=C.viaveis)==null?void 0:he.toString())||"",recomendacao_touro:C.recomendacao_touro||"",observacoes:C.observacoes||""}),k(!0)},ee=async()=>{if($){if(!H.hora_final.trim()){a({title:"Erro de validao",description:"Hora final  obrigatria",variant:"destructive"});return}try{i(!0);const C=B(H),Q=$.total_oocitos||0,J=C-Q,ne={horario_aspiracao:H.horario_aspiracao||null,hora_final:H.hora_final,atresicos:parseInt(H.atresicos)||0,degenerados:parseInt(H.degenerados)||0,expandidos:parseInt(H.expandidos)||0,desnudos:parseInt(H.desnudos)||0,viaveis:parseInt(H.viaveis)||0,total_oocitos:C,recomendacao_touro:H.recomendacao_touro.trim()||null,observacoes:H.observacoes.trim()||null},{error:ge}=await z.from("aspiracoes_doadoras").update(ne).eq("id",$.id);if(ge)throw ge;const he=oe+J;await z.from("pacotes_aspiracao").update({total_oocitos:he}).eq("id",e),a({title:"Aspirao atualizada",description:"Aspirao da doadora atualizada com sucesso"}),k(!1),Z(null),de()}catch(C){a({title:"Erro ao atualizar aspirao",description:C instanceof Error?C.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}}},ce=async()=>{if(!I.veterinario_responsavel.trim()){a({title:"Erro de validao",description:"Veterinrio responsvel  obrigatrio",variant:"destructive"});return}if(!I.tecnico_responsavel.trim()){a({title:"Erro de validao",description:"Tcnico responsvel  obrigatrio",variant:"destructive"});return}try{i(!0);const{error:C}=await z.from("pacotes_aspiracao").update({veterinario_responsavel:I.veterinario_responsavel.trim(),tecnico_responsavel:I.tecnico_responsavel.trim(),updated_at:new Date().toISOString()}).eq("id",e);if(C)throw C;a({title:"Aspirao atualizada",description:"Informaes da aspirao atualizadas com sucesso"}),F(!1),de()}catch(C){a({title:"Erro ao atualizar aspirao",description:C instanceof Error?C.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}},X=async()=>{try{i(!0);const{error:C}=await z.from("pacotes_aspiracao").update({status:"FINALIZADO",updated_at:new Date().toISOString()}).eq("id",e);if(C)throw C;a({title:"Aspirao finalizada",description:"Aspirao finalizada com sucesso"}),T(!1),t("/aspiracoes")}catch(C){a({title:"Erro ao finalizar aspirao",description:C instanceof Error?C.message:"Erro desconhecido",variant:"destructive"})}finally{i(!1)}};if(s)return r.jsx(Nt,{});if(!l)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-slate-600",children:"Aspirao no encontrada"}),r.jsx(se,{onClick:()=>t("/aspiracoes"),className:"mt-4",children:"Voltar para Aspiraes"})]});const re=l.status==="FINALIZADO";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>t("/aspiracoes"),children:r.jsx(Wa,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["Aspirao - ",d]}),r.jsx("p",{className:"text-slate-600 mt-1",children:re?"Aspirao finalizada":"Gerenciar doadoras da aspirao"})]})]}),!re&&r.jsxs(se,{onClick:()=>T(!0),disabled:o||m.length===0,className:"bg-blue-600 hover:bg-blue-700",children:[r.jsx(ad,{className:"w-4 h-4 mr-2"}),o?"Finalizando...":"Finalizar Pacote"]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ke,{children:"Informaes da Aspirao"}),!re&&r.jsxs(se,{variant:"outline",size:"sm",onClick:()=>F(!0),children:[r.jsx(Sc,{className:"w-4 h-4 mr-2"}),"Editar"]})]})}),r.jsx(ze,{children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(te,{className:"text-slate-500",children:"Fazenda da Aspirao"}),r.jsx("p",{className:"font-medium",children:d})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(te,{className:"text-slate-500",children:"Fazendas Destino"}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:h.length>0?h.map((C,Q)=>r.jsx(Qe,{variant:"outline",className:"font-medium",children:C},Q)):r.jsx("p",{className:"font-medium text-slate-400",children:"-"})})]}),r.jsxs("div",{children:[r.jsx(te,{className:"text-slate-500",children:"Data da Aspirao"}),r.jsx("p",{className:"font-medium",children:At(l.data_aspiracao)})]}),r.jsxs("div",{children:[r.jsx(te,{className:"text-slate-500",children:"Horrio de Incio"}),r.jsx("p",{className:"font-medium",children:l.horario_inicio||"-"})]}),r.jsxs("div",{children:[r.jsx(te,{className:"text-slate-500",children:"Veterinrio Responsvel"}),r.jsx("p",{className:"font-medium",children:l.veterinario_responsavel||"-"})]}),r.jsxs("div",{children:[r.jsx(te,{className:"text-slate-500",children:"Tcnico Responsvel"}),r.jsx("p",{className:"font-medium",children:l.tecnico_responsavel||"-"})]}),r.jsxs("div",{children:[r.jsx(te,{className:"text-slate-500",children:"Status"}),r.jsx("div",{children:r.jsx(Qe,{variant:re?"default":"secondary",children:re?"FINALIZADO":"EM ANDAMENTO"})})]}),r.jsxs("div",{children:[r.jsx(te,{className:"text-slate-500",children:"Total de Ocitos"}),r.jsx("p",{className:"font-medium text-lg",children:oe})]})]})})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ke,{children:["Doadoras Aspiradas (",m.length,")"]}),!re&&r.jsxs(ea,{open:g,onOpenChange:C=>{v(C),C||L({doadora_id:"",horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""})},children:[r.jsx(Fr,{asChild:!0,children:r.jsxs(se,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Us,{className:"w-4 h-4 mr-2"}),"Adicionar Doadora"]})}),r.jsxs(Zt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Yt,{children:[r.jsx(Qt,{children:"Adicionar Doadora  Aspirao"}),r.jsx(ta,{children:"Selecione uma doadora existente ou cadastre uma nova"})]}),r.jsxs(sN,{defaultValue:"existing",className:"w-full",children:[r.jsxs(Dg,{className:"grid w-full grid-cols-2",children:[r.jsx(zc,{value:"existing",children:"Doadora Existente"}),r.jsx(zc,{value:"new",children:"Cadastrar Nova"})]}),r.jsxs(Mc,{value:"existing",className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Doadora *"}),r.jsxs(ht,{value:A.doadora_id,onValueChange:C=>L({...A,doadora_id:C}),children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione uma doadora"})}),r.jsx(ct,{children:x.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhuma doadora disponvel nesta fazenda"}):x.map(C=>r.jsxs(Pe,{value:C.id,children:[C.registro," ",C.nome?`- ${C.nome}`:""]},C.id))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Horrio de Aspirao"}),r.jsx(_e,{type:"time",value:A.horario_aspiracao,onChange:C=>L({...A,horario_aspiracao:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Hora Final *"}),r.jsx(_e,{type:"time",value:A.hora_final,onChange:C=>L({...A,hora_final:C.target.value}),required:!0})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Contagem de Ocitos"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Atrsicos"}),r.jsx(_e,{type:"number",min:"0",value:A.atresicos,onChange:C=>L({...A,atresicos:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Degenerados"}),r.jsx(_e,{type:"number",min:"0",value:A.degenerados,onChange:C=>L({...A,degenerados:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Expandidos"}),r.jsx(_e,{type:"number",min:"0",value:A.expandidos,onChange:C=>L({...A,expandidos:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Desnudos"}),r.jsx(_e,{type:"number",min:"0",value:A.desnudos,onChange:C=>L({...A,desnudos:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Viveis"}),r.jsx(_e,{type:"number",min:"0",value:A.viaveis,onChange:C=>L({...A,viaveis:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Total"}),r.jsx(_e,{value:B(A),disabled:!0})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Recomendao de Touro"}),r.jsx(_e,{value:A.recomendacao_touro,onChange:C=>L({...A,recomendacao_touro:C.target.value}),placeholder:"Recomendao de touro para esta doadora"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Observaes"}),r.jsx(Ma,{value:A.observacoes,onChange:C=>L({...A,observacoes:C.target.value}),placeholder:"Observaes sobre esta aspirao",rows:2})]}),r.jsx(se,{onClick:me,className:"w-full bg-green-600 hover:bg-green-700",disabled:o||x.length===0,children:o?"Adicionando...":"Adicionar"})]}),r.jsxs(Mc,{value:"new",className:"space-y-4 mt-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Registro *"}),r.jsx(_e,{value:R.registro,onChange:C=>P({...R,registro:C.target.value}),placeholder:"Registro da doadora"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Raa *"}),r.jsxs(ht,{value:G,onValueChange:C=>{be(C),P(C==="Outra"?{...R,raca:"",racaCustom:""}:{...R,raca:C,racaCustom:""})},children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione a raa"})}),r.jsxs(ct,{children:[ae.map(C=>r.jsx(Pe,{value:C,children:C},C)),r.jsx(Pe,{value:"Outra",children:"Outra"})]})]})]}),G==="Outra"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Raa Customizada *"}),r.jsx(_e,{value:R.racaCustom,onChange:C=>P({...R,racaCustom:C.target.value}),placeholder:"Digite a raa"})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Contagem de Ocitos"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Atrsicos"}),r.jsx(_e,{type:"number",min:"0",value:A.atresicos,onChange:C=>L({...A,atresicos:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Degenerados"}),r.jsx(_e,{type:"number",min:"0",value:A.degenerados,onChange:C=>L({...A,degenerados:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Expandidos"}),r.jsx(_e,{type:"number",min:"0",value:A.expandidos,onChange:C=>L({...A,expandidos:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Desnudos"}),r.jsx(_e,{type:"number",min:"0",value:A.desnudos,onChange:C=>L({...A,desnudos:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Viveis"}),r.jsx(_e,{type:"number",min:"0",value:A.viaveis,onChange:C=>L({...A,viaveis:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Total"}),r.jsx(_e,{value:B(A),disabled:!0})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Recomendao de Touro"}),r.jsx(_e,{value:A.recomendacao_touro,onChange:C=>L({...A,recomendacao_touro:C.target.value}),placeholder:"Recomendao de touro para esta doadora"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Horrio de Aspirao"}),r.jsx(_e,{type:"time",value:A.horario_aspiracao,onChange:C=>L({...A,horario_aspiracao:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Hora Final *"}),r.jsx(_e,{type:"time",value:A.hora_final,onChange:C=>L({...A,hora_final:C.target.value}),required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Observaes"}),r.jsx(Ma,{value:A.observacoes,onChange:C=>L({...A,observacoes:C.target.value}),placeholder:"Observaes sobre esta aspirao",rows:2})]}),r.jsx(se,{onClick:Ae,className:"w-full bg-green-600 hover:bg-green-700",disabled:o,children:o?"Criando...":"Criar e Adicionar"})]})]})]})]})]})}),r.jsx(ze,{children:r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Doadora"}),r.jsx(K,{children:"Registro"}),r.jsx(K,{children:"Horrio"}),r.jsx(K,{children:"Viveis"}),r.jsx(K,{children:"Total Ocitos"}),r.jsx(K,{children:"Recomendao Touro"}),r.jsx(K,{children:"Observaes"}),!re&&r.jsx(K,{className:"text-right",children:"Aes"})]})}),r.jsx(jt,{children:m.length===0?r.jsx(Re,{children:r.jsx(Y,{colSpan:re?7:8,className:"text-center text-slate-500",children:"Nenhuma doadora adicionada  aspirao"})}):m.map(C=>r.jsxs(Re,{children:[r.jsx(Y,{className:"font-medium",children:C.doadora_nome||"-"}),r.jsx(Y,{children:C.doadora_registro||"-"}),r.jsx(Y,{children:C.horario_aspiracao?`${C.horario_aspiracao}${C.hora_final?` - ${C.hora_final}`:""}`:"-"}),r.jsx(Y,{className:"font-medium",children:C.viaveis||0}),r.jsx(Y,{children:C.total_oocitos||0}),r.jsx(Y,{children:C.recomendacao_touro||"-"}),r.jsx(Y,{children:C.observacoes||"-"}),!re&&r.jsx(Y,{className:"text-right",children:r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>M(C),children:r.jsx(Sc,{className:"w-4 h-4"})})})]},C.id))})]})})]}),r.jsx(ea,{open:q,onOpenChange:C=>{k(C),C||(Z(null),V({horario_aspiracao:"",hora_final:"",atresicos:"",degenerados:"",expandidos:"",desnudos:"",viaveis:"",recomendacao_touro:"",observacoes:""}))},children:r.jsxs(Zt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Yt,{children:[r.jsxs(Qt,{children:["Editar Aspirao - ",($==null?void 0:$.doadora_nome)||($==null?void 0:$.doadora_registro)||"Doadora"]}),r.jsx(ta,{children:"Edite os dados da aspirao da doadora"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Horrio de Aspirao"}),r.jsx(_e,{type:"time",value:H.horario_aspiracao,onChange:C=>V({...H,horario_aspiracao:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Hora Final *"}),r.jsx(_e,{type:"time",value:H.hora_final,onChange:C=>V({...H,hora_final:C.target.value}),required:!0})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Contagem de Ocitos"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Atrsicos"}),r.jsx(_e,{type:"number",min:"0",value:H.atresicos,onChange:C=>V({...H,atresicos:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Degenerados"}),r.jsx(_e,{type:"number",min:"0",value:H.degenerados,onChange:C=>V({...H,degenerados:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Expandidos"}),r.jsx(_e,{type:"number",min:"0",value:H.expandidos,onChange:C=>V({...H,expandidos:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Desnudos"}),r.jsx(_e,{type:"number",min:"0",value:H.desnudos,onChange:C=>V({...H,desnudos:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Viveis"}),r.jsx(_e,{type:"number",min:"0",value:H.viaveis,onChange:C=>V({...H,viaveis:C.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Total"}),r.jsx(_e,{value:B(H),disabled:!0})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Recomendao de Touro"}),r.jsx(_e,{value:H.recomendacao_touro,onChange:C=>V({...H,recomendacao_touro:C.target.value}),placeholder:"Recomendao de touro para esta doadora"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Observaes"}),r.jsx(Ma,{value:H.observacoes,onChange:C=>V({...H,observacoes:C.target.value}),placeholder:"Observaes sobre esta aspirao",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(se,{variant:"outline",onClick:()=>{k(!1),Z(null)},disabled:o,children:"Cancelar"}),r.jsx(se,{onClick:ee,className:"bg-blue-600 hover:bg-blue-700",disabled:o,children:o?"Salvando...":"Salvar Alteraes"})]})]})]})}),r.jsx(kc,{open:W,onOpenChange:le,children:r.jsxs(Ji,{children:[r.jsxs(Wi,{children:[r.jsx(tl,{children:"Confirmar Adio de Doadora sem Ocitos"}),r.jsxs(al,{children:["Esta doadora no possui nenhum ocito (total = 0). Deseja realmente adicion-la  aspirao?",r.jsx("br",{}),r.jsx("br",{}),r.jsx("strong",{children:"Ateno:"})," Doadoras sem ocitos podem no ser teis para o processo de FIV."]})]}),r.jsxs(el,{children:[r.jsx(rl,{disabled:o,children:"Cancelar"}),r.jsx(sl,{onClick:async()=>{le(!1),O==="add"?await Ne():O==="create"&&await fe(),D(null)},disabled:o,className:"bg-orange-600 hover:bg-orange-700",children:o?"Adicionando...":"Sim, Adicionar Mesmo Assim"})]})]})}),r.jsx(ea,{open:N,onOpenChange:F,children:r.jsxs(Zt,{children:[r.jsxs(Yt,{children:[r.jsx(Qt,{children:"Editar Aspirao"}),r.jsx(ta,{children:"Atualize as informaes da aspirao"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Veterinrio Responsvel *"}),r.jsx(_e,{value:I.veterinario_responsavel,onChange:C=>j({...I,veterinario_responsavel:C.target.value}),placeholder:"Nome do veterinrio",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Tcnico Responsvel *"}),r.jsx(_e,{value:I.tecnico_responsavel,onChange:C=>j({...I,tecnico_responsavel:C.target.value}),placeholder:"Nome do tcnico",required:!0})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(se,{variant:"outline",onClick:()=>F(!1),disabled:o,children:"Cancelar"}),r.jsx(se,{onClick:ce,className:"bg-blue-600 hover:bg-blue-700",disabled:o,children:o?"Salvando...":"Salvar"})]})]})]})}),r.jsx(kc,{open:S,onOpenChange:T,children:r.jsxs(Ji,{children:[r.jsxs(Wi,{children:[r.jsx(tl,{children:"Finalizar Aspirao"}),r.jsxs(al,{children:["Tem certeza que deseja finalizar esta aspirao? Esta ao no pode ser desfeita.",r.jsx("br",{}),r.jsx("br",{}),r.jsx("strong",{children:"Ateno:"})," Aps finalizar, a aspirao ficar apenas como histrico e no poder ser editada.",r.jsx("br",{}),r.jsx("br",{}),"Total de ocitos na aspirao: ",r.jsx("strong",{children:oe})]})]}),r.jsxs(el,{children:[r.jsx(rl,{disabled:o,children:"Cancelar"}),r.jsx(sl,{onClick:X,disabled:o,className:"bg-blue-600 hover:bg-blue-700",children:o?"Finalizando...":"Finalizar Aspirao"})]})]})})]})}function H5(){const[e,t]=u.useState([]),[a,s]=u.useState([]),[n,o]=u.useState(!0),[i,l]=u.useState(!1),[c,d]=u.useState(!1),[f,h]=u.useState(!1),[p,m]=u.useState(!1),[b,x]=u.useState(null),[y,_]=u.useState(null),{toast:g}=aa(),v=["Holandesa","Jersey","Gir","Girolando","Nelore","Angus","Brahman","Hereford","Simmental","Tabapu","Sindi","Caracu","Canchim","Senepol","Brangus"],[w,E]=u.useState({cliente_id:"",nome:"",raca:"",tipo_semen:"",quantidade:""}),[S,T]=u.useState({cliente_id:"",nome:"",raca:"",tipo_semen:"",quantidade:""}),[q,k]=u.useState(""),[$,Z]=u.useState(""),[W,le]=u.useState("");u.useEffect(()=>{O()},[]);const O=async()=>{try{o(!0);const{data:j,error:A}=await z.from("clientes").select("id, nome").order("nome",{ascending:!0});if(A)throw A;s(j||[]);const{data:L,error:R}=await z.from("doses_semen").select("*").order("nome",{ascending:!0});if(R)throw R;const P=new Map(j==null?void 0:j.map(V=>[V.id,V.nome])),H=L==null?void 0:L.map(V=>({...V,cliente_nome:V.cliente_id?P.get(V.cliente_id):void 0}));t(H||[])}catch(j){g({title:"Erro ao carregar dados",description:j instanceof Error?j.message:"Erro desconhecido",variant:"destructive"})}finally{o(!1)}},D=async j=>{if(j.preventDefault(),!w.nome.trim()){g({title:"Erro de validao",description:"Nome  obrigatrio",variant:"destructive"});return}try{m(!0);const A={nome:w.nome,cliente_id:w.cliente_id||null,raca:w.raca||null,tipo_semen:w.tipo_semen||null,quantidade:parseInt(w.quantidade)||0};console.log("Dados sendo inseridos:",A);const{error:L,data:R}=await z.from("doses_semen").insert([A]).select();if(L)throw console.error("Erro detalhado:",L),L;g({title:"Dose criada",description:"Dose de smen criada com sucesso"}),l(!1),E({cliente_id:"",nome:"",raca:"",tipo_semen:"",quantidade:""}),O()}catch(A){console.error("Erro completo:",A);let L="Erro desconhecido";A instanceof Error?L=A.message:typeof A=="object"&&A!==null&&(L=JSON.stringify(A,null,2)),g({title:"Erro ao criar dose",description:L.includes("RLS")||L.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":L.length>200?L.substring(0,200)+"...":L,variant:"destructive"})}finally{m(!1)}},N=j=>{var A;x(j),T({cliente_id:j.cliente_id||"",nome:j.nome,raca:j.raca||"",tipo_semen:j.tipo_semen||"",quantidade:((A=j.quantidade)==null?void 0:A.toString())||""}),d(!0)},F=async j=>{if(j.preventDefault(),!!b){if(!S.nome.trim()){g({title:"Erro de validao",description:"Nome  obrigatrio",variant:"destructive"});return}try{m(!0);const A={nome:S.nome,cliente_id:S.cliente_id||null,raca:S.raca||null,tipo_semen:S.tipo_semen||null,quantidade:parseInt(S.quantidade)||0},{error:L}=await z.from("doses_semen").update(A).eq("id",b.id);if(L)throw L;g({title:"Dose atualizada",description:"Dose de smen atualizada com sucesso"}),d(!1),x(null),O()}catch(A){const L=A instanceof Error?A.message:"Erro desconhecido";g({title:"Erro ao atualizar dose",description:L.includes("RLS")||L.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":L,variant:"destructive"})}finally{m(!1)}}},I=async()=>{if(y)try{m(!0);const{error:j}=await z.from("doses_semen").delete().eq("id",y.id);if(j)throw j;g({title:"Dose excluda",description:"Dose de smen excluda com sucesso"}),h(!1),_(null),O()}catch(j){const A=j instanceof Error?j.message:"Erro desconhecido";g({title:"Erro ao excluir dose",description:A,variant:"destructive"})}finally{m(!1)}};return n?r.jsx(Nt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Doses de Smen"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar doses de smen disponveis"})]}),r.jsxs(ea,{open:i,onOpenChange:l,children:[r.jsx(Fr,{asChild:!0,children:r.jsxs(se,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Us,{className:"w-4 h-4 mr-2"}),"Nova Dose"]})}),r.jsxs(Zt,{className:"max-w-md",children:[r.jsxs(Yt,{children:[r.jsx(Qt,{children:"Criar Nova Dose de Smen"}),r.jsx(ta,{children:"Preencha os dados da dose"})]}),r.jsxs("form",{onSubmit:D,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"nome",children:"Nome *"}),r.jsx(_e,{id:"nome",value:w.nome,onChange:j=>E({...w,nome:j.target.value}),placeholder:"Nome do touro/reprodutor",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"cliente_id",children:"Cliente"}),r.jsxs(ht,{value:w.cliente_id,onValueChange:j=>E({...w,cliente_id:j}),children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione o cliente"})}),r.jsx(ct,{children:a.map(j=>r.jsx(Pe,{value:j.id,children:j.nome},j.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"raca",children:"Raa"}),r.jsxs(ht,{value:w.raca,onValueChange:j=>E({...w,raca:j}),children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione a raa"})}),r.jsx(ct,{children:v.map(j=>r.jsx(Pe,{value:j,children:j},j))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"tipo_semen",children:"Tipo de Smen"}),r.jsxs(ht,{value:w.tipo_semen,onValueChange:j=>E({...w,tipo_semen:j}),children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione o tipo"})}),r.jsxs(ct,{children:[r.jsx(Pe,{value:"CONVENCIONAL",children:"CONVENCIONAL"}),r.jsx(Pe,{value:"SEXADO",children:"SEXADO"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"quantidade",children:"Quantidade"}),r.jsx(_e,{id:"quantidade",type:"number",min:"0",value:w.quantidade,onChange:j=>E({...w,quantidade:j.target.value}),placeholder:"Quantidade a ser adicionada",required:!0})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(se,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:p,children:p?"Salvando...":"Salvar"}),r.jsx(se,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:p,children:"Cancelar"})]})]})]})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Lista de Doses de Smen"})}),r.jsxs(ze,{children:[r.jsx("div",{className:"space-y-4 mb-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Filtrar por Touro"}),r.jsx(_e,{placeholder:"Buscar por nome do touro...",value:q,onChange:j=>k(j.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Filtrar por Tipo"}),r.jsxs(ht,{value:$||"all",onValueChange:j=>Z(j==="all"?"":j),children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Todos os tipos"})}),r.jsxs(ct,{children:[r.jsx(Pe,{value:"all",children:"Todos os tipos"}),r.jsx(Pe,{value:"CONVENCIONAL",children:"CONVENCIONAL"}),r.jsx(Pe,{value:"SEXADO",children:"SEXADO"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Filtrar por Raa"}),r.jsxs(ht,{value:W||"all",onValueChange:j=>le(j==="all"?"":j),children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Todas as raas"})}),r.jsxs(ct,{children:[r.jsx(Pe,{value:"all",children:"Todas as raas"}),v.map(j=>r.jsx(Pe,{value:j,children:j},j))]})]})]})]})}),r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Nome (Touro)"}),r.jsx(K,{children:"Cliente"}),r.jsx(K,{children:"Raa"}),r.jsx(K,{children:"Tipo"}),r.jsx(K,{children:"Quantidade"}),r.jsx(K,{className:"text-right",children:"Aes"})]})}),r.jsx(jt,{children:e.filter(j=>{const A=!q||j.nome.toLowerCase().includes(q.toLowerCase()),L=!$||j.tipo_semen===$,R=!W||j.raca===W;return A&&L&&R}).length===0?r.jsx(Re,{children:r.jsx(Y,{colSpan:6,className:"text-center text-slate-500",children:"Nenhuma dose cadastrada"})}):e.filter(j=>{const A=!q||j.nome.toLowerCase().includes(q.toLowerCase()),L=!$||j.tipo_semen===$,R=!W||j.raca===W;return A&&L&&R}).map(j=>r.jsxs(Re,{children:[r.jsx(Y,{className:"font-medium",children:j.nome}),r.jsx(Y,{children:j.cliente_nome||"-"}),r.jsx(Y,{children:j.raca||"-"}),r.jsx(Y,{children:j.tipo_semen||"-"}),r.jsx(Y,{children:j.quantidade??"-"}),r.jsx(Y,{className:"text-right",children:r.jsxs("div",{className:"flex gap-1 justify-end",children:[r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>N(j),children:r.jsx(Sc,{className:"w-4 h-4"})}),r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{_(j),h(!0)},children:r.jsx(Lu,{className:"w-4 h-4 text-red-600"})})]})})]},j.id))})]})]})]}),r.jsx(ea,{open:c,onOpenChange:d,children:r.jsxs(Zt,{className:"max-w-md",children:[r.jsxs(Yt,{children:[r.jsx(Qt,{children:"Editar Dose de Smen"}),r.jsx(ta,{children:"Atualizar dados da dose"})]}),r.jsxs("form",{onSubmit:F,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"edit_nome",children:"Nome *"}),r.jsx(_e,{id:"edit_nome",value:S.nome,onChange:j=>T({...S,nome:j.target.value}),placeholder:"Nome do touro/reprodutor",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"edit_cliente_id",children:"Cliente"}),r.jsxs(ht,{value:S.cliente_id,onValueChange:j=>T({...S,cliente_id:j}),children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione o cliente"})}),r.jsx(ct,{children:a.map(j=>r.jsx(Pe,{value:j.id,children:j.nome},j.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"edit_raca",children:"Raa"}),r.jsxs(ht,{value:S.raca,onValueChange:j=>T({...S,raca:j}),children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione a raa"})}),r.jsx(ct,{children:v.map(j=>r.jsx(Pe,{value:j,children:j},j))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"edit_quantidade",children:"Quantidade"}),r.jsx(_e,{id:"edit_quantidade",type:"number",min:"0",value:S.quantidade,onChange:j=>T({...S,quantidade:j.target.value}),placeholder:"Quantidade",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"edit_tipo_semen",children:"Tipo de Smen"}),r.jsxs(ht,{value:S.tipo_semen,onValueChange:j=>T({...S,tipo_semen:j}),children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione o tipo"})}),r.jsxs(ct,{children:[r.jsx(Pe,{value:"CONVENCIONAL",children:"CONVENCIONAL"}),r.jsx(Pe,{value:"SEXADO",children:"SEXADO"})]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(se,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:p,children:p?"Salvando...":"Salvar Alteraes"}),r.jsx(se,{type:"button",variant:"outline",onClick:()=>d(!1),disabled:p,children:"Cancelar"})]})]})]})}),r.jsx(kc,{open:f,onOpenChange:h,children:r.jsxs(Ji,{children:[r.jsxs(Wi,{children:[r.jsx(tl,{children:"Confirmar Excluso"}),r.jsxs(al,{children:['Tem certeza que deseja excluir a dose "',y==null?void 0:y.nome,'"? Esta ao no pode ser desfeita.']})]}),r.jsxs(el,{children:[r.jsx(rl,{disabled:p,children:"Cancelar"}),r.jsx(sl,{onClick:I,disabled:p,className:"bg-red-600 hover:bg-red-700",children:p?"Excluindo...":"Excluir"})]})]})})]})}function V_(){var Rt;const{id:e}=Br(),t=Ca(),{toast:a}=aa(),[s,n]=u.useState([]),[o,i]=u.useState([]),[l,c]=u.useState([]),[d,f]=u.useState([]),[h,p]=u.useState([]),[m,b]=u.useState([]),[x,y]=u.useState(!0),[_,g]=u.useState(!1),[v,w]=u.useState(!1),[E,S]=u.useState(null),[T,q]=u.useState([]),[k,$]=u.useState(!1),[Z,W]=u.useState({}),[le,O]=u.useState(!1),[D,N]=u.useState([]),[F,I]=u.useState(!1),[j,A]=u.useState([]),[L,R]=u.useState([]),[P,H]=u.useState([]),[V,ae]=u.useState(""),[G,be]=u.useState([]),[de,U]=u.useState(""),[ie,B]=u.useState([]),[oe,je]=u.useState(""),[me,Ne]=u.useState(""),[Ae,fe]=u.useState(""),[M,ee]=u.useState(""),[ce,X]=u.useState([]),[re,C]=u.useState([]),[Q,J]=u.useState([]),[ne,ge]=u.useState([]),[he,pe]=u.useState(!1),we=ue=>({[-1]:"Aspirao",0:"Fecundao",1:"Zigoto",2:"Clivagem",3:"Clivagem Avanada",4:"Compactao",5:"Mrula / Blastocisto Inicial",6:"Blastocisto",7:"Blastocisto Expandido",8:"Resgate / Sada Tardia"})[ue]||`Dia ${ue}`,Ze=ue=>ue===-1?"bg-blue-100 text-blue-800 border-blue-300":ue===0?"bg-green-100 text-green-800 border-green-300":ue>=1&&ue<=3?"bg-yellow-100 text-yellow-800 border-yellow-300":ue>=4&&ue<=5||ue===6?"bg-orange-100 text-orange-800 border-orange-300":ue===7?"bg-purple-100 text-purple-800 border-purple-300":ue===8?"bg-red-100 text-red-800 border-red-300":"bg-slate-100 text-slate-800 border-slate-300",[gt,Tt]=u.useState([]),[it,Vt]=u.useState({aspiracao_doadora_id:"",dose_semen_id:"",quantidade_fracionada:"1.0",quantidade_oocitos:"",observacoes:""}),[kt,Ua]=u.useState({pacote_aspiracao_id:"",observacoes:"",doses_selecionadas:[]}),[as,Hr]=u.useState(null);u.useEffect(()=>{e?ka(e):Vn()},[e]),u.useEffect(()=>{let ue=[...s];if(me&&(ue=ue.filter(De=>{const Ie=re.find(Ve=>Ve.id===De.pacote_aspiracao_id);return(Ie==null?void 0:Ie.fazenda_id)===me})),M!==""){const De=parseInt(M);ue=ue.filter(Ie=>Ie.dia_atual===De)}X(ue)},[s,me,M,re]);const Hn=ne.filter(ue=>ue.nome.toLowerCase().includes(Ae.toLowerCase()));u.useEffect(()=>{const ue=De=>{De.target.closest(".fazenda-busca-container")||pe(!1)};if(he)return document.addEventListener("mousedown",ue),()=>{document.removeEventListener("mousedown",ue)}},[he]);const Vn=async()=>{try{y(!0);const{data:ue,error:De}=await z.from("pacotes_aspiracao").select("*").eq("status","FINALIZADO").order("data_aspiracao",{ascending:!1});if(De)throw De;console.log("Pacotes FINALIZADOS encontrados:",(ue==null?void 0:ue.length)||0),ue&&ue.length>0&&console.log("IDs dos pacotes FINALIZADOS:",ue.map(Te=>Te.id));const{data:Ie,error:Ve}=await z.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(Ve)throw Ve;p(Ie||[]);const{data:He,error:Dt}=await z.from("clientes").select("id, nome").order("nome",{ascending:!0});Dt?console.error("Erro ao carregar clientes:",Dt):Tt(He||[]);const Fe=new Map(Ie==null?void 0:Ie.map(Te=>[Te.id,Te.nome])),Je=new Map,ve=new Map,$e=(ue==null?void 0:ue.map(Te=>Te.id))||[];if($e.length>0){const{data:Te,error:Ot}=await z.from("pacotes_aspiracao_fazendas_destino").select("pacote_aspiracao_id, fazenda_destino_id").in("pacote_aspiracao_id",$e);Ot?console.error("Erro ao carregar fazendas destino:",Ot):Te&&Te.forEach($t=>{const Pa=Fe.get($t.fazenda_destino_id);if(Pa){const ia=Je.get($t.pacote_aspiracao_id)||[];ia.push(Pa),Je.set($t.pacote_aspiracao_id,ia)}});const{data:Ue,error:Aa}=await z.from("aspiracoes_doadoras").select("pacote_aspiracao_id").in("pacote_aspiracao_id",$e);Aa?console.error("Erro ao carregar aspiraes:",Aa):Ue&&Ue.forEach($t=>{$t.pacote_aspiracao_id&&ve.set($t.pacote_aspiracao_id,(ve.get($t.pacote_aspiracao_id)||0)+1)})}const{data:Le,error:pt}=await z.from("lotes_fiv").select("*").order("data_abertura",{ascending:!1});if(pt)throw pt;const at=new Set((Le==null?void 0:Le.map(Te=>Te.pacote_aspiracao_id).filter(Te=>!!Te))||[]),rt=(ue||[]).filter(Te=>Te.usado_em_lote_fiv!==void 0?!Te.usado_em_lote_fiv:!at.has(Te.id));console.log("Pacotes j usados em lotes:",Array.from(at)),console.log("Total de lotes encontrados:",(Le==null?void 0:Le.length)||0),console.log("Pacotes disponveis aps filtrar usados:",rt.length);const da=rt.map(Te=>({...Te,fazenda_nome:Fe.get(Te.fazenda_id),fazendas_destino_nomes:Je.get(Te.id)||[],quantidade_doadoras:ve.get(Te.id)||0}));console.log("Pacotes finais para exibir:",da.length),i(da);const Bt=Le||[],vt=(Bt==null?void 0:Bt.map(Te=>Te.id))||[],{data:ja,error:Ha}=await z.from("lote_fiv_acasalamentos").select("lote_fiv_id").in("lote_fiv_id",vt);if(Ha)throw Ha;const Os=new Map;ja==null||ja.forEach(Te=>{Os.set(Te.lote_fiv_id,(Os.get(Te.lote_fiv_id)||0)+1)});const{data:Va,error:Pt}=await z.from("lote_fiv_fazendas_destino").select("lote_fiv_id, fazenda_id").in("lote_fiv_id",vt);if(Pt)throw Pt;const Ys=new Map;Va==null||Va.forEach(Te=>{const Ot=Fe.get(Te.fazenda_id);if(Ot){const Ue=Ys.get(Te.lote_fiv_id)||[];Ue.push(Ot),Ys.set(Te.lote_fiv_id,Ue)}});const hr=new Map(da.map(Te=>[Te.id,Te]));(ue||[]).forEach(Te=>{hr.has(Te.id)||hr.set(Te.id,{...Te,fazenda_nome:Fe.get(Te.fazenda_id),fazendas_destino_nomes:Je.get(Te.id)||[],quantidade_doadoras:ve.get(Te.id)||0})});const Vr=(Bt||[]).map(Te=>{const Ot=hr.get(Te.pacote_aspiracao_id);let Ue=Ws((Ot==null?void 0:Ot.data_aspiracao)||null);if(!Ue){const Pa=Ws(Te.data_abertura);if(Pa){const[ia,vr,El]=Pa.split("-").map(Number),Yn=new Date(ia,vr-1,El);Yn.setDate(Yn.getDate()-1);const oC=Yn.getFullYear(),iC=String(Yn.getMonth()+1).padStart(2,"0"),lC=String(Yn.getDate()).padStart(2,"0");Ue=`${oC}-${iC}-${lC}`}}const Aa=ic(),$t=Ue?Math.max(0,Bh(Aa,Ue)):0;return{...Te,pacote_nome:Ot==null?void 0:Ot.fazenda_nome,pacote_data:Ot==null?void 0:Ot.data_aspiracao,fazendas_destino_nomes:Ys.get(Te.id)||[],quantidade_acasalamentos:Os.get(Te.id)||0,dia_atual:$t}}),ss=Vr.filter(Te=>Te.status==="ABERTO"&&Te.dia_atual!==void 0&&Te.dia_atual>9);if(ss.length>0){const Te=ss.map(Ot=>Ot.id);z.from("lotes_fiv").update({status:"FECHADO"}).in("id",Te).then(({error:Ot})=>{Ot?console.error("Erro ao fechar lotes automaticamente:",Ot):console.log(`${Te.length} lote(s) fechado(s) automaticamente aps D8`)})}const wl=Vr.filter(Te=>Te.status==="FECHADO"?!1:Te.dia_atual!==void 0&&Te.dia_atual<=9);n(Vr),X(wl);const zs=new Set(Vr.map(Te=>Te.pacote_aspiracao_id).filter(Te=>!!Te)),mr=[];(ue||[]).forEach(Te=>{zs.has(Te.id)&&mr.push({...Te,fazenda_nome:Fe.get(Te.fazenda_id),fazendas_destino_nomes:Je.get(Te.id)||[],quantidade_doadoras:ve.get(Te.id)||0})}),C(mr);const rs=new Set,pr=new Map;mr.forEach(Te=>{if(Te.data_aspiracao){const Ot=Te.data_aspiracao.split("T")[0];rs.add(Ot)}Te.fazenda_id&&Te.fazenda_nome&&pr.set(Te.fazenda_id,Te.fazenda_nome)}),J(Array.from(rs).sort().reverse()),ge(Array.from(pr.entries()).map(([Te,Ot])=>({id:Te,nome:Ot})).sort((Te,Ot)=>Te.nome.localeCompare(Ot.nome)))}catch(ue){a({title:"Erro ao carregar dados",description:ue instanceof Error?ue.message:"Erro desconhecido",variant:"destructive"})}finally{y(!1)}},ka=async ue=>{try{y(!0);const{data:De,error:Ie}=await z.from("lotes_fiv").select("*").eq("id",ue).single();if(Ie)throw Ie;const{data:Ve,error:He}=await z.from("pacotes_aspiracao").select("*").eq("id",De.pacote_aspiracao_id).single();if(He)throw He;je(Ve.data_aspiracao);const{data:Dt,error:Fe}=await z.from("fazendas").select("nome").eq("id",Ve.fazenda_id).single();Fe?(console.error("Erro ao carregar fazenda origem:",Fe),ae("")):ae((Dt==null?void 0:Dt.nome)||"");const{data:Je,error:ve}=await z.from("pacotes_aspiracao_fazendas_destino").select("fazenda_destino_id").eq("pacote_aspiracao_id",Ve.id);ve&&console.error("Erro ao carregar fazendas destino:",ve);let $e=[];if(!Je||Je.length===0?Ve.fazenda_destino_id&&($e=[Ve.fazenda_destino_id]):$e=Je.map(Ue=>Ue.fazenda_destino_id),N($e),$e.length>0){const{data:Ue,error:Aa}=await z.from("fazendas").select("id, nome").in("id",$e);if(Aa)console.error("Erro ao carregar nomes das fazendas destino:",Aa),be([]);else if(be((Ue==null?void 0:Ue.map($t=>$t.nome))||[]),Ue){const $t=[...h];Ue.forEach(Pa=>{$t.find(ia=>ia.id===Pa.id)||$t.push(Pa)}),p($t)}}else be([]);const{data:Le,error:pt}=await z.from("lote_fiv_acasalamentos").select("*").eq("lote_fiv_id",ue).order("created_at",{ascending:!0});if(pt)throw pt;const at=(Le==null?void 0:Le.map(Ue=>Ue.aspiracao_doadora_id))||[],{data:rt,error:da}=await z.from("aspiracoes_doadoras").select("id, doadora_id, viaveis").in("id",at);if(da)throw da;const Bt=[...new Set((rt==null?void 0:rt.map(Ue=>Ue.doadora_id))||[])],{data:vt,error:ja}=await z.from("doadoras").select("id, nome, registro").in("id",Bt);if(ja)throw ja;const Ha=[...new Set((Le==null?void 0:Le.map(Ue=>Ue.dose_semen_id))||[])],{data:Os,error:Va}=await z.from("doses_semen").select("id, nome").in("id",Ha);if(Va)throw Va;const Pt=new Map(vt==null?void 0:vt.map(Ue=>[Ue.id,Ue])),Ys=new Map(Os==null?void 0:Os.map(Ue=>[Ue.id,Ue])),hr=new Map(rt==null?void 0:rt.map(Ue=>[Ue.id,Ue])),{data:Zn,error:Vr}=await z.from("embrioes").select("lote_fiv_acasalamento_id").eq("lote_fiv_id",ue),ss=new Map;!Vr&&Zn&&Zn.forEach(Ue=>{Ue.lote_fiv_acasalamento_id&&ss.set(Ue.lote_fiv_acasalamento_id,(ss.get(Ue.lote_fiv_acasalamento_id)||0)+1)});const wl=(Le||[]).map(Ue=>{const Aa=hr.get(Ue.aspiracao_doadora_id),$t=Aa?Pt.get(Aa.doadora_id):void 0,Pa=Ys.get(Ue.dose_semen_id);return{...Ue,doadora_nome:($t==null?void 0:$t.nome)||($t==null?void 0:$t.registro),doadora_registro:$t==null?void 0:$t.registro,dose_nome:Pa==null?void 0:Pa.nome,viaveis:Aa==null?void 0:Aa.viaveis,total_embrioes_produzidos:ss.get(Ue.id)||0}});q(wl),S({...De,pacote_nome:Ve.fazenda_id,pacote_data:Ve.data_aspiracao}),w(!0);const{data:zs,error:mr}=await z.from("aspiracoes_doadoras").select("id, doadora_id, viaveis").eq("pacote_aspiracao_id",De.pacote_aspiracao_id);if(mr)console.error("Erro ao carregar todas as aspiraes:",mr);else{const Ue=new Map;Le==null||Le.forEach(ia=>{const vr=ia.aspiracao_doadora_id,El=ia.quantidade_oocitos||0;Ue.set(vr,(Ue.get(vr)||0)+El)});const $t=(zs||[]).filter(ia=>{const vr=ia.viaveis??0,El=Ue.get(ia.id)||0,Yn=vr-El;return vr>0&&Yn>0}).map(ia=>({...ia,oocitos_disponiveis:(ia.viaveis??0)-(Ue.get(ia.id)||0)}));R($t);const Pa=[...new Set((zs==null?void 0:zs.map(ia=>ia.doadora_id))||[])];if(Pa.length>0){const{data:ia,error:vr}=await z.from("doadoras").select("id, nome, registro").in("id",Pa);!vr&&ia&&b(ia)}}const{data:rs,error:pr}=await z.from("doses_semen").select("id, nome, cliente_id").order("nome",{ascending:!0});if(pr)console.error("Erro ao carregar doses disponveis:",pr),H([]);else try{const Ue=De.doses_selecionadas;Ue&&Array.isArray(Ue)&&Ue.length>0?H((rs||[]).filter(Aa=>Ue.includes(Aa.id))):H(rs||[])}catch(Ue){console.warn("Campo doses_selecionadas no encontrado, mostrando todas as doses:",Ue),H(rs||[])}const{data:Te,error:Ot}=await z.from("clientes").select("id, nome").order("nome",{ascending:!0});Ot?console.error("Erro ao carregar clientes:",Ot):Tt(Te||[]),await Gn(ue)}catch(De){a({title:"Erro ao carregar detalhes do lote",description:De instanceof Error?De.message:"Erro desconhecido",variant:"destructive"})}finally{y(!1)}},Gn=async ue=>{try{const{data:De,error:Ie}=await z.from("pacotes_aspiracao").select("id, data_aspiracao, observacoes").eq("status","FINALIZADO").like("observacoes",`%Lote FIV ${ue.slice(0,8)}%`).order("data_aspiracao",{ascending:!1});if(Ie){console.error("Erro ao carregar histrico de despachos:",Ie),A([]);return}if(!De||De.length===0){A([]);return}const{data:Ve,error:He}=await z.from("embrioes").select("id, lote_fiv_acasalamento_id, created_at").eq("lote_fiv_id",ue).order("created_at",{ascending:!1});if(He){console.error("Erro ao carregar embries:",He),A([]);return}const Dt=new Map;Ve==null||Ve.forEach(ve=>{if(ve.created_at){const $e=ve.created_at.split("T")[0],Le=Dt.get($e)||[];Le.push(ve),Dt.set($e,Le)}});const Fe=[...new Set((Ve==null?void 0:Ve.map(ve=>ve.lote_fiv_acasalamento_id).filter(Boolean))||[])];if(Fe.length>0){const{data:ve,error:$e}=await z.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",Fe);if($e)console.error("Erro ao carregar acasalamentos:",$e);else if(ve){const Le=[...new Set(ve.map(Pt=>Pt.aspiracao_doadora_id).filter(Boolean))],{data:pt}=await z.from("aspiracoes_doadoras").select("id, doadora_id").in("id",Le),at=[...new Set((pt==null?void 0:pt.map(Pt=>Pt.doadora_id).filter(Boolean))||[])],{data:rt}=await z.from("doadoras").select("id, registro, nome").in("id",at),da=[...new Set(ve.map(Pt=>Pt.dose_semen_id).filter(Boolean))],{data:Bt}=await z.from("doses_semen").select("id, nome").in("id",da),vt=new Map((pt==null?void 0:pt.map(Pt=>[Pt.id,Pt]))||[]),ja=new Map((rt==null?void 0:rt.map(Pt=>[Pt.id,Pt]))||[]),Ha=new Map((Bt==null?void 0:Bt.map(Pt=>[Pt.id,Pt]))||[]),Os=new Map(ve.map(Pt=>[Pt.id,Pt])),Va=De.map(Pt=>{const Ys=Pt.data_aspiracao.split("T")[0],hr=Dt.get(Ys)||[],Zn=new Map;hr.forEach(ss=>{ss.lote_fiv_acasalamento_id&&Zn.set(ss.lote_fiv_acasalamento_id,(Zn.get(ss.lote_fiv_acasalamento_id)||0)+1)});const Vr=Array.from(Zn.entries()).map(([ss,wl])=>{const zs=Os.get(ss),mr=zs?vt.get(zs.aspiracao_doadora_id):void 0,rs=mr?ja.get(mr.doadora_id):void 0,pr=zs?Ha.get(zs.dose_semen_id):void 0;return{acasalamento_id:ss,quantidade:wl,doadora:(rs==null?void 0:rs.registro)||(rs==null?void 0:rs.nome)||"-",dose:(pr==null?void 0:pr.nome)||"-"}});return{id:Pt.id,data_despacho:Ys,acasalamentos:Vr,pacote_id:Pt.id}});A(Va);return}}const Je=De.map(ve=>{const $e=ve.data_aspiracao.split("T")[0];return{id:ve.id,data_despacho:$e,acasalamentos:[],pacote_id:ve.id}});A(Je)}catch(De){console.error("Erro ao carregar histrico:",De),A([])}},Ge=()=>{I(!0)},Se=async()=>{var ue;if(E)try{$(!0);const De=o.find(vt=>vt.id===E.pacote_aspiracao_id);let Ie=Ws((De==null?void 0:De.data_aspiracao)||null);if(!Ie){const vt=Ws(E.data_abertura);if(vt){const[ja,Ha,Os]=vt.split("-").map(Number),Va=new Date(ja,Ha-1,Os);Va.setDate(Va.getDate()-1);const Pt=Va.getFullYear(),Ys=String(Va.getMonth()+1).padStart(2,"0"),hr=String(Va.getDate()).padStart(2,"0");Ie=`${Pt}-${Ys}-${hr}`}}const Ve=ic();if((Ie?Math.max(0,Bh(Ve,Ie)):0)>9){a({title:"Prazo expirado",description:"D8  o ltimo dia. No  possvel criar embries aps o D8. O lote ser fechado e no aparecer mais na lista.",variant:"destructive"}),$(!1);return}const Dt=T.filter(vt=>{var Ha;return parseInt(Z[vt.id]||((Ha=vt.quantidade_embrioes)==null?void 0:Ha.toString())||"0")>0});if(Dt.length===0){a({title:"Nenhum embrio para despachar",description:"Preencha a quantidade de embries em pelo menos um acasalamento antes de despachar.",variant:"destructive"});return}const{data:Fe}=await z.from("pacotes_aspiracao").select("fazenda_id").eq("id",E.pacote_aspiracao_id).single(),Je=`${V} - ${G.join(", ")}`,ve=new Date().toISOString().split("T")[0],$e=D.length>0?D[0]:null;if(!$e){a({title:"Erro ao despachar",description:" necessrio ter pelo menos uma fazenda destino configurada no lote.",variant:"destructive"});return}const{data:Le,error:pt}=await z.from("pacotes_aspiracao").insert([{data_aspiracao:ve,fazenda_id:(Fe==null?void 0:Fe.fazenda_id)||null,fazenda_destino_id:$e,status:"FINALIZADO",observacoes:`Despachado do Lote FIV ${E.id.slice(0,8)}... em ${At(ve)}. Pacote: ${Je}`}]).select().single();if(pt)throw console.error("Erro ao criar pacote:",pt),pt;if(D.length>0){const{error:vt}=await z.from("pacotes_aspiracao_fazendas_destino").insert(D.map(ja=>({pacote_aspiracao_id:Le.id,fazenda_destino_id:ja})));vt&&console.error("Erro ao associar fazendas destino:",vt)}const at=[],rt=[];for(const vt of Dt){const ja=parseInt(Z[vt.id]||((ue=vt.quantidade_embrioes)==null?void 0:ue.toString())||"0");if(ja>0){for(let Ha=0;Ha<ja;Ha++)at.push({lote_fiv_id:E.id,lote_fiv_acasalamento_id:vt.id,status_atual:"FRESCO"});rt.push({acasalamento_id:vt.id,quantidade:ja,doadora:vt.doadora_registro||vt.doadora_nome,dose:vt.dose_nome})}}if(at.length>0){const{error:vt}=await z.from("embrioes").insert(at);if(vt)throw console.error("Erro detalhado ao criar embries:",vt),vt}const da={id:Le.id,data_despacho:ve,acasalamentos:rt,pacote_id:Le.id};A([da,...j]);const Bt=Dt.map(vt=>z.from("lote_fiv_acasalamentos").update({quantidade_embrioes:null}).eq("id",vt.id));await Promise.all(Bt),W({}),a({title:"Embries despachados",description:`${at.length} embrio(es) foram despachados para o pacote "${Je}".`}),ka(E.id)}catch(De){a({title:"Erro ao despachar embries",description:De instanceof Error?De.message:"Erro desconhecido",variant:"destructive"})}finally{$(!1)}},Xe=async ue=>{Ua({...kt,pacote_aspiracao_id:ue});const De=o.find(Ie=>Ie.id===ue);if(Hr(De||null),De){const{data:Ie,error:Ve}=await z.from("aspiracoes_doadoras").select("id, doadora_id, viaveis").eq("pacote_aspiracao_id",ue);if(Ve){console.error("Erro ao carregar aspiraes:",Ve);return}c(Ie||[]);const He=[...new Set((Ie==null?void 0:Ie.map(Je=>Je.doadora_id))||[])];if(He.length>0){const{data:Je,error:ve}=await z.from("doadoras").select("id, nome, registro").in("id",He);if(ve){console.error("Erro ao carregar doadoras:",ve);return}b(Je||[])}const{data:Dt,error:Fe}=await z.from("doses_semen").select("id, nome, cliente_id").order("nome",{ascending:!0});if(Fe){console.error("Erro ao carregar doses:",Fe);return}f(Dt||[])}},Ft=async ue=>{if(ue.preventDefault(),!E)return;if(!it.aspiracao_doadora_id){a({title:"Erro de validao",description:"Doadora  obrigatria",variant:"destructive"});return}if(!it.dose_semen_id){a({title:"Erro de validao",description:"Selecione uma dose de smen",variant:"destructive"});return}const De=parseFloat(it.quantidade_fracionada)||0;if(De<=0){a({title:"Erro de validao",description:"Quantidade fracionada deve ser maior que zero",variant:"destructive"});return}try{$(!0);const Ie=L.find(Je=>Je.id===it.aspiracao_doadora_id),Ve=(Ie==null?void 0:Ie.oocitos_disponiveis)??0,He=parseInt(it.quantidade_oocitos)||0;if(He>Ve){a({title:"Erro de validao",description:`A quantidade de ocitos (${He}) no pode ser maior que os ocitos disponveis (${Ve})`,variant:"destructive"});return}const Dt={lote_fiv_id:E.id,aspiracao_doadora_id:it.aspiracao_doadora_id,dose_semen_id:it.dose_semen_id,quantidade_fracionada:De,quantidade_oocitos:He>0?He:null,observacoes:it.observacoes||null},{error:Fe}=await z.from("lote_fiv_acasalamentos").insert([Dt]);if(Fe)throw Fe;a({title:"Acasalamento adicionado",description:"Acasalamento adicionado com sucesso"}),O(!1),Vt({aspiracao_doadora_id:"",dose_semen_id:"",quantidade_fracionada:"1.0",quantidade_oocitos:"",observacoes:""}),await ka(E.id)}catch(Ie){const Ve=Ie instanceof Error?Ie.message:"Erro desconhecido";a({title:"Erro ao adicionar acasalamento",description:Ve.includes("RLS")||Ve.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":Ve,variant:"destructive"})}finally{$(!1)}},tt=async ue=>{var De,Ie;if(ue.preventDefault(),!kt.pacote_aspiracao_id){a({title:"Erro de validao",description:"Pacote de aspirao  obrigatrio",variant:"destructive"});return}if(!as){a({title:"Erro de validao",description:"Pacote selecionado no encontrado",variant:"destructive"});return}try{$(!0);const{data:Ve,error:He}=await z.from("pacotes_aspiracao").select("id, status").eq("id",kt.pacote_aspiracao_id).single();if(He||!Ve){a({title:"Erro de validao",description:"Pacote de aspirao no encontrado ou invlido",variant:"destructive"});return}if(Ve.status!=="FINALIZADO"){a({title:"Erro de validao",description:"Apenas pacotes FINALIZADOS podem ser usados para criar lotes FIV",variant:"destructive"});return}const Dt=new Date(as.data_aspiracao);Dt.setDate(Dt.getDate()+1);const Fe=Dt.toISOString().split("T")[0];console.log("Dados que sero enviados:",{pacote_aspiracao_id:kt.pacote_aspiracao_id,data_abertura:Fe,data_fecundacao:Fe,status:"ABERTO"});const Je={pacote_aspiracao_id:kt.pacote_aspiracao_id,data_abertura:Fe,data_fecundacao:Fe,status:"ABERTO",observacoes:kt.observacoes||null};if(kt.doses_selecionadas&&kt.doses_selecionadas.length>0)try{Je.doses_selecionadas=kt.doses_selecionadas}catch(at){console.warn("Campo doses_selecionadas no disponvel no banco:",at)}let ve;const{data:$e,error:Le}=await z.from("lotes_fiv").insert([Je]).select().single();if(Le)if((De=Le.message)!=null&&De.includes("doses_selecionadas")||Le.code==="42703"){console.warn("Campo doses_selecionadas no existe no banco, criando lote sem ele"),delete Je.doses_selecionadas;const{data:at,error:rt}=await z.from("lotes_fiv").insert([Je]).select().single();if(rt)throw console.error("Erro detalhado ao criar lote:",{message:rt.message,details:rt.details,hint:rt.hint,code:rt.code}),rt;ve=at}else throw console.error("Erro detalhado ao criar lote:",{message:Le.message,details:Le.details,hint:Le.hint,code:Le.code}),Le;else ve=$e;const pt=(Ie=as.fazendas_destino_nomes)==null?void 0:Ie.map(at=>{const rt=h.find(da=>da.nome===at);return rt==null?void 0:rt.id}).filter(at=>!!at);if(pt&&pt.length>0){const{error:at}=await z.from("lote_fiv_fazendas_destino").insert(pt.map(rt=>({lote_fiv_id:ve.id,fazenda_id:rt})));if(at)throw at}try{await z.from("pacotes_aspiracao").update({usado_em_lote_fiv:!0}).eq("id",kt.pacote_aspiracao_id)}catch(at){console.warn("Campo usado_em_lote_fiv no existe no banco:",at)}a({title:"Lote FIV criado",description:"Lote FIV criado com sucesso. Agora voc pode adicionar acasalamentos."}),g(!1),Ua({pacote_aspiracao_id:"",observacoes:"",doses_selecionadas:[]}),Hr(null),c([]),b([]),t(`/lotes-fiv/${ve.id}`)}catch(Ve){const He=Ve instanceof Error?Ve.message:"Erro desconhecido";a({title:"Erro ao criar lote",description:He.includes("RLS")||He.includes("policy")?"RLS est bloqueando escrita. Configure polticas anon no Supabase.":He,variant:"destructive"})}finally{$(!1)}};if(x&&!E)return r.jsx(Nt,{});if(E&&v){const ue=ve=>ve===0?-1:ve>9?8:ve-1,De=ve=>({[-1]:"Aspirao",0:"Fecundao",1:"Zigoto",2:"2 Clulas",3:"4 Clulas",4:"8 Clulas",5:"Mrula",6:"Blastocisto",7:"Blastocisto Expandido",8:"Blastocisto Expandido"})[ve]||`D${ve}`;let Ie=Ws(oe||E.pacote_data||null);if(!Ie){const ve=Ws(E.data_abertura);if(ve){const[$e,Le,pt]=ve.split("-").map(Number),at=new Date($e,Le-1,pt);at.setDate(at.getDate()-1);const rt=at.getFullYear(),da=String(at.getMonth()+1).padStart(2,"0"),Bt=String(at.getDate()).padStart(2,"0");Ie=`${rt}-${da}-${Bt}`}}if(!Ie)return r.jsx("div",{children:"Erro: Data de aspirao no encontrada"});const Ve=ic(),He=Math.max(0,Bh(Ve,Ie)),Dt=CD(Ie,8),Fe=k0(Dt),Je=AD(Dt);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{w(!1),S(null),t("/lotes-fiv")},children:r.jsx(Wa,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Detalhes do Lote FIV"}),r.jsxs("div",{className:"text-slate-600 mt-1 flex items-center gap-2",children:[r.jsxs("span",{children:["Data de fecundao (D0): ",At(E.data_abertura)," |",Ie&&` Data aspirao (D-1): ${k0(Ie)} |`,(()=>{const ve=ue(He);return ve===-1?` D-1 - ${De(ve)} |`:` D${ve} - ${De(ve)} |`})()," ","Status:"]}),r.jsx(Qe,{variant:E.status==="FECHADO"?"default":"secondary",children:E.status})]})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Informaes do Lote"})}),r.jsxs(ze,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(te,{children:"Dia Atual"}),r.jsx("p",{className:"text-2xl font-bold",children:(()=>{const ve=ue(He);return ve===-1?r.jsxs(r.Fragment,{children:["D-1 ",r.jsxs("span",{className:"text-lg font-normal text-slate-600",children:["- ",De(ve)]})]}):r.jsxs(r.Fragment,{children:["D",ve," ",r.jsxs("span",{className:"text-lg font-normal text-slate-600",children:["- ",De(ve)]})]})})()})]}),r.jsxs("div",{children:[r.jsx(te,{children:"Data da TE"}),He<7?r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Fe}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:Je})]}):He===7?r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:Fe}),r.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[Je," - Perodo de classificao (hoje)"]})]}):He===8?r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:Fe}),r.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[Je," - Perodo de classificao (D7 foi ontem, hoje  D8)"]})]}):r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:Fe}),r.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[Je," - Prazo encerrado"]})]})]})]}),r.jsxs("div",{className:"border-t pt-4 space-y-3",children:[r.jsxs("div",{children:[r.jsx(te,{className:"text-slate-500",children:"Fazenda Origem da Aspirao"}),r.jsx("p",{className:"font-medium",children:V||"-"})]}),r.jsxs("div",{children:[r.jsx(te,{className:"text-slate-500",children:"Fazendas Destino"}),G.length>0?r.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:G.map((ve,$e)=>r.jsx(Qe,{variant:"outline",className:"font-medium",children:ve},$e))}):r.jsx("p",{className:"font-medium text-slate-400",children:"-"})]})]}),E.status==="ABERTO"&&He===7&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-blue-800 font-medium",children:[" Este lote est no D6 (",De(6),"). Voc pode preencher a quantidade de embries (prvia) e gerar um relatrio."]}),r.jsxs(se,{variant:"outline",size:"sm",onClick:Ge,children:[r.jsx(oc,{className:"w-4 h-4 mr-2"}),"Gerar Relatrio de Prvia"]})]})}),(E.status==="ABERTO"&&(He===8||He===9)||E.status==="FECHADO"&&He===9)&&r.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-orange-800 font-medium",children:[" Este lote est no ",He===8?"D7":"D8"," (",De(He===8?7:8),"). ",He===8?"Informe a quantidade de embries para cada acasalamento e despache os embries.":"Perodo de emergncia (D8). Voc pode adicionar novos acasalamentos e despachar os embries imediatamente."]}),r.jsxs(se,{variant:"default",size:"sm",onClick:Se,disabled:k,className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Jv,{className:"w-4 h-4 mr-2"}),k?"Despachando...":"Despachar Todos os Embries"]})]})}),E.status==="ABERTO"&&He>9&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-red-800 font-medium",children:" Este lote passou do D8. D8  o ltimo dia. Acima de D8 no existe mais lote FIV. O lote ser fechado automaticamente e no aparecer mais na lista."})})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Acasalamentos"})}),r.jsxs(ze,{children:[T.length===0?r.jsx("div",{className:"text-center text-slate-500 py-8",children:"Nenhum acasalamento cadastrado"}):(()=>{const ve=new Map;T.forEach(Le=>{const pt=Le.doadora_nome||Le.doadora_registro||"Desconhecida";ve.has(pt)||ve.set(pt,[]),ve.get(pt).push(Le)});const $e=Array.from(ve.entries());return r.jsx("div",{className:"space-y-6",children:$e.map(([Le,pt])=>{const at=pt[0],rt=at.viaveis??0,da=at.doadora_nome||at.doadora_registro||"Doadora desconhecida";return r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"bg-green-100 border border-green-200 rounded-md px-4 py-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-semibold text-slate-900",children:da}),r.jsxs("span",{className:"text-sm text-slate-700",children:["Total de ocitos: ",rt]})]})}),r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"DOSE DE SMEN (TOURO)"}),r.jsx(K,{className:"text-center",children:"QTD. FRACIONADA (DOSES)"}),r.jsx(K,{className:"text-center",children:"OCITOS USADOS"}),(E.status==="ABERTO"&&(He===7||He===8||He===9)||E.status==="FECHADO")&&r.jsxs(r.Fragment,{children:[r.jsx(K,{className:"text-center",children:"QTD. EMBRIES"}),r.jsx(K,{className:"text-center",children:"TOTAL PRODUZIDOS"})]})]})}),r.jsx(jt,{children:pt.map(Bt=>r.jsxs(Re,{children:[r.jsx(Y,{children:Bt.dose_nome||"-"}),r.jsx(Y,{className:"text-center",children:Bt.quantidade_fracionada??"-"}),r.jsx(Y,{className:"text-center",children:Bt.quantidade_oocitos!==void 0&&Bt.quantidade_oocitos!==null?`${Bt.quantidade_oocitos} de ${rt}`:"-"}),(E.status==="ABERTO"&&(He===7||He===8||He===9)||E.status==="FECHADO")&&r.jsxs(r.Fragment,{children:[r.jsx(Y,{className:"text-center",children:E.status==="ABERTO"&&(He===7||He===8||He===9)||E.status==="FECHADO"&&He===9?r.jsx("div",{className:"flex justify-center",children:r.jsx(_e,{type:"number",min:"0",value:Z[Bt.id]??Bt.quantidade_embrioes??"",onChange:vt=>W({...Z,[Bt.id]:vt.target.value}),className:"w-20 text-center",placeholder:"0"})}):r.jsx("span",{className:"font-medium",children:Bt.quantidade_embrioes??"-"})}),r.jsx(Y,{className:"text-center font-semibold text-green-600",children:Bt.total_embrioes_produzidos??0})]})]},Bt.id))})]})]},Le)})})})(),(E.status==="ABERTO"&&He<=9||E.status==="FECHADO"&&He===9)&&L.length>0&&r.jsx("div",{className:"mt-4 flex justify-end",children:r.jsxs(ea,{open:le,onOpenChange:ve=>{O(ve),ve||(Vt({aspiracao_doadora_id:"",dose_semen_id:"",quantidade_fracionada:"1.0",quantidade_oocitos:"",observacoes:""}),U(""))},children:[r.jsx(Fr,{asChild:!0,children:r.jsxs(se,{children:[r.jsx(Us,{className:"w-4 h-4 mr-2"}),"Adicionar Acasalamento"]})}),r.jsxs(Zt,{children:[r.jsxs(Yt,{children:[r.jsx(Qt,{children:"Adicionar Acasalamento"}),r.jsx(ta,{children:"Selecione uma doadora do pacote e uma dose de smen. Voc pode adicionar mltiplos acasalamentos para a mesma doadora."})]}),r.jsxs("form",{onSubmit:Ft,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"aspiracao_doadora_id",children:"Doadora *"}),r.jsxs(ht,{value:it.aspiracao_doadora_id,onValueChange:async ve=>{if(L.find($e=>$e.id===ve),Vt({...it,aspiracao_doadora_id:ve}),ve)try{const{data:$e,error:Le}=await z.from("aspiracoes_doadoras").select("recomendacao_touro").eq("id",ve).single();Le?(console.error("Erro ao carregar recomendao:",Le),U("")):U(($e==null?void 0:$e.recomendacao_touro)||"")}catch($e){console.error("Erro ao carregar recomendao:",$e),U("")}else U("")},children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione uma doadora"})}),r.jsx(ct,{children:L.map(ve=>{const $e=m.find(da=>da.id===ve.doadora_id),Le=ve.oocitos_disponiveis??0,pt=ve.viaveis??0,at=pt-Le,rt=$e?$e.nome&&$e.registro?`${$e.nome} (${$e.registro})`:$e.nome||$e.registro||`Doadora ${ve.doadora_id}`:`Doadora ${ve.doadora_id}`;return r.jsx(Pe,{value:ve.id,children:`${rt} - ${Le} ocitos disponveis (${pt} total, ${at} usados)`},ve.id)})})]}),it.aspiracao_doadora_id&&(()=>{const ve=L.find(at=>at.id===it.aspiracao_doadora_id),$e=(ve==null?void 0:ve.oocitos_disponiveis)??0,Le=(ve==null?void 0:ve.viaveis)??0,pt=Le-$e;return r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-sm text-slate-600",children:[r.jsx("strong",{children:"Ocitos disponveis:"})," ",$e," (Total: ",Le,", J usados: ",pt,")"]}),de&&r.jsxs("div",{className:"mt-2 bg-amber-50 border border-amber-200 rounded-lg p-3",children:[r.jsx("p",{className:"text-sm font-medium text-amber-800 mb-1",children:" Recomendao de Acasalamento:"}),r.jsx("p",{className:"text-sm text-amber-700",children:de})]})]})})()]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"dose_semen_id",children:"Dose de Smen *"}),r.jsxs(ht,{value:it.dose_semen_id,onValueChange:ve=>{Vt({...it,dose_semen_id:ve})},children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione uma dose de smen"})}),r.jsx(ct,{children:P.map(ve=>{const $e=gt.find(Le=>Le.id===ve.cliente_id);return r.jsxs(Pe,{value:ve.id,children:[ve.nome," ",$e?`(${$e.nome})`:""]},ve.id)})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"quantidade_fracionada",children:"Quantidade Fracionada *"}),r.jsx(_e,{id:"quantidade_fracionada",type:"number",step:"0.1",min:"0.1",value:it.quantidade_fracionada,onChange:ve=>{Vt({...it,quantidade_fracionada:ve.target.value})},placeholder:"1.0",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"quantidade_oocitos",children:"Ocitos"}),r.jsx(_e,{id:"quantidade_oocitos",type:"number",min:"0",value:it.quantidade_oocitos,onChange:ve=>{Vt({...it,quantidade_oocitos:ve.target.value})},placeholder:"0"})]})]}),it.aspiracao_doadora_id&&(()=>{const ve=L.find(da=>da.id===it.aspiracao_doadora_id),$e=(ve==null?void 0:ve.oocitos_disponiveis)??0,Le=(ve==null?void 0:ve.viaveis)??0,pt=Le-$e,at=parseInt(it.quantidade_oocitos)||0,rt=$e-at;return r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Total de ocitos viveis:"})," ",Le]}),r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Ocitos j usados em acasalamentos anteriores:"})," ",pt]}),r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Ocitos disponveis:"})," ",$e]}),r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Ocitos sendo distribudos agora:"})," ",at]}),r.jsxs("p",{className:`text-sm font-medium ${rt<0?"text-red-600":rt===0?"text-green-600":"text-blue-800"}`,children:[r.jsx("strong",{children:"Ocitos restantes aps esta distribuio:"})," ",rt]})]})})(),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Ma,{id:"observacoes",value:it.observacoes,onChange:ve=>Vt({...it,observacoes:ve.target.value}),placeholder:"Observaes sobre este(s) acasalamento(s)",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(se,{type:"button",variant:"outline",onClick:()=>{O(!1),Vt({aspiracao_doadora_id:"",dose_semen_id:"",quantidade_fracionada:"1.0",quantidade_oocitos:"",observacoes:""})},children:"Cancelar"}),r.jsx(se,{type:"submit",disabled:k,children:k?"Adicionando...":"Adicionar"})]})]})]})]})}),j.length>0&&r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Histrico de Despachos"}),r.jsx("div",{className:"space-y-4",children:j.map(ve=>r.jsxs(Oe,{className:"border-l-4 border-green-500",children:[r.jsx(Me,{children:r.jsxs(ke,{className:"text-base",children:["Despacho em ",At(ve.data_despacho)]})}),r.jsx(ze,{children:r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Doadora"}),r.jsx(K,{children:"Dose"}),r.jsx(K,{className:"text-center",children:"Quantidade de Embries"})]})}),r.jsx(jt,{children:ve.acasalamentos.length===0?r.jsx(Re,{children:r.jsx(Y,{colSpan:3,className:"text-center text-slate-500",children:"Nenhum acasalamento registrado"})}):ve.acasalamentos.map(($e,Le)=>r.jsxs(Re,{children:[r.jsx(Y,{children:$e.doadora||"-"}),r.jsx(Y,{children:$e.dose||"-"}),r.jsx(Y,{className:"text-center font-semibold",children:$e.quantidade})]},Le))})]})})]},ve.id))})]})]})]}),r.jsx(ea,{open:F,onOpenChange:I,children:r.jsxs(Zt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Yt,{children:[r.jsx(Qt,{children:"Relatrio de Prvia de Produo - D6"}),r.jsx(ta,{children:"Relatrio somente leitura com as quantidades de embries preenchidas (prvia)"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Lote FIV:"})," ",E.id.slice(0,8),"..."]}),r.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[r.jsx("strong",{children:"Data da Aspirao:"})," ",At(oe)]}),r.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[r.jsx("strong",{children:"Fazenda Origem:"})," ",V]}),r.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[r.jsx("strong",{children:"Fazendas Destino:"})," ",G.join(", ")]})]}),r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Doadora"}),r.jsx(K,{children:"Dose de Smen"}),r.jsx(K,{children:"Quantidade Fracionada"}),r.jsx(K,{children:"Ocitos Viveis"}),r.jsx(K,{children:"Ocitos Usados"}),r.jsx(K,{children:"Quantidade de Embries (Prvia)"})]})}),r.jsx(jt,{children:T.length===0?r.jsx(Re,{children:r.jsx(Y,{colSpan:6,className:"text-center text-slate-500",children:"Nenhum acasalamento cadastrado"})}):T.map(ve=>{var Le;const $e=parseInt(Z[ve.id]||((Le=ve.quantidade_embrioes)==null?void 0:Le.toString())||"0");return r.jsxs(Re,{children:[r.jsx(Y,{className:"font-medium",children:ve.doadora_nome||ve.doadora_registro||"Doadora desconhecida"}),r.jsx(Y,{children:ve.dose_nome}),r.jsx(Y,{children:ve.quantidade_fracionada}),r.jsx(Y,{children:ve.viaveis??"-"}),r.jsx(Y,{children:ve.quantidade_oocitos??"-"}),r.jsx(Y,{className:"font-semibold",children:$e})]},ve.id)})})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[r.jsx(se,{variant:"outline",onClick:()=>I(!1),children:"Fechar"}),r.jsx(se,{onClick:()=>{window.print()},children:"Imprimir"})]})]})]})})]})}return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Lotes FIV"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar lotes de fecundao in vitro"})]}),r.jsxs(ea,{open:_,onOpenChange:g,children:[r.jsx(Fr,{asChild:!0,children:r.jsxs(se,{className:"bg-green-600 hover:bg-green-700",children:[r.jsx(Us,{className:"w-4 h-4 mr-2"}),"Novo Lote"]})}),r.jsxs(Zt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Yt,{children:[r.jsx(Qt,{children:"Criar Novo Lote FIV"}),r.jsx(ta,{children:"Selecione um pacote de aspirao FINALIZADO para criar o lote"})]}),r.jsxs("form",{onSubmit:tt,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"pacote_aspiracao_id",children:"Pacote de Aspirao *"}),o.length===0?r.jsxs("div",{className:"border rounded-lg p-4 bg-yellow-50 border-yellow-200",children:[r.jsx("p",{className:"text-sm text-yellow-800 font-medium mb-2",children:"Nenhum pacote disponvel"}),r.jsxs("p",{className:"text-sm text-yellow-700",children:["Verifique se o pacote de aspirao est com status ",r.jsx("strong",{children:"FINALIZADO"})," e ainda no foi usado para criar um lote FIV."]})]}):r.jsxs(ht,{value:kt.pacote_aspiracao_id,onValueChange:Xe,children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione o pacote"})}),r.jsx(ct,{children:o.map(ue=>r.jsxs(Pe,{value:ue.id,children:[At(ue.data_aspiracao)," - ",ue.fazenda_nome," (",ue.quantidade_doadoras," doadoras)"]},ue.id))})]}),as&&r.jsxs("div",{className:"text-sm text-slate-600 space-y-1 mt-2 p-3 bg-slate-50 rounded-lg",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Data do Pacote:"})," ",At(as.data_aspiracao)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Data de Fecundao do Lote:"})," ",(()=>{const ue=new Date(as.data_aspiracao);return ue.setDate(ue.getDate()+1),At(ue.toISOString().split("T")[0])})()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Fazendas Destino:"})," ",((Rt=as.fazendas_destino_nomes)==null?void 0:Rt.join(", "))||"Nenhuma"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Quantidade de Doadoras:"})," ",as.quantidade_doadoras||0]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{children:"Doses de Smen Disponveis no Lote *"}),r.jsx("div",{className:"border rounded-lg p-4 max-h-60 overflow-y-auto",children:d.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"Carregando doses..."}):r.jsx("div",{className:"space-y-2",children:d.map(ue=>{const De=gt.find(Ve=>Ve.id===ue.cliente_id),Ie=kt.doses_selecionadas.includes(ue.id);return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:`dose-${ue.id}`,checked:Ie,onChange:Ve=>{Ve.target.checked?Ua({...kt,doses_selecionadas:[...kt.doses_selecionadas,ue.id]}):Ua({...kt,doses_selecionadas:kt.doses_selecionadas.filter(He=>He!==ue.id)})},className:"rounded"}),r.jsxs("label",{htmlFor:`dose-${ue.id}`,className:"text-sm cursor-pointer flex-1",children:[r.jsx("span",{className:"font-medium",children:ue.nome}),De&&r.jsxs("span",{className:"text-slate-500 ml-2",children:["(",De.nome,")"]})]})]},ue.id)})})}),r.jsx("p",{className:"text-xs text-slate-500",children:"Selecione as doses de smen que estaro disponveis para uso neste lote"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Ma,{id:"observacoes",value:kt.observacoes,onChange:ue=>Ua({...kt,observacoes:ue.target.value}),placeholder:"Observaes sobre o lote",rows:3})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(se,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:k,children:k?"Criando...":"Criar Lote"}),r.jsx(se,{type:"button",variant:"outline",onClick:()=>{g(!1),Ua({pacote_aspiracao_id:"",observacoes:"",doses_selecionadas:[]}),Hr(null),c([]),b([])},disabled:k,children:"Cancelar"})]})]})]})]})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Lista de Lotes FIV"})}),r.jsxs(ze,{children:[r.jsxs("div",{className:"flex gap-4 mb-6 flex-wrap",children:[r.jsxs("div",{className:"flex-1 min-w-[250px] relative fazenda-busca-container",children:[r.jsx(te,{htmlFor:"filtro-fazenda-aspirao",children:"Filtrar por Fazenda da Aspirao"}),r.jsxs("div",{className:"relative",children:[r.jsx(_e,{id:"filtro-fazenda-aspirao",placeholder:"Digite para buscar fazenda...",value:Ae,onChange:ue=>{fe(ue.target.value),pe(!0),ue.target.value||Ne("")},onFocus:()=>pe(!0)}),me&&r.jsx(se,{variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-7 w-7 p-0",onClick:()=>{Ne(""),fe(""),pe(!1)},children:r.jsx(Ds,{className:"h-4 w-4"})}),he&&Hn.length>0&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg max-h-60 overflow-auto",children:Hn.map(ue=>r.jsx("div",{className:"px-4 py-2 hover:bg-slate-100 cursor-pointer",onClick:()=>{Ne(ue.id),fe(ue.nome),pe(!1)},children:ue.nome},ue.id))}),he&&Ae&&Hn.length===0&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border rounded-md shadow-lg p-4 text-sm text-slate-500",children:"Nenhuma fazenda encontrada"})]})]}),r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsx(te,{htmlFor:"filtro-dia-cultivo",children:"Filtrar por Dia do Cultivo"}),r.jsxs(ht,{value:M||void 0,onValueChange:ue=>ee(ue||""),children:[r.jsx(lt,{id:"filtro-dia-cultivo",children:r.jsx(mt,{placeholder:"Todos os dias"})}),r.jsx(ct,{children:[0,1,2,3,4,5,6,7,8].map(ue=>r.jsxs(Pe,{value:ue.toString(),children:["D",ue," - ",we(ue)]},ue))})]})]}),(me||M)&&r.jsx("div",{className:"flex items-end",children:r.jsx(se,{variant:"outline",onClick:()=>{Ne(""),fe(""),ee(""),pe(!1)},children:"Limpar Filtros"})})]}),r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Aspirao"}),r.jsx(K,{children:"Fazendas Destino"}),r.jsx(K,{children:"Dia do Cultivo"}),r.jsx(K,{children:"Acasalamentos"}),r.jsx(K,{className:"text-right",children:"Aes"})]})}),r.jsx(jt,{children:ce.length===0?r.jsx(Re,{children:r.jsx(Y,{colSpan:5,className:"text-center text-slate-500",children:s.length===0?"Nenhum lote cadastrado":"Nenhum lote encontrado com os filtros selecionados"})}):ce.map(ue=>r.jsxs(Re,{children:[r.jsxs(Y,{children:[ue.pacote_data&&At(ue.pacote_data)," - ",ue.pacote_nome]}),r.jsx(Y,{children:r.jsx("div",{className:"flex flex-wrap gap-1",children:ue.fazendas_destino_nomes&&ue.fazendas_destino_nomes.length>0?ue.fazendas_destino_nomes.map((De,Ie)=>r.jsx(Qe,{variant:"outline",className:"text-xs",children:De},Ie)):r.jsx("span",{className:"text-slate-400",children:"-"})})}),r.jsx(Y,{children:ue.dia_atual!==void 0?r.jsx(Qe,{variant:"outline",className:`font-semibold ${Ze(ue.dia_atual===0?-1:ue.dia_atual>9?8:ue.dia_atual-1)}`,children:(()=>{const De=ue.dia_atual===0?-1:ue.dia_atual>9?8:ue.dia_atual-1;return De===-1?`D-1 - ${we(De)}`:`D${De} - ${we(De)}`})()}):r.jsx("span",{className:"text-slate-400",children:"-"})}),r.jsx(Y,{children:ue.quantidade_acasalamentos??0}),r.jsx(Y,{className:"text-right",children:r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>t(`/lotes-fiv/${ue.id}`),children:r.jsx(Qv,{className:"w-4 h-4"})})})]},ue.id))})]})]})]})]})}function V5(){const e=Ca(),[t,a]=u.useState([]),[s,n]=u.useState([]),[o,i]=u.useState([]),[l,c]=u.useState(""),[d,f]=u.useState(!1),[h,p]=u.useState(new Set),[m,b]=u.useState(new Set),[x,y]=u.useState(!1),[_,g]=u.useState(!1),[v,w]=u.useState(!1),[E,S]=u.useState(!1),[T,q]=u.useState(!1),[k,$]=u.useState(!1),[Z,W]=u.useState(null),[le,O]=u.useState(null),[D,N]=u.useState(null),[F,I]=u.useState([]),[j,A]=u.useState(!1),{toast:L}=aa(),[R,P]=u.useState({data_congelamento:new Date().toISOString().split("T")[0],localizacao_atual:""}),[H,V]=u.useState({classificacao:""}),[ae,G]=u.useState({data_descarte:new Date().toISOString().split("T")[0],observacoes:""});u.useEffect(()=>{be()},[]),u.useEffect(()=>{U()},[l]);const be=async()=>{try{const{data:M,error:ee}=await z.from("fazendas").select("id, nome").order("nome",{ascending:!0});if(ee)throw ee;i(M||[])}catch(M){console.error("Erro ao carregar fazendas:",M)}},de=async(M,ee,ce,X,re,C)=>{try{const{error:Q}=await z.from("historico_embrioes").insert([{embriao_id:M,status_anterior:ee,status_novo:ce,tipo_operacao:X,fazenda_id:re||null,observacoes:C||null,data_mudanca:new Date().toISOString()}]);Q&&console.error("Erro ao registrar histrico:",Q)}catch(Q){console.error("Erro ao registrar histrico:",Q)}},U=async()=>{try{f(!0);const{data:M,error:ee}=await z.from("embrioes").select("*").in("status_atual",["FRESCO","CONGELADO"]).order("created_at",{ascending:!1});if(ee)throw ee;if(!M||M.length===0){a([]),n([]),f(!1);return}const ce=[...new Set(M.filter(Se=>Se.lote_fiv_acasalamento_id).map(Se=>Se.lote_fiv_acasalamento_id))];if(ce.length===0){a(M),n([]),f(!1);return}const{data:X,error:re}=await z.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",ce);if(re)throw re;const C=[...new Set((X==null?void 0:X.map(Se=>Se.aspiracao_doadora_id))||[])],{data:Q,error:J}=await z.from("aspiracoes_doadoras").select("id, doadora_id, pacote_aspiracao_id").in("id",C);if(J)throw J;const ne=[...new Set((Q==null?void 0:Q.map(Se=>Se.doadora_id))||[])],{data:ge,error:he}=await z.from("doadoras").select("id, registro").in("id",ne);if(he)throw he;const pe=[...new Set((X==null?void 0:X.map(Se=>Se.dose_semen_id))||[])],{data:we,error:Ze}=await z.from("doses_semen").select("id, nome").in("id",pe);if(Ze)throw Ze;const gt=[...new Set(M.filter(Se=>Se.lote_fiv_id).map(Se=>Se.lote_fiv_id))];let Tt=new Map,it=new Map,Vt=new Map;if(gt.length>0){const{data:Se,error:Xe}=await z.from("lotes_fiv").select("id, pacote_aspiracao_id").in("id",gt);if(!Xe&&Se){Se.forEach(tt=>{tt.pacote_aspiracao_id&&it.set(tt.id,tt.pacote_aspiracao_id)});const Ft=[...new Set(Se.map(tt=>tt.pacote_aspiracao_id).filter(Boolean))];if(Ft.length>0){const{data:tt,error:Rt}=await z.from("pacotes_aspiracao").select("id, data_aspiracao, fazenda_id, fazenda_destino_id, horario_inicio, veterinario_responsavel, total_oocitos").in("id",Ft);if(!Rt&&tt){const[ue,De]=await Promise.all([z.from("pacotes_aspiracao_fazendas_destino").select("pacote_aspiracao_id, fazenda_destino_id").in("pacote_aspiracao_id",Ft),(async()=>{const Fe=new Set;return tt.forEach(Je=>{Je.fazenda_id&&Fe.add(Je.fazenda_id),Je.fazenda_destino_id&&Fe.add(Je.fazenda_destino_id)}),Fe.size>0?z.from("fazendas").select("id, nome").in("id",Array.from(Fe)):{data:null,error:null}})()]),Ie=ue.data,Ve=De.data,He=new Map((Ve==null?void 0:Ve.map(Fe=>[Fe.id,Fe.nome]))||[]),Dt=new Map;Q==null||Q.forEach(Fe=>{Fe.pacote_aspiracao_id&&Dt.set(Fe.pacote_aspiracao_id,(Dt.get(Fe.pacote_aspiracao_id)||0)+1)}),Ie&&Ie.forEach(Fe=>{const Je=Vt.get(Fe.pacote_aspiracao_id)||[];Je.includes(Fe.fazenda_destino_id)||Je.push(Fe.fazenda_destino_id),Vt.set(Fe.pacote_aspiracao_id,Je)}),tt.forEach(Fe=>{if(Fe.fazenda_destino_id){const Je=Vt.get(Fe.id)||[];Je.includes(Fe.fazenda_destino_id)||Je.push(Fe.fazenda_destino_id),Vt.set(Fe.id,Je)}Tt.set(Fe.id,{id:Fe.id,data_aspiracao:Fe.data_aspiracao,fazenda_nome:He.get(Fe.fazenda_id),quantidade_doadoras:Dt.get(Fe.id)||0,horario_inicio:Fe.horario_inicio,veterinario_responsavel:Fe.veterinario_responsavel,total_oocitos:Fe.total_oocitos})})}}}}const kt=new Set;Vt.forEach(Se=>{Se.forEach(Xe=>kt.add(Xe))}),M.forEach(Se=>{Se.fazenda_destino_id&&kt.add(Se.fazenda_destino_id)});let Ua=new Map;if(kt.size>0){const{data:Se,error:Xe}=await z.from("fazendas").select("id, nome").in("id",Array.from(kt));!Xe&&Se&&(Ua=new Map(Se.map(Ft=>[Ft.id,Ft.nome])))}const as=new Map((Q==null?void 0:Q.map(Se=>[Se.id,Se]))||[]),Hr=new Map((ge==null?void 0:ge.map(Se=>[Se.id,Se]))||[]),Hn=new Map((we==null?void 0:we.map(Se=>[Se.id,Se]))||[]),Vn=new Map((X==null?void 0:X.map(Se=>[Se.id,Se]))||[]),ka=M.map(Se=>{const Xe=Se.lote_fiv_acasalamento_id?Vn.get(Se.lote_fiv_acasalamento_id):void 0,Ft=Xe?as.get(Xe.aspiracao_doadora_id):void 0,tt=Ft?Hr.get(Ft.doadora_id):void 0,Rt=Xe?Hn.get(Xe.dose_semen_id):void 0,ue=Se.lote_fiv_id?it.get(Se.lote_fiv_id):void 0,De=ue?Tt.get(ue):void 0;return{...Se,doadora_registro:tt==null?void 0:tt.registro,touro_nome:Rt==null?void 0:Rt.nome,fazenda_destino_nome:Se.fazenda_destino_id?Ua.get(Se.fazenda_destino_id):void 0,data_aspiracao:De==null?void 0:De.data_aspiracao,pacote_aspiracao_id:ue}});a(ka);const Gn=new Map;ka.forEach(Se=>{if(!Se.lote_fiv_id||!Se.created_at)return;const Xe=Se.created_at.split("T")[0],Ft=`${Se.lote_fiv_id}-${Xe}`;let tt=Gn.get(Ft);if(!tt){const Rt=it.get(Se.lote_fiv_id),ue=Rt?Tt.get(Rt):void 0,De=Rt?Vt.get(Rt)||[]:[],Ie=De.map(Ve=>Ua.get(Ve)).filter(Ve=>!!Ve);tt={id:Ft,lote_fiv_id:Se.lote_fiv_id,data_despacho:Xe,fazendas_destino_ids:De,fazendas_destino_nomes:Ie,pacote_info:ue||{id:Rt||"",data_aspiracao:Xe,quantidade_doadoras:0},embrioes:[],total:0,frescos:0,congelados:0,sem_classificacao:0,classificados:{BE:0,BN:0,BX:0,BL:0,BI:0}},Gn.set(Ft,tt)}if(tt.embrioes.push(Se),tt.total++,Se.status_atual==="FRESCO"&&tt.frescos++,Se.status_atual==="CONGELADO"&&tt.congelados++,!Se.classificacao)tt.sem_classificacao++;else{const Rt=Se.classificacao.toUpperCase();Rt==="BE"?tt.classificados.BE++:Rt==="BN"?tt.classificados.BN++:Rt==="BX"?tt.classificados.BX++:Rt==="BL"?tt.classificados.BL++:Rt==="BI"&&tt.classificados.BI++}});let Ge=Array.from(Gn.values());l&&(Ge=Ge.filter(Se=>Se.fazendas_destino_ids.includes(l))),Ge.sort((Se,Xe)=>Xe.data_despacho.localeCompare(Se.data_despacho)),n(Ge)}catch(M){L({title:"Erro ao carregar dados",description:M instanceof Error?M.message:"Erro desconhecido",variant:"destructive"})}finally{f(!1)}},ie=M=>{const ee=new Set(h);ee.has(M)?ee.delete(M):ee.add(M),p(ee)},B=M=>{const ee=new Set(m);ee.has(M)?ee.delete(M):ee.add(M),b(ee),y(ee.size>0)},oe=M=>{const ee=new Set(m);M.embrioes.every(X=>ee.has(X.id))?M.embrioes.forEach(X=>ee.delete(X.id)):M.embrioes.forEach(X=>ee.add(X.id)),b(ee),y(ee.size>0)},je=async M=>{const ee=Z;if(!ee||!H.classificacao){L({title:"Erro de validao",description:"Classificao  obrigatria",variant:"destructive"});return}try{$(!0);const ce=ee.status_atual,X=ee.status_atual,{error:re}=await z.from("embrioes").update({classificacao:H.classificacao,data_classificacao:new Date().toISOString().split("T")[0]}).eq("id",ee.id);if(re)throw re;await de(ee.id,ce,X,"CLASSIFICACAO",null,`Classificao: ${H.classificacao}`),L({title:"Embrio classificado",description:"Classificao salva com sucesso"}),w(!1),W(null),V({classificacao:""}),b(new Set),y(!1),U()}catch(ce){L({title:"Erro ao classificar embrio",description:ce instanceof Error?ce.message:"Erro desconhecido",variant:"destructive"})}finally{$(!1)}},me=async()=>{if(m.size===0||!H.classificacao){L({title:"Erro de validao",description:"Selecione pelo menos um embrio e uma classificao",variant:"destructive"});return}try{$(!0);const M=Array.from(m),ee=M.map(ce=>t.find(re=>re.id===ce)?z.from("embrioes").update({classificacao:H.classificacao,data_classificacao:new Date().toISOString().split("T")[0]}).eq("id",ce):null).filter(Boolean);await Promise.all(ee);for(const ce of M){const X=t.find(re=>re.id===ce);X&&await de(X.id,X.status_atual,X.status_atual,"CLASSIFICACAO",null,`Classificao: ${H.classificacao}`)}L({title:"Embries classificados",description:`${M.length} embrio(es) classificados com sucesso`}),w(!1),V({classificacao:""}),b(new Set),y(!1),U()}catch(M){L({title:"Erro ao classificar embries",description:M instanceof Error?M.message:"Erro desconhecido",variant:"destructive"})}finally{$(!1)}},Ne=async()=>{if(m.size===0||!R.localizacao_atual.trim()){L({title:"Erro de validao",description:"Selecione pelo menos um embrio e informe a localizao",variant:"destructive"});return}try{$(!0);const M=Array.from(m),ee=M.map(ce=>z.from("embrioes").update({status_atual:"CONGELADO",data_congelamento:R.data_congelamento,localizacao_atual:R.localizacao_atual}).eq("id",ce));await Promise.all(ee);for(const ce of M){const X=t.find(re=>re.id===ce);X&&await de(X.id,X.status_atual,"CONGELADO","CONGELAMENTO",null,`Localizao: ${R.localizacao_atual}`)}L({title:"Embries congelados",description:`${M.length} embrio(es) congelados com sucesso`}),g(!1),P({data_congelamento:new Date().toISOString().split("T")[0],localizacao_atual:""}),b(new Set),y(!1),U()}catch(M){L({title:"Erro ao congelar embries",description:M instanceof Error?M.message:"Erro desconhecido",variant:"destructive"})}finally{$(!1)}},Ae=async()=>{if(m.size===0){L({title:"Erro de validao",description:"Selecione pelo menos um embrio",variant:"destructive"});return}try{$(!0);const M=Array.from(m),ee=M.map(ce=>z.from("embrioes").update({status_atual:"DESCARTADO",data_descarte:ae.data_descarte}).eq("id",ce));await Promise.all(ee);for(const ce of M){const X=t.find(re=>re.id===ce);X&&await de(X.id,X.status_atual,"DESCARTADO","DESCARTE",null,ae.observacoes||null)}L({title:"Embries descartados",description:`${M.length} embrio(es) descartados com sucesso`}),S(!1),G({data_descarte:new Date().toISOString().split("T")[0],observacoes:""}),b(new Set),y(!1),U()}catch(M){L({title:"Erro ao descartar embries",description:M instanceof Error?M.message:"Erro desconhecido",variant:"destructive"})}finally{$(!1)}},fe=async M=>{try{A(!0);const{data:ee,error:ce}=await z.from("historico_embrioes").select("*").eq("embriao_id",M).order("data_mudanca",{ascending:!1});if(ce)throw ce;I(ee||[])}catch(ee){console.error("Erro ao carregar histrico:",ee),L({title:"Erro ao carregar histrico",description:ee instanceof Error?ee.message:"Erro desconhecido",variant:"destructive"})}finally{A(!1)}};return d?r.jsx(Nt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Estoque de Embries"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Gerenciar pacotes de embries para transferncia, congelamento ou descarte"})]})}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Pacotes de Embries"})}),r.jsxs(ze,{children:[r.jsxs("div",{className:"mb-4 space-y-2",children:[r.jsx(te,{htmlFor:"fazenda_destino",children:"Filtrar por Fazenda Destino"}),r.jsxs(ht,{value:l||"all",onValueChange:M=>c(M==="all"?"":M),children:[r.jsx(lt,{className:"w-full md:w-[300px]",children:r.jsx(mt,{placeholder:"Todas as fazendas"})}),r.jsxs(ct,{children:[r.jsx(Pe,{value:"all",children:"Todas as fazendas"}),o.map(M=>r.jsx(Pe,{value:M.id,children:M.nome},M.id))]})]})]}),s.length===0?r.jsx("div",{className:"text-center text-slate-500 py-12",children:"Nenhum pacote de embries encontrado para esta fazenda destino"}):r.jsx("div",{className:"space-y-4",children:s.map(M=>{const ee=h.has(M.id),ce=M.embrioes.every(re=>m.has(re.id)),X=M.embrioes.some(re=>m.has(re.id));return r.jsxs(Oe,{className:"border-l-4 border-l-green-500",children:[r.jsx(Me,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>ie(M.id),className:"p-0 h-auto",children:ee?r.jsx(Aw,{className:"w-5 h-5 text-slate-600"}):r.jsx(Yv,{className:"w-5 h-5 text-slate-600"})}),r.jsxs(ke,{className:"text-lg",children:[M.pacote_info.fazenda_nome||"Fazenda no identificada"," "," ",M.fazendas_destino_nomes&&M.fazendas_destino_nomes.length>0?r.jsx("span",{className:"inline-flex flex-wrap gap-1 items-center",children:M.fazendas_destino_nomes.map((re,C)=>r.jsx(Qe,{variant:"outline",className:"text-xs",children:re},C))}):r.jsx("span",{className:"text-slate-400",children:"Sem destino"})]})]}),r.jsxs("div",{className:"mt-2 ml-7 space-y-1 text-sm text-slate-600",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Data Despacho:"})," ",M.data_despacho?At(M.data_despacho):"-"]}),M.pacote_info.horario_inicio&&r.jsxs("p",{children:[r.jsx("strong",{children:"Horrio:"})," ",M.pacote_info.horario_inicio]}),M.pacote_info.veterinario_responsavel&&r.jsxs("p",{children:[r.jsx("strong",{children:"Veterinrio:"})," ",M.pacote_info.veterinario_responsavel]})]})]}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:M.total}),r.jsx("div",{className:"text-sm text-slate-600",children:"embries"}),r.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[M.frescos," frescos, ",M.congelados," congelados"]}),r.jsxs("div",{className:"text-xs text-slate-500",children:[M.sem_classificacao," sem classificao"]}),M.classificados.BE>0||M.classificados.BN>0||M.classificados.BX>0||M.classificados.BL>0||M.classificados.BI>0?r.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["BE: ",M.classificados.BE," | BN: ",M.classificados.BN," | BX: ",M.classificados.BX," | BL: ",M.classificados.BL," | BI: ",M.classificados.BI]}):null]})})]})}),ee&&r.jsxs(ze,{children:[r.jsx("div",{className:"mb-4 flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(se,{variant:"outline",size:"sm",onClick:()=>oe(M),children:[ce?r.jsx(D0,{className:"w-4 h-4 mr-2"}):r.jsx(O0,{className:"w-4 h-4 mr-2"}),ce?"Desmarcar Todos":"Selecionar Todos"]}),r.jsx("span",{className:"text-sm text-slate-600",children:X&&`${M.embrioes.filter(re=>m.has(re.id)).length} selecionado(s)`})]})}),r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{className:"w-12"}),r.jsx(K,{className:"text-center w-16",children:"N"}),r.jsx(K,{children:"Doadora"}),r.jsx(K,{children:"Touro"}),r.jsx(K,{children:"Classificao"}),r.jsx(K,{children:"Status"}),r.jsx(K,{children:"Localizao"}),r.jsx(K,{className:"text-right",children:"Aes"})]})}),r.jsx(jt,{children:(()=>{const re=Q=>Q&&{BE:1,BN:2,BX:3,BL:4,BI:5}[Q.toUpperCase()]||999;return[...M.embrioes].sort((Q,J)=>{const ne=Q.doadora_registro||"",ge=J.doadora_registro||"";if(ne!==ge)return ne.localeCompare(ge);const he=re(Q.classificacao),pe=re(J.classificacao);return he-pe}).map((Q,J)=>{const ne=m.has(Q.id);return r.jsxs(Re,{children:[r.jsx(Y,{children:r.jsx(se,{variant:"ghost",size:"sm",className:"p-0 h-auto",onClick:()=>B(Q.id),children:ne?r.jsx(D0,{className:"w-4 h-4 text-green-600"}):r.jsx(O0,{className:"w-4 h-4 text-slate-400"})})}),r.jsx(Y,{className:"text-center font-medium",children:J+1}),r.jsx(Y,{children:Q.doadora_registro||"-"}),r.jsx(Y,{children:Q.touro_nome||"-"}),r.jsx(Y,{children:Q.classificacao?r.jsx(Qe,{variant:"outline",children:Q.classificacao}):r.jsx("span",{className:"text-slate-400",children:"-"})}),r.jsx(Y,{children:r.jsx(kn,{status:Q.status_atual})}),r.jsx(Y,{children:Q.localizacao_atual||"-"}),r.jsx(Y,{className:"text-right",children:r.jsxs("div",{className:"flex gap-1 justify-end",children:[!Q.classificacao&&Q.status_atual==="FRESCO"&&r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{W(Q),V({classificacao:""}),w(!0)},title:"Classificar",children:r.jsx($h,{className:"w-4 h-4 text-purple-600"})}),Q.classificacao&&r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{W(Q),V({classificacao:Q.classificacao||""}),w(!0)},title:"Editar Classificao",children:r.jsx($h,{className:"w-4 h-4 text-purple-600"})}),Q.status_atual==="FRESCO"&&r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{g(!0),b(new Set([Q.id]))},title:"Congelar",children:r.jsx(R0,{className:"w-4 h-4 text-blue-600"})}),(Q.status_atual==="FRESCO"||Q.status_atual==="CONGELADO")&&r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e("/transferencia"),title:"Transferir",children:r.jsx(gf,{className:"w-4 h-4 text-green-600"})}),(Q.status_atual==="FRESCO"||Q.status_atual==="CONGELADO")&&r.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{O(Q),G({data_descarte:new Date().toISOString().split("T")[0],observacoes:""}),S(!0)},title:"Descartar",children:r.jsx(Lu,{className:"w-4 h-4 text-red-600"})}),r.jsx(se,{variant:"ghost",size:"sm",onClick:async()=>{N(Q),q(!0),await fe(Q.id)},title:"Ver Histrico",children:r.jsx(Kv,{className:"w-4 h-4 text-slate-600"})})]})})]},Q.id)})})()})]})]})]},M.id)})}),x&&r.jsxs("div",{className:"mt-6 p-4 bg-slate-50 border border-slate-200 rounded-lg flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Jv,{className:"w-5 h-5 text-slate-600"}),r.jsxs("span",{className:"font-medium text-slate-900",children:[m.size," embrio(es) selecionado(s)"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(se,{variant:"outline",size:"sm",onClick:()=>{V({classificacao:""}),w(!0)},children:[r.jsx($h,{className:"w-4 h-4 mr-2"}),"Classificar"]}),r.jsxs(se,{variant:"outline",size:"sm",onClick:()=>{P({data_congelamento:new Date().toISOString().split("T")[0],localizacao_atual:""}),g(!0)},children:[r.jsx(R0,{className:"w-4 h-4 mr-2"}),"Congelar"]}),r.jsxs(se,{variant:"outline",size:"sm",onClick:()=>{G({data_descarte:new Date().toISOString().split("T")[0],observacoes:""}),S(!0)},children:[r.jsx(Lu,{className:"w-4 h-4 mr-2"}),"Descartar"]}),r.jsx(se,{variant:"outline",size:"sm",onClick:()=>{b(new Set),y(!1)},children:"Cancelar"})]})]})]})]}),r.jsx(ea,{open:v&&!!Z,onOpenChange:M=>{M||(w(!1),W(null))},children:r.jsxs(Zt,{className:"max-w-md",children:[r.jsxs(Yt,{children:[r.jsx(Qt,{children:"Classificar Embrio"}),r.jsxs(ta,{children:["Classificar embrio ",(Z==null?void 0:Z.identificacao)||"selecionado"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"classificacao",children:"Classificao *"}),r.jsxs(ht,{value:H.classificacao,onValueChange:M=>V({classificacao:M}),children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione a classificao"})}),r.jsxs(ct,{children:[r.jsx(Pe,{value:"BE",children:"BE (Blastocisto Excelente)"}),r.jsx(Pe,{value:"BN",children:"BN (Blastocisto Normal)"}),r.jsx(Pe,{value:"BX",children:"BX (Blastocisto Regular)"}),r.jsx(Pe,{value:"BL",children:"BL (Blastocisto Limitado)"}),r.jsx(Pe,{value:"BI",children:"BI (Blastocisto Irregular)"})]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(se,{onClick:()=>je(),className:"flex-1 bg-purple-600 hover:bg-purple-700",disabled:k,children:k?"Salvando...":"Salvar Classificao"}),r.jsx(se,{variant:"outline",onClick:()=>{w(!1),W(null)},disabled:k,children:"Cancelar"})]})]})]})}),r.jsx(ea,{open:v&&!Z&&m.size>0,onOpenChange:M=>{M||w(!1)},children:r.jsxs(Zt,{className:"max-w-md",children:[r.jsxs(Yt,{children:[r.jsxs(Qt,{children:["Classificar ",m.size," Embrio(es)"]}),r.jsx(ta,{children:"Classificar todos os embries selecionados com a mesma classificao"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"classificacao",children:"Classificao *"}),r.jsxs(ht,{value:H.classificacao,onValueChange:M=>V({classificacao:M}),children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione a classificao"})}),r.jsxs(ct,{children:[r.jsx(Pe,{value:"BE",children:"BE (Blastocisto Excelente)"}),r.jsx(Pe,{value:"BN",children:"BN (Blastocisto Normal)"}),r.jsx(Pe,{value:"BX",children:"BX (Blastocisto Regular)"}),r.jsx(Pe,{value:"BL",children:"BL (Blastocisto Limitado)"}),r.jsx(Pe,{value:"BI",children:"BI (Blastocisto Irregular)"})]})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(se,{onClick:me,className:"flex-1 bg-purple-600 hover:bg-purple-700",disabled:k,children:k?"Salvando...":`Classificar ${m.size} Embrio(es)`}),r.jsx(se,{variant:"outline",onClick:()=>{w(!1)},disabled:k,children:"Cancelar"})]})]})]})}),r.jsx(ea,{open:_,onOpenChange:g,children:r.jsxs(Zt,{className:"max-w-md",children:[r.jsxs(Yt,{children:[r.jsxs(Qt,{children:["Congelar ",m.size," Embrio(es)"]}),r.jsx(ta,{children:"Registrar congelamento dos embries selecionados"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"data_congelamento",children:"Data de Congelamento *"}),r.jsx(_e,{id:"data_congelamento",type:"date",value:R.data_congelamento,onChange:M=>P({...R,data_congelamento:M.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"localizacao_atual",children:"Localizao (Botijo) *"}),r.jsx(_e,{id:"localizacao_atual",value:R.localizacao_atual,onChange:M=>P({...R,localizacao_atual:M.target.value}),placeholder:"Ex: Botijo 1, Canister A",required:!0})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(se,{onClick:Ne,className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:k,children:k?"Congelando...":`Congelar ${m.size} Embrio(es)`}),r.jsx(se,{variant:"outline",onClick:()=>g(!1),disabled:k,children:"Cancelar"})]})]})]})}),r.jsx(ea,{open:E,onOpenChange:S,children:r.jsxs(Zt,{className:"max-w-md",children:[r.jsxs(Yt,{children:[r.jsxs(Qt,{children:["Descartar ",m.size," Embrio(es)"]}),r.jsx(ta,{children:"Descartar os embries selecionados"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"data_descarte",children:"Data de Descarte *"}),r.jsx(_e,{id:"data_descarte",type:"date",value:ae.data_descarte,onChange:M=>G({...ae,data_descarte:M.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"observacoes",children:"Observaes / Motivo"}),r.jsx(Ma,{id:"observacoes",value:ae.observacoes,onChange:M=>G({...ae,observacoes:M.target.value}),placeholder:"Informe o motivo do descarte (opcional)",rows:4})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(se,{onClick:Ae,className:"flex-1 bg-red-600 hover:bg-red-700",disabled:k,children:k?"Descartando...":`Descartar ${m.size} Embrio(es)`}),r.jsx(se,{variant:"outline",onClick:()=>S(!1),disabled:k,children:"Cancelar"})]})]})]})}),r.jsx(ZN,{open:T,onOpenChange:q,children:r.jsxs(Pg,{className:"w-full sm:max-w-2xl",children:[r.jsxs(Ig,{children:[r.jsx(Lg,{children:"Histrico do Embrio"}),r.jsxs(Fg,{children:["Histrico completo de eventos do embrio"," ",(D==null?void 0:D.identificacao)||(D==null?void 0:D.id.slice(0,8))]})]}),r.jsx("div",{className:"mt-6",children:j?r.jsx(Nt,{}):F.length===0?r.jsx("p",{className:"text-slate-500 text-center py-8",children:"Nenhum histrico encontrado"}):r.jsx("div",{className:"space-y-4",children:F.map(M=>{const ee={CLASSIFICACAO:"Classificao",DESTINACAO:"Destinao",CONGELAMENTO:"Congelamento",DESCARTE:"Descarte",TRANSFERENCIA:"Transferncia"};return r.jsx(Oe,{children:r.jsx(ze,{className:"pt-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:ee[M.tipo_operacao]||M.tipo_operacao}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:M.data_mudanca?At(M.data_mudanca):"-"}),M.observacoes&&r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:M.observacoes})]}),r.jsx("div",{className:"text-right",children:r.jsx(kn,{status:M.status_novo||""})})]})})},M.id)})})})]})})]})}function G5(){var de;const[e,t]=u.useState([]),[a,s]=u.useState([]),[n,o]=u.useState([]),[i,l]=u.useState([]),[c,d]=u.useState(!0),[f,h]=u.useState(!1),[p,m]=u.useState(!1),[b,x]=u.useState([]),[y,_]=u.useState([]),[g,v]=u.useState(!1),[w,E]=u.useState([]),[S,T]=u.useState(!1),{toast:q}=aa(),[k,$]=u.useState({fazenda_id:"",pacote_id:"",receptora_id:"",protocolo_receptora_id:"",embriao_id:"",data_te:new Date().toISOString().split("T")[0],veterinario_responsavel:"",tecnico_responsavel:"",observacoes:""}),[Z,W]=u.useState({data_te:"",veterinario_responsavel:"",tecnico_responsavel:""});u.useEffect(()=>{le(),O()},[]),u.useEffect(()=>{if(k.fazenda_id){const U=a.filter(ie=>ie.fazendas_destino_ids.includes(k.fazenda_id));o(U)}else o([])},[k.fazenda_id,a]),u.useEffect(()=>{k.fazenda_id&&D(k.fazenda_id)},[p]);const le=async()=>{try{const{data:U,error:ie}=await z.from("v_protocolo_receptoras_status").select("receptora_id").eq("fase_ciclo","SINCRONIZADA");if(ie)throw ie;if(!U||U.length===0){t([]),d(!1);return}const B=[...new Set(U.map(fe=>fe.receptora_id))],{data:oe,error:je}=await z.from("vw_receptoras_fazenda_atual").select("fazenda_id_atual").in("receptora_id",B);if(je)throw je;if(!oe||oe.length===0){t([]),d(!1);return}const me=[...new Set(oe.map(fe=>fe.fazenda_id_atual).filter(Boolean))];if(me.length===0){t([]),d(!1);return}const{data:Ne,error:Ae}=await z.from("fazendas").select("id, nome").in("id",me).order("nome",{ascending:!0});if(Ae)throw Ae;t(Ne||[]),d(!1)}catch(U){console.error("Erro ao carregar fazendas:",U),q({title:"Erro ao carregar fazendas",description:U instanceof Error?U.message:"Erro desconhecido",variant:"destructive"}),d(!1)}},O=async()=>{try{const{data:U,error:ie}=await z.from("embrioes").select("*").in("status_atual",["FRESCO","CONGELADO"]).order("created_at",{ascending:!1});if(ie)throw ie;if(!U||U.length===0){s([]);return}const B=[...new Set(U.filter(C=>C.lote_fiv_id).map(C=>C.lote_fiv_id))];let oe=new Map,je=new Map,me=new Map,Ne=new Map;const{data:Ae}=await z.from("fazendas").select("id, nome");if(Ae&&(Ne=new Map(Ae.map(C=>[C.id,C.nome]))),B.length>0){const{data:C,error:Q}=await z.from("lotes_fiv").select("id, pacote_aspiracao_id").in("id",B);if(!Q&&C){C.forEach(ne=>{ne.pacote_aspiracao_id&&je.set(ne.id,ne.pacote_aspiracao_id)});const J=[...new Set(C.map(ne=>ne.pacote_aspiracao_id).filter(Boolean))];if(J.length>0){const{data:ne,error:ge}=await z.from("pacotes_aspiracao").select("*").in("id",J);if(!ge&&ne){const{data:he}=await z.from("pacotes_aspiracao_fazendas_destino").select("pacote_aspiracao_id, fazenda_destino_id").in("pacote_aspiracao_id",J);he&&he.forEach(pe=>{const we=me.get(pe.pacote_aspiracao_id)||[];we.includes(pe.fazenda_destino_id)||we.push(pe.fazenda_destino_id),me.set(pe.pacote_aspiracao_id,we)}),ne.forEach(pe=>{if(pe.fazenda_destino_id){const we=me.get(pe.id)||[];we.includes(pe.fazenda_destino_id)||we.push(pe.fazenda_destino_id),me.set(pe.id,we)}oe.set(pe.id,{id:pe.id,data_aspiracao:pe.data_aspiracao,fazenda_nome:Ne.get(pe.fazenda_id),quantidade_doadoras:0,horario_inicio:pe.horario_inicio,veterinario_responsavel:pe.veterinario_responsavel,total_oocitos:pe.total_oocitos})})}}}}const fe=U.map(C=>C.lote_fiv_acasalamento_id).filter(C=>!!C);let M=new Map,ee=new Map,ce=new Map;if(fe.length>0){const{data:C}=await z.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",fe);if(C){M=new Map(C.map(ne=>[ne.id,ne]));const Q=[...new Set(C.map(ne=>ne.aspiracao_doadora_id).filter(Boolean))],J=[...new Set(C.map(ne=>ne.dose_semen_id).filter(Boolean))];if(Q.length>0){const{data:ne}=await z.from("aspiracoes_doadoras").select("id, doadora_id").in("id",Q);if(ne){const ge=[...new Set(ne.map(he=>he.doadora_id))];if(ge.length>0){const{data:he}=await z.from("doadoras").select("id, registro").in("id",ge);if(he){ee=new Map(he.map(we=>[we.id,we.registro]));const pe=new Map(ne.map(we=>[we.id,we.doadora_id]));C.forEach(we=>{if(we.aspiracao_doadora_id){const Ze=pe.get(we.aspiracao_doadora_id);if(Ze){const gt=ee.get(Ze);gt&&M.set(we.id,{...we,doadora_registro:gt})}}})}}}}if(J.length>0){const{data:ne}=await z.from("doses_semen").select("id, nome").in("id",J);ne&&(ce=new Map(ne.map(ge=>[ge.id,ge.nome])),C.forEach(ge=>{if(ge.dose_semen_id){const he=ce.get(ge.dose_semen_id);if(he){const pe=M.get(ge.id);M.set(ge.id,{...pe,touro_nome:he})}}}))}}}const X=new Map;U.forEach(C=>{if(!C.lote_fiv_id||!C.created_at)return;const Q=C.created_at.split("T")[0],J=`${C.lote_fiv_id}-${Q}`;let ne=X.get(J);if(!ne){const we=je.get(C.lote_fiv_id),Ze=we?oe.get(we):void 0,gt=we?me.get(we)||[]:[],Tt=gt.map(it=>Ne.get(it)).filter(it=>!!it);ne={id:J,lote_fiv_id:C.lote_fiv_id,data_despacho:Q,fazendas_destino_ids:gt,fazendas_destino_nomes:Tt,pacote_info:Ze||{id:we||"",data_aspiracao:Q,quantidade_doadoras:0},embrioes:[],total:0,frescos:0,congelados:0},X.set(J,ne)}const ge=M.get(C.lote_fiv_acasalamento_id||""),he=ge==null?void 0:ge.doadora_registro,pe=ge==null?void 0:ge.touro_nome;ne.embrioes.push({...C,doadora_registro:he,touro_nome:pe}),ne.total++,C.status_atual==="FRESCO"&&ne.frescos++,C.status_atual==="CONGELADO"&&ne.congelados++});const re=Array.from(X.values());re.sort((C,Q)=>Q.data_despacho.localeCompare(C.data_despacho)),s(re)}catch(U){console.error("Erro ao carregar pacotes:",U),q({title:"Erro ao carregar pacotes de embries",description:U instanceof Error?U.message:"Erro desconhecido",variant:"destructive"}),s([])}},D=async U=>{try{const{data:ie,error:B}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",U);if(B)throw B;const oe=(ie==null?void 0:ie.map(he=>he.receptora_id))||[];if(oe.length===0){l([]);return}const{data:je,error:me}=await z.from("v_protocolo_receptoras_status").select("*").eq("fase_ciclo","SINCRONIZADA").in("receptora_id",oe);if(me)throw me;if(!je||je.length===0){l([]);return}const Ne=Array.from(new Set(je.map(he=>he.protocolo_id).filter(Boolean))),Ae=Array.from(new Set(je.map(he=>he.receptora_id).filter(Boolean)));let fe=new Set;if(Ne.length>0&&Ae.length>0){const{data:he}=await z.from("protocolo_receptoras").select("receptora_id, status, protocolo_id").in("protocolo_id",Ne).in("receptora_id",Ae);he&&he.filter(pe=>pe.status==="INAPTA").forEach(pe=>fe.add(pe.receptora_id))}const M=je.filter(he=>!fe.has(he.receptora_id)),ee=new Map;if(y.length>0){const{data:he}=await z.from("transferencias_embrioes").select("receptora_id").in("id",y).eq("status_te","REALIZADA");he==null||he.forEach(pe=>{const we=ee.get(pe.receptora_id)||0;ee.set(pe.receptora_id,we+1)})}let ce=M;p?ce=M.filter(he=>(ee.get(he.receptora_id)||0)<2):ce=M.filter(he=>(ee.get(he.receptora_id)||0)===0);const X=Array.from(new Set(ce.map(he=>he.protocolo_id).filter(Boolean))),re=ce.map(he=>he.receptora_id).filter(Boolean),C=ce.some(he=>he.protocolo_receptora_id||he.pr_id);let Q=[],J=new Map,ne=new Map;if(C){ce.forEach(pe=>{const we=pe.protocolo_receptora_id||pe.pr_id;we&&pe.receptora_id&&pe.protocolo_id&&J.set(`${pe.receptora_id}-${pe.protocolo_id}`,we)});const he=Array.from(J.values());if(he.length>0){const{data:pe}=await z.from("protocolo_receptoras").select("id, ciclando_classificacao, qualidade_semaforo").in("id",he);pe==null||pe.forEach(we=>{ne.set(we.id,{ciclando_classificacao:we.ciclando_classificacao,qualidade_semaforo:we.qualidade_semaforo})})}}else if(X.length>0&&re.length>0){const{data:he,error:pe}=await z.from("protocolo_receptoras").select("id, receptora_id, protocolo_id, ciclando_classificacao, qualidade_semaforo").in("protocolo_id",X).in("receptora_id",re);if(pe)throw console.error("Erro ao buscar protocolo_receptoras:",pe),pe;Q=he||[],J=new Map(Q.map(we=>[`${we.receptora_id}-${we.protocolo_id}`,we.id])),Q.forEach(we=>{ne.set(we.id,{ciclando_classificacao:we.ciclando_classificacao,qualidade_semaforo:we.qualidade_semaforo})})}const ge=ce.map(he=>{const pe=ee.get(he.receptora_id)||0,we=J.get(`${he.receptora_id}-${he.protocolo_id}`)||"",Ze=ne.get(we)||{};return{receptora_id:he.receptora_id,brinco:he.brinco||he.identificacao||"N/A",protocolo_id:he.protocolo_id,protocolo_receptora_id:we,data_te_prevista:he.data_te_prevista,data_limite_te:he.data_limite_te,quantidade_embrioes:pe,ciclando_classificacao:Ze.ciclando_classificacao,qualidade_semaforo:Ze.qualidade_semaforo}});l(ge)}catch(ie){q({title:"Erro ao recarregar receptoras",description:ie instanceof Error?ie.message:"Erro desconhecido",variant:"destructive"}),l([])}},N=async U=>{$({...k,fazenda_id:U,pacote_id:"",embriao_id:"",receptora_id:"",protocolo_receptora_id:""}),W({data_te:"",veterinario_responsavel:"",tecnico_responsavel:""}),x([]),_([]);try{const{data:ie,error:B}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",U);if(B)throw B;const oe=(ie==null?void 0:ie.map(J=>J.receptora_id))||[];if(oe.length===0){l([]);return}const{data:je,error:me}=await z.from("v_protocolo_receptoras_status").select("*").eq("fase_ciclo","SINCRONIZADA").in("receptora_id",oe);if(me)throw console.error("Erro ao buscar receptoras sincronizadas (recarregar):",me),me;if(!je||je.length===0){l([]);return}const Ne=Array.from(new Set(je.map(J=>J.protocolo_id).filter(Boolean))),Ae=Array.from(new Set(je.map(J=>J.receptora_id).filter(Boolean)));let fe=new Set;if(Ne.length>0&&Ae.length>0){const{data:J}=await z.from("protocolo_receptoras").select("receptora_id, status, protocolo_id").in("protocolo_id",Ne).in("receptora_id",Ae);J&&J.filter(ne=>ne.status==="INAPTA").forEach(ne=>fe.add(ne.receptora_id))}const M=je.filter(J=>!fe.has(J.receptora_id)),{data:ee}=await z.from("transferencias_embrioes").select("receptora_id").eq("status_te","REALIZADA").in("receptora_id",oe),ce=new Map;ee==null||ee.forEach(J=>{const ne=ce.get(J.receptora_id)||0;ce.set(J.receptora_id,ne+1)});let X=M;p?X=M.filter(J=>(ce.get(J.receptora_id)||0)<2):X=M.filter(J=>(ce.get(J.receptora_id)||0)===0);const re=X.map(J=>J.protocolo_receptora_id||J.pr_id).filter(Boolean),C=new Map;if(re.length>0){const{data:J}=await z.from("protocolo_receptoras").select("id, ciclando_classificacao, qualidade_semaforo").in("id",re);J==null||J.forEach(ne=>{C.set(ne.id,{ciclando_classificacao:ne.ciclando_classificacao,qualidade_semaforo:ne.qualidade_semaforo})})}const Q=X.map(J=>{const ne=ce.get(J.receptora_id)||0,ge=J.protocolo_receptora_id||J.pr_id||"",he=C.get(ge)||{};return{receptora_id:J.receptora_id,brinco:J.brinco||J.identificacao||"N/A",protocolo_id:J.protocolo_id,protocolo_receptora_id:ge,data_te_prevista:J.data_te_prevista,data_limite_te:J.data_limite_te,quantidade_embrioes:ne,ciclando_classificacao:he.ciclando_classificacao,qualidade_semaforo:he.qualidade_semaforo}});l(Q)}catch(ie){q({title:"Erro ao carregar receptoras",description:ie instanceof Error?ie.message:"Erro desconhecido",variant:"destructive"}),l([]),setReceptorasComTransferencia(new Set)}},F=U=>{$({...k,pacote_id:U,embriao_id:"",receptora_id:"",protocolo_receptora_id:"",data_te:Z.data_te||k.data_te,veterinario_responsavel:Z.veterinario_responsavel||k.veterinario_responsavel,tecnico_responsavel:Z.tecnico_responsavel||k.tecnico_responsavel})},I=async()=>{if(!k.protocolo_receptora_id||!k.receptora_id){q({title:"Erro",description:"Nenhuma receptora selecionada para descartar",variant:"destructive"});return}const U=i.find(B=>B.receptora_id===k.receptora_id),ie=(U==null?void 0:U.brinco)||"Receptora";if(confirm(`Tem certeza que deseja descartar a receptora ${ie}? Ela no receber embrio e no poder ser selecionada novamente neste protocolo.`))try{h(!0);const{error:B}=await z.from("protocolo_receptoras").update({status:"INAPTA",motivo_inapta:"Descartada no menu de TE - no recebeu embrio"}).eq("id",k.protocolo_receptora_id);if(B)throw B;if(k.receptora_id){const{error:oe}=await z.from("receptoras").update({status_reprodutivo:"VAZIA"}).eq("id",k.receptora_id);oe?console.error("Erro ao atualizar status da receptora descartada:",oe):console.log(`Status da receptora ${k.receptora_id} atualizado para VAZIA`)}q({title:"Receptora descartada",description:`${ie} foi descartada e no receber embrio neste protocolo.`}),$({...k,receptora_id:"",protocolo_receptora_id:""}),k.fazenda_id&&await D(k.fazenda_id)}catch(B){console.error("Erro ao descartar receptora:",B),q({title:"Erro ao descartar receptora",description:B instanceof Error?B.message:"Erro desconhecido",variant:"destructive"})}finally{h(!1)}},j=async U=>{var oe;if(U.preventDefault(),!k.fazenda_id||!k.pacote_id||!k.receptora_id||!k.embriao_id||!k.data_te){q({title:"Erro de validao",description:"Todos os campos obrigatrios devem ser preenchidos",variant:"destructive"});return}const ie=i.find(je=>je.receptora_id===k.receptora_id),B=(ie==null?void 0:ie.quantidade_embrioes)||0;if(!p&&B>=1){q({title:"Receptora j utilizada",description:'Esta receptora j recebeu um embrio. Ative o switch "Permitir Transferncias Duplas" para transferir um segundo embrio.',variant:"destructive"});return}if(p&&B>=2){q({title:"Limite atingido",description:"Esta receptora j recebeu o mximo de 2 embries permitidos.",variant:"destructive"});return}if(k.receptora_id){const je=await xo(k.receptora_id),me=Ni(je,"REALIZAR_TE");if(!me.valido){q({title:"Erro de validao",description:me.mensagem||"A receptora no pode receber embrio no estado atual",variant:"destructive"});return}}try{if(h(!0),!k.embriao_id){q({title:"Erro de validao",description:"Embrio no selecionado",variant:"destructive"});return}if(!k.receptora_id){q({title:"Erro de validao",description:"Receptora no selecionada",variant:"destructive"});return}if(!k.data_te){q({title:"Erro de validao",description:"Data da TE no informada",variant:"destructive"});return}const je={embriao_id:k.embriao_id,receptora_id:k.receptora_id,protocolo_receptora_id:k.protocolo_receptora_id||null,data_te:k.data_te,tipo_te:"FRESCO",veterinario_responsavel:k.veterinario_responsavel||null,tecnico_responsavel:k.tecnico_responsavel||null,status_te:"REALIZADA",observacoes:k.observacoes||null},{data:me,error:Ne}=await z.from("transferencias_embrioes").insert([je]).select("id");if(Ne)throw console.error("Erro ao inserir transferncia:",Ne),console.error("Dados tentados:",je),Ne;me&&((oe=me[0])!=null&&oe.id)&&_(ee=>[...ee,me[0].id]);const{error:Ae}=await z.from("embrioes").update({status_atual:"TRANSFERIDO"}).eq("id",k.embriao_id);if(Ae)throw Ae;const fe=await xo(k.receptora_id),M=Ni(fe,"REALIZAR_TE");if(!M.valido)console.warn(`No foi possvel atualizar status da receptora: ${M.mensagem}`);else{const{error:ee}=await kg(k.receptora_id,"SERVIDA");ee&&console.error("Erro ao atualizar status da receptora:",ee)}k.protocolo_receptora_id&&x(ee=>ee.includes(k.protocolo_receptora_id)?ee:[...ee,k.protocolo_receptora_id]),q({title:"Transferncia realizada",description:"Transferncia de embrio registrada com sucesso"}),W({data_te:k.data_te,veterinario_responsavel:k.veterinario_responsavel,tecnico_responsavel:k.tecnico_responsavel}),$({fazenda_id:k.fazenda_id,pacote_id:k.pacote_id,embriao_id:"",receptora_id:"",protocolo_receptora_id:"",data_te:k.data_te,veterinario_responsavel:k.veterinario_responsavel,tecnico_responsavel:k.tecnico_responsavel,observacoes:""}),O(),k.fazenda_id&&await D(k.fazenda_id)}catch(je){console.error("Erro completo:",je),q({title:"Erro ao realizar transferncia",description:je instanceof Error?je.message:"Erro desconhecido",variant:"destructive"})}finally{h(!1)}},A=async()=>{if(y.length===0){q({title:"Nenhuma transferncia na sesso",description:"No h transferncias para visualizar.",variant:"destructive"});return}T(!0),await L(!0)},L=async(U=!1)=>{if(!(y.length>0)){U||q({title:"Nenhuma transferncia na sesso",description:"No h transferncias para gerar relatrio.",variant:"destructive"});return}if(!U&&b.length===0){q({title:"Nenhuma transferncia na sesso",description:"No h transferncias para gerar relatrio.",variant:"destructive"});return}try{const{data:B,error:oe}=await z.from("transferencias_embrioes").select(`
          *,
          embrioes (
            id,
            classificacao,
            status_atual,
            lote_fiv_id,
            lote_fiv_acasalamento_id
          ),
          receptoras (
            id,
            identificacao,
            nome
          )
        `).in("id",y).eq("status_te","REALIZADA").order("created_at",{ascending:!0});if(oe)throw oe;if(!B||B.length===0){q({title:"Erro ao gerar relatrio",description:"No foi possvel encontrar as transferncias da sesso.",variant:"destructive"});return}const je=B.map(fe=>{var M;return(M=fe.embrioes)==null?void 0:M.lote_fiv_acasalamento_id}).filter(fe=>!!fe);let me=new Map,Ne=new Map;if(je.length>0){const{data:fe}=await z.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",je);if(fe){const M=[...new Set(fe.map(ce=>ce.aspiracao_doadora_id).filter(Boolean))],ee=[...new Set(fe.map(ce=>ce.dose_semen_id).filter(Boolean))];if(M.length>0){const{data:ce}=await z.from("aspiracoes_doadoras").select("id, doadora_id").in("id",M);if(ce){const X=[...new Set(ce.map(re=>re.doadora_id))];if(X.length>0){const{data:re}=await z.from("doadoras").select("id, registro").in("id",X);if(re){const C=new Map(ce.map(Q=>[Q.id,Q.doadora_id]));ce.forEach(Q=>{const J=C.get(Q.id);if(J){const ne=re.find(ge=>ge.id===J);ne&&me.set(Q.id,ne.registro)}})}}}}if(ee.length>0){const{data:ce}=await z.from("doses_semen").select("id, nome").in("id",ee);ce&&ce.forEach(X=>{Ne.set(X.id,X.nome)})}fe.forEach(ce=>{const X=ce.aspiracao_doadora_id,re=ce.dose_semen_id;if(X&&re){const C=me.get(X),Q=Ne.get(re);C&&me.set(ce.id,C),Q&&Ne.set(ce.id,Q)}})}}const Ae=B.map(fe=>{var re,C,Q,J;const M=(re=fe.embrioes)==null?void 0:re.lote_fiv_acasalamento_id,ee=M&&me.get(M)||"N/A",ce=M&&Ne.get(M)||"N/A";return{numero_embriao:G&&G.get(fe.embriao_id)?G.get(fe.embriao_id):fe.embriao_id?fe.embriao_id.substring(0,8):"N/A",doadora:ee,touro:ce,classificacao:((C=fe.embrioes)==null?void 0:C.classificacao)||"N/A",receptora_brinco:((Q=fe.receptoras)==null?void 0:Q.identificacao)||"N/A",receptora_nome:((J=fe.receptoras)==null?void 0:J.nome)||"N/A",data_te:fe.data_te,veterinario:fe.veterinario_responsavel||"N/A",tecnico:fe.tecnico_responsavel||"N/A",observacoes:fe.observacoes||""}});E(Ae),v(!0)}catch(B){console.error("Erro ao gerar relatrio:",B),q({title:"Erro ao gerar relatrio",description:B instanceof Error?B.message:"Erro desconhecido",variant:"destructive"}),T(!1)}},R=async()=>{if(b.length===0){q({title:"Nenhuma transferncia na sesso",description:"No h transferncias para encerrar nesta sesso.",variant:"destructive"});return}try{h(!0);const{error:U}=await z.from("protocolo_receptoras").update({status:"UTILIZADA"}).in("id",b);if(U)throw console.error("Erro ao atualizar protocolos_receptoras:",U),U;q({title:"Sesso encerrada",description:`${b.length} transferncia(s) finalizada(s) com sucesso.`}),$({fazenda_id:"",pacote_id:"",embriao_id:"",receptora_id:"",protocolo_receptora_id:"",data_te:new Date().toISOString().split("T")[0],veterinario_responsavel:"",tecnico_responsavel:"",observacoes:""}),W({data_te:"",veterinario_responsavel:"",tecnico_responsavel:""});const ie=k.fazenda_id;x([]),_([]),m(!1),v(!1),E([]),await O(),ie&&await D(ie)}catch(U){console.error("Erro ao encerrar sesso:",U),q({title:"Erro ao encerrar sesso",description:U instanceof Error?U.message:"Erro desconhecido",variant:"destructive"})}finally{h(!1)}},P=a.find(U=>U.id===k.pacote_id),H=(P==null?void 0:P.embrioes.filter(U=>U.status_atual==="FRESCO"||U.status_atual==="CONGELADO"))||[],[V,ae]=u.useState([]),[G,be]=u.useState(new Map);return u.useEffect(()=>{k.pacote_id&&P?(async()=>{try{const{data:ie,error:B}=await z.from("embrioes").select("*").eq("lote_fiv_id",P.lote_fiv_id).order("created_at",{ascending:!0});if(B)throw B;if(ie){const oe=ie.map(X=>X.lote_fiv_acasalamento_id).filter(X=>!!X);let je=new Map,me=new Map,Ne=new Map;if(oe.length>0){const{data:X}=await z.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",oe);if(X){je=new Map(X.map(Q=>[Q.id,Q]));const re=[...new Set(X.map(Q=>Q.aspiracao_doadora_id).filter(Boolean))],C=[...new Set(X.map(Q=>Q.dose_semen_id).filter(Boolean))];if(re.length>0){const{data:Q}=await z.from("aspiracoes_doadoras").select("id, doadora_id").in("id",re);if(Q){const J=[...new Set(Q.map(ne=>ne.doadora_id))];if(J.length>0){const{data:ne}=await z.from("doadoras").select("id, registro").in("id",J);if(ne){me=new Map(ne.map(he=>[he.id,he.registro]));const ge=new Map(Q.map(he=>[he.id,he.doadora_id]));X.forEach(he=>{if(he.aspiracao_doadora_id){const pe=ge.get(he.aspiracao_doadora_id);if(pe){const we=me.get(pe);we&&je.set(he.id,{...he,doadora_registro:we})}}})}}}}if(C.length>0){const{data:Q}=await z.from("doses_semen").select("id, nome").in("id",C);Q&&(Ne=new Map(Q.map(J=>[J.id,J.nome])),X.forEach(J=>{if(J.dose_semen_id){const ne=Ne.get(J.dose_semen_id);if(ne){const ge=je.get(J.id);je.set(J.id,{...ge,touro_nome:ne})}}}))}}}const Ae=ie.map(X=>{const re=je.get(X.lote_fiv_acasalamento_id||"");return{...X,doadora_registro:re==null?void 0:re.doadora_registro,touro_nome:re==null?void 0:re.touro_nome}});ae(Ae);const fe=new Map,M=new Map;Ae.forEach(X=>{const re=X.doadora_registro||"",C=X.touro_nome||"",Q=`${re}|${C}`;M.has(Q)||M.set(Q,[]),M.get(Q).push(X)});const ee=Array.from(M.entries()).sort(([X],[re])=>{const[C,Q]=X.split("|"),[J,ne]=re.split("|");return C!==J?C.localeCompare(J):Q.localeCompare(ne)});ee.forEach(([X,re])=>{re.sort((C,Q)=>{const J=C.created_at?new Date(C.created_at).getTime():0,ne=Q.created_at?new Date(Q.created_at).getTime():0;return J-ne})});let ce=1;ee.forEach(([X,re])=>{re.forEach(C=>{fe.set(C.id,ce),ce++})}),be(fe)}}catch(ie){console.error("Erro ao carregar todos os embries:",ie)}})():(ae([]),be(new Map))},[k.pacote_id,P]),c?r.jsx(Nt,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Transferncia de Embries (TE)"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Destinar embries para receptoras sincronizadas"})]}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(gf,{className:"w-5 h-5"}),"Nova Transferncia"]}),k.fazenda_id&&k.pacote_id&&b.length>0&&r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(se,{type:"button",onClick:A,className:"bg-slate-600 hover:bg-slate-700",disabled:f,variant:"default",title:"Visualizar relatrio da sesso atual sem encerrar",children:[r.jsx(oc,{className:"w-4 h-4 mr-2"}),"Visualizar Relatrio (",b.length," transferncia",b.length>1?"s":"",")"]}),r.jsxs(se,{type:"button",onClick:L,className:"bg-blue-600 hover:bg-blue-700",disabled:f,variant:"default",children:[r.jsx(oc,{className:"w-4 h-4 mr-2"}),f?"Gerando...":`Encerrar Sesso (${b.length} transferncia${b.length>1?"s":""})`]})]})]})}),r.jsx(ze,{children:r.jsxs("form",{onSubmit:j,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4 border-b pb-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"fazenda_id",children:"1. Fazenda onde esto as receptoras *"}),r.jsxs(ht,{value:k.fazenda_id,onValueChange:N,children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione a fazenda"})}),r.jsx(ct,{children:e.map(U=>r.jsx(Pe,{value:U.id,children:U.nome},U.id))})]})]}),k.fazenda_id&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"pacote_id",children:"2. Pacote de Embries *"}),r.jsxs(ht,{value:k.pacote_id,onValueChange:F,disabled:!k.fazenda_id,children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione um pacote"})}),r.jsx(ct,{children:n.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:"Nenhum pacote disponvel para esta fazenda"}):n.map(U=>r.jsxs(Pe,{value:U.id,children:[At(U.data_despacho)," - ",U.total," embrio(es) -",U.frescos>0&&` ${U.frescos} fresco(s)`,U.congelados>0&&` ${U.congelados} congelado(s)`]},U.id))})]})]}),k.fazenda_id&&k.pacote_id&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(te,{htmlFor:"receptora_id",children:"3. Receptora Sincronizada *"}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[r.jsx(Mg,{id:"permitir-duplas",checked:p,onCheckedChange:m,className:"scale-75"}),r.jsx(te,{htmlFor:"permitir-duplas",className:"cursor-pointer text-xs",children:"Permitir duplas"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(ht,{value:k.receptora_id,onValueChange:U=>{const ie=i.find(B=>B.receptora_id===U);$({...k,receptora_id:U,protocolo_receptora_id:(ie==null?void 0:ie.protocolo_receptora_id)||""})},disabled:!k.fazenda_id||!k.pacote_id,className:"flex-1",children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione a receptora"})}),r.jsx(ct,{children:i.length===0?r.jsx("div",{className:"p-2 text-sm text-slate-500",children:p?"Nenhuma receptora sincronizada disponvel. Todas j receberam 2 embries ou no esto sincronizadas.":"Nenhuma receptora sincronizada disponvel nesta fazenda"}):i.map(U=>{const ie=U.quantidade_embrioes||0,B=ie>0;return r.jsx(Pe,{value:U.receptora_id,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:U.brinco}),B&&p&&r.jsx(Qe,{variant:"outline",className:"bg-orange-100 text-orange-800 border-orange-300 text-xs",children:ie===1?"1 embrio":"2 embries"}),U.data_te_prevista&&r.jsxs("span",{className:"text-slate-500 text-xs",children:["(TE prevista: ",At(U.data_te_prevista),")"]})]})},U.receptora_id)})})]}),k.receptora_id&&k.protocolo_receptora_id&&r.jsx(se,{type:"button",variant:"destructive",size:"icon",onClick:I,disabled:f,title:"Descartar receptora (no receber embrio)",children:r.jsx(Lu,{className:"w-4 h-4"})})]}),k.receptora_id&&(()=>{const U=i.find(oe=>oe.receptora_id===k.receptora_id),ie=(U==null?void 0:U.qualidade_semaforo)!==null&&(U==null?void 0:U.qualidade_semaforo)!==void 0,B=(U==null?void 0:U.ciclando_classificacao)!==null&&(U==null?void 0:U.ciclando_classificacao)!==void 0;return ie||B?r.jsxs("div",{className:"mt-3 p-3 bg-slate-50 rounded-md border border-slate-200",children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Avaliao da Receptora:"}),r.jsxs("div",{className:"flex items-center gap-4",children:[B&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"Ciclando:"}),r.jsx(Jf,{value:U.ciclando_classificacao,variant:"display",disabled:!0})]}),ie&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-slate-600",children:"Qualidade:"}),r.jsx(Wf,{value:U.qualidade_semaforo,variant:"single",disabled:!0})]})]})]}):null})()]}),k.pacote_id&&r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"data_te",children:"Data da TE *"}),r.jsx(_e,{id:"data_te",type:"date",value:k.data_te,onChange:U=>{const ie=U.target.value;$({...k,data_te:ie}),W(B=>({...B,data_te:ie}))},required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"veterinario_responsavel",children:"Veterinrio Responsvel"}),r.jsx(_e,{id:"veterinario_responsavel",value:k.veterinario_responsavel,onChange:U=>{const ie=U.target.value;$({...k,veterinario_responsavel:ie}),W(B=>({...B,veterinario_responsavel:ie}))},placeholder:"Nome do veterinrio"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"tecnico_responsavel",children:"Tcnico Responsvel"}),r.jsx(_e,{id:"tecnico_responsavel",value:k.tecnico_responsavel,onChange:U=>{const ie=U.target.value;$({...k,tecnico_responsavel:ie}),W(B=>({...B,tecnico_responsavel:ie}))},placeholder:"Nome do tcnico"})]})]}),k.embriao_id&&k.receptora_id&&r.jsx("div",{className:"flex gap-2 pt-2",children:r.jsxs(se,{type:"submit",className:"bg-green-600 hover:bg-green-700",disabled:f,children:[r.jsx(Jv,{className:"w-4 h-4 mr-2"}),f?"Registrando...":"Registrar Transferncia"]})})]}),k.pacote_id&&P&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(te,{children:"4. Selecionar Embrio do Pacote *"}),r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"font-semibold text-slate-900",children:"Pacote selecionado"}),r.jsxs("p",{className:"text-sm text-slate-600",children:["Data Despacho: ",At(P.data_despacho)," | Total: ",P.total," embrio(es)"]})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{className:"w-12"}),r.jsx(K,{className:"text-center w-16",children:"N"}),r.jsx(K,{children:"Doadora"}),r.jsx(K,{children:"Touro"}),r.jsx(K,{children:"Classificao"}),r.jsx(K,{children:"Status"})]})}),r.jsx(jt,{children:[...H].sort((ie,B)=>{const oe=G.get(ie.id)||9999,je=G.get(B.id)||9999;return oe-je}).map(ie=>{const B=G.get(ie.id)||0;return r.jsxs(Re,{className:k.embriao_id===ie.id?"bg-green-50":"cursor-pointer hover:bg-slate-50",onClick:()=>$({...k,embriao_id:ie.id}),children:[r.jsx(Y,{children:r.jsx("input",{type:"radio",name:"embriao",value:ie.id,checked:k.embriao_id===ie.id,onChange:()=>$({...k,embriao_id:ie.id}),className:"w-4 h-4"})}),r.jsx(Y,{className:"text-center font-medium",children:B}),r.jsx(Y,{children:ie.doadora_registro||"-"}),r.jsx(Y,{children:ie.touro_nome||"-"}),r.jsx(Y,{children:ie.classificacao?r.jsx(Qe,{variant:"outline",children:ie.classificacao}):r.jsx("span",{className:"text-slate-400",children:"-"})}),r.jsx(Y,{children:r.jsx(kn,{status:ie.status_atual})})]},ie.id)})})]})})]})]}),k.embriao_id&&k.receptora_id&&r.jsx("div",{className:"space-y-4 border-t pt-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"observacoes",children:"Observaes"}),r.jsx(Ma,{id:"observacoes",value:k.observacoes,onChange:U=>$({...k,observacoes:U.target.value}),placeholder:"Observaes sobre a transferncia",rows:3})]})})]})})]}),r.jsx(ea,{open:g,onOpenChange:v,children:r.jsxs(Zt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Yt,{children:[r.jsxs(Qt,{className:"flex items-center gap-2",children:[r.jsx(oc,{className:"w-5 h-5"}),"Relatrio da Sesso de Transferncia de Embries"]}),r.jsxs(ta,{children:["Fazenda: ",((de=e.find(U=>U.id===k.fazenda_id))==null?void 0:de.nome)||"N/A"," | Data da TE: ",k.data_te?At(k.data_te):"N/A"," | Total: ",w.length," transferncia(s)"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Veterinrio Responsvel:"})," ",k.veterinario_responsavel||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Tcnico Responsvel:"})," ",k.tecnico_responsavel||"N/A"]})]}),r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{className:"text-center",children:"N Embrio"}),r.jsx(K,{children:"Doadora"}),r.jsx(K,{children:"Touro"}),r.jsx(K,{children:"Classificao"}),r.jsx(K,{children:"Receptora (Brinco)"}),r.jsx(K,{children:"Receptora (Nome)"}),r.jsx(K,{children:"Data TE"}),r.jsx(K,{children:"Observaes"})]})}),r.jsx(jt,{children:w.map((U,ie)=>r.jsxs(Re,{children:[r.jsx(Y,{className:"text-center font-semibold",children:U.numero_embriao}),r.jsx(Y,{children:U.doadora}),r.jsx(Y,{children:U.touro}),r.jsx(Y,{children:U.classificacao}),r.jsx(Y,{className:"font-semibold",children:U.receptora_brinco}),r.jsx(Y,{children:U.receptora_nome}),r.jsx(Y,{children:U.data_te?At(U.data_te):"N/A"}),r.jsx(Y,{className:"text-sm text-slate-600",children:U.observacoes||"-"})]},ie))})]})})]}),r.jsxs(PS,{children:[r.jsx(se,{type:"button",variant:"outline",onClick:()=>{v(!1),T(!1)},children:"Fechar"}),!S&&r.jsx(se,{type:"button",onClick:async()=>{v(!1),T(!1),await R()},className:"bg-blue-600 hover:bg-blue-700",disabled:f,children:f?"Encerrando...":"Confirmar e Encerrar Sesso"})]})]})})]})}function Z5(){const[e,t]=u.useState([]),[a,s]=u.useState(""),[n,o]=u.useState([]),[i,l]=u.useState(null),[c,d]=u.useState([]),[f,h]=u.useState(!1),[p,m]=u.useState(!1),[b,x]=u.useState(!1),{toast:y}=aa(),[_,g]=u.useState({}),[v,w]=u.useState({veterinario_responsavel:"",tecnico_responsavel:""}),E=new Date().toISOString().split("T")[0];u.useEffect(()=>{S()},[]),u.useEffect(()=>{a?T(a):(o([]),l(null),d([]),g({}))},[a]),u.useEffect(()=>{i?i.status==="FECHADO"?(w({veterinario_responsavel:i.veterinario_dg||"",tecnico_responsavel:i.tecnico_dg||""}),x(!1),k(i)):i.veterinario_dg&&i.tecnico_dg?(w({veterinario_responsavel:i.veterinario_dg,tecnico_responsavel:i.tecnico_dg}),x(!1),k(i)):(w({veterinario_responsavel:"",tecnico_responsavel:""}),x(!0),d([]),g({})):(d([]),g({}),x(!1))},[i]);const S=async()=>{try{const{data:O,error:D}=await z.from("fazendas").select("*").order("nome",{ascending:!0});if(D)throw D;t(O||[])}catch(O){y({title:"Erro ao carregar fazendas",description:O instanceof Error?O.message:"Erro desconhecido",variant:"destructive"})}},T=async O=>{try{h(!0);const{data:D,error:N}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",O);if(N)throw N;const F=(D==null?void 0:D.map(ae=>ae.receptora_id))||[];if(F.length===0){o([]);return}const{data:I}=await z.from("receptoras").select("id, status_reprodutivo").in("id",F).eq("status_reprodutivo","SERVIDA"),j=(I==null?void 0:I.map(ae=>ae.id))||[];if(j.length===0){o([]);return}const{data:A,error:L}=await z.from("transferencias_embrioes").select("id, receptora_id, data_te").in("receptora_id",j).eq("status_te","REALIZADA").order("data_te",{ascending:!1});if(L)throw L;const{data:R}=await z.from("diagnosticos_gestacao").select("receptora_id, data_te, veterinario_responsavel, tecnico_responsavel, data_diagnostico").in("receptora_id",j).eq("tipo_diagnostico","DG").order("data_diagnostico",{ascending:!1}),P=new Map,H=new Map;A==null||A.forEach(ae=>{var de;const G=`${O}-${ae.data_te}`,be=`${ae.data_te}-${ae.receptora_id}`;if(H.has(ae.data_te)||H.set(ae.data_te,new Set),H.get(ae.data_te).add(ae.receptora_id),!P.has(G)){const U=R==null?void 0:R.find(ie=>ie.data_te===ae.data_te);P.set(G,{id:G,fazenda_id:O,fazenda_nome:((de=e.find(ie=>ie.id===O))==null?void 0:de.nome)||"",data_te:ae.data_te,quantidade_receptoras:0,veterinario_dg:(U==null?void 0:U.veterinario_responsavel)||void 0,tecnico_dg:(U==null?void 0:U.tecnico_responsavel)||void 0,status:"ABERTO"})}}),P.forEach((ae,G)=>{var U;const be=((U=H.get(ae.data_te))==null?void 0:U.size)||0;ae.quantidade_receptoras=be;const de=(R==null?void 0:R.filter(ie=>ie.data_te===ae.data_te))||[];de.length>0&&de.length>=be?ae.status="FECHADO":ae.status="ABERTO"});const V=Array.from(P.values()).sort((ae,G)=>new Date(G.data_te).getTime()-new Date(ae.data_te).getTime());o(V)}catch(D){y({title:"Erro ao carregar lotes",description:D instanceof Error?D.message:"Erro desconhecido",variant:"destructive"}),o([])}finally{h(!1)}},q=async()=>{if(!v.veterinario_responsavel.trim()||!v.tecnico_responsavel.trim()){y({title:"Erro de validao",description:"Veterinrio e tcnico responsveis so obrigatrios",variant:"destructive"});return}if(!i)return;const O={...i,veterinario_dg:v.veterinario_responsavel.trim(),tecnico_dg:v.tecnico_responsavel.trim(),status:"ABERTO"};l(O),x(!1),await k(O)},k=async O=>{try{h(!0);const{data:D,error:N}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",O.fazenda_id);if(N)throw N;const F=(D==null?void 0:D.map(me=>me.receptora_id))||[];if(F.length===0){d([]);return}const{data:I,error:j}=await z.from("receptoras").select("id, identificacao, nome, status_reprodutivo").in("id",F).eq("status_reprodutivo","SERVIDA");if(j)throw j;const A=(I==null?void 0:I.map(me=>me.id))||[],{data:L,error:R}=await z.from("transferencias_embrioes").select("id, receptora_id, embriao_id, data_te").in("receptora_id",A).eq("data_te",O.data_te).eq("status_te","REALIZADA");if(R)throw R;if(!L||L.length===0){d([]);return}const P=L.map(me=>me.embriao_id).filter(Boolean);let H=new Map;if(P.length>0){const{data:me,error:Ne}=await z.from("embrioes").select("id, identificacao, classificacao, lote_fiv_id, lote_fiv_acasalamento_id").in("id",P);if(Ne)throw Ne;H=new Map((me==null?void 0:me.map(Ae=>[Ae.id,Ae]))||[])}const V=[...new Set(Array.from(H.values()).map(me=>me.lote_fiv_id).filter(Boolean))];let ae=new Map;if(V.length>0){const{data:me,error:Ne}=await z.from("lotes_fiv").select("id, data_abertura").in("id",V);if(Ne)throw Ne;ae=new Map((me==null?void 0:me.map(Ae=>[Ae.id,Ae]))||[])}const G=[...new Set(Array.from(H.values()).map(me=>me.lote_fiv_acasalamento_id).filter(Boolean))];let be=new Map,de=new Map;if(G.length>0){const{data:me}=await z.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",G);if(me){const Ne=[...new Set(me.map(fe=>fe.aspiracao_doadora_id).filter(Boolean))],Ae=[...new Set(me.map(fe=>fe.dose_semen_id).filter(Boolean))];if(Ne.length>0){const{data:fe}=await z.from("aspiracoes_doadoras").select("id, doadora_id").in("id",Ne);if(fe){const M=[...new Set(fe.map(ee=>ee.doadora_id))];if(M.length>0){const{data:ee}=await z.from("doadoras").select("id, registro").in("id",M);if(ee){const ce=new Map(ee.map(re=>[re.id,re.registro])),X=new Map(fe.map(re=>[re.id,re.doadora_id]));me.forEach(re=>{if(re.aspiracao_doadora_id){const C=X.get(re.aspiracao_doadora_id);if(C){const Q=ce.get(C);Q&&be.set(re.id,Q)}}})}}}}if(Ae.length>0){const{data:fe}=await z.from("doses_semen").select("id, nome").in("id",Ae);fe&&(fe.forEach(M=>{de.set(M.id,M.nome)}),me.forEach(M=>{if(M.dose_semen_id){const ee=de.get(M.dose_semen_id);ee&&de.set(M.id,ee)}}))}}}const{data:U}=await z.from("diagnosticos_gestacao").select("*").in("receptora_id",A).eq("tipo_diagnostico","DG").eq("data_te",O.data_te).order("data_diagnostico",{ascending:!1}),ie=new Map;U==null||U.forEach(me=>{ie.has(me.receptora_id)||ie.set(me.receptora_id,me)});const B=new Map;L.forEach(me=>{const Ne=`${me.receptora_id}-${me.data_te}`;B.has(Ne)||B.set(Ne,[]),B.get(Ne).push(me)});const oe=[];B.forEach((me,Ne)=>{const Ae=me[0],fe=I==null?void 0:I.find(re=>re.id===Ae.receptora_id);if(!fe)return;const M=[];let ee=null,ce=null;if(me.forEach(re=>{const C=H.get(re.embriao_id);if(!C)return;const Q=ae.get(C.lote_fiv_id);if(!Q)return;if(!ee){ee=Q.data_abertura;const ge=new Date(Q.data_abertura);ce=Math.floor((new Date().getTime()-ge.getTime())/(1e3*60*60*24))}const J=C.lote_fiv_acasalamento_id?be.get(C.lote_fiv_acasalamento_id):void 0,ne=C.lote_fiv_acasalamento_id?de.get(C.lote_fiv_acasalamento_id):void 0;M.push({te_id:re.id,embriao_id:C.id,embriao_identificacao:C.identificacao,embriao_classificacao:C.classificacao,lote_fiv_id:C.lote_fiv_id,lote_fiv_acasalamento_id:C.lote_fiv_acasalamento_id,doadora_registro:J,touro_nome:ne})}),M.length===0||!ee||ce===null)return;const X=ie.get(Ae.receptora_id);oe.push({receptora_id:Ae.receptora_id,brinco:fe.identificacao,nome:fe.nome,data_te:Ae.data_te,embrioes:M,data_abertura_lote:ee,dias_gestacao:ce,diagnostico_existente:X?{id:X.id,data_diagnostico:X.data_diagnostico,resultado:X.resultado,numero_gestacoes:X.numero_gestacoes||void 0,observacoes:X.observacoes||void 0}:void 0})}),oe.sort((me,Ne)=>me.brinco.localeCompare(Ne.brinco)),d(oe);const je={};oe.forEach(me=>{var Ne;if(me.diagnostico_existente){const Ae=me.diagnostico_existente.resultado,fe=((Ne=me.diagnostico_existente.numero_gestacoes)==null?void 0:Ne.toString())||(Ae==="PRENHE"||Ae==="RETOQUE"?"1":"");je[me.receptora_id]={resultado:Ae,numero_gestacoes:fe,observacoes:me.diagnostico_existente.observacoes||"",data_diagnostico:me.diagnostico_existente.data_diagnostico}}else je[me.receptora_id]={resultado:"",numero_gestacoes:"",observacoes:"",data_diagnostico:E}}),g(je)}catch(D){y({title:"Erro ao carregar receptoras",description:D instanceof Error?D.message:"Erro desconhecido",variant:"destructive"}),d([])}finally{h(!1)}},$=(O,D)=>{g(N=>{const F=N[O]||{};let I=F.numero_gestacoes||"";return(D==="PRENHE"||D==="RETOQUE")&&!I?I="1":(D==="VAZIA"||D==="")&&(I=""),{...N,[O]:{...F,resultado:D,numero_gestacoes:I}}})},Z=(O,D,N)=>{g(F=>({...F,[O]:{...F[O],[D]:N}}))},W=async()=>{var D,N,F;if(!i)return;if(!v.veterinario_responsavel.trim()||!v.tecnico_responsavel.trim()){y({title:"Erro de validao",description:"Veterinrio e tcnico responsveis so obrigatrios",variant:"destructive"});return}const O=c.filter(I=>{const j=_[I.receptora_id];return!j||!j.resultado||!j.data_diagnostico});if(O.length>0){y({title:"Erro de validao",description:`H ${O.length} receptora(s) sem resultado definido`,variant:"destructive"});return}try{m(!0);for(const R of c){const P=await xo(R.receptora_id),H=Ni(P,"REALIZAR_DG");if(!H.valido){y({title:"Erro de validao",description:`Receptora ${R.brinco}: ${H.mensagem}`,variant:"destructive"});return}}const I=[],j=[],A=[];if(c.forEach(R=>{var G,be;const P=_[R.receptora_id];if(!P||!P.resultado)return;if(!P.data_diagnostico){console.warn(`Receptora ${R.brinco} sem data de diagnstico`);return}const H={receptora_id:R.receptora_id,data_te:R.data_te,tipo_diagnostico:"DG",data_diagnostico:P.data_diagnostico,resultado:P.resultado,observacoes:P.observacoes&&P.observacoes.trim()||null};P.resultado==="PRENHE"||P.resultado==="RETOQUE"?P.numero_gestacoes?H.numero_gestacoes=parseInt(P.numero_gestacoes):H.numero_gestacoes=1:H.numero_gestacoes=0,(G=v.veterinario_responsavel)!=null&&G.trim()&&(H.veterinario_responsavel=v.veterinario_responsavel.trim()),(be=v.tecnico_responsavel)!=null&&be.trim()&&(H.tecnico_responsavel=v.tecnico_responsavel.trim()),R.diagnostico_existente?j.push({id:R.diagnostico_existente.id,...H}):I.push(H);let V,ae=null;if(P.resultado==="PRENHE"){V="PRENHE";const de=new Date(R.data_abertura_lote),U=new Date(de);U.setDate(U.getDate()+290),ae=U.toISOString().split("T")[0]}else if(P.resultado==="RETOQUE"){V="PRENHE_RETOQUE";const de=new Date(R.data_abertura_lote),U=new Date(de);U.setDate(U.getDate()+290),ae=U.toISOString().split("T")[0]}else V="VAZIA",P.numero_gestacoes="";A.push({receptora_id:R.receptora_id,status:V,dataParto:ae})}),I.length>0){const R=I.map(G=>`${G.receptora_id}-${G.data_te}-${G.tipo_diagnostico}`),{data:P,error:H}=await z.from("diagnosticos_gestacao").select("id, receptora_id, data_te, tipo_diagnostico").in("receptora_id",[...new Set(I.map(G=>G.receptora_id))]).eq("tipo_diagnostico","DG");H&&console.warn("Erro ao verificar diagnsticos existentes:",H);const V=new Map;P==null||P.forEach(G=>{const be=`${G.receptora_id}-${G.data_te}-${G.tipo_diagnostico}`;V.set(be,G.id)});const ae=[];if(I.forEach(G=>{const be=`${G.receptora_id}-${G.data_te}-${G.tipo_diagnostico}`,de=V.get(be);de?j.push({id:de,...G}):ae.push(G)}),ae.length>0){const{error:G}=await z.from("diagnosticos_gestacao").insert(ae);if(G)if(console.error("Erro ao inserir diagnsticos:",G),(D=G.message)!=null&&D.includes("column")||G.code==="42703"){console.warn("Campos veterinario_responsavel/tecnico_responsavel no existem, tentando sem eles...");const be=ae.map(({veterinario_responsavel:U,tecnico_responsavel:ie,...B})=>B),{error:de}=await z.from("diagnosticos_gestacao").insert(be);if(de)throw new Error(`Erro ao inserir diagnsticos: ${de.message}. Verifique se os campos esto corretos no banco de dados.`)}else throw G.code==="23505"||(N=G.message)!=null&&N.includes("unique")?new Error("Erro de duplicao: alguns diagnsticos j existem. Recarregue a pgina e tente novamente."):new Error(`Erro ao inserir diagnsticos: ${G.message||G.code||"Erro desconhecido"}`)}}if(j.length>0)for(const R of j){const{id:P,...H}=R;let{error:V}=await z.from("diagnosticos_gestacao").update(H).eq("id",P);if(V&&((F=V.message)!=null&&F.includes("column")||V.code==="42703")){console.warn("Campos veterinario_responsavel/tecnico_responsavel no existem, atualizando sem eles...");const{veterinario_responsavel:ae,tecnico_responsavel:G,...be}=H,{error:de}=await z.from("diagnosticos_gestacao").update(be).eq("id",P);if(de)throw new Error(`Erro ao atualizar diagnstico ${P}: ${de.message}`)}else if(V)throw new Error(`Erro ao atualizar diagnstico ${P}: ${V.message||V.code||"Erro desconhecido"}`)}for(const R of A){const P={status_reprodutivo:R.status};R.dataParto?P.data_provavel_parto=R.dataParto:R.status==="VAZIA"&&(P.data_provavel_parto=null);const{error:H}=await z.from("receptoras").update(P).eq("id",R.receptora_id);H&&console.error(`Erro ao atualizar status da receptora ${R.receptora_id}:`,H)}const L=c.every(R=>{const P=_[R.receptora_id];return P&&P.resultado&&P.data_diagnostico});l({...i,veterinario_dg:v.veterinario_responsavel.trim(),tecnico_dg:v.tecnico_responsavel.trim(),status:L?"FECHADO":"ABERTO"}),y({title:"Lote salvo com sucesso",description:L?`${c.length} diagnstico(s) registrado(s). Lote fechado.`:`${c.length} diagnstico(s) registrado(s)`}),await T(a),i&&await k(i)}catch(I){console.error("Erro detalhado ao salvar lote:",I);let j="Erro desconhecido";I instanceof Error&&(j=I.message,I.message.includes("column")&&I.message.includes("does not exist")?j="Os campos veterinario_responsavel e tecnico_responsavel no existem na tabela. Execute o script SQL add_veterinario_tecnico_dg.sql primeiro.":I.message.includes("unique")||I.message.includes("duplicate")?j="J existe um diagnstico para esta receptora nesta data. Tente recarregar a pgina.":(I.message.includes("foreign key")||I.message.includes("constraint"))&&(j="Erro de integridade dos dados. Verifique se todas as informaes esto corretas.")),y({title:"Erro ao salvar lote",description:j,variant:"destructive"})}finally{m(!1)}},le=c.every(O=>{const D=_[O.receptora_id];return D&&D.resultado&&D.data_diagnostico});return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Diagnstico de Gestao (DG)"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Registrar diagnsticos de gestao por lote de TE"})]})}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Selecionar Fazenda"})}),r.jsx(ze,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"fazenda",children:"Fazenda *"}),r.jsxs(ht,{value:a,onValueChange:s,children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione a fazenda"})}),r.jsx(ct,{children:e.map(O=>r.jsx(Pe,{value:O.id,children:O.nome},O.id))})]})]})})]}),a&&r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Lotes de Transferncia de Embries"})}),r.jsx(ze,{children:f?r.jsx(Nt,{}):n.length===0?r.jsx("p",{className:"text-center text-slate-500 py-8",children:"Nenhum lote de TE encontrado nesta fazenda"}):r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Data TE"}),r.jsx(K,{children:"Quantidade"}),r.jsx(K,{children:"Vet. DG"}),r.jsx(K,{children:"Tc. DG"}),r.jsx(K,{children:"Status"}),r.jsx(K,{className:"text-right",children:"Aes"})]})}),r.jsx(jt,{children:n.map(O=>r.jsxs(Re,{className:(i==null?void 0:i.id)===O.id?"bg-blue-50":"",children:[r.jsx(Y,{className:"font-medium",children:new Date(O.data_te).toLocaleDateString("pt-BR")}),r.jsxs(Y,{children:[O.quantidade_receptoras," receptoras"]}),r.jsx(Y,{children:O.veterinario_dg||"-"}),r.jsx(Y,{children:O.tecnico_dg||"-"}),r.jsx(Y,{children:r.jsx(kn,{status:O.status==="ABERTO"?"ABERTO":"FECHADO"})}),r.jsx(Y,{className:"text-right",children:r.jsx(se,{size:"sm",onClick:()=>l(O),variant:(i==null?void 0:i.id)===O.id?"default":"outline",children:(i==null?void 0:i.id)===O.id?"Selecionado":"Selecionar"})})]},O.id))})]})})]}),i&&b&&r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Abrir Lote de DG"})}),r.jsxs(ze,{className:"space-y-4",children:[r.jsxs("p",{className:"text-slate-600",children:["Lote de TE em ",new Date(i.data_te).toLocaleDateString("pt-BR")," - ",i.quantidade_receptoras," receptoras"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"veterinario",children:"Veterinrio Responsvel *"}),r.jsx(_e,{id:"veterinario",value:v.veterinario_responsavel,onChange:O=>w({...v,veterinario_responsavel:O.target.value}),placeholder:"Nome do veterinrio"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"tecnico",children:"Tcnico Responsvel *"}),r.jsx(_e,{id:"tecnico",value:v.tecnico_responsavel,onChange:O=>w({...v,tecnico_responsavel:O.target.value}),placeholder:"Nome do tcnico"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(se,{onClick:q,className:"bg-green-600 hover:bg-green-700",disabled:!v.veterinario_responsavel.trim()||!v.tecnico_responsavel.trim(),children:[r.jsx(xf,{className:"w-4 h-4 mr-2"}),"Abrir Lote"]}),r.jsx(se,{variant:"outline",onClick:()=>{x(!1),l(null)},children:"Cancelar"})]})]})]}),i&&!b&&c.length>0&&r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ke,{children:["Receptoras do Lote - ",c.length," ",c.length===1?"receptora":"receptoras",i.status==="FECHADO"&&r.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"(Lote Fechado - Somente Leitura)"})]}),i.status==="ABERTO"&&r.jsxs(se,{onClick:W,disabled:!le||p,className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ad,{className:"w-4 h-4 mr-2"}),p?"Salvando...":"Salvar Lote Completo"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"veterinario_dg",children:"Veterinrio Responsvel (DG) *"}),r.jsx(_e,{id:"veterinario_dg",value:v.veterinario_responsavel,onChange:O=>w({...v,veterinario_responsavel:O.target.value}),placeholder:"Nome do veterinrio",disabled:i.status==="FECHADO"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"tecnico_dg",children:"Tcnico Responsvel (DG) *"}),r.jsx(_e,{id:"tecnico_dg",value:v.tecnico_responsavel,onChange:O=>w({...v,tecnico_responsavel:O.target.value}),placeholder:"Nome do tcnico",disabled:i.status==="FECHADO"})]})]})]})}),r.jsx(ze,{children:f?r.jsx(Nt,{}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Receptora"}),r.jsx(K,{children:"Dias Gestao"}),r.jsx(K,{children:"Embrio(es)"}),r.jsx(K,{children:"Doadora / Touro"}),r.jsx(K,{children:"Data DG"}),r.jsx(K,{children:"Resultado"}),r.jsx(K,{children:"N Gest."}),r.jsx(K,{children:"Observaes"})]})}),r.jsx(jt,{children:c.map(O=>{var F;const D=_[O.receptora_id]||{resultado:"",numero_gestacoes:"",observacoes:"",data_diagnostico:E},N=!!O.diagnostico_existente;return r.jsxs(Re,{children:[r.jsxs(Y,{className:"font-medium",children:[O.brinco,O.nome&&r.jsxs("span",{className:"text-slate-500 text-sm ml-2",children:["(",O.nome,")"]}),N&&r.jsx(kn,{status:((F=O.diagnostico_existente)==null?void 0:F.resultado)||"",className:"ml-2"})]}),r.jsxs(Y,{children:[r.jsx("span",{className:"font-semibold",children:O.dias_gestacao})," dias"]}),r.jsx(Y,{children:r.jsx("div",{className:"space-y-1",children:O.embrioes.map((I,j)=>r.jsx("div",{className:"text-sm",children:r.jsxs("div",{className:"font-medium",children:[I.embriao_identificacao||`Embrio ${j+1}`,I.embriao_classificacao&&r.jsxs("span",{className:"text-slate-500 ml-2",children:["(",I.embriao_classificacao,")"]})]})},I.te_id))})}),r.jsx(Y,{children:r.jsx("div",{className:"space-y-1",children:O.embrioes.map((I,j)=>r.jsx("div",{className:"text-sm",children:r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:I.doadora_registro||"-"}),I.doadora_registro&&I.touro_nome&&"  ",r.jsx("span",{className:"font-medium",children:I.touro_nome||""})]})},I.te_id))})}),r.jsx(Y,{children:r.jsx(_e,{type:"date",value:D.data_diagnostico,onChange:I=>Z(O.receptora_id,"data_diagnostico",I.target.value),className:"w-36",disabled:i.status==="FECHADO"})}),r.jsx(Y,{children:r.jsxs(ht,{value:D.resultado,onValueChange:I=>$(O.receptora_id,I),disabled:i.status==="FECHADO",children:[r.jsx(lt,{className:"w-32",children:r.jsx(mt,{placeholder:"Resultado"})}),r.jsxs(ct,{children:[r.jsx(Pe,{value:"PRENHE",children:"PRENHE"}),r.jsx(Pe,{value:"VAZIA",children:"VAZIA"}),r.jsx(Pe,{value:"RETOQUE",children:"RETOQUE"})]})]})}),r.jsx(Y,{children:D.resultado==="PRENHE"||D.resultado==="RETOQUE"?r.jsx(_e,{type:"number",min:"1",max:"3",value:D.numero_gestacoes,onChange:I=>Z(O.receptora_id,"numero_gestacoes",I.target.value),placeholder:"1-3",className:"w-20",disabled:i.status==="FECHADO"}):r.jsx("span",{className:"text-slate-400",children:"-"})}),r.jsx(Y,{children:r.jsx(Ma,{value:D.observacoes,onChange:I=>Z(O.receptora_id,"observacoes",I.target.value),placeholder:"Observaes",rows:2,className:"w-48",disabled:i.status==="FECHADO"})})]},O.receptora_id)})})]})})})]})]})}function Y5(){const[e,t]=u.useState([]),[a,s]=u.useState(""),[n,o]=u.useState([]),[i,l]=u.useState(null),[c,d]=u.useState([]),[f,h]=u.useState(!1),[p,m]=u.useState(!1),[b,x]=u.useState(!1),{toast:y}=aa(),[_,g]=u.useState({}),[v,w]=u.useState({veterinario_responsavel:"",tecnico_responsavel:""}),E=new Date().toISOString().split("T")[0];u.useEffect(()=>{S()},[]),u.useEffect(()=>{a?T(a):(o([]),l(null),d([]),g({}))},[a]),u.useEffect(()=>{i?i.status==="FECHADO"?(w({veterinario_responsavel:i.veterinario_sexagem||"",tecnico_responsavel:i.tecnico_sexagem||""}),x(!1),k(i)):i.veterinario_sexagem&&i.tecnico_sexagem?(w({veterinario_responsavel:i.veterinario_sexagem,tecnico_responsavel:i.tecnico_sexagem}),x(!1),k(i)):(w({veterinario_responsavel:"",tecnico_responsavel:""}),x(!0),d([]),g({})):(d([]),g({}),x(!1))},[i]);const S=async()=>{try{const{data:D,error:N}=await z.from("fazendas").select("*").order("nome");if(N)throw N;t(D||[])}catch(D){y({title:"Erro ao carregar fazendas",description:D instanceof Error?D.message:"Erro desconhecido",variant:"destructive"})}},T=async D=>{try{h(!0);const{data:N}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",D),F=(N==null?void 0:N.map(V=>V.receptora_id))||[],{data:I}=await z.from("receptoras").select("id").in("id",F).in("status_reprodutivo",["PRENHE","PRENHE_RETOQUE","PRENHE_FEMEA","PRENHE_MACHO","PRENHE_SEM_SEXO","PRENHE_2_SEXOS"]),j=(I==null?void 0:I.map(V=>V.id))||[],{data:A}=await z.from("transferencias_embrioes").select("id, receptora_id, data_te").in("receptora_id",j).eq("status_te","REALIZADA").order("data_te",{ascending:!1}),{data:L}=await z.from("diagnosticos_gestacao").select("receptora_id, data_te, veterinario_responsavel, tecnico_responsavel, data_diagnostico").in("receptora_id",j).eq("tipo_diagnostico","SEXAGEM").order("data_diagnostico",{ascending:!1}),R=new Map,P=new Map;A==null||A.forEach(V=>{var be;const ae=`${D}-${V.data_te}`,G=`${V.data_te}-${V.receptora_id}`;if(P.has(V.data_te)||P.set(V.data_te,new Set),P.get(V.data_te).add(V.receptora_id),!R.has(ae)){const de=L==null?void 0:L.find(U=>U.data_te===V.data_te);R.set(ae,{id:ae,fazenda_id:D,fazenda_nome:((be=e.find(U=>U.id===D))==null?void 0:be.nome)||"",data_te:V.data_te,quantidade_receptoras:0,veterinario_sexagem:(de==null?void 0:de.veterinario_responsavel)||void 0,tecnico_sexagem:(de==null?void 0:de.tecnico_responsavel)||void 0,status:"ABERTO"})}}),R.forEach(V=>{var be;const ae=((be=P.get(V.data_te))==null?void 0:be.size)||0;V.quantidade_receptoras=ae;const G=(L==null?void 0:L.filter(de=>de.data_te===V.data_te))||[];G.length>0&&G.length>=ae&&(V.status="FECHADO")});const H=Array.from(R.values()).sort((V,ae)=>new Date(ae.data_te).getTime()-new Date(V.data_te).getTime());o(H)}catch(N){y({title:"Erro ao carregar lotes",description:N instanceof Error?N.message:"Erro desconhecido",variant:"destructive"}),o([])}finally{h(!1)}},q=async()=>{if(!v.veterinario_responsavel.trim()||!v.tecnico_responsavel.trim()){y({title:"Erro de validao",description:"Veterinrio e tcnico responsveis so obrigatrios",variant:"destructive"});return}if(!i)return;const D={...i,veterinario_sexagem:v.veterinario_responsavel.trim(),tecnico_sexagem:v.tecnico_responsavel.trim(),status:"ABERTO"};l(D),x(!1),await k(D)},k=async D=>{try{h(!0);const{data:N}=await z.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",D.fazenda_id),F=(N==null?void 0:N.map(X=>X.receptora_id))||[],{data:I}=await z.from("receptoras").select("id, identificacao, nome, status_reprodutivo").in("id",F).in("status_reprodutivo",["PRENHE","PRENHE_RETOQUE","PRENHE_FEMEA","PRENHE_MACHO","PRENHE_SEM_SEXO","PRENHE_2_SEXOS"]),j=(I==null?void 0:I.map(X=>X.id))||[];if(j.length===0){d([]);return}const[A,L,R]=await Promise.all([z.from("transferencias_embrioes").select("id, receptora_id, embriao_id, data_te").in("receptora_id",j).eq("data_te",D.data_te).eq("status_te","REALIZADA"),z.from("diagnosticos_gestacao").select("*").in("receptora_id",j).eq("tipo_diagnostico","DG").eq("data_te",D.data_te).order("data_diagnostico",{ascending:!1}),z.from("diagnosticos_gestacao").select("*").in("receptora_id",j).eq("tipo_diagnostico","SEXAGEM").eq("data_te",D.data_te).order("data_diagnostico",{ascending:!1})]),P=A.data,H=L.data,V=R.data;if(!P||P.length===0){d([]);return}const ae=P.map(X=>X.embriao_id).filter(Boolean);let G=new Map;if(ae.length>0){const{data:X}=await z.from("embrioes").select("id, identificacao, classificacao, lote_fiv_id, lote_fiv_acasalamento_id").in("id",ae);X&&(G=new Map(X.map(re=>[re.id,re])))}const be=[...new Set(Array.from(G.values()).map(X=>X.lote_fiv_id).filter(Boolean))],de=[...new Set(Array.from(G.values()).map(X=>X.lote_fiv_acasalamento_id).filter(Boolean))],[U,ie]=await Promise.all([be.length>0?z.from("lotes_fiv").select("id, data_abertura").in("id",be):Promise.resolve({data:null}),de.length>0?z.from("lote_fiv_acasalamentos").select("id, aspiracao_doadora_id, dose_semen_id").in("id",de):Promise.resolve({data:null})]),B=U.data||[],oe=ie.data||[],je=new Map(B.map(X=>[X.id,X]));let me=new Map,Ne=new Map;if(oe.length>0){const X=[...new Set(oe.map(ge=>ge.aspiracao_doadora_id).filter(Boolean))],re=[...new Set(oe.map(ge=>ge.dose_semen_id).filter(Boolean))],[C,Q]=await Promise.all([X.length>0?z.from("aspiracoes_doadoras").select("id, doadora_id").in("id",X):Promise.resolve({data:null}),re.length>0?z.from("doses_semen").select("id, nome").in("id",re):Promise.resolve({data:null})]),J=C.data||[],ne=Q.data||[];if(J.length>0){const ge=[...new Set(J.map(he=>he.doadora_id))];if(ge.length>0){const{data:he}=await z.from("doadoras").select("id, registro").in("id",ge);if(he){const pe=new Map(he.map(Ze=>[Ze.id,Ze.registro])),we=new Map(J.map(Ze=>[Ze.id,Ze.doadora_id]));oe.forEach(Ze=>{if(Ze.aspiracao_doadora_id){const gt=we.get(Ze.aspiracao_doadora_id);if(gt){const Tt=pe.get(gt);Tt&&me.set(Ze.id,Tt)}}})}}}ne.length>0&&(ne.forEach(ge=>{Ne.set(ge.id,ge.nome)}),oe.forEach(ge=>{if(ge.dose_semen_id){const he=Ne.get(ge.dose_semen_id);he&&Ne.set(ge.id,he)}}))}const Ae=new Map;H==null||H.forEach(X=>{Ae.has(X.receptora_id)||Ae.set(X.receptora_id,X)});const fe=new Map;V==null||V.forEach(X=>{fe.has(X.receptora_id)||fe.set(X.receptora_id,X)});const M=new Map;P.forEach(X=>{const re=`${X.receptora_id}-${X.data_te}`;M.has(re)||M.set(re,[]),M.get(re).push(X)});const ee=[];M.forEach((X,re)=>{const C=X[0],Q=I==null?void 0:I.find(pe=>pe.id===C.receptora_id);if(!Q)return;const J=[];let ne=null,ge=null;if(X.forEach(pe=>{const we=G.get(pe.embriao_id);if(!we)return;const Ze=je.get(we.lote_fiv_id);if(!Ze)return;if(!ne){ne=Ze.data_abertura;const it=new Date(Ze.data_abertura);ge=Math.floor((new Date().getTime()-it.getTime())/(1e3*60*60*24))}const gt=we.lote_fiv_acasalamento_id?me.get(we.lote_fiv_acasalamento_id):void 0,Tt=we.lote_fiv_acasalamento_id?Ne.get(we.lote_fiv_acasalamento_id):void 0;J.push({te_id:pe.id,embriao_id:we.id,embriao_identificacao:we.identificacao,embriao_classificacao:we.classificacao,lote_fiv_id:we.lote_fiv_id,lote_fiv_acasalamento_id:we.lote_fiv_acasalamento_id,doadora_registro:gt,touro_nome:Tt})}),J.length===0||!ne||ge===null)return;const he=Ae.get(C.receptora_id);!he||he.resultado==="VAZIA"||ee.push({receptora_id:C.receptora_id,brinco:Q.identificacao,nome:Q.nome,data_te:C.data_te,embrioes:J,data_abertura_lote:ne,dias_gestacao:ge,numero_gestacoes:he.numero_gestacoes||1,diagnostico_existente:fe.get(C.receptora_id)?{id:fe.get(C.receptora_id).id,data_diagnostico:fe.get(C.receptora_id).data_diagnostico,resultado:fe.get(C.receptora_id).resultado,numero_gestacoes:fe.get(C.receptora_id).numero_gestacoes,observacoes:fe.get(C.receptora_id).observacoes}:void 0})}),ee.sort((X,re)=>X.brinco.localeCompare(re.brinco)),d(ee);const ce={};ee.forEach(X=>{if(X.diagnostico_existente){const re=fe.get(X.receptora_id);let C=new Array(X.numero_gestacoes).fill("").map(()=>""),Q=X.diagnostico_existente.observacoes||"";if(re!=null&&re.observacoes){const J=re.observacoes.match(/SEXAGENS:([^|]+)/);if(J){for(C=J[1].split(",").map(ge=>ge.trim());C.length<X.numero_gestacoes;)C.push("");C=C.slice(0,X.numero_gestacoes),Q=re.observacoes.replace(/SEXAGENS:[^|]+\|?/,"").trim()}}C.every(J=>!J)&&(re!=null&&re.sexagem)&&(C[0]=re.sexagem),ce[X.receptora_id]={data_sexagem:X.diagnostico_existente.data_diagnostico,sexagens:C,observacoes:Q}}else ce[X.receptora_id]={data_sexagem:E,sexagens:new Array(X.numero_gestacoes).fill("").map(()=>""),observacoes:""}}),g(ce)}catch(N){y({title:"Erro ao carregar receptoras",description:N instanceof Error?N.message:"Erro desconhecido",variant:"destructive"}),d([])}finally{h(!1)}},$=(D,N,F)=>{g(I=>{const j=I[D]||{data_sexagem:E,sexagens:[],observacoes:""},A=[...j.sexagens];return A[N]=F,{...I,[D]:{...j,sexagens:A}}})},Z=(D,N,F)=>{g(I=>({...I,[D]:{...I[D],[N]:F}}))},W=(D,N)=>{const F=D.filter(L=>L&&L!=="VAZIA");if(F.length===0)return"VAZIA";const I=F.includes("FEMEA"),j=F.includes("MACHO"),A=F.includes("SEM_SEXO");return I&&!j&&!A?"PRENHE_FEMEA":j&&!I&&!A?"PRENHE_MACHO":I&&j?"PRENHE_2_SEXOS":"PRENHE_SEM_SEXO"},le=async()=>{if(!i)return;if(!v.veterinario_responsavel.trim()||!v.tecnico_responsavel.trim()){y({title:"Erro de validao",description:"Veterinrio e tcnico responsveis so obrigatrios",variant:"destructive"});return}const D=c.filter(N=>{const F=_[N.receptora_id];return!F||!F.data_sexagem||!F.sexagens||F.sexagens.length===0||F.sexagens.every(I=>!I)});if(D.length>0){y({title:"Erro de validao",description:`H ${D.length} receptora(s) sem sexagem definida`,variant:"destructive"});return}try{m(!0);const N=[],F=[],I=[];if(c.forEach(A=>{var B,oe;const L=_[A.receptora_id];if(!L||!L.data_sexagem)return;const R=L.sexagens.filter(je=>je&&je!=="VAZIA"),P=L.sexagens.every(je=>!je||je==="VAZIA"),H=W(L.sexagens,A.numero_gestacoes),V=H==="VAZIA"?"VAZIA":"PRENHE";let ae=null;if(V==="PRENHE"){const je=R.every(fe=>fe==="FEMEA")&&R.length>0,me=R.every(fe=>fe==="MACHO")&&R.length>0,Ne=R.includes("FEMEA")&&R.includes("MACHO"),Ae=R.includes("SEM_SEXO");je?ae="FEMEA":me?ae="MACHO":Ne?ae=R[0]||"FEMEA":Ae?ae=R.find(M=>M!=="SEM_SEXO")||null:R.length>0?ae=R.find(fe=>fe==="FEMEA"||fe==="MACHO")||null:ae=null}const G=V==="VAZIA"?0:R.length;(ae==="PRENHE"||ae==="SEM_SEXO")&&(ae=R.find(me=>me==="FEMEA"||me==="MACHO")||null);let be=L.observacoes?L.observacoes.trim():"";const de=L.sexagens.map(je=>je||"").filter(je=>je),U=de.length>0?de.join(","):"";U&&(be.includes("SEXAGENS:")?be=be.replace(/SEXAGENS:[^|]+/,`SEXAGENS:${U}`):be=be?`SEXAGENS:${U}|${be}`:`SEXAGENS:${U}`);const ie={receptora_id:A.receptora_id,data_te:A.data_te,tipo_diagnostico:"SEXAGEM",data_diagnostico:L.data_sexagem,resultado:V,sexagem:ae,numero_gestacoes:G,observacoes:be||null};(B=v.veterinario_responsavel)!=null&&B.trim()&&(ie.veterinario_responsavel=v.veterinario_responsavel.trim()),(oe=v.tecnico_responsavel)!=null&&oe.trim()&&(ie.tecnico_responsavel=v.tecnico_responsavel.trim()),A.diagnostico_existente?F.push({id:A.diagnostico_existente.id,...ie}):N.push(ie),I.push({receptora_id:A.receptora_id,status:H})}),N.length>0){const{error:A}=await z.from("diagnosticos_gestacao").insert(N);if(A)throw console.error("Erro ao inserir sexagens:",A),new Error(`Erro ao inserir sexagens: ${A.message}`)}if(F.length>0)for(const A of F){const{id:L,...R}=A,{error:P}=await z.from("diagnosticos_gestacao").update(R).eq("id",L);if(P)throw console.error("Erro ao atualizar sexagem:",P),new Error(`Erro ao atualizar sexagem: ${P.message}`)}for(const A of I)await kg(A.receptora_id,A.status);const j=c.every(A=>{const L=_[A.receptora_id];return L&&L.data_sexagem&&L.sexagens&&L.sexagens.some(R=>R)});l({...i,veterinario_sexagem:v.veterinario_responsavel.trim(),tecnico_sexagem:v.tecnico_responsavel.trim(),status:j?"FECHADO":"ABERTO"}),y({title:"Lote salvo com sucesso",description:`${c.length} sexagem(ns) registrada(s)`}),await T(a),i&&await k(i)}catch(N){console.error("Erro detalhado ao salvar lote:",N);const F=N instanceof Error?N.message:"Erro desconhecido";y({title:"Erro ao salvar lote",description:F,variant:"destructive"})}finally{m(!1)}},O=c.every(D=>{const N=_[D.receptora_id];return N&&N.data_sexagem&&N.sexagens&&N.sexagens.some(F=>F)});return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Sexagem"}),r.jsx("p",{className:"text-slate-600 mt-1",children:"Registrar sexagem fetal por lote de receptoras prenhes"})]})}),r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Selecionar Fazenda"})}),r.jsx(ze,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"fazenda",children:"Fazenda *"}),r.jsxs(ht,{value:a,onValueChange:s,children:[r.jsx(lt,{children:r.jsx(mt,{placeholder:"Selecione a fazenda"})}),r.jsx(ct,{children:e.map(D=>r.jsx(Pe,{value:D.id,children:D.nome},D.id))})]})]})})]}),a&&r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Lotes de Receptoras Prenhes"})}),r.jsx(ze,{children:f?r.jsx(Nt,{}):n.length===0?r.jsx("p",{className:"text-center text-slate-500 py-8",children:"Nenhum lote de receptoras prenhes encontrado nesta fazenda"}):r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Data TE"}),r.jsx(K,{children:"Quantidade"}),r.jsx(K,{children:"Vet. Sexagem"}),r.jsx(K,{children:"Tc. Sexagem"}),r.jsx(K,{children:"Status"}),r.jsx(K,{className:"text-right",children:"Aes"})]})}),r.jsx(jt,{children:n.map(D=>r.jsxs(Re,{className:(i==null?void 0:i.id)===D.id?"bg-blue-50":"",children:[r.jsx(Y,{className:"font-medium",children:new Date(D.data_te).toLocaleDateString("pt-BR")}),r.jsxs(Y,{children:[D.quantidade_receptoras," receptoras"]}),r.jsx(Y,{children:D.veterinario_sexagem||"-"}),r.jsx(Y,{children:D.tecnico_sexagem||"-"}),r.jsx(Y,{children:r.jsx(kn,{status:D.status==="ABERTO"?"ABERTO":"FECHADO"})}),r.jsx(Y,{className:"text-right",children:r.jsx(se,{size:"sm",onClick:()=>l(D),variant:(i==null?void 0:i.id)===D.id?"default":"outline",children:(i==null?void 0:i.id)===D.id?"Selecionado":"Selecionar"})})]},D.id))})]})})]}),i&&b&&r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsx(ke,{children:"Abrir Lote de Sexagem"})}),r.jsxs(ze,{className:"space-y-4",children:[r.jsxs("p",{className:"text-slate-600",children:["Lote de TE em ",new Date(i.data_te).toLocaleDateString("pt-BR")," - ",i.quantidade_receptoras," receptoras prenhes"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"veterinario",children:"Veterinrio Responsvel *"}),r.jsx(_e,{id:"veterinario",value:v.veterinario_responsavel,onChange:D=>w({...v,veterinario_responsavel:D.target.value}),placeholder:"Nome do veterinrio"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"tecnico",children:"Tcnico Responsvel *"}),r.jsx(_e,{id:"tecnico",value:v.tecnico_responsavel,onChange:D=>w({...v,tecnico_responsavel:D.target.value}),placeholder:"Nome do tcnico"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(se,{onClick:q,className:"bg-green-600 hover:bg-green-700",disabled:!v.veterinario_responsavel.trim()||!v.tecnico_responsavel.trim(),children:[r.jsx(xf,{className:"w-4 h-4 mr-2"}),"Abrir Lote"]}),r.jsx(se,{variant:"outline",onClick:()=>{x(!1),l(null)},children:"Cancelar"})]})]})]}),i&&!b&&c.length>0&&r.jsxs(Oe,{children:[r.jsx(Me,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ke,{children:["Receptoras Prenhes do Lote - ",c.length," ",c.length===1?"receptora":"receptoras",i.status==="FECHADO"&&r.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"(Lote Fechado - Somente Leitura)"})]}),i.status==="ABERTO"&&r.jsxs(se,{onClick:le,disabled:!O||p,className:"bg-green-600 hover:bg-green-700",children:[r.jsx(ad,{className:"w-4 h-4 mr-2"}),p?"Salvando...":"Salvar Lote Completo"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"veterinario_sexagem",children:"Veterinrio Responsvel (Sexagem) *"}),r.jsx(_e,{id:"veterinario_sexagem",value:v.veterinario_responsavel,onChange:D=>w({...v,veterinario_responsavel:D.target.value}),placeholder:"Nome do veterinrio",disabled:i.status==="FECHADO"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{htmlFor:"tecnico_sexagem",children:"Tcnico Responsvel (Sexagem) *"}),r.jsx(_e,{id:"tecnico_sexagem",value:v.tecnico_responsavel,onChange:D=>w({...v,tecnico_responsavel:D.target.value}),placeholder:"Nome do tcnico",disabled:i.status==="FECHADO"})]})]})]})}),r.jsx(ze,{children:f?r.jsx(Nt,{}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(yt,{children:[r.jsx(bt,{children:r.jsxs(Re,{children:[r.jsx(K,{children:"Receptora"}),r.jsx(K,{children:"Dias Gestao"}),r.jsx(K,{children:"Embrio(es)"}),r.jsx(K,{children:"Doadora / Touro"}),r.jsx(K,{children:"N Gest."}),r.jsx(K,{children:"Data Sexagem"}),r.jsx(K,{children:"Sexagens"}),r.jsx(K,{children:"Observaes"})]})}),r.jsx(jt,{children:c.map(D=>{var I;const N=_[D.receptora_id]||{data_sexagem:E,sexagens:new Array(D.numero_gestacoes).fill("").map(()=>""),observacoes:""},F=!!D.diagnostico_existente;return r.jsxs(Re,{children:[r.jsxs(Y,{className:"font-medium",children:[D.brinco,D.nome&&r.jsxs("span",{className:"text-slate-500 text-sm ml-2",children:["(",D.nome,")"]}),F&&r.jsx(kn,{status:((I=D.diagnostico_existente)==null?void 0:I.resultado)||"",className:"ml-2"})]}),r.jsxs(Y,{children:[r.jsx("span",{className:"font-semibold",children:D.dias_gestacao})," dias"]}),r.jsx(Y,{children:r.jsx("div",{className:"space-y-1",children:D.embrioes.map((j,A)=>r.jsx("div",{className:"text-sm",children:r.jsxs("div",{className:"font-medium",children:[j.embriao_identificacao||`Embrio ${A+1}`,j.embriao_classificacao&&r.jsxs("span",{className:"text-slate-500 ml-2",children:["(",j.embriao_classificacao,")"]})]})},j.te_id))})}),r.jsx(Y,{children:r.jsx("div",{className:"space-y-1",children:D.embrioes.map((j,A)=>r.jsx("div",{className:"text-sm",children:r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:j.doadora_registro||"-"}),j.doadora_registro&&j.touro_nome&&"  ",r.jsx("span",{className:"font-medium",children:j.touro_nome||""})]})},j.te_id))})}),r.jsx(Y,{className:"font-medium text-center",children:D.numero_gestacoes}),r.jsx(Y,{children:r.jsx(_e,{type:"date",value:N.data_sexagem,onChange:j=>Z(D.receptora_id,"data_sexagem",j.target.value),className:"w-36",disabled:i.status==="FECHADO"})}),r.jsx(Y,{children:r.jsx("div",{className:"flex gap-2",children:Array.from({length:D.numero_gestacoes},(j,A)=>{const L=N.sexagens[A]||"",P=L!==""?void 0:D.numero_gestacoes>1?`Gest. ${A+1}`:"Selecione";return r.jsxs(ht,{value:L,onValueChange:H=>$(D.receptora_id,A,H),disabled:i.status==="FECHADO",children:[r.jsx(lt,{className:"w-28",children:r.jsx(mt,{placeholder:P})}),r.jsxs(ct,{children:[r.jsx(Pe,{value:"FEMEA",children:"Fmea"}),r.jsx(Pe,{value:"MACHO",children:"Macho"}),r.jsx(Pe,{value:"SEM_SEXO",children:"Sem sexo"}),r.jsx(Pe,{value:"VAZIA",children:"Vazia"})]})]},A)})})}),r.jsx(Y,{children:r.jsx(Ma,{value:N.observacoes,onChange:j=>Z(D.receptora_id,"observacoes",j.target.value),placeholder:"Observaes",rows:2,className:"w-48",disabled:i.status==="FECHADO"})})]},D.receptora_id)})})]})})})]})]})}function Q5(){return r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-gray-50 to-blue-50 p-6 text-center",children:r.jsxs("div",{className:"space-y-6 max-w-md",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("h1",{className:"text-8xl font-bold text-blue-600",children:"404"}),r.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Page Not Found"}),r.jsx("p",{className:"text-muted-foreground",children:"The page you're looking for doesn't exist or may have been moved."})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[r.jsx(se,{asChild:!0,children:r.jsx("a",{href:"/",children:"Return Home"})}),r.jsx(se,{variant:"outline",onClick:()=>window.history.back(),children:"Go Back"})]})]})})}const K5=new $z,X5=()=>r.jsx(Bz,{client:K5,children:r.jsxs(vz,{children:[r.jsx(IT,{}),r.jsx(OD,{}),r.jsx(UM,{children:r.jsxs(PM,{children:[r.jsxs(Ct,{element:r.jsx(QM,{}),children:[r.jsx(Ct,{path:"/",element:r.jsx(fP,{})}),r.jsx(Ct,{path:"/clientes",element:r.jsx(pP,{})}),r.jsx(Ct,{path:"/clientes/novo",element:r.jsx(N_,{})}),r.jsx(Ct,{path:"/clientes/:id",element:r.jsx(kI,{})}),r.jsx(Ct,{path:"/clientes/:id/editar",element:r.jsx(N_,{})}),r.jsx(Ct,{path:"/fazendas",element:r.jsx(PI,{})}),r.jsx(Ct,{path:"/fazendas/:id",element:r.jsx(LI,{})}),r.jsx(Ct,{path:"/doadoras",element:r.jsx(v6,{})}),r.jsx(Ct,{path:"/doadoras/:id",element:r.jsx(w6,{})}),r.jsx(Ct,{path:"/receptoras",element:r.jsx(R6,{})}),r.jsx(Ct,{path:"/receptoras/:id/historico",element:r.jsx(QN,{})}),r.jsx(Ct,{path:"/protocolos",element:r.jsx(D6,{})}),r.jsx(Ct,{path:"/protocolos/novo",element:r.jsx(M5,{})}),r.jsx(Ct,{path:"/protocolos/:id",element:r.jsx(k5,{})}),r.jsx(Ct,{path:"/protocolos/:id/passo2",element:r.jsx($5,{})}),r.jsx(Ct,{path:"/protocolos/:id/relatorio",element:r.jsx(H_,{})}),r.jsx(Ct,{path:"/protocolos/fechados/:id/relatorio",element:r.jsx(H_,{})}),r.jsx(Ct,{path:"/aspiracoes",element:r.jsx(q5,{})}),r.jsx(Ct,{path:"/aspiracoes/novo",element:r.jsx(B5,{})}),r.jsx(Ct,{path:"/aspiracoes/:id",element:r.jsx(U5,{})}),r.jsx(Ct,{path:"/doses-semen",element:r.jsx(H5,{})}),r.jsx(Ct,{path:"/lotes-fiv",element:r.jsx(V_,{})}),r.jsx(Ct,{path:"/lotes-fiv/:id",element:r.jsx(V_,{})}),r.jsx(Ct,{path:"/embrioes",element:r.jsx(V5,{})}),r.jsx(Ct,{path:"/transferencia",element:r.jsx(G5,{})}),r.jsx(Ct,{path:"/dg",element:r.jsx(Z5,{})}),r.jsx(Ct,{path:"/sexagem",element:r.jsx(Y5,{})})]}),r.jsx(Ct,{path:"*",element:r.jsx(Q5,{})})]})})]})});nT.createRoot(document.getElementById("root")).render(r.jsx(X5,{}));
