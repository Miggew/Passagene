import{r as M,s as E,j as e,a as je,B as ee}from"./index-DM5u2d-F.js";import{a as Te,e as Ie,c as Ve,b as Xe}from"./dataEnrichment-DxfL8bbp.js";import{C as ae,a as se,b as te,d as re}from"./card-B_EQ6x91.js";import{T as Se,a as Ae,b as oe,c as R,d as be,e as F}from"./table-CEKyj1ed.js";import{S as Ne,a as we,b as Me,c as Re,d as U}from"./select-B_NoJ61H.js";import{I as ie}from"./input-CtUEWea1.js";import{L as J}from"./label-Bhhf9ayq.js";import{T as $e}from"./textarea-Kj1o8r55.js";import{P as Ge}from"./PageHeader-JgO8x5IE.js";import{E as qe}from"./EmptyState-ChaxWsz8.js";import{S as Be}from"./StatusBadge-CySQHNUG.js";import{u as Ze}from"./use-toast-BOUGyrIz.js";import{a as ke}from"./receptoraStatus-Bbt-P6Vj.js";import{D as Qe}from"./DatePickerBR-BEWFLeoy.js";import{C as Ue}from"./circle-check-big-DGOUcNX6.js";import{L as Je}from"./lock-C7PcKBaO.js";import"./index-ClZPXJQX.js";import"./index-sCsFC1oc.js";import"./index-CWb7Yp_3.js";import"./index-BEVMOrkK.js";import"./check-Y5eEMkO8.js";import"./badge-D_AVhbx8.js";import"./statusLabels-IklKT8dE.js";import"./popover-CNdtTvFz.js";import"./calendar-B_KmJ-VL.js";function Aa(){const[_e,ne]=M.useState([]),[D,pe]=M.useState(""),[ge,ce]=M.useState([]),[o,q]=M.useState(null),[z,I]=M.useState([]),[he,K]=M.useState(!1),[ue,fe]=M.useState(!1),[xe,X]=M.useState(!1),{toast:L}=Ze(),[B,$]=M.useState({}),[g,V]=M.useState({veterinario_responsavel:"",tecnico_responsavel:""}),de=new Date().toISOString().split("T")[0];M.useEffect(()=>{Fe()},[]),M.useEffect(()=>{D?ve(D):(ce([]),q(null),I([]),$({}))},[D]),M.useEffect(()=>{o?o.status==="FECHADO"?(V({veterinario_responsavel:o.veterinario_sexagem||"",tecnico_responsavel:o.tecnico_sexagem||""}),X(!1),W(o)):o.veterinario_sexagem&&o.tecnico_sexagem?(V({veterinario_responsavel:o.veterinario_sexagem,tecnico_responsavel:o.tecnico_sexagem}),X(!1),W(o)):(V({veterinario_responsavel:"",tecnico_responsavel:""}),X(!0),I([]),$({})):(I([]),$({}),X(!1))},[o]);const Fe=async()=>{try{const{data:a,error:t}=await E.from("fazendas").select("*").order("nome");if(t)throw t;const m=a||[],{data:l,error:d}=await E.from("vw_receptoras_fazenda_atual").select("receptora_id, fazenda_id_atual");if(d)throw d;const s=[...new Set((l||[]).map(n=>n.receptora_id).filter(Boolean))];if(s.length===0){ne([]);return}const{data:i,error:_}=await E.from("receptoras").select("id").in("id",s).in("status_reprodutivo",["PRENHE","PRENHE_RETOQUE"]);if(_)throw _;const h=(i==null?void 0:i.map(n=>n.id))||[];if(h.length===0){ne([]);return}const{data:N,error:C}=await E.from("transferencias_embrioes").select("receptora_id, data_te").in("receptora_id",h).eq("status_te","REALIZADA");if(C)throw C;const{data:S,error:O}=await E.from("diagnosticos_gestacao").select("receptora_id, data_te").in("receptora_id",h).eq("tipo_diagnostico","SEXAGEM");if(O)throw O;const r=new Map((l||[]).filter(n=>n.receptora_id&&n.fazenda_id_atual).map(n=>[n.receptora_id,n.fazenda_id_atual])),x=new Map,w=new Map;(N||[]).forEach(n=>{const v=r.get(n.receptora_id);if(!v)return;const p=`${v}|${n.data_te}`;w.set(p,v),x.has(p)||x.set(p,new Set),x.get(p).add(n.receptora_id)});const A=new Map;(S||[]).forEach(n=>{const v=r.get(n.receptora_id);if(!v)return;const p=`${v}|${n.data_te}`;A.has(p)||A.set(p,new Set),A.get(p).add(n.receptora_id)});const j=new Set;x.forEach((n,v)=>{var P;if((((P=A.get(v))==null?void 0:P.size)||0)<n.size){const b=w.get(v);b&&j.add(b)}});const y=m.filter(n=>j.has(n.id));ne(y),D&&!j.has(D)&&pe("")}catch(a){L({title:"Erro ao carregar fazendas",description:a instanceof Error?a.message:"Erro desconhecido",variant:"destructive"})}},ve=async a=>{try{K(!0);const{data:t}=await E.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",a),m=(t==null?void 0:t.map(r=>r.receptora_id))||[],{data:l}=await E.from("receptoras").select("id").in("id",m).in("status_reprodutivo",["PRENHE","PRENHE_RETOQUE","PRENHE_FEMEA","PRENHE_MACHO","PRENHE_SEM_SEXO","PRENHE_2_SEXOS"]),d=(l==null?void 0:l.map(r=>r.id))||[],{data:s}=await E.from("transferencias_embrioes").select("id, receptora_id, data_te").in("receptora_id",d).eq("status_te","REALIZADA").order("data_te",{ascending:!1}),{data:i}=await E.from("diagnosticos_gestacao").select("receptora_id, data_te, veterinario_responsavel, tecnico_responsavel, data_diagnostico").in("receptora_id",d).eq("tipo_diagnostico","SEXAGEM").order("data_diagnostico",{ascending:!1}),_=new Map,h=new Map;s==null||s.forEach(r=>{var A;const x=`${a}-${r.data_te}`,w=`${r.data_te}-${r.receptora_id}`;if(h.has(r.data_te)||h.set(r.data_te,new Set),h.get(r.data_te).add(r.receptora_id),!_.has(x)){const j=i==null?void 0:i.find(y=>y.data_te===r.data_te);_.set(x,{id:x,fazenda_id:a,fazenda_nome:((A=_e.find(y=>y.id===a))==null?void 0:A.nome)||"",data_te:r.data_te,quantidade_receptoras:0,veterinario_sexagem:(j==null?void 0:j.veterinario_responsavel)||void 0,tecnico_sexagem:(j==null?void 0:j.tecnico_responsavel)||void 0,status:"ABERTO"})}}),_.forEach(r=>{var A;const x=((A=h.get(r.data_te))==null?void 0:A.size)||0;r.quantidade_receptoras=x;const w=(i==null?void 0:i.filter(j=>j.data_te===r.data_te))||[];w.length>0&&w.length>=x&&(r.status="FECHADO")});const N=Array.from(_.values()).sort((r,x)=>new Date(x.data_te).getTime()-new Date(r.data_te).getTime()),C=N.filter(r=>r.status==="FECHADO").length,S=N.length-C,O=N.filter(r=>r.status==="ABERTO");ce(O)}catch(t){L({title:"Erro ao carregar lotes",description:t instanceof Error?t.message:"Erro desconhecido",variant:"destructive"}),ce([])}finally{K(!1)}},Ce=async()=>{if(!g.veterinario_responsavel.trim()||!g.tecnico_responsavel.trim()){L({title:"Erro de validação",description:"Veterinário e técnico responsáveis são obrigatórios",variant:"destructive"});return}if(!o)return;const a={...o,veterinario_sexagem:g.veterinario_responsavel.trim(),tecnico_sexagem:g.tecnico_responsavel.trim(),status:"ABERTO"};q(a),X(!1),await W(a)},W=async a=>{try{K(!0);const{data:t}=await E.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",a.fazenda_id),m=(t==null?void 0:t.map(c=>c.receptora_id))||[],{data:l}=await E.from("receptoras").select("id, identificacao, nome, status_reprodutivo").in("id",m).in("status_reprodutivo",["PRENHE","PRENHE_RETOQUE","PRENHE_FEMEA","PRENHE_MACHO","PRENHE_SEM_SEXO","PRENHE_2_SEXOS"]),d=(l==null?void 0:l.map(c=>c.id))||[];if(d.length===0){I([]);return}const[s,i,_]=await Promise.all([E.from("transferencias_embrioes").select("id, receptora_id, embriao_id, data_te").in("receptora_id",d).eq("data_te",a.data_te).eq("status_te","REALIZADA"),E.from("diagnosticos_gestacao").select("*").in("receptora_id",d).eq("tipo_diagnostico","DG").eq("data_te",a.data_te).order("data_diagnostico",{ascending:!1}),E.from("diagnosticos_gestacao").select("*").in("receptora_id",d).eq("tipo_diagnostico","SEXAGEM").eq("data_te",a.data_te).order("data_diagnostico",{ascending:!1})]),h=s.data,N=i.data,C=_.data;if(!h||h.length===0){I([]);return}const S=h.map(c=>c.embriao_id).filter(Boolean);let O=new Map;if(S.length>0){const{data:c}=await E.from("embrioes").select("id, identificacao, classificacao, lote_fiv_id, lote_fiv_acasalamento_id").in("id",S);c&&(O=new Map(c.map(u=>[u.id,u])))}const r=Array.from(O.values()),x=Te(r),w=Ie(r),[A,j]=await Promise.all([Ve(x),Xe(w)]),{doadorasMap:y,tourosMap:n}=j,v=new Map;N==null||N.forEach(c=>{v.has(c.receptora_id)||v.set(c.receptora_id,c)});const p=new Map;C==null||C.forEach(c=>{p.has(c.receptora_id)||p.set(c.receptora_id,c)});const P=new Map;h.forEach(c=>{const u=`${c.receptora_id}-${c.data_te}`;P.has(u)||P.set(u,[]),P.get(u).push(c)});const b=[];P.forEach((c,u)=>{const f=c[0],G=l==null?void 0:l.find(Y=>Y.id===f.receptora_id);if(!G)return;const T=[];let k=null,Q=null;if(c.forEach(Y=>{const H=O.get(Y.embriao_id);if(!H)return;const me=A.get(H.lote_fiv_id);if(!me)return;if(!k){k=me.data_abertura;const Le=new Date(me.data_abertura);Q=Math.floor((new Date().getTime()-Le.getTime())/(1e3*60*60*24))}const Pe=H.lote_fiv_acasalamento_id?y.get(H.lote_fiv_acasalamento_id):void 0,De=H.lote_fiv_acasalamento_id?n.get(H.lote_fiv_acasalamento_id):void 0;T.push({te_id:Y.id,embriao_id:H.id,embriao_identificacao:H.identificacao,embriao_classificacao:H.classificacao,lote_fiv_id:H.lote_fiv_id,lote_fiv_acasalamento_id:H.lote_fiv_acasalamento_id,doadora_registro:Pe,touro_nome:De})}),T.length===0||!k||Q===null)return;const le=v.get(f.receptora_id);!le||le.resultado==="VAZIA"||b.push({receptora_id:f.receptora_id,brinco:G.identificacao,nome:G.nome,data_te:f.data_te,embrioes:T,data_abertura_lote:k,dias_gestacao:Q,numero_gestacoes:le.numero_gestacoes||1,diagnostico_existente:p.get(f.receptora_id)?{id:p.get(f.receptora_id).id,data_diagnostico:p.get(f.receptora_id).data_diagnostico,resultado:p.get(f.receptora_id).resultado,numero_gestacoes:p.get(f.receptora_id).numero_gestacoes,observacoes:p.get(f.receptora_id).observacoes}:void 0})}),b.sort((c,u)=>c.brinco.localeCompare(u.brinco)),I(b);const Z={};b.forEach(c=>{if(c.diagnostico_existente){const u=p.get(c.receptora_id);let f=new Array(c.numero_gestacoes).fill("").map(()=>""),G=c.diagnostico_existente.observacoes||"";if(u!=null&&u.observacoes){const T=u.observacoes.match(/SEXAGENS:([^|]+)/);if(T){for(f=T[1].split(",").map(Q=>Q.trim());f.length<c.numero_gestacoes;)f.push("");f=f.slice(0,c.numero_gestacoes),G=u.observacoes.replace(/SEXAGENS:[^|]+\|?/,"").trim()}}f.every(T=>!T)&&(u!=null&&u.sexagem)&&(f[0]=u.sexagem),Z[c.receptora_id]={data_sexagem:c.diagnostico_existente.data_diagnostico,sexagens:f,observacoes:G}}else Z[c.receptora_id]={data_sexagem:de,sexagens:new Array(c.numero_gestacoes).fill("").map(()=>""),observacoes:""}}),$(Z)}catch(t){L({title:"Erro ao carregar receptoras",description:t instanceof Error?t.message:"Erro desconhecido",variant:"destructive"}),I([])}finally{K(!1)}},He=(a,t,m)=>{$(l=>{const d=l[a]||{data_sexagem:de,sexagens:[],observacoes:""},s=[...d.sexagens];return s[t]=m,{...l,[a]:{...d,sexagens:s}}})},Ee=(a,t,m)=>{$(l=>({...l,[a]:{...l[a],[t]:m}}))},Oe=(a,t)=>{const m=a.filter(i=>i&&i!=="VAZIA");if(m.length===0)return"VAZIA";const l=m.includes("FEMEA"),d=m.includes("MACHO"),s=m.includes("SEM_SEXO");return l&&!d&&!s?"PRENHE_FEMEA":d&&!l&&!s?"PRENHE_MACHO":l&&d?"PRENHE_2_SEXOS":"PRENHE_SEM_SEXO"},ye=async()=>{if(!o)return;if(!g.veterinario_responsavel.trim()||!g.tecnico_responsavel.trim()){L({title:"Erro de validação",description:"Veterinário e técnico responsáveis são obrigatórios",variant:"destructive"});return}const a=z.filter(t=>{const m=B[t.receptora_id];return!m||!m.data_sexagem||!m.sexagens||m.sexagens.length===0||m.sexagens.every(l=>!l)});if(a.length>0){L({title:"Erro de validação",description:`Há ${a.length} receptora(s) sem sexagem definida`,variant:"destructive"});return}try{fe(!0);const t=[],m=[],l=[];if(z.forEach(s=>{var j,y;const i=B[s.receptora_id];if(!i||!i.data_sexagem)return;const _=i.sexagens.filter(n=>n&&n!=="VAZIA"),h=i.sexagens.every(n=>!n||n==="VAZIA"),N=Oe(i.sexagens,s.numero_gestacoes),C=N==="VAZIA"?"VAZIA":"PRENHE";let S=null;if(C==="PRENHE"){const n=_.every(b=>b==="FEMEA")&&_.length>0,v=_.every(b=>b==="MACHO")&&_.length>0,p=_.includes("FEMEA")&&_.includes("MACHO"),P=_.includes("SEM_SEXO");n?S="FEMEA":v?S="MACHO":p?S=_[0]||"FEMEA":P?S=_.find(Z=>Z!=="SEM_SEXO")||null:_.length>0?S=_.find(b=>b==="FEMEA"||b==="MACHO")||null:S=null}const O=C==="VAZIA"?0:_.length;(S==="PRENHE"||S==="SEM_SEXO")&&(S=_.find(v=>v==="FEMEA"||v==="MACHO")||null);let r=i.observacoes?i.observacoes.trim():"";const x=i.sexagens.map(n=>n||"").filter(n=>n),w=x.length>0?x.join(","):"";w&&(r.includes("SEXAGENS:")?r=r.replace(/SEXAGENS:[^|]+/,`SEXAGENS:${w}`):r=r?`SEXAGENS:${w}|${r}`:`SEXAGENS:${w}`);const A={receptora_id:s.receptora_id,data_te:s.data_te,tipo_diagnostico:"SEXAGEM",data_diagnostico:i.data_sexagem,resultado:C,sexagem:S,numero_gestacoes:O,observacoes:r||void 0,veterinario_responsavel:((j=g.veterinario_responsavel)==null?void 0:j.trim())||void 0,tecnico_responsavel:((y=g.tecnico_responsavel)==null?void 0:y.trim())||void 0};s.diagnostico_existente?m.push({id:s.diagnostico_existente.id,...A}):t.push(A),l.push({receptora_id:s.receptora_id,status:N})}),t.length>0){const{error:s}=await E.from("diagnosticos_gestacao").insert(t);if(s)throw new Error(`Erro ao inserir sexagens: ${s.message}`)}if(m.length>0)for(const s of m){const{id:i,..._}=s,{error:h}=await E.from("diagnosticos_gestacao").update(_).eq("id",i);if(h)throw new Error(`Erro ao atualizar sexagem: ${h.message}`)}for(const s of l){const{error:i}=await ke(s.receptora_id,s.status);if(i)throw new Error(`Erro ao atualizar status da receptora ${s.receptora_id}`);if(s.status==="VAZIA"){const{error:_}=await E.from("receptoras").update({data_provavel_parto:null}).eq("id",s.receptora_id);if(_)throw new Error(`Erro ao limpar data provável de parto da receptora ${s.receptora_id}`)}}const d=z.every(s=>{const i=B[s.receptora_id];return i&&i.data_sexagem&&i.sexagens&&i.sexagens.some(_=>_)});q({...o,veterinario_sexagem:g.veterinario_responsavel.trim(),tecnico_sexagem:g.tecnico_responsavel.trim(),status:d?"FECHADO":"ABERTO"}),L({title:"Lote salvo com sucesso",description:`${z.length} sexagem(ns) registrada(s)`}),await ve(D),o&&await W(o)}catch(t){const m=t instanceof Error?t.message:"Erro desconhecido";L({title:"Erro ao salvar lote",description:m,variant:"destructive"})}finally{fe(!1)}},ze=z.every(a=>{const t=B[a.receptora_id];return t&&t.data_sexagem&&t.sexagens&&t.sexagens.some(m=>m)});return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ge,{title:"Sexagem",description:"Registrar sexagem fetal por lote de receptoras prenhes"}),e.jsxs(ae,{children:[e.jsx(se,{children:e.jsx(te,{children:"Selecionar Fazenda"})}),e.jsx(re,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"fazenda",children:"Fazenda *"}),e.jsxs(Ne,{value:D,onValueChange:pe,children:[e.jsx(we,{children:e.jsx(Me,{placeholder:"Selecione a fazenda"})}),e.jsx(Re,{children:_e.map(a=>e.jsx(U,{value:a.id,children:a.nome},a.id))})]})]})})]}),D&&e.jsxs(ae,{children:[e.jsx(se,{children:e.jsx(te,{children:"Lotes de Receptoras Prenhes"})}),e.jsx(re,{children:he?e.jsx(je,{}):ge.length===0?e.jsx(qe,{title:"Nenhum lote de receptoras prenhes encontrado",description:"Selecione outra fazenda ou verifique se há receptoras prenhes registradas."}):e.jsxs(Se,{children:[e.jsx(Ae,{children:e.jsxs(oe,{children:[e.jsx(R,{children:"Data TE"}),e.jsx(R,{children:"Quantidade"}),e.jsx(R,{children:"Vet. Sexagem"}),e.jsx(R,{children:"Téc. Sexagem"}),e.jsx(R,{className:"text-right",children:"Ações"})]})}),e.jsx(be,{children:ge.map(a=>e.jsxs(oe,{className:(o==null?void 0:o.id)===a.id?"bg-blue-50":"",children:[e.jsx(F,{className:"font-medium",children:new Date(a.data_te).toLocaleDateString("pt-BR")}),e.jsxs(F,{children:[a.quantidade_receptoras," receptoras"]}),e.jsx(F,{children:a.veterinario_sexagem||"-"}),e.jsx(F,{children:a.tecnico_sexagem||"-"}),e.jsx(F,{className:"text-right",children:e.jsx(ee,{size:"sm",onClick:()=>q(a),variant:(o==null?void 0:o.id)===a.id?"default":"outline",children:(o==null?void 0:o.id)===a.id?"Selecionado":"Selecionar"})})]},a.id))})]})})]}),o&&xe&&e.jsxs(ae,{children:[e.jsx(se,{children:e.jsx(te,{children:"Abrir Lote de Sexagem"})}),e.jsxs(re,{className:"space-y-4",children:[e.jsxs("p",{className:"text-slate-600",children:["Lote de TE em ",new Date(o.data_te).toLocaleDateString("pt-BR")," - ",o.quantidade_receptoras," receptoras prenhes"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"veterinario",children:"Veterinário Responsável *"}),e.jsx(ie,{id:"veterinario",value:g.veterinario_responsavel,onChange:a=>V({...g,veterinario_responsavel:a.target.value}),placeholder:"Nome do veterinário"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"tecnico",children:"Técnico Responsável *"}),e.jsx(ie,{id:"tecnico",value:g.tecnico_responsavel,onChange:a=>V({...g,tecnico_responsavel:a.target.value}),placeholder:"Nome do técnico"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ee,{onClick:Ce,className:"bg-green-600 hover:bg-green-700",disabled:!g.veterinario_responsavel.trim()||!g.tecnico_responsavel.trim(),children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Abrir Lote"]}),e.jsx(ee,{variant:"outline",onClick:()=>{X(!1),q(null)},children:"Cancelar"})]})]})]}),o&&!xe&&z.length>0&&e.jsxs(ae,{children:[e.jsx(se,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(te,{children:["Receptoras Prenhes do Lote - ",z.length," ",z.length===1?"receptora":"receptoras",o.status==="FECHADO"&&e.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"(Lote Fechado - Somente Leitura)"})]}),o.status==="ABERTO"&&e.jsxs(ee,{onClick:ye,disabled:!ze||ue,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),ue?"Salvando...":"Salvar Lote Completo"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"veterinario_sexagem",children:"Veterinário Responsável (Sexagem) *"}),e.jsx(ie,{id:"veterinario_sexagem",value:g.veterinario_responsavel,onChange:a=>V({...g,veterinario_responsavel:a.target.value}),placeholder:"Nome do veterinário",disabled:o.status==="FECHADO"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{htmlFor:"tecnico_sexagem",children:"Técnico Responsável (Sexagem) *"}),e.jsx(ie,{id:"tecnico_sexagem",value:g.tecnico_responsavel,onChange:a=>V({...g,tecnico_responsavel:a.target.value}),placeholder:"Nome do técnico",disabled:o.status==="FECHADO"})]})]})]})}),e.jsx(re,{children:he?e.jsx(je,{}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Se,{children:[e.jsx(Ae,{children:e.jsxs(oe,{children:[e.jsx(R,{children:"Receptora"}),e.jsx(R,{children:"Dias Gestação"}),e.jsx(R,{children:"Embrião(ões)"}),e.jsx(R,{children:"Doadora / Touro"}),e.jsx(R,{children:"Nº Gest."}),e.jsx(R,{children:"Data Sexagem"}),e.jsx(R,{children:"Sexagens"}),e.jsx(R,{children:"Observações"})]})}),e.jsx(be,{children:z.map(a=>{var l;const t=B[a.receptora_id]||{data_sexagem:de,sexagens:new Array(a.numero_gestacoes).fill("").map(()=>""),observacoes:""},m=!!a.diagnostico_existente;return e.jsxs(oe,{children:[e.jsxs(F,{className:"font-medium",children:[a.brinco,a.nome&&e.jsxs("span",{className:"text-slate-500 text-sm ml-2",children:["(",a.nome,")"]}),m&&e.jsx(Be,{status:((l=a.diagnostico_existente)==null?void 0:l.resultado)||"",className:"ml-2"})]}),e.jsxs(F,{children:[e.jsx("span",{className:"font-semibold",children:a.dias_gestacao})," dias"]}),e.jsx(F,{children:e.jsx("div",{className:"space-y-1",children:a.embrioes.map((d,s)=>e.jsx("div",{className:"text-sm",children:e.jsxs("div",{className:"font-medium",children:[d.embriao_identificacao||`Embrião ${s+1}`,d.embriao_classificacao&&e.jsxs("span",{className:"text-slate-500 ml-2",children:["(",d.embriao_classificacao,")"]})]})},d.te_id))})}),e.jsx(F,{children:e.jsx("div",{className:"space-y-1",children:a.embrioes.map((d,s)=>e.jsx("div",{className:"text-sm",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:d.doadora_registro||"-"}),d.doadora_registro&&d.touro_nome&&" × ",e.jsx("span",{className:"font-medium",children:d.touro_nome||""})]})},d.te_id))})}),e.jsx(F,{className:"font-medium text-center",children:a.numero_gestacoes}),e.jsx(F,{children:e.jsx(Qe,{value:t.data_sexagem,onChange:d=>Ee(a.receptora_id,"data_sexagem",d||""),className:"w-36",disabled:o.status==="FECHADO"})}),e.jsx(F,{children:e.jsx("div",{className:"flex gap-2",children:Array.from({length:a.numero_gestacoes},(d,s)=>{const i=t.sexagens[s]||"",h=i!==""?void 0:a.numero_gestacoes>1?`Gest. ${s+1}`:"Selecione";return e.jsxs(Ne,{value:i,onValueChange:N=>He(a.receptora_id,s,N),disabled:o.status==="FECHADO",children:[e.jsx(we,{className:"w-28",children:e.jsx(Me,{placeholder:h})}),e.jsxs(Re,{children:[e.jsx(U,{value:"FEMEA",children:"Fêmea"}),e.jsx(U,{value:"MACHO",children:"Macho"}),e.jsx(U,{value:"SEM_SEXO",children:"Sem sexo"}),e.jsx(U,{value:"VAZIA",children:"Vazia"})]})]},s)})})}),e.jsx(F,{children:e.jsx($e,{value:t.observacoes,onChange:d=>Ee(a.receptora_id,"observacoes",d.target.value),placeholder:"Observações",rows:2,className:"w-48",disabled:o.status==="FECHADO"})})]},a.receptora_id)})})]})})})]})]})}export{Aa as default};
