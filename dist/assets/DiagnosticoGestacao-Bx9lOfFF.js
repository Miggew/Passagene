import{b as Je,r as l,s as v,j as e,B as Ke,f as Xe}from"./index-B-7HRnm0.js";import{e as Ye,b as We,c as ea}from"./dataEnrichment-B3oy6j3b.js";import{t as aa}from"./dateUtils-eJ5e6apA.js";import{C as le,d as me,a as sa,b as ta,c as oa}from"./card-DdhhEbXV.js";import{T as ra,a as ia,b as Ce,c as R,d as na,e as A}from"./table-fky3lpGR.js";import{S as ue,a as _e,b as pe,c as fe,d as L}from"./select-B0M3FCy4.js";import{I as W}from"./input-D2h8r4MO.js";import{B as Ie}from"./badge-BCHVCiM7.js";import{P as ca}from"./PageHeader-CT7CFo0W.js";import{u as da}from"./use-toast-DDUqdzpY.js";import{v as la}from"./receptoraStatus-D9dFVedA.js";import{D as ma}from"./DatePickerBR-XHkKTcYs.js";import{u as ua,a as _a,D as M,v as pa,c as ye}from"./useLotesTE-Iu55zgB1.js";import{A as fa,a as ga,b as ha,c as va,d as xa,e as ja,f as ba,g as Ea}from"./alert-dialog-CSZ8uCy0.js";import{U as Na}from"./user-B8IJeGnS.js";import{M as wa}from"./map-pin-B7CeMiQc.js";import{S as Da}from"./save-DAusptDg.js";import{T as Te}from"./triangle-alert-DsRw1gwV.js";import"./index-B4eR1KA_.js";import"./check-C6h7QFZL.js";import"./chevron-right-DntnbvYp.js";import"./popover-i4alam_g.js";import"./pt-BR-DS62bWKG.js";import"./differenceInCalendarDays-CrzntjZV.js";import"./calendar-D8momPux.js";const q="passagene_dg_rascunho",Sa=24;function us(){Je();const{toast:C}=da(),V=aa(),[j,ge]=l.useState(""),[i,B]=l.useState(null),[f,I]=l.useState([]),[Fe,he]=l.useState(!1),[ve,xe]=l.useState(!1),[S,y]=l.useState({}),[g,U]=l.useState({veterinario_responsavel:"",tecnico_responsavel:""}),[Ra,Aa]=l.useState([]),[Pe,Ca]=l.useState([]),[Ia,ya]=l.useState(!1),[je,Ta]=l.useState("todos"),[Fa,Pa]=l.useState("todos"),[H,za]=l.useState(""),[ze,Oa]=l.useState("data_dg"),[k,Ha]=l.useState(""),[G,ka]=l.useState(""),[Ga,Oe]=l.useState([]),[be,$a]=l.useState(1),ee=15,[He,Q]=l.useState(!1),{fazendas:ae,loadFazendas:se}=ua({statusReceptoraFiltro:"SERVIDA"}),ke=l.useCallback((a,s)=>({...a,veterinario_dg:s==null?void 0:s.veterinario_responsavel,tecnico_dg:s==null?void 0:s.tecnico_responsavel}),[]),{lotesTE:Ee,loading:Ne,loadLotesTE:we}=_a({statusReceptoraFiltro:"SERVIDA",transformLote:ke}),De=()=>{try{const a=localStorage.getItem(q);if(!a)return null;const s=JSON.parse(a);return(Date.now()-s.timestamp)/(1e3*60*60)>Sa||!(Object.keys(s.formData).length>0)?(localStorage.removeItem(q),null):s}catch{return null}},Se=l.useCallback(()=>{if(!i||Object.keys(S).length===0||!Object.values(S).some(c=>c.resultado||c.numero_gestacoes||c.observacoes))return;const s={fazenda_id:j,lote_id:i.id,lote_data_te:i.data_te,formData:S,loteFormData:g,timestamp:Date.now()};localStorage.setItem(q,JSON.stringify(s))},[j,i,S,g]),Re=()=>{localStorage.removeItem(q)},Ge=async()=>{const a=De();a&&(ge(a.fazenda_id),U(a.loteFormData),sessionStorage.setItem("dg_formdata_restore",JSON.stringify(a.formData)),C({title:"Sessão restaurada",description:"Continuando o diagnóstico de onde você parou."})),Q(!1)},$e=()=>{Re(),sessionStorage.removeItem("dg_formdata_restore"),Q(!1)};l.useEffect(()=>{De()&&Q(!0)},[]),l.useEffect(()=>{Se()},[Se]),l.useEffect(()=>{const a=sessionStorage.getItem("dg_formdata_restore");if(a&&f.length>0)try{const s=JSON.parse(a),c={};f.forEach(t=>{s[t.receptora_id]?c[t.receptora_id]=s[t.receptora_id]:c[t.receptora_id]={resultado:"",numero_gestacoes:"1",observacoes:"",data_diagnostico:V}}),y(c),sessionStorage.removeItem("dg_formdata_restore")}catch{sessionStorage.removeItem("dg_formdata_restore")}},[f,V]),l.useEffect(()=>{se(),Le()},[se]),l.useEffect(()=>{var a;if(j){const s=(a=ae.find(c=>c.id===j))==null?void 0:a.nome;we(j,s)}else B(null),I([]),y({})},[j]),l.useEffect(()=>{i?((i.veterinario_dg||i.tecnico_dg)&&U({veterinario_responsavel:i.veterinario_dg||g.veterinario_responsavel,tecnico_responsavel:i.tecnico_dg||g.tecnico_responsavel}),Me(i)):(I([]),y({}))},[i]);const Le=async()=>{const{data:a}=await v.from("fazendas").select("id, nome").order("nome");Oe(a||[])},Me=async a=>{var s,c;try{he(!0);const{data:t,error:u}=await v.from("vw_receptoras_fazenda_atual").select("receptora_id").eq("fazenda_id_atual",a.fazenda_id);if(u)throw u;const N=(t==null?void 0:t.map(r=>r.receptora_id))||[];if(N.length===0){I([]);return}const[x,w]=await Promise.all([v.from("receptoras").select("id, identificacao, nome, status_reprodutivo").in("id",N).eq("status_reprodutivo","SERVIDA"),v.from("transferencias_embrioes").select("id, receptora_id, embriao_id, data_te").in("receptora_id",N).eq("data_te",a.data_te).eq("status_te","REALIZADA")]);if(x.error)throw x.error;if(w.error)throw w.error;const D=x.data,T=w.data;if(!T||T.length===0){I([]);return}const re=(D==null?void 0:D.map(r=>r.id))||[],d=T.map(r=>r.embriao_id).filter(Boolean);let n=new Map;if(d.length>0){const{data:r,error:p}=await v.from("embrioes").select("id, identificacao, classificacao, lote_fiv_id, lote_fiv_acasalamento_id").in("id",d);if(p)throw p;n=new Map((r==null?void 0:r.map(b=>[b.id,b]))||[])}const m=[...new Set(Array.from(n.values()).map(r=>r.lote_fiv_id).filter(Boolean))],o=Ye(Array.from(n.values())),[_,h,P]=await Promise.all([m.length>0?v.from("lotes_fiv").select("id, data_abertura").in("id",m):Promise.resolve({data:[],error:null}),We(o),v.from("diagnosticos_gestacao").select("*").in("receptora_id",re).eq("tipo_diagnostico","DG").eq("data_te",a.data_te).order("data_diagnostico",{ascending:!1})]);if(_.error)throw _.error;const F=new Map(((s=_.data)==null?void 0:s.map(r=>[r.id,r]))||[]),{doadorasMap:z,tourosMap:Ue}=h,ie=new Map;(c=P.data)==null||c.forEach(r=>{ie.has(r.receptora_id)||ie.set(r.receptora_id,r)});const J=new Map;T.forEach(r=>{const p=`${r.receptora_id}-${r.data_te}`;J.has(p)||J.set(p,[]),J.get(p).push(r)});const K=[];J.forEach(r=>{const p=r[0],b=D==null?void 0:D.find(Y=>Y.id===p.receptora_id);if(!b)return;const $=[];let X=null,ce=null;if(r.forEach(Y=>{const E=n.get(Y.embriao_id);if(!E)return;const de=F.get(E.lote_fiv_id);if(!de)return;X||(X=de.data_abertura,ce=ea(de.data_abertura));const Qe=E.lote_fiv_acasalamento_id?z.get(E.lote_fiv_acasalamento_id):void 0,Ze=E.lote_fiv_acasalamento_id?Ue.get(E.lote_fiv_acasalamento_id):void 0;$.push({te_id:Y.id,embriao_id:E.id,embriao_identificacao:E.identificacao,embriao_classificacao:E.classificacao,lote_fiv_id:E.lote_fiv_id,lote_fiv_acasalamento_id:E.lote_fiv_acasalamento_id,doadora_registro:Qe,touro_nome:Ze})}),$.length===0||!X||ce===null)return;const O=ie.get(p.receptora_id);K.push({receptora_id:p.receptora_id,brinco:b.identificacao,nome:b.nome,status_reprodutivo:b.status_reprodutivo,data_te:p.data_te,embrioes:$,data_abertura_lote:X,dias_gestacao:ce,diagnostico_existente:O?{id:O.id,data_diagnostico:O.data_diagnostico,resultado:O.resultado,numero_gestacoes:O.numero_gestacoes||void 0,observacoes:O.observacoes||void 0}:void 0})}),K.sort((r,p)=>r.brinco.localeCompare(p.brinco)),I(K);const ne={};K.forEach(r=>{var p;if(r.diagnostico_existente){const b=r.diagnostico_existente.resultado,$=((p=r.diagnostico_existente.numero_gestacoes)==null?void 0:p.toString())||(b==="PRENHE"||b==="RETOQUE"?"1":"");ne[r.receptora_id]={resultado:b,numero_gestacoes:$,observacoes:r.diagnostico_existente.observacoes||"",data_diagnostico:r.diagnostico_existente.data_diagnostico}}else ne[r.receptora_id]={resultado:"",numero_gestacoes:"",observacoes:"",data_diagnostico:V}}),y(ne)}catch(t){C({title:"Erro ao carregar receptoras",description:t instanceof Error?t.message:"Erro desconhecido",variant:"destructive"}),I([])}finally{he(!1)}},qe=(a,s)=>{y(c=>{const t=c[a]||{};let u=t.numero_gestacoes||"";return(s==="PRENHE"||s==="RETOQUE")&&!u?u="1":(s==="VAZIA"||s==="")&&(u=""),{...c,[a]:{...t,resultado:s,numero_gestacoes:u}}})},te=(a,s,c)=>{y(t=>({...t,[a]:{...t[a],[s]:c}}))},Ve=async()=>{var s,c;if(!i)return;if(!pa(g)){C({title:"Erro de validação",description:"Veterinário responsável é obrigatório",variant:"destructive"});return}const a=f.filter(t=>{const u=S[t.receptora_id];return!u||!u.resultado||!u.data_diagnostico});if(a.length>0){C({title:"Erro de validação",description:`Há ${a.length} receptora(s) sem resultado definido`,variant:"destructive"});return}try{xe(!0);for(const d of f){const n=d.status_reprodutivo||"VAZIA",m=la(n,"REALIZAR_DG");if(!m.valido){C({title:"Erro de validação",description:`Receptora ${d.brinco}: ${m.mensagem}`,variant:"destructive"});return}}const t=[],u=[],N=[];if(f.forEach(d=>{var h,P,F;const n=S[d.receptora_id];if(!n||!n.resultado||!n.data_diagnostico)return;const m={receptora_id:d.receptora_id,data_te:d.data_te,tipo_diagnostico:"DG",data_diagnostico:n.data_diagnostico,resultado:n.resultado,observacoes:((h=n.observacoes)==null?void 0:h.trim())||void 0};n.resultado==="PRENHE"||n.resultado==="RETOQUE"?m.numero_gestacoes=n.numero_gestacoes?parseInt(n.numero_gestacoes):1:m.numero_gestacoes=0,(P=g.veterinario_responsavel)!=null&&P.trim()&&(m.veterinario_responsavel=g.veterinario_responsavel.trim()),(F=g.tecnico_responsavel)!=null&&F.trim()&&(m.tecnico_responsavel=g.tecnico_responsavel.trim()),d.diagnostico_existente?u.push({id:d.diagnostico_existente.id,...m}):t.push(m);let o,_=null;n.resultado==="PRENHE"?(o="PRENHE",_=ye(d.data_abertura_lote)):n.resultado==="RETOQUE"?(o="PRENHE_RETOQUE",_=ye(d.data_abertura_lote)):o="VAZIA",N.push({receptora_id:d.receptora_id,status:o,dataParto:_})}),t.length>0){const{data:d}=await v.from("diagnosticos_gestacao").select("id, receptora_id, data_te, tipo_diagnostico").in("receptora_id",[...new Set(t.map(o=>o.receptora_id))]).eq("tipo_diagnostico","DG"),n=new Map;d==null||d.forEach(o=>{const _=`${o.receptora_id}-${o.data_te}-${o.tipo_diagnostico}`;n.set(_,o.id)});const m=[];if(t.forEach(o=>{const _=`${o.receptora_id}-${o.data_te}-${o.tipo_diagnostico}`,h=n.get(_);h?u.push({id:h,...o}):m.push(o)}),m.length>0){const{error:o}=await v.from("diagnosticos_gestacao").insert(m);if(o)if((s=o.message)!=null&&s.includes("column")||o.code==="42703"){const _=m.map(({veterinario_responsavel:P,tecnico_responsavel:F,...z})=>z),{error:h}=await v.from("diagnosticos_gestacao").insert(_);if(h)throw new Error(`Erro ao inserir diagnósticos: ${h.message}`)}else throw new Error(`Erro ao inserir diagnósticos: ${o.message}`)}}const x=u.map(async d=>{var _;const{id:n,...m}=d;let{error:o}=await v.from("diagnosticos_gestacao").update(m).eq("id",n);if(o&&((_=o.message)!=null&&_.includes("column")||o.code==="42703")){const{veterinario_responsavel:h,tecnico_responsavel:P,...F}=m,{error:z}=await v.from("diagnosticos_gestacao").update(F).eq("id",n);if(z)throw new Error(`Erro ao atualizar diagnóstico: ${z.message}`)}else if(o)throw new Error(`Erro ao atualizar diagnóstico: ${o.message}`)});await Promise.all(x);const w=new Map;N.forEach(({receptora_id:d,status:n,dataParto:m})=>{const o=`${n}|${m||"null"}`;w.has(o)||w.set(o,{ids:[],dataParto:m||null}),w.get(o).ids.push(d)});const D=Array.from(w.entries()).map(async([d,{ids:n,dataParto:m}])=>{const o=d.split("|")[0],_={status_reprodutivo:o};m?_.data_provavel_parto=m:o==="VAZIA"&&(_.data_provavel_parto=null);const{error:h}=await v.from("receptoras").update(_).in("id",n);if(h)throw new Error("Erro ao atualizar status das receptoras")});await Promise.all(D);const T=f.every(d=>{const n=S[d.receptora_id];return n&&n.resultado&&n.data_diagnostico});C({title:"Lote salvo com sucesso",description:T?`${f.length} diagnóstico(s) registrado(s). Lote fechado.`:`${f.length} diagnóstico(s) registrado(s)`}),Re(),T?(B(null),I([]),y({})):B({...i,veterinario_dg:g.veterinario_responsavel.trim(),tecnico_dg:g.tecnico_responsavel.trim(),status:"ABERTO"});const re=(c=ae.find(d=>d.id===j))==null?void 0:c.nome;se(),j&&we(j,re)}catch(t){C({title:"Erro ao salvar lote",description:t instanceof Error?t.message:"Erro desconhecido",variant:"destructive"})}finally{xe(!1)}},Be=f.every(a=>{const s=S[a.receptora_id];return s&&s.resultado&&s.data_diagnostico}),Ae=a=>{if(!a)return"-";const[s,c,t]=a.split("-");return`${t}/${c}/${s}`},oe=Pe.filter(a=>{var u;const s=!H||a.fazenda_nome.toLowerCase().includes(H.toLowerCase())||((u=a.veterinario_responsavel)==null?void 0:u.toLowerCase().includes(H.toLowerCase()))||a.receptoras.some(N=>{var x;return N.receptora_brinco.toLowerCase().includes(H.toLowerCase())||((x=N.receptora_nome)==null?void 0:x.toLowerCase().includes(H.toLowerCase()))}),c=je==="todos"||a.fazenda_nome===je;let t=!0;return ze==="data_dg"?(k&&(t=t&&a.data_diagnostico>=k),G&&(t=t&&a.data_diagnostico<=G)):(k||G)&&(t=a.receptoras.some(x=>{if(!x.data_provavel_parto)return!1;const w=!k||x.data_provavel_parto>=k,D=!G||x.data_provavel_parto<=G;return w&&D})),s&&c&&t});Math.ceil(oe.length/ee),oe.slice((be-1)*ee,be*ee);const Z=oe.reduce((a,s)=>({total:a.total+s.total_receptoras,prenhes:a.prenhes+s.prenhes,vazias:a.vazias+s.vazias,retoques:a.retoques+s.retoques,sessoes:a.sessoes+1}),{total:0,prenhes:0,vazias:0,retoques:0,sessoes:0});return Z.total>0&&Math.round((Z.prenhes+Z.retoques)/Z.total*100),e.jsxs("div",{className:"space-y-6",children:[e.jsx(ca,{title:"Diagnóstico de Gestação (DG)",description:"Registrar diagnósticos de gestação por lote de TE"}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"rounded-xl border border-border bg-gradient-to-r from-card via-card to-muted/30 p-4 mb-4",children:[e.jsxs("div",{className:"flex flex-wrap items-end gap-6",children:[e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("div",{className:"w-1 h-6 rounded-full bg-primary/40 self-center"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground self-center",children:[e.jsx(Na,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Responsáveis"})]}),e.jsxs("div",{className:"flex-1 min-w-[160px]",children:[e.jsx("label",{className:"text-[10px] font-medium text-muted-foreground mb-1 block uppercase tracking-wide",children:"Veterinário *"}),e.jsx(W,{placeholder:"Nome do veterinário",value:g.veterinario_responsavel,onChange:a=>U(s=>({...s,veterinario_responsavel:a.target.value})),className:"h-9"})]}),e.jsxs("div",{className:"flex-1 min-w-[160px]",children:[e.jsx("label",{className:"text-[10px] font-medium text-muted-foreground mb-1 block uppercase tracking-wide",children:"Técnico"}),e.jsx(W,{placeholder:"Nome do técnico",value:g.tecnico_responsavel,onChange:a=>U(s=>({...s,tecnico_responsavel:a.target.value})),className:"h-9"})]})]}),e.jsx("div",{className:"h-10 w-px bg-border hidden lg:block"}),e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("div",{className:"w-1 h-6 rounded-full bg-emerald-500/40 self-center"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground self-center",children:[e.jsx(wa,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Local"})]}),e.jsxs("div",{className:"flex-1 min-w-[160px]",children:[e.jsx("label",{className:"text-[10px] font-medium text-muted-foreground mb-1 block uppercase tracking-wide",children:"Fazenda *"}),e.jsxs(ue,{value:j,onValueChange:ge,disabled:!g.veterinario_responsavel,children:[e.jsx(_e,{className:"h-9",children:e.jsx(pe,{placeholder:"Selecione a fazenda"})}),e.jsx(fe,{children:ae.map(a=>e.jsx(L,{value:a.id,children:a.nome},a.id))})]})]}),e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"text-[10px] font-medium text-muted-foreground mb-1 block uppercase tracking-wide",children:"Lote TE *"}),e.jsxs(ue,{value:(i==null?void 0:i.id)||"",onValueChange:a=>{const s=Ee.find(c=>c.id===a);B(s||null)},disabled:!j||Ne,children:[e.jsx(_e,{className:"h-9",children:e.jsx(pe,{placeholder:Ne?"Carregando...":"Selecione o lote"})}),e.jsx(fe,{children:Ee.map(a=>{const s=a.dias_gestacao!==void 0&&a.dias_gestacao<M.DG;return e.jsx(L,{value:a.id,children:e.jsxs("span",{className:s?"text-amber-600":"",children:[Ae(a.data_te)," • ",a.dias_gestacao??"?","d • ",a.quantidade_receptoras," rec.",s&&" ⚠️"]})},a.id)})})]})]})]}),e.jsx("div",{className:"h-10 w-px bg-border hidden lg:block"}),e.jsx("div",{className:"flex items-end gap-3 ml-auto",children:e.jsxs(Ke,{onClick:Ve,disabled:!i||!Be||ve||(i==null?void 0:i.status)==="FECHADO"||(i==null?void 0:i.dias_gestacao)!==void 0&&i.dias_gestacao<M.DG,className:"h-9 px-6 bg-primary hover:bg-primary-dark shadow-sm",children:[e.jsx(Da,{className:"w-4 h-4 mr-2"}),ve?"Salvando...":"Salvar Lote"]})})]}),i&&i.dias_gestacao!==void 0&&i.dias_gestacao<M.DG&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 p-2 bg-amber-50 dark:bg-amber-950/50 border border-amber-200 dark:border-amber-800 rounded-lg",children:[e.jsx(Te,{className:"h-4 w-4 text-amber-600 dark:text-amber-400 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:["Este lote está com ",i.dias_gestacao," dias. DG requer mínimo de ",M.DG," dias (faltam ",M.DG-i.dias_gestacao,")."]})]})]}),Fe?e.jsx(le,{children:e.jsx(me,{className:"py-8",children:e.jsx(Xe,{})})}):i&&f.length>0?e.jsxs(le,{children:[e.jsx(sa,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsx(ta,{className:"text-base",children:"Receptoras do Lote"}),e.jsxs(oa,{children:[f.length," receptora(s) • TE em ",Ae(i.data_te)]})]}),i.status==="FECHADO"&&e.jsx(Ie,{variant:"secondary",children:"Lote Fechado"})]})})}),e.jsx(me,{className:"pt-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ra,{children:[e.jsx(ia,{children:e.jsxs(Ce,{children:[e.jsx(R,{children:"Receptora"}),e.jsx(R,{children:"Dias Gest."}),e.jsx(R,{children:"Embrião"}),e.jsx(R,{children:"Doadora × Touro"}),e.jsx(R,{children:"Data DG"}),e.jsx(R,{children:"Resultado"}),e.jsx(R,{children:"Nº Gest."}),e.jsx(R,{children:"Obs."})]})}),e.jsx(na,{children:f.map(a=>{const s=S[a.receptora_id]||{resultado:"",numero_gestacoes:"",observacoes:"",data_diagnostico:V},c=i.status==="FECHADO";return e.jsxs(Ce,{children:[e.jsx(A,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[a.brinco,a.nome&&e.jsxs("span",{className:"text-muted-foreground text-xs",children:["(",a.nome,")"]})]})}),e.jsx(A,{children:e.jsxs(Ie,{variant:"outline",className:"font-mono",children:[a.dias_gestacao,"d"]})}),e.jsx(A,{children:e.jsx("div",{className:"space-y-0.5",children:a.embrioes.map((t,u)=>e.jsxs("div",{className:"text-sm",children:[t.embriao_identificacao||`#${u+1}`,t.embriao_classificacao&&e.jsxs("span",{className:"text-muted-foreground text-xs ml-1",children:["(",t.embriao_classificacao,")"]})]},t.te_id))})}),e.jsx(A,{children:e.jsx("div",{className:"space-y-0.5 text-sm",children:a.embrioes.map(t=>e.jsxs("div",{children:[t.doadora_registro||"-",t.touro_nome&&` × ${t.touro_nome}`]},t.te_id))})}),e.jsx(A,{children:e.jsx(ma,{value:s.data_diagnostico,onChange:t=>te(a.receptora_id,"data_diagnostico",t||""),className:"w-32",disabled:c})}),e.jsx(A,{children:e.jsxs(ue,{value:s.resultado,onValueChange:t=>qe(a.receptora_id,t),disabled:c,children:[e.jsx(_e,{className:"w-28 h-9",children:e.jsx(pe,{placeholder:"--"})}),e.jsxs(fe,{children:[e.jsx(L,{value:"PRENHE",children:"PRENHE"}),e.jsx(L,{value:"VAZIA",children:"VAZIA"}),e.jsx(L,{value:"RETOQUE",children:"RETOQUE"})]})]})}),e.jsx(A,{children:s.resultado==="PRENHE"||s.resultado==="RETOQUE"?e.jsx(W,{type:"number",min:"1",max:"3",value:s.numero_gestacoes,onChange:t=>te(a.receptora_id,"numero_gestacoes",t.target.value),className:"w-16 h-9",disabled:c}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(A,{children:e.jsx(W,{value:s.observacoes,onChange:t=>te(a.receptora_id,"observacoes",t.target.value),placeholder:"Obs.",className:"w-32 h-9",disabled:c})})]},a.receptora_id)})})]})})})]}):i&&f.length===0?e.jsx(le,{children:e.jsx(me,{className:"py-8 text-center text-muted-foreground",children:"Nenhuma receptora encontrada neste lote"})}):null]}),e.jsx(fa,{open:He,onOpenChange:Q,children:e.jsxs(ga,{children:[e.jsxs(ha,{children:[e.jsxs(va,{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-5 w-5 text-primary"}),"Diagnóstico de gestação não finalizado"]}),e.jsx(xa,{children:"Você tem um diagnóstico de gestação em andamento que não foi finalizado. Deseja continuar de onde parou?"})]}),e.jsxs(ja,{children:[e.jsx(ba,{onClick:$e,children:"Descartar"}),e.jsx(Ea,{onClick:Ge,children:"Restaurar"})]})]})})]})}export{us as default};
